var gD=Object.defineProperty;var yD=(e,t,r)=>t in e?gD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var BN=(e,t,r)=>(yD(e,typeof t!="symbol"?t+"":t,r),r);function vD(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UT={exports:{}},Jh={},WT={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Of=Symbol.for("react.element"),bD=Symbol.for("react.portal"),wD=Symbol.for("react.fragment"),ND=Symbol.for("react.strict_mode"),jD=Symbol.for("react.profiler"),SD=Symbol.for("react.provider"),CD=Symbol.for("react.context"),kD=Symbol.for("react.forward_ref"),OD=Symbol.for("react.suspense"),TD=Symbol.for("react.memo"),_D=Symbol.for("react.lazy"),UN=Symbol.iterator;function ED(e){return e===null||typeof e!="object"?null:(e=UN&&e[UN]||e["@@iterator"],typeof e=="function"?e:null)}var qT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KT=Object.assign,zT={};function $c(e,t,r){this.props=e,this.context=t,this.refs=zT,this.updater=r||qT}$c.prototype.isReactComponent={};$c.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$c.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function VT(){}VT.prototype=$c.prototype;function Pb(e,t,r){this.props=e,this.context=t,this.refs=zT,this.updater=r||qT}var Ib=Pb.prototype=new VT;Ib.constructor=Pb;KT(Ib,$c.prototype);Ib.isPureReactComponent=!0;var WN=Array.isArray,HT=Object.prototype.hasOwnProperty,Db={current:null},GT={key:!0,ref:!0,__self:!0,__source:!0};function XT(e,t,r){var a,s={},i=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)HT.call(t,a)&&!GT.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)s[a]===void 0&&(s[a]=l[a]);return{$$typeof:Of,type:e,key:i,ref:o,props:s,_owner:Db.current}}function AD(e,t){return{$$typeof:Of,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Of}function PD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var qN=/\/+/g;function bp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PD(""+e.key):t.toString(36)}function H0(e,t,r,a,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Of:case bD:o=!0}}if(o)return o=e,s=s(o),e=a===""?"."+bp(o,0):a,WN(s)?(r="",e!=null&&(r=e.replace(qN,"$&/")+"/"),H0(s,t,r,"",function(u){return u})):s!=null&&(Mb(s)&&(s=AD(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qN,"$&/")+"/")+e)),t.push(s)),1;if(o=0,a=a===""?".":a+":",WN(e))for(var l=0;l<e.length;l++){i=e[l];var c=a+bp(i,l);o+=H0(i,t,r,c,s)}else if(c=ED(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=a+bp(i,l++),o+=H0(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function e0(e,t,r){if(e==null)return e;var a=[],s=0;return H0(e,a,"","",function(i){return t.call(r,i,s++)}),a}function ID(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fa={current:null},G0={transition:null},DD={ReactCurrentDispatcher:Fa,ReactCurrentBatchConfig:G0,ReactCurrentOwner:Db};function YT(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:e0,forEach:function(e,t,r){e0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return e0(e,function(){t++}),t},toArray:function(e){return e0(e,function(t){return t})||[]},only:function(e){if(!Mb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jt.Component=$c;jt.Fragment=wD;jt.Profiler=jD;jt.PureComponent=Pb;jt.StrictMode=ND;jt.Suspense=OD;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DD;jt.act=YT;jt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=KT({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Db.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)HT.call(t,c)&&!GT.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:Of,type:e.type,key:s,ref:i,props:a,_owner:o}};jt.createContext=function(e){return e={$$typeof:CD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SD,_context:e},e.Consumer=e};jt.createElement=XT;jt.createFactory=function(e){var t=XT.bind(null,e);return t.type=e,t};jt.createRef=function(){return{current:null}};jt.forwardRef=function(e){return{$$typeof:kD,render:e}};jt.isValidElement=Mb;jt.lazy=function(e){return{$$typeof:_D,_payload:{_status:-1,_result:e},_init:ID}};jt.memo=function(e,t){return{$$typeof:TD,type:e,compare:t===void 0?null:t}};jt.startTransition=function(e){var t=G0.transition;G0.transition={};try{e()}finally{G0.transition=t}};jt.unstable_act=YT;jt.useCallback=function(e,t){return Fa.current.useCallback(e,t)};jt.useContext=function(e){return Fa.current.useContext(e)};jt.useDebugValue=function(){};jt.useDeferredValue=function(e){return Fa.current.useDeferredValue(e)};jt.useEffect=function(e,t){return Fa.current.useEffect(e,t)};jt.useId=function(){return Fa.current.useId()};jt.useImperativeHandle=function(e,t,r){return Fa.current.useImperativeHandle(e,t,r)};jt.useInsertionEffect=function(e,t){return Fa.current.useInsertionEffect(e,t)};jt.useLayoutEffect=function(e,t){return Fa.current.useLayoutEffect(e,t)};jt.useMemo=function(e,t){return Fa.current.useMemo(e,t)};jt.useReducer=function(e,t,r){return Fa.current.useReducer(e,t,r)};jt.useRef=function(e){return Fa.current.useRef(e)};jt.useState=function(e){return Fa.current.useState(e)};jt.useSyncExternalStore=function(e,t,r){return Fa.current.useSyncExternalStore(e,t,r)};jt.useTransition=function(){return Fa.current.useTransition()};jt.version="18.3.1";WT.exports=jt;var T=WT.exports;const le=Qt(T),MD=vD({__proto__:null,default:le},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FD=T,RD=Symbol.for("react.element"),LD=Symbol.for("react.fragment"),$D=Object.prototype.hasOwnProperty,BD=FD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UD={key:!0,ref:!0,__self:!0,__source:!0};function QT(e,t,r){var a,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)$D.call(t,a)&&!UD.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:RD,type:e,key:i,ref:o,props:s,_owner:BD.current}}Jh.Fragment=LD;Jh.jsx=QT;Jh.jsxs=QT;UT.exports=Jh;var n=UT.exports,Vg={},JT={exports:{}},fn={},ZT={exports:{}},e_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,V){var re=H.length;H.push(V);e:for(;0<re;){var oe=re-1>>>1,U=H[oe];if(0<s(U,V))H[oe]=V,H[re]=U,re=oe;else break e}}function r(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var V=H[0],re=H.pop();if(re!==V){H[0]=re;e:for(var oe=0,U=H.length,J=U>>>1;oe<J;){var Q=2*(oe+1)-1,X=H[Q],ee=Q+1,ue=H[ee];if(0>s(X,re))ee<U&&0>s(ue,X)?(H[oe]=ue,H[ee]=re,oe=ee):(H[oe]=X,H[Q]=re,oe=Q);else if(ee<U&&0>s(ue,re))H[oe]=ue,H[ee]=re,oe=ee;else break e}}return V}function s(H,V){var re=H.sortIndex-V.sortIndex;return re!==0?re:H.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,p=!1,g=!1,h=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(H){for(var V=r(u);V!==null;){if(V.callback===null)a(u);else if(V.startTime<=H)a(u),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(u)}}function x(H){if(h=!1,v(H),!g)if(r(c)!==null)g=!0,F(b);else{var V=r(u);V!==null&&q(x,V.startTime-H)}}function b(H,V){g=!1,h&&(h=!1,w(O),O=-1),p=!0;var re=m;try{for(v(V),f=r(c);f!==null&&(!(f.expirationTime>V)||H&&!k());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,m=f.priorityLevel;var U=oe(f.expirationTime<=V);V=e.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&a(c),v(V)}else a(c);f=r(c)}if(f!==null)var J=!0;else{var Q=r(u);Q!==null&&q(x,Q.startTime-V),J=!1}return J}finally{f=null,m=re,p=!1}}var N=!1,j=null,O=-1,_=5,E=-1;function k(){return!(e.unstable_now()-E<_)}function C(){if(j!==null){var H=e.unstable_now();E=H;var V=!0;try{V=j(!0,H)}finally{V?A():(N=!1,j=null)}}else N=!1}var A;if(typeof S=="function")A=function(){S(C)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,I=P.port2;P.port1.onmessage=C,A=function(){I.postMessage(null)}}else A=function(){y(C,0)};function F(H){j=H,N||(N=!0,A())}function q(H,V){O=y(function(){H(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,F(b))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var re=m;m=V;try{return H()}finally{m=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=m;m=H;try{return V()}finally{m=re}},e.unstable_scheduleCallback=function(H,V,re){var oe=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?oe+re:oe):re=oe,H){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=re+U,H={id:d++,callback:V,priorityLevel:H,startTime:re,expirationTime:U,sortIndex:-1},re>oe?(H.sortIndex=re,t(u,H),r(c)===null&&H===r(u)&&(h?(w(O),O=-1):h=!0,q(x,re-oe))):(H.sortIndex=U,t(c,H),g||p||(g=!0,F(b))),H},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(H){var V=m;return function(){var re=m;m=V;try{return H.apply(this,arguments)}finally{m=re}}}})(e_);ZT.exports=e_;var WD=ZT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD=T,on=WD;function Fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t_=new Set,id={};function el(e,t){sc(e,t),sc(e+"Capture",t)}function sc(e,t){for(id[e]=t,e=0;e<t.length;e++)t_.add(t[e])}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hg=Object.prototype.hasOwnProperty,KD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KN={},zN={};function zD(e){return Hg.call(zN,e)?!0:Hg.call(KN,e)?!1:KD.test(e)?zN[e]=!0:(KN[e]=!0,!1)}function VD(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function HD(e,t,r,a){if(t===null||typeof t>"u"||VD(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ra(e,t,r,a,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fa[e]=new Ra(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fa[t]=new Ra(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fa[e]=new Ra(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fa[e]=new Ra(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fa[e]=new Ra(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fa[e]=new Ra(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fa[e]=new Ra(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fa[e]=new Ra(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fa[e]=new Ra(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fb=/[\-:]([a-z])/g;function Rb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fb,Rb);fa[t]=new Ra(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fb,Rb);fa[t]=new Ra(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fb,Rb);fa[t]=new Ra(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fa[e]=new Ra(e,1,!1,e.toLowerCase(),null,!1,!1)});fa.xlinkHref=new Ra("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fa[e]=new Ra(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lb(e,t,r,a){var s=fa.hasOwnProperty(t)?fa[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(HD(t,r,s,a)&&(r=null),a||s===null?zD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,a=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Ys=qD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,t0=Symbol.for("react.element"),kl=Symbol.for("react.portal"),Ol=Symbol.for("react.fragment"),$b=Symbol.for("react.strict_mode"),Gg=Symbol.for("react.profiler"),r_=Symbol.for("react.provider"),a_=Symbol.for("react.context"),Bb=Symbol.for("react.forward_ref"),Xg=Symbol.for("react.suspense"),Yg=Symbol.for("react.suspense_list"),Ub=Symbol.for("react.memo"),ci=Symbol.for("react.lazy"),n_=Symbol.for("react.offscreen"),VN=Symbol.iterator;function cu(e){return e===null||typeof e!="object"?null:(e=VN&&e[VN]||e["@@iterator"],typeof e=="function"?e:null)}var pr=Object.assign,wp;function Tu(e){if(wp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);wp=t&&t[1]||""}return`
`+wp+e}var Np=!1;function jp(e,t){if(!e||Np)return"";Np=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var a=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){a=u}e.call(t.prototype)}else{try{throw Error()}catch(u){a=u}e()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=a.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Np=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Tu(e):""}function GD(e){switch(e.tag){case 5:return Tu(e.type);case 16:return Tu("Lazy");case 13:return Tu("Suspense");case 19:return Tu("SuspenseList");case 0:case 2:case 15:return e=jp(e.type,!1),e;case 11:return e=jp(e.type.render,!1),e;case 1:return e=jp(e.type,!0),e;default:return""}}function Qg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ol:return"Fragment";case kl:return"Portal";case Gg:return"Profiler";case $b:return"StrictMode";case Xg:return"Suspense";case Yg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case a_:return(e.displayName||"Context")+".Consumer";case r_:return(e._context.displayName||"Context")+".Provider";case Bb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ub:return t=e.displayName||null,t!==null?t:Qg(e.type)||"Memo";case ci:t=e._payload,e=e._init;try{return Qg(e(t))}catch{}}return null}function XD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qg(t);case 8:return t===$b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Di(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function s_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YD(e){var t=s_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){a=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function r0(e){e._valueTracker||(e._valueTracker=YD(e))}function i_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=s_(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function im(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jg(e,t){var r=t.checked;return pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function HN(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Di(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function o_(e,t){t=t.checked,t!=null&&Lb(e,"checked",t,!1)}function Zg(e,t){o_(e,t);var r=Di(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ey(e,t.type,r):t.hasOwnProperty("defaultValue")&&ey(e,t.type,Di(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function GN(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ey(e,t,r){(t!=="number"||im(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _u=Array.isArray;function ql(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Di(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ty(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function XN(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Fe(92));if(_u(r)){if(1<r.length)throw Error(Fe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Di(r)}}function l_(e,t){var r=Di(t.value),a=Di(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function YN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function c_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ry(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?c_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var a0,u_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(a0=a0||document.createElement("div"),a0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=a0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function od(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Lu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QD=["Webkit","ms","Moz","O"];Object.keys(Lu).forEach(function(e){QD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lu[t]=Lu[e]})});function d_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Lu.hasOwnProperty(e)&&Lu[e]?(""+t).trim():t+"px"}function f_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,s=d_(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}var JD=pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ay(e,t){if(t){if(JD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Fe(62))}}function ny(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sy=null;function Wb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var iy=null,Kl=null,zl=null;function QN(e){if(e=Ef(e)){if(typeof iy!="function")throw Error(Fe(280));var t=e.stateNode;t&&(t=ax(t),iy(e.stateNode,e.type,t))}}function m_(e){Kl?zl?zl.push(e):zl=[e]:Kl=e}function h_(){if(Kl){var e=Kl,t=zl;if(zl=Kl=null,QN(e),t)for(e=0;e<t.length;e++)QN(t[e])}}function x_(e,t){return e(t)}function p_(){}var Sp=!1;function g_(e,t,r){if(Sp)return e(t,r);Sp=!0;try{return x_(e,t,r)}finally{Sp=!1,(Kl!==null||zl!==null)&&(p_(),h_())}}function ld(e,t){var r=e.stateNode;if(r===null)return null;var a=ax(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Fe(231,t,typeof r));return r}var oy=!1;if(Ws)try{var uu={};Object.defineProperty(uu,"passive",{get:function(){oy=!0}}),window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{oy=!1}function ZD(e,t,r,a,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var $u=!1,om=null,lm=!1,ly=null,eM={onError:function(e){$u=!0,om=e}};function tM(e,t,r,a,s,i,o,l,c){$u=!1,om=null,ZD.apply(eM,arguments)}function rM(e,t,r,a,s,i,o,l,c){if(tM.apply(this,arguments),$u){if($u){var u=om;$u=!1,om=null}else throw Error(Fe(198));lm||(lm=!0,ly=u)}}function tl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function y_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function JN(e){if(tl(e)!==e)throw Error(Fe(188))}function aM(e){var t=e.alternate;if(!t){if(t=tl(e),t===null)throw Error(Fe(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(a=s.return,a!==null){r=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return JN(s),e;if(i===a)return JN(s),t;i=i.sibling}throw Error(Fe(188))}if(r.return!==a.return)r=s,a=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,a=i;break}if(l===a){o=!0,a=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,a=s;break}if(l===a){o=!0,a=i,r=s;break}l=l.sibling}if(!o)throw Error(Fe(189))}}if(r.alternate!==a)throw Error(Fe(190))}if(r.tag!==3)throw Error(Fe(188));return r.stateNode.current===r?e:t}function v_(e){return e=aM(e),e!==null?b_(e):null}function b_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=b_(e);if(t!==null)return t;e=e.sibling}return null}var w_=on.unstable_scheduleCallback,ZN=on.unstable_cancelCallback,nM=on.unstable_shouldYield,sM=on.unstable_requestPaint,kr=on.unstable_now,iM=on.unstable_getCurrentPriorityLevel,qb=on.unstable_ImmediatePriority,N_=on.unstable_UserBlockingPriority,cm=on.unstable_NormalPriority,oM=on.unstable_LowPriority,j_=on.unstable_IdlePriority,Zh=null,ms=null;function lM(e){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(Zh,e,void 0,(e.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:dM,cM=Math.log,uM=Math.LN2;function dM(e){return e>>>=0,e===0?32:31-(cM(e)/uM|0)|0}var n0=64,s0=4194304;function Eu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function um(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?a=Eu(l):(i&=o,i!==0&&(a=Eu(i)))}else o=r&~s,o!==0?a=Eu(o):i!==0&&(a=Eu(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Zn(t),s=1<<r,a|=e[r],t&=~s;return a}function fM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mM(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Zn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&a)&&(s[o]=fM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function cy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S_(){var e=n0;return n0<<=1,!(n0&4194240)&&(n0=64),e}function Cp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Tf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zn(t),e[t]=r}function hM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Zn(r),i=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~i}}function Kb(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Zn(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var Kt=0;function C_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var k_,zb,O_,T_,__,uy=!1,i0=[],ji=null,Si=null,Ci=null,cd=new Map,ud=new Map,fi=[],xM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ej(e,t){switch(e){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":cd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(t.pointerId)}}function du(e,t,r,a,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ef(t),t!==null&&zb(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function pM(e,t,r,a,s){switch(t){case"focusin":return ji=du(ji,e,t,r,a,s),!0;case"dragenter":return Si=du(Si,e,t,r,a,s),!0;case"mouseover":return Ci=du(Ci,e,t,r,a,s),!0;case"pointerover":var i=s.pointerId;return cd.set(i,du(cd.get(i)||null,e,t,r,a,s)),!0;case"gotpointercapture":return i=s.pointerId,ud.set(i,du(ud.get(i)||null,e,t,r,a,s)),!0}return!1}function E_(e){var t=yo(e.target);if(t!==null){var r=tl(t);if(r!==null){if(t=r.tag,t===13){if(t=y_(r),t!==null){e.blockedOn=t,__(e.priority,function(){O_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function X0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=dy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);sy=a,r.target.dispatchEvent(a),sy=null}else return t=Ef(r),t!==null&&zb(t),e.blockedOn=r,!1;t.shift()}return!0}function tj(e,t,r){X0(e)&&r.delete(t)}function gM(){uy=!1,ji!==null&&X0(ji)&&(ji=null),Si!==null&&X0(Si)&&(Si=null),Ci!==null&&X0(Ci)&&(Ci=null),cd.forEach(tj),ud.forEach(tj)}function fu(e,t){e.blockedOn===t&&(e.blockedOn=null,uy||(uy=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,gM)))}function dd(e){function t(s){return fu(s,e)}if(0<i0.length){fu(i0[0],e);for(var r=1;r<i0.length;r++){var a=i0[r];a.blockedOn===e&&(a.blockedOn=null)}}for(ji!==null&&fu(ji,e),Si!==null&&fu(Si,e),Ci!==null&&fu(Ci,e),cd.forEach(t),ud.forEach(t),r=0;r<fi.length;r++)a=fi[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<fi.length&&(r=fi[0],r.blockedOn===null);)E_(r),r.blockedOn===null&&fi.shift()}var Vl=Ys.ReactCurrentBatchConfig,dm=!0;function yM(e,t,r,a){var s=Kt,i=Vl.transition;Vl.transition=null;try{Kt=1,Vb(e,t,r,a)}finally{Kt=s,Vl.transition=i}}function vM(e,t,r,a){var s=Kt,i=Vl.transition;Vl.transition=null;try{Kt=4,Vb(e,t,r,a)}finally{Kt=s,Vl.transition=i}}function Vb(e,t,r,a){if(dm){var s=dy(e,t,r,a);if(s===null)Mp(e,t,a,fm,r),ej(e,a);else if(pM(s,e,t,r,a))a.stopPropagation();else if(ej(e,a),t&4&&-1<xM.indexOf(e)){for(;s!==null;){var i=Ef(s);if(i!==null&&k_(i),i=dy(e,t,r,a),i===null&&Mp(e,t,a,fm,r),i===s)break;s=i}s!==null&&a.stopPropagation()}else Mp(e,t,a,null,r)}}var fm=null;function dy(e,t,r,a){if(fm=null,e=Wb(a),e=yo(e),e!==null)if(t=tl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=y_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fm=e,null}function A_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iM()){case qb:return 1;case N_:return 4;case cm:case oM:return 16;case j_:return 536870912;default:return 16}default:return 16}}var xi=null,Hb=null,Y0=null;function P_(){if(Y0)return Y0;var e,t=Hb,r=t.length,a,s="value"in xi?xi.value:xi.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(a=1;a<=o&&t[r-a]===s[i-a];a++);return Y0=s.slice(e,1<a?1-a:void 0)}function Q0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function o0(){return!0}function rj(){return!1}function mn(e){function t(r,a,s,i,o){this._reactName=r,this._targetInst=s,this.type=a,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?o0:rj,this.isPropagationStopped=rj,this}return pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=o0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=o0)},persist:function(){},isPersistent:o0}),t}var Bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gb=mn(Bc),_f=pr({},Bc,{view:0,detail:0}),bM=mn(_f),kp,Op,mu,ex=pr({},_f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mu&&(mu&&e.type==="mousemove"?(kp=e.screenX-mu.screenX,Op=e.screenY-mu.screenY):Op=kp=0,mu=e),kp)},movementY:function(e){return"movementY"in e?e.movementY:Op}}),aj=mn(ex),wM=pr({},ex,{dataTransfer:0}),NM=mn(wM),jM=pr({},_f,{relatedTarget:0}),Tp=mn(jM),SM=pr({},Bc,{animationName:0,elapsedTime:0,pseudoElement:0}),CM=mn(SM),kM=pr({},Bc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OM=mn(kM),TM=pr({},Bc,{data:0}),nj=mn(TM),_M={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AM[e])?!!t[e]:!1}function Xb(){return PM}var IM=pr({},_f,{key:function(e){if(e.key){var t=_M[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Q0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?EM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xb,charCode:function(e){return e.type==="keypress"?Q0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Q0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DM=mn(IM),MM=pr({},ex,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sj=mn(MM),FM=pr({},_f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xb}),RM=mn(FM),LM=pr({},Bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),$M=mn(LM),BM=pr({},ex,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),UM=mn(BM),WM=[9,13,27,32],Yb=Ws&&"CompositionEvent"in window,Bu=null;Ws&&"documentMode"in document&&(Bu=document.documentMode);var qM=Ws&&"TextEvent"in window&&!Bu,I_=Ws&&(!Yb||Bu&&8<Bu&&11>=Bu),ij=String.fromCharCode(32),oj=!1;function D_(e,t){switch(e){case"keyup":return WM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tl=!1;function KM(e,t){switch(e){case"compositionend":return M_(t);case"keypress":return t.which!==32?null:(oj=!0,ij);case"textInput":return e=t.data,e===ij&&oj?null:e;default:return null}}function zM(e,t){if(Tl)return e==="compositionend"||!Yb&&D_(e,t)?(e=P_(),Y0=Hb=xi=null,Tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return I_&&t.locale!=="ko"?null:t.data;default:return null}}var VM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!VM[e.type]:t==="textarea"}function F_(e,t,r,a){m_(a),t=mm(t,"onChange"),0<t.length&&(r=new Gb("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Uu=null,fd=null;function HM(e){H_(e,0)}function tx(e){var t=Al(e);if(i_(t))return e}function GM(e,t){if(e==="change")return t}var R_=!1;if(Ws){var _p;if(Ws){var Ep="oninput"in document;if(!Ep){var cj=document.createElement("div");cj.setAttribute("oninput","return;"),Ep=typeof cj.oninput=="function"}_p=Ep}else _p=!1;R_=_p&&(!document.documentMode||9<document.documentMode)}function uj(){Uu&&(Uu.detachEvent("onpropertychange",L_),fd=Uu=null)}function L_(e){if(e.propertyName==="value"&&tx(fd)){var t=[];F_(t,fd,e,Wb(e)),g_(HM,t)}}function XM(e,t,r){e==="focusin"?(uj(),Uu=t,fd=r,Uu.attachEvent("onpropertychange",L_)):e==="focusout"&&uj()}function YM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tx(fd)}function QM(e,t){if(e==="click")return tx(t)}function JM(e,t){if(e==="input"||e==="change")return tx(t)}function ZM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var as=typeof Object.is=="function"?Object.is:ZM;function md(e,t){if(as(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!Hg.call(t,s)||!as(e[s],t[s]))return!1}return!0}function dj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fj(e,t){var r=dj(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dj(r)}}function $_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function B_(){for(var e=window,t=im();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=im(e.document)}return t}function Qb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eF(e){var t=B_(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&$_(r.ownerDocument.documentElement,r)){if(a!==null&&Qb(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(a.start,s);a=a.end===void 0?i:Math.min(a.end,s),!e.extend&&i>a&&(s=a,a=i,i=s),s=fj(r,i);var o=fj(r,a);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tF=Ws&&"documentMode"in document&&11>=document.documentMode,_l=null,fy=null,Wu=null,my=!1;function mj(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;my||_l==null||_l!==im(a)||(a=_l,"selectionStart"in a&&Qb(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wu&&md(Wu,a)||(Wu=a,a=mm(fy,"onSelect"),0<a.length&&(t=new Gb("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=_l)))}function l0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var El={animationend:l0("Animation","AnimationEnd"),animationiteration:l0("Animation","AnimationIteration"),animationstart:l0("Animation","AnimationStart"),transitionend:l0("Transition","TransitionEnd")},Ap={},U_={};Ws&&(U_=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function rx(e){if(Ap[e])return Ap[e];if(!El[e])return e;var t=El[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in U_)return Ap[e]=t[r];return e}var W_=rx("animationend"),q_=rx("animationiteration"),K_=rx("animationstart"),z_=rx("transitionend"),V_=new Map,hj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(e,t){V_.set(e,t),el(t,[e])}for(var Pp=0;Pp<hj.length;Pp++){var Ip=hj[Pp],rF=Ip.toLowerCase(),aF=Ip[0].toUpperCase()+Ip.slice(1);Ui(rF,"on"+aF)}Ui(W_,"onAnimationEnd");Ui(q_,"onAnimationIteration");Ui(K_,"onAnimationStart");Ui("dblclick","onDoubleClick");Ui("focusin","onFocus");Ui("focusout","onBlur");Ui(z_,"onTransitionEnd");sc("onMouseEnter",["mouseout","mouseover"]);sc("onMouseLeave",["mouseout","mouseover"]);sc("onPointerEnter",["pointerout","pointerover"]);sc("onPointerLeave",["pointerout","pointerover"]);el("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));el("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));el("onBeforeInput",["compositionend","keypress","textInput","paste"]);el("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));el("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));el("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Au));function xj(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,rM(a,t,void 0,e),e.currentTarget=null}function H_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var l=a[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;xj(s,l,u),i=c}else for(o=0;o<a.length;o++){if(l=a[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;xj(s,l,u),i=c}}}if(lm)throw e=ly,lm=!1,ly=null,e}function rr(e,t){var r=t[yy];r===void 0&&(r=t[yy]=new Set);var a=e+"__bubble";r.has(a)||(G_(t,e,2,!1),r.add(a))}function Dp(e,t,r){var a=0;t&&(a|=4),G_(r,e,a,t)}var c0="_reactListening"+Math.random().toString(36).slice(2);function hd(e){if(!e[c0]){e[c0]=!0,t_.forEach(function(r){r!=="selectionchange"&&(nF.has(r)||Dp(r,!1,e),Dp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[c0]||(t[c0]=!0,Dp("selectionchange",!1,t))}}function G_(e,t,r,a){switch(A_(t)){case 1:var s=yM;break;case 4:s=vM;break;default:s=Vb}r=s.bind(null,t,r,e),s=void 0,!oy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Mp(e,t,r,a,s){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var l=a.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=yo(l),o===null)return;if(c=o.tag,c===5||c===6){a=i=o;continue e}l=l.parentNode}}a=a.return}g_(function(){var u=i,d=Wb(r),f=[];e:{var m=V_.get(e);if(m!==void 0){var p=Gb,g=e;switch(e){case"keypress":if(Q0(r)===0)break e;case"keydown":case"keyup":p=DM;break;case"focusin":g="focus",p=Tp;break;case"focusout":g="blur",p=Tp;break;case"beforeblur":case"afterblur":p=Tp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=aj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=NM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=RM;break;case W_:case q_:case K_:p=CM;break;case z_:p=$M;break;case"scroll":p=bM;break;case"wheel":p=UM;break;case"copy":case"cut":case"paste":p=OM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sj}var h=(t&4)!==0,y=!h&&e==="scroll",w=h?m!==null?m+"Capture":null:m;h=[];for(var S=u,v;S!==null;){v=S;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,w!==null&&(x=ld(S,w),x!=null&&h.push(xd(S,x,v)))),y)break;S=S.return}0<h.length&&(m=new p(m,g,null,r,d),f.push({event:m,listeners:h}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==sy&&(g=r.relatedTarget||r.fromElement)&&(yo(g)||g[qs]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?yo(g):null,g!==null&&(y=tl(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(h=aj,x="onMouseLeave",w="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(h=sj,x="onPointerLeave",w="onPointerEnter",S="pointer"),y=p==null?m:Al(p),v=g==null?m:Al(g),m=new h(x,S+"leave",p,r,d),m.target=y,m.relatedTarget=v,x=null,yo(d)===u&&(h=new h(w,S+"enter",g,r,d),h.target=v,h.relatedTarget=y,x=h),y=x,p&&g)t:{for(h=p,w=g,S=0,v=h;v;v=hl(v))S++;for(v=0,x=w;x;x=hl(x))v++;for(;0<S-v;)h=hl(h),S--;for(;0<v-S;)w=hl(w),v--;for(;S--;){if(h===w||w!==null&&h===w.alternate)break t;h=hl(h),w=hl(w)}h=null}else h=null;p!==null&&pj(f,m,p,h,!1),g!==null&&y!==null&&pj(f,y,g,h,!0)}}e:{if(m=u?Al(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var b=GM;else if(lj(m))if(R_)b=JM;else{b=YM;var N=XM}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=QM);if(b&&(b=b(e,u))){F_(f,b,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&ey(m,"number",m.value)}switch(N=u?Al(u):window,e){case"focusin":(lj(N)||N.contentEditable==="true")&&(_l=N,fy=u,Wu=null);break;case"focusout":Wu=fy=_l=null;break;case"mousedown":my=!0;break;case"contextmenu":case"mouseup":case"dragend":my=!1,mj(f,r,d);break;case"selectionchange":if(tF)break;case"keydown":case"keyup":mj(f,r,d)}var j;if(Yb)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Tl?D_(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(I_&&r.locale!=="ko"&&(Tl||O!=="onCompositionStart"?O==="onCompositionEnd"&&Tl&&(j=P_()):(xi=d,Hb="value"in xi?xi.value:xi.textContent,Tl=!0)),N=mm(u,O),0<N.length&&(O=new nj(O,e,null,r,d),f.push({event:O,listeners:N}),j?O.data=j:(j=M_(r),j!==null&&(O.data=j)))),(j=qM?KM(e,r):zM(e,r))&&(u=mm(u,"onBeforeInput"),0<u.length&&(d=new nj("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}H_(f,t)})}function xd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function mm(e,t){for(var r=t+"Capture",a=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ld(e,r),i!=null&&a.unshift(xd(e,i,s)),i=ld(e,t),i!=null&&a.push(xd(e,i,s))),e=e.return}return a}function hl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pj(e,t,r,a,s){for(var i=t._reactName,o=[];r!==null&&r!==a;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===a)break;l.tag===5&&u!==null&&(l=u,s?(c=ld(r,i),c!=null&&o.unshift(xd(r,c,l))):s||(c=ld(r,i),c!=null&&o.push(xd(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var sF=/\r\n?/g,iF=/\u0000|\uFFFD/g;function gj(e){return(typeof e=="string"?e:""+e).replace(sF,`
`).replace(iF,"")}function u0(e,t,r){if(t=gj(t),gj(e)!==t&&r)throw Error(Fe(425))}function hm(){}var hy=null,xy=null;function py(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gy=typeof setTimeout=="function"?setTimeout:void 0,oF=typeof clearTimeout=="function"?clearTimeout:void 0,yj=typeof Promise=="function"?Promise:void 0,lF=typeof queueMicrotask=="function"?queueMicrotask:typeof yj<"u"?function(e){return yj.resolve(null).then(e).catch(cF)}:gy;function cF(e){setTimeout(function(){throw e})}function Fp(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){e.removeChild(s),dd(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=s}while(r);dd(t)}function ki(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Uc=Math.random().toString(36).slice(2),us="__reactFiber$"+Uc,pd="__reactProps$"+Uc,qs="__reactContainer$"+Uc,yy="__reactEvents$"+Uc,uF="__reactListeners$"+Uc,dF="__reactHandles$"+Uc;function yo(e){var t=e[us];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qs]||r[us]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vj(e);e!==null;){if(r=e[us])return r;e=vj(e)}return t}e=r,r=e.parentNode}return null}function Ef(e){return e=e[us]||e[qs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Al(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Fe(33))}function ax(e){return e[pd]||null}var vy=[],Pl=-1;function Wi(e){return{current:e}}function ir(e){0>Pl||(e.current=vy[Pl],vy[Pl]=null,Pl--)}function tr(e,t){Pl++,vy[Pl]=e.current,e.current=t}var Mi={},ka=Wi(Mi),Wa=Wi(!1),Do=Mi;function ic(e,t){var r=e.type.contextTypes;if(!r)return Mi;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qa(e){return e=e.childContextTypes,e!=null}function xm(){ir(Wa),ir(ka)}function bj(e,t,r){if(ka.current!==Mi)throw Error(Fe(168));tr(ka,t),tr(Wa,r)}function X_(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(Fe(108,XD(e)||"Unknown",s));return pr({},r,a)}function pm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,Do=ka.current,tr(ka,e),tr(Wa,Wa.current),!0}function wj(e,t,r){var a=e.stateNode;if(!a)throw Error(Fe(169));r?(e=X_(e,t,Do),a.__reactInternalMemoizedMergedChildContext=e,ir(Wa),ir(ka),tr(ka,e)):ir(Wa),tr(Wa,r)}var Os=null,nx=!1,Rp=!1;function Y_(e){Os===null?Os=[e]:Os.push(e)}function fF(e){nx=!0,Y_(e)}function qi(){if(!Rp&&Os!==null){Rp=!0;var e=0,t=Kt;try{var r=Os;for(Kt=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Os=null,nx=!1}catch(s){throw Os!==null&&(Os=Os.slice(e+1)),w_(qb,qi),s}finally{Kt=t,Rp=!1}}return null}var Il=[],Dl=0,gm=null,ym=0,Sn=[],Cn=0,Mo=null,Ts=1,_s="";function uo(e,t){Il[Dl++]=ym,Il[Dl++]=gm,gm=e,ym=t}function Q_(e,t,r){Sn[Cn++]=Ts,Sn[Cn++]=_s,Sn[Cn++]=Mo,Mo=e;var a=Ts;e=_s;var s=32-Zn(a)-1;a&=~(1<<s),r+=1;var i=32-Zn(t)+s;if(30<i){var o=s-s%5;i=(a&(1<<o)-1).toString(32),a>>=o,s-=o,Ts=1<<32-Zn(t)+s|r<<s|a,_s=i+e}else Ts=1<<i|r<<s|a,_s=e}function Jb(e){e.return!==null&&(uo(e,1),Q_(e,1,0))}function Zb(e){for(;e===gm;)gm=Il[--Dl],Il[Dl]=null,ym=Il[--Dl],Il[Dl]=null;for(;e===Mo;)Mo=Sn[--Cn],Sn[Cn]=null,_s=Sn[--Cn],Sn[Cn]=null,Ts=Sn[--Cn],Sn[Cn]=null}var nn=null,an=null,ur=!1,Hn=null;function J_(e,t){var r=kn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Nj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nn=e,an=ki(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nn=e,an=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Mo!==null?{id:Ts,overflow:_s}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=kn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,nn=e,an=null,!0):!1;default:return!1}}function by(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wy(e){if(ur){var t=an;if(t){var r=t;if(!Nj(e,t)){if(by(e))throw Error(Fe(418));t=ki(r.nextSibling);var a=nn;t&&Nj(e,t)?J_(a,r):(e.flags=e.flags&-4097|2,ur=!1,nn=e)}}else{if(by(e))throw Error(Fe(418));e.flags=e.flags&-4097|2,ur=!1,nn=e}}}function jj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nn=e}function d0(e){if(e!==nn)return!1;if(!ur)return jj(e),ur=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!py(e.type,e.memoizedProps)),t&&(t=an)){if(by(e))throw Z_(),Error(Fe(418));for(;t;)J_(e,t),t=ki(t.nextSibling)}if(jj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){an=ki(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}an=null}}else an=nn?ki(e.stateNode.nextSibling):null;return!0}function Z_(){for(var e=an;e;)e=ki(e.nextSibling)}function oc(){an=nn=null,ur=!1}function e1(e){Hn===null?Hn=[e]:Hn.push(e)}var mF=Ys.ReactCurrentBatchConfig;function hu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Fe(309));var a=r.stateNode}if(!a)throw Error(Fe(147,e));var s=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Fe(284));if(!r._owner)throw Error(Fe(290,e))}return e}function f0(e,t){throw e=Object.prototype.toString.call(t),Error(Fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sj(e){var t=e._init;return t(e._payload)}function e4(e){function t(w,S){if(e){var v=w.deletions;v===null?(w.deletions=[S],w.flags|=16):v.push(S)}}function r(w,S){if(!e)return null;for(;S!==null;)t(w,S),S=S.sibling;return null}function a(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function s(w,S){return w=Ei(w,S),w.index=0,w.sibling=null,w}function i(w,S,v){return w.index=v,e?(v=w.alternate,v!==null?(v=v.index,v<S?(w.flags|=2,S):v):(w.flags|=2,S)):(w.flags|=1048576,S)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,S,v,x){return S===null||S.tag!==6?(S=Kp(v,w.mode,x),S.return=w,S):(S=s(S,v),S.return=w,S)}function c(w,S,v,x){var b=v.type;return b===Ol?d(w,S,v.props.children,x,v.key):S!==null&&(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ci&&Sj(b)===S.type)?(x=s(S,v.props),x.ref=hu(w,S,v),x.return=w,x):(x=nm(v.type,v.key,v.props,null,w.mode,x),x.ref=hu(w,S,v),x.return=w,x)}function u(w,S,v,x){return S===null||S.tag!==4||S.stateNode.containerInfo!==v.containerInfo||S.stateNode.implementation!==v.implementation?(S=zp(v,w.mode,x),S.return=w,S):(S=s(S,v.children||[]),S.return=w,S)}function d(w,S,v,x,b){return S===null||S.tag!==7?(S=ko(v,w.mode,x,b),S.return=w,S):(S=s(S,v),S.return=w,S)}function f(w,S,v){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Kp(""+S,w.mode,v),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case t0:return v=nm(S.type,S.key,S.props,null,w.mode,v),v.ref=hu(w,null,S),v.return=w,v;case kl:return S=zp(S,w.mode,v),S.return=w,S;case ci:var x=S._init;return f(w,x(S._payload),v)}if(_u(S)||cu(S))return S=ko(S,w.mode,v,null),S.return=w,S;f0(w,S)}return null}function m(w,S,v,x){var b=S!==null?S.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:l(w,S,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case t0:return v.key===b?c(w,S,v,x):null;case kl:return v.key===b?u(w,S,v,x):null;case ci:return b=v._init,m(w,S,b(v._payload),x)}if(_u(v)||cu(v))return b!==null?null:d(w,S,v,x,null);f0(w,v)}return null}function p(w,S,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(v)||null,l(S,w,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case t0:return w=w.get(x.key===null?v:x.key)||null,c(S,w,x,b);case kl:return w=w.get(x.key===null?v:x.key)||null,u(S,w,x,b);case ci:var N=x._init;return p(w,S,v,N(x._payload),b)}if(_u(x)||cu(x))return w=w.get(v)||null,d(S,w,x,b,null);f0(S,x)}return null}function g(w,S,v,x){for(var b=null,N=null,j=S,O=S=0,_=null;j!==null&&O<v.length;O++){j.index>O?(_=j,j=null):_=j.sibling;var E=m(w,j,v[O],x);if(E===null){j===null&&(j=_);break}e&&j&&E.alternate===null&&t(w,j),S=i(E,S,O),N===null?b=E:N.sibling=E,N=E,j=_}if(O===v.length)return r(w,j),ur&&uo(w,O),b;if(j===null){for(;O<v.length;O++)j=f(w,v[O],x),j!==null&&(S=i(j,S,O),N===null?b=j:N.sibling=j,N=j);return ur&&uo(w,O),b}for(j=a(w,j);O<v.length;O++)_=p(j,w,O,v[O],x),_!==null&&(e&&_.alternate!==null&&j.delete(_.key===null?O:_.key),S=i(_,S,O),N===null?b=_:N.sibling=_,N=_);return e&&j.forEach(function(k){return t(w,k)}),ur&&uo(w,O),b}function h(w,S,v,x){var b=cu(v);if(typeof b!="function")throw Error(Fe(150));if(v=b.call(v),v==null)throw Error(Fe(151));for(var N=b=null,j=S,O=S=0,_=null,E=v.next();j!==null&&!E.done;O++,E=v.next()){j.index>O?(_=j,j=null):_=j.sibling;var k=m(w,j,E.value,x);if(k===null){j===null&&(j=_);break}e&&j&&k.alternate===null&&t(w,j),S=i(k,S,O),N===null?b=k:N.sibling=k,N=k,j=_}if(E.done)return r(w,j),ur&&uo(w,O),b;if(j===null){for(;!E.done;O++,E=v.next())E=f(w,E.value,x),E!==null&&(S=i(E,S,O),N===null?b=E:N.sibling=E,N=E);return ur&&uo(w,O),b}for(j=a(w,j);!E.done;O++,E=v.next())E=p(j,w,O,E.value,x),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?O:E.key),S=i(E,S,O),N===null?b=E:N.sibling=E,N=E);return e&&j.forEach(function(C){return t(w,C)}),ur&&uo(w,O),b}function y(w,S,v,x){if(typeof v=="object"&&v!==null&&v.type===Ol&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case t0:e:{for(var b=v.key,N=S;N!==null;){if(N.key===b){if(b=v.type,b===Ol){if(N.tag===7){r(w,N.sibling),S=s(N,v.props.children),S.return=w,w=S;break e}}else if(N.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ci&&Sj(b)===N.type){r(w,N.sibling),S=s(N,v.props),S.ref=hu(w,N,v),S.return=w,w=S;break e}r(w,N);break}else t(w,N);N=N.sibling}v.type===Ol?(S=ko(v.props.children,w.mode,x,v.key),S.return=w,w=S):(x=nm(v.type,v.key,v.props,null,w.mode,x),x.ref=hu(w,S,v),x.return=w,w=x)}return o(w);case kl:e:{for(N=v.key;S!==null;){if(S.key===N)if(S.tag===4&&S.stateNode.containerInfo===v.containerInfo&&S.stateNode.implementation===v.implementation){r(w,S.sibling),S=s(S,v.children||[]),S.return=w,w=S;break e}else{r(w,S);break}else t(w,S);S=S.sibling}S=zp(v,w.mode,x),S.return=w,w=S}return o(w);case ci:return N=v._init,y(w,S,N(v._payload),x)}if(_u(v))return g(w,S,v,x);if(cu(v))return h(w,S,v,x);f0(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,S!==null&&S.tag===6?(r(w,S.sibling),S=s(S,v),S.return=w,w=S):(r(w,S),S=Kp(v,w.mode,x),S.return=w,w=S),o(w)):r(w,S)}return y}var lc=e4(!0),t4=e4(!1),vm=Wi(null),bm=null,Ml=null,t1=null;function r1(){t1=Ml=bm=null}function a1(e){var t=vm.current;ir(vm),e._currentValue=t}function Ny(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Hl(e,t){bm=e,t1=Ml=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ba=!0),e.firstContext=null)}function Dn(e){var t=e._currentValue;if(t1!==e)if(e={context:e,memoizedValue:t,next:null},Ml===null){if(bm===null)throw Error(Fe(308));Ml=e,bm.dependencies={lanes:0,firstContext:e}}else Ml=Ml.next=e;return t}var vo=null;function n1(e){vo===null?vo=[e]:vo.push(e)}function r4(e,t,r,a){var s=t.interleaved;return s===null?(r.next=r,n1(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ks(e,a)}function Ks(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ui=!1;function s1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,At&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Ks(e,r)}return s=a.interleaved,s===null?(t.next=t,n1(a)):(t.next=s.next,s.next=t),a.interleaved=t,Ks(e,r)}function J0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Kb(e,r)}}function Cj(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function wm(e,t,r,a){var s=e.updateQueue;ui=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((a&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,h=l;switch(m=t,p=r,h.tag){case 1:if(g=h.payload,typeof g=="function"){f=g.call(p,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=h.payload,m=typeof g=="function"?g.call(p,f,m):g,m==null)break e;f=pr({},f,m);break e;case 2:ui=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ro|=o,e.lanes=o,e.memoizedState=f}}function kj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=r,typeof s!="function")throw Error(Fe(191,s));s.call(a)}}}var Af={},hs=Wi(Af),gd=Wi(Af),yd=Wi(Af);function bo(e){if(e===Af)throw Error(Fe(174));return e}function i1(e,t){switch(tr(yd,t),tr(gd,e),tr(hs,Af),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ry(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ry(t,e)}ir(hs),tr(hs,t)}function cc(){ir(hs),ir(gd),ir(yd)}function n4(e){bo(yd.current);var t=bo(hs.current),r=ry(t,e.type);t!==r&&(tr(gd,e),tr(hs,r))}function o1(e){gd.current===e&&(ir(hs),ir(gd))}var mr=Wi(0);function Nm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lp=[];function l1(){for(var e=0;e<Lp.length;e++)Lp[e]._workInProgressVersionPrimary=null;Lp.length=0}var Z0=Ys.ReactCurrentDispatcher,$p=Ys.ReactCurrentBatchConfig,Fo=0,xr=null,Ur=null,Xr=null,jm=!1,qu=!1,vd=0,hF=0;function ma(){throw Error(Fe(321))}function c1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!as(e[r],t[r]))return!1;return!0}function u1(e,t,r,a,s,i){if(Fo=i,xr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z0.current=e===null||e.memoizedState===null?yF:vF,e=r(a,s),qu){i=0;do{if(qu=!1,vd=0,25<=i)throw Error(Fe(301));i+=1,Xr=Ur=null,t.updateQueue=null,Z0.current=bF,e=r(a,s)}while(qu)}if(Z0.current=Sm,t=Ur!==null&&Ur.next!==null,Fo=0,Xr=Ur=xr=null,jm=!1,t)throw Error(Fe(300));return e}function d1(){var e=vd!==0;return vd=0,e}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?xr.memoizedState=Xr=e:Xr=Xr.next=e,Xr}function Mn(){if(Ur===null){var e=xr.alternate;e=e!==null?e.memoizedState:null}else e=Ur.next;var t=Xr===null?xr.memoizedState:Xr.next;if(t!==null)Xr=t,Ur=e;else{if(e===null)throw Error(Fe(310));Ur=e,e={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},Xr===null?xr.memoizedState=Xr=e:Xr=Xr.next=e}return Xr}function bd(e,t){return typeof t=="function"?t(e):t}function Bp(e){var t=Mn(),r=t.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=e;var a=Ur,s=a.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}a.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,a=a.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Fo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=a):c=c.next=f,xr.lanes|=d,Ro|=d}u=u.next}while(u!==null&&u!==i);c===null?o=a:c.next=l,as(a,t.memoizedState)||(Ba=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,r.lastRenderedState=a}if(e=r.interleaved,e!==null){s=e;do i=s.lane,xr.lanes|=i,Ro|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Up(e){var t=Mn(),r=t.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);as(i,t.memoizedState)||(Ba=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function s4(){}function i4(e,t){var r=xr,a=Mn(),s=t(),i=!as(a.memoizedState,s);if(i&&(a.memoizedState=s,Ba=!0),a=a.queue,f1(c4.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||Xr!==null&&Xr.memoizedState.tag&1){if(r.flags|=2048,wd(9,l4.bind(null,r,a,s,t),void 0,null),Zr===null)throw Error(Fe(349));Fo&30||o4(r,t,s)}return s}function o4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function l4(e,t,r,a){t.value=r,t.getSnapshot=a,u4(t)&&d4(e)}function c4(e,t,r){return r(function(){u4(t)&&d4(e)})}function u4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!as(e,r)}catch{return!0}}function d4(e){var t=Ks(e,1);t!==null&&es(t,e,1,-1)}function Oj(e){var t=cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bd,lastRenderedState:e},t.queue=e,e=e.dispatch=gF.bind(null,xr,e),[t.memoizedState,e]}function wd(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function f4(){return Mn().memoizedState}function em(e,t,r,a){var s=cs();xr.flags|=e,s.memoizedState=wd(1|t,r,void 0,a===void 0?null:a)}function sx(e,t,r,a){var s=Mn();a=a===void 0?null:a;var i=void 0;if(Ur!==null){var o=Ur.memoizedState;if(i=o.destroy,a!==null&&c1(a,o.deps)){s.memoizedState=wd(t,r,i,a);return}}xr.flags|=e,s.memoizedState=wd(1|t,r,i,a)}function Tj(e,t){return em(8390656,8,e,t)}function f1(e,t){return sx(2048,8,e,t)}function m4(e,t){return sx(4,2,e,t)}function h4(e,t){return sx(4,4,e,t)}function x4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function p4(e,t,r){return r=r!=null?r.concat([e]):null,sx(4,4,x4.bind(null,t,e),r)}function m1(){}function g4(e,t){var r=Mn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&c1(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function y4(e,t){var r=Mn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&c1(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function v4(e,t,r){return Fo&21?(as(r,t)||(r=S_(),xr.lanes|=r,Ro|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ba=!0),e.memoizedState=r)}function xF(e,t){var r=Kt;Kt=r!==0&&4>r?r:4,e(!0);var a=$p.transition;$p.transition={};try{e(!1),t()}finally{Kt=r,$p.transition=a}}function b4(){return Mn().memoizedState}function pF(e,t,r){var a=_i(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},w4(e))N4(t,r);else if(r=r4(e,t,r,a),r!==null){var s=Da();es(r,e,a,s),j4(r,t,a)}}function gF(e,t,r){var a=_i(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(w4(e))N4(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,as(l,o)){var c=t.interleaved;c===null?(s.next=s,n1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=r4(e,t,s,a),r!==null&&(s=Da(),es(r,e,a,s),j4(r,t,a))}}function w4(e){var t=e.alternate;return e===xr||t!==null&&t===xr}function N4(e,t){qu=jm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function j4(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Kb(e,r)}}var Sm={readContext:Dn,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},yF={readContext:Dn,useCallback:function(e,t){return cs().memoizedState=[e,t===void 0?null:t],e},useContext:Dn,useEffect:Tj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,em(4194308,4,x4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return em(4194308,4,e,t)},useInsertionEffect:function(e,t){return em(4,2,e,t)},useMemo:function(e,t){var r=cs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=cs();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=pF.bind(null,xr,e),[a.memoizedState,e]},useRef:function(e){var t=cs();return e={current:e},t.memoizedState=e},useState:Oj,useDebugValue:m1,useDeferredValue:function(e){return cs().memoizedState=e},useTransition:function(){var e=Oj(!1),t=e[0];return e=xF.bind(null,e[1]),cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=xr,s=cs();if(ur){if(r===void 0)throw Error(Fe(407));r=r()}else{if(r=t(),Zr===null)throw Error(Fe(349));Fo&30||o4(a,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Tj(c4.bind(null,a,i,e),[e]),a.flags|=2048,wd(9,l4.bind(null,a,i,r,t),void 0,null),r},useId:function(){var e=cs(),t=Zr.identifierPrefix;if(ur){var r=_s,a=Ts;r=(a&~(1<<32-Zn(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=vd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=hF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vF={readContext:Dn,useCallback:g4,useContext:Dn,useEffect:f1,useImperativeHandle:p4,useInsertionEffect:m4,useLayoutEffect:h4,useMemo:y4,useReducer:Bp,useRef:f4,useState:function(){return Bp(bd)},useDebugValue:m1,useDeferredValue:function(e){var t=Mn();return v4(t,Ur.memoizedState,e)},useTransition:function(){var e=Bp(bd)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:s4,useSyncExternalStore:i4,useId:b4,unstable_isNewReconciler:!1},bF={readContext:Dn,useCallback:g4,useContext:Dn,useEffect:f1,useImperativeHandle:p4,useInsertionEffect:m4,useLayoutEffect:h4,useMemo:y4,useReducer:Up,useRef:f4,useState:function(){return Up(bd)},useDebugValue:m1,useDeferredValue:function(e){var t=Mn();return Ur===null?t.memoizedState=e:v4(t,Ur.memoizedState,e)},useTransition:function(){var e=Up(bd)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:s4,useSyncExternalStore:i4,useId:b4,unstable_isNewReconciler:!1};function qn(e,t){if(e&&e.defaultProps){t=pr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function jy(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:pr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ix={isMounted:function(e){return(e=e._reactInternals)?tl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Da(),s=_i(e),i=Ds(a,s);i.payload=t,r!=null&&(i.callback=r),t=Oi(e,i,s),t!==null&&(es(t,e,s,a),J0(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Da(),s=_i(e),i=Ds(a,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Oi(e,i,s),t!==null&&(es(t,e,s,a),J0(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Da(),a=_i(e),s=Ds(r,a);s.tag=2,t!=null&&(s.callback=t),t=Oi(e,s,a),t!==null&&(es(t,e,a,r),J0(t,e,a))}};function _j(e,t,r,a,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,o):t.prototype&&t.prototype.isPureReactComponent?!md(r,a)||!md(s,i):!0}function S4(e,t,r){var a=!1,s=Mi,i=t.contextType;return typeof i=="object"&&i!==null?i=Dn(i):(s=qa(t)?Do:ka.current,a=t.contextTypes,i=(a=a!=null)?ic(e,s):Mi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ix,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ej(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&ix.enqueueReplaceState(t,t.state,null)}function Sy(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},s1(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Dn(i):(i=qa(t)?Do:ka.current,s.context=ic(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(jy(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ix.enqueueReplaceState(s,s.state,null),wm(e,r,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function uc(e,t){try{var r="",a=t;do r+=GD(a),a=a.return;while(a);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Wp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Cy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wF=typeof WeakMap=="function"?WeakMap:Map;function C4(e,t,r){r=Ds(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){km||(km=!0,My=a),Cy(e,t)},r}function k4(e,t,r){r=Ds(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){Cy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Cy(e,t),typeof a!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Aj(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new wF;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=MF.bind(null,e,t,r),t.then(e,e))}function Pj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ij(e,t,r,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ds(-1,1),t.tag=2,Oi(r,t,1))),r.lanes|=1),e)}var NF=Ys.ReactCurrentOwner,Ba=!1;function Ea(e,t,r,a){t.child=e===null?t4(t,null,r,a):lc(t,e.child,r,a)}function Dj(e,t,r,a,s){r=r.render;var i=t.ref;return Hl(t,s),a=u1(e,t,r,a,i,s),r=d1(),e!==null&&!Ba?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zs(e,t,s)):(ur&&r&&Jb(t),t.flags|=1,Ea(e,t,a,s),t.child)}function Mj(e,t,r,a,s){if(e===null){var i=r.type;return typeof i=="function"&&!w1(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,O4(e,t,i,a,s)):(e=nm(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:md,r(o,a)&&e.ref===t.ref)return zs(e,t,s)}return t.flags|=1,e=Ei(i,a),e.ref=t.ref,e.return=t,t.child=e}function O4(e,t,r,a,s){if(e!==null){var i=e.memoizedProps;if(md(i,a)&&e.ref===t.ref)if(Ba=!1,t.pendingProps=a=i,(e.lanes&s)!==0)e.flags&131072&&(Ba=!0);else return t.lanes=e.lanes,zs(e,t,s)}return ky(e,t,r,a,s)}function T4(e,t,r){var a=t.pendingProps,s=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(Rl,Qa),Qa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tr(Rl,Qa),Qa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,tr(Rl,Qa),Qa|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,tr(Rl,Qa),Qa|=a;return Ea(e,t,s,r),t.child}function _4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ky(e,t,r,a,s){var i=qa(r)?Do:ka.current;return i=ic(t,i),Hl(t,s),r=u1(e,t,r,a,i,s),a=d1(),e!==null&&!Ba?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zs(e,t,s)):(ur&&a&&Jb(t),t.flags|=1,Ea(e,t,r,s),t.child)}function Fj(e,t,r,a,s){if(qa(r)){var i=!0;pm(t)}else i=!1;if(Hl(t,s),t.stateNode===null)tm(e,t),S4(t,r,a),Sy(t,r,a,s),a=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Dn(u):(u=qa(r)?Do:ka.current,u=ic(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==u)&&Ej(t,o,a,u),ui=!1;var m=t.memoizedState;o.state=m,wm(t,a,o,s),c=t.memoizedState,l!==a||m!==c||Wa.current||ui?(typeof d=="function"&&(jy(t,r,d,a),c=t.memoizedState),(l=ui||_j(t,r,l,a,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),o.props=a,o.state=c,o.context=u,a=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,a4(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:qn(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Dn(c):(c=qa(r)?Do:ka.current,c=ic(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Ej(t,o,a,c),ui=!1,m=t.memoizedState,o.state=m,wm(t,a,o,s);var g=t.memoizedState;l!==f||m!==g||Wa.current||ui?(typeof p=="function"&&(jy(t,r,p,a),g=t.memoizedState),(u=ui||_j(t,r,u,a,m,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=g),o.props=a,o.state=g,o.context=c,a=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Oy(e,t,r,a,i,s)}function Oy(e,t,r,a,s,i){_4(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return s&&wj(t,r,!1),zs(e,t,i);a=t.stateNode,NF.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=lc(t,e.child,null,i),t.child=lc(t,null,l,i)):Ea(e,t,l,i),t.memoizedState=a.state,s&&wj(t,r,!0),t.child}function E4(e){var t=e.stateNode;t.pendingContext?bj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bj(e,t.context,!1),i1(e,t.containerInfo)}function Rj(e,t,r,a,s){return oc(),e1(s),t.flags|=256,Ea(e,t,r,a),t.child}var Ty={dehydrated:null,treeContext:null,retryLane:0};function _y(e){return{baseLanes:e,cachePool:null,transitions:null}}function A4(e,t,r){var a=t.pendingProps,s=mr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),tr(mr,s&1),e===null)return wy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cx(o,a,0,null),e=ko(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=_y(r),t.memoizedState=Ty,e):h1(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return jF(e,t,o,a,l,s,r);if(i){i=a.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:a.children};return!(o&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ei(s,c),a.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ei(l,i):(i=ko(i,o,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=e.child.memoizedState,o=o===null?_y(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Ty,a}return i=e.child,e=i.sibling,a=Ei(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function h1(e,t){return t=cx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function m0(e,t,r,a){return a!==null&&e1(a),lc(t,e.child,null,r),e=h1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jF(e,t,r,a,s,i,o){if(r)return t.flags&256?(t.flags&=-257,a=Wp(Error(Fe(422))),m0(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,s=t.mode,a=cx({mode:"visible",children:a.children},s,0,null),i=ko(i,s,o,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&lc(t,e.child,null,o),t.child.memoizedState=_y(o),t.memoizedState=Ty,i);if(!(t.mode&1))return m0(e,t,o,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var l=a.dgst;return a=l,i=Error(Fe(419)),a=Wp(i,a,void 0),m0(e,t,o,a)}if(l=(o&e.childLanes)!==0,Ba||l){if(a=Zr,a!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ks(e,s),es(a,e,s,-1))}return b1(),a=Wp(Error(Fe(421))),m0(e,t,o,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=FF.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,an=ki(s.nextSibling),nn=t,ur=!0,Hn=null,e!==null&&(Sn[Cn++]=Ts,Sn[Cn++]=_s,Sn[Cn++]=Mo,Ts=e.id,_s=e.overflow,Mo=t),t=h1(t,a.children),t.flags|=4096,t)}function Lj(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ny(e.return,t,r)}function qp(e,t,r,a,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=s)}function P4(e,t,r){var a=t.pendingProps,s=a.revealOrder,i=a.tail;if(Ea(e,t,a.children,r),a=mr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lj(e,r,t);else if(e.tag===19)Lj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(tr(mr,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Nm(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),qp(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Nm(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}qp(t,!0,r,null,i);break;case"together":qp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ro|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Fe(153));if(t.child!==null){for(e=t.child,r=Ei(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ei(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function SF(e,t,r){switch(t.tag){case 3:E4(t),oc();break;case 5:n4(t);break;case 1:qa(t.type)&&pm(t);break;case 4:i1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;tr(vm,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(tr(mr,mr.current&1),t.flags|=128,null):r&t.child.childLanes?A4(e,t,r):(tr(mr,mr.current&1),e=zs(e,t,r),e!==null?e.sibling:null);tr(mr,mr.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return P4(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tr(mr,mr.current),a)break;return null;case 22:case 23:return t.lanes=0,T4(e,t,r)}return zs(e,t,r)}var I4,Ey,D4,M4;I4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ey=function(){};D4=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,bo(hs.current);var i=null;switch(r){case"input":s=Jg(e,s),a=Jg(e,a),i=[];break;case"select":s=pr({},s,{value:void 0}),a=pr({},a,{value:void 0}),i=[];break;case"textarea":s=ty(e,s),a=ty(e,a),i=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=hm)}ay(r,a);var o;r=null;for(u in s)if(!a.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(id.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in a){var c=a[u];if(l=s!=null?s[u]:void 0,a.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(id.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&rr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};M4=function(e,t,r,a){r!==a&&(t.flags|=4)};function xu(e,t){if(!ur)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ha(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function CF(e,t,r){var a=t.pendingProps;switch(Zb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ha(t),null;case 1:return qa(t.type)&&xm(),ha(t),null;case 3:return a=t.stateNode,cc(),ir(Wa),ir(ka),l1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(d0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hn!==null&&(Ly(Hn),Hn=null))),Ey(e,t),ha(t),null;case 5:o1(t);var s=bo(yd.current);if(r=t.type,e!==null&&t.stateNode!=null)D4(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Fe(166));return ha(t),null}if(e=bo(hs.current),d0(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[us]=t,a[pd]=i,e=(t.mode&1)!==0,r){case"dialog":rr("cancel",a),rr("close",a);break;case"iframe":case"object":case"embed":rr("load",a);break;case"video":case"audio":for(s=0;s<Au.length;s++)rr(Au[s],a);break;case"source":rr("error",a);break;case"img":case"image":case"link":rr("error",a),rr("load",a);break;case"details":rr("toggle",a);break;case"input":HN(a,i),rr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},rr("invalid",a);break;case"textarea":XN(a,i),rr("invalid",a)}ay(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?a.textContent!==l&&(i.suppressHydrationWarning!==!0&&u0(a.textContent,l,e),s=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&u0(a.textContent,l,e),s=["children",""+l]):id.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&rr("scroll",a)}switch(r){case"input":r0(a),GN(a,i,!0);break;case"textarea":r0(a),YN(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=hm)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=c_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(r,{is:a.is}):(e=o.createElement(r),r==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,r),e[us]=t,e[pd]=a,I4(e,t,!1,!1),t.stateNode=e;e:{switch(o=ny(r,a),r){case"dialog":rr("cancel",e),rr("close",e),s=a;break;case"iframe":case"object":case"embed":rr("load",e),s=a;break;case"video":case"audio":for(s=0;s<Au.length;s++)rr(Au[s],e);s=a;break;case"source":rr("error",e),s=a;break;case"img":case"image":case"link":rr("error",e),rr("load",e),s=a;break;case"details":rr("toggle",e),s=a;break;case"input":HN(e,a),s=Jg(e,a),rr("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=pr({},a,{value:void 0}),rr("invalid",e);break;case"textarea":XN(e,a),s=ty(e,a),rr("invalid",e);break;default:s=a}ay(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?f_(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&u_(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&od(e,c):typeof c=="number"&&od(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(id.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rr("scroll",e):c!=null&&Lb(e,i,c,o))}switch(r){case"input":r0(e),GN(e,a,!1);break;case"textarea":r0(e),YN(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Di(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?ql(e,!!a.multiple,i,!1):a.defaultValue!=null&&ql(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=hm)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ha(t),null;case 6:if(e&&t.stateNode!=null)M4(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Fe(166));if(r=bo(yd.current),bo(hs.current),d0(t)){if(a=t.stateNode,r=t.memoizedProps,a[us]=t,(i=a.nodeValue!==r)&&(e=nn,e!==null))switch(e.tag){case 3:u0(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&u0(a.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[us]=t,t.stateNode=a}return ha(t),null;case 13:if(ir(mr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ur&&an!==null&&t.mode&1&&!(t.flags&128))Z_(),oc(),t.flags|=98560,i=!1;else if(i=d0(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(Fe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Fe(317));i[us]=t}else oc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ha(t),i=!1}else Hn!==null&&(Ly(Hn),Hn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||mr.current&1?qr===0&&(qr=3):b1())),t.updateQueue!==null&&(t.flags|=4),ha(t),null);case 4:return cc(),Ey(e,t),e===null&&hd(t.stateNode.containerInfo),ha(t),null;case 10:return a1(t.type._context),ha(t),null;case 17:return qa(t.type)&&xm(),ha(t),null;case 19:if(ir(mr),i=t.memoizedState,i===null)return ha(t),null;if(a=(t.flags&128)!==0,o=i.rendering,o===null)if(a)xu(i,!1);else{if(qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Nm(e),o!==null){for(t.flags|=128,xu(i,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return tr(mr,mr.current&1|2),t.child}e=e.sibling}i.tail!==null&&kr()>dc&&(t.flags|=128,a=!0,xu(i,!1),t.lanes=4194304)}else{if(!a)if(e=Nm(o),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ur)return ha(t),null}else 2*kr()-i.renderingStartTime>dc&&r!==1073741824&&(t.flags|=128,a=!0,xu(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=kr(),t.sibling=null,r=mr.current,tr(mr,a?r&1|2:r&1),t):(ha(t),null);case 22:case 23:return v1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Qa&1073741824&&(ha(t),t.subtreeFlags&6&&(t.flags|=8192)):ha(t),null;case 24:return null;case 25:return null}throw Error(Fe(156,t.tag))}function kF(e,t){switch(Zb(t),t.tag){case 1:return qa(t.type)&&xm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cc(),ir(Wa),ir(ka),l1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return o1(t),null;case 13:if(ir(mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Fe(340));oc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ir(mr),null;case 4:return cc(),null;case 10:return a1(t.type._context),null;case 22:case 23:return v1(),null;case 24:return null;default:return null}}var h0=!1,va=!1,OF=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Fl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){gr(e,t,a)}else r.current=null}function Ay(e,t,r){try{r()}catch(a){gr(e,t,a)}}var $j=!1;function TF(e,t){if(hy=dm,e=B_(),Qb(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||a!==0&&f.nodeType!==3||(c=o+a),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===a&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(xy={focusedElem:e,selectionRange:r},dm=!1,ze=t;ze!==null;)if(t=ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ze=e;else for(;ze!==null;){t=ze;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var h=g.memoizedProps,y=g.memoizedState,w=t.stateNode,S=w.getSnapshotBeforeUpdate(t.elementType===t.type?h:qn(t.type,h),y);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(x){gr(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ze=e;break}ze=t.return}return g=$j,$j=!1,g}function Ku(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ay(t,r,i)}s=s.next}while(s!==a)}}function ox(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Py(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function F4(e){var t=e.alternate;t!==null&&(e.alternate=null,F4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[us],delete t[pd],delete t[yy],delete t[uF],delete t[dF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function R4(e){return e.tag===5||e.tag===3||e.tag===4}function Bj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||R4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iy(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=hm));else if(a!==4&&(e=e.child,e!==null))for(Iy(e,t,r),e=e.sibling;e!==null;)Iy(e,t,r),e=e.sibling}function Dy(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Dy(e,t,r),e=e.sibling;e!==null;)Dy(e,t,r),e=e.sibling}var ia=null,Kn=!1;function si(e,t,r){for(r=r.child;r!==null;)L4(e,t,r),r=r.sibling}function L4(e,t,r){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(Zh,r)}catch{}switch(r.tag){case 5:va||Fl(r,t);case 6:var a=ia,s=Kn;ia=null,si(e,t,r),ia=a,Kn=s,ia!==null&&(Kn?(e=ia,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ia.removeChild(r.stateNode));break;case 18:ia!==null&&(Kn?(e=ia,r=r.stateNode,e.nodeType===8?Fp(e.parentNode,r):e.nodeType===1&&Fp(e,r),dd(e)):Fp(ia,r.stateNode));break;case 4:a=ia,s=Kn,ia=r.stateNode.containerInfo,Kn=!0,si(e,t,r),ia=a,Kn=s;break;case 0:case 11:case 14:case 15:if(!va&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ay(r,t,o),s=s.next}while(s!==a)}si(e,t,r);break;case 1:if(!va&&(Fl(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(l){gr(r,t,l)}si(e,t,r);break;case 21:si(e,t,r);break;case 22:r.mode&1?(va=(a=va)||r.memoizedState!==null,si(e,t,r),va=a):si(e,t,r);break;default:si(e,t,r)}}function Uj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new OF),t.forEach(function(a){var s=RF.bind(null,e,a);r.has(a)||(r.add(a),a.then(s,s))})}}function Bn(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ia=l.stateNode,Kn=!1;break e;case 3:ia=l.stateNode.containerInfo,Kn=!0;break e;case 4:ia=l.stateNode.containerInfo,Kn=!0;break e}l=l.return}if(ia===null)throw Error(Fe(160));L4(i,o,s),ia=null,Kn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){gr(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$4(t,e),t=t.sibling}function $4(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bn(t,e),ss(e),a&4){try{Ku(3,e,e.return),ox(3,e)}catch(h){gr(e,e.return,h)}try{Ku(5,e,e.return)}catch(h){gr(e,e.return,h)}}break;case 1:Bn(t,e),ss(e),a&512&&r!==null&&Fl(r,r.return);break;case 5:if(Bn(t,e),ss(e),a&512&&r!==null&&Fl(r,r.return),e.flags&32){var s=e.stateNode;try{od(s,"")}catch(h){gr(e,e.return,h)}}if(a&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&o_(s,i),ny(l,o);var u=ny(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?f_(s,f):d==="dangerouslySetInnerHTML"?u_(s,f):d==="children"?od(s,f):Lb(s,d,f,u)}switch(l){case"input":Zg(s,i);break;case"textarea":l_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ql(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ql(s,!!i.multiple,i.defaultValue,!0):ql(s,!!i.multiple,i.multiple?[]:"",!1))}s[pd]=i}catch(h){gr(e,e.return,h)}}break;case 6:if(Bn(t,e),ss(e),a&4){if(e.stateNode===null)throw Error(Fe(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){gr(e,e.return,h)}}break;case 3:if(Bn(t,e),ss(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{dd(t.containerInfo)}catch(h){gr(e,e.return,h)}break;case 4:Bn(t,e),ss(e);break;case 13:Bn(t,e),ss(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(g1=kr())),a&4&&Uj(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(va=(u=va)||d,Bn(t,e),va=u):Bn(t,e),ss(e),a&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ze=e,d=e.child;d!==null;){for(f=ze=d;ze!==null;){switch(m=ze,p=m.child,m.tag){case 0:case 11:case 14:case 15:Ku(4,m,m.return);break;case 1:Fl(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){a=m,r=m.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(h){gr(a,r,h)}}break;case 5:Fl(m,m.return);break;case 22:if(m.memoizedState!==null){qj(f);continue}}p!==null?(p.return=m,ze=p):qj(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=d_("display",o))}catch(h){gr(e,e.return,h)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(h){gr(e,e.return,h)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bn(t,e),ss(e),a&4&&Uj(e);break;case 21:break;default:Bn(t,e),ss(e)}}function ss(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(R4(r)){var a=r;break e}r=r.return}throw Error(Fe(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(od(s,""),a.flags&=-33);var i=Bj(e);Dy(e,i,s);break;case 3:case 4:var o=a.stateNode.containerInfo,l=Bj(e);Iy(e,l,o);break;default:throw Error(Fe(161))}}catch(c){gr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _F(e,t,r){ze=e,B4(e)}function B4(e,t,r){for(var a=(e.mode&1)!==0;ze!==null;){var s=ze,i=s.child;if(s.tag===22&&a){var o=s.memoizedState!==null||h0;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||va;l=h0;var u=va;if(h0=o,(va=c)&&!u)for(ze=s;ze!==null;)o=ze,c=o.child,o.tag===22&&o.memoizedState!==null?Kj(s):c!==null?(c.return=o,ze=c):Kj(s);for(;i!==null;)ze=i,B4(i),i=i.sibling;ze=s,h0=l,va=u}Wj(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ze=i):Wj(e)}}function Wj(e){for(;ze!==null;){var t=ze;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:va||ox(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!va)if(r===null)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:qn(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&kj(t,i,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}kj(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&dd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}va||t.flags&512&&Py(t)}catch(m){gr(t,t.return,m)}}if(t===e){ze=null;break}if(r=t.sibling,r!==null){r.return=t.return,ze=r;break}ze=t.return}}function qj(e){for(;ze!==null;){var t=ze;if(t===e){ze=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ze=r;break}ze=t.return}}function Kj(e){for(;ze!==null;){var t=ze;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ox(4,t)}catch(c){gr(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(c){gr(t,s,c)}}var i=t.return;try{Py(t)}catch(c){gr(t,i,c)}break;case 5:var o=t.return;try{Py(t)}catch(c){gr(t,o,c)}}}catch(c){gr(t,t.return,c)}if(t===e){ze=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ze=l;break}ze=t.return}}var EF=Math.ceil,Cm=Ys.ReactCurrentDispatcher,x1=Ys.ReactCurrentOwner,_n=Ys.ReactCurrentBatchConfig,At=0,Zr=null,Mr=null,da=0,Qa=0,Rl=Wi(0),qr=0,Nd=null,Ro=0,lx=0,p1=0,zu=null,$a=null,g1=0,dc=1/0,ks=null,km=!1,My=null,Ti=null,x0=!1,pi=null,Om=0,Vu=0,Fy=null,rm=-1,am=0;function Da(){return At&6?kr():rm!==-1?rm:rm=kr()}function _i(e){return e.mode&1?At&2&&da!==0?da&-da:mF.transition!==null?(am===0&&(am=S_()),am):(e=Kt,e!==0||(e=window.event,e=e===void 0?16:A_(e.type)),e):1}function es(e,t,r,a){if(50<Vu)throw Vu=0,Fy=null,Error(Fe(185));Tf(e,r,a),(!(At&2)||e!==Zr)&&(e===Zr&&(!(At&2)&&(lx|=r),qr===4&&mi(e,da)),Ka(e,a),r===1&&At===0&&!(t.mode&1)&&(dc=kr()+500,nx&&qi()))}function Ka(e,t){var r=e.callbackNode;mM(e,t);var a=um(e,e===Zr?da:0);if(a===0)r!==null&&ZN(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&ZN(r),t===1)e.tag===0?fF(zj.bind(null,e)):Y_(zj.bind(null,e)),lF(function(){!(At&6)&&qi()}),r=null;else{switch(C_(a)){case 1:r=qb;break;case 4:r=N_;break;case 16:r=cm;break;case 536870912:r=j_;break;default:r=cm}r=G4(r,U4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function U4(e,t){if(rm=-1,am=0,At&6)throw Error(Fe(327));var r=e.callbackNode;if(Gl()&&e.callbackNode!==r)return null;var a=um(e,e===Zr?da:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Tm(e,a);else{t=a;var s=At;At|=2;var i=q4();(Zr!==e||da!==t)&&(ks=null,dc=kr()+500,Co(e,t));do try{IF();break}catch(l){W4(e,l)}while(1);r1(),Cm.current=i,At=s,Mr!==null?t=0:(Zr=null,da=0,t=qr)}if(t!==0){if(t===2&&(s=cy(e),s!==0&&(a=s,t=Ry(e,s))),t===1)throw r=Nd,Co(e,0),mi(e,a),Ka(e,kr()),r;if(t===6)mi(e,a);else{if(s=e.current.alternate,!(a&30)&&!AF(s)&&(t=Tm(e,a),t===2&&(i=cy(e),i!==0&&(a=i,t=Ry(e,i))),t===1))throw r=Nd,Co(e,0),mi(e,a),Ka(e,kr()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(Fe(345));case 2:fo(e,$a,ks);break;case 3:if(mi(e,a),(a&130023424)===a&&(t=g1+500-kr(),10<t)){if(um(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){Da(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=gy(fo.bind(null,e,$a,ks),t);break}fo(e,$a,ks);break;case 4:if(mi(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var o=31-Zn(a);i=1<<o,o=t[o],o>s&&(s=o),a&=~i}if(a=s,a=kr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*EF(a/1960))-a,10<a){e.timeoutHandle=gy(fo.bind(null,e,$a,ks),a);break}fo(e,$a,ks);break;case 5:fo(e,$a,ks);break;default:throw Error(Fe(329))}}}return Ka(e,kr()),e.callbackNode===r?U4.bind(null,e):null}function Ry(e,t){var r=zu;return e.current.memoizedState.isDehydrated&&(Co(e,t).flags|=256),e=Tm(e,t),e!==2&&(t=$a,$a=r,t!==null&&Ly(t)),e}function Ly(e){$a===null?$a=e:$a.push.apply($a,e)}function AF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var s=r[a],i=s.getSnapshot;s=s.value;try{if(!as(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mi(e,t){for(t&=~p1,t&=~lx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zn(t),a=1<<r;e[r]=-1,t&=~a}}function zj(e){if(At&6)throw Error(Fe(327));Gl();var t=um(e,0);if(!(t&1))return Ka(e,kr()),null;var r=Tm(e,t);if(e.tag!==0&&r===2){var a=cy(e);a!==0&&(t=a,r=Ry(e,a))}if(r===1)throw r=Nd,Co(e,0),mi(e,t),Ka(e,kr()),r;if(r===6)throw Error(Fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fo(e,$a,ks),Ka(e,kr()),null}function y1(e,t){var r=At;At|=1;try{return e(t)}finally{At=r,At===0&&(dc=kr()+500,nx&&qi())}}function Lo(e){pi!==null&&pi.tag===0&&!(At&6)&&Gl();var t=At;At|=1;var r=_n.transition,a=Kt;try{if(_n.transition=null,Kt=1,e)return e()}finally{Kt=a,_n.transition=r,At=t,!(At&6)&&qi()}}function v1(){Qa=Rl.current,ir(Rl)}function Co(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,oF(r)),Mr!==null)for(r=Mr.return;r!==null;){var a=r;switch(Zb(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&xm();break;case 3:cc(),ir(Wa),ir(ka),l1();break;case 5:o1(a);break;case 4:cc();break;case 13:ir(mr);break;case 19:ir(mr);break;case 10:a1(a.type._context);break;case 22:case 23:v1()}r=r.return}if(Zr=e,Mr=e=Ei(e.current,null),da=Qa=t,qr=0,Nd=null,p1=lx=Ro=0,$a=zu=null,vo!==null){for(t=0;t<vo.length;t++)if(r=vo[t],a=r.interleaved,a!==null){r.interleaved=null;var s=a.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,a.next=o}r.pending=a}vo=null}return e}function W4(e,t){do{var r=Mr;try{if(r1(),Z0.current=Sm,jm){for(var a=xr.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}jm=!1}if(Fo=0,Xr=Ur=xr=null,qu=!1,vd=0,x1.current=null,r===null||r.return===null){qr=1,Nd=t,Mr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=da,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Pj(o);if(p!==null){p.flags&=-257,Ij(p,o,l,i,t),p.mode&1&&Aj(i,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var h=new Set;h.add(c),t.updateQueue=h}else g.add(c);break e}else{if(!(t&1)){Aj(i,u,t),b1();break e}c=Error(Fe(426))}}else if(ur&&l.mode&1){var y=Pj(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Ij(y,o,l,i,t),e1(uc(c,l));break e}}i=c=uc(c,l),qr!==4&&(qr=2),zu===null?zu=[i]:zu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=C4(i,c,t);Cj(i,w);break e;case 1:l=c;var S=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ti===null||!Ti.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=k4(i,l,t);Cj(i,x);break e}}i=i.return}while(i!==null)}z4(r)}catch(b){t=b,Mr===r&&r!==null&&(Mr=r=r.return);continue}break}while(1)}function q4(){var e=Cm.current;return Cm.current=Sm,e===null?Sm:e}function b1(){(qr===0||qr===3||qr===2)&&(qr=4),Zr===null||!(Ro&268435455)&&!(lx&268435455)||mi(Zr,da)}function Tm(e,t){var r=At;At|=2;var a=q4();(Zr!==e||da!==t)&&(ks=null,Co(e,t));do try{PF();break}catch(s){W4(e,s)}while(1);if(r1(),At=r,Cm.current=a,Mr!==null)throw Error(Fe(261));return Zr=null,da=0,qr}function PF(){for(;Mr!==null;)K4(Mr)}function IF(){for(;Mr!==null&&!nM();)K4(Mr)}function K4(e){var t=H4(e.alternate,e,Qa);e.memoizedProps=e.pendingProps,t===null?z4(e):Mr=t,x1.current=null}function z4(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kF(r,t),r!==null){r.flags&=32767,Mr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qr=6,Mr=null;return}}else if(r=CF(r,t,Qa),r!==null){Mr=r;return}if(t=t.sibling,t!==null){Mr=t;return}Mr=t=e}while(t!==null);qr===0&&(qr=5)}function fo(e,t,r){var a=Kt,s=_n.transition;try{_n.transition=null,Kt=1,DF(e,t,r,a)}finally{_n.transition=s,Kt=a}return null}function DF(e,t,r,a){do Gl();while(pi!==null);if(At&6)throw Error(Fe(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Fe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(hM(e,i),e===Zr&&(Mr=Zr=null,da=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||x0||(x0=!0,G4(cm,function(){return Gl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=_n.transition,_n.transition=null;var o=Kt;Kt=1;var l=At;At|=4,x1.current=null,TF(e,r),$4(r,e),eF(xy),dm=!!hy,xy=hy=null,e.current=r,_F(r),sM(),At=l,Kt=o,_n.transition=i}else e.current=r;if(x0&&(x0=!1,pi=e,Om=s),i=e.pendingLanes,i===0&&(Ti=null),lM(r.stateNode),Ka(e,kr()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(km)throw km=!1,e=My,My=null,e;return Om&1&&e.tag!==0&&Gl(),i=e.pendingLanes,i&1?e===Fy?Vu++:(Vu=0,Fy=e):Vu=0,qi(),null}function Gl(){if(pi!==null){var e=C_(Om),t=_n.transition,r=Kt;try{if(_n.transition=null,Kt=16>e?16:e,pi===null)var a=!1;else{if(e=pi,pi=null,Om=0,At&6)throw Error(Fe(331));var s=At;for(At|=4,ze=e.current;ze!==null;){var i=ze,o=i.child;if(ze.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ze=u;ze!==null;){var d=ze;switch(d.tag){case 0:case 11:case 15:Ku(8,d,i)}var f=d.child;if(f!==null)f.return=d,ze=f;else for(;ze!==null;){d=ze;var m=d.sibling,p=d.return;if(F4(d),d===u){ze=null;break}if(m!==null){m.return=p,ze=m;break}ze=p}}}var g=i.alternate;if(g!==null){var h=g.child;if(h!==null){g.child=null;do{var y=h.sibling;h.sibling=null,h=y}while(h!==null)}}ze=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ze=o;else e:for(;ze!==null;){if(i=ze,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ku(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,ze=w;break e}ze=i.return}}var S=e.current;for(ze=S;ze!==null;){o=ze;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ze=v;else e:for(o=S;ze!==null;){if(l=ze,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ox(9,l)}}catch(b){gr(l,l.return,b)}if(l===o){ze=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,ze=x;break e}ze=l.return}}if(At=s,qi(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(Zh,e)}catch{}a=!0}return a}finally{Kt=r,_n.transition=t}}return!1}function Vj(e,t,r){t=uc(r,t),t=C4(e,t,1),e=Oi(e,t,1),t=Da(),e!==null&&(Tf(e,1,t),Ka(e,t))}function gr(e,t,r){if(e.tag===3)Vj(e,e,r);else for(;t!==null;){if(t.tag===3){Vj(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ti===null||!Ti.has(a))){e=uc(r,e),e=k4(t,e,1),t=Oi(t,e,1),e=Da(),t!==null&&(Tf(t,1,e),Ka(t,e));break}}t=t.return}}function MF(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Da(),e.pingedLanes|=e.suspendedLanes&r,Zr===e&&(da&r)===r&&(qr===4||qr===3&&(da&130023424)===da&&500>kr()-g1?Co(e,0):p1|=r),Ka(e,t)}function V4(e,t){t===0&&(e.mode&1?(t=s0,s0<<=1,!(s0&130023424)&&(s0=4194304)):t=1);var r=Da();e=Ks(e,t),e!==null&&(Tf(e,t,r),Ka(e,r))}function FF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),V4(e,r)}function RF(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Fe(314))}a!==null&&a.delete(t),V4(e,r)}var H4;H4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wa.current)Ba=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ba=!1,SF(e,t,r);Ba=!!(e.flags&131072)}else Ba=!1,ur&&t.flags&1048576&&Q_(t,ym,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;tm(e,t),e=t.pendingProps;var s=ic(t,ka.current);Hl(t,r),s=u1(null,t,a,e,s,r);var i=d1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qa(a)?(i=!0,pm(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s1(t),s.updater=ix,t.stateNode=s,s._reactInternals=t,Sy(t,a,e,r),t=Oy(null,t,a,!0,i,r)):(t.tag=0,ur&&i&&Jb(t),Ea(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(tm(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=$F(a),e=qn(a,e),s){case 0:t=ky(null,t,a,e,r);break e;case 1:t=Fj(null,t,a,e,r);break e;case 11:t=Dj(null,t,a,e,r);break e;case 14:t=Mj(null,t,a,qn(a.type,e),r);break e}throw Error(Fe(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),ky(e,t,a,s,r);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),Fj(e,t,a,s,r);case 3:e:{if(E4(t),e===null)throw Error(Fe(387));a=t.pendingProps,i=t.memoizedState,s=i.element,a4(e,t),wm(t,a,null,r);var o=t.memoizedState;if(a=o.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=uc(Error(Fe(423)),t),t=Rj(e,t,a,r,s);break e}else if(a!==s){s=uc(Error(Fe(424)),t),t=Rj(e,t,a,r,s);break e}else for(an=ki(t.stateNode.containerInfo.firstChild),nn=t,ur=!0,Hn=null,r=t4(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(oc(),a===s){t=zs(e,t,r);break e}Ea(e,t,a,r)}t=t.child}return t;case 5:return n4(t),e===null&&wy(t),a=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,py(a,s)?o=null:i!==null&&py(a,i)&&(t.flags|=32),_4(e,t),Ea(e,t,o,r),t.child;case 6:return e===null&&wy(t),null;case 13:return A4(e,t,r);case 4:return i1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=lc(t,null,a,r):Ea(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),Dj(e,t,a,s,r);case 7:return Ea(e,t,t.pendingProps,r),t.child;case 8:return Ea(e,t,t.pendingProps.children,r),t.child;case 12:return Ea(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,tr(vm,a._currentValue),a._currentValue=o,i!==null)if(as(i.value,o)){if(i.children===s.children&&!Wa.current){t=zs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Ds(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ny(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Fe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ny(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ea(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Hl(t,r),s=Dn(s),a=a(s),t.flags|=1,Ea(e,t,a,r),t.child;case 14:return a=t.type,s=qn(a,t.pendingProps),s=qn(a.type,s),Mj(e,t,a,s,r);case 15:return O4(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),tm(e,t),t.tag=1,qa(a)?(e=!0,pm(t)):e=!1,Hl(t,r),S4(t,a,s),Sy(t,a,s,r),Oy(null,t,a,!0,e,r);case 19:return P4(e,t,r);case 22:return T4(e,t,r)}throw Error(Fe(156,t.tag))};function G4(e,t){return w_(e,t)}function LF(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(e,t,r,a){return new LF(e,t,r,a)}function w1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $F(e){if(typeof e=="function")return w1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bb)return 11;if(e===Ub)return 14}return 2}function Ei(e,t){var r=e.alternate;return r===null?(r=kn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function nm(e,t,r,a,s,i){var o=2;if(a=e,typeof e=="function")w1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ol:return ko(r.children,s,i,t);case $b:o=8,s|=8;break;case Gg:return e=kn(12,r,t,s|2),e.elementType=Gg,e.lanes=i,e;case Xg:return e=kn(13,r,t,s),e.elementType=Xg,e.lanes=i,e;case Yg:return e=kn(19,r,t,s),e.elementType=Yg,e.lanes=i,e;case n_:return cx(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r_:o=10;break e;case a_:o=9;break e;case Bb:o=11;break e;case Ub:o=14;break e;case ci:o=16,a=null;break e}throw Error(Fe(130,e==null?e:typeof e,""))}return t=kn(o,r,t,s),t.elementType=e,t.type=a,t.lanes=i,t}function ko(e,t,r,a){return e=kn(7,e,a,t),e.lanes=r,e}function cx(e,t,r,a){return e=kn(22,e,a,t),e.elementType=n_,e.lanes=r,e.stateNode={isHidden:!1},e}function Kp(e,t,r){return e=kn(6,e,null,t),e.lanes=r,e}function zp(e,t,r){return t=kn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BF(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cp(0),this.expirationTimes=Cp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cp(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function N1(e,t,r,a,s,i,o,l,c){return e=new BF(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=kn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},s1(i),e}function UF(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kl,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function X4(e){if(!e)return Mi;e=e._reactInternals;e:{if(tl(e)!==e||e.tag!==1)throw Error(Fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Fe(171))}if(e.tag===1){var r=e.type;if(qa(r))return X_(e,r,t)}return t}function Y4(e,t,r,a,s,i,o,l,c){return e=N1(r,a,!0,e,s,i,o,l,c),e.context=X4(null),r=e.current,a=Da(),s=_i(r),i=Ds(a,s),i.callback=t??null,Oi(r,i,s),e.current.lanes=s,Tf(e,s,a),Ka(e,a),e}function ux(e,t,r,a){var s=t.current,i=Da(),o=_i(s);return r=X4(r),t.context===null?t.context=r:t.pendingContext=r,t=Ds(i,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Oi(s,t,o),e!==null&&(es(e,s,o,i),J0(e,s,o)),o}function _m(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function j1(e,t){Hj(e,t),(e=e.alternate)&&Hj(e,t)}function WF(){return null}var Q4=typeof reportError=="function"?reportError:function(e){console.error(e)};function S1(e){this._internalRoot=e}dx.prototype.render=S1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Fe(409));ux(e,t,null,null)};dx.prototype.unmount=S1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lo(function(){ux(null,e,null,null)}),t[qs]=null}};function dx(e){this._internalRoot=e}dx.prototype.unstable_scheduleHydration=function(e){if(e){var t=T_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fi.length&&t!==0&&t<fi[r].priority;r++);fi.splice(r,0,e),r===0&&E_(e)}};function C1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gj(){}function qF(e,t,r,a,s){if(s){if(typeof a=="function"){var i=a;a=function(){var u=_m(o);i.call(u)}}var o=Y4(t,a,e,0,null,!1,!1,"",Gj);return e._reactRootContainer=o,e[qs]=o.current,hd(e.nodeType===8?e.parentNode:e),Lo(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var l=a;a=function(){var u=_m(c);l.call(u)}}var c=N1(e,0,!1,null,null,!1,!1,"",Gj);return e._reactRootContainer=c,e[qs]=c.current,hd(e.nodeType===8?e.parentNode:e),Lo(function(){ux(t,c,r,a)}),c}function mx(e,t,r,a,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=_m(o);l.call(c)}}ux(t,o,e,s)}else o=qF(r,t,e,s,a);return _m(o)}k_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Eu(t.pendingLanes);r!==0&&(Kb(t,r|1),Ka(t,kr()),!(At&6)&&(dc=kr()+500,qi()))}break;case 13:Lo(function(){var a=Ks(e,1);if(a!==null){var s=Da();es(a,e,1,s)}}),j1(e,1)}};zb=function(e){if(e.tag===13){var t=Ks(e,134217728);if(t!==null){var r=Da();es(t,e,134217728,r)}j1(e,134217728)}};O_=function(e){if(e.tag===13){var t=_i(e),r=Ks(e,t);if(r!==null){var a=Da();es(r,e,t,a)}j1(e,t)}};T_=function(){return Kt};__=function(e,t){var r=Kt;try{return Kt=e,t()}finally{Kt=r}};iy=function(e,t,r){switch(t){case"input":if(Zg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=ax(a);if(!s)throw Error(Fe(90));i_(a),Zg(a,s)}}}break;case"textarea":l_(e,r);break;case"select":t=r.value,t!=null&&ql(e,!!r.multiple,t,!1)}};x_=y1;p_=Lo;var KF={usingClientEntryPoint:!1,Events:[Ef,Al,ax,m_,h_,y1]},pu={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zF={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=v_(e),e===null?null:e.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||WF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var p0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!p0.isDisabled&&p0.supportsFiber)try{Zh=p0.inject(zF),ms=p0}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KF;fn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C1(t))throw Error(Fe(200));return UF(e,t,null,r)};fn.createRoot=function(e,t){if(!C1(e))throw Error(Fe(299));var r=!1,a="",s=Q4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=N1(e,1,!1,null,null,r,!1,a,s),e[qs]=t.current,hd(e.nodeType===8?e.parentNode:e),new S1(t)};fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Fe(188)):(e=Object.keys(e).join(","),Error(Fe(268,e)));return e=v_(t),e=e===null?null:e.stateNode,e};fn.flushSync=function(e){return Lo(e)};fn.hydrate=function(e,t,r){if(!fx(t))throw Error(Fe(200));return mx(null,e,t,!0,r)};fn.hydrateRoot=function(e,t,r){if(!C1(e))throw Error(Fe(405));var a=r!=null&&r.hydratedSources||null,s=!1,i="",o=Q4;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Y4(t,null,e,1,r??null,s,!1,i,o),e[qs]=t.current,hd(e),a)for(e=0;e<a.length;e++)r=a[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new dx(t)};fn.render=function(e,t,r){if(!fx(t))throw Error(Fe(200));return mx(null,e,t,!1,r)};fn.unmountComponentAtNode=function(e){if(!fx(e))throw Error(Fe(40));return e._reactRootContainer?(Lo(function(){mx(null,null,e,!1,function(){e._reactRootContainer=null,e[qs]=null})}),!0):!1};fn.unstable_batchedUpdates=y1;fn.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!fx(r))throw Error(Fe(200));if(e==null||e._reactInternals===void 0)throw Error(Fe(38));return mx(e,t,r,!1,a)};fn.version="18.3.1-next-f1338f8080-20240426";function J4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J4)}catch(e){console.error(e)}}J4(),JT.exports=fn;var VF=JT.exports,Xj=VF;Vg.createRoot=Xj.createRoot,Vg.hydrateRoot=Xj.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jd.apply(this,arguments)}var gi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gi||(gi={}));const Yj="popstate";function HF(e){e===void 0&&(e={});function t(s,i){let{pathname:o="/",search:l="",hash:c=""}=rl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),$y("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:Em(i))}function a(s,i){k1(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return XF(t,r,a,e)}function Tr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function k1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function GF(){return Math.random().toString(36).substr(2,8)}function Qj(e,t){return{usr:e.state,key:e.key,idx:t}}function $y(e,t,r,a){return r===void 0&&(r=null),jd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rl(t):t,{state:r,key:t&&t.key||a||GF()})}function Em(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function rl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function XF(e,t,r,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l=gi.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(jd({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=gi.Pop;let y=d(),w=y==null?null:y-u;u=y,c&&c({action:l,location:h.location,delta:w})}function m(y,w){l=gi.Push;let S=$y(h.location,y,w);r&&r(S,y),u=d()+1;let v=Qj(S,u),x=h.createHref(S);try{o.pushState(v,"",x)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(x)}i&&c&&c({action:l,location:h.location,delta:1})}function p(y,w){l=gi.Replace;let S=$y(h.location,y,w);r&&r(S,y),u=d();let v=Qj(S,u),x=h.createHref(S);o.replaceState(v,"",x),i&&c&&c({action:l,location:h.location,delta:0})}function g(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof y=="string"?y:Em(y);return S=S.replace(/ $/,"%20"),Tr(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let h={get action(){return l},get location(){return e(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yj,f),c=y,()=>{s.removeEventListener(Yj,f),c=null}},createHref(y){return t(s,y)},createURL:g,encodeLocation(y){let w=g(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(y){return o.go(y)}};return h}var Jj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Jj||(Jj={}));function YF(e,t,r){return r===void 0&&(r="/"),QF(e,t,r,!1)}function QF(e,t,r,a){let s=typeof t=="string"?rl(t):t,i=O1(s.pathname||"/",r);if(i==null)return null;let o=Z4(e);JF(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=c5(i);l=o5(o[c],u,a)}return l}function Z4(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Tr(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let u=Ai([a,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Tr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Z4(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:s5(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of eE(i.path))s(i,o,c)}),t}function eE(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let o=eE(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function JF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:i5(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const ZF=/^:[\w-]+$/,e5=3,t5=2,r5=1,a5=10,n5=-2,Zj=e=>e==="*";function s5(e,t){let r=e.split("/"),a=r.length;return r.some(Zj)&&(a+=n5),t&&(a+=t5),r.filter(s=>!Zj(s)).reduce((s,i)=>s+(ZF.test(i)?e5:i===""?r5:a5),a)}function i5(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function o5(e,t,r){r===void 0&&(r=!1);let{routesMeta:a}=e,s={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],u=l===a.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=e2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!a[a.length-1].route.index&&(f=e2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ai([i,f.pathname]),pathnameBase:m5(Ai([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ai([i,f.pathnameBase]))}return o}function e2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=l5(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((u,d,f)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let h=l[f]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const g=l[f];return p&&!g?u[m]=void 0:u[m]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function l5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),k1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function c5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return k1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function O1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function u5(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?rl(e):e;return{pathname:r?r.startsWith("/")?r:d5(r,t):t,search:h5(a),hash:x5(s)}}function d5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Vp(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function f5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function T1(e,t){let r=f5(e);return t?r.map((a,s)=>s===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function _1(e,t,r,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=rl(e):(s=jd({},e),Tr(!s.pathname||!s.pathname.includes("?"),Vp("?","pathname","search",s)),Tr(!s.pathname||!s.pathname.includes("#"),Vp("#","pathname","hash",s)),Tr(!s.search||!s.search.includes("#"),Vp("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!a&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=u5(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ai=e=>e.join("/").replace(/\/\/+/g,"/"),m5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),h5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,x5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function p5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tE=["post","put","patch","delete"];new Set(tE);const g5=["get",...tE];new Set(g5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sd.apply(this,arguments)}const E1=T.createContext(null),y5=T.createContext(null),Ki=T.createContext(null),hx=T.createContext(null),Qs=T.createContext({outlet:null,matches:[],isDataRoute:!1}),rE=T.createContext(null);function v5(e,t){let{relative:r}=t===void 0?{}:t;Wc()||Tr(!1);let{basename:a,navigator:s}=T.useContext(Ki),{hash:i,pathname:o,search:l}=nE(e,{relative:r}),c=o;return a!=="/"&&(c=o==="/"?a:Ai([a,o])),s.createHref({pathname:c,search:l,hash:i})}function Wc(){return T.useContext(hx)!=null}function Ta(){return Wc()||Tr(!1),T.useContext(hx).location}function aE(e){T.useContext(Ki).static||T.useLayoutEffect(e)}function ct(){let{isDataRoute:e}=T.useContext(Qs);return e?P5():b5()}function b5(){Wc()||Tr(!1);let e=T.useContext(E1),{basename:t,future:r,navigator:a}=T.useContext(Ki),{matches:s}=T.useContext(Qs),{pathname:i}=Ta(),o=JSON.stringify(T1(s,r.v7_relativeSplatPath)),l=T.useRef(!1);return aE(()=>{l.current=!0}),T.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){a.go(u);return}let f=_1(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ai([t,f.pathname])),(d.replace?a.replace:a.push)(f,d.state,d)},[t,a,o,i,e])}function zi(){let{matches:e}=T.useContext(Qs),t=e[e.length-1];return t?t.params:{}}function nE(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=T.useContext(Ki),{matches:s}=T.useContext(Qs),{pathname:i}=Ta(),o=JSON.stringify(T1(s,a.v7_relativeSplatPath));return T.useMemo(()=>_1(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function w5(e,t){return N5(e,t)}function N5(e,t,r,a){Wc()||Tr(!1);let{navigator:s}=T.useContext(Ki),{matches:i}=T.useContext(Qs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Ta(),d;if(t){var f;let y=typeof t=="string"?rl(t):t;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Tr(!1),d=y}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=YF(e,{pathname:p}),h=O5(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Ai([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Ai([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,a);return t&&h?T.createElement(hx.Provider,{value:{location:Sd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gi.Pop}},h):h}function j5(){let e=A5(),t=p5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:s},r):null,i)}const S5=T.createElement(j5,null);class C5 extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?T.createElement(Qs.Provider,{value:this.props.routeContext},T.createElement(rE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function k5(e){let{routeContext:t,match:r,children:a}=e,s=T.useContext(E1);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Qs.Provider,{value:t},a)}function O5(e,t,r,a){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Tr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=r,g=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let p,g=!1,h=null,y=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,h=f.route.errorElement||S5,c&&(u<0&&m===0?(I5("route-fallback",!1),g=!0,y=null):u===m&&(g=!0,y=f.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,m+1)),S=()=>{let v;return p?v=h:g?v=y:f.route.Component?v=T.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=d,T.createElement(k5,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:v})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?T.createElement(C5,{location:r.location,revalidation:r.revalidation,component:h,error:p,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var sE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(sE||{}),Am=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Am||{});function T5(e){let t=T.useContext(E1);return t||Tr(!1),t}function _5(e){let t=T.useContext(y5);return t||Tr(!1),t}function E5(e){let t=T.useContext(Qs);return t||Tr(!1),t}function iE(e){let t=E5(),r=t.matches[t.matches.length-1];return r.route.id||Tr(!1),r.route.id}function A5(){var e;let t=T.useContext(rE),r=_5(Am.UseRouteError),a=iE(Am.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function P5(){let{router:e}=T5(sE.UseNavigateStable),t=iE(Am.UseNavigateStable),r=T.useRef(!1);return aE(()=>{r.current=!0}),T.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Sd({fromRouteId:t},i)))},[e,t])}const t2={};function I5(e,t,r){!t&&!t2[e]&&(t2[e]=!0)}function D5(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function oE(e){let{to:t,replace:r,state:a,relative:s}=e;Wc()||Tr(!1);let{future:i,static:o}=T.useContext(Ki),{matches:l}=T.useContext(Qs),{pathname:c}=Ta(),u=ct(),d=_1(t,T1(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return T.useEffect(()=>u(JSON.parse(f),{replace:r,state:a,relative:s}),[u,f,s,r,a]),null}function Me(e){Tr(!1)}function M5(e){let{basename:t="/",children:r=null,location:a,navigationType:s=gi.Pop,navigator:i,static:o=!1,future:l}=e;Wc()&&Tr(!1);let c=t.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:c,navigator:i,static:o,future:Sd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof a=="string"&&(a=rl(a));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:g="default"}=a,h=T.useMemo(()=>{let y=O1(d,c);return y==null?null:{location:{pathname:y,search:f,hash:m,state:p,key:g},navigationType:s}},[c,d,f,m,p,g,s]);return h==null?null:T.createElement(Ki.Provider,{value:u},T.createElement(hx.Provider,{children:r,value:h}))}function Hp(e){let{children:t,location:r}=e;return w5(By(t),r)}new Promise(()=>{});function By(e,t){t===void 0&&(t=[]);let r=[];return T.Children.forEach(e,(a,s)=>{if(!T.isValidElement(a))return;let i=[...t,s];if(a.type===T.Fragment){r.push.apply(r,By(a.props.children,i));return}a.type!==Me&&Tr(!1),!a.props.index||!a.props.children||Tr(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=By(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Uy.apply(this,arguments)}function F5(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function R5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function L5(e,t){return e.button===0&&(!t||t==="_self")&&!R5(e)}const $5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],B5="6";try{window.__reactRouterVersion=B5}catch{}const U5="startTransition",r2=MD[U5];function W5(e){let{basename:t,children:r,future:a,window:s}=e,i=T.useRef();i.current==null&&(i.current=HF({window:s,v5Compat:!0}));let o=i.current,[l,c]=T.useState({action:o.action,location:o.location}),{v7_startTransition:u}=a||{},d=T.useCallback(f=>{u&&r2?r2(()=>c(f)):c(f)},[c,u]);return T.useLayoutEffect(()=>o.listen(d),[o,d]),T.useEffect(()=>D5(a),[a]),T.createElement(M5,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}const q5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,so=T.forwardRef(function(t,r){let{onClick:a,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=F5(t,$5),{basename:p}=T.useContext(Ki),g,h=!1;if(typeof u=="string"&&K5.test(u)&&(g=u,q5))try{let v=new URL(window.location.href),x=u.startsWith("//")?new URL(v.protocol+u):new URL(u),b=O1(x.pathname,p);x.origin===v.origin&&b!=null?u=b+x.search+x.hash:h=!0}catch{}let y=v5(u,{relative:s}),w=z5(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function S(v){a&&a(v),v.defaultPrevented||w(v)}return T.createElement("a",Uy({},m,{href:g||y,onClick:h||i?a:S,ref:r,target:c}))});var a2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(a2||(a2={}));var n2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(n2||(n2={}));function z5(e,t){let{target:r,replace:a,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=ct(),u=Ta(),d=nE(e,{relative:o});return T.useCallback(f=>{if(L5(f,r)){f.preventDefault();let m=a!==void 0?a:Em(u)===Em(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,a,s,r,e,i,o,l])}var V5={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=T;function H5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var G5=typeof Object.is=="function"?Object.is:H5,X5=Pf.useSyncExternalStore,Y5=Pf.useRef,Q5=Pf.useEffect,J5=Pf.useMemo,Z5=Pf.useDebugValue;V5.useSyncExternalStoreWithSelector=function(e,t,r,a,s){var i=Y5(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=J5(function(){function c(p){if(!u){if(u=!0,d=p,p=a(p),s!==void 0&&o.hasValue){var g=o.value;if(s(g,p))return f=g}return f=p}if(g=f,G5(d,p))return g;var h=a(p);return s!==void 0&&s(g,h)?(d=p,g):(d=p,f=h)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,a,s]);var l=X5(e,i[0],i[1]);return Q5(function(){o.hasValue=!0,o.value=l},[l]),Z5(l),l};function eR(e){e()}function tR(){let e=null,t=null;return{clear(){e=null,t=null},notify(){eR(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var s2={notify(){},get:()=>[]};function rR(e,t){let r,a=s2,s=0,i=!1;function o(h){d();const y=a.subscribe(h);let w=!1;return()=>{w||(w=!0,y(),f())}}function l(){a.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){s++,r||(r=t?t.addNestedSub(c):e.subscribe(c),a=tR())}function f(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=s2)}function m(){i||(i=!0,d())}function p(){i&&(i=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>a};return g}var aR=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nR=aR(),sR=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iR=sR(),oR=()=>nR||iR?T.useLayoutEffect:T.useEffect,lR=oR(),Gp=Symbol.for("react-redux-context"),Xp=typeof globalThis<"u"?globalThis:{};function cR(){if(!T.createContext)return{};const e=Xp[Gp]??(Xp[Gp]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var uR=cR();function dR(e){const{children:t,context:r,serverState:a,store:s}=e,i=T.useMemo(()=>{const c=rR(s);return{store:s,subscription:c,getServerState:a?()=>a:void 0}},[s,a]),o=T.useMemo(()=>s.getState(),[s]);lR(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||uR;return T.createElement(l.Provider,{value:i},t)}var fR=dR;function na(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mR=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),i2=mR,Yp=()=>Math.random().toString(36).substring(7).split("").join("."),hR={INIT:`@@redux/INIT${Yp()}`,REPLACE:`@@redux/REPLACE${Yp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Yp()}`},Pm=hR;function A1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function lE(e,t,r){if(typeof e!="function")throw new Error(na(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(na(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(na(1));return r(lE)(e,t)}let a=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((y,w)=>{o.set(w,y)}))}function d(){if(c)throw new Error(na(3));return s}function f(y){if(typeof y!="function")throw new Error(na(4));if(c)throw new Error(na(5));let w=!0;u();const S=l++;return o.set(S,y),function(){if(w){if(c)throw new Error(na(6));w=!1,u(),o.delete(S),i=null}}}function m(y){if(!A1(y))throw new Error(na(7));if(typeof y.type>"u")throw new Error(na(8));if(typeof y.type!="string")throw new Error(na(17));if(c)throw new Error(na(9));try{c=!0,s=a(s,y)}finally{c=!1}return(i=o).forEach(S=>{S()}),y}function p(y){if(typeof y!="function")throw new Error(na(10));a=y,m({type:Pm.REPLACE})}function g(){const y=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(na(11));function S(){const x=w;x.next&&x.next(d())}return S(),{unsubscribe:y(S)}},[i2](){return this}}}return m({type:Pm.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:p,[i2]:g}}function xR(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Pm.INIT})>"u")throw new Error(na(12));if(typeof r(void 0,{type:Pm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(na(13))})}function pR(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const a=Object.keys(r);let s;try{xR(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<a.length;d++){const f=a[d],m=r[f],p=o[f],g=m(p,l);if(typeof g>"u")throw l&&l.type,new Error(na(14));u[f]=g,c=c||g!==p}return c=c||a.length!==Object.keys(o).length,c?u:o}}function Im(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function gR(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(na(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=Im(...l)(s.dispatch),{...s,dispatch:i}}}function yR(e){return A1(e)&&"type"in e&&typeof e.type=="string"}var cE=Symbol.for("immer-nothing"),o2=Symbol.for("immer-draftable"),ln=Symbol.for("immer-state");function Xn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fc=Object.getPrototypeOf;function $o(e){return!!e&&!!e[ln]}function Vs(e){var t;return e?uE(e)||Array.isArray(e)||!!e[o2]||!!((t=e.constructor)!=null&&t[o2])||If(e)||px(e):!1}var vR=Object.prototype.constructor.toString();function uE(e){if(!e||typeof e!="object")return!1;const t=fc(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===vR}function Dm(e,t){xx(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function xx(e){const t=e[ln];return t?t.type_:Array.isArray(e)?1:If(e)?2:px(e)?3:0}function Wy(e,t){return xx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dE(e,t,r){const a=xx(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function bR(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function If(e){return e instanceof Map}function px(e){return e instanceof Set}function mo(e){return e.copy_||e.base_}function qy(e,t){if(If(e))return new Map(e);if(px(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=uE(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[ln];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const o=s[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(fc(e),a)}else{const a=fc(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function P1(e,t=!1){return gx(e)||$o(e)||!Vs(e)||(xx(e)>1&&Object.defineProperties(e,{set:{value:g0},add:{value:g0},clear:{value:g0},delete:{value:g0}}),Object.freeze(e),t&&Object.values(e).forEach(r=>P1(r,!0))),e}function g0(){Xn(2)}function gx(e){return Object.isFrozen(e)}var wR={};function Bo(e){const t=wR[e];return t||Xn(0,e),t}var Cd;function fE(){return Cd}function NR(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function l2(e,t){t&&(Bo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ky(e){zy(e),e.drafts_.forEach(jR),e.drafts_=null}function zy(e){e===Cd&&(Cd=e.parent_)}function c2(e){return Cd=NR(Cd,e)}function jR(e){const t=e[ln];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function u2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ln].modified_&&(Ky(t),Xn(4)),Vs(e)&&(e=Mm(t,e),t.parent_||Fm(t,e)),t.patches_&&Bo("Patches").generateReplacementPatches_(r[ln].base_,e,t.patches_,t.inversePatches_)):e=Mm(t,r,[]),Ky(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cE?e:void 0}function Mm(e,t,r){if(gx(t))return t;const a=t[ln];if(!a)return Dm(t,(s,i)=>d2(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return Fm(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,o=!1;a.type_===3&&(i=new Set(s),s.clear(),o=!0),Dm(i,(l,c)=>d2(e,a,s,l,c,r,o)),Fm(e,s,!1),r&&e.patches_&&Bo("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function d2(e,t,r,a,s,i,o){if($o(s)){const l=i&&t&&t.type_!==3&&!Wy(t.assigned_,a)?i.concat(a):void 0,c=Mm(e,s,l);if(dE(r,a,c),$o(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(Vs(s)&&!gx(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Mm(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(If(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&Fm(e,s)}}function Fm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&P1(t,r)}function SR(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:fE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=I1;r&&(s=[a],i=kd);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return a.draft_=l,a.revoke_=o,l}var I1={get(e,t){if(t===ln)return e;const r=mo(e);if(!Wy(r,t))return CR(e,r,t);const a=r[t];return e.finalized_||!Vs(a)?a:a===Qp(e.base_,t)?(Jp(e),e.copy_[t]=Hy(a,e)):a},has(e,t){return t in mo(e)},ownKeys(e){return Reflect.ownKeys(mo(e))},set(e,t,r){const a=mE(mo(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=Qp(mo(e),t),i=s==null?void 0:s[ln];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(bR(r,s)&&(r!==void 0||Wy(e.base_,t)))return!0;Jp(e),Vy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Qp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Jp(e),Vy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=mo(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Xn(11)},getPrototypeOf(e){return fc(e.base_)},setPrototypeOf(){Xn(12)}},kd={};Dm(I1,(e,t)=>{kd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});kd.deleteProperty=function(e,t){return kd.set.call(this,e,t,void 0)};kd.set=function(e,t,r){return I1.set.call(this,e[0],t,r,e[0])};function Qp(e,t){const r=e[ln];return(r?mo(r):e)[t]}function CR(e,t,r){var s;const a=mE(t,r);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function mE(e,t){if(!(t in e))return;let r=fc(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=fc(r)}}function Vy(e){e.modified_||(e.modified_=!0,e.parent_&&Vy(e.parent_))}function Jp(e){e.copy_||(e.copy_=qy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var kR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Xn(6),a!==void 0&&typeof a!="function"&&Xn(7);let s;if(Vs(t)){const i=c2(this),o=Hy(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?Ky(i):zy(i)}return l2(i,a),u2(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===cE&&(s=void 0),this.autoFreeze_&&P1(s,!0),a){const i=[],o=[];Bo("Patches").generateReplacementPatches_(t,s,i,o),a(i,o)}return s}else Xn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,s;return[this.produce(t,r,(o,l)=>{a=o,s=l}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Vs(e)||Xn(8),$o(e)&&(e=OR(e));const t=c2(this),r=Hy(e,void 0);return r[ln].isManual_=!0,zy(t),r}finishDraft(e,t){const r=e&&e[ln];(!r||!r.isManual_)&&Xn(9);const{scope_:a}=r;return l2(a,t),u2(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=Bo("Patches").applyPatches_;return $o(e)?a(e,t):this.produce(e,s=>a(s,t))}};function Hy(e,t){const r=If(e)?Bo("MapSet").proxyMap_(e,t):px(e)?Bo("MapSet").proxySet_(e,t):SR(e,t);return(t?t.scope_:fE()).drafts_.push(r),r}function OR(e){return $o(e)||Xn(10,e),hE(e)}function hE(e){if(!Vs(e)||gx(e))return e;const t=e[ln];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=qy(e,t.scope_.immer_.useStrictShallowCopy_)}else r=qy(e,!0);return Dm(r,(a,s)=>{dE(r,a,hE(s))}),t&&(t.finalized_=!1),r}var TR=new kR,xE=TR.produce;function pE(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var _R=pE(),ER=pE,AR=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Im:Im.apply(null,arguments)};function f2(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(Ms(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>yR(a)&&a.type===e,r}var gE=class Pu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pu.prototype)}static get[Symbol.species](){return Pu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pu(...t[0].concat(this)):new Pu(...t.concat(this))}};function m2(e){return Vs(e)?xE(e,()=>{}):e}function y0(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function PR(e){return typeof e=="boolean"}var IR=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new gE;return r&&(PR(r)?o.push(_R):o.push(ER(r.extraArgument))),o},DR="RTK_autoBatch",h2=e=>t=>{setTimeout(t,e)},MR=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:h2(10):e.type==="callback"?e.queueNotification:h2(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},a,{subscribe(d){const f=()=>s&&d(),m=a.subscribe(f);return l.add(d),()=>{m(),l.delete(d)}},dispatch(d){var f;try{return s=!((f=d==null?void 0:d.meta)!=null&&f[DR]),i=!s,i&&(o||(o=!0,c(u))),a.dispatch(d)}finally{s=!0}}})},FR=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new gE(e);return a&&s.push(MR(typeof a=="object"?a:void 0)),s};function RR(e){const t=IR(),{reducer:r=void 0,middleware:a,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(A1(r))c=pR(r);else throw new Error(Ms(1));let u;typeof a=="function"?u=a(t):u=t();let d=Im;s&&(d=AR({trace:!1,...typeof s=="object"&&s}));const f=gR(...u),m=FR(f);let p=typeof l=="function"?l(m):m();const g=d(...p);return lE(c,o,g)}function yE(e){const t={},r=[];let a;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Ms(28));if(l in t)throw new Error(Ms(29));return t[l]=o,s},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function LR(e){return typeof e=="function"}function $R(e,t){let[r,a,s]=yE(t),i;if(LR(e))i=()=>m2(e());else{const l=m2(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...a.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if($o(d)){const p=f(d,c);return p===void 0?d:p}else{if(Vs(d))return xE(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},l)}return o.getInitialState=i,o}var BR=Symbol.for("rtk-slice-createasyncthunk");function UR(e,t){return`${e}/${t}`}function WR({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[BR];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Ms(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers(zR()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(x,b){const N=typeof x=="string"?x:x.type;if(!N)throw new Error(Ms(12));if(N in u.sliceCaseReducersByType)throw new Error(Ms(13));return u.sliceCaseReducersByType[N]=b,d},addMatcher(x,b){return u.sliceMatchers.push({matcher:x,reducer:b}),d},exposeAction(x,b){return u.actionCreators[x]=b,d},exposeCaseReducer(x,b){return u.sliceCaseReducersByName[x]=b,d}};c.forEach(x=>{const b=l[x],N={reducerName:x,type:UR(i,x),createNotation:typeof s.reducers=="function"};HR(b)?XR(N,b,d,t):VR(N,b,d)});function f(){const[x={},b=[],N=void 0]=typeof s.extraReducers=="function"?yE(s.extraReducers):[s.extraReducers],j={...x,...u.sliceCaseReducersByType};return $R(s.initialState,O=>{for(let _ in j)O.addCase(_,j[_]);for(let _ of u.sliceMatchers)O.addMatcher(_.matcher,_.reducer);for(let _ of b)O.addMatcher(_.matcher,_.reducer);N&&O.addDefaultCase(N)})}const m=x=>x,p=new Map,g=new WeakMap;let h;function y(x,b){return h||(h=f()),h(x,b)}function w(){return h||(h=f()),h.getInitialState()}function S(x,b=!1){function N(O){let _=O[x];return typeof _>"u"&&b&&(_=y0(g,N,w)),_}function j(O=m){const _=y0(p,b,()=>new WeakMap);return y0(_,O,()=>{const E={};for(const[k,C]of Object.entries(s.selectors??{}))E[k]=qR(C,O,()=>y0(g,O,w),b);return E})}return{reducerPath:x,getSelectors:j,get selectors(){return j(N)},selectSlice:N}}const v={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:w,...S(o),injectInto(x,{reducerPath:b,...N}={}){const j=b??o;return x.inject({reducerPath:j,reducer:y},N),{...v,...S(j,!0)}}};return v}}function qR(e,t,r,a){function s(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var KR=WR();function zR(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function VR({type:e,reducerName:t,createNotation:r},a,s){let i,o;if("reducer"in a){if(r&&!GR(a))throw new Error(Ms(17));i=a.reducer,o=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?f2(e,o):f2(e))}function HR(e){return e._reducerDefinitionType==="asyncThunk"}function GR(e){return e._reducerDefinitionType==="reducerWithPrepare"}function XR({type:e,reducerName:t},r,a,s){if(!s)throw new Error(Ms(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=s(e,i,d);a.exposeAction(t,f),o&&a.addCase(f.fulfilled,o),l&&a.addCase(f.pending,l),c&&a.addCase(f.rejected,c),u&&a.addMatcher(f.settled,u),a.exposeCaseReducer(t,{fulfilled:o||v0,pending:l||v0,rejected:c||v0,settled:u||v0})}function v0(){}function Ms(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const YR={rawMaterials:[],loading:!1,error:null},QR=()=>{try{localStorage.removeItem("rawMaterials"),console.log(" Cleared rawMaterials from localStorage")}catch(e){console.error("Error clearing localStorage:",e)}return[]},JR=QR(),vE=KR({name:"inventory",initialState:{...YR,rawMaterials:JR},reducers:{setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload},setRawMaterials:(e,t)=>{e.rawMaterials=t.payload;try{localStorage.setItem("rawMaterials",JSON.stringify(t.payload))}catch(r){console.error("Error saving to localStorage:",r)}},addRawMaterial:(e,t)=>{e.rawMaterials.push(t.payload);try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(r){console.error("Error saving to localStorage:",r)}},updateRawMaterial:(e,t)=>{const r=e.rawMaterials.findIndex(a=>a.id===t.payload.id);if(r!==-1){e.rawMaterials[r]=t.payload;try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(a){console.error("Error saving to localStorage:",a)}}},deleteRawMaterial:(e,t)=>{e.rawMaterials=e.rawMaterials.filter(r=>r.id!==t.payload);try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(r){console.error("Error saving to localStorage:",r)}},importRawMaterials:(e,t)=>{const r=t.payload,s=[...e.rawMaterials];r.forEach(i=>{const o=s.findIndex(l=>l.materialCode===i.materialCode);o!==-1?s[o]={...s[o],materialName:i.materialName,description:i.description,category:i.category,unitOfMeasure:i.unitOfMeasure,updatedAt:new Date().toISOString()}:s.push(i)}),e.rawMaterials=s;try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(i){console.error("Error saving to localStorage:",i)}},clearRawMaterials:e=>{e.rawMaterials=[];try{localStorage.removeItem("rawMaterials")}catch(t){console.error("Error clearing localStorage:",t)}}}});vE.actions;const ZR=vE.reducer,e8=RR({reducer:{inventory:ZR}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ye=(e,t)=>{const r=T.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>T.createElement("svg",{ref:d,...t8,width:s,height:s,stroke:a,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${r8(e)}`,l].join(" "),...u},[...t.map(([f,m])=>T.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=Ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=Ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Ye("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=Ye("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Ye("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=Ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=Ye("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=Ye("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Ye("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=Ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=Ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=Ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=Ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=Ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Ye("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=Ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=Ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Ye("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=Ye("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Ye("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Ye("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Ye("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Ye("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Ye("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=Ye("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class x8{constructor(){BN(this,"baseURL");this.baseURL={}.VITE_API_URL||"http://localhost:5000/api"}async request(t,r={}){const a=`${this.baseURL}${t}`,s=r.body instanceof FormData,i=localStorage.getItem("auth_token"),o={};s||(o["Content-Type"]="application/json"),i&&(o.Authorization=`Bearer ${i}`),r.headers&&Object.assign(o,r.headers);const l={headers:o,...r};try{const c=await fetch(a,l),u=await c.json();if(!c.ok)throw new Error(u.message||`HTTP error! status: ${c.status}`);return u}catch(c){throw console.error("API request failed:",c),c}}async login(t){return this.request("/auth/login",{method:"POST",body:JSON.stringify(t)})}async me(){return this.request("/auth/me")}async getUsers(){return this.request("/users")}async createUser(t){return this.request("/users",{method:"POST",body:JSON.stringify(t)})}async healthCheck(){return this.request("/health")}async getRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/raw-materials${a?`?${a}`:""}`;return this.request(s)}async createRawMaterial(t){return this.request("/raw-materials",{method:"POST",body:JSON.stringify(t)})}async updateRawMaterial(t,r){return this.request(`/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRawMaterial(t){return this.request(`/raw-materials/${t}`,{method:"DELETE"})}async syncWithZohoRawMaterials(){return this.request("/sync-zoho/raw-materials",{method:"POST"})}async getCentralKitchens(){return this.request("/central-kitchen")}async getCentralKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/central-kitchen/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getCentralKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/central-kitchen/finished-products${a?`?${a}`:""}`;return this.request(s)}async getItemsList(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search);const a=r.toString();return this.request(`/items-list${a?`?${a}`:""}`)}async syncItemsListFromZoho(){return this.request("/items-list/sync",{method:"POST"})}async getLocationsList(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search);const a=r.toString();return this.request(`/locations-list${a?`?${a}`:""}`)}async syncLocationsFromZoho(){return this.request("/locations-list/sync",{method:"POST"})}async createCentralKitchenRawMaterial(t){return this.request("/central-kitchen/raw-materials",{method:"POST",body:JSON.stringify(t)})}async exportCentralKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/central-kitchen/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Central_Kitchen_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportCentralKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/central-kitchen/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Central_Kitchen_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async getKuwaitCityRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/kuwait-city/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getKuwaitCityFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/kuwait-city/finished-products${a?`?${a}`:""}`;return this.request(s)}async importKuwaitCityRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/kuwait-city/raw-materials/import-excel",{method:"POST",body:r})}async importKuwaitCityFinishedProducts(t){return this.request("/kuwait-city/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importMall360RawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/360-mall/raw-materials/import-excel",{method:"POST",body:r})}async importMall360FinishedProducts(t){return this.request("/360-mall/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importVibeComplexRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/vibe-complex/raw-materials/import-excel",{method:"POST",body:r})}async importVibeComplexFinishedProducts(t){return this.request("/vibe-complex/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async exportKuwaitCityRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/kuwait-city/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Kuwait_City_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportKuwaitCityFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/kuwait-city/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Kuwait_City_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportMall360RawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/360-mall/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Mall360_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportMall360FinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/360-mall/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Mall360_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportVibesComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/vibe-complex/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Vibes_Complex_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportVibesComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/vibe-complex/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Vibes_Complex_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportTaibaHospitalRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/taiba-kitchen/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Taiba_Hospital_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportTaibaHospitalFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/taiba-kitchen/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Taiba_Hospital_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async get360MallRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/360-mall/raw-materials${a?`?${a}`:""}`;return this.request(s)}async get360MallFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/360-mall/finished-products${a?`?${a}`:""}`;return this.request(s)}async getVibesComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getVibeComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getVibesComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/finished-products${a?`?${a}`:""}`;return this.request(s)}async getVibeComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/finished-products${a?`?${a}`:""}`;return this.request(s)}async getTaibaKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/taiba-kitchen/raw-materials${a?`?${a}`:""}`;return this.request(s)}async importTaibaKitchenRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/taiba-kitchen/raw-materials/import-excel",{method:"POST",body:r})}async importTaibaKitchenFinishedProducts(t){return this.request("/taiba-kitchen/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async getTaibaKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("category",t.subCategory),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/taiba-kitchen/finished-products${a?`?${a}`:""}`;return this.request(s)}async getNotifications(t,r,a){const s=new URLSearchParams;r&&s.append("type",r),a&&s.append("limit",a.toString());const i=s.toString(),o=`/notifications/${encodeURIComponent(t)}${i?`?${i}`:""}`;return this.request(o)}async markNotificationAsRead(t){return this.request(`/notifications/${t}/read`,{method:"PUT"})}async markAllNotificationsAsRead(t){return this.request("/notifications/mark-all-read",{method:"PUT",body:JSON.stringify({outlet:t})})}async clearAllNotifications(t){return this.request("/notifications/clear-all",{method:"DELETE",body:JSON.stringify({outlet:t})})}async createNotification(t){return this.request("/notifications",{method:"POST",body:JSON.stringify(t)})}async getTransferOrderById(t){return this.request(`/transfer-orders/${t}`)}async updateTransferOrderInventory(t,r){return this.request(`/transfer-order-inventory/${t}/${r}`,{method:"PUT",body:JSON.stringify({action:r})})}async getOutlets(t){return this.request("/outlets")}async getFinishedGoods(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/finished-goods${a?`?${a}`:""}`;return this.request(s)}async createFinishedGood(t){return this.request("/finished-goods",{method:"POST",body:JSON.stringify(t)})}async updateFinishedGood(t,r){return this.request(`/finished-goods/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteFinishedGood(t){return this.request(`/finished-goods/${t}`,{method:"DELETE"})}async getTransferOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.fromOutlet&&r.append("fromOutlet",t.fromOutlet),t!=null&&t.toOutlet&&r.append("toOutlet",t.toOutlet),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/transfer-orders${a?`?${a}`:""}`;return this.request(s)}async deleteTransferOrder(t,r){const a=r?JSON.stringify(r):void 0;return this.request(`/transfer-orders/${t}`,{method:"DELETE",body:a})}async updateTransferOrderStatus(t,r){return this.request(`/transfer-orders/${t}/status`,{method:"PUT",body:JSON.stringify(r)})}async approveTransferOrder(t,r){return this.request(`/transfer-order-inventory/${t}/approve`,{method:"PUT",body:JSON.stringify(r)})}async rejectTransferOrder(t,r){return this.request(`/transfer-order-inventory/${t}/reject`,{method:"PUT",body:JSON.stringify(r)})}async getBillOfMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/bill-of-materials${a?`?${a}`:""}`;return this.request(s)}async getBillOfMaterialById(t){return this.request(`/bill-of-materials/${t}`)}async createBillOfMaterial(t){return this.request("/bill-of-materials",{method:"POST",body:JSON.stringify(t)})}async updateBillOfMaterial(t,r){return this.request(`/bill-of-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteBillOfMaterial(t){return this.request(`/bill-of-materials/${t}`,{method:"DELETE"})}async createTransfer(t){return this.request("/transfers/create",{method:"POST",body:JSON.stringify(t)})}async createTransferOrder(t){return this.request("/transfer-orders",{method:"POST",body:JSON.stringify(t)})}async getSalesOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.outletId&&r.append("outletId",t.outletId),t!=null&&t.outletCode&&r.append("outletCode",t.outletCode),t!=null&&t.outletName&&r.append("outletName",t.outletName),t!=null&&t.orderStatus&&r.append("orderStatus",t.orderStatus),t!=null&&t.orderType&&r.append("orderType",t.orderType),t!=null&&t.paymentStatus&&r.append("paymentStatus",t.paymentStatus),t!=null&&t.startDate&&r.append("startDate",t.startDate),t!=null&&t.endDate&&r.append("endDate",t.endDate),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/sales-orders${a?`?${a}`:""}`;return this.request(s)}async getSalesOrderById(t){return this.request(`/sales-orders/${t}`)}async createSalesOrder(t){return this.request("/sales-orders",{method:"POST",body:JSON.stringify(t)})}async updateSalesOrder(t,r){return this.request(`/sales-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSalesOrder(t){return this.request(`/sales-orders/${t}`,{method:"DELETE"})}async updateSalesOrderStatus(t,r){return this.request(`/sales-orders/${t}/status`,{method:"PUT",body:JSON.stringify(r)})}async createIngredientMasterTransfer(t){return this.request("/ingredient-master/create-transfer",{method:"POST",body:JSON.stringify(t)})}async getPurchaseOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/purchase-orders${a?`?${a}`:""}`;return this.request(s)}async getPurchaseOrderById(t){return this.request(`/purchase-orders/${t}`)}async createPurchaseOrder(t){return this.request("/purchase-orders",{method:"POST",body:JSON.stringify(t)})}async updatePurchaseOrder(t,r){return this.request(`/purchase-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deletePurchaseOrder(t){return this.request(`/purchase-orders/${t}`,{method:"DELETE"})}async syncZohoBillsToPurchaseOrders(){return this.request("/sync-zoho-bills/purchase-orders",{method:"POST"})}async pushSalesOrderToZoho(t){return this.request(`/sales-orders/${t}/push-to-zoho`,{method:"POST"})}async pushBulkSalesOrdersToZoho(t){return this.request("/sales-orders/push-bulk-to-zoho",{method:"POST",body:JSON.stringify({orderIds:t})})}async updateCentralKitchenFinishedProduct(t,r){return this.request(`/central-kitchen/finished-products/${t}`,{method:"PUT",body:JSON.stringify(r)})}async importCentralKitchenFinishedProducts(t){return this.request("/central-kitchen/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importCentralKitchenExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/central-kitchen/import-excel",{method:"POST",body:r})}async getCentralKitchenImportStatus(){return this.request("/central-kitchen/import-status",{method:"GET"})}async makeFinishedGood(t){return this.request("/central-kitchen/finished-products/make-finished-good",{method:"POST",body:JSON.stringify(t)})}async getJobOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString();return this.request(`/job-orders${a?`?${a}`:""}`)}async getJobOrder(t){return this.request(`/job-orders/${t}`)}async createJobOrder(t){return this.request("/job-orders",{method:"POST",body:JSON.stringify(t)})}async updateJobOrder(t,r){return this.request(`/job-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteJobOrder(t){return this.request(`/job-orders/${t}`,{method:"DELETE"})}async createOutlet(t){return this.request("/outlets",{method:"POST",body:JSON.stringify(t)})}async getOutlet(t){return this.request(`/outlets/${t}`)}async updateOutlet(t,r){return this.request(`/outlets/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteOutlet(t){return this.request(`/outlets/${t}`,{method:"DELETE"})}async getRawMaterial(t){return this.request(`/raw-materials/${t}`)}async getRawMaterialForecasts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString();return this.request(`/raw-material-forecasts${a?`?${a}`:""}`)}async createRawMaterialForecast(t){return this.request("/raw-material-forecasts",{method:"POST",body:JSON.stringify(t)})}async deleteRawMaterialForecast(t){return this.request(`/raw-material-forecasts/${t}`,{method:"DELETE"})}async createCentralKitchenInventoryItem(t){return this.request("/central-kitchen/raw-materials",{method:"POST",body:JSON.stringify(t)})}async updateCentralKitchenRawMaterial(t,r){return this.request(`/central-kitchen/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async getOutletFinishedGoods(t){return this.getFinishedGoods(t)}async updateTaibaKitchenRawMaterial(t,r){return this.request(`/taiba-kitchen/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async updateTaibaKitchenFinishedProduct(t,r){return this.request(`/taiba-kitchen/finished-products/${t}`,{method:"PUT",body:JSON.stringify(r)})}}const de=new x8,Js=e=>{const[t,r]=T.useState([]),[a,s]=T.useState(!0),i=T.useCallback(async()=>{if(!e){s(!1);return}try{s(!0),console.log(` useNotifications: Loading notifications for outlet: "${e}"`);const d=await de.getNotifications(e,void 0,20);if(console.log(" useNotifications: API response:",d),d.success){const m=(d.data||[]).map(p=>({id:p.id,title:p.title,message:p.message,type:p.type==="transfer_rejection"?"error":p.type==="transfer_acceptance"||p.type==="transfer_completed"?"success":p.priority==="high"?"warning":"info",timestamp:new Date(p.timestamp),read:p.read,outlet:e,transferOrderId:p.transferOrderId,isTransferOrder:p.type==="transfer_completed"||p.type==="transfer_request"||p.type==="transfer_acceptance"||p.type==="transfer_rejection"||p.isTransferOrder||!1,itemType:p.itemType,priority:p.priority}));r(m)}}catch(d){console.error("Error loading notifications:",d),r([])}finally{s(!1)}},[e]);T.useEffect(()=>{i();const d=setInterval(()=>{i()},3e4);return()=>clearInterval(d)},[i]);const o=T.useCallback(async d=>{try{await de.markNotificationAsRead(d),r(f=>f.map(m=>m.id===d?{...m,read:!0}:m))}catch(f){console.error("Error marking notification as read:",f)}},[]),l=T.useCallback(async()=>{if(e)try{await de.markAllNotificationsAsRead(e),r(d=>d.map(f=>({...f,read:!0})))}catch(d){console.error("Error marking all notifications as read:",d)}},[e]),c=T.useCallback(async()=>{if(e)try{await de.clearAllNotifications(e),r([])}catch(d){console.error("Error clearing notifications:",d)}},[e]),u=T.useCallback(d=>{const f={...d,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,read:!1};r(m=>[f,...m])},[]);return{notifications:t,markAsRead:o,markAllAsRead:l,clearAll:c,addNotification:u,loading:a,refreshNotifications:i}},N0=[{name:"Dashboard",href:"/dashboard",icon:c8},{name:"Recipe Master",href:"/bill-of-materials",icon:o8},{name:"Central Kitchen",icon:En,hasDropdown:!0,children:[{name:"Raw Material Inventory",href:"/central-kitchen/raw-materials",icon:rt},{name:"Finished Good Inventory",href:"/central-kitchen/finished-goods",icon:Sl},{name:"Make Finished Good",href:"/central-kitchen/make-finished-good",icon:$1},{name:"Create Transfer",href:"/central-kitchen/create-transfer",icon:ta}]},{name:"Outlets",icon:En,hasDropdown:!0,children:[{name:"Kuwait City",icon:En,hasDropdown:!0,children:[{name:"POS Sales",href:"/kuwait-city/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/kuwait-city/raw-materials",icon:rt},{name:"Finished Goods Inventory",href:"/kuwait-city/finished-goods",icon:Sl}]},{name:"360 Mall",icon:$m,hasDropdown:!0,children:[{name:"POS Sales",href:"/360-mall/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/360-mall/raw-materials",icon:rt},{name:"Finished Goods Inventory",href:"/360-mall/finished-goods",icon:Sl}]},{name:"Vibes Complex",icon:Lm,hasDropdown:!0,children:[{name:"POS Sales",href:"/vibes-complex/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/vibes-complex/raw-materials",icon:rt},{name:"Finished Goods Inventory",href:"/vibes-complex/finished-goods",icon:Sl}]},{name:"Taiba Hospital",icon:Rm,hasDropdown:!0,children:[{name:"POS Sales",href:"/taiba-hospital/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/taiba-hospital/raw-materials",icon:rt},{name:"Finished Goods Inventory",href:"/taiba-hospital/finished-goods",icon:Sl}]}]},{name:"Transfer Orders",href:"/transfer-orders",icon:ta},{name:"Purchase Orders",href:"/purchase-orders",icon:Fr}],p8=({children:e})=>{const[t,r]=T.useState(!1),[a,s]=T.useState(new Set),i=Ta(),o=ct(),l=(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})(),c=!!(l!=null&&l.isAdmin),u=String((l==null?void 0:l.assignedOutletCode)||""),d=le.useMemo(()=>{const v=i.pathname;if(console.log(" Layout: Determining outlet name for notifications",{isAdmin:c,assignedOutlet:u,pathname:v}),v.includes("/kuwait-city")||v.includes("/downtown-restaurant"))return console.log(' Layout: On Kuwait City page, using "Kuwait City"'),"Kuwait City";if(v.includes("/mall-360")||v.includes("/mall-food-court"))return console.log(' Layout: On 360 Mall page, using "360 Mall"'),"360 Mall";if(v.includes("/vibes-complex")||v.includes("/marina-walk-cafe"))return console.log(' Layout: On Vibes Complex page, using "Vibes Complex"'),"Vibes Complex";if(v.includes("/taiba-hospital")||v.includes("/drive-thru-express"))return console.log(' Layout: On Taiba Hospital page, using "Taiba Hospital"'),"Taiba Hospital";if(v.includes("/central-kitchen")||v.includes("/central-kitchen-raw-materials")||v.includes("/central-kitchen-finished-goods")||v.includes("/create-transfer"))return console.log(' Layout: On Central Kitchen page, using "Central Kitchen"'),"Central Kitchen";if(c)return console.log(' Layout: User is admin and not on specific outlet page, using "Central Kitchen"'),"Central Kitchen";if(u==="KUWAIT_CITY")return console.log(' Layout: Assigned outlet is KUWAIT_CITY, using "Kuwait City"'),"Kuwait City";if(u==="MALL_360")return console.log(' Layout: Assigned outlet is MALL_360, using "360 Mall"'),"360 Mall";if(u==="VIBE_COMPLEX")return console.log(' Layout: Assigned outlet is VIBE_COMPLEX, using "Vibes Complex"'),"Vibes Complex";if(u==="TAIBA_HOSPITAL")return console.log(' Layout: Assigned outlet is TAIBA_HOSPITAL, using "Taiba Hospital"'),"Taiba Hospital";console.warn(" Layout: Unknown assignedOutlet or route, returning undefined",{assignedOutlet:u,pathname:v})},[c,u,i.pathname]),{notifications:f,markAsRead:m,markAllAsRead:p,clearAll:g,refreshNotifications:h}=Js(d);le.useEffect(()=>{const v=()=>{h()};return window.addEventListener("refreshNotifications",v),()=>{window.removeEventListener("refreshNotifications",v)}},[h]);const y=le.useMemo(()=>{const v=i.pathname;return v.includes("/raw-materials")?"Raw Material":v.includes("/finished-goods")?"Finished Goods":null},[i.pathname]);le.useMemo(()=>{console.log(" Layout: All notifications:",f),console.log(" Layout: Outlet for notifications:",d),console.log(" Layout: Current module:",y);let v=f.filter(x=>{var N,j;return x.isTransferOrder||((N=x.title)==null?void 0:N.includes("Transfer Request"))||((j=x.title)==null?void 0:j.includes("Transfer"))||x.transferOrderId});return y&&(v=v.filter(x=>{const b=x.itemType,N=!b||b===y||b==="Mixed";return console.log(" Layout: Filtering notification by itemType:",{id:x.id,title:x.title,itemType:b,currentModule:y,shouldShow:N}),N})),console.log(" Layout: Filtered notifications count:",v.length),v},[f,d,y]);const w=le.useMemo(()=>{if(c)return N0;const v=u==="KUWAIT_CITY"?"Kuwait City":u==="MALL_360"?"360 Mall":u==="VIBE_COMPLEX"?"Vibes Complex":u==="TAIBA_HOSPITAL"?"Taiba Hospital":"",x=[];x.push(N0[0]);const b=N0.find(j=>j.name==="Outlets");if(b&&b.children&&v){const j=b.children.filter(O=>O.name===v);j.length&&x.push({...b,children:j})}const N=N0.find(j=>j.name==="Transfer Orders");return N&&x.push(N),x},[c,u]),S=v=>{const x=new Set(a);x.has(v)?x.delete(v):x.add(v),s(x)};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        /* Enhanced scrollbar styling for sidebar */
        .sidebar-nav::-webkit-scrollbar {
          width: 6px;
        }
        .sidebar-nav::-webkit-scrollbar-track {
          background: transparent;
          border-radius: 3px;
        }
        .sidebar-nav::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 3px;
          transition: background-color 0.2s ease;
        }
        .sidebar-nav::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
        .sidebar-nav {
          scrollbar-width: thin;
          scrollbar-color: #d1d5db transparent;
        }
        
        /* Smooth scrolling behavior */
        .sidebar-nav {
          scroll-behavior: smooth;
        }
        
        /* Ensure proper height constraints */
        .sidebar-container {
          height: calc(100vh - 4rem); /* Subtract header height */
          display: flex;
          flex-direction: column;
        }
        
        .sidebar-nav-container {
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          min-height: 0;
        }
        
        /* Mobile sidebar height fix */
        .mobile-sidebar-nav {
          height: calc(100vh - 4rem);
          overflow-y: auto;
          overflow-x: hidden;
        }
      `}),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${t?"block":"hidden"}`,children:[n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),n.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white sidebar-container",children:[n.jsxs("div",{className:"flex h-16 items-center justify-between px-4 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"L"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"localbeet"})})]}),n.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"sidebar-nav-container",children:n.jsx("nav",{className:"px-4 py-4 space-y-1 sidebar-nav mobile-sidebar-nav",children:w.map(v=>{const x=v.icon,b=i.pathname===v.href,N=v.hasDropdown,j=a.has(v.name);return N?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>S(v.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(x,{className:"mr-3 h-5 w-5 flex-shrink-0"}),v.name]}),j?n.jsx(ca,{className:"h-4 w-4"}):n.jsx(w0,{className:"h-4 w-4"})]}),j&&v.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:v.children.map(O=>{const _=O.icon,E=O.href?i.pathname===O.href:!1,k=O.hasDropdown||!1,C=a.has(O.name);return k?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>S(O.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(_,{className:"mr-3 h-4 w-4 flex-shrink-0"}),O.name]}),C?n.jsx(ca,{className:"h-4 w-4"}):n.jsx(w0,{className:"h-4 w-4"})]}),C&&O.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:O.children.map(A=>{const P=A.icon,I=A.href?i.pathname===A.href:!1;return n.jsxs(so,{to:A.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${I?"bg-primary-100 text-primary-700":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(P,{className:"mr-3 h-4 w-4 flex-shrink-0"}),A.name]},A.name)})})]},O.name):n.jsxs(so,{to:O.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${E?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(_,{className:"mr-3 h-4 w-4 flex-shrink-0"}),O.name]},O.name)})})]},v.name):n.jsxs(so,{to:v.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${b?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(x,{className:"mr-3 h-5 w-5 flex-shrink-0"}),v.name]},v.name)})})})]})]}),n.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:n.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 sidebar-container",children:[n.jsx("div",{className:"flex h-16 items-center px-4 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"L"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"localbeet"})})]})}),n.jsx("div",{className:"sidebar-nav-container",children:n.jsx("nav",{className:"px-4 py-4 space-y-1 sidebar-nav",children:w.map(v=>{const x=v.icon,b=i.pathname===v.href,N=v.hasDropdown,j=a.has(v.name);return N?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>S(v.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(x,{className:"mr-3 h-5 w-5 flex-shrink-0"}),v.name]}),j?n.jsx(ca,{className:"h-4 w-4"}):n.jsx(w0,{className:"h-4 w-4"})]}),j&&v.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:v.children.map(O=>{const _=O.icon,E=O.href?i.pathname===O.href:!1,k=O.hasDropdown||!1,C=a.has(O.name);return k?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>S(O.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(_,{className:"mr-3 h-4 w-4 flex-shrink-0"}),O.name]}),C?n.jsx(ca,{className:"h-4 w-4"}):n.jsx(w0,{className:"h-4 w-4"})]}),C&&O.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:O.children.map(A=>{const P=A.icon,I=A.href?i.pathname===A.href:!1;return n.jsxs(so,{to:A.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${I?"bg-primary-100 text-primary-700":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(P,{className:"mr-3 h-4 w-4 flex-shrink-0"}),A.name]},A.name)})})]},O.name):n.jsxs(so,{to:O.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${E?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(_,{className:"mr-3 h-4 w-4 flex-shrink-0"}),O.name]},O.name)})})]},v.name):n.jsxs(so,{to:v.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${b?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(x,{className:"mr-3 h-5 w-5 flex-shrink-0"}),v.name]},v.name)})})}),n.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Fi,{className:"h-8 w-8 text-gray-400"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:(l==null?void 0:l.name)||"User"}),n.jsx("p",{className:"text-xs text-gray-500",children:(l==null?void 0:l.email)||""})]})]}),n.jsxs("div",{className:"mt-3 space-y-1",children:[c&&n.jsxs(so,{to:"/settings",className:`flex items-center px-3 py-2 text-sm rounded-lg w-full ${i.pathname==="/settings"?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"}`,children:[n.jsx(kE,{className:"mr-3 h-4 w-4"}),"Settings"]}),n.jsxs("button",{onClick:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),o("/login",{replace:!0})},className:"flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg w-full",children:[n.jsx(u8,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]})]})}),n.jsxs("div",{className:"lg:pl-64",children:[n.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[n.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>r(!0),children:n.jsx(d8,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[n.jsx("div",{className:"flex flex-1"}),n.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[n.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),n.jsx("div",{className:"flex items-center gap-x-2",children:n.jsxs("span",{className:"text-sm text-gray-700",children:["Welcome back, ",(l==null?void 0:l.name)||"Admin"]})})]})]})]}),n.jsx("main",{className:"py-6",children:n.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})]})]})]})},nt=({children:e,allowedOutletCodes:t})=>{const r=Ta(),a=(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})(),s=!!(a!=null&&a.isAdmin),i=String((a==null?void 0:a.assignedOutletCode)||"");return s||t.includes(i)?e:n.jsx(oE,{to:"/dashboard",replace:!0,state:{from:r}})};function TE(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=TE(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function It(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=TE(e))&&(a&&(a+=" "),a+=t);return a}var g8=Array.isArray,Ha=g8,y8=typeof Zf=="object"&&Zf&&Zf.Object===Object&&Zf,_E=y8,v8=_E,b8=typeof self=="object"&&self&&self.Object===Object&&self,w8=v8||b8||Function("return this")(),ws=w8,N8=ws,j8=N8.Symbol,Df=j8,g2=Df,EE=Object.prototype,S8=EE.hasOwnProperty,C8=EE.toString,gu=g2?g2.toStringTag:void 0;function k8(e){var t=S8.call(e,gu),r=e[gu];try{e[gu]=void 0;var a=!0}catch{}var s=C8.call(e);return a&&(t?e[gu]=r:delete e[gu]),s}var O8=k8,T8=Object.prototype,_8=T8.toString;function E8(e){return _8.call(e)}var A8=E8,y2=Df,P8=O8,I8=A8,D8="[object Null]",M8="[object Undefined]",v2=y2?y2.toStringTag:void 0;function F8(e){return e==null?e===void 0?M8:D8:v2&&v2 in Object(e)?P8(e):I8(e)}var Zs=F8;function R8(e){return e!=null&&typeof e=="object"}var ei=R8,L8=Zs,$8=ei,B8="[object Symbol]";function U8(e){return typeof e=="symbol"||$8(e)&&L8(e)==B8}var qc=U8,W8=Ha,q8=qc,K8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z8=/^\w*$/;function V8(e,t){if(W8(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||q8(e)?!0:z8.test(e)||!K8.test(e)||t!=null&&e in Object(t)}var B1=V8;function H8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Gi=H8;const Kc=Qt(Gi);var G8=Zs,X8=Gi,Y8="[object AsyncFunction]",Q8="[object Function]",J8="[object GeneratorFunction]",Z8="[object Proxy]";function eL(e){if(!X8(e))return!1;var t=G8(e);return t==Q8||t==J8||t==Y8||t==Z8}var U1=eL;const xt=Qt(U1);var tL=ws,rL=tL["__core-js_shared__"],aL=rL,Zp=aL,b2=function(){var e=/[^.]+$/.exec(Zp&&Zp.keys&&Zp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function nL(e){return!!b2&&b2 in e}var sL=nL,iL=Function.prototype,oL=iL.toString;function lL(e){if(e!=null){try{return oL.call(e)}catch{}try{return e+""}catch{}}return""}var AE=lL,cL=U1,uL=sL,dL=Gi,fL=AE,mL=/[\\^$.*+?()[\]{}|]/g,hL=/^\[object .+?Constructor\]$/,xL=Function.prototype,pL=Object.prototype,gL=xL.toString,yL=pL.hasOwnProperty,vL=RegExp("^"+gL.call(yL).replace(mL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bL(e){if(!dL(e)||uL(e))return!1;var t=cL(e)?vL:hL;return t.test(fL(e))}var wL=bL;function NL(e,t){return e==null?void 0:e[t]}var jL=NL,SL=wL,CL=jL;function kL(e,t){var r=CL(e,t);return SL(r)?r:void 0}var al=kL,OL=al,TL=OL(Object,"create"),vx=TL,w2=vx;function _L(){this.__data__=w2?w2(null):{},this.size=0}var EL=_L;function AL(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var PL=AL,IL=vx,DL="__lodash_hash_undefined__",ML=Object.prototype,FL=ML.hasOwnProperty;function RL(e){var t=this.__data__;if(IL){var r=t[e];return r===DL?void 0:r}return FL.call(t,e)?t[e]:void 0}var LL=RL,$L=vx,BL=Object.prototype,UL=BL.hasOwnProperty;function WL(e){var t=this.__data__;return $L?t[e]!==void 0:UL.call(t,e)}var qL=WL,KL=vx,zL="__lodash_hash_undefined__";function VL(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=KL&&t===void 0?zL:t,this}var HL=VL,GL=EL,XL=PL,YL=LL,QL=qL,JL=HL;function zc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}zc.prototype.clear=GL;zc.prototype.delete=XL;zc.prototype.get=YL;zc.prototype.has=QL;zc.prototype.set=JL;var ZL=zc;function e$(){this.__data__=[],this.size=0}var t$=e$;function r$(e,t){return e===t||e!==e&&t!==t}var W1=r$,a$=W1;function n$(e,t){for(var r=e.length;r--;)if(a$(e[r][0],t))return r;return-1}var bx=n$,s$=bx,i$=Array.prototype,o$=i$.splice;function l$(e){var t=this.__data__,r=s$(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():o$.call(t,r,1),--this.size,!0}var c$=l$,u$=bx;function d$(e){var t=this.__data__,r=u$(t,e);return r<0?void 0:t[r][1]}var f$=d$,m$=bx;function h$(e){return m$(this.__data__,e)>-1}var x$=h$,p$=bx;function g$(e,t){var r=this.__data__,a=p$(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var y$=g$,v$=t$,b$=c$,w$=f$,N$=x$,j$=y$;function Vc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Vc.prototype.clear=v$;Vc.prototype.delete=b$;Vc.prototype.get=w$;Vc.prototype.has=N$;Vc.prototype.set=j$;var wx=Vc,S$=al,C$=ws,k$=S$(C$,"Map"),q1=k$,N2=ZL,O$=wx,T$=q1;function _$(){this.size=0,this.__data__={hash:new N2,map:new(T$||O$),string:new N2}}var E$=_$;function A$(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var P$=A$,I$=P$;function D$(e,t){var r=e.__data__;return I$(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Nx=D$,M$=Nx;function F$(e){var t=M$(this,e).delete(e);return this.size-=t?1:0,t}var R$=F$,L$=Nx;function $$(e){return L$(this,e).get(e)}var B$=$$,U$=Nx;function W$(e){return U$(this,e).has(e)}var q$=W$,K$=Nx;function z$(e,t){var r=K$(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var V$=z$,H$=E$,G$=R$,X$=B$,Y$=q$,Q$=V$;function Hc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Hc.prototype.clear=H$;Hc.prototype.delete=G$;Hc.prototype.get=X$;Hc.prototype.has=Y$;Hc.prototype.set=Q$;var K1=Hc,PE=K1,J$="Expected a function";function z1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(J$);var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,a);return r.cache=i.set(s,o)||i,o};return r.cache=new(z1.Cache||PE),r}z1.Cache=PE;var IE=z1;const Z$=Qt(IE);var e7=IE,t7=500;function r7(e){var t=e7(e,function(a){return r.size===t7&&r.clear(),a}),r=t.cache;return t}var a7=r7,n7=a7,s7=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i7=/\\(\\)?/g,o7=n7(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(s7,function(r,a,s,i){t.push(s?i.replace(i7,"$1"):a||r)}),t}),l7=o7;function c7(e,t){for(var r=-1,a=e==null?0:e.length,s=Array(a);++r<a;)s[r]=t(e[r],r,e);return s}var V1=c7,j2=Df,u7=V1,d7=Ha,f7=qc,m7=1/0,S2=j2?j2.prototype:void 0,C2=S2?S2.toString:void 0;function DE(e){if(typeof e=="string")return e;if(d7(e))return u7(e,DE)+"";if(f7(e))return C2?C2.call(e):"";var t=e+"";return t=="0"&&1/e==-m7?"-0":t}var h7=DE,x7=h7;function p7(e){return e==null?"":x7(e)}var ME=p7,g7=Ha,y7=B1,v7=l7,b7=ME;function w7(e,t){return g7(e)?e:y7(e,t)?[e]:v7(b7(e))}var FE=w7,N7=qc,j7=1/0;function S7(e){if(typeof e=="string"||N7(e))return e;var t=e+"";return t=="0"&&1/e==-j7?"-0":t}var jx=S7,C7=FE,k7=jx;function O7(e,t){t=C7(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[k7(t[r++])];return r&&r==a?e:void 0}var H1=O7,T7=H1;function _7(e,t,r){var a=e==null?void 0:T7(e,t);return a===void 0?r:a}var RE=_7;const An=Qt(RE);function E7(e){return e==null}var A7=E7;const bt=Qt(A7);var P7=Zs,I7=Ha,D7=ei,M7="[object String]";function F7(e){return typeof e=="string"||!I7(e)&&D7(e)&&P7(e)==M7}var R7=F7;const Wo=Qt(R7);var LE={exports:{}},zt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1=Symbol.for("react.element"),X1=Symbol.for("react.portal"),Sx=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Tx=Symbol.for("react.context"),L7=Symbol.for("react.server_context"),_x=Symbol.for("react.forward_ref"),Ex=Symbol.for("react.suspense"),Ax=Symbol.for("react.suspense_list"),Px=Symbol.for("react.memo"),Ix=Symbol.for("react.lazy"),$7=Symbol.for("react.offscreen"),$E;$E=Symbol.for("react.module.reference");function Rn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case G1:switch(e=e.type,e){case Sx:case kx:case Cx:case Ex:case Ax:return e;default:switch(e=e&&e.$$typeof,e){case L7:case Tx:case _x:case Ix:case Px:case Ox:return e;default:return t}}case X1:return t}}}zt.ContextConsumer=Tx;zt.ContextProvider=Ox;zt.Element=G1;zt.ForwardRef=_x;zt.Fragment=Sx;zt.Lazy=Ix;zt.Memo=Px;zt.Portal=X1;zt.Profiler=kx;zt.StrictMode=Cx;zt.Suspense=Ex;zt.SuspenseList=Ax;zt.isAsyncMode=function(){return!1};zt.isConcurrentMode=function(){return!1};zt.isContextConsumer=function(e){return Rn(e)===Tx};zt.isContextProvider=function(e){return Rn(e)===Ox};zt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===G1};zt.isForwardRef=function(e){return Rn(e)===_x};zt.isFragment=function(e){return Rn(e)===Sx};zt.isLazy=function(e){return Rn(e)===Ix};zt.isMemo=function(e){return Rn(e)===Px};zt.isPortal=function(e){return Rn(e)===X1};zt.isProfiler=function(e){return Rn(e)===kx};zt.isStrictMode=function(e){return Rn(e)===Cx};zt.isSuspense=function(e){return Rn(e)===Ex};zt.isSuspenseList=function(e){return Rn(e)===Ax};zt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Sx||e===kx||e===Cx||e===Ex||e===Ax||e===$7||typeof e=="object"&&e!==null&&(e.$$typeof===Ix||e.$$typeof===Px||e.$$typeof===Ox||e.$$typeof===Tx||e.$$typeof===_x||e.$$typeof===$E||e.getModuleId!==void 0)};zt.typeOf=Rn;LE.exports=zt;var B7=LE.exports,U7=Zs,W7=ei,q7="[object Number]";function K7(e){return typeof e=="number"||W7(e)&&U7(e)==q7}var BE=K7;const z7=Qt(BE);var V7=BE;function H7(e){return V7(e)&&e!=+e}var G7=H7;const Mf=Qt(G7);var Qn=function(t){return t===0?0:t>0?1:-1},wo=function(t){return Wo(t)&&t.indexOf("%")===t.length-1},Be=function(t){return z7(t)&&!Mf(t)},X7=function(t){return bt(t)},Kr=function(t){return Be(t)||Wo(t)},Y7=0,Ff=function(t){var r=++Y7;return"".concat(t||"").concat(r)},qo=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Be(t)&&!Wo(t))return a;var i;if(wo(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Mf(i)&&(i=a),s&&i>r&&(i=r),i},hi=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Q7=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},Gn=function(t,r){return Be(t)&&Be(r)?function(a){return t+a*(r-t)}:function(){return r}};function Bm(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):An(a,t))===r})}var J7=function(t,r){return Be(t)&&Be(r)?t-r:Wo(t)&&Wo(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Xl(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Xy(e){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(e)}var Z7=["viewBox","children"],eB=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],k2=["points","pathLength"],eg={svg:Z7,polygon:k2,polyline:k2},Y1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Um=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(T.isValidElement(t)&&(a=t.props),!Kc(a))return null;var s={};return Object.keys(a).forEach(function(i){Y1.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},tB=function(t,r,a){return function(s){return t(r,a,s),null}},Wm=function(t,r,a){if(!Kc(t)||Xy(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];Y1.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=tB(o,r,a))}),s},rB=["children"],aB=["children"];function O2(e,t){if(e==null)return{};var r=nB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function nB(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Yy(e){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yy(e)}var T2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},_2=null,tg=null,Q1=function e(t){if(t===_2&&Array.isArray(tg))return tg;var r=[];return T.Children.forEach(t,function(a){bt(a)||(B7.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),tg=r,_2=t,r};function Pn(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return Fs(s)}):a=[Fs(t)],Q1(e).forEach(function(s){var i=An(s,"type.displayName")||An(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function Ja(e,t){var r=Pn(e,t);return r&&r[0]}var E2=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!Be(a)||a<=0||!Be(s)||s<=0)},sB=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],iB=function(t){return t&&t.type&&Wo(t.type)&&sB.indexOf(t.type)>=0},oB=function(t){return t&&Yy(t)==="object"&&"clipDot"in t},lB=function(t,r,a,s){var i,o=(i=eg==null?void 0:eg[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!xt(t)&&(s&&o.includes(r)||eB.includes(r))||a&&Y1.includes(r)},Tt=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(T.isValidElement(t)&&(s=t.props),!Kc(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;lB((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},Qy=function e(t,r){if(t===r)return!0;var a=T.Children.count(t);if(a!==T.Children.count(r))return!1;if(a===0)return!0;if(a===1)return A2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!A2(i,o))return!1}return!0},A2=function(t,r){if(bt(t)&&bt(r))return!0;if(!bt(t)&&!bt(r)){var a=t.props||{},s=a.children,i=O2(a,rB),o=r.props||{},l=o.children,c=O2(o,aB);return s&&l?Xl(i,c)&&Qy(s,l):!s&&!l?Xl(i,c):!1}return!1},P2=function(t,r){var a=[],s={};return Q1(t).forEach(function(i,o){if(iB(i))a.push(i);else if(i){var l=Fs(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var f=u(i,l,o);a.push(f),s[l]=!0}}}),a},cB=function(t){var r=t&&t.type;return r&&T2[r]?T2[r]:null},uB=function(t,r){return Q1(r).indexOf(t)},dB=["children","width","height","viewBox","className","style","title","desc"];function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jy.apply(this,arguments)}function fB(e,t){if(e==null)return{};var r=mB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function mB(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Zy(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=fB(e,dB),d=s||{width:r,height:a,x:0,y:0},f=It("recharts-surface",i);return le.createElement("svg",Jy({},Tt(u,!0,"svg"),{className:f,width:r,height:a,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),le.createElement("title",null,l),le.createElement("desc",null,c),t)}var hB=["children","className"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ev.apply(this,arguments)}function xB(e,t){if(e==null)return{};var r=pB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function pB(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Or=le.forwardRef(function(e,t){var r=e.children,a=e.className,s=xB(e,hB),i=It("recharts-layer",a);return le.createElement("g",ev({className:i},Tt(s,!0),{ref:t}),r)}),Rs=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function gB(e,t,r){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++a<s;)i[a]=e[a+t];return i}var yB=gB,vB=yB;function bB(e,t,r){var a=e.length;return r=r===void 0?a:r,!t&&r>=a?e:vB(e,t,r)}var wB=bB,NB="\\ud800-\\udfff",jB="\\u0300-\\u036f",SB="\\ufe20-\\ufe2f",CB="\\u20d0-\\u20ff",kB=jB+SB+CB,OB="\\ufe0e\\ufe0f",TB="\\u200d",_B=RegExp("["+TB+NB+kB+OB+"]");function EB(e){return _B.test(e)}var UE=EB;function AB(e){return e.split("")}var PB=AB,WE="\\ud800-\\udfff",IB="\\u0300-\\u036f",DB="\\ufe20-\\ufe2f",MB="\\u20d0-\\u20ff",FB=IB+DB+MB,RB="\\ufe0e\\ufe0f",LB="["+WE+"]",tv="["+FB+"]",rv="\\ud83c[\\udffb-\\udfff]",$B="(?:"+tv+"|"+rv+")",qE="[^"+WE+"]",KE="(?:\\ud83c[\\udde6-\\uddff]){2}",zE="[\\ud800-\\udbff][\\udc00-\\udfff]",BB="\\u200d",VE=$B+"?",HE="["+RB+"]?",UB="(?:"+BB+"(?:"+[qE,KE,zE].join("|")+")"+HE+VE+")*",WB=HE+VE+UB,qB="(?:"+[qE+tv+"?",tv,KE,zE,LB].join("|")+")",KB=RegExp(rv+"(?="+rv+")|"+qB+WB,"g");function zB(e){return e.match(KB)||[]}var VB=zB,HB=PB,GB=UE,XB=VB;function YB(e){return GB(e)?XB(e):HB(e)}var QB=YB,JB=wB,ZB=UE,e9=QB,t9=ME;function r9(e){return function(t){t=t9(t);var r=ZB(t)?e9(t):void 0,a=r?r[0]:t.charAt(0),s=r?JB(r,1).join(""):t.slice(1);return a[e]()+s}}var a9=r9,n9=a9,s9=n9("toUpperCase"),i9=s9;const Dx=Qt(i9);function er(e){return function(){return e}}const GE=Math.cos,qm=Math.sin,ns=Math.sqrt,Km=Math.PI,Mx=2*Km,av=Math.PI,nv=2*av,ho=1e-6,o9=nv-ho;function XE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function l9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return XE;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class c9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?XE:l9(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,u=s-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>ho)if(!(Math.abs(f*c-u*d)>ho)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=a-o,g=s-l,h=c*c+u*u,y=p*p+g*g,w=Math.sqrt(h),S=Math.sqrt(m),v=i*Math.tan((av-Math.acos((h+m-y)/(2*w*S)))/2),x=v/S,b=v/w;Math.abs(x-1)>ho&&this._append`L${t+x*d},${r+x*f}`,this._append`A${i},${i},0,0,${+(f*p>d*g)},${this._x1=t+b*c},${this._y1=r+b*u}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),u=t+l,d=r+c,f=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ho||Math.abs(this._y1-d)>ho)&&this._append`L${u},${d}`,a&&(m<0&&(m=m%nv+nv),m>o9?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=u},${this._y1=d}`:m>ho&&this._append`A${a},${a},0,${+(m>=av)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function J1(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new c9(t)}function Z1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YE(e){this._context=e}YE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Fx(e){return new YE(e)}function QE(e){return e[0]}function JE(e){return e[1]}function ZE(e,t){var r=er(!0),a=null,s=Fx,i=null,o=J1(l);e=typeof e=="function"?e:e===void 0?QE:er(e),t=typeof t=="function"?t:t===void 0?JE:er(t);function l(c){var u,d=(c=Z1(c)).length,f,m=!1,p;for(a==null&&(i=s(p=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:er(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:er(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:er(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function j0(e,t,r){var a=null,s=er(!0),i=null,o=Fx,l=null,c=J1(u);e=typeof e=="function"?e:e===void 0?QE:er(+e),t=typeof t=="function"?t:er(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?JE:er(+r);function u(f){var m,p,g,h=(f=Z1(f)).length,y,w=!1,S,v=new Array(h),x=new Array(h);for(i==null&&(l=o(S=c())),m=0;m<=h;++m){if(!(m<h&&s(y=f[m],m,f))===w)if(w=!w)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=m-1;g>=p;--g)l.point(v[g],x[g]);l.lineEnd(),l.areaEnd()}w&&(v[m]=+e(y,m,f),x[m]=+t(y,m,f),l.point(a?+a(y,m,f):v[m],r?+r(y,m,f):x[m]))}if(S)return l=null,S+""||null}function d(){return ZE().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:er(+f),a=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:er(+f),u):e},u.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:er(+f),u):a},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:er(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:er(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:er(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(a).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:er(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class e3{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function u9(e){return new e3(e,!0)}function d9(e){return new e3(e,!1)}const ew={draw(e,t){const r=ns(t/Km);e.moveTo(r,0),e.arc(0,0,r,0,Mx)}},f9={draw(e,t){const r=ns(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},t3=ns(1/3),m9=t3*2,h9={draw(e,t){const r=ns(t/m9),a=r*t3;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},x9={draw(e,t){const r=ns(t),a=-r/2;e.rect(a,a,r,r)}},p9=.8908130915292852,r3=qm(Km/10)/qm(7*Km/10),g9=qm(Mx/10)*r3,y9=-GE(Mx/10)*r3,v9={draw(e,t){const r=ns(t*p9),a=g9*r,s=y9*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=Mx*i/5,l=GE(o),c=qm(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},rg=ns(3),b9={draw(e,t){const r=-ns(t/(rg*3));e.moveTo(0,r*2),e.lineTo(-rg*r,-r),e.lineTo(rg*r,-r),e.closePath()}},hn=-.5,xn=ns(3)/2,sv=1/ns(12),w9=(sv/2+1)*3,N9={draw(e,t){const r=ns(t/w9),a=r/2,s=r*sv,i=a,o=r*sv+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(hn*a-xn*s,xn*a+hn*s),e.lineTo(hn*i-xn*o,xn*i+hn*o),e.lineTo(hn*l-xn*c,xn*l+hn*c),e.lineTo(hn*a+xn*s,hn*s-xn*a),e.lineTo(hn*i+xn*o,hn*o-xn*i),e.lineTo(hn*l+xn*c,hn*c-xn*l),e.closePath()}};function j9(e,t){let r=null,a=J1(s);e=typeof e=="function"?e:er(e||ew),t=typeof t=="function"?t:er(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:er(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:er(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function zm(){}function Vm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function a3(e){this._context=e}a3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S9(e){return new a3(e)}function n3(e){this._context=e}n3.prototype={areaStart:zm,areaEnd:zm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C9(e){return new n3(e)}function s3(e){this._context=e}s3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Vm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function k9(e){return new s3(e)}function i3(e){this._context=e}i3.prototype={areaStart:zm,areaEnd:zm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function O9(e){return new i3(e)}function I2(e){return e<0?-1:1}function D2(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(I2(i)+I2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function M2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ag(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function Hm(e){this._context=e}Hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ag(this,this._t0,M2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ag(this,M2(this,r=D2(this,e,t)),r);break;default:ag(this,this._t0,r=D2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function o3(e){this._context=new l3(e)}(o3.prototype=Object.create(Hm.prototype)).point=function(e,t){Hm.prototype.point.call(this,t,e)};function l3(e){this._context=e}l3.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function T9(e){return new Hm(e)}function _9(e){return new o3(e)}function c3(e){this._context=e}c3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=F2(e),s=F2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function F2(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function E9(e){return new c3(e)}function Rx(e,t){this._context=e,this._t=t}Rx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function A9(e){return new Rx(e,.5)}function P9(e){return new Rx(e,0)}function I9(e){return new Rx(e,1)}function mc(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function iv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function D9(e,t){return e[t]}function M9(e){const t=[];return t.key=e,t}function F9(){var e=er([]),t=iv,r=mc,a=D9;function s(i){var o=Array.from(e.apply(this,arguments),M9),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+a(f,o[l].key,u,i)]).data=f;for(l=0,d=Z1(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:er(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:er(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?iv:typeof i=="function"?i:er(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??mc,s):r},s}function R9(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}mc(e,t)}}function L9(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}mc(e,t)}}function $9(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[a][1]||0,m=d[a-1][1]||0,p=(f-m)/2,g=0;g<l;++g){var h=e[t[g]],y=h[a][1]||0,w=h[a-1][1]||0;p+=y-w}c+=f,u+=p*f}s[a-1][1]+=s[a-1][0]=r,c&&(r-=u/c)}s[a-1][1]+=s[a-1][0]=r,mc(e,t)}}function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}var B9=["type","size","sizeType"];function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ov.apply(this,arguments)}function R2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function L2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R2(Object(r),!0).forEach(function(a){U9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function U9(e,t,r){return t=W9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W9(e){var t=q9(e,"string");return Td(t)=="symbol"?t:t+""}function q9(e,t){if(Td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Td(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K9(e,t){if(e==null)return{};var r=z9(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function z9(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var u3={symbolCircle:ew,symbolCross:f9,symbolDiamond:h9,symbolSquare:x9,symbolStar:v9,symbolTriangle:b9,symbolWye:N9},V9=Math.PI/180,H9=function(t){var r="symbol".concat(Dx(t));return u3[r]||ew},G9=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*V9;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},X9=function(t,r){u3["symbol".concat(Dx(t))]=r},tw=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=K9(t,B9),u=L2(L2({},c),{},{type:a,size:i,sizeType:l}),d=function(){var y=H9(a),w=j9().type(y).size(G9(i,l,a));return w()},f=u.className,m=u.cx,p=u.cy,g=Tt(u,!0);return m===+m&&p===+p&&i===+i?le.createElement("path",ov({},g,{className:It("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(p,")"),d:d()})):null};tw.registerSymbol=X9;function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lv.apply(this,arguments)}function $2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Y9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(r),!0).forEach(function(a){_d(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Q9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B2(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,f3(a.key),a)}}function J9(e,t,r){return t&&B2(e.prototype,t),r&&B2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z9(e,t,r){return t=Gm(t),eU(e,d3()?Reflect.construct(t,r||[],Gm(e).constructor):t.apply(e,r))}function eU(e,t){if(t&&(hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tU(e)}function tU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d3=function(){return!!e})()}function Gm(e){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gm(e)}function rU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},cv(e,t)}function _d(e,t,r){return t=f3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f3(e){var t=aU(e,"string");return hc(t)=="symbol"?t:t+""}function aU(e,t){if(hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(hc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pn=32,rw=function(e){function t(){return Q9(this,t),Z9(this,t,arguments)}return rU(t,e),J9(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=pn/2,o=pn/6,l=pn/3,c=a.inactive?s:a.color;if(a.type==="plainline")return le.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:pn,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return le.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(pn,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return le.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(pn/8,"h").concat(pn,"v").concat(pn*3/4,"h").concat(-pn,"z"),className:"recharts-legend-icon"});if(le.isValidElement(a.legendIcon)){var u=Y9({},a);return delete u.legendIcon,le.cloneElement(a.legendIcon,u)}return le.createElement(tw,{fill:c,cx:i,cy:i,size:pn,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:pn,height:pn},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,g){var h=p.formatter||c,y=It(_d(_d({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var w=xt(p.value)?null:p.value;Rs(!xt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=p.inactive?u:p.color;return le.createElement("li",lv({className:y,style:f,key:"legend-item-".concat(g)},Wm(a.props,p,g)),le.createElement(Zy,{width:o,height:o,viewBox:d,style:m},a.renderIcon(p)),le.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},h?h(w,p,g):w))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return le.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(T.PureComponent);_d(rw,"displayName","Legend");_d(rw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var nU=wx;function sU(){this.__data__=new nU,this.size=0}var iU=sU;function oU(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var lU=oU;function cU(e){return this.__data__.get(e)}var uU=cU;function dU(e){return this.__data__.has(e)}var fU=dU,mU=wx,hU=q1,xU=K1,pU=200;function gU(e,t){var r=this.__data__;if(r instanceof mU){var a=r.__data__;if(!hU||a.length<pU-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new xU(a)}return r.set(e,t),this.size=r.size,this}var yU=gU,vU=wx,bU=iU,wU=lU,NU=uU,jU=fU,SU=yU;function Gc(e){var t=this.__data__=new vU(e);this.size=t.size}Gc.prototype.clear=bU;Gc.prototype.delete=wU;Gc.prototype.get=NU;Gc.prototype.has=jU;Gc.prototype.set=SU;var m3=Gc,CU="__lodash_hash_undefined__";function kU(e){return this.__data__.set(e,CU),this}var OU=kU;function TU(e){return this.__data__.has(e)}var _U=TU,EU=K1,AU=OU,PU=_U;function Xm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new EU;++t<r;)this.add(e[t])}Xm.prototype.add=Xm.prototype.push=AU;Xm.prototype.has=PU;var h3=Xm;function IU(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var x3=IU;function DU(e,t){return e.has(t)}var p3=DU,MU=h3,FU=x3,RU=p3,LU=1,$U=2;function BU(e,t,r,a,s,i){var o=r&LU,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,p=r&$U?new MU:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],h=t[f];if(a)var y=o?a(h,g,f,t,e,i):a(g,h,f,e,t,i);if(y!==void 0){if(y)continue;m=!1;break}if(p){if(!FU(t,function(w,S){if(!RU(p,S)&&(g===w||s(g,w,r,a,i)))return p.push(S)})){m=!1;break}}else if(!(g===h||s(g,h,r,a,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var g3=BU,UU=ws,WU=UU.Uint8Array,qU=WU;function KU(e){var t=-1,r=Array(e.size);return e.forEach(function(a,s){r[++t]=[s,a]}),r}var zU=KU;function VU(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var aw=VU,U2=Df,W2=qU,HU=W1,GU=g3,XU=zU,YU=aw,QU=1,JU=2,ZU="[object Boolean]",eW="[object Date]",tW="[object Error]",rW="[object Map]",aW="[object Number]",nW="[object RegExp]",sW="[object Set]",iW="[object String]",oW="[object Symbol]",lW="[object ArrayBuffer]",cW="[object DataView]",q2=U2?U2.prototype:void 0,ng=q2?q2.valueOf:void 0;function uW(e,t,r,a,s,i,o){switch(r){case cW:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lW:return!(e.byteLength!=t.byteLength||!i(new W2(e),new W2(t)));case ZU:case eW:case aW:return HU(+e,+t);case tW:return e.name==t.name&&e.message==t.message;case nW:case iW:return e==t+"";case rW:var l=XU;case sW:var c=a&QU;if(l||(l=YU),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;a|=JU,o.set(e,t);var d=GU(l(e),l(t),a,s,i,o);return o.delete(e),d;case oW:if(ng)return ng.call(e)==ng.call(t)}return!1}var dW=uW;function fW(e,t){for(var r=-1,a=t.length,s=e.length;++r<a;)e[s+r]=t[r];return e}var y3=fW,mW=y3,hW=Ha;function xW(e,t,r){var a=t(e);return hW(e)?a:mW(a,r(e))}var pW=xW;function gW(e,t){for(var r=-1,a=e==null?0:e.length,s=0,i=[];++r<a;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var yW=gW;function vW(){return[]}var bW=vW,wW=yW,NW=bW,jW=Object.prototype,SW=jW.propertyIsEnumerable,K2=Object.getOwnPropertySymbols,CW=K2?function(e){return e==null?[]:(e=Object(e),wW(K2(e),function(t){return SW.call(e,t)}))}:NW,kW=CW;function OW(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var TW=OW,_W=Zs,EW=ei,AW="[object Arguments]";function PW(e){return EW(e)&&_W(e)==AW}var IW=PW,z2=IW,DW=ei,v3=Object.prototype,MW=v3.hasOwnProperty,FW=v3.propertyIsEnumerable,RW=z2(function(){return arguments}())?z2:function(e){return DW(e)&&MW.call(e,"callee")&&!FW.call(e,"callee")},nw=RW,Ym={exports:{}};function LW(){return!1}var $W=LW;Ym.exports;(function(e,t){var r=ws,a=$W,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||a;e.exports=u})(Ym,Ym.exports);var b3=Ym.exports,BW=9007199254740991,UW=/^(?:0|[1-9]\d*)$/;function WW(e,t){var r=typeof e;return t=t??BW,!!t&&(r=="number"||r!="symbol"&&UW.test(e))&&e>-1&&e%1==0&&e<t}var sw=WW,qW=9007199254740991;function KW(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qW}var iw=KW,zW=Zs,VW=iw,HW=ei,GW="[object Arguments]",XW="[object Array]",YW="[object Boolean]",QW="[object Date]",JW="[object Error]",ZW="[object Function]",eq="[object Map]",tq="[object Number]",rq="[object Object]",aq="[object RegExp]",nq="[object Set]",sq="[object String]",iq="[object WeakMap]",oq="[object ArrayBuffer]",lq="[object DataView]",cq="[object Float32Array]",uq="[object Float64Array]",dq="[object Int8Array]",fq="[object Int16Array]",mq="[object Int32Array]",hq="[object Uint8Array]",xq="[object Uint8ClampedArray]",pq="[object Uint16Array]",gq="[object Uint32Array]",ar={};ar[cq]=ar[uq]=ar[dq]=ar[fq]=ar[mq]=ar[hq]=ar[xq]=ar[pq]=ar[gq]=!0;ar[GW]=ar[XW]=ar[oq]=ar[YW]=ar[lq]=ar[QW]=ar[JW]=ar[ZW]=ar[eq]=ar[tq]=ar[rq]=ar[aq]=ar[nq]=ar[sq]=ar[iq]=!1;function yq(e){return HW(e)&&VW(e.length)&&!!ar[zW(e)]}var vq=yq;function bq(e){return function(t){return e(t)}}var w3=bq,Qm={exports:{}};Qm.exports;(function(e,t){var r=_E,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Qm,Qm.exports);var wq=Qm.exports,Nq=vq,jq=w3,V2=wq,H2=V2&&V2.isTypedArray,Sq=H2?jq(H2):Nq,N3=Sq,Cq=TW,kq=nw,Oq=Ha,Tq=b3,_q=sw,Eq=N3,Aq=Object.prototype,Pq=Aq.hasOwnProperty;function Iq(e,t){var r=Oq(e),a=!r&&kq(e),s=!r&&!a&&Tq(e),i=!r&&!a&&!s&&Eq(e),o=r||a||s||i,l=o?Cq(e.length,String):[],c=l.length;for(var u in e)(t||Pq.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||_q(u,c)))&&l.push(u);return l}var Dq=Iq,Mq=Object.prototype;function Fq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Mq;return e===r}var Rq=Fq;function Lq(e,t){return function(r){return e(t(r))}}var j3=Lq,$q=j3,Bq=$q(Object.keys,Object),Uq=Bq,Wq=Rq,qq=Uq,Kq=Object.prototype,zq=Kq.hasOwnProperty;function Vq(e){if(!Wq(e))return qq(e);var t=[];for(var r in Object(e))zq.call(e,r)&&r!="constructor"&&t.push(r);return t}var Hq=Vq,Gq=U1,Xq=iw;function Yq(e){return e!=null&&Xq(e.length)&&!Gq(e)}var Rf=Yq,Qq=Dq,Jq=Hq,Zq=Rf;function eK(e){return Zq(e)?Qq(e):Jq(e)}var Lx=eK,tK=pW,rK=kW,aK=Lx;function nK(e){return tK(e,aK,rK)}var sK=nK,G2=sK,iK=1,oK=Object.prototype,lK=oK.hasOwnProperty;function cK(e,t,r,a,s,i){var o=r&iK,l=G2(e),c=l.length,u=G2(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var m=l[f];if(!(o?m in t:lK.call(t,m)))return!1}var p=i.get(e),g=i.get(t);if(p&&g)return p==t&&g==e;var h=!0;i.set(e,t),i.set(t,e);for(var y=o;++f<c;){m=l[f];var w=e[m],S=t[m];if(a)var v=o?a(S,w,m,t,e,i):a(w,S,m,e,t,i);if(!(v===void 0?w===S||s(w,S,r,a,i):v)){h=!1;break}y||(y=m=="constructor")}if(h&&!y){var x=e.constructor,b=t.constructor;x!=b&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof b=="function"&&b instanceof b)&&(h=!1)}return i.delete(e),i.delete(t),h}var uK=cK,dK=al,fK=ws,mK=dK(fK,"DataView"),hK=mK,xK=al,pK=ws,gK=xK(pK,"Promise"),yK=gK,vK=al,bK=ws,wK=vK(bK,"Set"),S3=wK,NK=al,jK=ws,SK=NK(jK,"WeakMap"),CK=SK,uv=hK,dv=q1,fv=yK,mv=S3,hv=CK,C3=Zs,Xc=AE,X2="[object Map]",kK="[object Object]",Y2="[object Promise]",Q2="[object Set]",J2="[object WeakMap]",Z2="[object DataView]",OK=Xc(uv),TK=Xc(dv),_K=Xc(fv),EK=Xc(mv),AK=Xc(hv),xo=C3;(uv&&xo(new uv(new ArrayBuffer(1)))!=Z2||dv&&xo(new dv)!=X2||fv&&xo(fv.resolve())!=Y2||mv&&xo(new mv)!=Q2||hv&&xo(new hv)!=J2)&&(xo=function(e){var t=C3(e),r=t==kK?e.constructor:void 0,a=r?Xc(r):"";if(a)switch(a){case OK:return Z2;case TK:return X2;case _K:return Y2;case EK:return Q2;case AK:return J2}return t});var PK=xo,sg=m3,IK=g3,DK=dW,MK=uK,eS=PK,tS=Ha,rS=b3,FK=N3,RK=1,aS="[object Arguments]",nS="[object Array]",S0="[object Object]",LK=Object.prototype,sS=LK.hasOwnProperty;function $K(e,t,r,a,s,i){var o=tS(e),l=tS(t),c=o?nS:eS(e),u=l?nS:eS(t);c=c==aS?S0:c,u=u==aS?S0:u;var d=c==S0,f=u==S0,m=c==u;if(m&&rS(e)){if(!rS(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new sg),o||FK(e)?IK(e,t,r,a,s,i):DK(e,t,c,r,a,s,i);if(!(r&RK)){var p=d&&sS.call(e,"__wrapped__"),g=f&&sS.call(t,"__wrapped__");if(p||g){var h=p?e.value():e,y=g?t.value():t;return i||(i=new sg),s(h,y,r,a,i)}}return m?(i||(i=new sg),MK(e,t,r,a,s,i)):!1}var BK=$K,UK=BK,iS=ei;function k3(e,t,r,a,s){return e===t?!0:e==null||t==null||!iS(e)&&!iS(t)?e!==e&&t!==t:UK(e,t,r,a,k3,s)}var ow=k3,WK=m3,qK=ow,KK=1,zK=2;function VK(e,t,r,a){var s=r.length,i=s,o=!a;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new WK;if(a)var m=a(u,d,c,e,t,f);if(!(m===void 0?qK(d,u,KK|zK,a,f):m))return!1}}return!0}var HK=VK,GK=Gi;function XK(e){return e===e&&!GK(e)}var O3=XK,YK=O3,QK=Lx;function JK(e){for(var t=QK(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,YK(s)]}return t}var ZK=JK;function ez(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var T3=ez,tz=HK,rz=ZK,az=T3;function nz(e){var t=rz(e);return t.length==1&&t[0][2]?az(t[0][0],t[0][1]):function(r){return r===e||tz(r,e,t)}}var sz=nz;function iz(e,t){return e!=null&&t in Object(e)}var oz=iz,lz=FE,cz=nw,uz=Ha,dz=sw,fz=iw,mz=jx;function hz(e,t,r){t=lz(t,e);for(var a=-1,s=t.length,i=!1;++a<s;){var o=mz(t[a]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++a!=s?i:(s=e==null?0:e.length,!!s&&fz(s)&&dz(o,s)&&(uz(e)||cz(e)))}var xz=hz,pz=oz,gz=xz;function yz(e,t){return e!=null&&gz(e,t,pz)}var vz=yz,bz=ow,wz=RE,Nz=vz,jz=B1,Sz=O3,Cz=T3,kz=jx,Oz=1,Tz=2;function _z(e,t){return jz(e)&&Sz(t)?Cz(kz(e),t):function(r){var a=wz(r,e);return a===void 0&&a===t?Nz(r,e):bz(t,a,Oz|Tz)}}var Ez=_z;function Az(e){return e}var Yc=Az;function Pz(e){return function(t){return t==null?void 0:t[e]}}var Iz=Pz,Dz=H1;function Mz(e){return function(t){return Dz(t,e)}}var Fz=Mz,Rz=Iz,Lz=Fz,$z=B1,Bz=jx;function Uz(e){return $z(e)?Rz(Bz(e)):Lz(e)}var Wz=Uz,qz=sz,Kz=Ez,zz=Yc,Vz=Ha,Hz=Wz;function Gz(e){return typeof e=="function"?e:e==null?zz:typeof e=="object"?Vz(e)?Kz(e[0],e[1]):qz(e):Hz(e)}var Xi=Gz;function Xz(e,t,r,a){for(var s=e.length,i=r+(a?1:-1);a?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var _3=Xz;function Yz(e){return e!==e}var Qz=Yz;function Jz(e,t,r){for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}var Zz=Jz,eV=_3,tV=Qz,rV=Zz;function aV(e,t,r){return t===t?rV(e,t,r):eV(e,tV,r)}var nV=aV,sV=nV;function iV(e,t){var r=e==null?0:e.length;return!!r&&sV(e,t,0)>-1}var oV=iV;function lV(e,t,r){for(var a=-1,s=e==null?0:e.length;++a<s;)if(r(t,e[a]))return!0;return!1}var cV=lV;function uV(){}var dV=uV,ig=S3,fV=dV,mV=aw,hV=1/0,xV=ig&&1/mV(new ig([,-0]))[1]==hV?function(e){return new ig(e)}:fV,pV=xV,gV=h3,yV=oV,vV=cV,bV=p3,wV=pV,NV=aw,jV=200;function SV(e,t,r){var a=-1,s=yV,i=e.length,o=!0,l=[],c=l;if(r)o=!1,s=vV;else if(i>=jV){var u=t?null:wV(e);if(u)return NV(u);o=!1,s=bV,c=new gV}else c=t?[]:l;e:for(;++a<i;){var d=e[a],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),l.push(d)}else s(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var CV=SV,kV=Xi,OV=CV;function TV(e,t){return e&&e.length?OV(e,kV(t)):[]}var _V=TV;const oS=Qt(_V);function E3(e,t,r){return t===!0?oS(e,r):xt(t)?oS(e,t):e}function xc(e){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(e)}var EV=["ref"];function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(a){$x(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P3(a.key),a)}}function PV(e,t,r){return t&&cS(e.prototype,t),r&&cS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IV(e,t,r){return t=Jm(t),DV(e,A3()?Reflect.construct(t,r||[],Jm(e).constructor):t.apply(e,r))}function DV(e,t){if(t&&(xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MV(e)}function MV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A3=function(){return!!e})()}function Jm(e){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jm(e)}function FV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xv(e,t)}function xv(e,t){return xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},xv(e,t)}function $x(e,t,r){return t=P3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P3(e){var t=RV(e,"string");return xc(t)=="symbol"?t:t+""}function RV(e,t){if(xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(xc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LV(e,t){if(e==null)return{};var r=$V(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $V(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function BV(e){return e.value}function UV(e,t){if(le.isValidElement(e))return le.cloneElement(e,t);if(typeof e=="function")return le.createElement(e,t);t.ref;var r=LV(t,EV);return le.createElement(rw,r)}var uS=1,Yl=function(e){function t(){var r;AV(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=IV(this,t,[].concat(s)),$x(r,"lastBoundingBox",{width:-1,height:-1}),r}return FV(t,e),PV(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>uS||Math.abs(s.height-this.lastBoundingBox.height)>uS)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Cs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,f,m;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();m={top:((d||0)-g.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Cs(Cs({},f),m)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,f=Cs(Cs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return le.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){a.wrapperNode=p}},UV(i,Cs(Cs({},this.props),{},{payload:E3(d,u,BV)})))}}],[{key:"getWithHeight",value:function(a,s){var i=Cs(Cs({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&Be(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])}(T.PureComponent);$x(Yl,"displayName","Legend");$x(Yl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var dS=Df,WV=nw,qV=Ha,fS=dS?dS.isConcatSpreadable:void 0;function KV(e){return qV(e)||WV(e)||!!(fS&&e&&e[fS])}var zV=KV,VV=y3,HV=zV;function I3(e,t,r,a,s){var i=-1,o=e.length;for(r||(r=HV),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?I3(l,t-1,r,a,s):VV(s,l):a||(s[s.length]=l)}return s}var D3=I3;function GV(e){return function(t,r,a){for(var s=-1,i=Object(t),o=a(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var XV=GV,YV=XV,QV=YV(),JV=QV,ZV=JV,eH=Lx;function tH(e,t){return e&&ZV(e,t,eH)}var M3=tH,rH=Rf;function aH(e,t){return function(r,a){if(r==null)return r;if(!rH(r))return e(r,a);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&a(o[i],i,o)!==!1;);return r}}var nH=aH,sH=M3,iH=nH,oH=iH(sH),lw=oH,lH=lw,cH=Rf;function uH(e,t){var r=-1,a=cH(e)?Array(e.length):[];return lH(e,function(s,i,o){a[++r]=t(s,i,o)}),a}var F3=uH;function dH(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var fH=dH,mS=qc;function mH(e,t){if(e!==t){var r=e!==void 0,a=e===null,s=e===e,i=mS(e),o=t!==void 0,l=t===null,c=t===t,u=mS(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||a&&o&&c||!r&&c||!s)return 1;if(!a&&!i&&!u&&e<t||u&&r&&s&&!a&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var hH=mH,xH=hH;function pH(e,t,r){for(var a=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++a<o;){var c=xH(s[a],i[a]);if(c){if(a>=l)return c;var u=r[a];return c*(u=="desc"?-1:1)}}return e.index-t.index}var gH=pH,og=V1,yH=H1,vH=Xi,bH=F3,wH=fH,NH=w3,jH=gH,SH=Yc,CH=Ha;function kH(e,t,r){t.length?t=og(t,function(i){return CH(i)?function(o){return yH(o,i.length===1?i[0]:i)}:i}):t=[SH];var a=-1;t=og(t,NH(vH));var s=bH(e,function(i,o,l){var c=og(t,function(u){return u(i)});return{criteria:c,index:++a,value:i}});return wH(s,function(i,o){return jH(i,o,r)})}var OH=kH;function TH(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _H=TH,EH=_H,hS=Math.max;function AH(e,t,r){return t=hS(t===void 0?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=hS(a.length-t,0),o=Array(i);++s<i;)o[s]=a[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=a[s];return l[t]=r(o),EH(e,this,l)}}var PH=AH;function IH(e){return function(){return e}}var DH=IH,MH=al,FH=function(){try{var e=MH(Object,"defineProperty");return e({},"",{}),e}catch{}}(),R3=FH,RH=DH,xS=R3,LH=Yc,$H=xS?function(e,t){return xS(e,"toString",{configurable:!0,enumerable:!1,value:RH(t),writable:!0})}:LH,BH=$H,UH=800,WH=16,qH=Date.now;function KH(e){var t=0,r=0;return function(){var a=qH(),s=WH-(a-r);if(r=a,s>0){if(++t>=UH)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var zH=KH,VH=BH,HH=zH,GH=HH(VH),XH=GH,YH=Yc,QH=PH,JH=XH;function ZH(e,t){return JH(QH(e,t,YH),e+"")}var eG=ZH,tG=W1,rG=Rf,aG=sw,nG=Gi;function sG(e,t,r){if(!nG(r))return!1;var a=typeof t;return(a=="number"?rG(r)&&aG(t,r.length):a=="string"&&t in r)?tG(r[t],e):!1}var Bx=sG,iG=D3,oG=OH,lG=eG,pS=Bx,cG=lG(function(e,t){if(e==null)return[];var r=t.length;return r>1&&pS(e,t[0],t[1])?t=[]:r>2&&pS(t[0],t[1],t[2])&&(t=[t[0]]),oG(e,iG(t,1),[])}),uG=cG;const cw=Qt(uG);function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pv.apply(this,arguments)}function dG(e,t){return xG(e)||hG(e,t)||mG(e,t)||fG()}function fG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mG(e,t){if(e){if(typeof e=="string")return gS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gS(e,t)}}function gS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function hG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function xG(e){if(Array.isArray(e))return e}function yS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function lg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yS(Object(r),!0).forEach(function(a){pG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pG(e,t,r){return t=gG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gG(e){var t=yG(e,"string");return Ed(t)=="symbol"?t:t+""}function yG(e,t){if(Ed(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ed(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vG(e){return Array.isArray(e)&&Kr(e[0])&&Kr(e[1])?e.join(" ~ "):e}var bG=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,m=t.itemSorter,p=t.wrapperClassName,g=t.labelClassName,h=t.label,y=t.labelFormatter,w=t.accessibilityLayer,S=w===void 0?!1:w,v=function(){if(d&&d.length){var C={padding:0,margin:0},A=(m?cw(d,m):d).map(function(P,I){if(P.type==="none")return null;var F=lg({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},l),q=P.formatter||f||vG,H=P.value,V=P.name,re=H,oe=V;if(q&&re!=null&&oe!=null){var U=q(H,V,P,I,d);if(Array.isArray(U)){var J=dG(U,2);re=J[0],oe=J[1]}else re=U}return le.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:F},Kr(oe)?le.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,Kr(oe)?le.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,le.createElement("span",{className:"recharts-tooltip-item-value"},re),le.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return le.createElement("ul",{className:"recharts-tooltip-item-list",style:C},A)}return null},x=lg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),b=lg({margin:0},u),N=!bt(h),j=N?h:"",O=It("recharts-default-tooltip",p),_=It("recharts-tooltip-label",g);N&&y&&d!==void 0&&d!==null&&(j=y(h,d));var E=S?{role:"status","aria-live":"assertive"}:{};return le.createElement("div",pv({className:O,style:x},E),le.createElement("p",{className:_,style:b},le.isValidElement(j)?j:"".concat(j)),v())};function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function C0(e,t,r){return t=wG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wG(e){var t=NG(e,"string");return Ad(t)=="symbol"?t:t+""}function NG(e,t){if(Ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ad(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yu="recharts-tooltip-wrapper",jG={visibility:"hidden"};function SG(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return It(yu,C0(C0(C0(C0({},"".concat(yu,"-right"),Be(r)&&t&&Be(t.x)&&r>=t.x),"".concat(yu,"-left"),Be(r)&&t&&Be(t.x)&&r<t.x),"".concat(yu,"-bottom"),Be(a)&&t&&Be(t.y)&&a>=t.y),"".concat(yu,"-top"),Be(a)&&t&&Be(t.y)&&a<t.y))}function vS(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Be(i[a]))return i[a];var d=r[a]-l-s,f=r[a]+s;if(t[a])return o[a]?d:f;if(o[a]){var m=d,p=c[a];return m<p?Math.max(f,c[a]):Math.max(d,c[a])}var g=f+l,h=c[a]+u;return g>h?Math.max(d,c[a]):Math.max(f,c[a])}function CG(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function kG(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=vS({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=vS({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=CG({translateX:d,translateY:f,useTranslate3d:l})):u=jG,{cssProperties:u,cssClasses:SG({translateX:d,translateY:f,coordinate:r})}}function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(a){yv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$3(a.key),a)}}function TG(e,t,r){return t&&NS(e.prototype,t),r&&NS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _G(e,t,r){return t=Zm(t),EG(e,L3()?Reflect.construct(t,r||[],Zm(e).constructor):t.apply(e,r))}function EG(e,t){if(t&&(pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AG(e)}function AG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L3=function(){return!!e})()}function Zm(e){return Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zm(e)}function PG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gv(e,t)}function gv(e,t){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},gv(e,t)}function yv(e,t,r){return t=$3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $3(e){var t=IG(e,"string");return pc(t)=="symbol"?t:t+""}function IG(e,t){if(pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(pc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jS=1,DG=function(e){function t(){var r;OG(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=_G(this,t,[].concat(s)),yv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),yv(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return PG(t,e),TG(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>jS||Math.abs(a.height-this.state.lastBoundingBox.height)>jS)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,f=s.hasPayload,m=s.isAnimationActive,p=s.offset,g=s.position,h=s.reverseDirection,y=s.useTranslate3d,w=s.viewBox,S=s.wrapperStyle,v=kG({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:g,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),x=v.cssClasses,b=v.cssProperties,N=wS(wS({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},S);return le.createElement("div",{tabIndex:-1,className:x,style:N,ref:function(O){a.wrapperNode=O}},u)}}])}(T.PureComponent),MG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ls={isSsr:MG(),get:function(t){return Ls[t]},set:function(t,r){if(typeof t=="string")Ls[t]=r;else{var a=Object.keys(t);a&&a.length&&a.forEach(function(s){Ls[s]=t[s]})}}};function gc(e){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(e)}function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(a){uw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function FG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,U3(a.key),a)}}function RG(e,t,r){return t&&kS(e.prototype,t),r&&kS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function LG(e,t,r){return t=eh(t),$G(e,B3()?Reflect.construct(t,r||[],eh(e).constructor):t.apply(e,r))}function $G(e,t){if(t&&(gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BG(e)}function BG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B3=function(){return!!e})()}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eh(e)}function UG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vv(e,t)}function vv(e,t){return vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},vv(e,t)}function uw(e,t,r){return t=U3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U3(e){var t=WG(e,"string");return gc(t)=="symbol"?t:t+""}function WG(e,t){if(gc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(gc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qG(e){return e.dataKey}function KG(e,t){return le.isValidElement(e)?le.cloneElement(e,t):typeof e=="function"?le.createElement(e,t):le.createElement(bG,t)}var jn=function(e){function t(){return FG(this,t),LG(this,t,arguments)}return UG(t,e),RG(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,f=s.filterNull,m=s.isAnimationActive,p=s.offset,g=s.payload,h=s.payloadUniqBy,y=s.position,w=s.reverseDirection,S=s.useTranslate3d,v=s.viewBox,x=s.wrapperStyle,b=g??[];f&&b.length&&(b=E3(g.filter(function(j){return j.value!=null&&(j.hide!==!0||a.props.includeHidden)}),h,qG));var N=b.length>0;return le.createElement(DG,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:N,offset:p,position:y,reverseDirection:w,useTranslate3d:S,viewBox:v,wrapperStyle:x},KG(u,CS(CS({},this.props),{},{payload:b})))}}])}(T.PureComponent);uw(jn,"displayName","Tooltip");uw(jn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ls.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zG=ws,VG=function(){return zG.Date.now()},HG=VG,GG=/\s/;function XG(e){for(var t=e.length;t--&&GG.test(e.charAt(t)););return t}var YG=XG,QG=YG,JG=/^\s+/;function ZG(e){return e&&e.slice(0,QG(e)+1).replace(JG,"")}var eX=ZG,tX=eX,OS=Gi,rX=qc,TS=0/0,aX=/^[-+]0x[0-9a-f]+$/i,nX=/^0b[01]+$/i,sX=/^0o[0-7]+$/i,iX=parseInt;function oX(e){if(typeof e=="number")return e;if(rX(e))return TS;if(OS(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=OS(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=tX(e);var r=nX.test(e);return r||sX.test(e)?iX(e.slice(2),r?2:8):aX.test(e)?TS:+e}var W3=oX,lX=Gi,cg=HG,_S=W3,cX="Expected a function",uX=Math.max,dX=Math.min;function fX(e,t,r){var a,s,i,o,l,c,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(cX);t=_S(t)||0,lX(r)&&(d=!!r.leading,f="maxWait"in r,i=f?uX(_S(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function p(N){var j=a,O=s;return a=s=void 0,u=N,o=e.apply(O,j),o}function g(N){return u=N,l=setTimeout(w,t),d?p(N):o}function h(N){var j=N-c,O=N-u,_=t-j;return f?dX(_,i-O):_}function y(N){var j=N-c,O=N-u;return c===void 0||j>=t||j<0||f&&O>=i}function w(){var N=cg();if(y(N))return S(N);l=setTimeout(w,h(N))}function S(N){return l=void 0,m&&a?p(N):(a=s=void 0,o)}function v(){l!==void 0&&clearTimeout(l),u=0,a=c=s=l=void 0}function x(){return l===void 0?o:S(cg())}function b(){var N=cg(),j=y(N);if(a=arguments,s=this,c=N,j){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(w,t),p(c)}return l===void 0&&(l=setTimeout(w,t)),o}return b.cancel=v,b.flush=x,b}var mX=fX,hX=mX,xX=Gi,pX="Expected a function";function gX(e,t,r){var a=!0,s=!0;if(typeof e!="function")throw new TypeError(pX);return xX(r)&&(a="leading"in r?!!r.leading:a,s="trailing"in r?!!r.trailing:s),hX(e,t,{leading:a,maxWait:t,trailing:s})}var yX=gX;const q3=Qt(yX);function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function k0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(a){vX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vX(e,t,r){return t=bX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=wX(e,"string");return Pd(t)=="symbol"?t:t+""}function wX(e,t){if(Pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Pd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NX(e,t){return kX(e)||CX(e,t)||SX(e,t)||jX()}function jX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SX(e,t){if(e){if(typeof e=="string")return AS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AS(e,t)}}function AS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function CX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function kX(e){if(Array.isArray(e))return e}var ug=T.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,m=e.maxHeight,p=e.children,g=e.debounce,h=g===void 0?0:g,y=e.id,w=e.className,S=e.onResize,v=e.style,x=v===void 0?{}:v,b=T.useRef(null),N=T.useRef();N.current=S,T.useImperativeHandle(t,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var j=T.useState({containerWidth:s.width,containerHeight:s.height}),O=NX(j,2),_=O[0],E=O[1],k=T.useCallback(function(A,P){E(function(I){var F=Math.round(A),q=Math.round(P);return I.containerWidth===F&&I.containerHeight===q?I:{containerWidth:F,containerHeight:q}})},[]);T.useEffect(function(){var A=function(V){var re,oe=V[0].contentRect,U=oe.width,J=oe.height;k(U,J),(re=N.current)===null||re===void 0||re.call(N,U,J)};h>0&&(A=q3(A,h,{trailing:!0,leading:!1}));var P=new ResizeObserver(A),I=b.current.getBoundingClientRect(),F=I.width,q=I.height;return k(F,q),P.observe(b.current),function(){P.disconnect()}},[k,h]);var C=T.useMemo(function(){var A=_.containerWidth,P=_.containerHeight;if(A<0||P<0)return null;Rs(wo(o)||wo(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Rs(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=wo(o)?A:o,F=wo(c)?P:c;r&&r>0&&(I?F=I/r:F&&(I=F*r),m&&F>m&&(F=m)),Rs(I>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,F,o,c,d,f,r);var q=!Array.isArray(p)&&Fs(p.type).endsWith("Chart");return le.Children.map(p,function(H){return le.isValidElement(H)?T.cloneElement(H,k0({width:I,height:F},q?{style:k0({height:"100%",width:"100%",maxHeight:F,maxWidth:I},H.props.style)}:{})):H})},[r,p,c,m,f,d,_,o]);return le.createElement("div",{id:y?"".concat(y):void 0,className:It("recharts-responsive-container",w),style:k0(k0({},x),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:m}),ref:b},C)}),K3=function(t){return null};K3.displayName="Cell";function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(r),!0).forEach(function(a){OX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function OX(e,t,r){return t=TX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TX(e){var t=_X(e,"string");return Id(t)=="symbol"?t:t+""}function _X(e,t){if(Id(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Id(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xl={widthCache:{},cacheCount:0},EX=2e3,AX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IS="recharts_measurement_span";function PX(e){var t=bv({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Hu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ls.isSsr)return{width:0,height:0};var a=PX(r),s=JSON.stringify({text:t,copyStyle:a});if(xl.widthCache[s])return xl.widthCache[s];try{var i=document.getElementById(IS);i||(i=document.createElement("span"),i.setAttribute("id",IS),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=bv(bv({},AX),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return xl.widthCache[s]=c,++xl.cacheCount>EX&&(xl.cacheCount=0,xl.widthCache={}),c}catch{return{width:0,height:0}}},IX=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function th(e,t){return RX(e)||FX(e,t)||MX(e,t)||DX()}function DX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MX(e,t){if(e){if(typeof e=="string")return DS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DS(e,t)}}function DS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function FX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function RX(e){if(Array.isArray(e))return e}function LX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BX(a.key),a)}}function $X(e,t,r){return t&&MS(e.prototype,t),r&&MS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function BX(e){var t=UX(e,"string");return Dd(t)=="symbol"?t:t+""}function UX(e,t){if(Dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Dd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,z3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KX=Object.keys(z3),Ll="NaN";function zX(e,t){return e*z3[t]}var O0=function(){function e(t,r){LX(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!WX.test(r)&&(this.num=NaN,this.unit=""),KX.includes(r)&&(this.num=zX(t,r),this.unit="px")}return $X(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=qX.exec(r))!==null&&a!==void 0?a:[],i=th(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function V3(e){if(e.includes(Ll))return Ll;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=FS.exec(t))!==null&&r!==void 0?r:[],s=th(a,4),i=s[1],o=s[2],l=s[3],c=O0.parse(i??""),u=O0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Ll;t=t.replace(FS,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=RS.exec(t))!==null&&f!==void 0?f:[],p=th(m,4),g=p[1],h=p[2],y=p[3],w=O0.parse(g??""),S=O0.parse(y??""),v=h==="+"?w.add(S):w.subtract(S);if(v.isNaN())return Ll;t=t.replace(RS,v.toString())}return t}var LS=/\(([^()]*)\)/;function VX(e){for(var t=e;t.includes("(");){var r=LS.exec(t),a=th(r,2),s=a[1];t=t.replace(LS,V3(s))}return t}function HX(e){var t=e.replace(/\s+/g,"");return t=VX(t),t=V3(t),t}function GX(e){try{return HX(e)}catch{return Ll}}function dg(e){var t=GX(e.slice(5,-1));return t===Ll?"":t}var XX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],YX=["dx","dy","angle","className","breakAll"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},wv.apply(this,arguments)}function $S(e,t){if(e==null)return{};var r=QX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function QX(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function BS(e,t){return tY(e)||eY(e,t)||ZX(e,t)||JX()}function JX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZX(e,t){if(e){if(typeof e=="string")return US(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return US(e,t)}}function US(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function eY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function tY(e){if(Array.isArray(e))return e}var H3=/[ \f\n\r\t\v\u2028\u2029]+/,G3=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];bt(r)||(a?i=r.toString().split(""):i=r.toString().split(H3));var o=i.map(function(c){return{word:c,width:Hu(c,s).width}}),l=a?0:Hu("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},rY=function(t,r,a,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Be(o),f=l,m=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(F,q){var H=q.word,V=q.width,re=F[F.length-1];if(re&&(s==null||i||re.width+V+a<Number(s)))re.words.push(H),re.width+=V+a;else{var oe={words:[H],width:V};F.push(oe)}return F},[])},p=m(r),g=function(I){return I.reduce(function(F,q){return F.width>q.width?F:q})};if(!d)return p;for(var h="",y=function(I){var F=f.slice(0,I),q=G3({breakAll:u,style:c,children:F+h}).wordsWithComputedWidth,H=m(q),V=H.length>o||g(H).width>Number(s);return[V,H]},w=0,S=f.length-1,v=0,x;w<=S&&v<=f.length-1;){var b=Math.floor((w+S)/2),N=b-1,j=y(N),O=BS(j,2),_=O[0],E=O[1],k=y(b),C=BS(k,1),A=C[0];if(!_&&!A&&(w=b+1),_&&A&&(S=b-1),!_&&A){x=E;break}v++}return x||p},WS=function(t){var r=bt(t)?[]:t.toString().split(H3);return[{words:r}]},aY=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!Ls.isSsr){var c,u,d=G3({breakAll:o,children:s,style:i});if(d){var f=d.wordsWithComputedWidth,m=d.spaceWidth;c=f,u=m}else return WS(s);return rY({breakAll:o,children:s,maxLines:l,style:i},c,u,r,a)}return WS(s)},qS="#808080",rh=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,m=t.textAnchor,p=m===void 0?"start":m,g=t.verticalAnchor,h=g===void 0?"end":g,y=t.fill,w=y===void 0?qS:y,S=$S(t,XX),v=T.useMemo(function(){return aY({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:f,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,f,S.style,S.width]),x=S.dx,b=S.dy,N=S.angle,j=S.className,O=S.breakAll,_=$S(S,YX);if(!Kr(a)||!Kr(i))return null;var E=a+(Be(x)?x:0),k=i+(Be(b)?b:0),C;switch(h){case"start":C=dg("calc(".concat(u,")"));break;case"middle":C=dg("calc(".concat((v.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:C=dg("calc(".concat(v.length-1," * -").concat(l,")"));break}var A=[];if(f){var P=v[0].width,I=S.width;A.push("scale(".concat((Be(I)?I/P:1)/P,")"))}return N&&A.push("rotate(".concat(N,", ").concat(E,", ").concat(k,")")),A.length&&(_.transform=A.join(" ")),le.createElement("text",wv({},Tt(_,!0),{x:E,y:k,className:It("recharts-text",j),textAnchor:p,fill:w.includes("url")?qS:w}),v.map(function(F,q){var H=F.words.join(O?"":" ");return le.createElement("tspan",{x:E,dy:q===0?C:l,key:"".concat(H,"-").concat(q)},H)}))};function Pi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nY(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dw(e){let t,r,a;e.length!==2?(t=Pi,r=(l,c)=>Pi(e(l),c),a=(l,c)=>e(l)-c):(t=e===Pi||e===nY?e:sY,r=e,a=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function sY(){return 0}function X3(e){return e===null?NaN:+e}function*iY(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(yield a)}}const oY=dw(Pi),lY=oY.right;dw(X3).center;const Lf=lY;class KS extends Map{constructor(t,r=dY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(zS(this,t))}has(t){return super.has(zS(this,t))}set(t,r){return super.set(cY(this,t),r)}delete(t){return super.delete(uY(this,t))}}function zS({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function cY({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function uY({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function dY(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fY(e=Pi){if(e===Pi)return Y3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function Y3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const mY=Math.sqrt(50),hY=Math.sqrt(10),xY=Math.sqrt(2);function ah(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=mY?10:i>=hY?5:i>=xY?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?ah(e,t,r*2):[l,c,u]}function Nv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?ah(t,e,r):ah(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function jv(e,t,r){return t=+t,e=+e,r=+r,ah(e,t,r)[2]}function Sv(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?jv(t,e,r):jv(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function VS(e,t){let r;if(t===void 0)for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function HS(e,t){let r;if(t===void 0)for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function Q3(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?Y3:fY(s);a>r;){if(a-r>600){const c=a-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+m)),g=Math.min(a,Math.floor(t+(c-u)*f/c+m));Q3(e,t,p,g,s)}const i=e[t];let o=r,l=a;for(vu(e,r,t),s(e[a],i)>0&&vu(e,r,a);o<l;){for(vu(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?vu(e,r,l):(++l,vu(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function vu(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function pY(e,t,r){if(e=Float64Array.from(iY(e,r)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return HS(e);if(t>=1)return VS(e);var a,s=(a-1)*t,i=Math.floor(s),o=VS(Q3(e,i).subarray(0,i+1)),l=HS(e.subarray(i+1));return o+(l-o)*(s-i)}}function gY(e,t,r=X3){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function yY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Ln(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ti(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Cv=Symbol("implicit");function fw(){var e=new KS,t=[],r=[],a=Cv;function s(i){let o=e.get(i);if(o===void 0){if(a!==Cv)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new KS;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return fw(t,r).unknown(a)},Ln.apply(s,arguments),s}function Md(){var e=fw().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,p=s<a,g=p?s:a,h=p?a:s;i=(h-g)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),g+=(h-g-i*(m-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var y=yY(m).map(function(w){return g+i*w});return r(p?y.reverse():y)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([a,s]=m,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(m){return[a,s]=m,a=+a,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Md(t(),[a,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ln.apply(f(),arguments)}function J3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return J3(t())},e}function Gu(){return J3(Md.apply(null,arguments).paddingInner(1))}function mw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Z3(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function $f(){}var Fd=.7,nh=1/Fd,Ql="\\s*([+-]?\\d+)\\s*",Rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vY=/^#([0-9a-f]{3,8})$/,bY=new RegExp(`^rgb\\(${Ql},${Ql},${Ql}\\)$`),wY=new RegExp(`^rgb\\(${xs},${xs},${xs}\\)$`),NY=new RegExp(`^rgba\\(${Ql},${Ql},${Ql},${Rd}\\)$`),jY=new RegExp(`^rgba\\(${xs},${xs},${xs},${Rd}\\)$`),SY=new RegExp(`^hsl\\(${Rd},${xs},${xs}\\)$`),CY=new RegExp(`^hsla\\(${Rd},${xs},${xs},${Rd}\\)$`),GS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mw($f,Ld,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XS,formatHex:XS,formatHex8:kY,formatHsl:OY,formatRgb:YS,toString:YS});function XS(){return this.rgb().formatHex()}function kY(){return this.rgb().formatHex8()}function OY(){return eA(this).formatHsl()}function YS(){return this.rgb().formatRgb()}function Ld(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=vY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?QS(t):r===3?new Ua(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?T0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?T0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bY.exec(e))?new Ua(t[1],t[2],t[3],1):(t=wY.exec(e))?new Ua(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=NY.exec(e))?T0(t[1],t[2],t[3],t[4]):(t=jY.exec(e))?T0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=SY.exec(e))?eC(t[1],t[2]/100,t[3]/100,1):(t=CY.exec(e))?eC(t[1],t[2]/100,t[3]/100,t[4]):GS.hasOwnProperty(e)?QS(GS[e]):e==="transparent"?new Ua(NaN,NaN,NaN,0):null}function QS(e){return new Ua(e>>16&255,e>>8&255,e&255,1)}function T0(e,t,r,a){return a<=0&&(e=t=r=NaN),new Ua(e,t,r,a)}function TY(e){return e instanceof $f||(e=Ld(e)),e?(e=e.rgb(),new Ua(e.r,e.g,e.b,e.opacity)):new Ua}function kv(e,t,r,a){return arguments.length===1?TY(e):new Ua(e,t,r,a??1)}function Ua(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}mw(Ua,kv,Z3($f,{brighter(e){return e=e==null?nh:Math.pow(nh,e),new Ua(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fd:Math.pow(Fd,e),new Ua(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ua(Oo(this.r),Oo(this.g),Oo(this.b),sh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JS,formatHex:JS,formatHex8:_Y,formatRgb:ZS,toString:ZS}));function JS(){return`#${No(this.r)}${No(this.g)}${No(this.b)}`}function _Y(){return`#${No(this.r)}${No(this.g)}${No(this.b)}${No((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZS(){const e=sh(this.opacity);return`${e===1?"rgb(":"rgba("}${Oo(this.r)}, ${Oo(this.g)}, ${Oo(this.b)}${e===1?")":`, ${e})`}`}function sh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function No(e){return e=Oo(e),(e<16?"0":"")+e.toString(16)}function eC(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Yn(e,t,r,a)}function eA(e){if(e instanceof Yn)return new Yn(e.h,e.s,e.l,e.opacity);if(e instanceof $f||(e=Ld(e)),!e)return new Yn;if(e instanceof Yn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Yn(o,l,c,e.opacity)}function EY(e,t,r,a){return arguments.length===1?eA(e):new Yn(e,t,r,a??1)}function Yn(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}mw(Yn,EY,Z3($f,{brighter(e){return e=e==null?nh:Math.pow(nh,e),new Yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fd:Math.pow(Fd,e),new Yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Ua(fg(e>=240?e-240:e+120,s,a),fg(e,s,a),fg(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Yn(tC(this.h),_0(this.s),_0(this.l),sh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sh(this.opacity);return`${e===1?"hsl(":"hsla("}${tC(this.h)}, ${_0(this.s)*100}%, ${_0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tC(e){return e=(e||0)%360,e<0?e+360:e}function _0(e){return Math.max(0,Math.min(1,e||0))}function fg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hw=e=>()=>e;function AY(e,t){return function(r){return e+r*t}}function PY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function IY(e){return(e=+e)==1?tA:function(t,r){return r-t?PY(t,r,e):hw(isNaN(t)?r:t)}}function tA(e,t){var r=t-e;return r?AY(e,r):hw(isNaN(e)?t:e)}const rC=function e(t){var r=IY(t);function a(s,i){var o=r((s=kv(s)).r,(i=kv(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=tA(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return a.gamma=e,a}(1);function DY(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function MY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function FY(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=Qc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function RY(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function ih(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function LY(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Qc(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var Ov=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mg=new RegExp(Ov.source,"g");function $Y(e){return function(){return e}}function BY(e){return function(t){return e(t)+""}}function UY(e,t){var r=Ov.lastIndex=mg.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=Ov.exec(e))&&(s=mg.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:ih(a,s)})),r=mg.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?BY(c[0].x):$Y(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Qc(e,t){var r=typeof t,a;return t==null||r==="boolean"?hw(t):(r==="number"?ih:r==="string"?(a=Ld(t))?(t=a,rC):UY:t instanceof Ld?rC:t instanceof Date?RY:MY(t)?DY:Array.isArray(t)?FY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?LY:ih)(e,t)}function xw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function WY(e,t){t===void 0&&(t=e,e=Qc);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function qY(e){return function(){return e}}function oh(e){return+e}var aC=[0,1];function Ia(e){return e}function Tv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:qY(isNaN(t)?NaN:.5)}function KY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function zY(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=Tv(s,a),i=r(o,i)):(a=Tv(a,s),i=r(i,o)),function(l){return i(a(l))}}function VY(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=Tv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Lf(e,l,1,a)-1;return i[c](s[c](l))}}function Bf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ux(){var e=aC,t=aC,r=Qc,a,s,i,o=Ia,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==Ia&&(o=KY(e[0],e[m-1])),l=m>2?VY:zY,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(a),t,r)))(a(o(m)))}return f.invert=function(m){return o(s((u||(u=l(t,e.map(a),ih)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,oh),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=xw,d()},f.clamp=function(m){return arguments.length?(o=m?!0:Ia,d()):o!==Ia},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,p){return a=m,s=p,d()}}function pw(){return Ux()(Ia,Ia)}function HY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function yc(e){return e=lh(Math.abs(e)),e?e[1]:NaN}function GY(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function XY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var YY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $d(e){if(!(t=YY.exec(e)))throw new Error("invalid format: "+e);var t;return new gw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$d.prototype=gw.prototype;function gw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QY(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var rA;function JY(e,t){var r=lh(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(rA=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+lh(e,Math.max(0,t+i-1))[0]}function nC(e,t){var r=lh(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const sC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:HY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>nC(e*100,t),r:nC,s:JY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function iC(e){return e}var oC=Array.prototype.map,lC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ZY(e){var t=e.grouping===void 0||e.thousands===void 0?iC:GY(oC.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?iC:XY(oC.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=$d(f);var m=f.fill,p=f.align,g=f.sign,h=f.symbol,y=f.zero,w=f.width,S=f.comma,v=f.precision,x=f.trim,b=f.type;b==="n"?(S=!0,b="g"):sC[b]||(v===void 0&&(v=12),x=!0,b="g"),(y||m==="0"&&p==="=")&&(y=!0,m="0",p="=");var N=h==="$"?r:h==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",j=h==="$"?a:/[%p]/.test(b)?o:"",O=sC[b],_=/[defgprs%]/.test(b);v=v===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function E(k){var C=N,A=j,P,I,F;if(b==="c")A=O(k)+A,k="";else{k=+k;var q=k<0||1/k<0;if(k=isNaN(k)?c:O(Math.abs(k),v),x&&(k=QY(k)),q&&+k==0&&g!=="+"&&(q=!1),C=(q?g==="("?g:l:g==="-"||g==="("?"":g)+C,A=(b==="s"?lC[8+rA/3]:"")+A+(q&&g==="("?")":""),_){for(P=-1,I=k.length;++P<I;)if(F=k.charCodeAt(P),48>F||F>57){A=(F===46?s+k.slice(P+1):k.slice(P))+A,k=k.slice(0,P);break}}}S&&!y&&(k=t(k,1/0));var H=C.length+k.length+A.length,V=H<w?new Array(w-H+1).join(m):"";switch(S&&y&&(k=t(V+k,V.length?w-A.length:1/0),V=""),p){case"<":k=C+k+A+V;break;case"=":k=C+V+k+A;break;case"^":k=V.slice(0,H=V.length>>1)+C+k+A+V.slice(H);break;default:k=V+C+k+A;break}return i(k)}return E.toString=function(){return f+""},E}function d(f,m){var p=u((f=$d(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(yc(m)/3)))*3,h=Math.pow(10,-g),y=lC[8+g/3];return function(w){return p(h*w)+y}}return{format:u,formatPrefix:d}}var E0,yw,aA;eQ({thousands:",",grouping:[3],currency:["$",""]});function eQ(e){return E0=ZY(e),yw=E0.format,aA=E0.formatPrefix,E0}function tQ(e){return Math.max(0,-yc(Math.abs(e)))}function rQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yc(t)/3)))*3-yc(Math.abs(e)))}function aQ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yc(t)-yc(e))+1}function nA(e,t,r,a){var s=Sv(e,t,r),i;switch(a=$d(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=rQ(s,o))&&(a.precision=i),aA(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=aQ(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=tQ(s))&&(a.precision=i-(a.type==="%")*2);break}}return yw(a)}function Yi(e){var t=e.domain;return e.ticks=function(r){var a=t();return Nv(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return nA(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=jv(o,l,r),u===c)return a[s]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function ch(){var e=pw();return e.copy=function(){return Bf(e,ch())},Ln.apply(e,arguments),Yi(e)}function sA(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,oh),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return sA(e).unknown(t)},e=arguments.length?Array.from(e,oh):[0,1],Yi(r)}function iA(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function cC(e){return Math.log(e)}function uC(e){return Math.exp(e)}function nQ(e){return-Math.log(-e)}function sQ(e){return-Math.exp(-e)}function iQ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function oQ(e){return e===10?iQ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lQ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function dC(e){return(t,r)=>-e(-t,r)}function vw(e){const t=e(cC,uC),r=t.domain;let a=10,s,i;function o(){return s=lQ(a),i=oQ(a),r()[0]<0?(s=dC(s),i=dC(i),e(nQ,sQ)):e(cC,uC),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),p=s(d),g,h;const y=l==null?10:+l;let w=[];if(!(a%1)&&p-m<y){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(g=1;g<a;++g)if(h=m<0?g/i(-m):g*i(m),!(h<u)){if(h>d)break;w.push(h)}}else for(;m<=p;++m)for(g=a-1;g>=1;--g)if(h=m>0?g/i(-m):g*i(m),!(h<u)){if(h>d)break;w.push(h)}w.length*2<y&&(w=Nv(u,d,y))}else w=Nv(m,p,Math.min(p-m,y)).map(i);return f?w.reverse():w},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=$d(c)).precision==null&&(c.trim=!0),c=yw(c)),l===1/0)return c;const u=Math.max(1,a*l/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*a<a-.5&&(f*=a),f<=u?c(d):""}},t.nice=()=>r(iA(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function oA(){const e=vw(Ux()).domain([1,10]);return e.copy=()=>Bf(e,oA()).base(e.base()),Ln.apply(e,arguments),e}function fC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function mC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bw(e){var t=1,r=e(fC(t),mC(t));return r.constant=function(a){return arguments.length?e(fC(t=+a),mC(t)):t},Yi(r)}function lA(){var e=bw(Ux());return e.copy=function(){return Bf(e,lA()).constant(e.constant())},Ln.apply(e,arguments)}function hC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cQ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function uQ(e){return e<0?-e*e:e*e}function ww(e){var t=e(Ia,Ia),r=1;function a(){return r===1?e(Ia,Ia):r===.5?e(cQ,uQ):e(hC(r),hC(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},Yi(t)}function Nw(){var e=ww(Ux());return e.copy=function(){return Bf(e,Nw()).exponent(e.exponent())},Ln.apply(e,arguments),e}function dQ(){return Nw.apply(null,arguments).exponent(.5)}function xC(e){return Math.sign(e)*e*e}function fQ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function cA(){var e=pw(),t=[0,1],r=!1,a;function s(i){var o=fQ(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(xC(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,oh)).map(xC)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return cA(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Ln.apply(s,arguments),Yi(s)}function uA(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=gY(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[Lf(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Pi),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return uA().domain(e).range(t).unknown(a)},Ln.apply(i,arguments)}function dA(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Lf(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return dA().domain([e,t]).range(s).unknown(i)},Ln.apply(Yi(o),arguments)}function fA(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[Lf(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return fA().domain(e).range(t).unknown(r)},Ln.apply(s,arguments)}const hg=new Date,xg=new Date;function Vr(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Vr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(hg.setTime(+i),xg.setTime(+o),e(hg),e(xg),Math.floor(r(hg,xg))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const uh=Vr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);uh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):uh);uh.range;const Es=1e3,On=Es*60,As=On*60,Hs=As*24,jw=Hs*7,pC=Hs*30,pg=Hs*365,jo=Vr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getUTCSeconds());jo.range;const Sw=Vr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Es)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getMinutes());Sw.range;const Cw=Vr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getUTCMinutes());Cw.range;const kw=Vr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Es-e.getMinutes()*On)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getHours());kw.range;const Ow=Vr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getUTCHours());Ow.range;const Uf=Vr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*On)/Hs,e=>e.getDate()-1);Uf.range;const Wx=Vr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hs,e=>e.getUTCDate()-1);Wx.range;const mA=Vr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hs,e=>Math.floor(e/Hs));mA.range;function nl(e){return Vr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*On)/jw)}const qx=nl(0),dh=nl(1),mQ=nl(2),hQ=nl(3),vc=nl(4),xQ=nl(5),pQ=nl(6);qx.range;dh.range;mQ.range;hQ.range;vc.range;xQ.range;pQ.range;function sl(e){return Vr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/jw)}const Kx=sl(0),fh=sl(1),gQ=sl(2),yQ=sl(3),bc=sl(4),vQ=sl(5),bQ=sl(6);Kx.range;fh.range;gQ.range;yQ.range;bc.range;vQ.range;bQ.range;const Tw=Vr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Tw.range;const _w=Vr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_w.range;const Gs=Vr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Gs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Gs.range;const Xs=Vr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Xs.range;function hA(e,t,r,a,s,i){const o=[[jo,1,Es],[jo,5,5*Es],[jo,15,15*Es],[jo,30,30*Es],[i,1,On],[i,5,5*On],[i,15,15*On],[i,30,30*On],[s,1,As],[s,3,3*As],[s,6,6*As],[s,12,12*As],[a,1,Hs],[a,2,2*Hs],[r,1,jw],[t,1,pC],[t,3,3*pC],[e,1,pg]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return m?g.reverse():g}function c(u,d,f){const m=Math.abs(d-u)/f,p=dw(([,,y])=>y).right(o,m);if(p===o.length)return e.every(Sv(u/pg,d/pg,f));if(p===0)return uh.every(Math.max(Sv(u,d,f),1));const[g,h]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return g.every(h)}return[l,c]}const[wQ,NQ]=hA(Xs,_w,Kx,mA,Ow,Cw),[jQ,SQ]=hA(Gs,Tw,qx,Uf,kw,Sw);function gg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function bu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function CQ(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=wu(s),d=Nu(s),f=wu(i),m=Nu(i),p=wu(o),g=Nu(o),h=wu(l),y=Nu(l),w=wu(c),S=Nu(c),v={a:q,A:H,b:V,B:re,c:null,d:NC,e:NC,f:GQ,g:nJ,G:iJ,H:zQ,I:VQ,j:HQ,L:xA,m:XQ,M:YQ,p:oe,q:U,Q:CC,s:kC,S:QQ,u:JQ,U:ZQ,V:eJ,w:tJ,W:rJ,x:null,X:null,y:aJ,Y:sJ,Z:oJ,"%":SC},x={a:J,A:Q,b:X,B:ee,c:null,d:jC,e:jC,f:dJ,g:wJ,G:jJ,H:lJ,I:cJ,j:uJ,L:gA,m:fJ,M:mJ,p:ue,q:we,Q:CC,s:kC,S:hJ,u:xJ,U:pJ,V:gJ,w:yJ,W:vJ,x:null,X:null,y:bJ,Y:NJ,Z:SJ,"%":SC},b={a:E,A:k,b:C,B:A,c:P,d:bC,e:bC,f:UQ,g:vC,G:yC,H:wC,I:wC,j:RQ,L:BQ,m:FQ,M:LQ,p:_,q:MQ,Q:qQ,s:KQ,S:$Q,u:EQ,U:AQ,V:PQ,w:_Q,W:IQ,x:I,X:F,y:vC,Y:yC,Z:DQ,"%":WQ};v.x=N(r,v),v.X=N(a,v),v.c=N(t,v),x.x=N(r,x),x.X=N(a,x),x.c=N(t,x);function N(ne,ie){return function(Ne){var W=[],Ee=-1,B=0,ve=ne.length,ye,fe,et;for(Ne instanceof Date||(Ne=new Date(+Ne));++Ee<ve;)ne.charCodeAt(Ee)===37&&(W.push(ne.slice(B,Ee)),(fe=gC[ye=ne.charAt(++Ee)])!=null?ye=ne.charAt(++Ee):fe=ye==="e"?" ":"0",(et=ie[ye])&&(ye=et(Ne,fe)),W.push(ye),B=Ee+1);return W.push(ne.slice(B,Ee)),W.join("")}}function j(ne,ie){return function(Ne){var W=bu(1900,void 0,1),Ee=O(W,ne,Ne+="",0),B,ve;if(Ee!=Ne.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ie&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(B=yg(bu(W.y,0,1)),ve=B.getUTCDay(),B=ve>4||ve===0?fh.ceil(B):fh(B),B=Wx.offset(B,(W.V-1)*7),W.y=B.getUTCFullYear(),W.m=B.getUTCMonth(),W.d=B.getUTCDate()+(W.w+6)%7):(B=gg(bu(W.y,0,1)),ve=B.getDay(),B=ve>4||ve===0?dh.ceil(B):dh(B),B=Uf.offset(B,(W.V-1)*7),W.y=B.getFullYear(),W.m=B.getMonth(),W.d=B.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),ve="Z"in W?yg(bu(W.y,0,1)).getUTCDay():gg(bu(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(ve+5)%7:W.w+W.U*7-(ve+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,yg(W)):gg(W)}}function O(ne,ie,Ne,W){for(var Ee=0,B=ie.length,ve=Ne.length,ye,fe;Ee<B;){if(W>=ve)return-1;if(ye=ie.charCodeAt(Ee++),ye===37){if(ye=ie.charAt(Ee++),fe=b[ye in gC?ie.charAt(Ee++):ye],!fe||(W=fe(ne,Ne,W))<0)return-1}else if(ye!=Ne.charCodeAt(W++))return-1}return W}function _(ne,ie,Ne){var W=u.exec(ie.slice(Ne));return W?(ne.p=d.get(W[0].toLowerCase()),Ne+W[0].length):-1}function E(ne,ie,Ne){var W=p.exec(ie.slice(Ne));return W?(ne.w=g.get(W[0].toLowerCase()),Ne+W[0].length):-1}function k(ne,ie,Ne){var W=f.exec(ie.slice(Ne));return W?(ne.w=m.get(W[0].toLowerCase()),Ne+W[0].length):-1}function C(ne,ie,Ne){var W=w.exec(ie.slice(Ne));return W?(ne.m=S.get(W[0].toLowerCase()),Ne+W[0].length):-1}function A(ne,ie,Ne){var W=h.exec(ie.slice(Ne));return W?(ne.m=y.get(W[0].toLowerCase()),Ne+W[0].length):-1}function P(ne,ie,Ne){return O(ne,t,ie,Ne)}function I(ne,ie,Ne){return O(ne,r,ie,Ne)}function F(ne,ie,Ne){return O(ne,a,ie,Ne)}function q(ne){return o[ne.getDay()]}function H(ne){return i[ne.getDay()]}function V(ne){return c[ne.getMonth()]}function re(ne){return l[ne.getMonth()]}function oe(ne){return s[+(ne.getHours()>=12)]}function U(ne){return 1+~~(ne.getMonth()/3)}function J(ne){return o[ne.getUTCDay()]}function Q(ne){return i[ne.getUTCDay()]}function X(ne){return c[ne.getUTCMonth()]}function ee(ne){return l[ne.getUTCMonth()]}function ue(ne){return s[+(ne.getUTCHours()>=12)]}function we(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ie=N(ne+="",v);return ie.toString=function(){return ne},ie},parse:function(ne){var ie=j(ne+="",!1);return ie.toString=function(){return ne},ie},utcFormat:function(ne){var ie=N(ne+="",x);return ie.toString=function(){return ne},ie},utcParse:function(ne){var ie=j(ne+="",!0);return ie.toString=function(){return ne},ie}}}var gC={"-":"",_:" ",0:"0"},ra=/^\s*\d+/,kQ=/^%/,OQ=/[\\^$*+?|[\]().{}]/g;function Ft(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function TQ(e){return e.replace(OQ,"\\$&")}function wu(e){return new RegExp("^(?:"+e.map(TQ).join("|")+")","i")}function Nu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function _Q(e,t,r){var a=ra.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function EQ(e,t,r){var a=ra.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function AQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function PQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function IQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function yC(e,t,r){var a=ra.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function vC(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function DQ(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function MQ(e,t,r){var a=ra.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function FQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function bC(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function RQ(e,t,r){var a=ra.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function wC(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function LQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function $Q(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function BQ(e,t,r){var a=ra.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function UQ(e,t,r){var a=ra.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function WQ(e,t,r){var a=kQ.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function qQ(e,t,r){var a=ra.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function KQ(e,t,r){var a=ra.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function NC(e,t){return Ft(e.getDate(),t,2)}function zQ(e,t){return Ft(e.getHours(),t,2)}function VQ(e,t){return Ft(e.getHours()%12||12,t,2)}function HQ(e,t){return Ft(1+Uf.count(Gs(e),e),t,3)}function xA(e,t){return Ft(e.getMilliseconds(),t,3)}function GQ(e,t){return xA(e,t)+"000"}function XQ(e,t){return Ft(e.getMonth()+1,t,2)}function YQ(e,t){return Ft(e.getMinutes(),t,2)}function QQ(e,t){return Ft(e.getSeconds(),t,2)}function JQ(e){var t=e.getDay();return t===0?7:t}function ZQ(e,t){return Ft(qx.count(Gs(e)-1,e),t,2)}function pA(e){var t=e.getDay();return t>=4||t===0?vc(e):vc.ceil(e)}function eJ(e,t){return e=pA(e),Ft(vc.count(Gs(e),e)+(Gs(e).getDay()===4),t,2)}function tJ(e){return e.getDay()}function rJ(e,t){return Ft(dh.count(Gs(e)-1,e),t,2)}function aJ(e,t){return Ft(e.getFullYear()%100,t,2)}function nJ(e,t){return e=pA(e),Ft(e.getFullYear()%100,t,2)}function sJ(e,t){return Ft(e.getFullYear()%1e4,t,4)}function iJ(e,t){var r=e.getDay();return e=r>=4||r===0?vc(e):vc.ceil(e),Ft(e.getFullYear()%1e4,t,4)}function oJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ft(t/60|0,"0",2)+Ft(t%60,"0",2)}function jC(e,t){return Ft(e.getUTCDate(),t,2)}function lJ(e,t){return Ft(e.getUTCHours(),t,2)}function cJ(e,t){return Ft(e.getUTCHours()%12||12,t,2)}function uJ(e,t){return Ft(1+Wx.count(Xs(e),e),t,3)}function gA(e,t){return Ft(e.getUTCMilliseconds(),t,3)}function dJ(e,t){return gA(e,t)+"000"}function fJ(e,t){return Ft(e.getUTCMonth()+1,t,2)}function mJ(e,t){return Ft(e.getUTCMinutes(),t,2)}function hJ(e,t){return Ft(e.getUTCSeconds(),t,2)}function xJ(e){var t=e.getUTCDay();return t===0?7:t}function pJ(e,t){return Ft(Kx.count(Xs(e)-1,e),t,2)}function yA(e){var t=e.getUTCDay();return t>=4||t===0?bc(e):bc.ceil(e)}function gJ(e,t){return e=yA(e),Ft(bc.count(Xs(e),e)+(Xs(e).getUTCDay()===4),t,2)}function yJ(e){return e.getUTCDay()}function vJ(e,t){return Ft(fh.count(Xs(e)-1,e),t,2)}function bJ(e,t){return Ft(e.getUTCFullYear()%100,t,2)}function wJ(e,t){return e=yA(e),Ft(e.getUTCFullYear()%100,t,2)}function NJ(e,t){return Ft(e.getUTCFullYear()%1e4,t,4)}function jJ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?bc(e):bc.ceil(e),Ft(e.getUTCFullYear()%1e4,t,4)}function SJ(){return"+0000"}function SC(){return"%"}function CC(e){return+e}function kC(e){return Math.floor(+e/1e3)}var pl,vA,bA;CJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CJ(e){return pl=CQ(e),vA=pl.format,pl.parse,bA=pl.utcFormat,pl.utcParse,pl}function kJ(e){return new Date(e)}function OJ(e){return e instanceof Date?+e:+new Date(+e)}function Ew(e,t,r,a,s,i,o,l,c,u){var d=pw(),f=d.invert,m=d.domain,p=u(".%L"),g=u(":%S"),h=u("%I:%M"),y=u("%I %p"),w=u("%a %d"),S=u("%b %d"),v=u("%B"),x=u("%Y");function b(N){return(c(N)<N?p:l(N)<N?g:o(N)<N?h:i(N)<N?y:a(N)<N?s(N)<N?w:S:r(N)<N?v:x)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?m(Array.from(N,OJ)):m().map(kJ)},d.ticks=function(N){var j=m();return e(j[0],j[j.length-1],N??10)},d.tickFormat=function(N,j){return j==null?b:u(j)},d.nice=function(N){var j=m();return(!N||typeof N.range!="function")&&(N=t(j[0],j[j.length-1],N??10)),N?m(iA(j,N)):d},d.copy=function(){return Bf(d,Ew(e,t,r,a,s,i,o,l,c,u))},d}function TJ(){return Ln.apply(Ew(jQ,SQ,Gs,Tw,qx,Uf,kw,Sw,jo,vA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _J(){return Ln.apply(Ew(wQ,NQ,Xs,_w,Kx,Wx,Ow,Cw,jo,bA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zx(){var e=0,t=1,r,a,s,i,o=Ia,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var p,g;return arguments.length?([p,g]=m,o=f(p,g),u):[o(0),o(1)]}}return u.range=d(Qc),u.rangeRound=d(xw),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),a=f(t),s=r===a?0:1/(a-r),u}}function Qi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wA(){var e=Yi(zx()(Ia));return e.copy=function(){return Qi(e,wA())},ti.apply(e,arguments)}function NA(){var e=vw(zx()).domain([1,10]);return e.copy=function(){return Qi(e,NA()).base(e.base())},ti.apply(e,arguments)}function jA(){var e=bw(zx());return e.copy=function(){return Qi(e,jA()).constant(e.constant())},ti.apply(e,arguments)}function Aw(){var e=ww(zx());return e.copy=function(){return Qi(e,Aw()).exponent(e.exponent())},ti.apply(e,arguments)}function EJ(){return Aw.apply(null,arguments).exponent(.5)}function SA(){var e=[],t=Ia;function r(a){if(a!=null&&!isNaN(a=+a))return t((Lf(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Pi),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>pY(e,i/a))},r.copy=function(){return SA(t).domain(e)},ti.apply(r,arguments)}function Vx(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,u=Ia,d,f=!1,m;function p(h){return isNaN(h=+h)?m:(h=.5+((h=+d(h))-i)*(a*h<a*i?l:c),u(f?Math.max(0,Math.min(1,h)):h))}p.domain=function(h){return arguments.length?([e,t,r]=h,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p):[e,t,r]},p.clamp=function(h){return arguments.length?(f=!!h,p):f},p.interpolator=function(h){return arguments.length?(u=h,p):u};function g(h){return function(y){var w,S,v;return arguments.length?([w,S,v]=y,u=WY(h,[w,S,v]),p):[u(0),u(.5),u(1)]}}return p.range=g(Qc),p.rangeRound=g(xw),p.unknown=function(h){return arguments.length?(m=h,p):m},function(h){return d=h,s=h(e),i=h(t),o=h(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p}}function CA(){var e=Yi(Vx()(Ia));return e.copy=function(){return Qi(e,CA())},ti.apply(e,arguments)}function kA(){var e=vw(Vx()).domain([.1,1,10]);return e.copy=function(){return Qi(e,kA()).base(e.base())},ti.apply(e,arguments)}function OA(){var e=bw(Vx());return e.copy=function(){return Qi(e,OA()).constant(e.constant())},ti.apply(e,arguments)}function Pw(){var e=ww(Vx());return e.copy=function(){return Qi(e,Pw()).exponent(e.exponent())},ti.apply(e,arguments)}function AJ(){return Pw.apply(null,arguments).exponent(.5)}const OC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Md,scaleDiverging:CA,scaleDivergingLog:kA,scaleDivergingPow:Pw,scaleDivergingSqrt:AJ,scaleDivergingSymlog:OA,scaleIdentity:sA,scaleImplicit:Cv,scaleLinear:ch,scaleLog:oA,scaleOrdinal:fw,scalePoint:Gu,scalePow:Nw,scaleQuantile:uA,scaleQuantize:dA,scaleRadial:cA,scaleSequential:wA,scaleSequentialLog:NA,scaleSequentialPow:Aw,scaleSequentialQuantile:SA,scaleSequentialSqrt:EJ,scaleSequentialSymlog:jA,scaleSqrt:dQ,scaleSymlog:lA,scaleThreshold:fA,scaleTime:TJ,scaleUtc:_J,tickFormat:nA},Symbol.toStringTag,{value:"Module"}));var PJ=qc;function IJ(e,t,r){for(var a=-1,s=e.length;++a<s;){var i=e[a],o=t(i);if(o!=null&&(l===void 0?o===o&&!PJ(o):r(o,l)))var l=o,c=i}return c}var TA=IJ;function DJ(e,t){return e>t}var MJ=DJ,FJ=TA,RJ=MJ,LJ=Yc;function $J(e){return e&&e.length?FJ(e,LJ,RJ):void 0}var BJ=$J;const Hx=Qt(BJ);function UJ(e,t){return e<t}var WJ=UJ,qJ=TA,KJ=WJ,zJ=Yc;function VJ(e){return e&&e.length?qJ(e,zJ,KJ):void 0}var HJ=VJ;const Gx=Qt(HJ);var GJ=V1,XJ=Xi,YJ=F3,QJ=Ha;function JJ(e,t){var r=QJ(e)?GJ:YJ;return r(e,XJ(t))}var ZJ=JJ,eZ=D3,tZ=ZJ;function rZ(e,t){return eZ(tZ(e,t),1)}var aZ=rZ;const nZ=Qt(aZ);var sZ=ow;function iZ(e,t){return sZ(e,t)}var oZ=iZ;const Xx=Qt(oZ);var Jc=1e9,lZ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Dw,dr=!0,Fn="[DecimalError] ",To=Fn+"Invalid argument: ",Iw=Fn+"Exponent out of range: ",Zc=Math.floor,po=Math.pow,cZ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,en,Hr=1e7,nr=7,_A=9007199254740991,mh=Zc(_A/nr),Ve={};Ve.absoluteValue=Ve.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ve.comparedTo=Ve.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Ve.decimalPlaces=Ve.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*nr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ve.dividedBy=Ve.div=function(e){return $s(this,new this.constructor(e))};Ve.dividedToIntegerBy=Ve.idiv=function(e){var t=this,r=t.constructor;return Xt($s(t,new r(e),0,1),r.precision)};Ve.equals=Ve.eq=function(e){return!this.cmp(e)};Ve.exponent=function(){return Rr(this)};Ve.greaterThan=Ve.gt=function(e){return this.cmp(e)>0};Ve.greaterThanOrEqualTo=Ve.gte=function(e){return this.cmp(e)>=0};Ve.isInteger=Ve.isint=function(){return this.e>this.d.length-2};Ve.isNegative=Ve.isneg=function(){return this.s<0};Ve.isPositive=Ve.ispos=function(){return this.s>0};Ve.isZero=function(){return this.s===0};Ve.lessThan=Ve.lt=function(e){return this.cmp(e)<0};Ve.lessThanOrEqualTo=Ve.lte=function(e){return this.cmp(e)<1};Ve.logarithm=Ve.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(en))throw Error(Fn+"NaN");if(r.s<1)throw Error(Fn+(r.s?"NaN":"-Infinity"));return r.eq(en)?new a(0):(dr=!1,t=$s(Bd(r,i),Bd(e,i),i),dr=!0,Xt(t,s))};Ve.minus=Ve.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?PA(t,e):EA(t,(e.s=-e.s,e))};Ve.modulo=Ve.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Fn+"NaN");return r.s?(dr=!1,t=$s(r,e,0,1).times(e),dr=!0,r.minus(t)):Xt(new a(r),s)};Ve.naturalExponential=Ve.exp=function(){return AA(this)};Ve.naturalLogarithm=Ve.ln=function(){return Bd(this)};Ve.negated=Ve.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ve.plus=Ve.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EA(t,e):PA(t,(e.s=-e.s,e))};Ve.precision=Ve.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(To+e);if(t=Rr(s)+1,a=s.d.length-1,r=a*nr+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Ve.squareRoot=Ve.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Fn+"NaN")}for(e=Rr(l),dr=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=ds(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Zc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus($s(l,i,o+2)).times(.5),ds(i.d).slice(0,o)===(t=ds(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Xt(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return dr=!0,Xt(a,r)};Ve.times=Ve.mul=function(e){var t,r,a,s,i,o,l,c,u,d=this,f=d.constructor,m=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,o=c,c=u,u=o),i=[],o=c+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+p[a]*m[s-a-1]+t,i[s--]=l%Hr|0,t=l/Hr|0;i[s]=(i[s]+t)%Hr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,dr?Xt(e,f.precision):e};Ve.toDecimalPlaces=Ve.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(vs(e,0,Jc),t===void 0?t=a.rounding:vs(t,0,8),Xt(r,e+Rr(r)+1,t))};Ve.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Ko(a,!0):(vs(e,0,Jc),t===void 0?t=s.rounding:vs(t,0,8),a=Xt(new s(a),e+1,t),r=Ko(a,!0,e+1)),r};Ve.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Ko(s):(vs(e,0,Jc),t===void 0?t=i.rounding:vs(t,0,8),a=Xt(new i(s),e+Rr(s)+1,t),r=Ko(a.abs(),!1,e+Rr(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ve.toInteger=Ve.toint=function(){var e=this,t=e.constructor;return Xt(new t(e),Rr(e)+1,t.rounding)};Ve.toNumber=function(){return+this};Ve.toPower=Ve.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(en);if(l=new c(l),!l.s){if(e.s<1)throw Error(Fn+"Infinity");return l}if(l.eq(en))return l;if(a=c.precision,e.eq(en))return Xt(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=_A){for(s=new c(en),t=Math.ceil(a/nr+4),dr=!1;r%2&&(s=s.times(l),_C(s.d,t)),r=Zc(r/2),r!==0;)l=l.times(l),_C(l.d,t);return dr=!0,e.s<0?new c(en).div(s):Xt(s,a)}}else if(i<0)throw Error(Fn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,dr=!1,s=e.times(Bd(l,a+u)),dr=!0,s=AA(s),s.s=i,s};Ve.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=Rr(s),a=Ko(s,r<=i.toExpNeg||r>=i.toExpPos)):(vs(e,1,Jc),t===void 0?t=i.rounding:vs(t,0,8),s=Xt(new i(s),e,t),r=Rr(s),a=Ko(s,e<=r||r<=i.toExpNeg,e)),a};Ve.toSignificantDigits=Ve.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(vs(e,1,Jc),t===void 0?t=a.rounding:vs(t,0,8)),Xt(new a(r),e,t)};Ve.toString=Ve.valueOf=Ve.val=Ve.toJSON=Ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Rr(e),r=e.constructor;return Ko(e,t<=r.toExpNeg||t>=r.toExpPos)};function EA(e,t){var r,a,s,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),dr?Xt(t,f):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=u.length):(a=u,s=o,l=c.length),o=Math.ceil(f/nr),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,a=u,u=c,c=a),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Hr|0,c[i]%=Hr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,dr?Xt(t,f):t}function vs(e,t,r){if(e!==~~e||e<t||e>r)throw Error(To+e)}function ds(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=nr-a.length,r&&(i+=di(r)),i+=a;o=e[t],a=o+"",r=nr-a.length,r&&(i+=di(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var $s=function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%Hr|0,o=i/Hr|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*Hr+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,u,d,f,m,p,g,h,y,w,S,v,x,b,N,j,O,_=a.constructor,E=a.s==s.s?1:-1,k=a.d,C=s.d;if(!a.s)return new _(a);if(!s.s)throw Error(Fn+"Division by zero");for(c=a.e-s.e,j=C.length,b=k.length,p=new _(E),g=p.d=[],u=0;C[u]==(k[u]||0);)++u;if(C[u]>(k[u]||0)&&--c,i==null?S=i=_.precision:o?S=i+(Rr(a)-Rr(s))+1:S=i,S<0)return new _(0);if(S=S/nr+2|0,u=0,j==1)for(d=0,C=C[0],S++;(u<b||d)&&S--;u++)v=d*Hr+(k[u]||0),g[u]=v/C|0,d=v%C|0;else{for(d=Hr/(C[0]+1)|0,d>1&&(C=e(C,d),k=e(k,d),j=C.length,b=k.length),x=j,h=k.slice(0,j),y=h.length;y<j;)h[y++]=0;O=C.slice(),O.unshift(0),N=C[0],C[1]>=Hr/2&&++N;do d=0,l=t(C,h,j,y),l<0?(w=h[0],j!=y&&(w=w*Hr+(h[1]||0)),d=w/N|0,d>1?(d>=Hr&&(d=Hr-1),f=e(C,d),m=f.length,y=h.length,l=t(f,h,m,y),l==1&&(d--,r(f,j<m?O:C,m))):(d==0&&(l=d=1),f=C.slice()),m=f.length,m<y&&f.unshift(0),r(h,f,y),l==-1&&(y=h.length,l=t(C,h,j,y),l<1&&(d++,r(h,j<y?O:C,y))),y=h.length):l===0&&(d++,h=[0]),g[u++]=d,l&&h[0]?h[y++]=k[x]||0:(h=[k[x]],y=1);while((x++<b||h[0]!==void 0)&&S--)}return g[0]||g.shift(),p.e=c,Xt(p,o?i+Rr(p)+1:i)}}();function AA(e,t){var r,a,s,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Rr(e)>16)throw Error(Iw+Rr(e));if(!e.s)return new d(en);for(t==null?(dr=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(po(2,u))/Math.LN10*2+5|0,l+=a,r=s=i=new d(en),d.precision=l;;){if(s=Xt(s.times(e),l),r=r.times(++c),o=i.plus($s(s,r,l)),ds(o.d).slice(0,l)===ds(i.d).slice(0,l)){for(;u--;)i=Xt(i.times(i),l);return d.precision=f,t==null?(dr=!0,Xt(i,f)):i}i=o}}function Rr(e){for(var t=e.e*nr,r=e.d[0];r>=10;r/=10)t++;return t}function vg(e,t,r){if(t>e.LN10.sd())throw dr=!0,r&&(e.precision=r),Error(Fn+"LN10 precision limit exceeded");return Xt(new e(e.LN10),t)}function di(e){for(var t="";e--;)t+="0";return t}function Bd(e,t){var r,a,s,i,o,l,c,u,d,f=1,m=10,p=e,g=p.d,h=p.constructor,y=h.precision;if(p.s<1)throw Error(Fn+(p.s?"NaN":"-Infinity"));if(p.eq(en))return new h(0);if(t==null?(dr=!1,u=y):u=t,p.eq(10))return t==null&&(dr=!0),vg(h,u);if(u+=m,h.precision=u,r=ds(g),a=r.charAt(0),i=Rr(p),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)p=p.times(e),r=ds(p.d),a=r.charAt(0),f++;i=Rr(p),a>1?(p=new h("0."+r),i++):p=new h(a+"."+r.slice(1))}else return c=vg(h,u+2,y).times(i+""),p=Bd(new h(a+"."+r.slice(1)),u-m).plus(c),h.precision=y,t==null?(dr=!0,Xt(p,y)):p;for(l=o=p=$s(p.minus(en),p.plus(en),u),d=Xt(p.times(p),u),s=3;;){if(o=Xt(o.times(d),u),c=l.plus($s(o,new h(s),u)),ds(c.d).slice(0,u)===ds(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(vg(h,u+2,y).times(i+""))),l=$s(l,new h(f),u),h.precision=y,t==null?(dr=!0,Xt(l,y)):l;l=c,s+=2}}function TC(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=Zc(r/nr),e.d=[],a=(r+1)%nr,r<0&&(a+=nr),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=nr;a<s;)e.d.push(+t.slice(a,a+=nr));t=t.slice(a),a=nr-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),dr&&(e.e>mh||e.e<-mh))throw Error(Iw+r)}else e.s=0,e.e=0,e.d=[0];return e}function Xt(e,t,r){var a,s,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=nr,s=t,u=f[d=0];else{if(d=Math.ceil((a+1)/nr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;a%=nr,s=a-nr+o}if(r!==void 0&&(i=po(10,o-s-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?u/po(10,o-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Rr(e),f.length=1,t=t-i-1,f[0]=po(10,(nr-t%nr)%nr),e.e=Zc(-t/nr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=d,i=1,d--):(f.length=d+1,i=po(10,nr-a),f[d]=s>0?(u/po(10,o-s)%po(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Hr&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Hr)break;f[d--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(dr&&(e.e>mh||e.e<-mh))throw Error(Iw+Rr(e));return e}function PA(e,t){var r,a,s,i,o,l,c,u,d,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),dr?Xt(t,p):t;if(c=e.d,f=t.d,a=t.e,u=e.e,c=c.slice(),o=u-a,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,a=u,l=c.length),s=Math.max(Math.ceil(p/nr),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=Hr-1;--c[i],c[s]+=Hr}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,dr?Xt(t,p):t):new m(0)}function Ko(e,t,r){var a,s=Rr(e),i=ds(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+di(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+di(-s-1)+i,r&&(a=r-o)>0&&(i+=di(a))):s>=o?(i+=di(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+di(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=di(a))),e.s<0?"-"+i:i}function _C(e,t){if(e.length>t)return e.length=t,!0}function IA(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(To+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return TC(o,i.toString())}else if(typeof i!="string")throw Error(To+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,cZ.test(i))TC(o,i);else throw Error(To+i)}if(s.prototype=Ve,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=IA,s.config=s.set=uZ,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function uZ(e){if(!e||typeof e!="object")throw Error(Fn+"Object expected");var t,r,a,s=["precision",1,Jc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(Zc(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(To+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(To+r+": "+a);return this}var Dw=IA(lZ);en=new Dw(1);const Vt=Dw;function dZ(e){return xZ(e)||hZ(e)||mZ(e)||fZ()}function fZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mZ(e,t){if(e){if(typeof e=="string")return _v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _v(e,t)}}function hZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function xZ(e){if(Array.isArray(e))return _v(e)}function _v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var pZ=function(t){return t},DA={"@@functional/placeholder":!0},MA=function(t){return t===DA},EC=function(t){return function r(){return arguments.length===0||arguments.length===1&&MA(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},gZ=function e(t,r){return t===1?r:EC(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==DA}).length;return o>=t?r.apply(void 0,s):e(t-o,EC(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(f){return MA(f)?c.shift():f});return r.apply(void 0,dZ(d).concat(c))}))})},Yx=function(t){return gZ(t.length,t)},Ev=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},yZ=Yx(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),vZ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return pZ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Av=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},FA=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,a=t.apply(void 0,i)),a}};function bZ(e){var t;return e===0?t=1:t=Math.floor(new Vt(e).abs().log(10).toNumber())+1,t}function wZ(e,t,r){for(var a=new Vt(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var NZ=Yx(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),jZ=Yx(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),SZ=Yx(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Qx={rangeStep:wZ,getDigitCount:bZ,interpolateNumber:NZ,uninterpolateNumber:jZ,uninterpolateTruncation:SZ};function Pv(e){return OZ(e)||kZ(e)||RA(e)||CZ()}function CZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function OZ(e){if(Array.isArray(e))return Iv(e)}function Ud(e,t){return EZ(e)||_Z(e,t)||RA(e,t)||TZ()}function TZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RA(e,t){if(e){if(typeof e=="string")return Iv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iv(e,t)}}function Iv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _Z(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function EZ(e){if(Array.isArray(e))return e}function LA(e){var t=Ud(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function $A(e,t,r){if(e.lte(0))return new Vt(0);var a=Qx.getDigitCount(e.toNumber()),s=new Vt(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new Vt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new Vt(Math.ceil(c))}function AZ(e,t,r){var a=1,s=new Vt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new Vt(10).pow(Qx.getDigitCount(e)-1),s=new Vt(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Vt(Math.floor(e)))}else e===0?s=new Vt(Math.floor((t-1)/2)):r||(s=new Vt(Math.floor(e)));var o=Math.floor((t-1)/2),l=vZ(yZ(function(c){return s.add(new Vt(c-o).mul(a)).toNumber()}),Ev);return l(0,t)}function BA(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Vt(0),tickMin:new Vt(0),tickMax:new Vt(0)};var i=$A(new Vt(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new Vt(0):(o=new Vt(e).add(t).div(2),o=o.sub(new Vt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Vt(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?BA(e,t,r,a,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Vt(l).mul(i)),tickMax:o.add(new Vt(c).mul(i))})}function PZ(e){var t=Ud(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=LA([r,a]),c=Ud(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Pv(Ev(0,s-1).map(function(){return 1/0}))):[].concat(Pv(Ev(0,s-1).map(function(){return-1/0})),[d]);return r>a?Av(f):f}if(u===d)return AZ(u,s,i);var m=BA(u,d,o,i),p=m.step,g=m.tickMin,h=m.tickMax,y=Qx.rangeStep(g,h.add(new Vt(.1).mul(p)),p);return r>a?Av(y):y}function IZ(e,t){var r=Ud(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=LA([a,s]),l=Ud(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[a,s];if(c===u)return[c];var d=Math.max(t,2),f=$A(new Vt(u).sub(c).div(d-1),i,0),m=[].concat(Pv(Qx.rangeStep(new Vt(c),new Vt(u).sub(new Vt(.99).mul(f)),f)),[u]);return a>s?Av(m):m}var DZ=FA(PZ),MZ=FA(IZ),FZ=!0,bg="Invariant failed";function zo(e,t){if(!e){if(FZ)throw new Error(bg);var r=typeof t=="function"?t():t,a=r?"".concat(bg,": ").concat(r):bg;throw new Error(a)}}var RZ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function wc(e){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(e)}function hh(){return hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hh.apply(this,arguments)}function LZ(e,t){return WZ(e)||UZ(e,t)||BZ(e,t)||$Z()}function $Z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BZ(e,t){if(e){if(typeof e=="string")return AC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AC(e,t)}}function AC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function UZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function WZ(e){if(Array.isArray(e))return e}function qZ(e,t){if(e==null)return{};var r=KZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function KZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function zZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qA(a.key),a)}}function VZ(e,t,r){return t&&PC(e.prototype,t),r&&PC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function HZ(e,t,r){return t=xh(t),GZ(e,UA()?Reflect.construct(t,r||[],xh(e).constructor):t.apply(e,r))}function GZ(e,t){if(t&&(wc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XZ(e)}function XZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UA=function(){return!!e})()}function xh(e){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xh(e)}function YZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dv(e,t)}function Dv(e,t){return Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Dv(e,t)}function WA(e,t,r){return t=qA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qA(e){var t=QZ(e,"string");return wc(t)=="symbol"?t:t+""}function QZ(e,t){if(wc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(wc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wf=function(e){function t(){return zZ(this,t),HZ(this,t,arguments)}return YZ(t,e),VZ(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,u=a.dataPointFormatter,d=a.xAxis,f=a.yAxis,m=qZ(a,RZ),p=Tt(m,!1);this.props.direction==="x"&&d.type!=="number"&&zo(!1);var g=c.map(function(h){var y=u(h,l),w=y.x,S=y.y,v=y.value,x=y.errorVal;if(!x)return null;var b=[],N,j;if(Array.isArray(x)){var O=LZ(x,2);N=O[0],j=O[1]}else N=j=x;if(i==="vertical"){var _=d.scale,E=S+s,k=E+o,C=E-o,A=_(v-N),P=_(v+j);b.push({x1:P,y1:k,x2:P,y2:C}),b.push({x1:A,y1:E,x2:P,y2:E}),b.push({x1:A,y1:k,x2:A,y2:C})}else if(i==="horizontal"){var I=f.scale,F=w+s,q=F-o,H=F+o,V=I(v-N),re=I(v+j);b.push({x1:q,y1:re,x2:H,y2:re}),b.push({x1:F,y1:V,x2:F,y2:re}),b.push({x1:q,y1:V,x2:H,y2:V})}return le.createElement(Or,hh({className:"recharts-errorBar",key:"bar-".concat(b.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},p),b.map(function(oe){return le.createElement("line",hh({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return le.createElement(Or,{className:"recharts-errorBars"},g)}}])}(le.Component);WA(Wf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});WA(Wf,"displayName","ErrorBar");function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(a){JZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JZ(e,t,r){return t=ZZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZZ(e){var t=eee(e,"string");return Wd(t)=="symbol"?t:t+""}function eee(e,t){if(Wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Wd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KA=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Ja(r,Yl);if(!o)return null;var l=Yl.defaultProps,c=l!==void 0?io(io({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(a||[]).reduce(function(d,f){var m=f.item,p=f.props,g=p.sectors||p.data||[];return d.concat(g.map(function(h){return{type:o.props.iconType||m.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):u=(a||[]).map(function(d){var f=d.item,m=f.type.defaultProps,p=m!==void 0?io(io({},m),f.props):{},g=p.dataKey,h=p.name,y=p.legendType,w=p.hide;return{inactive:w,dataKey:g,type:c.iconType||y||"square",color:Mw(f),value:h||g,payload:p}}),io(io(io({},c),Yl.getWithHeight(o,s)),{},{payload:u,item:o})};function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function DC(e){return nee(e)||aee(e)||ree(e)||tee()}function tee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ree(e,t){if(e){if(typeof e=="string")return Mv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mv(e,t)}}function aee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nee(e){if(Array.isArray(e))return Mv(e)}function Mv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function MC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(r),!0).forEach(function(a){Jl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jl(e,t,r){return t=see(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function see(e){var t=iee(e,"string");return qd(t)=="symbol"?t:t+""}function iee(e,t){if(qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(qd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cn(e,t,r){return bt(e)||bt(t)?r:Kr(t)?An(e,t,r):xt(t)?t(e):r}function Xu(e,t,r,a){var s=nZ(e,function(l){return cn(l,t)});if(r==="number"){var i=s.filter(function(l){return Be(l)||parseFloat(l)});return i.length?[Gx(i),Hx(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!bt(l)}):s;return o.map(function(l){return Kr(l)||l instanceof Date?l:""})}var oee=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a==null?void 0:a.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,f=s[u].coordinate,m=u>=l-1?s[0].coordinate:s[u+1].coordinate,p=void 0;if(Qn(f-d)!==Qn(m-f)){var g=[];if(Qn(m-f)===Qn(c[1]-c[0])){p=m;var h=f+c[1]-c[0];g[0]=Math.min(h,(h+d)/2),g[1]=Math.max(h,(h+d)/2)}else{p=d;var y=m+c[1]-c[0];g[0]=Math.min(f,(y+f)/2),g[1]=Math.max(f,(y+f)/2)}var w=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>w[0]&&t<=w[1]||t>=g[0]&&t<=g[1]){o=s[u].index;break}}else{var S=Math.min(d,m),v=Math.max(d,m);if(t>(S+f)/2&&t<=(v+f)/2){o=s[u].index;break}}}else for(var x=0;x<l;x++)if(x===0&&t<=(a[x].coordinate+a[x+1].coordinate)/2||x>0&&x<l-1&&t>(a[x].coordinate+a[x-1].coordinate)/2&&t<=(a[x].coordinate+a[x+1].coordinate)/2||x===l-1&&t>(a[x].coordinate+a[x-1].coordinate)/2){o=a[x].index;break}return o},Mw=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?yr(yr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},lee=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),m=0,p=f.length;m<p;m++){var g=d[f[m]],h=g.items,y=g.cateAxisId,w=h.filter(function(j){return Fs(j.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,v=S!==void 0?yr(yr({},S),w[0].props):w[0].props,x=v.barSize,b=v[y];o[b]||(o[b]=[]);var N=bt(x)?r:x;o[b].push({item:w[0],stackList:w.slice(1),barSize:bt(N)?void 0:qo(N,a,0)})}}return o},cee=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=qo(r,s,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=s/c,g=o.reduce(function(x,b){return x+b.barSize||0},0);g+=(c-1)*u,g>=s&&(g-=(c-1)*u,u=0),g>=s&&p>0&&(m=!0,p*=.9,g=c*p);var h=(s-g)/2>>0,y={offset:h-u,size:0};d=o.reduce(function(x,b){var N={item:b.item,position:{offset:y.offset+y.size+u,size:m?p:b.barSize}},j=[].concat(DC(x),[N]);return y=j[j.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(O){j.push({item:O,position:y})}),j},f)}else{var w=qo(a,s,0,!0);s-2*w-(c-1)*u<=0&&(u=0);var S=(s-2*w-(c-1)*u)/c;S>1&&(S>>=0);var v=l===+l?Math.min(S,l):S;d=o.reduce(function(x,b,N){var j=[].concat(DC(x),[{item:b.item,position:{offset:w+(S+u)*N+(S-v)/2,size:v}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(O){j.push({item:O,position:j[j.length-1].position})}),j},f)}return d},uee=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),u=KA({children:i,legendWidth:c});if(u){var d=s||{},f=d.width,m=d.height,p=u.align,g=u.verticalAlign,h=u.layout;if((h==="vertical"||h==="horizontal"&&g==="middle")&&p!=="center"&&Be(t[p]))return yr(yr({},t),{},Jl({},p,t[p]+(f||0)));if((h==="horizontal"||h==="vertical"&&p==="center")&&g!=="middle"&&Be(t[g]))return yr(yr({},t),{},Jl({},g,t[g]+(m||0)))}return t},dee=function(t,r,a){return bt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},zA=function(t,r,a,s,i){var o=r.props.children,l=Pn(o,Wf).filter(function(u){return dee(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=cn(d,a);if(bt(f))return u;var m=Array.isArray(f)?[Gx(f),Hx(f)]:[f,f],p=c.reduce(function(g,h){var y=cn(d,h,0),w=m[0]-Math.abs(Array.isArray(y)?y[0]:y),S=m[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,g[0]),Math.max(S,g[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},fee=function(t,r,a,s,i){var o=r.map(function(l){return zA(t,l,a,i,s)}).filter(function(l){return!bt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},VA=function(t,r,a,s,i){var o=r.map(function(c){var u=c.props.dataKey;return a==="number"&&u&&zA(t,c,u,s)||Xu(t,u,a,i)});if(a==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},HA=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},GA=function(t,r,a,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===a&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(a),l},Ps=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Qn(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var m=i?i.indexOf(f):f;return{coordinate:s(m)+u,value:f,offset:u}});return d.filter(function(f){return!Mf(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:s(f)+u,value:f,index:m,offset:u}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+u,value:f,offset:u}}):s.domain().map(function(f,m){return{coordinate:s(f)+u,value:i?i[f]:f,index:m,offset:u}})},wg=new WeakMap,A0=function(t,r){if(typeof r!="function")return t;wg.has(t)||wg.set(t,new WeakMap);var a=wg.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},mee=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Md(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ch(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:Gu(),realScaleType:"point"}:i==="category"?{scale:Md(),realScaleType:"band"}:{scale:ch(),realScaleType:"linear"};if(Wo(s)){var c="scale".concat(Dx(s));return{scale:(OC[c]||Gu)(),realScaleType:OC[c]?c:"point"}}return xt(s)?{scale:s}:{scale:Gu(),realScaleType:"point"}},FC=1e-4,hee=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-FC,o=Math.max(s[0],s[1])+FC,l=t(r[0]),c=t(r[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[a-1]])}},xee=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},pee=function(t,r){if(!r||r.length!==2||!Be(r[0])||!Be(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Be(t[0])||t[0]<a)&&(i[0]=a),(!Be(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},gee=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var c=Mf(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},yee=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=Mf(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},vee={sign:gee,expand:R9,none:mc,silhouette:L9,wiggle:$9,positive:yee},bee=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=vee[a],o=F9().keys(s).value(function(l,c){return+cn(l,c,0)}).order(iv).offset(i);return o(t)},wee=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,m){var p,g=(p=m.type)!==null&&p!==void 0&&p.defaultProps?yr(yr({},m.type.defaultProps),m.props):m.props,h=g.stackId,y=g.hide;if(y)return f;var w=g[a],S=f[w]||{hasStack:!1,stackGroups:{}};if(Kr(h)){var v=S.stackGroups[h]||{numericAxisId:a,cateAxisId:s,items:[]};v.items.push(m),S.hasStack=!0,S.stackGroups[h]=v}else S.stackGroups[Ff("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[m]};return yr(yr({},f),{},Jl({},w,S))},c),d={};return Object.keys(u).reduce(function(f,m){var p=u[m];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(h,y){var w=p.stackGroups[y];return yr(yr({},h),{},Jl({},y,{numericAxisId:a,cateAxisId:s,items:w.items,stackedData:bee(t,w.items,i)}))},g)}return yr(yr({},f),{},Jl({},m,p))},d)},Nee=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=a||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=DZ(u,i,l);return t.domain([Gx(d),Hx(d)]),{niceTicks:d}}if(i&&s==="number"){var f=t.domain(),m=MZ(f,i,l);return{niceTicks:m}}return null};function RC(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!bt(s[t.dataKey])){var l=Bm(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=cn(s,bt(o)?t.dataKey:o);return bt(c)?null:t.scale(c)}var LC=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var c=cn(o,r.dataKey,r.domain[l]);return bt(c)?null:r.scale(c)-i/2+s},jee=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},See=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?yr(yr({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Kr(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Cee=function(t){return t.reduce(function(r,a){return[Gx(a.concat([r[0]]).filter(Be)),Hx(a.concat([r[1]]).filter(Be))]},[1/0,-1/0])},XA=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=Cee(d.slice(r,a+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},$C=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fv=function(t,r,a){if(xt(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(Be(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if($C.test(t[0])){var i=+$C.exec(t[0])[1];s[0]=r[0]-i}else xt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Be(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(BC.test(t[1])){var o=+BC.exec(t[1])[1];s[1]=r[1]+o}else xt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},ph=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=cw(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},UC=function(t,r,a){return!t||!t.length||Xx(t,An(a,"type.defaultProps.domain"))?r:t},YA=function(t,r){var a=t.type.defaultProps?yr(yr({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,u=a.chartType,d=a.hide;return yr(yr({},Tt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Mw(t),value:cn(r,s),type:c,payload:r,chartType:u,hide:d})};function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function WC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function qC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WC(Object(r),!0).forEach(function(a){kee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kee(e,t,r){return t=Oee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oee(e){var t=Tee(e,"string");return Kd(t)=="symbol"?t:t+""}function Tee(e,t){if(Kd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Kd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gh=Math.PI/180,_ee=function(t){return t*180/Math.PI},ua=function(t,r,a,s){return{x:t+Math.cos(-gh*s)*a,y:r+Math.sin(-gh*s)*a}},Eee=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},Aee=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=Eee({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:_ee(u),angleInRadian:u}},Pee=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},Iee=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},KC=function(t,r){var a=t.x,s=t.y,i=Aee({x:a,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Pee(r),f=d.startAngle,m=d.endAngle,p=l,g;if(f<=m){for(;p>m;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=m}else{for(;p>f;)p-=360;for(;p<m;)p+=360;g=p>=m&&p<=f}return g?qC(qC({},r),{},{radius:o,angle:Iee(p,r)}):null};function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}var Dee=["offset"];function Mee(e){return $ee(e)||Lee(e)||Ree(e)||Fee()}function Fee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ree(e,t){if(e){if(typeof e=="string")return Rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rv(e,t)}}function Lee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $ee(e){if(Array.isArray(e))return Rv(e)}function Rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Bee(e,t){if(e==null)return{};var r=Uee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Uee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(r),!0).forEach(function(a){Wee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Wee(e,t,r){return t=qee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qee(e){var t=Kee(e,"string");return zd(t)=="symbol"?t:t+""}function Kee(e,t){if(zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(zd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vd.apply(this,arguments)}var zee=function(t){var r=t.value,a=t.formatter,s=bt(t.children)?r:t.children;return xt(a)?a(s):s},Vee=function(t,r){var a=Qn(r-t),s=Math.min(Math.abs(r-t),360);return a*s},Hee=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,m=c.outerRadius,p=c.startAngle,g=c.endAngle,h=c.clockWise,y=(f+m)/2,w=Vee(p,g),S=w>=0?1:-1,v,x;s==="insideStart"?(v=p+S*o,x=h):s==="insideEnd"?(v=g-S*o,x=!h):s==="end"&&(v=g+S*o,x=h),x=w<=0?x:!x;var b=ua(u,d,y,v),N=ua(u,d,y,v+(x?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(x?0:1,`,
    `).concat(N.x,",").concat(N.y),O=bt(t.id)?Ff("recharts-radial-line-"):t.id;return le.createElement("text",Vd({},a,{dominantBaseline:"central",className:It("recharts-radial-bar-label",l)}),le.createElement("defs",null,le.createElement("path",{id:O,d:j})),le.createElement("textPath",{xlinkHref:"#".concat(O)},r))},Gee=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,m=(d+f)/2;if(s==="outside"){var p=ua(o,l,u+a,m),g=p.x,h=p.y;return{x:g,y:h,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,w=ua(o,l,y,m),S=w.x,v=w.y;return{x:S,y:v,textAnchor:"middle",verticalAnchor:"middle"}},Xee=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,m=f*s,p=f>0?"end":"start",g=f>0?"start":"end",h=u>=0?1:-1,y=h*s,w=h>0?"end":"start",S=h>0?"start":"end";if(i==="top"){var v={x:l+u/2,y:c-f*s,textAnchor:"middle",verticalAnchor:p};return Br(Br({},v),a?{height:Math.max(c-a.y,0),width:u}:{})}if(i==="bottom"){var x={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:g};return Br(Br({},x),a?{height:Math.max(a.y+a.height-(c+d),0),width:u}:{})}if(i==="left"){var b={x:l-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Br(Br({},b),a?{width:Math.max(b.x-a.x,0),height:d}:{})}if(i==="right"){var N={x:l+u+y,y:c+d/2,textAnchor:S,verticalAnchor:"middle"};return Br(Br({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:d}:{})}var j=a?{width:u,height:d}:{};return i==="insideLeft"?Br({x:l+y,y:c+d/2,textAnchor:S,verticalAnchor:"middle"},j):i==="insideRight"?Br({x:l+u-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},j):i==="insideTop"?Br({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:g},j):i==="insideBottom"?Br({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:p},j):i==="insideTopLeft"?Br({x:l+y,y:c+m,textAnchor:S,verticalAnchor:g},j):i==="insideTopRight"?Br({x:l+u-y,y:c+m,textAnchor:w,verticalAnchor:g},j):i==="insideBottomLeft"?Br({x:l+y,y:c+d-m,textAnchor:S,verticalAnchor:p},j):i==="insideBottomRight"?Br({x:l+u-y,y:c+d-m,textAnchor:w,verticalAnchor:p},j):Kc(i)&&(Be(i.x)||wo(i.x))&&(Be(i.y)||wo(i.y))?Br({x:l+qo(i.x,u),y:c+qo(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):Br({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},Yee=function(t){return"cx"in t&&Be(t.cx)};function ba(e){var t=e.offset,r=t===void 0?5:t,a=Bee(e,Dee),s=Br({offset:r},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,f=d===void 0?"":d,m=s.textBreakAll;if(!i||bt(l)&&bt(c)&&!T.isValidElement(u)&&!xt(u))return null;if(T.isValidElement(u))return T.cloneElement(u,s);var p;if(xt(u)){if(p=T.createElement(u,s),T.isValidElement(p))return p}else p=zee(s);var g=Yee(i),h=Tt(s,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Hee(s,p,h);var y=g?Gee(s):Xee(s);return le.createElement(rh,Vd({className:It("recharts-label",f)},h,y,{breakAll:m}),p)}ba.displayName="Label";var QA=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,m=t.y,p=t.top,g=t.left,h=t.width,y=t.height,w=t.clockWise,S=t.labelViewBox;if(S)return S;if(Be(h)&&Be(y)){if(Be(f)&&Be(m))return{x:f,y:m,width:h,height:y};if(Be(p)&&Be(g))return{x:p,y:g,width:h,height:y}}return Be(f)&&Be(m)?{x:f,y:m,width:0,height:0}:Be(r)&&Be(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:t.viewBox?t.viewBox:{}},Qee=function(t,r){return t?t===!0?le.createElement(ba,{key:"label-implicit",viewBox:r}):Kr(t)?le.createElement(ba,{key:"label-implicit",viewBox:r,value:t}):T.isValidElement(t)?t.type===ba?T.cloneElement(t,{key:"label-implicit",viewBox:r}):le.createElement(ba,{key:"label-implicit",content:t,viewBox:r}):xt(t)?le.createElement(ba,{key:"label-implicit",content:t,viewBox:r}):Kc(t)?le.createElement(ba,Vd({viewBox:r},t,{key:"label-implicit"})):null:null},Jee=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=QA(t),o=Pn(s,ba).map(function(c,u){return T.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!a)return o;var l=Qee(t.label,r||i);return[l].concat(Mee(o))};ba.parseViewBox=QA;ba.renderCallByParent=Jee;function Zee(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ete=Zee;const tte=Qt(ete);function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}var rte=["valueAccessor"],ate=["data","dataKey","clockWise","id","textBreakAll"];function nte(e){return lte(e)||ote(e)||ite(e)||ste()}function ste(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ite(e,t){if(e){if(typeof e=="string")return Lv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lv(e,t)}}function ote(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lte(e){if(Array.isArray(e))return Lv(e)}function Lv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},yh.apply(this,arguments)}function VC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function HC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(r),!0).forEach(function(a){cte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cte(e,t,r){return t=ute(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ute(e){var t=dte(e,"string");return Hd(t)=="symbol"?t:t+""}function dte(e,t){if(Hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Hd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GC(e,t){if(e==null)return{};var r=fte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function fte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var mte=function(t){return Array.isArray(t.value)?tte(t.value):t.value};function Ii(e){var t=e.valueAccessor,r=t===void 0?mte:t,a=GC(e,rte),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,u=GC(a,ate);return!s||!s.length?null:le.createElement(Or,{className:"recharts-label-list"},s.map(function(d,f){var m=bt(i)?r(d,f):cn(d&&d.payload,i),p=bt(l)?{}:{id:"".concat(l,"-").concat(f)};return le.createElement(ba,yh({},Tt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:ba.parseViewBox(bt(o)?d:HC(HC({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Ii.displayName="LabelList";function hte(e,t){return e?e===!0?le.createElement(Ii,{key:"labelList-implicit",data:t}):le.isValidElement(e)||xt(e)?le.createElement(Ii,{key:"labelList-implicit",data:t,content:e}):Kc(e)?le.createElement(Ii,yh({data:t},e,{key:"labelList-implicit"})):null:null}function xte(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Pn(a,Ii).map(function(o,l){return T.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=hte(e.label,t);return[i].concat(nte(s))}Ii.renderCallByParent=xte;function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$v.apply(this,arguments)}function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function YC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(r),!0).forEach(function(a){pte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pte(e,t,r){return t=gte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gte(e){var t=yte(e,"string");return Gd(t)=="symbol"?t:t+""}function yte(e,t){if(Gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Gd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vte=function(t,r){var a=Qn(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},P0=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+s,f=Math.asin(c/d)/gh,m=u?i:i+o*f,p=ua(r,a,d,m),g=ua(r,a,s,m),h=u?i-o*f:i,y=ua(r,a,d*Math.cos(f*gh),h);return{center:p,circleTangency:g,lineTangency:y,theta:f}},JA=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=vte(o,l),u=o+c,d=ua(r,a,i,o),f=ua(r,a,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var p=ua(r,a,s,o),g=ua(r,a,s,u);m+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(a," Z");return m},bte=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Qn(d-u),m=P0({cx:r,cy:a,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,g=m.lineTangency,h=m.theta,y=P0({cx:r,cy:a,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),w=y.circleTangency,S=y.lineTangency,v=y.theta,x=c?Math.abs(u-d):Math.abs(u-d)-h-v;if(x<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):JA({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d});var b="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,`
  `);if(s>0){var N=P0({cx:r,cy:a,radius:s,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=N.circleTangency,O=N.lineTangency,_=N.theta,E=P0({cx:r,cy:a,radius:s,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=E.circleTangency,C=E.lineTangency,A=E.theta,P=c?Math.abs(u-d):Math.abs(u-d)-_-A;if(P<0&&o===0)return"".concat(b,"L").concat(r,",").concat(a,"Z");b+="L".concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else b+="L".concat(r,",").concat(a,"Z");return b},wte={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZA=function(t){var r=YC(YC({},wte),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,m=r.className;if(o<i||d===f)return null;var p=It("recharts-sector",m),g=o-i,h=qo(l,g,0,!0),y;return h>0&&Math.abs(d-f)<360?y=bte({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(h,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):y=JA({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),le.createElement("path",$v({},Tt(r,!0),{className:p,d:y,role:"img"}))};function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bv.apply(this,arguments)}function QC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function JC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(r),!0).forEach(function(a){Nte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nte(e,t,r){return t=jte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jte(e){var t=Ste(e,"string");return Xd(t)=="symbol"?t:t+""}function Ste(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Xd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZC={curveBasisClosed:C9,curveBasisOpen:k9,curveBasis:S9,curveBumpX:u9,curveBumpY:d9,curveLinearClosed:O9,curveLinear:Fx,curveMonotoneX:T9,curveMonotoneY:_9,curveNatural:E9,curveStep:A9,curveStepAfter:I9,curveStepBefore:P9},I0=function(t){return t.x===+t.x&&t.y===+t.y},ju=function(t){return t.x},Su=function(t){return t.y},Cte=function(t,r){if(xt(t))return t;var a="curve".concat(Dx(t));return(a==="curveMonotone"||a==="curveBump")&&r?ZC["".concat(a).concat(r==="vertical"?"Y":"X")]:ZC[a]||Fx},kte=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Cte(a,l),f=u?i.filter(function(h){return I0(h)}):i,m;if(Array.isArray(o)){var p=u?o.filter(function(h){return I0(h)}):o,g=f.map(function(h,y){return JC(JC({},h),{},{base:p[y]})});return l==="vertical"?m=j0().y(Su).x1(ju).x0(function(h){return h.base.x}):m=j0().x(ju).y1(Su).y0(function(h){return h.base.y}),m.defined(I0).curve(d),m(g)}return l==="vertical"&&Be(o)?m=j0().y(Su).x1(ju).x0(o):Be(o)?m=j0().x(ju).y1(Su).y0(o):m=ZE().x(ju).y(Su),m.defined(I0).curve(d),m(f)},Uv=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?kte(t):s;return T.createElement("path",Bv({},Tt(t,!1),Um(t),{className:It("recharts-curve",r),d:o,ref:i}))},eP={exports:{}},Ote="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tte=Ote,_te=Tte;function tP(){}function rP(){}rP.resetWarningCache=tP;var Ete=function(){function e(a,s,i,o,l,c){if(c!==_te){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rP,resetWarningCache:tP};return r.PropTypes=r,r};eP.exports=Ete();var Ate=eP.exports;const $t=Qt(Ate);var Pte=Object.getOwnPropertyNames,Ite=Object.getOwnPropertySymbols,Dte=Object.prototype.hasOwnProperty;function ek(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function D0(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);var i=s.cache,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);var c=e(r,a,s);return i.delete(r),i.delete(a),c}}function tk(e){return Pte(e).concat(Ite(e))}var Mte=Object.hasOwn||function(e,t){return Dte.call(e,t)};function il(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Fte="__v",Rte="__o",Lte="_owner",rk=Object.getOwnPropertyDescriptor,ak=Object.keys;function $te(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Bte(e,t){return il(e.getTime(),t.getTime())}function Ute(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Wte(e,t){return e===t}function nk(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(s[f]){f++;continue}var m=o.value,p=l.value;if(r.equals(m[0],p[0],c,f,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1;c++}return!0}var qte=il;function Kte(e,t,r){var a=ak(e),s=a.length;if(ak(t).length!==s)return!1;for(;s-- >0;)if(!aP(e,t,r,a[s]))return!1;return!0}function Cu(e,t,r){var a=tk(e),s=a.length;if(tk(t).length!==s)return!1;for(var i,o,l;s-- >0;)if(i=a[s],!aP(e,t,r,i)||(o=rk(e,i),l=rk(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function zte(e,t){return il(e.valueOf(),t.valueOf())}function Vte(e,t){return e.source===t.source&&e.flags===t.flags}function sk(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!s[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function Hte(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Gte(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function aP(e,t,r,a){return(a===Lte||a===Rte||a===Fte)&&(e.$$typeof||t.$$typeof)?!0:Mte(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}var Xte="[object Arguments]",Yte="[object Boolean]",Qte="[object Date]",Jte="[object Error]",Zte="[object Map]",ere="[object Number]",tre="[object Object]",rre="[object RegExp]",are="[object Set]",nre="[object String]",sre="[object URL]",ire=Array.isArray,ik=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,ok=Object.assign,ore=Object.prototype.toString.call.bind(Object.prototype.toString);function lre(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(g,h,y){if(g===h)return!0;if(g==null||h==null)return!1;var w=typeof g;if(w!==typeof h)return!1;if(w!=="object")return w==="number"?o(g,h,y):w==="function"?s(g,h,y):!1;var S=g.constructor;if(S!==h.constructor)return!1;if(S===Object)return l(g,h,y);if(ire(g))return t(g,h,y);if(ik!=null&&ik(g))return f(g,h,y);if(S===Date)return r(g,h,y);if(S===RegExp)return u(g,h,y);if(S===Map)return i(g,h,y);if(S===Set)return d(g,h,y);var v=ore(g);return v===Qte?r(g,h,y):v===rre?u(g,h,y):v===Zte?i(g,h,y):v===are?d(g,h,y):v===tre?typeof g.then!="function"&&typeof h.then!="function"&&l(g,h,y):v===sre?m(g,h,y):v===Jte?a(g,h,y):v===Xte?l(g,h,y):v===Yte||v===ere||v===nre?c(g,h,y):!1}}function cre(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?Cu:$te,areDatesEqual:Bte,areErrorsEqual:Ute,areFunctionsEqual:Wte,areMapsEqual:a?ek(nk,Cu):nk,areNumbersEqual:qte,areObjectsEqual:a?Cu:Kte,arePrimitiveWrappersEqual:zte,areRegExpsEqual:Vte,areSetsEqual:a?ek(sk,Cu):sk,areTypedArraysEqual:a?Cu:Hte,areUrlsEqual:Gte};if(r&&(s=ok({},s,r(s))),t){var i=D0(s.areArraysEqual),o=D0(s.areMapsEqual),l=D0(s.areObjectsEqual),c=D0(s.areSetsEqual);s=ok({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function ure(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function dre(e){var t=e.circular,r=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(c,u){var d=a(),f=d.cache,m=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return r(c,u,{cache:m,equals:s,meta:p,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var fre=Ji();Ji({strict:!0});Ji({circular:!0});Ji({circular:!0,strict:!0});Ji({createInternalComparator:function(){return il}});Ji({strict:!0,createInternalComparator:function(){return il}});Ji({circular:!0,createInternalComparator:function(){return il}});Ji({circular:!0,createInternalComparator:function(){return il},strict:!0});function Ji(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,s=e.createState,i=e.strict,o=i===void 0?!1:i,l=cre(e),c=lre(l),u=a?a(c):ure(c);return dre({circular:r,comparator:c,createState:s,equals:u,strict:o})}function mre(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function lk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):mre(s)};requestAnimationFrame(a)}function Wv(e){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wv(e)}function hre(e){return yre(e)||gre(e)||pre(e)||xre()}function xre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pre(e,t){if(e){if(typeof e=="string")return ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ck(e,t)}}function ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function gre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yre(e){if(Array.isArray(e))return e}function vre(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=hre(o),c=l[0],u=l.slice(1);if(typeof c=="number"){lk(s.bind(null,u),c);return}s(c),lk(s.bind(null,u));return}Wv(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(a){nP(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nP(e,t,r){return t=bre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bre(e){var t=wre(e,"string");return Yd(t)==="symbol"?t:String(t)}function wre(e,t){if(Yd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Yd(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nre=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},jre=function(t){return t},Sre=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Yu=function(t,r){return Object.keys(r).reduce(function(a,s){return dk(dk({},a),{},nP({},s,t(s,r[s])))},{})},fk=function(t,r,a){return t.map(function(s){return"".concat(Sre(s)," ").concat(r,"ms ").concat(a)}).join(",")};function Cre(e,t){return Tre(e)||Ore(e,t)||sP(e,t)||kre()}function kre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ore(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Tre(e){if(Array.isArray(e))return e}function _re(e){return Pre(e)||Are(e)||sP(e)||Ere()}function Ere(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sP(e,t){if(e){if(typeof e=="string")return qv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qv(e,t)}}function Are(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pre(e){if(Array.isArray(e))return qv(e)}function qv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var vh=1e-4,iP=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},oP=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},mk=function(t,r){return function(a){var s=iP(t,r);return oP(s,a)}},Ire=function(t,r){return function(a){var s=iP(t,r),i=[].concat(_re(s.map(function(o,l){return o*l}).slice(1)),[0]);return oP(i,a)}},hk=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=Cre(u,4);s=d[0],i=d[1],o=d[2],l=d[3]}}}var f=mk(s,o),m=mk(i,l),p=Ire(s,o),g=function(w){return w>1?1:w<0?0:w},h=function(w){for(var S=w>1?1:w,v=S,x=0;x<8;++x){var b=f(v)-S,N=p(v);if(Math.abs(b-S)<vh||N<vh)return m(v);v=g(v-b/N)}return m(v)};return h.isStepper=!1,h},Dre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(d,f,m){var p=-(d-f)*a,g=m*i,h=m+(p-g)*l/1e3,y=m*l/1e3+d;return Math.abs(y-f)<vh&&Math.abs(h)<vh?[f,0]:[y,h]};return c.isStepper=!0,c.dt=l,c},Mre=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hk(s);case"spring":return Dre();default:if(s.split("(")[0]==="cubic-bezier")return hk(s)}return typeof s=="function"?s:null};function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function xk(e){return Lre(e)||Rre(e)||lP(e)||Fre()}function Fre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lre(e){if(Array.isArray(e))return zv(e)}function pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(r),!0).forEach(function(a){Kv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kv(e,t,r){return t=$re(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $re(e){var t=Bre(e,"string");return Qd(t)==="symbol"?t:String(t)}function Bre(e,t){if(Qd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Qd(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ure(e,t){return Kre(e)||qre(e,t)||lP(e,t)||Wre()}function Wre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lP(e,t){if(e){if(typeof e=="string")return zv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zv(e,t)}}function zv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function qre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Kre(e){if(Array.isArray(e))return e}var bh=function(t,r,a){return t+(r-t)*a},Vv=function(t){var r=t.from,a=t.to;return r!==a},zre=function e(t,r,a){var s=Yu(function(i,o){if(Vv(o)){var l=t(o.from,o.to,o.velocity),c=Ure(l,2),u=c[0],d=c[1];return sa(sa({},o),{},{from:u,velocity:d})}return o},r);return a<1?Yu(function(i,o){return Vv(o)?sa(sa({},o),{},{velocity:bh(o.velocity,s[i].velocity,a),from:bh(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const Vre=function(e,t,r,a,s){var i=Nre(e,t),o=i.reduce(function(y,w){return sa(sa({},y),{},Kv({},w,[e[w],t[w]]))},{}),l=i.reduce(function(y,w){return sa(sa({},y),{},Kv({},w,{from:e[w],velocity:0,to:t[w]}))},{}),c=-1,u,d,f=function(){return null},m=function(){return Yu(function(w,S){return S.from},l)},p=function(){return!Object.values(l).filter(Vv).length},g=function(w){u||(u=w);var S=w-u,v=S/r.dt;l=zre(r,l,v),s(sa(sa(sa({},e),t),m())),u=w,p()||(c=requestAnimationFrame(f))},h=function(w){d||(d=w);var S=(w-d)/a,v=Yu(function(b,N){return bh.apply(void 0,xk(N).concat([r(S)]))},o);if(s(sa(sa(sa({},e),t),v)),S<1)c=requestAnimationFrame(f);else{var x=Yu(function(b,N){return bh.apply(void 0,xk(N).concat([r(1)]))},o);s(sa(sa(sa({},e),t),x))}};return f=r.isStepper?g:h,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}var Hre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Gre(e,t){if(e==null)return{};var r=Xre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Xre(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Ng(e){return Zre(e)||Jre(e)||Qre(e)||Yre()}function Yre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qre(e,t){if(e){if(typeof e=="string")return Hv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hv(e,t)}}function Jre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zre(e){if(Array.isArray(e))return Hv(e)}function Hv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(r),!0).forEach(function(a){Du(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Du(e,t,r){return t=cP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,cP(a.key),a)}}function tae(e,t,r){return t&&yk(e.prototype,t),r&&yk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cP(e){var t=rae(e,"string");return Nc(t)==="symbol"?t:String(t)}function rae(e,t){if(Nc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Nc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gv(e,t)}function Gv(e,t){return Gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Gv(e,t)}function nae(e){var t=sae();return function(){var a=wh(e),s;if(t){var i=wh(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return Xv(this,s)}}function Xv(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yv(e)}function Yv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wh(e)}var Jx=function(e){aae(r,e);var t=nae(r);function r(a,s){var i;eae(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Yv(i)),i.changeStyle=i.changeStyle.bind(Yv(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),Xv(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof m=="function")return i.state={style:u},Xv(i);i.state={style:c?Du({},c,u):u}}else i.state={style:{}};return i}return tae(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,m=this.state.style;if(l){if(!o){var p={style:c?Du({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(p);return}if(!(fre(s.to,d)&&s.canBegin&&s.isActive)){var g=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=g||u?f:s.to;if(this.state&&m){var y={style:c?Du({},c,h):h};(c&&m[c]!==h||!c&&m!==h)&&this.setState(y)}this.runAnimation(Un(Un({},this.props),{},{from:h,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,f=s.onAnimationEnd,m=s.onAnimationStart,p=Vre(o,l,Mre(u),c,this.changeStyle),g=function(){i.stopJSAnimation=p()};this.manager.start([m,d,g,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,f=u.duration,m=f===void 0?0:f,p=function(h,y,w){if(w===0)return h;var S=y.duration,v=y.easing,x=v===void 0?"ease":v,b=y.style,N=y.properties,j=y.onAnimationEnd,O=w>0?o[w-1]:y,_=N||Object.keys(b);if(typeof x=="function"||x==="spring")return[].concat(Ng(h),[i.runJSAnimation.bind(i,{from:O.style,to:b,duration:S,easing:x}),S]);var E=fk(_,S,x),k=Un(Un(Un({},O.style),b),{},{transition:E});return[].concat(Ng(h),[k,S,j]).filter(jre)};return this.manager.start([c].concat(Ng(o.reduce(p,[d,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=vre());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,f=s.onAnimationEnd,m=s.steps,p=s.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var h=l?Du({},l,c):c,y=fk(Object.keys(h),o,u);g.start([d,i,Un(Un({},h),{},{transition:y}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Gre(s,Hre),u=T.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(p){var g=p.props,h=g.style,y=h===void 0?{}:h,w=g.className,S=T.cloneElement(p,Un(Un({},c),{},{style:Un(Un({},y),d),className:w}));return S};return u===1?f(T.Children.only(i)):le.createElement("div",null,T.Children.map(i,function(m){return f(m)}))}}]),r}(T.PureComponent);Jx.displayName="Animate";Jx.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Jx.propTypes={from:$t.oneOfType([$t.object,$t.string]),to:$t.oneOfType([$t.object,$t.string]),attributeName:$t.string,duration:$t.number,begin:$t.number,easing:$t.oneOfType([$t.string,$t.func]),steps:$t.arrayOf($t.shape({duration:$t.number.isRequired,style:$t.object.isRequired,easing:$t.oneOfType([$t.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),$t.func]),properties:$t.arrayOf("string"),onAnimationEnd:$t.func})),children:$t.oneOfType([$t.node,$t.func]),isActive:$t.bool,canBegin:$t.bool,onAnimationEnd:$t.func,shouldReAnimate:$t.bool,onAnimationStart:$t.func,onAnimationReStart:$t.func};const jc=Jx;function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Nh.apply(this,arguments)}function iae(e,t){return uae(e)||cae(e,t)||lae(e,t)||oae()}function oae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lae(e,t){if(e){if(typeof e=="string")return vk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vk(e,t)}}function vk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function cae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function uae(e){if(Array.isArray(e))return e}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(a){dae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dae(e,t,r){return t=fae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fae(e){var t=mae(e,"string");return Jd(t)=="symbol"?t:t+""}function mae(e,t){if(Jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Jd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nk=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,p=4;m<p;m++)f[m]=i[m]>o?o:i[m];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+a-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+a,",").concat(r+l*f[1])),d+="L ".concat(t+a,",").concat(r+s-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+a-c*f[2],",").concat(r+s)),d+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+a-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+a,",").concat(r+l*g,`
            L `).concat(t+a,",").concat(r+s-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+a-c*g,",").concat(r+s,`
            L `).concat(t+c*g,",").concat(r+s,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return d},hae=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return a>=u&&a<=d&&s>=f&&s<=m}return!1},xae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fw=function(t){var r=wk(wk({},xae),t),a=T.useRef(),s=T.useState(-1),i=iae(s,2),o=i[0],l=i[1];T.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var x=a.current.getTotalLength();x&&l(x)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,m=r.radius,p=r.className,g=r.animationEasing,h=r.animationDuration,y=r.animationBegin,w=r.isAnimationActive,S=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var v=It("recharts-rectangle",p);return S?le.createElement(jc,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:h,animationEasing:g,isActive:S},function(x){var b=x.width,N=x.height,j=x.x,O=x.y;return le.createElement(jc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:h,isActive:w,easing:g},le.createElement("path",Nh({},Tt(r,!0),{className:v,d:Nk(j,O,b,N,m),ref:a})))}):le.createElement("path",Nh({},Tt(r,!0),{className:v,d:Nk(c,u,d,f,m)}))};function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qv.apply(this,arguments)}var Rw=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=It("recharts-dot",i);return r===+r&&a===+a&&s===+s?T.createElement("circle",Qv({},Tt(t,!1),Um(t),{className:o,cx:r,cy:a,r:s})):null};function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}var pae=["x","y","top","left","width","height","className"];function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jv.apply(this,arguments)}function jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function gae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jk(Object(r),!0).forEach(function(a){yae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yae(e,t,r){return t=vae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vae(e){var t=bae(e,"string");return Zd(t)=="symbol"?t:t+""}function bae(e,t){if(Zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Zd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wae(e,t){if(e==null)return{};var r=Nae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Nae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var jae=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},Sae=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,m=t.height,p=m===void 0?0:m,g=t.className,h=wae(t,pae),y=gae({x:a,y:i,top:l,left:u,width:f,height:p},h);return!Be(a)||!Be(i)||!Be(f)||!Be(p)||!Be(l)||!Be(u)?null:le.createElement("path",Jv({},Tt(y,!0),{className:It("recharts-cross",g),d:jae(a,i,f,p,l,u)}))},Cae=j3,kae=Cae(Object.getPrototypeOf,Object),Oae=kae,Tae=Zs,_ae=Oae,Eae=ei,Aae="[object Object]",Pae=Function.prototype,Iae=Object.prototype,uP=Pae.toString,Dae=Iae.hasOwnProperty,Mae=uP.call(Object);function Fae(e){if(!Eae(e)||Tae(e)!=Aae)return!1;var t=_ae(e);if(t===null)return!0;var r=Dae.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&uP.call(r)==Mae}var Rae=Fae;const Lae=Qt(Rae);var $ae=Zs,Bae=ei,Uae="[object Boolean]";function Wae(e){return e===!0||e===!1||Bae(e)&&$ae(e)==Uae}var qae=Wae;const Kae=Qt(qae);function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function jh(){return jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jh.apply(this,arguments)}function zae(e,t){return Xae(e)||Gae(e,t)||Hae(e,t)||Vae()}function Vae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hae(e,t){if(e){if(typeof e=="string")return Sk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sk(e,t)}}function Sk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Gae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Xae(e){if(Array.isArray(e))return e}function Ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(r),!0).forEach(function(a){Yae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yae(e,t,r){return t=Qae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qae(e){var t=Jae(e,"string");return ef(t)=="symbol"?t:t+""}function Jae(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(ef(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ok=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Zae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ene=function(t){var r=kk(kk({},Zae),t),a=T.useRef(),s=T.useState(-1),i=zae(s,2),o=i[0],l=i[1];T.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var v=a.current.getTotalLength();v&&l(v)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,m=r.height,p=r.className,g=r.animationEasing,h=r.animationDuration,y=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var S=It("recharts-trapezoid",p);return w?le.createElement(jc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:m,x:c,y:u},duration:h,animationEasing:g,isActive:w},function(v){var x=v.upperWidth,b=v.lowerWidth,N=v.height,j=v.x,O=v.y;return le.createElement(jc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:h,easing:g},le.createElement("path",jh({},Tt(r,!0),{className:S,d:Ok(j,O,x,b,N),ref:a})))}):le.createElement("g",null,le.createElement("path",jh({},Tt(r,!0),{className:S,d:Ok(c,u,d,f,m)})))},tne=["option","shapeType","propTransformer","activeClassName","isActive"];function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function rne(e,t){if(e==null)return{};var r=ane(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ane(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Sh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(a){nne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nne(e,t,r){return t=sne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sne(e){var t=ine(e,"string");return tf(t)=="symbol"?t:t+""}function ine(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(tf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function one(e,t){return Sh(Sh({},t),e)}function lne(e,t){return e==="symbols"}function _k(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return le.createElement(Fw,r);case"trapezoid":return le.createElement(ene,r);case"sector":return le.createElement(ZA,r);case"symbols":if(lne(t))return le.createElement(tw,r);break;default:return null}}function cne(e){return T.isValidElement(e)?e.props:e}function une(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?one:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=rne(e,tne),u;if(T.isValidElement(t))u=T.cloneElement(t,Sh(Sh({},c),cne(t)));else if(xt(t))u=t(c);else if(Lae(t)&&!Kae(t)){var d=s(t,c);u=le.createElement(_k,{shapeType:r,elementProps:d})}else{var f=c;u=le.createElement(_k,{shapeType:r,elementProps:f})}return l?le.createElement(Or,{className:o},u):u}function Zx(e,t){return t!=null&&"trapezoids"in e.props}function ep(e,t){return t!=null&&"sectors"in e.props}function rf(e,t){return t!=null&&"points"in e.props}function dne(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function fne(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function mne(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function hne(e,t){var r;return Zx(e,t)?r=dne:ep(e,t)?r=fne:rf(e,t)&&(r=mne),r}function xne(e,t){var r;return Zx(e,t)?r="trapezoids":ep(e,t)?r="sectors":rf(e,t)&&(r="points"),r}function pne(e,t){if(Zx(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(ep(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return rf(e,t)?t.payload:{}}function gne(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=xne(r,t),i=pne(r,t),o=a.filter(function(c,u){var d=Xx(i,c),f=r.props[s].filter(function(g){var h=hne(r,t);return h(g,t)}),m=r.props[s].indexOf(f[f.length-1]),p=u===m;return d&&p}),l=a.indexOf(o[o.length-1]);return l}var yne=Math.ceil,vne=Math.max;function bne(e,t,r,a){for(var s=-1,i=vne(yne((t-e)/(r||1)),0),o=Array(i);i--;)o[a?i:++s]=e,e+=r;return o}var wne=bne,Nne=W3,Ek=1/0,jne=17976931348623157e292;function Sne(e){if(!e)return e===0?e:0;if(e=Nne(e),e===Ek||e===-Ek){var t=e<0?-1:1;return t*jne}return e===e?e:0}var dP=Sne,Cne=wne,kne=Bx,jg=dP;function One(e){return function(t,r,a){return a&&typeof a!="number"&&kne(t,r,a)&&(r=a=void 0),t=jg(t),r===void 0?(r=t,t=0):r=jg(r),a=a===void 0?t<r?1:-1:jg(a),Cne(t,r,a,e)}}var Tne=One,_ne=Tne,Ene=_ne(),Ane=Ene;const Ch=Qt(Ane);function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Pk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(a){fP(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fP(e,t,r){return t=Pne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pne(e){var t=Ine(e,"string");return af(t)=="symbol"?t:t+""}function Ine(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(af(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dne=["Webkit","Moz","O","ms"],Mne=function(t,r){if(!t)return null;var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Dne.reduce(function(i,o){return Pk(Pk({},i),{},fP({},o+a,r))},{});return s[t]=r,s};function Sc(e){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kh.apply(this,arguments)}function Ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Sg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ik(Object(r),!0).forEach(function(a){Ya(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ik(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,hP(a.key),a)}}function Rne(e,t,r){return t&&Dk(e.prototype,t),r&&Dk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lne(e,t,r){return t=Oh(t),$ne(e,mP()?Reflect.construct(t,r||[],Oh(e).constructor):t.apply(e,r))}function $ne(e,t){if(t&&(Sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bne(e)}function Bne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mP=function(){return!!e})()}function Oh(e){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oh(e)}function Une(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Zv(e,t)}function Ya(e,t,r){return t=hP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hP(e){var t=Wne(e,"string");return Sc(t)=="symbol"?t:t+""}function Wne(e,t){if(Sc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Sc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qne=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Gu().domain(Ch(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(s),scale:u,scaleValues:d}},Mk=function(t){return t.changedTouches&&!!t.changedTouches.length},Cc=function(e){function t(r){var a;return Fne(this,t),a=Lne(this,t,[r]),Ya(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),Ya(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),Ya(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),Ya(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ya(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ya(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ya(a,"handleSlideDragStart",function(s){var i=Mk(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return Une(t,e),Rne(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(s,i),m=Math.max(s,i),p=t.getIndexInRange(o,f),g=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=cn(i[a],l,a);return xt(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,m=c.startIndex,p=c.endIndex,g=c.onChange,h=a.pageX-i;h>0?h=Math.min(h,u+d-f-l,u+d-f-o):h<0&&(h=Math.max(h,u-o,u-l));var y=this.getIndex({startX:o+h,endX:l+h});(y.startIndex!==m||y.endIndex!==p)&&g&&g(y),this.setState({startX:o+h,endX:l+h,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=Mk(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,f=d.x,m=d.width,p=d.travellerWidth,g=d.onChange,h=d.gap,y=d.data,w={startX:this.state.startX,endX:this.state.endX},S=a.pageX-i;S>0?S=Math.min(S,f+m-p-u):S<0&&(S=Math.max(S,f-u)),w[o]=u+S;var v=this.getIndex(w),x=v.startIndex,b=v.endIndex,N=function(){var O=y.length-1;return o==="startX"&&(l>c?x%h===0:b%h===0)||l<c&&b===O||o==="endX"&&(l>c?b%h===0:x%h===0)||l>c&&b===O};this.setState(Ya(Ya({},o,u+S),"brushMoveStartX",a.pageX),function(){g&&N()&&g(v)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],f=l.indexOf(d);if(f!==-1){var m=f+a;if(!(m===-1||m>=l.length)){var p=l[m];s==="startX"&&p>=u||s==="endX"&&p<=c||this.setState(Ya({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,u=a.stroke;return le.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,u=a.children,d=a.padding,f=T.Children.only(u);return f?le.cloneElement(f,{x:s,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,m=c.traveller,p=c.ariaLabel,g=c.data,h=c.startIndex,y=c.endIndex,w=Math.max(a,this.props.x),S=Sg(Sg({},Tt(this.props,!1)),{},{x:w,y:u,width:d,height:f}),v=p||"Min value: ".concat((i=g[h])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[y])===null||o===void 0?void 0:o.name);return le.createElement(Or,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),l.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,S))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(a,s)+u,f=Math.max(Math.abs(s-a)-u,0);return le.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,u=a.stroke,d=this.state,f=d.startX,m=d.endX,p=5,g={pointerEvents:"none",fill:u};return le.createElement(Or,{className:"recharts-brush-texts"},le.createElement(rh,kh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-p,y:o+l/2},g),this.getTextOfTick(s)),le.createElement(rh,kh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+p,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,u=a.width,d=a.height,f=a.alwaysShowText,m=this.state,p=m.startX,g=m.endX,h=m.isTextActive,y=m.isSlideMoving,w=m.isTravellerMoving,S=m.isTravellerFocused;if(!s||!s.length||!Be(l)||!Be(c)||!Be(u)||!Be(d)||u<=0||d<=0)return null;var v=It("recharts-brush",i),x=le.Children.count(o)===1,b=Mne("userSelect","none");return le.createElement(Or,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(h||y||w||S||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,u=Math.floor(i+l/2)-1;return le.createElement(le.Fragment,null,le.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),le.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),le.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return le.isValidElement(a)?i=le.cloneElement(a,s):xt(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,u=a.updateId,d=a.startIndex,f=a.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return Sg({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?qne({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])}(T.PureComponent);Ya(Cc,"displayName","Brush");Ya(Cc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Kne=lw;function zne(e,t){var r;return Kne(e,function(a,s,i){return r=t(a,s,i),!r}),!!r}var Vne=zne,Hne=x3,Gne=Xi,Xne=Vne,Yne=Ha,Qne=Bx;function Jne(e,t,r){var a=Yne(e)?Hne:Xne;return r&&Qne(e,t,r)&&(t=void 0),a(e,Gne(t))}var Zne=Jne;const ese=Qt(Zne);var ps=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},Fk=R3;function tse(e,t,r){t=="__proto__"&&Fk?Fk(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var rse=tse,ase=rse,nse=M3,sse=Xi;function ise(e,t){var r={};return t=sse(t),nse(e,function(a,s,i){ase(r,s,t(a,s,i))}),r}var ose=ise;const lse=Qt(ose);function cse(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(!t(e[r],r,e))return!1;return!0}var use=cse,dse=lw;function fse(e,t){var r=!0;return dse(e,function(a,s,i){return r=!!t(a,s,i),r}),r}var mse=fse,hse=use,xse=mse,pse=Xi,gse=Ha,yse=Bx;function vse(e,t,r){var a=gse(e)?hse:xse;return r&&yse(e,t,r)&&(t=void 0),a(e,pse(t))}var bse=vse;const xP=Qt(bse);var wse=["x","y"];function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function eb(){return eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},eb.apply(this,arguments)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ku(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(a){Nse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nse(e,t,r){return t=jse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jse(e){var t=Sse(e,"string");return nf(t)=="symbol"?t:t+""}function Sse(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(nf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cse(e,t){if(e==null)return{};var r=kse(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kse(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Ose(e,t){var r=e.x,a=e.y,s=Cse(e,wse),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),m=parseInt(f,10);return ku(ku(ku(ku(ku({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function Lk(e){return le.createElement(une,eb({shapeType:"rectangle",propTransformer:Ose,activeClassName:"recharts-active-bar"},e))}var Tse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=Be(a)||X7(a);return i?t(a,s):(i||zo(!1),r)}},_se=["value","background"],pP;function kc(e){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(e)}function Ese(e,t){if(e==null)return{};var r=Ase(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ase(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Th.apply(this,arguments)}function $k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(r),!0).forEach(function(a){yi(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Pse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yP(a.key),a)}}function Ise(e,t,r){return t&&Bk(e.prototype,t),r&&Bk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dse(e,t,r){return t=_h(t),Mse(e,gP()?Reflect.construct(t,r||[],_h(e).constructor):t.apply(e,r))}function Mse(e,t){if(t&&(kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fse(e)}function Fse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gP=function(){return!!e})()}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_h(e)}function Rse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tb(e,t)}function tb(e,t){return tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tb(e,t)}function yi(e,t,r){return t=yP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yP(e){var t=Lse(e,"string");return kc(t)=="symbol"?t:t+""}function Lse(e,t){if(kc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(kc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qf=function(e){function t(){var r;Pse(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Dse(this,t,[].concat(s)),yi(r,"state",{isAnimationFinished:!1}),yi(r,"id",Ff("recharts-bar-")),yi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),yi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Rse(t,e),Ise(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Tt(this.props,!1);return a&&a.map(function(f,m){var p=m===c,g=p?u:o,h=Pr(Pr(Pr({},d),f),{},{isActive:p,option:g,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return le.createElement(Or,Th({className:"recharts-bar-rectangle"},Wm(s.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),le.createElement(Lk,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,m=this.state.prevData;return le.createElement(jc,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,h=i.map(function(y,w){var S=m&&m[w];if(S){var v=Gn(S.x,y.x),x=Gn(S.y,y.y),b=Gn(S.width,y.width),N=Gn(S.height,y.height);return Pr(Pr({},y),{},{x:v(g),y:x(g),width:b(g),height:N(g)})}if(o==="horizontal"){var j=Gn(0,y.height),O=j(g);return Pr(Pr({},y),{},{y:y.y+y.height-O,height:O})}var _=Gn(0,y.width),E=_(g);return Pr(Pr({},y),{},{width:E})});return le.createElement(Or,null,a.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Xx(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Tt(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,m=Ese(u,_se);if(!f)return null;var p=Pr(Pr(Pr(Pr(Pr({},m),{},{fill:"#eee"},f),c),Wm(a.props,u,d)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return le.createElement(Lk,Th({key:"background-bar-".concat(d),option:a.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Pn(d,Wf);if(!f)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(y,w){var S=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:S,errorVal:cn(y,w)}},g={clipPath:a?"url(#clipPath-".concat(s,")"):null};return le.createElement(Or,g,f.map(function(h){return le.cloneElement(h,{key:"error-bar-".concat(s,"-").concat(h.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,u=a.left,d=a.top,f=a.width,m=a.height,p=a.isAnimationActive,g=a.background,h=a.id;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,w=It("recharts-bar",o),S=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,x=S||v,b=bt(h)?this.id:h;return le.createElement(Or,{className:w},S||v?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(b)},le.createElement("rect",{x:S?u:u-f/2,y:v?d:d-m/2,width:S?f:f*2,height:v?m:m*2}))):null,le.createElement(Or,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(b,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,b),(!p||y)&&Ii.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])}(T.PureComponent);pP=qf;yi(qf,"displayName","Bar");yi(qf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ls.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});yi(qf,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,p=xee(a,r);if(!p)return null;var g=t.layout,h=r.type.defaultProps,y=h!==void 0?Pr(Pr({},h),r.props):r.props,w=y.dataKey,S=y.children,v=y.minPointSize,x=g==="horizontal"?o:i,b=u?x.scale.domain():null,N=jee({numericAxis:x}),j=Pn(S,K3),O=f.map(function(_,E){var k,C,A,P,I,F;u?k=pee(u[d+E],b):(k=cn(_,w),Array.isArray(k)||(k=[N,k]));var q=Tse(v,pP.defaultProps.minPointSize)(k[1],E);if(g==="horizontal"){var H,V=[o.scale(k[0]),o.scale(k[1])],re=V[0],oe=V[1];C=LC({axis:i,ticks:l,bandSize:s,offset:p.offset,entry:_,index:E}),A=(H=oe??re)!==null&&H!==void 0?H:void 0,P=p.size;var U=re-oe;if(I=Number.isNaN(U)?0:U,F={x:C,y:o.y,width:P,height:o.height},Math.abs(q)>0&&Math.abs(I)<Math.abs(q)){var J=Qn(I||q)*(Math.abs(q)-Math.abs(I));A-=J,I+=J}}else{var Q=[i.scale(k[0]),i.scale(k[1])],X=Q[0],ee=Q[1];if(C=X,A=LC({axis:o,ticks:c,bandSize:s,offset:p.offset,entry:_,index:E}),P=ee-X,I=p.size,F={x:i.x,y:A,width:i.width,height:I},Math.abs(q)>0&&Math.abs(P)<Math.abs(q)){var ue=Qn(P||q)*(Math.abs(q)-Math.abs(P));P+=ue}}return Pr(Pr(Pr({},_),{},{x:C,y:A,width:P,height:I,value:u?k:k[1],payload:_,background:F},j&&j[E]&&j[E].props),{},{tooltipPayload:[YA(r,_)],tooltipPosition:{x:C+P/2,y:A+I/2}})});return Pr({data:O,layout:g},m)});function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function $se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vP(a.key),a)}}function Bse(e,t,r){return t&&Uk(e.prototype,t),r&&Uk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(a){tp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tp(e,t,r){return t=vP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vP(e){var t=Use(e,"string");return sf(t)=="symbol"?t:t+""}function Use(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(sf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wse=function(t,r,a,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},m=!!Ja(u,qf);return d.reduce(function(p,g){var h=r[g],y=h.orientation,w=h.domain,S=h.padding,v=S===void 0?{}:S,x=h.mirror,b=h.reversed,N="".concat(y).concat(x?"Mirror":""),j,O,_,E,k;if(h.type==="number"&&(h.padding==="gap"||h.padding==="no-gap")){var C=w[1]-w[0],A=1/0,P=h.categoricalDomain.sort(J7);if(P.forEach(function(Q,X){X>0&&(A=Math.min((Q||0)-(P[X-1]||0),A))}),Number.isFinite(A)){var I=A/C,F=h.layout==="vertical"?a.height:a.width;if(h.padding==="gap"&&(j=I*F/2),h.padding==="no-gap"){var q=qo(t.barCategoryGap,I*F),H=I*F/2;j=H-q-(H-q)/F*q}}}s==="xAxis"?O=[a.left+(v.left||0)+(j||0),a.left+a.width-(v.right||0)-(j||0)]:s==="yAxis"?O=c==="horizontal"?[a.top+a.height-(v.bottom||0),a.top+(v.top||0)]:[a.top+(v.top||0)+(j||0),a.top+a.height-(v.bottom||0)-(j||0)]:O=h.range,b&&(O=[O[1],O[0]]);var V=mee(h,i,m),re=V.scale,oe=V.realScaleType;re.domain(w).range(O),hee(re);var U=Nee(re,zn(zn({},h),{},{realScaleType:oe}));s==="xAxis"?(k=y==="top"&&!x||y==="bottom"&&x,_=a.left,E=f[N]-k*h.height):s==="yAxis"&&(k=y==="left"&&!x||y==="right"&&x,_=f[N]-k*h.width,E=a.top);var J=zn(zn(zn({},h),U),{},{realScaleType:oe,x:_,y:E,scale:re,width:s==="xAxis"?a.width:h.width,height:s==="yAxis"?a.height:h.height});return J.bandSize=ph(J,U),!h.hide&&s==="xAxis"?f[N]+=(k?-1:1)*J.height:h.hide||(f[N]+=(k?-1:1)*J.width),zn(zn({},p),{},tp({},g,J))},{})},bP=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},qse=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return bP({x:r,y:a},{x:s,y:i})},wP=function(){function e(t){$se(this,e),this.scale=t}return Bse(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();tp(wP,"EPS",1e-4);var Lw=function(t){var r=Object.keys(t).reduce(function(a,s){return zn(zn({},a),{},tp({},s,wP.create(t[s])))},{});return zn(zn({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return lse(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return xP(s,function(i,o){return r[o].isInRange(i)})}})};function Kse(e){return(e%180+180)%180}var zse=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Kse(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Vse=Xi,Hse=Rf,Gse=Lx;function Xse(e){return function(t,r,a){var s=Object(t);if(!Hse(t)){var i=Vse(r);t=Gse(t),r=function(l){return i(s[l],l,s)}}var o=e(t,r,a);return o>-1?s[i?t[o]:o]:void 0}}var Yse=Xse,Qse=dP;function Jse(e){var t=Qse(e),r=t%1;return t===t?r?t-r:t:0}var Zse=Jse,eie=_3,tie=Xi,rie=Zse,aie=Math.max;function nie(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var s=r==null?0:rie(r);return s<0&&(s=aie(a+s,0)),eie(e,tie(t),s)}var sie=nie,iie=Yse,oie=sie,lie=iie(oie),cie=lie;const uie=Qt(cie);var die=Z$(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),$w=T.createContext(void 0),Bw=T.createContext(void 0),NP=T.createContext(void 0),jP=T.createContext({}),SP=T.createContext(void 0),CP=T.createContext(0),kP=T.createContext(0),qk=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=die(i);return le.createElement($w.Provider,{value:a},le.createElement(Bw.Provider,{value:s},le.createElement(jP.Provider,{value:i},le.createElement(NP.Provider,{value:d},le.createElement(SP.Provider,{value:o},le.createElement(CP.Provider,{value:u},le.createElement(kP.Provider,{value:c},l)))))))},fie=function(){return T.useContext(SP)},OP=function(t){var r=T.useContext($w);r==null&&zo(!1);var a=r[t];return a==null&&zo(!1),a},mie=function(){var t=T.useContext($w);return hi(t)},hie=function(){var t=T.useContext(Bw),r=uie(t,function(a){return xP(a.domain,Number.isFinite)});return r||hi(t)},TP=function(t){var r=T.useContext(Bw);r==null&&zo(!1);var a=r[t];return a==null&&zo(!1),a},xie=function(){var t=T.useContext(NP);return t},pie=function(){return T.useContext(jP)},Uw=function(){return T.useContext(kP)},Ww=function(){return T.useContext(CP)};function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function gie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EP(a.key),a)}}function yie(e,t,r){return t&&Kk(e.prototype,t),r&&Kk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vie(e,t,r){return t=Eh(t),bie(e,_P()?Reflect.construct(t,r||[],Eh(e).constructor):t.apply(e,r))}function bie(e,t){if(t&&(Oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wie(e)}function wie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_P=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eh(e)}function Nie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rb(e,t)}function rb(e,t){return rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},rb(e,t)}function zk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zk(Object(r),!0).forEach(function(a){qw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qw(e,t,r){return t=EP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EP(e){var t=jie(e,"string");return Oc(t)=="symbol"?t:t+""}function jie(e,t){if(Oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Oc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sie(e,t){return Tie(e)||Oie(e,t)||kie(e,t)||Cie()}function Cie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kie(e,t){if(e){if(typeof e=="string")return Hk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hk(e,t)}}function Hk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Oie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Tie(e){if(Array.isArray(e))return e}function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ab.apply(this,arguments)}var _ie=function(t,r){var a;return le.isValidElement(t)?a=le.cloneElement(t,r):xt(t)?a=t(r):a=le.createElement("line",ab({},r,{className:"recharts-reference-line-line"})),a},Eie=function(t,r,a,s,i,o,l,c,u){var d=i.x,f=i.y,m=i.width,p=i.height;if(a){var g=u.y,h=t.y.apply(g,{position:o});if(ps(u,"discard")&&!t.y.isInRange(h))return null;var y=[{x:d+m,y:h},{x:d,y:h}];return c==="left"?y.reverse():y}if(r){var w=u.x,S=t.x.apply(w,{position:o});if(ps(u,"discard")&&!t.x.isInRange(S))return null;var v=[{x:S,y:f+p},{x:S,y:f}];return l==="top"?v.reverse():v}if(s){var x=u.segment,b=x.map(function(N){return t.apply(N,{position:o})});return ps(u,"discard")&&ese(b,function(N){return!t.isInRange(N)})?null:b}return null};function Aie(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=fie(),d=OP(s),f=TP(i),m=xie();if(!u||!m)return null;Rs(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Lw({x:d.scale,y:f.scale}),g=Kr(t),h=Kr(r),y=a&&a.length===2,w=Eie(p,g,h,y,m,e.position,d.orientation,f.orientation,e);if(!w)return null;var S=Sie(w,2),v=S[0],x=v.x,b=v.y,N=S[1],j=N.x,O=N.y,_=ps(e,"hidden")?"url(#".concat(u,")"):void 0,E=Vk(Vk({clipPath:_},Tt(e,!0)),{},{x1:x,y1:b,x2:j,y2:O});return le.createElement(Or,{className:It("recharts-reference-line",l)},_ie(o,E),ba.renderCallByParent(e,qse({x1:x,y1:b,x2:j,y2:O})))}var Kw=function(e){function t(){return gie(this,t),vie(this,t,arguments)}return Nie(t,e),yie(t,[{key:"render",value:function(){return le.createElement(Aie,this.props)}}])}(le.Component);qw(Kw,"displayName","ReferenceLine");qw(Kw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function nb(){return nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nb.apply(this,arguments)}function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function Gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Xk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(r),!0).forEach(function(a){rp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Pie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,PP(a.key),a)}}function Iie(e,t,r){return t&&Yk(e.prototype,t),r&&Yk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Die(e,t,r){return t=Ah(t),Mie(e,AP()?Reflect.construct(t,r||[],Ah(e).constructor):t.apply(e,r))}function Mie(e,t){if(t&&(Tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fie(e)}function Fie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AP=function(){return!!e})()}function Ah(e){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ah(e)}function Rie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sb(e,t)}function sb(e,t){return sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},sb(e,t)}function rp(e,t,r){return t=PP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PP(e){var t=Lie(e,"string");return Tc(t)=="symbol"?t:t+""}function Lie(e,t){if(Tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Tc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $ie=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=Lw({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return ps(t,"discard")&&!o.isInRange(l)?null:l},ap=function(e){function t(){return Pie(this,t),Die(this,t,arguments)}return Rie(t,e),Iie(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,u=Kr(s),d=Kr(i);if(Rs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=$ie(this.props);if(!f)return null;var m=f.x,p=f.y,g=this.props,h=g.shape,y=g.className,w=ps(this.props,"hidden")?"url(#".concat(c,")"):void 0,S=Xk(Xk({clipPath:w},Tt(this.props,!0)),{},{cx:m,cy:p});return le.createElement(Or,{className:It("recharts-reference-dot",y)},t.renderDot(h,S),ba.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])}(le.Component);rp(ap,"displayName","ReferenceDot");rp(ap,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});rp(ap,"renderDot",function(e,t){var r;return le.isValidElement(e)?r=le.cloneElement(e,t):xt(e)?r=e(t):r=le.createElement(Rw,nb({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ib.apply(this,arguments)}function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}function Qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Jk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qk(Object(r),!0).forEach(function(a){np(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Bie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,DP(a.key),a)}}function Uie(e,t,r){return t&&Zk(e.prototype,t),r&&Zk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wie(e,t,r){return t=Ph(t),qie(e,IP()?Reflect.construct(t,r||[],Ph(e).constructor):t.apply(e,r))}function qie(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kie(e)}function Kie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IP=function(){return!!e})()}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ph(e)}function zie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ob(e,t)}function ob(e,t){return ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ob(e,t)}function np(e,t,r){return t=DP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DP(e){var t=Vie(e,"string");return _c(t)=="symbol"?t:t+""}function Vie(e,t){if(_c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(_c(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hie=function(t,r,a,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var m=Lw({x:d.scale,y:f.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:a?m.y.apply(c,{position:"start"}):m.y.rangeMin},g={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return ps(i,"discard")&&(!m.isInRange(p)||!m.isInRange(g))?null:bP(p,g)},sp=function(e){function t(){return Bie(this,t),Wie(this,t,arguments)}return zie(t,e),Uie(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,u=a.alwaysShow,d=a.clipPathId;Rs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Kr(s),m=Kr(i),p=Kr(o),g=Kr(l),h=this.props.shape;if(!f&&!m&&!p&&!g&&!h)return null;var y=Hie(f,m,p,g,this.props);if(!y&&!h)return null;var w=ps(this.props,"hidden")?"url(#".concat(d,")"):void 0;return le.createElement(Or,{className:It("recharts-reference-area",c)},t.renderRect(h,Jk(Jk({clipPath:w},Tt(this.props,!0)),y)),ba.renderCallByParent(this.props,y))}}])}(le.Component);np(sp,"displayName","ReferenceArea");np(sp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});np(sp,"renderRect",function(e,t){var r;return le.isValidElement(e)?r=le.cloneElement(e,t):xt(e)?r=e(t):r=le.createElement(Fw,ib({},t,{className:"recharts-reference-area-rect"})),r});function MP(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)if(r===void 0||r(e[s])===!0)a.push(e[s]);else return;return a}function Gie(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return zse(a,r)}function Xie(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function Ih(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function Yie(e,t){return MP(e,t+1)}function Qie(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=a==null?void 0:a[c];if(g===void 0)return{v:MP(a,u)};var h=c,y,w=function(){return y===void 0&&(y=r(g,h)),y},S=g.coordinate,v=c===0||Ih(e,S,w,d,l);v||(c=0,d=o,u+=1),v&&(d=S+e*(w()/2+s),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(a){Jie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jie(e,t,r){return t=Zie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zie(e){var t=eoe(e,"string");return of(t)=="symbol"?t:t+""}function eoe(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(of(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function toe(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var p=i[m],g,h=function(){return g===void 0&&(g=r(p,m)),g};if(m===o-1){var y=e*(p.coordinate+e*h()/2-c);i[m]=p=pa(pa({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else i[m]=p=pa(pa({},p),{},{tickCoord:p.coordinate});var w=Ih(e,p.tickCoord,h,l,c);w&&(c=p.tickCoord-e*(h()/2+s),i[m]=pa(pa({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function roe(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=a[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=pa(pa({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=Ih(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+s),o[l-1]=pa(pa({},d),{},{isShow:!0}))}for(var g=i?l-1:l,h=function(S){var v=o[S],x,b=function(){return x===void 0&&(x=r(v,S)),x};if(S===0){var N=e*(v.coordinate-e*b()/2-c);o[S]=v=pa(pa({},v),{},{tickCoord:N<0?v.coordinate-N*e:v.coordinate})}else o[S]=v=pa(pa({},v),{},{tickCoord:v.coordinate});var j=Ih(e,v.tickCoord,b,c,u);j&&(c=v.tickCoord+e*(b()/2+s),o[S]=pa(pa({},v),{},{isShow:!0}))},y=0;y<g;y++)h(y);return o}function zw(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(Be(c)||Ls.isSsr)return Yie(s,typeof c=="number"&&Be(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",g=d&&p==="width"?Hu(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},h=function(v,x){var b=xt(u)?u(v.value,x):v.value;return p==="width"?Gie(Hu(b,{fontSize:t,letterSpacing:r}),g,f):Hu(b,{fontSize:t,letterSpacing:r})[p]},y=s.length>=2?Qn(s[1].coordinate-s[0].coordinate):1,w=Xie(i,y,p);return c==="equidistantPreserveStart"?Qie(y,w,h,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=roe(y,w,h,s,o,c==="preserveStartEnd"):m=toe(y,w,h,s,o),m.filter(function(S){return S.isShow}))}var aoe=["viewBox"],noe=["viewBox"],soe=["ticks"];function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}function $l(){return $l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$l.apply(this,arguments)}function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tO(Object(r),!0).forEach(function(a){Vw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cg(e,t){if(e==null)return{};var r=ioe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ioe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ooe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RP(a.key),a)}}function loe(e,t,r){return t&&rO(e.prototype,t),r&&rO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function coe(e,t,r){return t=Dh(t),uoe(e,FP()?Reflect.construct(t,r||[],Dh(e).constructor):t.apply(e,r))}function uoe(e,t){if(t&&(Ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return doe(e)}function doe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FP=function(){return!!e})()}function Dh(e){return Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dh(e)}function foe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lb(e,t)}function lb(e,t){return lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lb(e,t)}function Vw(e,t,r){return t=RP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RP(e){var t=moe(e,"string");return Ec(t)=="symbol"?t:t+""}function moe(e,t){if(Ec(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ec(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eu=function(e){function t(r){var a;return ooe(this,t),a=coe(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return foe(t,e),loe(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=Cg(a,aoe),l=this.props,c=l.viewBox,u=Cg(l,noe);return!Xl(i,c)||!Xl(o,u)||!Xl(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,f=s.mirror,m=s.tickMargin,p,g,h,y,w,S,v=f?-1:1,x=a.tickSize||d,b=Be(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":p=g=a.coordinate,y=o+ +!f*c,h=y-v*x,S=h-v*m,w=b;break;case"left":h=y=a.coordinate,g=i+ +!f*l,p=g-v*x,w=p-v*m,S=b;break;case"right":h=y=a.coordinate,g=i+ +f*l,p=g+v*x,w=p+v*m,S=b;break;default:p=g=a.coordinate,y=o+ +f*c,h=y+v*x,S=h+v*m,w=b;break}return{line:{x1:p,y1:h,x2:g,y2:y},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,u=a.mirror,d=a.axisLine,f=$r($r($r({},Tt(this.props,!1)),Tt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);f=$r($r({},f),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=$r($r({},f),{},{x1:s+p*o,y1:i,x2:s+p*o,y2:i+l})}return le.createElement("line",$l({},f,{className:It("recharts-cartesian-axis-line",An(d,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,m=l.unit,p=zw($r($r({},this.props),{},{ticks:a}),s,i),g=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),y=Tt(this.props,!1),w=Tt(d,!1),S=$r($r({},y),{},{fill:"none"},Tt(c,!1)),v=p.map(function(x,b){var N=o.getTickLineCoord(x),j=N.line,O=N.tick,_=$r($r($r($r({textAnchor:g,verticalAnchor:h},y),{},{stroke:"none",fill:u},w),O),{},{index:b,payload:x,visibleTicksCount:p.length,tickFormatter:f});return le.createElement(Or,$l({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},Wm(o.props,x,b)),c&&le.createElement("line",$l({},S,j,{className:It("recharts-cartesian-axis-tick-line",An(c,"className"))})),d&&t.renderTickItem(d,_,"".concat(xt(f)?f(x.value,b):x.value).concat(m||"")))});return le.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var f=this.props,m=f.ticks,p=Cg(f,soe),g=m;return xt(c)&&(g=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!g||!g.length?null:le.createElement(Or,{className:It("recharts-cartesian-axis",u),ref:function(y){a.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),ba.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=It(s.className,"recharts-cartesian-axis-tick-value");return le.isValidElement(a)?o=le.cloneElement(a,$r($r({},s),{},{className:l})):xt(a)?o=a($r($r({},s),{},{className:l})):o=le.createElement(rh,$l({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(T.Component);Vw(eu,"displayName","CartesianAxis");Vw(eu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var hoe=["x1","y1","x2","y2","key"],xoe=["offset"];function Vo(e){"@babel/helpers - typeof";return Vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vo(e)}function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(a){poe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function poe(e,t,r){return t=goe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function goe(e){var t=yoe(e,"string");return Vo(t)=="symbol"?t:t+""}function yoe(e,t){if(Vo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Vo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function So(){return So=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},So.apply(this,arguments)}function nO(e,t){if(e==null)return{};var r=voe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function voe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var boe=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return le.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function LP(e,t){var r;if(le.isValidElement(e))r=le.cloneElement(e,t);else if(xt(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=nO(t,hoe),u=Tt(c,!1);u.offset;var d=nO(u,xoe);r=le.createElement("line",So({},d,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function woe(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=wa(wa({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return LP(s,u)});return le.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Noe(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=wa(wa({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return LP(s,u)});return le.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function joe(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,p){return m-p});s!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var g=!d[p+1],h=g?s+o-m:d[p+1]-m;if(h<=0)return null;var y=p%t.length;return le.createElement("rect",{key:"react-".concat(p),y:m,x:a,height:h,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Soe(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var g=!d[p+1],h=g?i+l-m:d[p+1]-m;if(h<=0)return null;var y=p%a.length;return le.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:h,height:c,stroke:"none",fill:a[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Coe=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return GA(zw(wa(wa(wa({},eu.defaultProps),a),{},{ticks:Ps(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},koe=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return GA(zw(wa(wa(wa({},eu.defaultProps),a),{},{ticks:Ps(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},gl={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function sm(e){var t,r,a,s,i,o,l=Uw(),c=Ww(),u=pie(),d=wa(wa({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:gl.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:gl.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:gl.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:gl.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:gl.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:gl.verticalFill,x:Be(e.x)?e.x:u.left,y:Be(e.y)?e.y:u.top,width:Be(e.width)?e.width:u.width,height:Be(e.height)?e.height:u.height}),f=d.x,m=d.y,p=d.width,g=d.height,h=d.syncWithTicks,y=d.horizontalValues,w=d.verticalValues,S=mie(),v=hie();if(!Be(p)||p<=0||!Be(g)||g<=0||!Be(f)||f!==+f||!Be(m)||m!==+m)return null;var x=d.verticalCoordinatesGenerator||Coe,b=d.horizontalCoordinatesGenerator||koe,N=d.horizontalPoints,j=d.verticalPoints;if((!N||!N.length)&&xt(b)){var O=y&&y.length,_=b({yAxis:v?wa(wa({},v),{},{ticks:O?y:v.ticks}):void 0,width:l,height:c,offset:u},O?!0:h);Rs(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Vo(_),"]")),Array.isArray(_)&&(N=_)}if((!j||!j.length)&&xt(x)){var E=w&&w.length,k=x({xAxis:S?wa(wa({},S),{},{ticks:E?w:S.ticks}):void 0,width:l,height:c,offset:u},E?!0:h);Rs(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Vo(k),"]")),Array.isArray(k)&&(j=k)}return le.createElement("g",{className:"recharts-cartesian-grid"},le.createElement(boe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),le.createElement(woe,So({},d,{offset:u,horizontalPoints:N,xAxis:S,yAxis:v})),le.createElement(Noe,So({},d,{offset:u,verticalPoints:j,xAxis:S,yAxis:v})),le.createElement(joe,So({},d,{horizontalPoints:N})),le.createElement(Soe,So({},d,{verticalPoints:j})))}sm.displayName="CartesianGrid";var Ooe=["type","layout","connectNulls","ref"],Toe=["key"];function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function sO(e,t){if(e==null)return{};var r=_oe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function _oe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qu.apply(this,arguments)}function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(a){Vn(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yl(e){return Ioe(e)||Poe(e)||Aoe(e)||Eoe()}function Eoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aoe(e,t){if(e){if(typeof e=="string")return cb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cb(e,t)}}function Poe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ioe(e){if(Array.isArray(e))return cb(e)}function cb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Doe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BP(a.key),a)}}function Moe(e,t,r){return t&&oO(e.prototype,t),r&&oO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Foe(e,t,r){return t=Mh(t),Roe(e,$P()?Reflect.construct(t,r||[],Mh(e).constructor):t.apply(e,r))}function Roe(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Loe(e)}function Loe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($P=function(){return!!e})()}function Mh(e){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mh(e)}function $oe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ub(e,t)}function ub(e,t){return ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ub(e,t)}function Vn(e,t,r){return t=BP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BP(e){var t=Boe(e,"string");return Ac(t)=="symbol"?t:t+""}function Boe(e,t){if(Ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ac(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _o=function(e){function t(){var r;Doe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Foe(this,t,[].concat(s)),Vn(r,"state",{isAnimationFinished:!0,totalLength:0}),Vn(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Vn(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(w,S){return w+S});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,m=l-o,p=[],g=0,h=0;g<c.length;h+=c[g],++g)if(h+c[g]>f){p=[].concat(yl(c.slice(0,g)),[f-h]);break}var y=p.length%2===0?[0,m]:[m];return[].concat(yl(t.repeat(c,d)),yl(p),y).map(function(w){return"".concat(w,"px")}).join(", ")}),Vn(r,"id",Ff("recharts-line-")),Vn(r,"pathRef",function(o){r.mainCurve=o}),Vn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Vn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return $oe(t,e),Moe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Pn(d,Wf);if(!f)return null;var m=function(h,y){return{x:h.x,y:h.y,value:h.value,errorVal:cn(h.payload,y)}},p={clipPath:a?"url(#clipPath-".concat(s,")"):null};return le.createElement(Or,p,f.map(function(g){return le.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Tt(this.props,!1),m=Tt(c,!0),p=u.map(function(h,y){var w=Xa(Xa(Xa({key:"dot-".concat(y),r:3},f),m),{},{index:y,cx:h.x,cy:h.y,value:h.value,dataKey:d,payload:h.payload,points:u});return t.renderDotItem(c,w)}),g={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return le.createElement(Or,Qu({className:"recharts-line-dots",key:"dots"},g),p)}},{key:"renderCurveStatically",value:function(a,s,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=sO(l,Ooe),m=Xa(Xa(Xa({},Tt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},o),{},{type:c,layout:u,connectNulls:d});return le.createElement(Uv,Qu({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,m=o.animationEasing,p=o.animationId,g=o.animateNewValues,h=o.width,y=o.height,w=this.state,S=w.prevPoints,v=w.totalLength;return le.createElement(jc,{begin:d,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t;if(S){var N=S.length/l.length,j=l.map(function(C,A){var P=Math.floor(A*N);if(S[P]){var I=S[P],F=Gn(I.x,C.x),q=Gn(I.y,C.y);return Xa(Xa({},C),{},{x:F(b),y:q(b)})}if(g){var H=Gn(h*2,C.x),V=Gn(y/2,C.y);return Xa(Xa({},C),{},{x:H(b),y:V(b)})}return Xa(Xa({},C),{},{x:C.x,y:C.y})});return i.renderCurveStatically(j,a,s)}var O=Gn(0,v),_=O(b),E;if(c){var k="".concat(c).split(/[,\s]+/gim).map(function(C){return parseFloat(C)});E=i.getStrokeDasharray(_,v,k)}else E=i.generateSimpleStrokeDasharray(v,_);return i.renderCurveStatically(l,a,s,{strokeDasharray:E})})}},{key:"renderCurve",value:function(a,s){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Xx(u,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.xAxis,d=s.yAxis,f=s.top,m=s.left,p=s.width,g=s.height,h=s.isAnimationActive,y=s.id;if(i||!l||!l.length)return null;var w=this.state.isAnimationFinished,S=l.length===1,v=It("recharts-line",c),x=u&&u.allowDataOverflow,b=d&&d.allowDataOverflow,N=x||b,j=bt(y)?this.id:y,O=(a=Tt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},_=O.r,E=_===void 0?3:_,k=O.strokeWidth,C=k===void 0?2:k,A=oB(o)?o:{},P=A.clipDot,I=P===void 0?!0:P,F=E*2+C;return le.createElement(Or,{className:v},x||b?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(j)},le.createElement("rect",{x:x?m:m-p/2,y:b?f:f-g/2,width:x?p:p*2,height:b?g:g*2})),!I&&le.createElement("clipPath",{id:"clipPath-dots-".concat(j)},le.createElement("rect",{x:m-F/2,y:f-F/2,width:p+F,height:g+F}))):null,!S&&this.renderCurve(N,j),this.renderErrorBar(N,j),(S||o)&&this.renderDots(N,I,j),(!h||w)&&Ii.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(yl(a),[0]):a,o=[],l=0;l<s;++l)o=[].concat(yl(o),yl(i));return o}},{key:"renderDotItem",value:function(a,s){var i;if(le.isValidElement(a))i=le.cloneElement(a,s);else if(xt(a))i=a(s);else{var o=s.key,l=sO(s,Toe),c=It("recharts-line-dot",typeof a!="boolean"?a.className:"");i=le.createElement(Rw,Qu({key:o},l,{className:c}))}return i}}])}(T.PureComponent);Vn(_o,"displayName","Line");Vn(_o,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ls.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Vn(_o,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(m,p){var g=cn(m,o);return d==="horizontal"?{x:RC({axis:r,ticks:s,bandSize:l,entry:m,index:p}),y:bt(g)?null:a.scale(g),value:g,payload:m}:{x:bt(g)?null:r.scale(g),y:RC({axis:a,ticks:i,bandSize:l,entry:m,index:p}),value:g,payload:m}});return Xa({points:f,layout:d},u)});function Pc(e){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(e)}function Uoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qP(a.key),a)}}function Woe(e,t,r){return t&&lO(e.prototype,t),r&&lO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qoe(e,t,r){return t=Fh(t),Koe(e,UP()?Reflect.construct(t,r||[],Fh(e).constructor):t.apply(e,r))}function Koe(e,t){if(t&&(Pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zoe(e)}function zoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UP=function(){return!!e})()}function Fh(e){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fh(e)}function Voe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&db(e,t)}function db(e,t){return db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},db(e,t)}function WP(e,t,r){return t=qP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(e){var t=Hoe(e,"string");return Pc(t)=="symbol"?t:t+""}function Hoe(e,t){if(Pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Pc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fb.apply(this,arguments)}function Goe(e){var t=e.xAxisId,r=Uw(),a=Ww(),s=OP(t);return s==null?null:T.createElement(eu,fb({},s,{className:It("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return Ps(o,!0)}}))}var Zl=function(e){function t(){return Uoe(this,t),qoe(this,t,arguments)}return Voe(t,e),Woe(t,[{key:"render",value:function(){return T.createElement(Goe,this.props)}}])}(T.Component);WP(Zl,"displayName","XAxis");WP(Zl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ic(e){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function Xoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,VP(a.key),a)}}function Yoe(e,t,r){return t&&cO(e.prototype,t),r&&cO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qoe(e,t,r){return t=Rh(t),Joe(e,KP()?Reflect.construct(t,r||[],Rh(e).constructor):t.apply(e,r))}function Joe(e,t){if(t&&(Ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zoe(e)}function Zoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KP=function(){return!!e})()}function Rh(e){return Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rh(e)}function ele(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mb(e,t)}function mb(e,t){return mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},mb(e,t)}function zP(e,t,r){return t=VP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VP(e){var t=tle(e,"string");return Ic(t)=="symbol"?t:t+""}function tle(e,t){if(Ic(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ic(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hb.apply(this,arguments)}var rle=function(t){var r=t.yAxisId,a=Uw(),s=Ww(),i=TP(r);return i==null?null:T.createElement(eu,hb({},i,{className:It("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return Ps(l,!0)}}))},ec=function(e){function t(){return Xoe(this,t),Qoe(this,t,arguments)}return ele(t,e),Yoe(t,[{key:"render",value:function(){return T.createElement(rle,this.props)}}])}(T.Component);zP(ec,"displayName","YAxis");zP(ec,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function uO(e){return ile(e)||sle(e)||nle(e)||ale()}function ale(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nle(e,t){if(e){if(typeof e=="string")return xb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xb(e,t)}}function sle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ile(e){if(Array.isArray(e))return xb(e)}function xb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var pb=function(t,r,a,s,i){var o=Pn(t,Kw),l=Pn(t,ap),c=[].concat(uO(o),uO(l)),u=Pn(t,sp),d="".concat(s,"Id"),f=s[0],m=r;if(c.length&&(m=c.reduce(function(h,y){if(y.props[d]===a&&ps(y.props,"extendDomain")&&Be(y.props[f])){var w=y.props[f];return[Math.min(h[0],w),Math.max(h[1],w)]}return h},m)),u.length){var p="".concat(f,"1"),g="".concat(f,"2");m=u.reduce(function(h,y){if(y.props[d]===a&&ps(y.props,"extendDomain")&&Be(y.props[p])&&Be(y.props[g])){var w=y.props[p],S=y.props[g];return[Math.min(h[0],w,S),Math.max(h[1],w,S)]}return h},m)}return i&&i.length&&(m=i.reduce(function(h,y){return Be(y)?[Math.min(h[0],y),Math.max(h[1],y)]:h},m)),m},HP={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,f||c,m),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,g=new Array(p);m<p;m++)g[m]=f[m].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,p,g){var h=r?r+u:u;if(!this._events[h])return!1;var y=this._events[h],w=arguments.length,S,v;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,m),!0;case 5:return y.fn.call(y.context,d,f,m,p),!0;case 6:return y.fn.call(y.context,d,f,m,p,g),!0}for(v=1,S=new Array(w-1);v<w;v++)S[v-1]=arguments[v];y.fn.apply(y.context,S)}else{var x=y.length,b;for(v=0;v<x;v++)switch(y[v].once&&this.removeListener(u,y[v].fn,void 0,!0),w){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,d);break;case 3:y[v].fn.call(y[v].context,d,f);break;case 4:y[v].fn.call(y[v].context,d,f,m);break;default:if(!S)for(b=1,S=new Array(w-1);b<w;b++)S[b-1]=arguments[b];y[v].fn.apply(y[v].context,S)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!m||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var h=0,y=[],w=g.length;h<w;h++)(g[h].fn!==d||m&&!g[h].once||f&&g[h].context!==f)&&y.push(g[h]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(HP);var ole=HP.exports;const lle=Qt(ole);var kg=new lle,Og="recharts.syncMouseEvents";function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function cle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GP(a.key),a)}}function ule(e,t,r){return t&&dO(e.prototype,t),r&&dO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tg(e,t,r){return t=GP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GP(e){var t=dle(e,"string");return lf(t)=="symbol"?t:t+""}function dle(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(lf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fle=function(){function e(){cle(this,e),Tg(this,"activeIndex",0),Tg(this,"coordinateList",[]),Tg(this,"layout","horizontal")}return ule(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((a=window)===null||a===void 0?void 0:a.scrollY)||0,f=i+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function mle(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&Be(a)&&Be(s))return!0}return!1}function hle(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function XP(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=ua(t,r,a,s),l=ua(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function xle(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,m=ua(l,c,u,f),p=ua(l,c,d,f);a=m.x,s=m.y,i=p.x,o=p.y}else return XP(t);return[{x:a,y:s},{x:i,y:o}]}function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function M0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(a){ple(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ple(e,t,r){return t=gle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gle(e){var t=yle(e,"string");return cf(t)=="symbol"?t:t+""}function yle(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(cf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vle(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!p||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var g,h=Uv;if(m==="ScatterChart")g=o,h=Sae;else if(m==="BarChart")g=hle(f,o,c,d),h=Fw;else if(f==="radial"){var y=XP(o),w=y.cx,S=y.cy,v=y.radius,x=y.startAngle,b=y.endAngle;g={cx:w,cy:S,startAngle:x,endAngle:b,innerRadius:v,outerRadius:v},h=ZA}else g={points:xle(f,o,c)},h=Uv;var N=M0(M0(M0(M0({stroke:"#ccc",pointerEvents:"none"},c),g),Tt(p,!1)),{},{payload:l,payloadIndex:u,className:It("recharts-tooltip-cursor",p.className)});return T.isValidElement(p)?T.cloneElement(p,N):T.createElement(h,N)}var ble=["item"],wle=["children","className","width","height","style","compact","title","desc"];function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function Bl(){return Bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bl.apply(this,arguments)}function mO(e,t){return Sle(e)||jle(e,t)||QP(e,t)||Nle()}function Nle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jle(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Sle(e){if(Array.isArray(e))return e}function hO(e,t){if(e==null)return{};var r=Cle(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Cle(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function kle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,JP(a.key),a)}}function Ole(e,t,r){return t&&xO(e.prototype,t),r&&xO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tle(e,t,r){return t=Lh(t),_le(e,YP()?Reflect.construct(t,r||[],Lh(e).constructor):t.apply(e,r))}function _le(e,t){if(t&&(Dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ele(e)}function Ele(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YP=function(){return!!e})()}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lh(e)}function Ale(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gb(e,t)}function gb(e,t){return gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},gb(e,t)}function Mc(e){return Dle(e)||Ile(e)||QP(e)||Ple()}function Ple(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QP(e,t){if(e){if(typeof e=="string")return yb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yb(e,t)}}function Ile(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dle(e){if(Array.isArray(e))return yb(e)}function yb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pO(Object(r),!0).forEach(function(a){it(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function it(e,t,r){return t=JP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JP(e){var t=Mle(e,"string");return Dc(t)=="symbol"?t:t+""}function Mle(e,t){if(Dc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Dc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fle={xAxis:["bottom","top"],yAxis:["left","right"]},Rle={width:"100%",height:"100%"},ZP={x:0,y:0};function F0(e){return e}var Lle=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},$le=function(t,r,a,s){var i=r.find(function(d){return d&&d.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Ce(Ce(Ce({},s),ua(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return Ce(Ce(Ce({},s),ua(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return ZP},ip=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Mc(l),Mc(u)):l},[]);return o.length>0?o:t&&t.length&&Be(s)&&Be(i)?t.slice(s,i+1):[]};function e6(e){return e==="number"?[0,"auto"]:void 0}var vb=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=ip(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;m=Bm(p,o.dataKey,s)}else m=f&&f[a]||l[a];return m?[].concat(Mc(c),[YA(u,m)]):c},[])},gO=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=Lle(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=oee(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,m=vb(t,r,d,f),p=$le(a,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:m,activeCoordinate:p}}return null},Ble=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=t.stackOffset,p=HA(d,i);return a.reduce(function(g,h){var y,w=h.type.defaultProps!==void 0?Ce(Ce({},h.type.defaultProps),h.props):h.props,S=w.type,v=w.dataKey,x=w.allowDataOverflow,b=w.allowDuplicatedCategory,N=w.scale,j=w.ticks,O=w.includeHidden,_=w[o];if(g[_])return g;var E=ip(t.data,{graphicalItems:s.filter(function(U){var J,Q=o in U.props?U.props[o]:(J=U.type.defaultProps)===null||J===void 0?void 0:J[o];return Q===_}),dataStartIndex:c,dataEndIndex:u}),k=E.length,C,A,P;mle(w.domain,x,S)&&(C=Fv(w.domain,null,x),p&&(S==="number"||N!=="auto")&&(P=Xu(E,v,"category")));var I=e6(S);if(!C||C.length===0){var F,q=(F=w.domain)!==null&&F!==void 0?F:I;if(v){if(C=Xu(E,v,S),S==="category"&&p){var H=Q7(C);b&&H?(A=C,C=Ch(0,k)):b||(C=UC(q,C,h).reduce(function(U,J){return U.indexOf(J)>=0?U:[].concat(Mc(U),[J])},[]))}else if(S==="category")b?C=C.filter(function(U){return U!==""&&!bt(U)}):C=UC(q,C,h).reduce(function(U,J){return U.indexOf(J)>=0||J===""||bt(J)?U:[].concat(Mc(U),[J])},[]);else if(S==="number"){var V=fee(E,s.filter(function(U){var J,Q,X=o in U.props?U.props[o]:(J=U.type.defaultProps)===null||J===void 0?void 0:J[o],ee="hide"in U.props?U.props.hide:(Q=U.type.defaultProps)===null||Q===void 0?void 0:Q.hide;return X===_&&(O||!ee)}),v,i,d);V&&(C=V)}p&&(S==="number"||N!=="auto")&&(P=Xu(E,v,"category"))}else p?C=Ch(0,k):l&&l[_]&&l[_].hasStack&&S==="number"?C=m==="expand"?[0,1]:XA(l[_].stackGroups,c,u):C=VA(E,s.filter(function(U){var J=o in U.props?U.props[o]:U.type.defaultProps[o],Q="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return J===_&&(O||!Q)}),S,d,!0);if(S==="number")C=pb(f,C,_,i,j),q&&(C=Fv(q,C,x));else if(S==="category"&&q){var re=q,oe=C.every(function(U){return re.indexOf(U)>=0});oe&&(C=re)}}return Ce(Ce({},g),{},it({},_,Ce(Ce({},w),{},{axisType:i,domain:C,categoricalDomain:P,duplicateDomain:A,originalDomain:(y=w.domain)!==null&&y!==void 0?y:I,isCategorical:p,layout:d})))},{})},Ule=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=ip(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:u}),p=m.length,g=HA(d,i),h=-1;return a.reduce(function(y,w){var S=w.type.defaultProps!==void 0?Ce(Ce({},w.type.defaultProps),w.props):w.props,v=S[o],x=e6("number");if(!y[v]){h++;var b;return g?b=Ch(0,p):l&&l[v]&&l[v].hasStack?(b=XA(l[v].stackGroups,c,u),b=pb(f,b,v,i)):(b=Fv(x,VA(m,a.filter(function(N){var j,O,_=o in N.props?N.props[o]:(j=N.type.defaultProps)===null||j===void 0?void 0:j[o],E="hide"in N.props?N.props.hide:(O=N.type.defaultProps)===null||O===void 0?void 0:O.hide;return _===v&&!E}),"number",d),s.defaultProps.allowDataOverflow),b=pb(f,b,v,i)),Ce(Ce({},y),{},it({},v,Ce(Ce({axisType:i},s.defaultProps),{},{hide:!0,orientation:An(Fle,"".concat(i,".").concat(h%2),null),domain:b,originalDomain:x,isCategorical:g,layout:d})))}return y},{})},Wle=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(s,"Id"),m=Pn(d,i),p={};return m&&m.length?p=Ble(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=Ule(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},qle=function(t){var r=hi(t),a=Ps(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:cw(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:ph(r,a)}},yO=function(t){var r=t.children,a=t.defaultShowTooltip,s=Ja(r,Cc),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},Kle=function(t){return!t||!t.length?!1:t.some(function(r){var a=Fs(r&&r.type);return a&&a.indexOf("Bar")>=0})},vO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},zle=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=a.width,d=a.height,f=a.children,m=a.margin||{},p=Ja(f,Cc),g=Ja(f,Yl),h=Object.keys(c).reduce(function(b,N){var j=c[N],O=j.orientation;return!j.mirror&&!j.hide?Ce(Ce({},b),{},it({},O,b[O]+j.width)):b},{left:m.left||0,right:m.right||0}),y=Object.keys(o).reduce(function(b,N){var j=o[N],O=j.orientation;return!j.mirror&&!j.hide?Ce(Ce({},b),{},it({},O,An(b,"".concat(O))+j.height)):b},{top:m.top||0,bottom:m.bottom||0}),w=Ce(Ce({},y),h),S=w.bottom;p&&(w.bottom+=p.props.height||Cc.defaultProps.height),g&&r&&(w=uee(w,s,a,r));var v=u-w.left-w.right,x=d-w.top-w.bottom;return Ce(Ce({brushBottom:S},w),{},{width:Math.max(v,0),height:Math.max(x,0)})},Vle=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Hle=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,m=function(w,S){var v=S.graphicalItems,x=S.stackGroups,b=S.offset,N=S.updateId,j=S.dataStartIndex,O=S.dataEndIndex,_=w.barSize,E=w.layout,k=w.barGap,C=w.barCategoryGap,A=w.maxBarSize,P=vO(E),I=P.numericAxisName,F=P.cateAxisName,q=Kle(v),H=[];return v.forEach(function(V,re){var oe=ip(w.data,{graphicalItems:[V],dataStartIndex:j,dataEndIndex:O}),U=V.type.defaultProps!==void 0?Ce(Ce({},V.type.defaultProps),V.props):V.props,J=U.dataKey,Q=U.maxBarSize,X=U["".concat(I,"Id")],ee=U["".concat(F,"Id")],ue={},we=c.reduce(function(Xe,dt){var He=S["".concat(dt.axisType,"Map")],kt=U["".concat(dt.axisType,"Id")];He&&He[kt]||dt.axisType==="zAxis"||zo(!1);var vt=He[kt];return Ce(Ce({},Xe),{},it(it({},dt.axisType,vt),"".concat(dt.axisType,"Ticks"),Ps(vt)))},ue),ne=we[F],ie=we["".concat(F,"Ticks")],Ne=x&&x[X]&&x[X].hasStack&&See(V,x[X].stackGroups),W=Fs(V.type).indexOf("Bar")>=0,Ee=ph(ne,ie),B=[],ve=q&&lee({barSize:_,stackGroups:x,totalSize:Vle(we,F)});if(W){var ye,fe,et=bt(Q)?A:Q,Ke=(ye=(fe=ph(ne,ie,!0))!==null&&fe!==void 0?fe:et)!==null&&ye!==void 0?ye:0;B=cee({barGap:k,barCategoryGap:C,bandSize:Ke!==Ee?Ke:Ee,sizeList:ve[ee],maxBarSize:et}),Ke!==Ee&&(B=B.map(function(Xe){return Ce(Ce({},Xe),{},{position:Ce(Ce({},Xe.position),{},{offset:Xe.position.offset-Ke/2})})}))}var gt=V&&V.type&&V.type.getComposedData;gt&&H.push({props:Ce(Ce({},gt(Ce(Ce({},we),{},{displayedData:oe,props:w,dataKey:J,item:V,bandSize:Ee,barPosition:B,offset:b,stackedData:Ne,layout:E,dataStartIndex:j,dataEndIndex:O}))),{},it(it(it({key:V.key||"item-".concat(re)},I,we[I]),F,we[F]),"animationId",N)),childIndex:uB(V,w.children),item:V})}),H},p=function(w,S){var v=w.props,x=w.dataStartIndex,b=w.dataEndIndex,N=w.updateId;if(!E2({props:v}))return null;var j=v.children,O=v.layout,_=v.stackOffset,E=v.data,k=v.reverseStackOrder,C=vO(O),A=C.numericAxisName,P=C.cateAxisName,I=Pn(j,a),F=wee(E,I,"".concat(A,"Id"),"".concat(P,"Id"),_,k),q=c.reduce(function(U,J){var Q="".concat(J.axisType,"Map");return Ce(Ce({},U),{},it({},Q,Wle(v,Ce(Ce({},J),{},{graphicalItems:I,stackGroups:J.axisType===A&&F,dataStartIndex:x,dataEndIndex:b}))))},{}),H=zle(Ce(Ce({},q),{},{props:v,graphicalItems:I}),S==null?void 0:S.legendBBox);Object.keys(q).forEach(function(U){q[U]=d(v,q[U],H,U.replace("Map",""),r)});var V=q["".concat(P,"Map")],re=qle(V),oe=m(v,Ce(Ce({},q),{},{dataStartIndex:x,dataEndIndex:b,updateId:N,graphicalItems:I,stackGroups:F,offset:H}));return Ce(Ce({formattedGraphicalItems:oe,graphicalItems:I,offset:H,stackGroups:F},re),q)},g=function(y){function w(S){var v,x,b;return kle(this,w),b=Tle(this,w,[S]),it(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),it(b,"accessibilityManager",new fle),it(b,"handleLegendBBoxUpdate",function(N){if(N){var j=b.state,O=j.dataStartIndex,_=j.dataEndIndex,E=j.updateId;b.setState(Ce({legendBBox:N},p({props:b.props,dataStartIndex:O,dataEndIndex:_,updateId:E},Ce(Ce({},b.state),{},{legendBBox:N}))))}}),it(b,"handleReceiveSyncEvent",function(N,j,O){if(b.props.syncId===N){if(O===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(j)}}),it(b,"handleBrushChange",function(N){var j=N.startIndex,O=N.endIndex;if(j!==b.state.dataStartIndex||O!==b.state.dataEndIndex){var _=b.state.updateId;b.setState(function(){return Ce({dataStartIndex:j,dataEndIndex:O},p({props:b.props,dataStartIndex:j,dataEndIndex:O,updateId:_},b.state))}),b.triggerSyncEvent({dataStartIndex:j,dataEndIndex:O})}}),it(b,"handleMouseEnter",function(N){var j=b.getMouseInfo(N);if(j){var O=Ce(Ce({},j),{},{isTooltipActive:!0});b.setState(O),b.triggerSyncEvent(O);var _=b.props.onMouseEnter;xt(_)&&_(O,N)}}),it(b,"triggeredAfterMouseMove",function(N){var j=b.getMouseInfo(N),O=j?Ce(Ce({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(O),b.triggerSyncEvent(O);var _=b.props.onMouseMove;xt(_)&&_(O,N)}),it(b,"handleItemMouseEnter",function(N){b.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),it(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),it(b,"handleMouseMove",function(N){N.persist(),b.throttleTriggeredAfterMouseMove(N)}),it(b,"handleMouseLeave",function(N){b.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};b.setState(j),b.triggerSyncEvent(j);var O=b.props.onMouseLeave;xt(O)&&O(j,N)}),it(b,"handleOuterEvent",function(N){var j=cB(N),O=An(b.props,"".concat(j));if(j&&xt(O)){var _,E;/.*touch.*/i.test(j)?E=b.getMouseInfo(N.changedTouches[0]):E=b.getMouseInfo(N),O((_=E)!==null&&_!==void 0?_:{},N)}}),it(b,"handleClick",function(N){var j=b.getMouseInfo(N);if(j){var O=Ce(Ce({},j),{},{isTooltipActive:!0});b.setState(O),b.triggerSyncEvent(O);var _=b.props.onClick;xt(_)&&_(O,N)}}),it(b,"handleMouseDown",function(N){var j=b.props.onMouseDown;if(xt(j)){var O=b.getMouseInfo(N);j(O,N)}}),it(b,"handleMouseUp",function(N){var j=b.props.onMouseUp;if(xt(j)){var O=b.getMouseInfo(N);j(O,N)}}),it(b,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),it(b,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&b.handleMouseDown(N.changedTouches[0])}),it(b,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&b.handleMouseUp(N.changedTouches[0])}),it(b,"handleDoubleClick",function(N){var j=b.props.onDoubleClick;if(xt(j)){var O=b.getMouseInfo(N);j(O,N)}}),it(b,"handleContextMenu",function(N){var j=b.props.onContextMenu;if(xt(j)){var O=b.getMouseInfo(N);j(O,N)}}),it(b,"triggerSyncEvent",function(N){b.props.syncId!==void 0&&kg.emit(Og,b.props.syncId,N,b.eventEmitterSymbol)}),it(b,"applySyncEvent",function(N){var j=b.props,O=j.layout,_=j.syncMethod,E=b.state.updateId,k=N.dataStartIndex,C=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)b.setState(Ce({dataStartIndex:k,dataEndIndex:C},p({props:b.props,dataStartIndex:k,dataEndIndex:C,updateId:E},b.state)));else if(N.activeTooltipIndex!==void 0){var A=N.chartX,P=N.chartY,I=N.activeTooltipIndex,F=b.state,q=F.offset,H=F.tooltipTicks;if(!q)return;if(typeof _=="function")I=_(H,N);else if(_==="value"){I=-1;for(var V=0;V<H.length;V++)if(H[V].value===N.activeLabel){I=V;break}}var re=Ce(Ce({},q),{},{x:q.left,y:q.top}),oe=Math.min(A,re.x+re.width),U=Math.min(P,re.y+re.height),J=H[I]&&H[I].value,Q=vb(b.state,b.props.data,I),X=H[I]?{x:O==="horizontal"?H[I].coordinate:oe,y:O==="horizontal"?U:H[I].coordinate}:ZP;b.setState(Ce(Ce({},N),{},{activeLabel:J,activeCoordinate:X,activePayload:Q,activeTooltipIndex:I}))}else b.setState(N)}),it(b,"renderCursor",function(N){var j,O=b.state,_=O.isTooltipActive,E=O.activeCoordinate,k=O.activePayload,C=O.offset,A=O.activeTooltipIndex,P=O.tooltipAxisBandSize,I=b.getTooltipEventType(),F=(j=N.props.active)!==null&&j!==void 0?j:_,q=b.props.layout,H=N.key||"_recharts-cursor";return le.createElement(vle,{key:H,activeCoordinate:E,activePayload:k,activeTooltipIndex:A,chartName:r,element:N,isActive:F,layout:q,offset:C,tooltipAxisBandSize:P,tooltipEventType:I})}),it(b,"renderPolarAxis",function(N,j,O){var _=An(N,"type.axisType"),E=An(b.state,"".concat(_,"Map")),k=N.type.defaultProps,C=k!==void 0?Ce(Ce({},k),N.props):N.props,A=E&&E[C["".concat(_,"Id")]];return T.cloneElement(N,Ce(Ce({},A),{},{className:It(_,A.className),key:N.key||"".concat(j,"-").concat(O),ticks:Ps(A,!0)}))}),it(b,"renderPolarGrid",function(N){var j=N.props,O=j.radialLines,_=j.polarAngles,E=j.polarRadius,k=b.state,C=k.radiusAxisMap,A=k.angleAxisMap,P=hi(C),I=hi(A),F=I.cx,q=I.cy,H=I.innerRadius,V=I.outerRadius;return T.cloneElement(N,{polarAngles:Array.isArray(_)?_:Ps(I,!0).map(function(re){return re.coordinate}),polarRadius:Array.isArray(E)?E:Ps(P,!0).map(function(re){return re.coordinate}),cx:F,cy:q,innerRadius:H,outerRadius:V,key:N.key||"polar-grid",radialLines:O})}),it(b,"renderLegend",function(){var N=b.state.formattedGraphicalItems,j=b.props,O=j.children,_=j.width,E=j.height,k=b.props.margin||{},C=_-(k.left||0)-(k.right||0),A=KA({children:O,formattedGraphicalItems:N,legendWidth:C,legendContent:u});if(!A)return null;var P=A.item,I=hO(A,ble);return T.cloneElement(P,Ce(Ce({},I),{},{chartWidth:_,chartHeight:E,margin:k,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),it(b,"renderTooltip",function(){var N,j=b.props,O=j.children,_=j.accessibilityLayer,E=Ja(O,jn);if(!E)return null;var k=b.state,C=k.isTooltipActive,A=k.activeCoordinate,P=k.activePayload,I=k.activeLabel,F=k.offset,q=(N=E.props.active)!==null&&N!==void 0?N:C;return T.cloneElement(E,{viewBox:Ce(Ce({},F),{},{x:F.left,y:F.top}),active:q,label:I,payload:q?P:[],coordinate:A,accessibilityLayer:_})}),it(b,"renderBrush",function(N){var j=b.props,O=j.margin,_=j.data,E=b.state,k=E.offset,C=E.dataStartIndex,A=E.dataEndIndex,P=E.updateId;return T.cloneElement(N,{key:N.key||"_recharts-brush",onChange:A0(b.handleBrushChange,N.props.onChange),data:_,x:Be(N.props.x)?N.props.x:k.left,y:Be(N.props.y)?N.props.y:k.top+k.height+k.brushBottom-(O.bottom||0),width:Be(N.props.width)?N.props.width:k.width,startIndex:C,endIndex:A,updateId:"brush-".concat(P)})}),it(b,"renderReferenceElement",function(N,j,O){if(!N)return null;var _=b,E=_.clipPathId,k=b.state,C=k.xAxisMap,A=k.yAxisMap,P=k.offset,I=N.type.defaultProps||{},F=N.props,q=F.xAxisId,H=q===void 0?I.xAxisId:q,V=F.yAxisId,re=V===void 0?I.yAxisId:V;return T.cloneElement(N,{key:N.key||"".concat(j,"-").concat(O),xAxis:C[H],yAxis:A[re],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:E})}),it(b,"renderActivePoints",function(N){var j=N.item,O=N.activePoint,_=N.basePoint,E=N.childIndex,k=N.isRange,C=[],A=j.props.key,P=j.item.type.defaultProps!==void 0?Ce(Ce({},j.item.type.defaultProps),j.item.props):j.item.props,I=P.activeDot,F=P.dataKey,q=Ce(Ce({index:E,dataKey:F,cx:O.x,cy:O.y,r:4,fill:Mw(j.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},Tt(I,!1)),Um(I));return C.push(w.renderActiveDot(I,q,"".concat(A,"-activePoint-").concat(E))),_?C.push(w.renderActiveDot(I,Ce(Ce({},q),{},{cx:_.x,cy:_.y}),"".concat(A,"-basePoint-").concat(E))):k&&C.push(null),C}),it(b,"renderGraphicChild",function(N,j,O){var _=b.filterFormatItem(N,j,O);if(!_)return null;var E=b.getTooltipEventType(),k=b.state,C=k.isTooltipActive,A=k.tooltipAxis,P=k.activeTooltipIndex,I=k.activeLabel,F=b.props.children,q=Ja(F,jn),H=_.props,V=H.points,re=H.isRange,oe=H.baseLine,U=_.item.type.defaultProps!==void 0?Ce(Ce({},_.item.type.defaultProps),_.item.props):_.item.props,J=U.activeDot,Q=U.hide,X=U.activeBar,ee=U.activeShape,ue=!!(!Q&&C&&q&&(J||X||ee)),we={};E!=="axis"&&q&&q.props.trigger==="click"?we={onClick:A0(b.handleItemMouseEnter,N.props.onClick)}:E!=="axis"&&(we={onMouseLeave:A0(b.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:A0(b.handleItemMouseEnter,N.props.onMouseEnter)});var ne=T.cloneElement(N,Ce(Ce({},_.props),we));function ie(dt){return typeof A.dataKey=="function"?A.dataKey(dt.payload):null}if(ue)if(P>=0){var Ne,W;if(A.dataKey&&!A.allowDuplicatedCategory){var Ee=typeof A.dataKey=="function"?ie:"payload.".concat(A.dataKey.toString());Ne=Bm(V,Ee,I),W=re&&oe&&Bm(oe,Ee,I)}else Ne=V==null?void 0:V[P],W=re&&oe&&oe[P];if(ee||X){var B=N.props.activeIndex!==void 0?N.props.activeIndex:P;return[T.cloneElement(N,Ce(Ce(Ce({},_.props),we),{},{activeIndex:B})),null,null]}if(!bt(Ne))return[ne].concat(Mc(b.renderActivePoints({item:_,activePoint:Ne,basePoint:W,childIndex:P,isRange:re})))}else{var ve,ye=(ve=b.getItemByXY(b.state.activeCoordinate))!==null&&ve!==void 0?ve:{graphicalItem:ne},fe=ye.graphicalItem,et=fe.item,Ke=et===void 0?N:et,gt=fe.childIndex,Xe=Ce(Ce(Ce({},_.props),we),{},{activeIndex:gt});return[T.cloneElement(Ke,Xe),null,null]}return re?[ne,null,null]:[ne,null]}),it(b,"renderCustomized",function(N,j,O){return T.cloneElement(N,Ce(Ce({key:"recharts-customized-".concat(O)},b.props),b.state))}),it(b,"renderMap",{CartesianGrid:{handler:F0,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:F0},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:F0},YAxis:{handler:F0},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((v=S.id)!==null&&v!==void 0?v:Ff("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=q3(b.triggeredAfterMouseMove,(x=S.throttleDelay)!==null&&x!==void 0?x:1e3/60),b.state={},b}return Ale(w,y),Ole(w,[{key:"componentDidMount",value:function(){var v,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,x=v.children,b=v.data,N=v.height,j=v.layout,O=Ja(x,jn);if(O){var _=O.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,k=vb(this.state,b,_,E),C=this.state.tooltipTicks[_].coordinate,A=(this.state.offset.top+N)/2,P=j==="horizontal",I=P?{x:C,y:A}:{y:C,x:A},F=this.state.formattedGraphicalItems.find(function(H){var V=H.item;return V.type.name==="Scatter"});F&&(I=Ce(Ce({},I),F.props.points[_].tooltipPosition),k=F.props.points[_].tooltipPayload);var q={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:E,activePayload:k,activeCoordinate:I};this.setState(q),this.renderCursor(O),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var b,N;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(v){Qy([Ja(v.children,jn)],[Ja(this.props.children,jn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=Ja(this.props.children,jn);if(v&&typeof v.props.shared=="boolean"){var x=v.props.shared?"axis":"item";return l.indexOf(x)>=0?x:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var x=this.container,b=x.getBoundingClientRect(),N=IX(b),j={chartX:Math.round(v.pageX-N.left),chartY:Math.round(v.pageY-N.top)},O=b.width/x.offsetWidth||1,_=this.inRange(j.chartX,j.chartY,O);if(!_)return null;var E=this.state,k=E.xAxisMap,C=E.yAxisMap,A=this.getTooltipEventType(),P=gO(this.state,this.props.data,this.props.layout,_);if(A!=="axis"&&k&&C){var I=hi(k).scale,F=hi(C).scale,q=I&&I.invert?I.invert(j.chartX):null,H=F&&F.invert?F.invert(j.chartY):null;return Ce(Ce({},j),{},{xValue:q,yValue:H},P)}return P?Ce(Ce({},j),P):null}},{key:"inRange",value:function(v,x){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,j=v/b,O=x/b;if(N==="horizontal"||N==="vertical"){var _=this.state.offset,E=j>=_.left&&j<=_.left+_.width&&O>=_.top&&O<=_.top+_.height;return E?{x:j,y:O}:null}var k=this.state,C=k.angleAxisMap,A=k.radiusAxisMap;if(C&&A){var P=hi(C);return KC({x:j,y:O},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,x=this.getTooltipEventType(),b=Ja(v,jn),N={};b&&x==="axis"&&(b.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=Um(this.props,this.handleOuterEvent);return Ce(Ce({},j),N)}},{key:"addListener",value:function(){kg.on(Og,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kg.removeListener(Og,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,x,b){for(var N=this.state.formattedGraphicalItems,j=0,O=N.length;j<O;j++){var _=N[j];if(_.item===v||_.props.key===v.key||x===Fs(_.item.type)&&b===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,x=this.state.offset,b=x.left,N=x.top,j=x.height,O=x.width;return le.createElement("defs",null,le.createElement("clipPath",{id:v},le.createElement("rect",{x:b,y:N,height:j,width:O})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(x,b){var N=mO(b,2),j=N[0],O=N[1];return Ce(Ce({},x),{},it({},j,O.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(x,b){var N=mO(b,2),j=N[0],O=N[1];return Ce(Ce({},x),{},it({},j,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[v])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(v){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[v])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(v){var x=this.state,b=x.formattedGraphicalItems,N=x.activeItem;if(b&&b.length)for(var j=0,O=b.length;j<O;j++){var _=b[j],E=_.props,k=_.item,C=k.type.defaultProps!==void 0?Ce(Ce({},k.type.defaultProps),k.props):k.props,A=Fs(k.type);if(A==="Bar"){var P=(E.data||[]).find(function(H){return hae(v,H)});if(P)return{graphicalItem:_,payload:P}}else if(A==="RadialBar"){var I=(E.data||[]).find(function(H){return KC(v,H)});if(I)return{graphicalItem:_,payload:I}}else if(Zx(_,N)||ep(_,N)||rf(_,N)){var F=gne({graphicalItem:_,activeTooltipItem:N,itemData:C.data}),q=C.activeIndex===void 0?F:C.activeIndex;return{graphicalItem:Ce(Ce({},_),{},{childIndex:q}),payload:rf(_,N)?C.data[F]:_.props.data[F]}}}return null}},{key:"render",value:function(){var v=this;if(!E2(this))return null;var x=this.props,b=x.children,N=x.className,j=x.width,O=x.height,_=x.style,E=x.compact,k=x.title,C=x.desc,A=hO(x,wle),P=Tt(A,!1);if(E)return le.createElement(qk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement(Zy,Bl({},P,{width:j,height:O,title:k,desc:C}),this.renderClipPath(),P2(b,this.renderMap)));if(this.props.accessibilityLayer){var I,F;P.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,P.role=(F=this.props.role)!==null&&F!==void 0?F:"application",P.onKeyDown=function(H){v.accessibilityManager.keyboardEvent(H)},P.onFocus=function(){v.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return le.createElement(qk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement("div",Bl({className:It("recharts-wrapper",N),style:Ce({position:"relative",cursor:"default",width:j,height:O},_)},q,{ref:function(V){v.container=V}}),le.createElement(Zy,Bl({},P,{width:j,height:O,title:k,desc:C,style:Rle}),this.renderClipPath(),P2(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(T.Component);it(g,"displayName",r),it(g,"defaultProps",Ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),it(g,"getDerivedStateFromProps",function(y,w){var S=y.dataKey,v=y.data,x=y.children,b=y.width,N=y.height,j=y.layout,O=y.stackOffset,_=y.margin,E=w.dataStartIndex,k=w.dataEndIndex;if(w.updateId===void 0){var C=yO(y);return Ce(Ce(Ce({},C),{},{updateId:0},p(Ce(Ce({props:y},C),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:v,prevWidth:b,prevHeight:N,prevLayout:j,prevStackOffset:O,prevMargin:_,prevChildren:x})}if(S!==w.prevDataKey||v!==w.prevData||b!==w.prevWidth||N!==w.prevHeight||j!==w.prevLayout||O!==w.prevStackOffset||!Xl(_,w.prevMargin)){var A=yO(y),P={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},I=Ce(Ce({},gO(w,v,j)),{},{updateId:w.updateId+1}),F=Ce(Ce(Ce({},A),P),I);return Ce(Ce(Ce({},F),p(Ce({props:y},F),w)),{},{prevDataKey:S,prevData:v,prevWidth:b,prevHeight:N,prevLayout:j,prevStackOffset:O,prevMargin:_,prevChildren:x})}if(!Qy(x,w.prevChildren)){var q,H,V,re,oe=Ja(x,Cc),U=oe&&(q=(H=oe.props)===null||H===void 0?void 0:H.startIndex)!==null&&q!==void 0?q:E,J=oe&&(V=(re=oe.props)===null||re===void 0?void 0:re.endIndex)!==null&&V!==void 0?V:k,Q=U!==E||J!==k,X=!bt(v),ee=X&&!Q?w.updateId:w.updateId+1;return Ce(Ce({updateId:ee},p(Ce(Ce({props:y},w),{},{updateId:ee,dataStartIndex:U,dataEndIndex:J}),w)),{},{prevChildren:x,dataStartIndex:U,dataEndIndex:J})}return null}),it(g,"renderActiveDot",function(y,w,S){var v;return T.isValidElement(y)?v=T.cloneElement(y,w):xt(y)?v=y(w):v=le.createElement(Rw,w),le.createElement(Or,{className:"recharts-active-dot",key:S},v)});var h=T.forwardRef(function(w,S){return le.createElement(g,Bl({},w,{ref:S}))});return h.displayName=g.displayName,h},_g=Hle({chartName:"LineChart",GraphicalChild:_o,axisComponents:[{axisType:"xAxis",AxisComp:Zl},{axisType:"yAxis",AxisComp:ec}],formatAxisMap:Wse});const Zi=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onClearAll:a,onViewTransferOrder:s,onRefresh:i})=>{const[o,l]=T.useState(!1),c=T.useRef(null);T.useEffect(()=>{console.log(" NotificationDropdown: Received notifications:",e),console.log(" NotificationDropdown: Number of notifications:",e.length)},[e]),T.useEffect(()=>{const m=p=>{c.current&&!c.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const u=e.filter(m=>!m.read).length,d=m=>{switch(m){case"warning":return n.jsx(Uo,{className:"h-4 w-4 text-yellow-500"});case"success":return n.jsx(M1,{className:"h-4 w-4 text-green-500"});case"error":return n.jsx(Uo,{className:"h-4 w-4 text-red-500"});default:return n.jsx(bE,{className:"h-4 w-4 text-blue-500"})}},f=m=>{const g=new Date().getTime()-m.getTime(),h=Math.floor(g/6e4),y=Math.floor(g/36e5),w=Math.floor(g/864e5);return h<1?"Just now":h<60?`${h}m ago`:y<24?`${y}h ago`:`${w}d ago`};return n.jsxs("div",{className:"relative",ref:c,children:[n.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Notifications",children:[n.jsx(x2,{className:"h-6 w-6"}),u>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:u>9?"9+":u})]}),o&&n.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[i&&n.jsx("button",{onClick:i,className:"text-sm text-gray-600 hover:text-gray-800 p-1 rounded",title:"Refresh notifications",children:n.jsx(ea,{className:"h-4 w-4"})}),u>0&&n.jsx("button",{onClick:r,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all read"}),n.jsx("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-800",children:"Clear all"}),n.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.length===0?n.jsxs("div",{className:"p-4 text-center text-gray-500",children:[n.jsx(x2,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),n.jsx("p",{children:"No notifications"})]}):e.map(m=>{var g;const p=m.read&&((g=m.title)==null?void 0:g.includes("Transfer Request from"));return n.jsx("div",{className:`p-4 border-b border-gray-100 ${m.read?"bg-gray-50":"bg-blue-50"} ${p?"opacity-70 cursor-pointer":m.isTransferOrder&&m.transferOrderId&&s?"cursor-pointer hover:bg-blue-100 transition-colors":"hover:bg-gray-50"}`,onClick:h=>{h.preventDefault(),h.stopPropagation(),console.log(" NotificationDropdown: Notification clicked!"),console.log(" NotificationDropdown: notification =",m),console.log(" NotificationDropdown: isDisabled =",p),console.log(" NotificationDropdown: isTransferOrder =",m.isTransferOrder),console.log(" NotificationDropdown: transferOrderId =",m.transferOrderId),console.log(" NotificationDropdown: onViewTransferOrder =",!!s),m.isTransferOrder&&m.transferOrderId&&s?(console.log(" NotificationDropdown: All conditions met, calling onViewTransferOrder"),l(!1),s(m.transferOrderId)):(console.log(" NotificationDropdown: Conditions not met for transfer order"),console.log(" NotificationDropdown: isTransferOrder =",m.isTransferOrder),console.log(" NotificationDropdown: transferOrderId =",m.transferOrderId),console.log(" NotificationDropdown: onViewTransferOrder exists =",!!s))},children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:d(m.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:`text-sm font-medium ${m.read?"text-gray-700":"text-gray-900"}`,children:m.title}),n.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[n.jsx(yx,{className:"h-3 w-3"}),n.jsx("span",{children:f(m.timestamp)})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.message}),m.outlet&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.outlet}),m.isTransferOrder&&m.transferOrderId&&s&&n.jsx("p",{className:`text-xs mt-1 font-medium ${p?"text-gray-400":"text-blue-600"}`,children:p?" Processed (view only)":"Click to view transfer details "})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[m.isTransferOrder&&m.transferOrderId&&s&&n.jsx("button",{onClick:h=>{h.stopPropagation(),console.log("NotificationDropdown: Clicking View button"),console.log("NotificationDropdown: notification.transferOrderId =",m.transferOrderId),l(!1),s(m.transferOrderId)},className:`p-1 rounded transition-colors ${p?"text-gray-400 hover:text-gray-600 hover:bg-gray-100":"text-blue-600 hover:text-blue-800 hover:bg-blue-100"}`,title:p?"View Transfer Order (Read-only)":"View Transfer Order",children:n.jsx(Vi,{className:"h-4 w-4"})}),p&&n.jsx("span",{className:"text-xs text-gray-400 px-2 py-1 bg-gray-100 rounded",title:"This transfer order has been processed",children:" Processed"}),n.jsx("button",{onClick:()=>t(m.id),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Mark as read",children:n.jsx("div",{className:`w-2 h-2 rounded-full ${m.read?"bg-gray-300":"bg-blue-500"}`})})]})]})},m.id)})}),e.length>0&&n.jsx("div",{className:"p-4 border-t border-gray-200",children:n.jsx("button",{onClick:a,className:"w-full text-sm text-gray-600 hover:text-gray-800 text-center",children:"Clear all notifications"})})]})]})},bO=()=>{const e=T.useMemo(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}},[]),t=!!(e!=null&&e.isAdmin),r=String((e==null?void 0:e.assignedOutletCode)||""),[a,s]=T.useState(()=>{if(!t){if(r==="KUWAIT_CITY")return"kuwait-city";if(r==="MALL_360")return"360-mall";if(r==="VIBE_COMPLEX")return"vibes-complex";if(r==="TAIBA_HOSPITAL")return"taiba-hospital"}return"overall"}),[i,o]=T.useState("all"),[l,c]=T.useState({}),[u,d]=T.useState(null),[f,m]=T.useState(!1),{notifications:p,markAsRead:g,markAllAsRead:h,clearAll:y}=Js("System"),w=T.useMemo(()=>{const j=[{id:"overall",name:"Overall Sales",icon:b0,color:"text-indigo-600"},{id:"kuwait-city",name:"Kuwait City",icon:En,color:"text-blue-600"},{id:"360-mall",name:"360 Mall",icon:Lm,color:"text-green-600"},{id:"vibes-complex",name:"Vibes Complex",icon:$m,color:"text-orange-600"},{id:"taiba-hospital",name:"Taiba Hospital",icon:Rm,color:"text-purple-600"}];if(t)return j;const O=r==="KUWAIT_CITY"?"kuwait-city":r==="MALL_360"?"360-mall":r==="VIBE_COMPLEX"?"vibes-complex":r==="TAIBA_HOSPITAL"?"taiba-hospital":"kuwait-city";return j.filter(_=>_.id===O)},[t,r]),S={"kuwait-city":{name:"Kuwait City",totalSales:125e3,totalOrders:156,avgOrderValue:801,topProducts:[{name:"Caesar Salad",sales:12500,orders:45,category:"Recipe"},{name:"Grilled Chicken",sales:9800,orders:38,category:"Recipe"},{name:"Pasta Carbonara",sales:8700,orders:32,category:"Recipe"},{name:"Heartbeet",sales:11250,orders:40,category:"Finished Good"}],dailySales:[{day:"Mon",sales:8500},{day:"Tue",sales:9200},{day:"Wed",sales:7800},{day:"Thu",sales:10500},{day:"Fri",sales:12800},{day:"Sat",sales:15200},{day:"Sun",sales:11800}],dailySalesFinished:[{day:"Mon",sales:4200},{day:"Tue",sales:5100},{day:"Wed",sales:3600},{day:"Thu",sales:5600},{day:"Fri",sales:6900},{day:"Sat",sales:7800},{day:"Sun",sales:6e3}],dailySalesRecipe:[{day:"Mon",sales:4300},{day:"Tue",sales:4100},{day:"Wed",sales:4200},{day:"Thu",sales:4900},{day:"Fri",sales:5900},{day:"Sat",sales:7400},{day:"Sun",sales:5800}]},"360-mall":{name:"360 Mall",totalSales:89e3,totalOrders:134,avgOrderValue:664,topProducts:[{name:"Cappuccino",sales:9800,orders:65,category:"Recipe"},{name:"Latte",sales:7200,orders:48,category:"Recipe"},{name:"Croissant",sales:5400,orders:36,category:"Finished Good"}],dailySales:[{day:"Mon",sales:6200},{day:"Tue",sales:6800},{day:"Wed",sales:5900},{day:"Thu",sales:7500},{day:"Fri",sales:9200},{day:"Sat",sales:10800},{day:"Sun",sales:8200}],dailySalesFinished:[{day:"Mon",sales:2e3},{day:"Tue",sales:2100},{day:"Wed",sales:1800},{day:"Thu",sales:2400},{day:"Fri",sales:3e3},{day:"Sat",sales:3500},{day:"Sun",sales:2900}],dailySalesRecipe:[{day:"Mon",sales:4200},{day:"Tue",sales:4700},{day:"Wed",sales:4100},{day:"Thu",sales:5100},{day:"Fri",sales:6200},{day:"Sat",sales:7300},{day:"Sun",sales:5300}]},"vibes-complex":{name:"Vibes Complex",totalSales:67e3,totalOrders:98,avgOrderValue:684,topProducts:[{name:"Burger Deluxe",sales:8200,orders:28,category:"Finished Good"},{name:"Chicken Wrap",sales:6500,orders:25,category:"Finished Good"},{name:"French Fries",sales:4800,orders:32,category:"Finished Good"}],dailySales:[{day:"Mon",sales:4800},{day:"Tue",sales:5200},{day:"Wed",sales:4500},{day:"Thu",sales:5800},{day:"Fri",sales:7200},{day:"Sat",sales:8500},{day:"Sun",sales:6200}],dailySalesFinished:[{day:"Mon",sales:4800},{day:"Tue",sales:5200},{day:"Wed",sales:4500},{day:"Thu",sales:5800},{day:"Fri",sales:7200},{day:"Sat",sales:8500},{day:"Sun",sales:6200}],dailySalesRecipe:[{day:"Mon",sales:0},{day:"Tue",sales:0},{day:"Wed",sales:0},{day:"Thu",sales:0},{day:"Fri",sales:0},{day:"Sat",sales:0},{day:"Sun",sales:0}]},"taiba-hospital":{name:"Taiba Hospital",totalSales:45e3,totalOrders:67,avgOrderValue:672,topProducts:[{name:"Quick Sandwich",sales:6800,orders:22,category:"Finished Good"},{name:"Coffee",sales:4200,orders:35,category:"Recipe"},{name:"Energy Bar",sales:3200,orders:18,category:"Finished Good"}],dailySales:[{day:"Mon",sales:3200},{day:"Tue",sales:3500},{day:"Wed",sales:2800},{day:"Thu",sales:4200},{day:"Fri",sales:4800},{day:"Sat",sales:5200},{day:"Sun",sales:3800}],dailySalesFinished:[{day:"Mon",sales:1800},{day:"Tue",sales:1900},{day:"Wed",sales:1500},{day:"Thu",sales:2200},{day:"Fri",sales:2600},{day:"Sat",sales:2800},{day:"Sun",sales:2e3}],dailySalesRecipe:[{day:"Mon",sales:1400},{day:"Tue",sales:1600},{day:"Wed",sales:1300},{day:"Thu",sales:2e3},{day:"Fri",sales:2200},{day:"Sat",sales:2400},{day:"Sun",sales:1800}]}};T.useEffect(()=>{(async()=>{var O;if(a!=="overall")try{m(!0);const E={"kuwait-city":"Kuwait City","360-mall":"360 Mall","vibes-complex":"Vibes Complex","taiba-hospital":"Taiba Hospital"}[a]||"Kuwait City",k=new Date,C=new Date;C.setDate(k.getDate()-30);const A=await de.getSalesOrders({outletName:E,limit:1e3,sortBy:"orderTiming.orderDate",sortOrder:"desc",startDate:C.toISOString(),endDate:k.toISOString()});if(!A.success||!Array.isArray(A.data)){c(ee=>({...ee,[a]:null})),m(!1);return}const P=A.data,I=P.reduce((ee,ue)=>{var we;return ee+Number(((we=ue==null?void 0:ue.orderSummary)==null?void 0:we.totalAmount)||0)},0),F=P.length,q=F>0?Math.round(I/F):0,H={};for(const ee of P)for(const ue of ee.orderItems||[]){const we=ue.productName||ue.productCode,ne=`${we}__${ue.category||"Finished Good"}`,ie=ue.category==="Recipe"?"Recipe":"Finished Good",Ne=Number(ue.totalPrice||Number(ue.unitPrice||0)*Number(ue.quantity||0)),W=Number(ue.quantity||1);H[ne]||(H[ne]={name:we,sales:0,orders:0,category:ie}),H[ne].sales+=Ne,H[ne].orders+=W}const V=Object.values(H).sort((ee,ue)=>ue.sales-ee.sales).slice(0,10),re=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],oe={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6},U=ee=>{const ue=new Date(ee);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][ue.getDay()]},J=Array.from({length:7},(ee,ue)=>({day:re[ue],sales:0})),Q=Array.from({length:7},(ee,ue)=>({day:re[ue],sales:0})),X=Array.from({length:7},(ee,ue)=>({day:re[ue],sales:0}));for(const ee of P){const ue=U(((O=ee==null?void 0:ee.orderTiming)==null?void 0:O.orderDate)||(ee==null?void 0:ee.createdAt)||new Date().toISOString()),we=oe[ue==="Sun"?"Sun":ue],ne=Array.isArray(ee.orderItems)?ee.orderItems:[];let ie=0,Ne=0;for(const W of ne){const Ee=Number(W.totalPrice||Number(W.unitPrice||0)*Number(W.quantity||0));W.category==="Recipe"?Ne+=Ee:ie+=Ee}J[we].sales+=ie+Ne,Q[we].sales+=ie,X[we].sales+=Ne}c(ee=>({...ee,[a]:{name:E,totalSales:I,totalOrders:F,avgOrderValue:q,topProducts:V,dailySales:J,dailySalesFinished:Q,dailySalesRecipe:X}}))}catch{c(E=>({...E,[a]:null}))}finally{m(!1)}})()},[a]),T.useEffect(()=>{(async()=>{var O,_,E;try{const k=new Date,C=new Date;C.setDate(k.getDate()-30);const A=await de.getSalesOrders({limit:3e3,sortBy:"orderTiming.orderDate",sortOrder:"desc",startDate:C.toISOString(),endDate:k.toISOString()});if(!A.success||!Array.isArray(A.data)){d(null);return}const P=A.data,I=P.reduce((ee,ue)=>{var we;return ee+Number(((we=ue==null?void 0:ue.orderSummary)==null?void 0:we.totalAmount)||0)},0),F=P.length,q=F>0?Math.round(I/F):0,H={"Kuwait City":{name:"Kuwait City",sales:0,orders:0},"360 Mall":{name:"360 Mall",sales:0,orders:0},"Vibes Complex":{name:"Vibes Complex",sales:0,orders:0},"Taiba Hospital":{name:"Taiba Hospital",sales:0,orders:0}};for(const ee of P){const ue=(ee==null?void 0:ee.outletName)||"Unknown";H[ue]||(H[ue]={name:ue,sales:0,orders:0}),H[ue].sales+=Number(((O=ee==null?void 0:ee.orderSummary)==null?void 0:O.totalAmount)||0),H[ue].orders+=1}const V=Object.values(H);V.forEach(ee=>{ee.percentage=I>0?Math.round(ee.sales/I*100):0});const re={};for(const ee of P)for(const ue of ee.orderItems||[]){const we=ue.productName||ue.productCode,ne=`${we}__${ee.outletName||"Unknown"}`,ie=ee.outletName||"Unknown",Ne=Number(ue.totalPrice||Number(ue.unitPrice||0)*Number(ue.quantity||0)),W=Number(ue.quantity||1);re[ne]||(re[ne]={name:we,sales:0,orders:0,outlet:ie}),re[ne].sales+=Ne,re[ne].orders+=W}const oe=Object.values(re).sort((ee,ue)=>ue.sales-ee.sales).slice(0,10),U=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],J=ee=>{const ue=new Date(ee);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][ue.getDay()]},Q={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6},X=Array.from({length:7},(ee,ue)=>({day:U[ue],sales:0}));for(const ee of P){const ue=J(((_=ee==null?void 0:ee.orderTiming)==null?void 0:_.orderDate)||(ee==null?void 0:ee.createdAt)||new Date().toISOString()),we=Q[ue==="Sun"?"Sun":ue];X[we].sales+=Number(((E=ee==null?void 0:ee.orderSummary)==null?void 0:E.totalAmount)||0)}d({totalSales:I,totalOrders:F,avgOrderValue:q,outletBreakdown:V,overallTrend:X,topProductsOverall:oe})}catch{d(null)}})()},[]);const v={totalSales:Object.values(S).reduce((j,O)=>j+O.totalSales,0),totalOrders:Object.values(S).reduce((j,O)=>j+O.totalOrders,0),avgOrderValue:0,outletBreakdown:Object.entries(S).map(([,j])=>({name:j.name,sales:j.totalSales,orders:j.totalOrders,percentage:0}))};v.avgOrderValue=Math.round(v.totalSales/v.totalOrders),v.outletBreakdown.forEach(j=>{j.percentage=Math.round(j.sales/v.totalSales*100)});const x=j=>{if(i==="all")return j;const O=i==="finished"?"Finished Good":"Recipe";return j.filter(_=>(_.category||"").toLowerCase()===O.toLowerCase())},b=j=>i==="finished"?j.dailySalesFinished||j.dailySales:i==="recipe"&&j.dailySalesRecipe||j.dailySales,N=j=>{if(j==="overall")return u?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-indigo-500",children:n.jsx(b0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",u.totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:u.totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Iu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",u.avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Sales by Outlet"}),n.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:u.outletBreakdown.map((_,E)=>n.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-50 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[n.jsx("div",{className:`p-4 rounded-full mb-4 ${E%2===0?"bg-blue-100":"bg-green-100"}`,children:n.jsx(En,{className:`${E%2===0?"text-blue-600":"text-green-600"} h-8 w-8`})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:_.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.orders," orders"]}),n.jsxs("p",{className:"font-bold text-gray-900",children:["KWD ",_.sales.toLocaleString()]}),n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[_.percentage,"% of total"]})]})]},_.name))})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Overall Sales Trend"}),n.jsx(ug,{width:"100%",height:300,children:n.jsxs(_g,{data:u.overallTrend,children:[n.jsx(sm,{strokeDasharray:"3 3"}),n.jsx(Zl,{dataKey:"day"}),n.jsx(ec,{}),n.jsx(jn,{formatter:_=>[`KWD ${_}`,"Sales"]}),n.jsx(_o,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:3})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products Overall"}),n.jsx("div",{className:"space-y-4",children:u.topProductsOverall.map((_,E)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:E+1})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:_.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.outlet,"  ",_.orders," orders"]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",_.sales.toLocaleString()]})})]},`${_.name}-${_.outlet}`))})]})]})]}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading overall sales data..."})]})});const O=S[j];return O?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(b0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",O.totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:O.totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Iu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",O.avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsx("div",{className:"col-span-1 lg:col-span-2",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:()=>o("all"),className:`px-3 py-1 text-sm rounded border ${i==="all"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"ALL"}),n.jsx("button",{onClick:()=>o("finished"),className:`px-3 py-1 text-sm rounded border ${i==="finished"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>o("recipe"),className:`px-3 py-1 text-sm rounded border ${i==="recipe"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipe Master"})]})}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Daily Sales Trend"}),n.jsx(ug,{width:"100%",height:300,children:n.jsxs(_g,{data:b(O),children:[n.jsx(sm,{strokeDasharray:"3 3"}),n.jsx(Zl,{dataKey:"day"}),n.jsx(ec,{}),n.jsx(jn,{formatter:_=>[`KWD ${_}`,"Sales"]}),n.jsx(_o,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:2})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products"}),n.jsx("div",{className:"space-y-4",children:x(O.topProducts).map(_=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:_.name}),n.jsx("p",{className:"text-xs text-gray-500",children:_.category||"Unknown"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.orders," orders"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",_.sales.toLocaleString()]})})]},_.name))})]})]})]}):null};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Monitor sales performance across all outlets"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[n.jsx(Iu,{className:"h-4 w-4"}),n.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]})]}),n.jsx(Zi,{notifications:p,onMarkAsRead:g,onMarkAllAsRead:h,onClearAll:y})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:w.map(j=>{const O=j.icon;return n.jsxs("button",{onClick:()=>s(j.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${a===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(O,{className:`h-4 w-4 ${a===j.id?j.color:""}`}),n.jsx("span",{children:j.name})]},j.id)})})}),a!=="overall"&&l[a]?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-indigo-500",children:n.jsx(b0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",l[a].totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l[a].totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Iu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",l[a].avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o("all"),className:`px-3 py-1 text-sm rounded border ${i==="all"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"ALL"}),n.jsx("button",{onClick:()=>o("finished"),className:`px-3 py-1 text-sm rounded border ${i==="finished"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>o("recipe"),className:`px-3 py-1 text-sm rounded border ${i==="recipe"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipe Master"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Daily Sales Trend"}),n.jsx(ug,{width:"100%",height:300,children:n.jsxs(_g,{data:b(l[a]),children:[n.jsx(sm,{strokeDasharray:"3 3"}),n.jsx(Zl,{dataKey:"day"}),n.jsx(ec,{}),n.jsx(jn,{formatter:j=>[`KWD ${j}`,"Sales"]}),n.jsx(_o,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:2})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products"}),n.jsx("div",{className:"space-y-4",children:x(l[a].topProducts).map(j=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:j.name}),n.jsx("p",{className:"text-xs text-gray-500",children:j.category}),n.jsxs("p",{className:"text-sm text-gray-600",children:[j.orders," orders"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",j.sales.toLocaleString()]})})]},`${j.name}-${j.category}`))})]})]})]}):N(a)]})},wO=()=>{const e=ct(),t=Ta(),[r,a]=T.useState(""),[s,i]=T.useState(""),[o,l]=T.useState(!1),[c,u]=T.useState(!1),[d,f]=T.useState(null),m=async p=>{var g,h;p.preventDefault(),f(null),u(!0);try{const y=await de.login({email:r,password:s});if(y!=null&&y.success&&((g=y.data)!=null&&g.token)){const{token:w,user:S}=y.data;localStorage.setItem("auth_token",w),localStorage.setItem("auth_user",JSON.stringify(S));const v=((h=t.state)==null?void 0:h.from)||"/dashboard";e(v)}else f((y==null?void 0:y.message)||"Invalid credentials")}catch{f("Login failed. Please check your credentials and try again.")}finally{u(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg p-8",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 text-indigo-600 mb-3",children:n.jsx("span",{className:"font-bold",children:"LB"})}),n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Sign in to your account"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Use your work email to continue"})]}),n.jsxs("form",{onSubmit:m,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:"@"}),n.jsx("input",{type:"email",autoComplete:"email",required:!0,className:"input-field pl-9",placeholder:"you@company.com",value:r,onChange:p=>a(p.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:"*"}),n.jsx("input",{type:o?"text":"password",autoComplete:"current-password",required:!0,className:"input-field pl-9 pr-24",placeholder:"",value:s,onChange:p=>i(p.target.value)}),n.jsx("button",{type:"button",onClick:()=>l(p=>!p),className:"absolute inset-y-0 right-0 px-3 text-sm text-gray-500 hover:text-gray-700",children:o?"Hide":"Show"})]})]}),d&&n.jsx("div",{className:"text-sm text-red-600",children:d}),n.jsx("button",{type:"submit",disabled:c,className:"btn-primary w-full inline-flex items-center justify-center",children:c?"Signing in...":"Sign In"})]})]}),n.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"By continuing, you agree to our Terms and acknowledge our Privacy Policy."})]})})},Hw=()=>{const[e,t]=T.useState({isOpen:!1,title:"",message:"",type:"info",confirmText:"OK",cancelText:"Cancel",showCancel:!1}),r=T.useCallback(async(u,d,f="info")=>new Promise(m=>{t({isOpen:!0,title:u,message:d,type:f,confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(p=>({...p,isOpen:!1})),m(void 0)}})}),[]),a=T.useCallback(async(u,d,f="warning")=>new Promise(m=>{t({isOpen:!0,title:u,message:d,type:f,confirmText:"Confirm",cancelText:"Cancel",showCancel:!0,onConfirm:()=>{t(p=>({...p,isOpen:!1})),m(!0)},onCancel:()=>{t(p=>({...p,isOpen:!1})),m(!1)}})}),[]),s=T.useCallback(async u=>new Promise(d=>{t({isOpen:!0,title:"Confirm Delete",message:`Are you sure you want to delete "${u}"? This action cannot be undone.`,type:"error",confirmText:"Delete",cancelText:"Cancel",showCancel:!0,onConfirm:()=>{t(f=>({...f,isOpen:!1})),d(!0)},onCancel:()=>{t(f=>({...f,isOpen:!1})),d(!1)}})}),[]),i=T.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"success",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),o=T.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"error",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),l=T.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"warning",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),c=T.useCallback(()=>{t(u=>({...u,isOpen:!1}))},[]);return{confirmation:e,showAlert:r,showConfirm:a,showDeleteConfirm:s,showSuccess:i,showError:o,showWarning:l,closeConfirmation:c}},Gle=()=>{const e=ct();T.useRef(null);const{showAlert:t}=Hw(),[r,a]=T.useState([]),[s,i]=T.useState(!0),[o,l]=T.useState(!1);T.useState(!1);const[c,u]=T.useState(!1),[d,f]=T.useState(""),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState("");T.useEffect(()=>{S()},[]),T.useEffect(()=>{},[d,m,g]);const S=async()=>{try{i(!0),console.log(" Loading Ingredient Master from main database");const k=await de.getRawMaterials({limit:1e3});if(k.success&&k.data){const C=Array.isArray(k.data)?k.data:k.data.data||[];console.log(" Loaded Ingredient Master:",C.length,"items"),a(C)}else console.log("  No materials found"),a([])}catch(k){console.error(" Error loading materials:",k),t("Error",`Failed to load materials: ${k instanceof Error?k.message:"Unknown error"}`,"error")}finally{i(!1)}},v=async()=>{console.log(" Create Transfer button clicked!"),console.log(" Current materials count:",r.length);try{u(!0),console.log(" Transfer process started...");const k=[];if(console.log(" Processing materials for distribution..."),r.forEach((q,H)=>{console.log(`  ${H+1}. ${q.materialName} (${q.materialCode})`),q.locationStocks?(console.log("     Location stocks:",q.locationStocks),Object.entries(q.locationStocks).forEach(([V,re])=>{const oe=re;if(console.log(`     ${V}: ${oe}`),oe>0){const U=x(V);console.log(`      Mapping ${V} to ${U}`),U&&(k.push({itemCode:q.materialCode,itemName:q.materialName,itemType:"Raw Material",category:q.parentCategory,subCategory:q.subCategory,unitOfMeasure:q.unitOfMeasure,quantity:oe,unitPrice:q.unitPrice,totalValue:oe*q.unitPrice,notes:`Auto-distributed from Ingredient Master to ${U}`}),console.log(`      Added to distribution: ${oe} ${q.unitOfMeasure}  ${U}`))}})):console.log("     No location stocks found")}),console.log(` Total items to distribute: ${k.length}`),k.length===0){console.log("  No items found with stock in any location"),t("No Items to Transfer","No items found with stock in any location.","warning");return}console.log(" Starting direct auto-distribution transfer from Ingredient Master"),console.log(` Processing ${k.length} items`);const C={};k.forEach(q=>{var re;const H=(re=q.notes)==null?void 0:re.match(/to (\w+(?:\s+\w+)*)$/),V=H?H[1]:"Central Kitchen";C[V]||(C[V]=[]),C[V].push(q)}),console.log(` Distributing to ${Object.keys(C).length} outlets:`,Object.keys(C));const A=Object.entries(C).map(async([q,H])=>{const V={fromOutlet:"Ingredient Master",toOutlet:q,transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:`Auto-distribution from Ingredient Master to ${q}`,items:H};console.log(` Creating transfer to ${q}:`,H.length,"items");try{const re=await de.createIngredientMasterTransfer(V);return re.success?(console.log(` Transfer to ${q} created successfully:`,re.data),{outlet:q,success:!0,transferId:re.data._id||re.data.id||re.data.transferOrderId}):(console.error(` Transfer to ${q} failed:`,re.message),{outlet:q,success:!1,error:re.message})}catch(re){return console.error(` Error creating transfer to ${q}:`,re),{outlet:q,success:!1,error:re instanceof Error?re.message:"Unknown error"}}}),P=await Promise.all(A),I=P.filter(q=>q.success),F=P.filter(q=>!q.success);if(console.log(` Transfer Results: ${I.length} successful, ${F.length} failed`),I.length>0){let q=` Auto-distribution completed!

`;q+=` Successfully transferred to ${I.length} outlets:
`,I.forEach(H=>{q+=` ${H.outlet}
`}),F.length>0&&(q+=`
 Failed transfers:
`,F.forEach(H=>{q+=` ${H.outlet}: ${H.error}
`})),t("Transfer Completed",q,"success"),await S()}else t("Transfer Failed","All transfers failed. Please check the console for details.","error")}catch(k){console.error("Error in direct transfer:",k),t("Transfer Error",`Error during transfer: ${k instanceof Error?k.message:"Unknown error"}`,"error")}finally{u(!1)}},x=k=>({centralKitchen:"Central Kitchen",kuwaitCity:"Kuwait City",mall360:"360 Mall",vibesComplex:"Vibe Complex",taibaKitchen:"Taiba Hospital"})[k]||null,b=async()=>{l(!0);try{console.log(" Starting Zoho Inventory Sync...");const k=await de.syncWithZohoRawMaterials();console.log(" ZOHO SYNC API RESPONSE:"),console.log("=".repeat(60)),console.log("Full Response:",k),console.log("=".repeat(60)),console.log("Success:",k.success),console.log("Message:",k.message),console.log("Data:",k.data),console.log("=".repeat(60)),k.success?(console.log(" Sync Details:"),console.log("    Total items processed:",k.data.totalItems),console.log("    Items with SKU:",k.data.itemsWithSKU),console.log("    Items without SKU (skipped):",k.data.itemsWithoutSKU),console.log("    New items added:",k.data.addedItems),console.log("    Items updated:",k.data.updatedItems),console.log("    Errors:",k.data.errorItems),console.log("    Sync timestamp:",k.data.syncTimestamp),console.log("=".repeat(60)),t("Sync Completed Successfully!",` Sync Results:
 Total items processed: ${k.data.totalItems}
 Items with SKU: ${k.data.itemsWithSKU}
 Items without SKU (skipped): ${k.data.itemsWithoutSKU}
 New items added: ${k.data.addedItems}
 Items updated: ${k.data.updatedItems}
 Errors: ${k.data.errorItems}

 Sync completed at: ${new Date(k.data.syncTimestamp).toLocaleString()}`,"success"),await S()):(console.error(" Sync failed:",k.message),t("Sync Failed",k.message||"Unknown error occurred during sync","error"))}catch(k){console.error(" Sync Error:",k),t("Sync Failed",`Failed to sync with Zoho: ${k instanceof Error?k.message:"Unknown error"}`,"error")}finally{l(!1),console.log(" Sync process completed")}},N=(k,C)=>k<=C?{status:"Low",color:"text-red-600 bg-red-100"}:k<=C*1.5?{status:"Medium",color:"text-yellow-600 bg-yellow-100"}:{status:"Good",color:"text-green-600 bg-green-100"},j=r.filter(k=>{const C=k.materialName.toLowerCase().includes(d.toLowerCase())||k.materialCode.toLowerCase().includes(d.toLowerCase())||k.description&&k.description.toLowerCase().includes(d.toLowerCase()),A=m===""||k.subCategory===m,P=g===""||g==="active"&&k.isActive||g==="inactive"&&!k.isActive,I=N(k.currentStock,k.minimumStock),F=y===""||I.status.toLowerCase()===y.toLowerCase();return C&&A&&P&&F}),O=[...new Set(r.map(k=>k.subCategory))],_=async k=>{if(window.confirm("Are you sure you want to delete this material?"))try{(await de.deleteRawMaterial(k)).success?(t("Success","Material deleted successfully","success"),await S()):t("Error","Failed to delete material","error")}catch(C){t("Error",`Error deleting material: ${C instanceof Error?C.message:"Unknown error"}`,"error"),console.error("Error deleting material:",C)}},E=()=>{try{const k=j.map(F=>{var q;return{SKU:F.materialCode,"Item Name":F.materialName,"Parent Category":F.parentCategory||"Raw Materials","SubCategory Name":F.subCategory,Unit:F.unitOfMeasure,"Unit Price (KWD)":((q=F.unitPrice)==null?void 0:q.toFixed(3))||"0.000","Current Stock":F.currentStock,"Minimum Stock":F.minimumStock,Status:F.status,Supplier:F.supplierName||"","Last Synced":F.lastSyncedAt?new Date(F.lastSyncedAt).toLocaleString():"Never"}}),C=Object.keys(k[0]||{}),A=[C.join(","),...k.map(F=>C.map(q=>{const H=F[q];return typeof H=="string"&&(H.includes(",")||H.includes('"'))?`"${H.replace(/"/g,'""')}"`:H}).join(","))].join(`
`),P=new Blob([A],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a");I.href=URL.createObjectURL(P),I.download=`ingredient-master-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(I),I.click(),document.body.removeChild(I),t("Success",`Exported ${j.length} materials to CSV`,"success")}catch(k){t("Error",`Failed to export: ${k instanceof Error?k.message:"Unknown error"}`,"error"),console.error("Export failed:",k)}};return s?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading ingredients..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ingredient Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant ingredients and raw material inventory"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:b,disabled:o,className:`flex items-center ${o?"btn-disabled":"btn-primary"}`,title:"Sync inventory with Zoho",children:[n.jsx(p2,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),o?"Syncing...":"Sync Inventory"]}),n.jsxs("button",{onClick:v,disabled:c,className:`flex items-center ${c?"btn-disabled":"btn-secondary"}`,title:"Auto-distribute all items to outlets",children:[n.jsx(ta,{className:`h-4 w-4 mr-2 ${c?"animate-pulse":""}`}),c?"Transferring...":"Create Transfer"]}),n.jsxs("button",{onClick:()=>e("/raw-materials/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Ingredient"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search materials by name, code, or description...",className:"input-field pl-10",value:d,onChange:k=>f(k.target.value)})]})}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("button",{onClick:E,disabled:j.length===0,className:j.length===0?"btn-disabled flex items-center":"btn-secondary flex items-center",title:"Export to CSV",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:m,onChange:k=>p(k.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),O.map(k=>n.jsx("option",{value:k,children:k},k))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:g,onChange:k=>h(k.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Status"}),n.jsxs("select",{className:"input-field",value:y,onChange:k=>w(k.target.value),children:[n.jsx("option",{value:"",children:"All Stock Levels"}),n.jsx("option",{value:"low",children:"Low Stock"}),n.jsx("option",{value:"medium",children:"Medium Stock"}),n.jsx("option",{value:"good",children:"Good Stock"})]})]})]}),n.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600",children:n.jsxs("span",{children:["Showing ",j.length," of ",r.length," materials",(d||m||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]})})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-purple-50",children:"Central Kitchen"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:"Kuwait City"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-green-50",children:"360 Mall"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-orange-50",children:"Vibes Complex"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-pink-50",children:"Taiba Kitchen"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Stock"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:14,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[n.jsx("div",{className:"text-gray-400",children:n.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No ingredients found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:r.length===0?"Get started by syncing with Zoho Inventory or adding ingredients manually.":"Try adjusting your filters or search criteria."}),r.length===0&&n.jsxs("button",{onClick:b,disabled:o,className:`${o?"btn-disabled":"btn-primary"} inline-flex items-center`,children:[n.jsx(p2,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),o?"Syncing...":"Sync Inventory"]})]})]})})}):j.map(k=>{var A,P,I,F,q;const C=N(k.currentStock,k.minimumStock);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.materialCode}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:k.materialName}),k.description&&n.jsx("div",{className:"text-xs text-gray-500",children:k.description})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:k.subCategory})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:k.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",k.unitPrice?Number(k.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-purple-900 bg-purple-50",children:((A=k.locationStocks)==null?void 0:A.centralKitchen)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-blue-900 bg-blue-50",children:((P=k.locationStocks)==null?void 0:P.kuwaitCity)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-green-900 bg-green-50",children:((I=k.locationStocks)==null?void 0:I.mall360)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-orange-900 bg-orange-50",children:((F=k.locationStocks)==null?void 0:F.vibesComplex)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-pink-900 bg-pink-50",children:((q=k.locationStocks)==null?void 0:q.taibaKitchen)||0}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-bold",children:k.currentStock}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.color}`,children:C.status})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.status})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>e(`/raw-materials/edit/${k._id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_(k._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},k._id)})})]})})})]})},Xle=()=>{const e=ct(),[t,r]=T.useState({materialCode:"",materialName:"",description:"",category:"",unitOfMeasure:"",unitPrice:"",minimumStock:"",maximumStock:"",currentStock:"",supplierId:"",isActive:!0}),[a,s]=T.useState({}),i=["Fresh Produce","Pantry","Dairy Alternatives","Sweeteners","Beverages","Supplements","Superfoods","Dairy","Bakery","Spices","Other"],o=["PC","TBSP","CUP","TSP","PINCH","SCOOP","HANDFUL","SLICE","OZ","LB","KG","LTR","Other"],l=()=>{const d={};return t.materialCode.trim()||(d.materialCode="Material code is required"),t.materialName.trim()||(d.materialName="Material name is required"),t.category||(d.category="Category is required"),t.unitOfMeasure||(d.unitOfMeasure="Unit of measure is required"),(!t.unitPrice||parseFloat(t.unitPrice)<0)&&(d.unitPrice="Valid unit price is required"),(!t.minimumStock||parseInt(t.minimumStock)<0)&&(d.minimumStock="Valid minimum stock is required"),(!t.maximumStock||parseInt(t.maximumStock)<0)&&(d.maximumStock="Valid maximum stock is required"),(!t.currentStock||parseInt(t.currentStock)<0)&&(d.currentStock="Valid current stock is required"),s(d),Object.keys(d).length===0},c=async d=>{if(d.preventDefault(),!!l())try{const f=await de.createRawMaterial(t);f.success?e("/raw-materials"):alert("Failed to create material: "+f.message)}catch(f){alert("Error creating material: "+(f instanceof Error?f.message:"Unknown error")),console.error("Error creating material:",f)}},u=(d,f)=>{r(m=>({...m,[d]:f})),a[d]&&s(m=>({...m,[d]:""}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Material"}),n.jsx("p",{className:"text-gray-600",children:"Create a new raw material entry"})]}),n.jsxs("button",{onClick:()=>e("/raw-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Raw Materials"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:c,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.materialCode?"border-red-500":""}`,value:t.materialCode,onChange:d=>u("materialCode",d.target.value),placeholder:"RM-001"}),a.materialCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.materialCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.materialName?"border-red-500":""}`,value:t.materialName,onChange:d=>u("materialName",d.target.value),placeholder:"Steel Rod 12mm"}),a.materialName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.materialName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.description,onChange:d=>u("description",d.target.value),placeholder:"Material description"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),n.jsxs("select",{className:`input-field ${a.category?"border-red-500":""}`,value:t.category,onChange:d=>u("category",d.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),i.map(d=>n.jsx("option",{value:d,children:d},d))]}),a.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit of Measure *"}),n.jsxs("select",{className:`input-field ${a.unitOfMeasure?"border-red-500":""}`,value:t.unitOfMeasure,onChange:d=>u("unitOfMeasure",d.target.value),children:[n.jsx("option",{value:"",children:"Select Unit"}),o.map(d=>n.jsx("option",{value:d,children:d},d))]}),a.unitOfMeasure&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unitOfMeasure})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing & Stock Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),n.jsx("input",{type:"number",step:"0.01",className:`input-field pl-8 ${a.unitPrice?"border-red-500":""}`,value:t.unitPrice,onChange:d=>u("unitPrice",d.target.value),placeholder:"0.00"})]}),a.unitPrice&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unitPrice})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.currentStock?"border-red-500":""}`,value:t.currentStock,onChange:d=>u("currentStock",d.target.value),placeholder:"0"}),a.currentStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.currentStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.minimumStock?"border-red-500":""}`,value:t.minimumStock,onChange:d=>u("minimumStock",d.target.value),placeholder:"0"}),a.minimumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.minimumStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.maximumStock?"border-red-500":""}`,value:t.maximumStock,onChange:d=>u("maximumStock",d.target.value),placeholder:"0"}),a.maximumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.maximumStock})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier ID"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierId,onChange:d=>u("supplierId",d.target.value),placeholder:"SUP-001"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:t.isActive,onChange:d=>u("isActive",d.target.checked)}),n.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active Material"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Save Material"]})]})]})})]})},Yle=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({materialCode:"",materialName:"",description:"",category:"",unitOfMeasure:"",unitPrice:"",minimumStock:"",maximumStock:"",currentStock:"",supplierId:"",isActive:!0}),[s,i]=T.useState({}),[o,l]=T.useState(!0),c=["Fresh Produce","Pantry","Dairy Alternatives","Sweeteners","Beverages","Supplements","Superfoods","Dairy","Bakery","Spices","Other"],u=["PC","TBSP","CUP","TSP","PINCH","SCOOP","HANDFUL","SLICE","OZ","LB","KG","LTR","Other"];T.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{l(!0);const g=await de.getRawMaterial(t);if(g.success){const h=g.data;a({materialCode:h.materialCode,materialName:h.materialName,description:h.description,category:h.category,unitOfMeasure:h.unitOfMeasure,unitPrice:h.unitPrice.toString(),minimumStock:h.minimumStock.toString(),maximumStock:h.maximumStock.toString(),currentStock:h.currentStock.toString(),supplierId:h.supplierId||"",isActive:h.isActive})}else alert("Failed to load material"),e("/raw-materials")}catch(g){alert("Error loading material: "+(g instanceof Error?g.message:"Unknown error")),e("/raw-materials")}finally{l(!1)}},f=()=>{const g={};return r.materialCode.trim()||(g.materialCode="Material code is required"),r.materialName.trim()||(g.materialName="Material name is required"),r.category||(g.category="Category is required"),r.unitOfMeasure||(g.unitOfMeasure="Unit of measure is required"),(!r.unitPrice||parseFloat(r.unitPrice)<0)&&(g.unitPrice="Valid unit price is required"),(!r.minimumStock||parseInt(r.minimumStock)<0)&&(g.minimumStock="Valid minimum stock is required"),(!r.maximumStock||parseInt(r.maximumStock)<0)&&(g.maximumStock="Valid maximum stock is required"),(!r.currentStock||parseInt(r.currentStock)<0)&&(g.currentStock="Valid current stock is required"),i(g),Object.keys(g).length===0},m=async g=>{if(g.preventDefault(),!!f())try{const h=await de.updateRawMaterial(t,r);h.success?e("/raw-materials"):alert("Failed to update material: "+h.message)}catch(h){alert("Error updating material: "+(h instanceof Error?h.message:"Unknown error")),console.error("Error updating material:",h)}},p=(g,h)=>{a(y=>({...y,[g]:h})),s[g]&&i(y=>({...y,[g]:""}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading material data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Material"}),n.jsx("p",{className:"text-gray-600",children:"Update material information"})]}),n.jsxs("button",{onClick:()=>e("/raw-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Raw Materials"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:m,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.materialCode?"border-red-500":""}`,value:r.materialCode,onChange:g=>p("materialCode",g.target.value),placeholder:"RM-001"}),s.materialCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.materialCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.materialName?"border-red-500":""}`,value:r.materialName,onChange:g=>p("materialName",g.target.value),placeholder:"Steel Rod 12mm"}),s.materialName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.materialName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.description,onChange:g=>p("description",g.target.value),placeholder:"Material description"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),n.jsxs("select",{className:`input-field ${s.category?"border-red-500":""}`,value:r.category,onChange:g=>p("category",g.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),c.map(g=>n.jsx("option",{value:g,children:g},g))]}),s.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit of Measure *"}),n.jsxs("select",{className:`input-field ${s.unitOfMeasure?"border-red-500":""}`,value:r.unitOfMeasure,onChange:g=>p("unitOfMeasure",g.target.value),children:[n.jsx("option",{value:"",children:"Select Unit"}),u.map(g=>n.jsx("option",{value:g,children:g},g))]}),s.unitOfMeasure&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.unitOfMeasure})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing & Stock Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),n.jsx("input",{type:"number",step:"0.01",className:`input-field pl-8 ${s.unitPrice?"border-red-500":""}`,value:r.unitPrice,onChange:g=>p("unitPrice",g.target.value),placeholder:"0.00"})]}),s.unitPrice&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.unitPrice})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.currentStock?"border-red-500":""}`,value:r.currentStock,onChange:g=>p("currentStock",g.target.value),placeholder:"0"}),s.currentStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.currentStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.minimumStock?"border-red-500":""}`,value:r.minimumStock,onChange:g=>p("minimumStock",g.target.value),placeholder:"0"}),s.minimumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.minimumStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.maximumStock?"border-red-500":""}`,value:r.maximumStock,onChange:g=>p("maximumStock",g.target.value),placeholder:"0"}),s.maximumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.maximumStock})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier ID"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierId,onChange:g=>p("supplierId",g.target.value),placeholder:"SUP-001"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:r.isActive,onChange:g=>p("isActive",g.target.checked)}),n.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active Material"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update Material"]})]})]})})]})},Qle=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,c]=T.useState(null),[u,d]=T.useState(!1),[f,m]=T.useState(""),[p,g]=T.useState(""),[h,y]=T.useState("createdAt"),[w,S]=T.useState("desc"),[v,x]=T.useState(!1),b=T.useRef(null);T.useEffect(()=>{N()},[]);const N=async()=>{try{s(!0),o(null);const I=await de.getBillOfMaterials({limit:1e3,search:f,status:p,sortBy:h,sortOrder:w});I.success?(console.log("Loaded BOMs:",I.data),r(I.data)):o("Failed to load BOMs")}catch(I){o(I instanceof Error?I.message:"Failed to load BOMs"),console.error("Error loading BOMs:",I)}finally{s(!1)}};T.useEffect(()=>{a||N()},[f,p,h,w]);const j=t.filter(I=>{const F=I.productName.toLowerCase().includes(f.toLowerCase())||I.bomCode.toLowerCase().includes(f.toLowerCase())||I.productDescription.toLowerCase().includes(f.toLowerCase()),q=p===""||I.status===p;return F&&q}),O=()=>{m(""),g(""),y("createdAt"),S("desc")},_=I=>{c(I),d(!0)},E=async I=>{if(console.log("Deleting BOM with ID:",I),!I){alert("Error: BOM ID is missing");return}if(window.confirm("Are you sure you want to delete this BOM?"))try{(await de.deleteBillOfMaterial(I)).success?await N():alert("Failed to delete BOM")}catch(F){alert("Error deleting BOM: "+(F instanceof Error?F.message:"Unknown error")),console.error("Error deleting BOM:",F)}},k=()=>{if(j.length===0){alert("No BOMs to export");return}const I=[["BOM Code","Product Name","Product Description","Status","Version","Created At","Updated At","Notes"].join(","),...j.map(V=>[V.bomCode,V.productName,V.productDescription,V.status,V.version,new Date(V.createdAt).toLocaleDateString(),new Date(V.updatedAt).toLocaleDateString(),""].map(re=>`"${re}"`).join(","))].join(`
`),F=new Blob([I],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),H=URL.createObjectURL(F);q.setAttribute("href",H),q.setAttribute("download",`bom-recipes-${new Date().toISOString().split("T")[0]}.csv`),q.style.visibility="hidden",document.body.appendChild(q),q.click(),document.body.removeChild(q)},C=()=>{var I;(I=b.current)==null||I.click()},A=async I=>{var q;const F=(q=I.target.files)==null?void 0:q[0];if(F){if(!F.name.toLowerCase().endsWith(".csv")){alert("Please select a CSV file");return}try{x(!0);const V=(await F.text()).split(`
`).filter(J=>J.trim());if(V.length<2){alert("CSV file must contain at least a header row and one data row");return}const re=V.slice(1);let oe=0,U=0;for(const J of re)try{const Q=J.split(",").map(ue=>ue.replace(/"/g,"").trim()),X={bomCode:Q[0]||"",productName:Q[1]||"",productDescription:Q[2]||"",status:Q[3]||"Draft",version:Q[4]||"1.0",notes:Q[7]||""};(await de.createBillOfMaterial(X)).success?oe++:U++}catch{U++}alert(`Import completed!

Successfully imported: ${oe} BOMs
Errors: ${U}`),await N()}catch(H){alert("Error importing file: "+(H instanceof Error?H.message:"Unknown error"))}finally{x(!1),b.current&&(b.current.value="")}}},P=()=>{const F=[["BOM Code","Product Name","Product Description","Status","Version","Created At","Updated At","Notes"],["BOM-001","Fresh Green Smoothie","Healthy smoothie with spinach and fruits","Active","1.0","2024-01-15","2024-01-15","Popular breakfast item"],["BOM-002","Protein Power Bowl","High protein meal bowl","Active","1.0","2024-01-15","2024-01-15","Post-workout meal"]].map(re=>re.map(oe=>`"${oe}"`).join(",")).join(`
`),q=new Blob([F],{type:"text/csv;charset=utf-8;"}),H=document.createElement("a"),V=URL.createObjectURL(q);H.setAttribute("href",V),H.setAttribute("download","bom-sample-template.csv"),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H)};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading BOMs..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:N,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recipes (BOM)"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant recipes and product formulations"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>e("/bill-of-materials/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Recipe"]}),n.jsxs("button",{onClick:()=>e("/finished-goods/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Finished Good"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search recipes by name, code, or description...",className:"input-field pl-10",value:f,onChange:I=>m(I.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:O,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{onClick:k,className:"btn-secondary flex items-center",title:"Export BOMs to CSV",disabled:j.length===0,children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs("button",{onClick:C,className:"btn-secondary flex items-center",title:"Import BOMs from CSV",disabled:v,children:[n.jsx(Va,{className:"h-4 w-4 mr-2"}),v?"Importing...":"Import"]}),n.jsxs("button",{onClick:P,className:"btn-secondary flex items-center",title:"Download sample CSV template",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Sample CSV"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:I=>g(I.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Obsolete",children:"Obsolete"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:h,onChange:I=>y(I.target.value),children:[n.jsx("option",{value:"bomCode",children:"BOM Code"}),n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"totalCost",children:"Total Cost"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"createdAt",children:"Date Created"})]}),n.jsx("button",{onClick:()=>S(w==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${w==="asc"?"Descending":"Ascending"}`,children:w==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",j.length," of ",t.length," recipes",(f||p)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),j.length!==t.length&&n.jsx("button",{onClick:O,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"BOM Code"}),n.jsx("th",{className:"table-header",children:"Product Name"}),n.jsx("th",{className:"table-header",children:"Description"}),n.jsx("th",{className:"table-header",children:"Version"}),n.jsx("th",{className:"table-header",children:"Total Cost"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Items"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(I=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:I.bomCode}),n.jsx("td",{className:"table-cell",children:n.jsx("div",{className:"text-gray-900",children:I.productName})}),n.jsx("td",{className:"table-cell",children:n.jsx("div",{className:"text-gray-600 text-sm max-w-xs truncate",children:I.productDescription})}),n.jsx("td",{className:"table-cell",children:I.version}),n.jsxs("td",{className:"table-cell",children:[I.totalCost.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${I.status==="Active"?"bg-green-100 text-green-800":I.status==="Draft"?"bg-yellow-100 text-yellow-800":I.status==="Obsolete"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:I.status})}),n.jsx("td",{className:"table-cell",children:n.jsxs("span",{className:"text-sm text-gray-600",children:[I.items.length," ingredients"]})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>_(I),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Vi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/bill-of-materials/edit/${I.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>E(I.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},I.id))})]})})}),n.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Total Recipes: ",n.jsx("span",{className:"font-semibold text-blue-600",children:t.length})]}),u&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"BOM Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BOM Code"}),n.jsx("p",{className:"text-gray-900 font-mono",children:l.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("p",{className:"text-gray-900",children:l.productName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version"}),n.jsx("p",{className:"text-gray-900",children:l.version})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${l.status==="Active"?"bg-green-100 text-green-800":l.status==="Draft"?"bg-yellow-100 text-yellow-800":l.status==="Obsolete"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:l.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[l.totalCost.toFixed(2)," KWD"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effective Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.effectiveDate).toLocaleDateString()})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:l.productDescription})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Ingredients (",l.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.items.map((I,F)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:I.materialCode}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:I.materialName}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:I.quantity}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:I.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[I.unitCost.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[I.totalCost.toFixed(2)," KWD"]})]},F))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:l.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:l.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/bill-of-materials/edit/${l.id}`)},className:"btn-primary",children:"Edit BOM"})]})]})}),n.jsx("input",{type:"file",ref:b,onChange:A,accept:".csv",style:{display:"none"}})]})},oo=["km (Kilometers)","lb (Pounds)","mg (Milli Grams)","ml (Milli Litre)","m (Meter)","pcs (Pieces)","pcs 6 (Pieces 6)","pcs 12 (Pieces 12)","No.s (Number)","ltr (Liter)","kg 2 (Kilograms2)","kg 5 (Kilograms 5)","kg 10 (Kilograms 10)","Pr (Portion)","kg (Kilograms)"],Jle=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1,displayValue:i})=>{const[o,l]=T.useState(!1),[c,u]=T.useState(""),[d,f]=T.useState(r),m=T.useRef(null),p=T.useRef(null);T.useEffect(()=>{f(c?r.filter(w=>w.label.toLowerCase().includes(c.toLowerCase())||w.value.toLowerCase().includes(c.toLowerCase())):r)},[c,r]),T.useEffect(()=>{const w=S=>{m.current&&!m.current.contains(S.target)&&(l(!1),u(""))};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),T.useEffect(()=>{o&&p.current&&p.current.focus()},[o]);const g=w=>{t(w),l(!1),u("")},h=r.find(w=>w.value===e),y=i!==void 0?e?i:"":h?h.label:a;return n.jsxs("div",{className:"relative",ref:m,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!o),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:e?"text-gray-900":"text-gray-500",children:y||a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]})}),o&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:p,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:c,onChange:w=>u(w.target.value),onClick:w=>w.stopPropagation()})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:d.length>0?d.map(w=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:S=>{S.stopPropagation(),g(w.value)},children:w.label},w.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:r.length===0?"No items available":"No items found"})})]})]})},Zle=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState({bomCode:"",productName:"",productDescription:"",version:"1.0",effectiveDate:new Date().toISOString().split("T")[0],status:"Draft",items:[]}),[l,c]=T.useState({}),[u,d]=T.useState(!1),[f,m]=T.useState({}),p=["Draft","Active","Obsolete"];T.useEffect(()=>{(async()=>{var O,_,E;try{const k=[];let C=1;for(;;){const P=await de.getCentralKitchenRawMaterials({page:C,limit:1e3});if(P!=null&&P.success&&Array.isArray(P.data)&&k.push(...P.data),!(((O=P==null?void 0:P.pagination)==null?void 0:O.hasNext)||(((_=P==null?void 0:P.pagination)==null?void 0:_.currentPage)||C)<(((E=P==null?void 0:P.pagination)==null?void 0:E.totalPages)||C))||(C+=1,C>20))break}r(k);const A=Array.from(new Set(k.map(P=>(P.unitOfMeasure||"").toString().trim()).filter(P=>P&&P.length>0)))}catch(k){console.error("Failed to load central kitchen raw materials",k)}})()},[]),T.useEffect(()=>{(async()=>{try{const O=await de.getBillOfMaterials({limit:1e3,status:""});if(O!=null&&O.success&&Array.isArray(O.data)){const _=i.bomCode,E=_?O.data.filter(k=>k.bomCode!==_):O.data;s(E)}}catch(O){console.error("Failed to load existing BOMs",O)}})()},[i.bomCode]),T.useEffect(()=>{(async()=>{var O;if(!(i.bomCode&&i.bomCode.trim().length>0))try{const _=await de.getBillOfMaterials({limit:1,page:1,sortBy:"createdAt",sortOrder:"desc"});let E="";const k=(O=_==null?void 0:_.data)==null?void 0:O[0],C=k==null?void 0:k.bomCode;if(C){const A=C.match(/^(.*?)(\d+)$/);if(A){const P=A[1],I=parseInt(A[2],10),F=A[2].length;E=`${P}${String(I+1).padStart(F,"0")}`}}if(!E){const A=new Date,P=A.getFullYear(),I=String(A.getMonth()+1).padStart(2,"0"),F=String(A.getDate()).padStart(2,"0"),q=String(A.getHours()).padStart(2,"0"),H=String(A.getMinutes()).padStart(2,"0");E=`BOM-${P}${I}${F}-${q}${H}`}o(A=>({...A,bomCode:E}))}catch{const E=new Date,k=E.getFullYear(),C=String(E.getMonth()+1).padStart(2,"0"),A=String(E.getDate()).padStart(2,"0"),P=String(E.getHours()).padStart(2,"0"),I=String(E.getMinutes()).padStart(2,"0"),F=`BOM-${k}${C}${A}-${P}${I}`;o(q=>({...q,bomCode:F}))}})()},[]);const g=O=>t.find(_=>_.materialCode===O||_.id&&_.id===O),h=O=>a.find(_=>_.bomCode===O||_.id&&_.id===O),y=O=>{if(!O)return oo[0]||"";const _=O.toLowerCase().trim(),E=oo.find(P=>P.toLowerCase().trim()===_);if(E)return E;const k=_,C=oo.filter(P=>P.split(" ")[0].toLowerCase().trim()===k);if(C.length>0){const P=C.find(I=>{const F=I.split(" "),q=F[0].toLowerCase().trim();if(q===k&&F.length>1){const H=F[1].toLowerCase().trim();if(/^\d/.test(H))return!1}return q===k});return P||C[0]}const A=oo.find(P=>P.toLowerCase().includes(_)||_.includes(P.split(" ")[0].toLowerCase()));return A||oo[0]||O},w=(O,_)=>{if(!O)return 0;const E=Number(O.unitPrice||0);if(E<=0)return 0;const k=(O.unitOfMeasure||"").toString().trim().toLowerCase(),C=(_||"").toString().trim().toLowerCase(),A=C.split(" ")[0].split("(")[0].trim();if(k===A||k===C)return E;const P={kg:["kilogram","kilograms","kg"],pcs:["piece","pieces","pcs"],g:["gram","grams","g"],ltr:["liter","litre","liters","litres","ltr","l"],ml:["milliliter","millilitre","milliliters","millilitres","ml"],m:["meter","metre","meters","metres","m"],cm:["centimeter","centimetre","centimeters","centimetres","cm"],in:["inch","inches","in"],ft:["foot","feet","ft"],box:["box","boxes"],dz:["dozen","dz"],pr:["portion","portions","pr"]};for(const[I,F]of Object.entries(P)){const q=F.some(V=>V.toLowerCase()===k),H=F.some(V=>V.toLowerCase()===A);if(q&&H)return E}return k==="kg"&&A==="g"?E/1e3:k==="g"&&A==="kg"?E*1e3:k==="kg"&&A==="grams"?E/1e3:k==="grams"&&A==="kg"?E*1e3:k==="ltr"&&A==="ml"?E/1e3:k==="ml"&&A==="ltr"?E*1e3:k==="liter"&&A==="ml"?E/1e3:k==="ml"&&A==="liter"?E*1e3:E},S=()=>{const O={};if(i.bomCode.trim()?i.bomCode.trim().length<3&&(O.bomCode="BOM code must be at least 3 characters"):O.bomCode="BOM code is required",i.productName.trim()||(O.productName="Product name is required"),i.version.trim()?/^\d+\.\d+$/.test(i.version.trim())||(O.version="Version must be in format X.X (e.g., 1.0)"):O.version="Version is required",!i.effectiveDate)O.effectiveDate="Effective date is required";else{const _=new Date(i.effectiveDate);(isNaN(_.getTime())||_<new Date("2020-01-01"))&&(O.effectiveDate="Please select a valid date after 2020")}return i.items.length===0?O.items="At least one BOM item is required":i.items.forEach((_,E)=>{!_.materialCode.trim()&&!_.materialId&&(O[`item_${E}_code`]="Material is required"),(!_.quantity||_.quantity<=0)&&(O[`item_${E}_quantity`]="Quantity must be greater than 0"),_.unitOfMeasure.trim()||(O[`item_${E}_unit`]="Unit of measure is required")}),c(O),Object.keys(O).length===0},v=async O=>{if(O.preventDefault(),!!S())try{d(!0);const _=i.items.map(A=>{if((A.itemType||"rawMaterial")==="bom"){const I=h(A.bomCode||A.bomId||""),F=(I==null?void 0:I.totalCost)||A.unitCost||0,q=Math.round(F*(A.quantity||0)*100)/100;return{...A,itemType:"bom",bomCode:(I==null?void 0:I.bomCode)||A.bomCode||"",bomId:(I==null?void 0:I.id)||A.bomId||"",materialCode:(I==null?void 0:I.bomCode)||A.materialCode||"",materialName:(I==null?void 0:I.productName)||A.materialName||"",unitOfMeasure:A.unitOfMeasure||"pcs",unitCost:F,totalCost:q}}else{const I=g(A.materialCode||A.materialId||""),F=A.unitOfMeasure||"pcs",q=w(I,F),H=Math.round(q*(A.quantity||0)*100)/100,V=(A.materialCode||(I==null?void 0:I.materialCode)||"").toString().trim().toUpperCase(),re=(A.materialName||(I==null?void 0:I.materialName)||"").toString().trim();return{...A,itemType:"rawMaterial",materialCode:V,materialName:re,materialId:(I==null?void 0:I.id)||A.materialId||"",unitOfMeasure:F,unitCost:q,totalCost:H}}}),E=_.reduce((A,P)=>A+(P.totalCost||0),0),k={bomCode:i.bomCode.trim().toUpperCase().replace(/\s+/g,"-"),productName:i.productName.trim(),productDescription:i.productDescription.trim(),version:i.version.trim(),effectiveDate:i.effectiveDate,status:i.status,totalCost:Math.round(E*100)/100,items:_.map(A=>({itemType:A.itemType||"rawMaterial",materialId:A.materialId||"",materialCode:(A.materialCode||"").toString().trim().toUpperCase(),materialName:(A.materialName||"").toString().trim(),bomId:A.bomId||"",bomCode:A.bomCode||"",quantity:parseFloat(A.quantity.toString()),unitOfMeasure:(A.unitOfMeasure||"pcs").toString().trim(),unitCost:Number(A.unitCost||0),totalCost:Number(A.totalCost||0)})),createdBy:"admin",updatedBy:"admin"};console.log("Creating BOM:",k);const C=await de.createBillOfMaterial(k);C.success?(console.log("BOM created successfully:",C.data),e("/bill-of-materials")):alert("Failed to create BOM: "+C.message)}catch(_){console.error("Error creating BOM:",_),alert("Error creating BOM: "+(_ instanceof Error?_.message:"Unknown error"))}finally{d(!1)}},x=(O,_)=>{o(E=>({...E,[O]:_})),l[O]&&c(E=>({...E,[O]:""}))},b=()=>{const O={itemType:"rawMaterial",materialId:"",materialCode:"",materialName:"",bomCode:"",bomId:"",quantity:1,unitOfMeasure:oo[0]||"pcs",unitCost:0,totalCost:0};o(_=>({..._,items:[..._.items,O]}))},N=(O,_,E)=>{o(k=>({...k,items:k.items.map((C,A)=>{if(A===O){const P={...C,[_]:E};if(P.itemType==="bom"){const I=h(P.bomCode||P.bomId||"");I&&(P.unitCost=I.totalCost||0,P.totalCost=Math.round((P.quantity||0)*(I.totalCost||0)*100)/100)}else{const I=P.materialCode||P.materialId||"",F=g(I),q=P.unitOfMeasure||"";let H=0;F&&q&&(H=w(F,q),H===0&&F.unitPrice&&F.unitPrice>0&&console.log("Unit cost calculation debug:",{materialCode:F.materialCode,materialUnit:F.unitOfMeasure,selectedUnit:q,materialPrice:F.unitPrice})),P.unitCost=H,P.totalCost=Math.round((P.quantity||0)*H*100)/100}return P}return C})}))},j=O=>{o(_=>({..._,items:_.items.filter((E,k)=>k!==O)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Recipe"}),n.jsx("p",{className:"text-gray-600",children:"Create a new bill of materials"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Recipes"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BOM Code *"}),n.jsx("input",{type:"text",className:`input-field ${l.bomCode?"border-red-500":""}`,value:i.bomCode,onChange:O=>x("bomCode",O.target.value),placeholder:"SANDWICH-001"}),l.bomCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version *"}),n.jsx("input",{type:"text",className:`input-field ${l.version?"border-red-500":""}`,value:i.version,onChange:O=>x("version",O.target.value),placeholder:"1.0"}),l.version&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.version})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),n.jsx("input",{type:"text",className:`input-field ${l.productName?"border-red-500":""}`,value:i.productName,onChange:O=>x("productName",O.target.value),placeholder:"Chicken Club Sandwich"}),l.productName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.productName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:i.productDescription,onChange:O=>x("productDescription",O.target.value),placeholder:"Delicious sandwich with grilled chicken, bacon, lettuce, tomato, and mayo on toasted bread"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date *"}),n.jsx("input",{type:"date",className:`input-field ${l.effectiveDate?"border-red-500":""}`,value:i.effectiveDate,onChange:O=>x("effectiveDate",O.target.value)}),l.effectiveDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.effectiveDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:i.status,onChange:O=>x("status",O.target.value),children:p.map(O=>n.jsx("option",{value:O,children:O},O))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recipe Items"}),n.jsxs("button",{type:"button",onClick:b,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),l.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:l.items}),n.jsx("div",{className:"space-y-4",children:i.items.map((O,_)=>{const E=f[_]||(O.itemType==="bom"?"bom":O.itemType==="rawMaterial"?"rawMaterial":"all");return n.jsxs("div",{className:"grid grid-cols-9 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),n.jsxs("select",{className:"input-field text-sm",value:E,onChange:k=>{const C=k.target.value;m(A=>({...A,[_]:C})),C==="rawMaterial"&&O.itemType==="bom"?(N(_,"itemType","rawMaterial"),N(_,"materialCode",""),N(_,"materialName",""),N(_,"bomCode",""),N(_,"bomId","")):C==="bom"&&O.itemType==="rawMaterial"&&(N(_,"itemType","bom"),N(_,"materialCode",""),N(_,"materialName",""),N(_,"bomCode",""),N(_,"bomId",""))},children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"rawMaterial",children:"Raw Material"}),n.jsx("option",{value:"bom",children:"Recipe"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:O.itemType==="bom"?"Recipe Code":"Material Code"}),n.jsx(Jle,{value:O.itemType==="bom"&&O.bomCode||O.materialCode,displayValue:O.itemType==="bom"&&O.bomCode||O.materialCode,onChange:k=>{const C=h(k),A=g(k);if(C)N(_,"itemType","bom"),N(_,"bomCode",C.bomCode),N(_,"bomId",C.id||""),N(_,"materialCode",C.bomCode),N(_,"materialName",C.productName),N(_,"materialId",""),N(_,"unitOfMeasure","pcs"),N(_,"unitCost",C.totalCost||0),N(_,"totalCost",(C.totalCost||0)*(O.quantity||1)),m(P=>({...P,[_]:"bom"}));else if(A){N(_,"itemType","rawMaterial");const P=(A.unitOfMeasure||"").toString(),I=y(P);N(_,"materialCode",k),N(_,"materialName",A.materialName||""),N(_,"materialId",A.id||""),N(_,"bomCode",""),N(_,"bomId",""),N(_,"unitOfMeasure",I),m(F=>({...F,[_]:"rawMaterial"}))}else N(_,"materialCode",k),N(_,"materialName",""),N(_,"materialId","")},placeholder:"Select material or recipe",options:(()=>{const k=[];return(E==="all"||E==="rawMaterial")&&k.push(...t.map(C=>({value:C.materialCode,label:` ${C.materialCode} - ${C.materialName} (Raw Material)`}))),(E==="all"||E==="bom")&&k.push(...a.map(C=>({value:C.bomCode,label:` ${C.bomCode} - ${C.productName} (Recipe)`}))),k})()})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:O.itemType==="bom"?"Recipe Name":"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:O.materialName,readOnly:!0}),O.itemType==="bom"&&n.jsx("span",{className:"text-xs text-blue-600 mt-1 block",children:" Nested Recipe"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:O.quantity,onChange:k=>N(_,"quantity",parseFloat(k.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("select",{className:"input-field text-sm",value:O.unitOfMeasure,onChange:k=>N(_,"unitOfMeasure",k.target.value),disabled:O.itemType==="bom",title:O.itemType==="bom"?'Unit is fixed to "pcs" for nested recipes':"",children:oo.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost"}),n.jsx("input",{type:"number",disabled:O.itemType==="bom",title:O.itemType==="bom"?"Unit cost is based on nested recipe total cost":"",step:"0.0001",className:"input-field text-sm bg-gray-100",value:Number(O.unitCost||0).toFixed(4),readOnly:!0})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>j(_),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-9",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Cost: ",O.totalCost.toFixed(2)," KWD"]})})]},_)})}),i.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total BOM Cost: ",i.items.reduce((O,_)=>O+_.totalCost,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/bill-of-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:`btn-primary flex items-center ${u?"opacity-60 cursor-not-allowed":""}`,disabled:u,children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),u?"Creating...":"Create BOM"]})]})]})})]})},ece=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({bomCode:"",productName:"",productDescription:"",version:"",effectiveDate:"",status:"Draft",items:[]}),[s,i]=T.useState({}),[o,l]=T.useState(!0),c=["Draft","Active","Obsolete"],u={id:"1",bomCode:"BOM-001",productName:"Steel Frame Assembly",productDescription:"Complete steel frame for construction",version:"1.0",effectiveDate:new Date("2024-01-01").toISOString(),status:"Active",totalCost:1250.75,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:10,unitOfMeasure:"KG",unitCost:45.5,totalCost:455},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:5,unitOfMeasure:"SQM",unitCost:125,totalCost:625}],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-15").toISOString(),createdBy:"admin",updatedBy:"admin"};T.useEffect(()=>{setTimeout(()=>{a({bomCode:u.bomCode,productName:u.productName,productDescription:u.productDescription,version:u.version,effectiveDate:u.effectiveDate.split("T")[0],status:u.status,items:u.items}),l(!1)},500)},[t]);const d=()=>{const y={};return r.bomCode.trim()||(y.bomCode="BOM code is required"),r.productName.trim()||(y.productName="Product name is required"),r.version.trim()||(y.version="Version is required"),r.effectiveDate||(y.effectiveDate="Effective date is required"),r.items.length===0&&(y.items="At least one BOM item is required"),i(y),Object.keys(y).length===0},f=y=>{if(y.preventDefault(),!d())return;const w=r.items.reduce((v,x)=>v+x.totalCost,0),S={...u,bomCode:r.bomCode,productName:r.productName,productDescription:r.productDescription,version:r.version,effectiveDate:new Date(r.effectiveDate).toISOString(),status:r.status,totalCost:w,items:r.items,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating BOM:",S),e("/bill-of-materials")},m=(y,w)=>{a(S=>({...S,[y]:w})),s[y]&&i(S=>({...S,[y]:""}))},p=()=>{const y={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:"",unitCost:0,totalCost:0};a(w=>({...w,items:[...w.items,y]}))},g=(y,w,S)=>{a(v=>({...v,items:v.items.map((x,b)=>{if(b===y){const N={...x,[w]:S};return(w==="quantity"||w==="unitCost")&&(N.totalCost=N.quantity*N.unitCost),N}return x})}))},h=y=>{a(w=>({...w,items:w.items.filter((S,v)=>v!==y)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading BOM data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Recipe"}),n.jsx("p",{className:"text-gray-600",children:"Update bill of materials information"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Recipes"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:f,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BOM Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.bomCode?"border-red-500":""}`,value:r.bomCode,onChange:y=>m("bomCode",y.target.value),placeholder:"SANDWICH-001"}),s.bomCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version *"}),n.jsx("input",{type:"text",className:`input-field ${s.version?"border-red-500":""}`,value:r.version,onChange:y=>m("version",y.target.value),placeholder:"1.0"}),s.version&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.version})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.productName?"border-red-500":""}`,value:r.productName,onChange:y=>m("productName",y.target.value),placeholder:"Chicken Club Sandwich"}),s.productName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.productName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.productDescription,onChange:y=>m("productDescription",y.target.value),placeholder:"Delicious sandwich with grilled chicken, bacon, lettuce, tomato, and mayo on toasted bread"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.effectiveDate?"border-red-500":""}`,value:r.effectiveDate,onChange:y=>m("effectiveDate",y.target.value)}),s.effectiveDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.effectiveDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:y=>m("status",y.target.value),children:c.map(y=>n.jsx("option",{value:y,children:y},y))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recipe Items"}),n.jsxs("button",{type:"button",onClick:p,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((y,w)=>n.jsxs("div",{className:"grid grid-cols-6 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:y.materialCode,onChange:S=>g(w,"materialCode",S.target.value),placeholder:"CHICKEN-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:y.materialName,onChange:S=>g(w,"materialName",S.target.value),placeholder:"Chicken Breast"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:y.quantity,onChange:S=>g(w,"quantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:y.unitOfMeasure,onChange:S=>g(w,"unitOfMeasure",S.target.value),placeholder:"grams"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:y.unitCost,onChange:S=>g(w,"unitCost",parseFloat(S.target.value)||0),placeholder:"0.00"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>h(w),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-6",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Cost: ",y.totalCost.toFixed(2)," KWD"]})})]},w))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total BOM Cost: ",r.items.reduce((y,w)=>y+w.totalCost,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/bill-of-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update BOM"]})]})]})})]})},lo=["km (Kilometers)","lb (Pounds)","mg (Milli Grams)","ml (Milli Litre)","m (Meter)","pcs (Pieces)","pcs 6 (Pieces 6)","pcs 12 (Pieces 12)","No.s (Number)","ltr (Liter)","kg 2 (Kilograms2)","kg 5 (Kilograms 5)","kg 10 (Kilograms 10)","Pr (Portion)","kg (Kilograms)"],NO=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1,displayValue:i})=>{const[o,l]=T.useState(!1),[c,u]=T.useState(""),[d,f]=T.useState(r),m=T.useRef(null),p=T.useRef(null);T.useEffect(()=>{f(c?r.filter(w=>w.label.toLowerCase().includes(c.toLowerCase())||w.value.toLowerCase().includes(c.toLowerCase())):r)},[c,r]),T.useEffect(()=>{const w=S=>{m.current&&!m.current.contains(S.target)&&(l(!1),u(""))};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),T.useEffect(()=>{o&&p.current&&p.current.focus()},[o]);const g=w=>{t(w),l(!1),u("")},h=r.find(w=>w.value===e),y=i!==void 0?e?i:"":h?h.label:a;return n.jsxs("div",{className:"relative",ref:m,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!o),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:e?"text-gray-900":"text-gray-500",children:y||a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]})}),o&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:p,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:c,onChange:w=>u(w.target.value),onClick:w=>w.stopPropagation()})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:d.length>0?d.map(w=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:S=>{S.stopPropagation(),g(w.value)},children:w.label},w.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:r.length===0?"No items available":"No items found"})})]})]})},tce=()=>{var E;const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState([]),[l,c]=T.useState({bomCode:"",productName:"",productDescription:"",version:"1.0",effectiveDate:new Date().toISOString().split("T")[0],status:"Draft",items:[]}),[u,d]=T.useState({}),[f,m]=T.useState(!1),[p,g]=T.useState({}),h=["Draft","Active","Obsolete"];T.useEffect(()=>{(async()=>{var k,C,A;try{const P=[];let I=1;for(;;){const q=await de.getCentralKitchenRawMaterials({page:I,limit:1e3});if(q!=null&&q.success&&Array.isArray(q.data)&&P.push(...q.data),!(((k=q==null?void 0:q.pagination)==null?void 0:k.hasNext)||(((C=q==null?void 0:q.pagination)==null?void 0:C.currentPage)||I)<(((A=q==null?void 0:q.pagination)==null?void 0:A.totalPages)||I))||(I+=1,I>20))break}r(P);const F=Array.from(new Set(P.map(q=>(q.unitOfMeasure||"").toString().trim()).filter(q=>q&&q.length>0)))}catch(P){console.error("Failed to load central kitchen raw materials",P)}})()},[]),T.useEffect(()=>{(async()=>{try{const k=await de.getBillOfMaterials({limit:1e3,status:""});if(k!=null&&k.success&&Array.isArray(k.data)){const C=l.bomCode,A=C?k.data.filter(P=>P.bomCode!==C):k.data;s(A)}}catch(k){console.error("Failed to load existing BOMs",k)}})()},[l.bomCode]),T.useEffect(()=>{(async()=>{var k,C,A;try{const P=[];let I=1;for(;;){const F=await de.getCentralKitchenFinishedProducts({page:I,limit:1e3});if(F!=null&&F.success&&Array.isArray(F.data)&&P.push(...F.data),!(((k=F==null?void 0:F.pagination)==null?void 0:k.hasNext)||(((C=F==null?void 0:F.pagination)==null?void 0:C.currentPage)||I)<(((A=F==null?void 0:F.pagination)==null?void 0:A.totalPages)||I))||(I+=1,I>20))break}o(P)}catch(P){console.error("Failed to load central kitchen finished goods",P)}})()},[]);const y=k=>t.find(C=>C.materialCode===k||C.id&&C.id===k),w=k=>a.find(C=>C.bomCode===k||C.id&&C.id===k),S=k=>{if(!k)return lo[0]||"";const C=k.toLowerCase().trim(),A=lo.find(q=>q.toLowerCase().trim()===C);if(A)return A;const P=C,I=lo.filter(q=>q.split(" ")[0].toLowerCase().trim()===P);if(I.length>0){const q=I.find(H=>{const V=H.split(" "),re=V[0].toLowerCase().trim();if(re===P&&V.length>1){const oe=V[1].toLowerCase().trim();if(/^\d/.test(oe))return!1}return re===P});return q||I[0]}const F=lo.find(q=>q.toLowerCase().includes(C)||C.includes(q.split(" ")[0].toLowerCase()));return F||lo[0]||k},v=(k,C)=>{if(!k)return 0;const A=Number(k.unitPrice||0);if(A<=0)return 0;const P=(k.unitOfMeasure||"").toString().trim().toLowerCase(),I=(C||"").toString().trim().toLowerCase(),F=I.split(" ")[0].split("(")[0].trim();if(P===F||P===I)return A;const q={kg:["kilogram","kilograms","kg"],pcs:["piece","pieces","pcs"],g:["gram","grams","g"],ltr:["liter","litre","liters","litres","ltr","l"],ml:["milliliter","millilitre","milliliters","millilitres","ml"],m:["meter","metre","meters","metres","m"],cm:["centimeter","centimetre","centimeters","centimetres","cm"],in:["inch","inches","in"],ft:["foot","feet","ft"],box:["box","boxes"],dz:["dozen","dz"],pr:["portion","portions","pr"]};for(const[H,V]of Object.entries(q)){const re=V.some(U=>U.toLowerCase()===P),oe=V.some(U=>U.toLowerCase()===F);if(re&&oe)return A}return P==="kg"&&F==="g"?A/1e3:P==="g"&&F==="kg"?A*1e3:P==="kg"&&F==="grams"?A/1e3:P==="grams"&&F==="kg"?A*1e3:P==="ltr"&&F==="ml"?A/1e3:P==="ml"&&F==="ltr"?A*1e3:P==="liter"&&F==="ml"?A/1e3:P==="ml"&&F==="liter"?A*1e3:A},x=()=>{const k={};if(l.bomCode.trim()?l.bomCode.trim().length<3&&(k.bomCode="BOM code must be at least 3 characters"):k.bomCode="BOM code is required",l.productName.trim()||(k.productName="Product name is required"),l.version.trim()?/^\d+\.\d+$/.test(l.version.trim())||(k.version="Version must be in format X.X (e.g., 1.0)"):k.version="Version is required",!l.effectiveDate)k.effectiveDate="Effective date is required";else{const C=new Date(l.effectiveDate);(isNaN(C.getTime())||C<new Date("2020-01-01"))&&(k.effectiveDate="Please select a valid date after 2020")}return l.items.length===0?k.items="At least one BOM item is required":l.items.forEach((C,A)=>{!C.materialCode.trim()&&!C.materialId&&(k[`item_${A}_code`]="Material is required"),(!C.quantity||C.quantity<=0)&&(k[`item_${A}_quantity`]="Quantity must be greater than 0"),C.unitOfMeasure.trim()||(k[`item_${A}_unit`]="Unit of measure is required")}),d(k),Object.keys(k).length===0},b=async k=>{if(k.preventDefault(),!!x())try{m(!0);const C=l.items.map(F=>{if((F.itemType||"rawMaterial")==="bom"){const H=w(F.bomCode||F.bomId||""),V=(H==null?void 0:H.totalCost)||F.unitCost||0,re=Math.round(V*(F.quantity||0)*100)/100;return{...F,itemType:"bom",bomCode:(H==null?void 0:H.bomCode)||F.bomCode||"",bomId:(H==null?void 0:H.id)||F.bomId||"",materialCode:(H==null?void 0:H.bomCode)||F.materialCode||"",materialName:(H==null?void 0:H.productName)||F.materialName||"",unitOfMeasure:F.unitOfMeasure||"pcs",unitCost:V,totalCost:re}}else{const H=y(F.materialCode||F.materialId||""),V=F.unitOfMeasure||"pcs",re=v(H,V),oe=Math.round(re*(F.quantity||0)*100)/100,U=(F.materialCode||(H==null?void 0:H.materialCode)||"").toString().trim().toUpperCase(),J=(F.materialName||(H==null?void 0:H.materialName)||"").toString().trim();return{...F,itemType:"rawMaterial",materialCode:U,materialName:J,materialId:(H==null?void 0:H.id)||F.materialId||"",unitOfMeasure:V,unitCost:re,totalCost:oe}}}),A=C.reduce((F,q)=>F+(q.totalCost||0),0),P={bomCode:l.bomCode.trim().toUpperCase().replace(/\s+/g,"-"),productName:l.productName.trim(),productDescription:l.productDescription.trim(),version:l.version.trim(),effectiveDate:l.effectiveDate,status:l.status,totalCost:Math.round(A*100)/100,items:C.map(F=>({itemType:F.itemType||"rawMaterial",materialId:F.materialId||"",materialCode:(F.materialCode||"").toString().trim().toUpperCase(),materialName:(F.materialName||"").toString().trim(),bomId:F.bomId||"",bomCode:F.bomCode||"",quantity:parseFloat(F.quantity.toString()),unitOfMeasure:(F.unitOfMeasure||"pcs").toString().trim(),unitCost:Number(F.unitCost||0),totalCost:Number(F.totalCost||0)})),createdBy:"admin",updatedBy:"admin"};console.log("Creating Finished Good:",P);const I=await de.createBillOfMaterial(P);I.success?(console.log("Finished Good created successfully:",I.data),e("/bill-of-materials")):alert("Failed to create Finished Good: "+I.message)}catch(C){console.error("Error creating Finished Good:",C),alert("Error creating Finished Good: "+(C instanceof Error?C.message:"Unknown error"))}finally{m(!1)}},N=(k,C)=>{c(A=>({...A,[k]:C})),u[k]&&d(A=>({...A,[k]:""}))},j=()=>{const k={itemType:"rawMaterial",materialId:"",materialCode:"",materialName:"",bomCode:"",bomId:"",quantity:1,unitOfMeasure:lo[0]||"pcs",unitCost:0,totalCost:0};c(C=>({...C,items:[...C.items,k]}))},O=(k,C,A)=>{c(P=>({...P,items:P.items.map((I,F)=>{if(F===k){const q={...I,[C]:A};if(q.itemType==="bom"){const H=w(q.bomCode||q.bomId||"");H&&(q.unitCost=H.totalCost||0,q.totalCost=Math.round((q.quantity||0)*(H.totalCost||0)*100)/100)}else{const H=q.materialCode||q.materialId||"",V=y(H),re=q.unitOfMeasure||"";let oe=0;V&&re&&(oe=v(V,re),oe===0&&V.unitPrice&&V.unitPrice>0&&console.log("Unit cost calculation debug:",{materialCode:V.materialCode,materialUnit:V.unitOfMeasure,selectedUnit:re,materialPrice:V.unitPrice})),q.unitCost=oe,q.totalCost=Math.round((q.quantity||0)*oe*100)/100}return q}return I})}))},_=k=>{c(C=>({...C,items:C.items.filter((A,P)=>P!==k)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Finished Good"}),n.jsx("p",{className:"text-gray-600",children:"Create a new finished good recipe"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Recipes"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Finished Good (BOM Code) *"}),n.jsx(NO,{value:l.bomCode,onChange:k=>{const C=i.find(A=>A.productCode===k);C?(c(A=>({...A,bomCode:C.productCode,productName:C.productName,productDescription:C.salesDescription||C.description||C.productName})),u.bomCode&&d(A=>({...A,bomCode:""}))):N("bomCode",k)},options:i.map(k=>({value:k.productCode,label:`${k.productCode} - ${k.productName}`})),placeholder:"Select Finished Good",displayValue:l.bomCode?((E=i.find(k=>k.productCode===l.bomCode))==null?void 0:E.productCode)||l.bomCode:""}),u.bomCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version *"}),n.jsx("input",{type:"text",className:`input-field ${u.version?"border-red-500":""}`,value:l.version,onChange:k=>N("version",k.target.value),placeholder:"1.0"}),u.version&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.version})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),n.jsx("input",{type:"text",className:`input-field ${u.productName?"border-red-500":""}`,value:l.productName,onChange:k=>N("productName",k.target.value),placeholder:"Chicken Club Sandwich"}),u.productName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.productName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:l.productDescription,onChange:k=>N("productDescription",k.target.value),placeholder:"Delicious sandwich with grilled chicken, bacon, lettuce, tomato, and mayo on toasted bread"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date *"}),n.jsx("input",{type:"date",className:`input-field ${u.effectiveDate?"border-red-500":""}`,value:l.effectiveDate,onChange:k=>N("effectiveDate",k.target.value)}),u.effectiveDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.effectiveDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:l.status,onChange:k=>N("status",k.target.value),children:h.map(k=>n.jsx("option",{value:k,children:k},k))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recipe Items"}),n.jsxs("button",{type:"button",onClick:j,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),u.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:u.items}),n.jsx("div",{className:"space-y-4",children:l.items.map((k,C)=>{const A=p[C]||(k.itemType==="bom"?"bom":k.itemType==="rawMaterial"?"rawMaterial":"all");return n.jsxs("div",{className:"grid grid-cols-9 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),n.jsxs("select",{className:"input-field text-sm",value:A,onChange:P=>{const I=P.target.value;g(F=>({...F,[C]:I})),I==="rawMaterial"&&k.itemType==="bom"?(O(C,"itemType","rawMaterial"),O(C,"materialCode",""),O(C,"materialName",""),O(C,"bomCode",""),O(C,"bomId","")):I==="bom"&&k.itemType==="rawMaterial"&&(O(C,"itemType","bom"),O(C,"materialCode",""),O(C,"materialName",""),O(C,"bomCode",""),O(C,"bomId",""))},children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"rawMaterial",children:"Raw Material"}),n.jsx("option",{value:"bom",children:"Recipe"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:k.itemType==="bom"?"Recipe Code":"Material Code"}),n.jsx(NO,{value:k.itemType==="bom"&&k.bomCode||k.materialCode,displayValue:k.itemType==="bom"&&k.bomCode||k.materialCode,onChange:P=>{const I=w(P),F=y(P);if(I)O(C,"itemType","bom"),O(C,"bomCode",I.bomCode),O(C,"bomId",I.id||""),O(C,"materialCode",I.bomCode),O(C,"materialName",I.productName),O(C,"materialId",""),O(C,"unitOfMeasure","pcs"),O(C,"unitCost",I.totalCost||0),O(C,"totalCost",(I.totalCost||0)*(k.quantity||1)),g(q=>({...q,[C]:"bom"}));else if(F){O(C,"itemType","rawMaterial");const q=(F.unitOfMeasure||"").toString(),H=S(q);O(C,"materialCode",P),O(C,"materialName",F.materialName||""),O(C,"materialId",F.id||""),O(C,"bomCode",""),O(C,"bomId",""),O(C,"unitOfMeasure",H),g(V=>({...V,[C]:"rawMaterial"}))}else O(C,"materialCode",P),O(C,"materialName",""),O(C,"materialId","")},placeholder:"Select material or recipe",options:(()=>{const P=[];return(A==="all"||A==="rawMaterial")&&P.push(...t.map(I=>({value:I.materialCode,label:` ${I.materialCode} - ${I.materialName} (Raw Material)`}))),(A==="all"||A==="bom")&&P.push(...a.map(I=>({value:I.bomCode,label:` ${I.bomCode} - ${I.productName} (Recipe)`}))),P})()})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:k.itemType==="bom"?"Recipe Name":"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:k.materialName,readOnly:!0}),k.itemType==="bom"&&n.jsx("span",{className:"text-xs text-blue-600 mt-1 block",children:" Nested Recipe"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:k.quantity,onChange:P=>O(C,"quantity",parseFloat(P.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("select",{className:"input-field text-sm",value:k.unitOfMeasure,onChange:P=>O(C,"unitOfMeasure",P.target.value),disabled:k.itemType==="bom",title:k.itemType==="bom"?'Unit is fixed to "pcs" for nested recipes':"",children:lo.map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost"}),n.jsx("input",{type:"number",disabled:k.itemType==="bom",title:k.itemType==="bom"?"Unit cost is based on nested recipe total cost":"",step:"0.0001",className:"input-field text-sm bg-gray-100",value:Number(k.unitCost||0).toFixed(4),readOnly:!0})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>_(C),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-9",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Cost: ",k.totalCost.toFixed(2)," KWD"]})})]},C)})}),l.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total BOM Cost: ",l.items.reduce((k,C)=>k+C.totalCost,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/bill-of-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:`btn-primary flex items-center ${f?"opacity-60 cursor-not-allowed":""}`,disabled:f,children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),f?"Creating...":"Create Finished Good"]})]})]})})]})},rce=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,c]=T.useState(null),[u,d]=T.useState(!1),[f,m]=T.useState(""),[p,g]=T.useState(""),[h,y]=T.useState(""),[w,S]=T.useState("createdAt"),[v,x]=T.useState("desc");T.useEffect(()=>{b()},[]);const b=async()=>{try{s(!0),o(null);const E=await de.getJobOrders({limit:1e3,search:f,status:p,priority:h,sortBy:w,sortOrder:v});E.success?(console.log("Loaded Job Orders:",E.data),r(E.data)):o("Failed to load job orders")}catch(E){o(E instanceof Error?E.message:"Failed to load job orders"),console.error("Error loading job orders:",E)}finally{s(!1)}},N=()=>{m(""),g(""),y(""),S("createdAt"),x("desc")},j=E=>{c(E),d(!0)},O=async E=>{if(console.log("Deleting Job Order with ID:",E),!E){alert("Error: Job Order ID is missing");return}if(window.confirm("Are you sure you want to delete this job order?"))try{(await de.deleteJobOrder(E)).success?await b():alert("Failed to delete job order")}catch(k){alert("Error deleting job order: "+(k instanceof Error?k.message:"Unknown error")),console.error("Error deleting job order:",k)}},_=t.filter(E=>{const k=E.jobOrderNumber.toLowerCase().includes(f.toLowerCase())||E.customerName.toLowerCase().includes(f.toLowerCase())||E.customerId.toLowerCase().includes(f.toLowerCase()),C=p===""||E.status.toLowerCase()===p.toLowerCase(),A=h===""||E.priority.toLowerCase()===h.toLowerCase();return k&&C&&A}).sort((E,k)=>{let C,A;switch(w){case"jobOrderNumber":C=E.jobOrderNumber,A=k.jobOrderNumber;break;case"customerName":C=E.customerName,A=k.customerName;break;case"totalAmount":C=E.totalAmount,A=k.totalAmount;break;case"orderDate":C=new Date(E.orderDate).getTime(),A=new Date(k.orderDate).getTime();break;case"createdAt":C=new Date(E.createdAt).getTime(),A=new Date(k.createdAt).getTime();break;default:C=new Date(E.createdAt).getTime(),A=new Date(k.createdAt).getTime()}return v==="asc"?C>A?1:-1:C<A?1:-1});return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading recipe orders..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:b,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recipe Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant's recipe orders and customer requests"})]}),n.jsxs("button",{onClick:()=>e("/job-orders/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Recipe Order"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search orders by number, customer name, or email...",className:"input-field pl-10",value:f,onChange:E=>m(E.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:N,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:E=>g(E.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsxs("select",{className:"input-field",value:h,onChange:E=>y(E.target.value),children:[n.jsx("option",{value:"",children:"All Priority"}),n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"}),n.jsx("option",{value:"Urgent",children:"Urgent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:E=>S(E.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"jobOrderNumber",children:"Order Number"}),n.jsx("option",{value:"customerName",children:"Customer Name"}),n.jsx("option",{value:"totalAmount",children:"Total Amount"}),n.jsx("option",{value:"orderDate",children:"Order Date"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",_.length," of ",t.length," recipe orders",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),_.length!==t.length&&n.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Recipe Order #"}),n.jsx("th",{className:"table-header",children:"Customer"}),n.jsx("th",{className:"table-header",children:"Order Date"}),n.jsx("th",{className:"table-header",children:"Delivery Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Priority"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:E.jobOrderNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:E.customerName}),n.jsx("div",{className:"text-gray-500 text-sm",children:E.customerId})]})}),n.jsx("td",{className:"table-cell",children:new Date(E.orderDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:new Date(E.deliveryDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.status==="Completed"?"bg-green-100 text-green-800":E.status==="In Progress"?"bg-blue-100 text-blue-800":E.status==="Pending"?"bg-purple-100 text-purple-800":E.status==="Cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:E.status})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.priority==="Urgent"?"bg-red-100 text-red-800":E.priority==="High"?"bg-orange-100 text-orange-800":E.priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:E.priority})}),n.jsxs("td",{className:"table-cell",children:[E.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>j(E),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Vi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/job-orders/edit/${E.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>O(E.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},E.id))})]})})}),n.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Total Recipe Orders: ",n.jsx("span",{className:"font-semibold text-blue-600",children:t.length})]}),u&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recipe Order Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Number"}),n.jsx("p",{className:"text-gray-900 font-mono",children:l.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),n.jsx("p",{className:"text-gray-900",children:l.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),n.jsx("p",{className:"text-gray-900",children:l.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Contact"}),n.jsx("p",{className:"text-gray-900",children:l.customerId||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.orderDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.deliveryDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${l.status==="Completed"?"bg-green-100 text-green-800":l.status==="In Progress"?"bg-blue-100 text-blue-800":l.status==="Pending"?"bg-purple-100 text-purple-800":l.status==="Cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:l.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${l.priority==="Urgent"?"bg-red-100 text-red-800":l.priority==="High"?"bg-orange-100 text-orange-800":l.priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:l.priority})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[l.totalAmount.toFixed(2)," KWD"]})]})]}),l.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("p",{className:"text-gray-900",children:l.notes})]}),l.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Instructions"}),n.jsx("p",{className:"text-gray-900",children:l.notes})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Recipe Items (",l.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet A"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet B"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet C"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.items.map((E,k)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.product}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.outletA}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.outletB}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.outletC}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:E.totalQuantity}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[E.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[E.totalPrice.toFixed(2)," KWD"]})]},k))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:l.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:l.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/job-orders/edit/${l.id}`)},className:"btn-primary",children:"Edit Order"})]})]})})]})},ace=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},nce=()=>{const e=ct(),[t,r]=T.useState({jobOrderNumber:"",customerName:"",customerContact:"",customerEmail:"",orderDate:"",deliveryDate:"",priority:"Medium",status:"Draft",totalAmount:0,items:[],notes:"",specialInstructions:""}),[a,s]=T.useState({}),[i,o]=T.useState([]),[l,c]=T.useState(!1),u=["Low","Medium","High","Urgent"],d=["Draft","Approved","In Progress","Completed","Cancelled"];T.useEffect(()=>{f()},[]);const f=async()=>{try{c(!0);const v=await de.getBillOfMaterials({limit:1e3,status:"Active"});v.success&&o(v.data)}catch(v){console.error("Error loading BOMs:",v)}finally{c(!1)}},m=()=>{const v={};return t.jobOrderNumber.trim()||(v.jobOrderNumber="Job order number is required"),t.customerName.trim()||(v.customerName="Customer name is required"),t.customerEmail.trim()||(v.customerEmail="Customer email is required"),t.orderDate||(v.orderDate="Order date is required"),t.deliveryDate||(v.deliveryDate="Delivery date is required"),t.items.length===0&&(v.items="At least one job order item is required"),s(v),Object.keys(v).length===0},p=async v=>{if(v.preventDefault(),!!m())try{const x=t.items.reduce((j,O)=>j+O.totalPrice,0),b={jobOrderNumber:t.jobOrderNumber.trim().toUpperCase(),customerId:`CUST-${Date.now()}`,customerName:t.customerName.trim(),customerContact:t.customerContact.trim(),customerEmail:t.customerEmail.trim(),orderDate:t.orderDate,deliveryDate:t.deliveryDate,priority:t.priority,status:t.status,totalAmount:x,items:t.items.map(j=>({bomId:j.bomId,bomCode:j.bomCode,product:j.product.trim(),outletA:parseFloat(j.outletA.toString())||0,outletB:parseFloat(j.outletB.toString())||0,outletC:parseFloat(j.outletC.toString())||0,totalQuantity:j.totalQuantity,unitPrice:parseFloat(j.unitPrice.toString()),totalPrice:j.totalPrice})),notes:t.notes.trim(),specialInstructions:t.specialInstructions.trim(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Job Order:",b);const N=await de.createJobOrder(b);N.success?(console.log("Job Order created successfully:",N.data),e("/job-orders")):alert("Failed to create Job Order: "+N.message)}catch(x){console.error("Error creating Job Order:",x),alert("Error creating Job Order: "+(x instanceof Error?x.message:"Unknown error"))}},g=(v,x)=>{r(b=>({...b,[v]:x})),a[v]&&s(b=>({...b,[v]:""}))},h=()=>{const v={bomId:"",bomCode:"",product:"",outletA:0,outletB:0,outletC:0,totalQuantity:0,unitPrice:0,totalPrice:0};r(x=>({...x,items:[...x.items,v]}))},y=(v,x)=>{const b=i.find(N=>N.id===x);b&&r(N=>({...N,items:N.items.map((j,O)=>{if(O===v){const _={...j,bomId:b.id,bomCode:b.bomCode,product:b.productName,unitPrice:parseFloat((b.totalCost/b.items.length).toFixed(2))};return _.totalQuantity=_.outletA+_.outletB+_.outletC,_.totalPrice=parseFloat((_.totalQuantity*_.unitPrice).toFixed(2)),_}return j})}))},w=(v,x,b)=>{r(N=>({...N,items:N.items.map((j,O)=>{if(O===v){const _={...j,[x]:b};return(x==="outletA"||x==="outletB"||x==="outletC")&&(_.totalQuantity=_.outletA+_.outletB+_.outletC),(x==="totalQuantity"||x==="unitPrice"||x==="outletA"||x==="outletB"||x==="outletC")&&(_.totalPrice=parseFloat((_.totalQuantity*_.unitPrice).toFixed(2))),_}return j})}))},S=v=>{r(x=>({...x,items:x.items.filter((b,N)=>N!==v)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Job Order"}),n.jsx("p",{className:"text-gray-600",children:"Create a new job order for production"})]}),n.jsxs("button",{onClick:()=>e("/job-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Job Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:p,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.jobOrderNumber?"border-red-500":""}`,value:t.jobOrderNumber,onChange:v=>g("jobOrderNumber",v.target.value),placeholder:"JO-2024-001"}),a.jobOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.customerName?"border-red-500":""}`,value:t.customerName,onChange:v=>g("customerName",v.target.value),placeholder:"ABC Manufacturing Ltd."}),a.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.customerContact,onChange:v=>g("customerContact",v.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.customerEmail?"border-red-500":""}`,value:t.customerEmail,onChange:v=>g("customerEmail",v.target.value),placeholder:"john@abcmfg.com"}),a.customerEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.orderDate?"border-red-500":""}`,value:t.orderDate,onChange:v=>g("orderDate",v.target.value)}),a.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.deliveryDate?"border-red-500":""}`,value:t.deliveryDate,onChange:v=>g("deliveryDate",v.target.value)}),a.deliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.deliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:t.priority,onChange:v=>g("priority",v.target.value),children:u.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:v=>g("status",v.target.value),children:d.map(v=>n.jsx("option",{value:v,children:v},v))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Job Order Items"}),n.jsxs("button",{type:"button",onClick:h,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((v,x)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Recipe (BOM)"}),n.jsx(ace,{value:v.bomId||"",onChange:b=>y(x,b),placeholder:"Select Recipe",disabled:l,options:l?[]:i.map(b=>({value:b.id,label:`${b.bomCode} - ${b.productName}`}))}),l&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading recipes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:v.product,readOnly:!0,placeholder:"Auto-filled from BOM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:v.unitPrice,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet A"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.outletA,onChange:b=>w(x,"outletA",parseFloat(b.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet B"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.outletB,onChange:b=>w(x,"outletB",parseFloat(b.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet C"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.outletC,onChange:b=>w(x,"outletC",parseFloat(b.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm bg-gray-100",value:v.totalQuantity,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",v.totalPrice.toFixed(2)," KWD"]})})]},x))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",t.items.reduce((v,x)=>v+x.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:v=>g("notes",v.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialInstructions,onChange:v=>g("specialInstructions",v.target.value),placeholder:"Special manufacturing instructions or requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/job-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Job Order"]})]})]})})]})},sce=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},ice=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({jobOrderNumber:"",customerName:"",customerContact:"",customerEmail:"",orderDate:"",deliveryDate:"",priority:"Medium",status:"Draft",totalAmount:0,items:[],notes:"",specialInstructions:""}),[s,i]=T.useState({}),[o,l]=T.useState(!0),[c,u]=T.useState([]),[d,f]=T.useState(!1),m=["Low","Medium","High","Urgent"],p=["Draft","Approved","In Progress","Completed","Cancelled"];T.useEffect(()=>{(async()=>{try{f(!0);const N=await de.getBillOfMaterials({limit:1e3,status:"Active"});N.success&&u(N.data)}catch(N){console.error("Error loading BOMs:",N)}finally{f(!1)}if(!t){l(!1);return}try{l(!0);const N=await de.getJobOrder(t);if(N.success){const j=N.data;a({jobOrderNumber:j.jobOrderNumber,customerName:j.customerName,customerContact:j.customerContact||"",customerEmail:j.customerEmail,orderDate:new Date(j.orderDate).toISOString().split("T")[0],deliveryDate:new Date(j.deliveryDate).toISOString().split("T")[0],priority:j.priority,status:j.status,totalAmount:j.totalAmount,items:j.items.map(O=>({bomId:O.bomId,bomCode:O.bomCode,product:O.product,outletA:O.outletA,outletB:O.outletB,outletC:O.outletC,totalQuantity:O.totalQuantity,unitPrice:O.unitPrice,totalPrice:O.totalPrice})),notes:j.notes||"",specialInstructions:j.specialInstructions||""})}else console.error("Failed to load job order:","API Error"),alert("Failed to load job order: API Error")}catch(N){console.error("Error loading job order:",N),alert("Error loading job order: "+(N instanceof Error?N.message:"Unknown error"))}finally{l(!1)}})()},[t]);const g=()=>{const b={};return r.jobOrderNumber.trim()||(b.jobOrderNumber="Job order number is required"),r.customerName.trim()||(b.customerName="Customer name is required"),r.customerEmail.trim()||(b.customerEmail="Customer email is required"),r.orderDate||(b.orderDate="Order date is required"),r.deliveryDate||(b.deliveryDate="Delivery date is required"),r.items.length===0&&(b.items="At least one job order item is required"),i(b),Object.keys(b).length===0},h=async b=>{if(b.preventDefault(),!!g()){if(!t){alert("Job Order ID is missing");return}try{const N=r.items.reduce((_,E)=>_+E.totalPrice,0),j={jobOrderNumber:r.jobOrderNumber.trim().toUpperCase(),customerId:`CUST-${Date.now()}`,customerName:r.customerName.trim(),customerContact:r.customerContact.trim(),customerEmail:r.customerEmail.trim(),orderDate:r.orderDate,deliveryDate:r.deliveryDate,priority:r.priority,status:r.status,totalAmount:N,items:r.items.map(_=>({bomId:_.bomId,bomCode:_.bomCode,product:_.product.trim(),outletA:parseFloat(_.outletA.toString())||0,outletB:parseFloat(_.outletB.toString())||0,outletC:parseFloat(_.outletC.toString())||0,totalQuantity:_.totalQuantity,unitPrice:parseFloat(_.unitPrice.toString()),totalPrice:_.totalPrice})),notes:r.notes.trim(),specialInstructions:r.specialInstructions.trim(),updatedBy:"admin"};console.log("Updating Job Order:",j);const O=await de.updateJobOrder(t,j);O.success?(console.log("Job Order updated successfully:",O.data),e("/job-orders")):alert("Failed to update Job Order: "+O.message)}catch(N){console.error("Error updating Job Order:",N),alert("Error updating Job Order: "+(N instanceof Error?N.message:"Unknown error"))}}},y=(b,N)=>{a(j=>({...j,[b]:N})),s[b]&&i(j=>({...j,[b]:""}))},w=()=>{const b={bomId:"",bomCode:"",product:"",outletA:0,outletB:0,outletC:0,totalQuantity:0,unitPrice:0,totalPrice:0};a(N=>({...N,items:[...N.items,b]}))},S=(b,N)=>{const j=c.find(O=>O.id===N);j&&a(O=>({...O,items:O.items.map((_,E)=>{if(E===b){const k={..._,bomId:j.id,bomCode:j.bomCode,product:j.productName,unitPrice:parseFloat((j.totalCost/j.items.length).toFixed(2))};return k.totalQuantity=k.outletA+k.outletB+k.outletC,k.totalPrice=parseFloat((k.totalQuantity*k.unitPrice).toFixed(2)),k}return _})}))},v=(b,N,j)=>{a(O=>({...O,items:O.items.map((_,E)=>{if(E===b){const k={..._,[N]:j};return(N==="outletA"||N==="outletB"||N==="outletC")&&(k.totalQuantity=k.outletA+k.outletB+k.outletC),(N==="totalQuantity"||N==="unitPrice"||N==="outletA"||N==="outletB"||N==="outletC")&&(k.totalPrice=parseFloat((k.totalQuantity*k.unitPrice).toFixed(2))),k}return _})}))},x=b=>{a(N=>({...N,items:N.items.filter((j,O)=>O!==b)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading job order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Job Order"}),n.jsx("p",{className:"text-gray-600",children:"Update job order information"})]}),n.jsxs("button",{onClick:()=>e("/job-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Job Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:h,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.jobOrderNumber?"border-red-500":""}`,value:r.jobOrderNumber,onChange:b=>y("jobOrderNumber",b.target.value),placeholder:"JO-2024-001"}),s.jobOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.customerName?"border-red-500":""}`,value:r.customerName,onChange:b=>y("customerName",b.target.value),placeholder:"ABC Manufacturing Ltd."}),s.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.customerContact,onChange:b=>y("customerContact",b.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.customerEmail?"border-red-500":""}`,value:r.customerEmail,onChange:b=>y("customerEmail",b.target.value),placeholder:"john@abcmfg.com"}),s.customerEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.customerEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.orderDate?"border-red-500":""}`,value:r.orderDate,onChange:b=>y("orderDate",b.target.value)}),s.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.deliveryDate?"border-red-500":""}`,value:r.deliveryDate,onChange:b=>y("deliveryDate",b.target.value)}),s.deliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:b=>y("priority",b.target.value),children:m.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:b=>y("status",b.target.value),children:p.map(b=>n.jsx("option",{value:b,children:b},b))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Job Order Items"}),n.jsxs("button",{type:"button",onClick:w,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((b,N)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Recipe (BOM)"}),n.jsx(sce,{value:b.bomId||"",onChange:j=>S(N,j),placeholder:"Select Recipe",disabled:d,options:d?[]:c.map(j=>({value:j.id,label:`${j.bomCode} - ${j.productName}`}))}),d&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading recipes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:b.product,readOnly:!0,placeholder:"Auto-filled from BOM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:b.unitPrice,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet A"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.outletA,onChange:j=>v(N,"outletA",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet B"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.outletB,onChange:j=>v(N,"outletB",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet C"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.outletC,onChange:j=>v(N,"outletC",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm bg-gray-100",value:b.totalQuantity,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>x(N),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",b.totalPrice.toFixed(2)," KWD"]})})]},N))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",r.items.reduce((b,N)=>b+N.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:b=>y("notes",b.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialInstructions,onChange:b=>y("specialInstructions",b.target.value),placeholder:"Special manufacturing instructions or requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/job-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update Job Order"]})]})]})})]})},oce=()=>{var A;const[e,t]=T.useState([]),[r,a]=T.useState(!0),[s,i]=T.useState(!1),[o,l]=T.useState(null),[c,u]=T.useState(""),[d,f]=T.useState(""),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState("createdAt"),[S,v]=T.useState("desc");T.useEffect(()=>{x()},[]),T.useEffect(()=>{r||x()},[c,d,m,g,y,S]);const x=async()=>{try{a(!0),l(null);const P=await de.getPurchaseOrders({limit:1e3,search:c,status:d,sortBy:y,sortOrder:S});if(P.success){console.log("Loaded Purchase Orders:",P.data);const I=P.data||[];t(I)}else l("Failed to load purchase orders")}catch(P){l(P instanceof Error?P.message:"Failed to load purchase orders"),console.error("Error loading purchase orders:",P)}finally{a(!1)}},b=async()=>{if(window.confirm("This will fetch all bills from Zoho Inventory and sync them to Purchase Orders. Continue?"))try{i(!0),console.log(" Starting Zoho Bills sync...");const P=await de.syncZohoBillsToPurchaseOrders();if(P.success){const I=P.data,F=(I==null?void 0:I.totalBills)??0,q=(I==null?void 0:I.addedOrders)??0,H=(I==null?void 0:I.updatedOrders)??0,V=(I==null?void 0:I.errorCount)??0,re=I==null?void 0:I.processingResult;let oe=` Sync Completed Successfully!

 Total Bills: ${F}
 Added: ${q}
 Updated: ${H}
 Errors: ${V}

`;re&&(oe+=` Inventory Processing:
 Processed: ${re.processedBills}/${re.totalProcessedBills} bills
 ${re.processingMessage}

`),oe+="Refreshing purchase orders...",alert(oe),await x()}else alert(` Sync Failed: ${P.message}`)}catch(P){console.error("Sync error:",P),alert(`Error syncing with Zoho: ${P instanceof Error?P.message:"Unknown error"}`)}finally{i(!1)}},N=P=>{switch(P){case"syncing":return"bg-blue-100 text-blue-800 border-blue-200";case"synced":return"bg-green-100 text-green-800 border-green-200";case"not_synced":return"bg-gray-100 text-gray-800 border-gray-200";case"sync_failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=P=>{switch(P){case"syncing":return"Syncing";case"synced":return"Synced";case"not_synced":return"Not Synced";case"sync_failed":return"Sync Failed";default:return"Unknown"}},O=P=>{switch(P){case"processing":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"processed":return"bg-green-100 text-green-800 border-green-200";case"not_processed":return"bg-gray-100 text-gray-800 border-gray-200";case"failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=P=>{switch(P){case"processing":return"Processing";case"processed":return"Processed";case"not_processed":return"Not Processed";case"failed":return"Failed";default:return"Unknown"}},E=()=>{u(""),f(""),p(""),h(""),w("createdAt"),v("desc")},k=()=>{if(e.length===0){alert("No purchase orders to export");return}const P=[["Bill ID","Vendor ID","Vendor Name","Total Amount","Location","PO Number","Status","Order Date","Expected Delivery","Last Synced"].join(","),...e.map(H=>{var V;return[H.zohoBillId||"-",H.supplierId||"-",H.supplierName||"-",((V=H.totalAmount)==null?void 0:V.toFixed(2))||"0.00",H.zohoLocationName||"-",H.poNumber||"-",H.status||"-",H.orderDate?new Date(H.orderDate).toLocaleDateString():"-",H.expectedDeliveryDate?new Date(H.expectedDeliveryDate).toLocaleDateString():"-",H.lastSyncedAt?new Date(H.lastSyncedAt).toLocaleString():"-"].map(re=>`"${re}"`).join(",")})].join(`
`),I=new Blob([P],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a"),q=URL.createObjectURL(I);F.setAttribute("href",q),F.setAttribute("download",`purchase-orders-${new Date().toISOString().split("T")[0]}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F)},C=e.filter(P=>{const I=!c||P.poNumber.toLowerCase().includes(c.toLowerCase())||P.supplierName.toLowerCase().includes(c.toLowerCase())||P.zohoBillId&&P.zohoBillId.toLowerCase().includes(c.toLowerCase()),F=!d||P.status===d,q=!m||(P.syncStatus||"not_synced")===m,H=!g||(P.processingStatus||"not_processed")===g;return I&&F&&q&&H});return r?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading purchase orders..."})]})}):o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:o}),n.jsx("button",{onClick:x,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Orders"}),n.jsx("p",{className:"text-gray-600",children:"Bills synced from Zoho Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:x,className:"btn-secondary flex items-center",title:"Refresh purchase orders",disabled:r||s,children:[n.jsx(ea,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]}),n.jsx("button",{onClick:b,className:"btn-primary flex items-center",disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx(ea,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(rt,{className:"h-4 w-4 mr-2"}),"Sync from Zoho"]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by PO number, vendor, or bill ID...",className:"input-field pl-10",value:c,onChange:P=>u(P.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{className:"input-field",value:d,onChange:P=>f(P.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Sent",children:"Sent"}),n.jsx("option",{value:"Confirmed",children:"Confirmed"}),n.jsx("option",{value:"Partial",children:"Partial"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),n.jsxs("select",{className:"input-field",value:m,onChange:P=>p(P.target.value),children:[n.jsx("option",{value:"",children:"All Sync Status"}),n.jsx("option",{value:"syncing",children:"Syncing"}),n.jsx("option",{value:"synced",children:"Synced"}),n.jsx("option",{value:"not_synced",children:"Not Synced"}),n.jsx("option",{value:"sync_failed",children:"Sync Failed"})]}),n.jsxs("select",{className:"input-field",value:g,onChange:P=>h(P.target.value),children:[n.jsx("option",{value:"",children:"All Processing Status"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"processed",children:"Processed"}),n.jsx("option",{value:"not_processed",children:"Not Processed"}),n.jsx("option",{value:"failed",children:"Failed"})]}),n.jsxs("button",{onClick:E,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear"]}),n.jsxs("button",{onClick:k,className:"btn-secondary flex items-center",title:"Export to CSV",disabled:e.length===0,children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-4",children:[n.jsxs("span",{children:["Showing ",C.length," purchase order",C.length!==1?"s":"",(c||d||m||g)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(c||d||m||g)&&n.jsx("button",{onClick:E,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]}),C.length===0?n.jsx("div",{className:"card p-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(rt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Purchase Orders Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:c||d?"Try adjusting your search or filters":'Click "Sync from Zoho" to fetch bills from Zoho Inventory'}),!c&&!d&&n.jsxs("button",{onClick:b,className:"btn-primary inline-flex items-center",disabled:s,children:[n.jsx(rt,{className:"h-4 w-4 mr-2"}),"Sync from Zoho"]})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C.map(P=>{var I;return n.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow duration-200 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex justify-end gap-2 mb-3",children:[n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${N(P.syncStatus||"not_synced")}`,children:j(P.syncStatus||"not_synced")}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${O(P.processingStatus||"not_processed")}`,children:_(P.processingStatus||"not_processed")})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(l8,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Bill ID"})]}),n.jsx("p",{className:"text-sm font-semibold text-gray-900 ml-4",children:P.zohoBillId||"N/A"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Fi,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Vendor ID"})]}),n.jsx("p",{className:"text-xs text-gray-900 ml-4",children:P.supplierId||"N/A"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Fi,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Vendor Name"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 ml-4",children:P.supplierName||"Unknown Vendor"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(i8,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Total"})]}),n.jsxs("p",{className:"text-lg font-bold text-green-600 ml-4",children:[((I=P.totalAmount)==null?void 0:I.toFixed(3))||"0.000"," KWD"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Od,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Location"})]}),n.jsx("p",{className:"text-xs text-gray-900 ml-4",children:P.zohoLocationName||"Not specified"})]}),n.jsx("div",{className:"border-t border-gray-200 my-4"}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center text-xs",children:[n.jsx(Gy,{className:"h-2 w-2 mr-1"}),"Order Date"]}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.orderDate?new Date(P.orderDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center text-xs",children:[n.jsx(Gy,{className:"h-2 w-2 mr-1"}),"Expected Delivery"]}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.expectedDeliveryDate?new Date(P.expectedDeliveryDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs",children:"PO Number"}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.poNumber})]}),P.items&&P.items.length>0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs",children:"Line Items"}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.items.length})]})]})]},P.id)})}),e.length>0&&n.jsx("div",{className:"card p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(D1,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Synced from Zoho Inventory"}),n.jsxs("p",{className:"text-sm text-blue-700",children:['These purchase orders are automatically synced from Zoho Inventory bills. Click "Sync from Zoho" to fetch the latest bills.',((A=e[0])==null?void 0:A.lastSyncedAt)&&n.jsxs("span",{className:"ml-2 font-medium",children:["Last synced: ",new Date(e[0].lastSyncedAt).toLocaleString()]})]})]})]})})]})},lce=()=>{const e=ct(),[t,r]=T.useState({purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",supplierAddress:"",orderDate:"",expectedDeliveryDate:"",priority:"Medium",status:"Draft",paymentTerms:"Net 30",shippingMethod:"Standard",totalAmount:0,items:[],notes:"",specialInstructions:""}),[a,s]=T.useState({}),i=["Low","Medium","High","Urgent"],o=["Draft","Approved","Sent","Received","Cancelled"],l=["Net 15","Net 30","Net 45","Net 60","COD","Prepaid"],c=["Standard","Express","Overnight","Pickup"],u=()=>{const h={};return t.purchaseOrderNumber.trim()||(h.purchaseOrderNumber="Purchase order number is required"),t.supplierName.trim()||(h.supplierName="Supplier name is required"),t.supplierEmail.trim()||(h.supplierEmail="Supplier email is required"),t.orderDate||(h.orderDate="Order date is required"),t.expectedDeliveryDate||(h.expectedDeliveryDate="Expected delivery date is required"),t.items.length===0&&(h.items="At least one purchase order item is required"),s(h),Object.keys(h).length===0},d=h=>{if(h.preventDefault(),!u())return;const y=t.items.reduce((S,v)=>S+(v.totalPrice||0),0),w={id:Date.now().toString(),poNumber:t.purchaseOrderNumber,supplierId:"SUP-001",supplierName:t.supplierName,orderDate:new Date(t.orderDate).toISOString(),expectedDeliveryDate:new Date(t.expectedDeliveryDate).toISOString(),status:t.status,totalAmount:y,items:t.items.map(S=>({materialId:S.materialId,materialCode:S.materialCode,materialName:S.materialName,quantity:S.quantity,unitPrice:S.unitPrice,totalPrice:S.totalPrice})),terms:t.paymentTerms,notes:t.notes,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Purchase Order:",w),e("/purchase-orders")},f=(h,y)=>{r(w=>({...w,[h]:y})),a[h]&&s(w=>({...w,[h]:""}))},m=()=>{const h={materialId:"",materialCode:"",materialName:"",quantity:0,unitPrice:0,totalPrice:0};r(y=>({...y,items:[...y.items,h]}))},p=(h,y,w)=>{r(S=>({...S,items:S.items.map((v,x)=>{if(x===h){const b={...v,[y]:w};return(y==="quantity"||y==="unitPrice")&&(b.totalPrice=b.quantity*b.unitPrice),b}return v})}))},g=h=>{r(y=>({...y,items:y.items.filter((w,S)=>S!==h)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Purchase Order"}),n.jsx("p",{className:"text-gray-600",children:"Create a new purchase order for materials"})]}),n.jsxs("button",{onClick:()=>e("/purchase-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Purchase Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:d,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supplier Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.purchaseOrderNumber?"border-red-500":""}`,value:t.purchaseOrderNumber,onChange:h=>f("purchaseOrderNumber",h.target.value),placeholder:"PO-2024-001"}),a.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.supplierName?"border-red-500":""}`,value:t.supplierName,onChange:h=>f("supplierName",h.target.value),placeholder:"ABC Steel Suppliers"}),a.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierContact,onChange:h=>f("supplierContact",h.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.supplierEmail?"border-red-500":""}`,value:t.supplierEmail,onChange:h=>f("supplierEmail",h.target.value),placeholder:"john@abcsteel.com"}),a.supplierEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierEmail})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Address"}),n.jsx("textarea",{className:"input-field",rows:2,value:t.supplierAddress,onChange:h=>f("supplierAddress",h.target.value),placeholder:"123 Industrial Street, Manufacturing District, City, State 12345"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.orderDate?"border-red-500":""}`,value:t.orderDate,onChange:h=>f("orderDate",h.target.value)}),a.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.expectedDeliveryDate?"border-red-500":""}`,value:t.expectedDeliveryDate,onChange:h=>f("expectedDeliveryDate",h.target.value)}),a.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.expectedDeliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:t.priority,onChange:h=>f("priority",h.target.value),children:i.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:h=>f("status",h.target.value),children:o.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),n.jsx("select",{className:"input-field",value:t.paymentTerms,onChange:h=>f("paymentTerms",h.target.value),children:l.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Method"}),n.jsx("select",{className:"input-field",value:t.shippingMethod,onChange:h=>f("shippingMethod",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Purchase Order Items"}),n.jsxs("button",{type:"button",onClick:m,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((h,y)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:h.materialCode,onChange:w=>p(y,"materialCode",w.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:h.materialName,onChange:w=>p(y,"materialName",w.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:h.quantity,onChange:w=>p(y,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:h.unitPrice,onChange:w=>p(y,"unitPrice",parseFloat(w.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:"",onChange:w=>p(y,"deliveryDate",w.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:"",onChange:w=>p(y,"specifications",w.target.value),placeholder:"Grade A, 12mm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>g(y),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",(h.totalPrice||0).toFixed(2)," KWD"]})})]},y))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",t.items.reduce((h,y)=>h+(y.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:h=>f("notes",h.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialInstructions,onChange:h=>f("specialInstructions",h.target.value),placeholder:"Special delivery instructions or quality requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/purchase-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Purchase Order"]})]})]})})]})},cce=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",supplierAddress:"",orderDate:"",expectedDeliveryDate:"",priority:"Medium",status:"Draft",shippingMethod:"Standard",totalAmount:0,items:[],notes:"",specialInstructions:""}),[s,i]=T.useState({}),[o,l]=T.useState(!0),c=["Low","Medium","High","Urgent"],u=["Draft","Approved","Sent","Received","Cancelled"],d=["Net 15","Net 30","Net 45","Net 60","COD","Prepaid"],f=["Standard","Express","Overnight","Pickup"],m={id:"1",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"ABC Steel Suppliers",orderDate:new Date("2024-01-15").toISOString(),expectedDeliveryDate:new Date("2024-02-15").toISOString(),status:"Confirmed",totalAmount:15750,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:100,unitPrice:45.5,totalPrice:4550},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:50,unitPrice:125,totalPrice:6250},{materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",quantity:200,unitPrice:23.75,totalPrice:4750}],notes:"Supplier requires advance payment for expedited delivery.",createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"};T.useEffect(()=>{setTimeout(()=>{a({purchaseOrderNumber:m.poNumber,supplierName:m.supplierName,supplierContact:"John Smith",supplierEmail:"john@abcsteel.com",supplierAddress:"123 Industrial Street",orderDate:m.orderDate.split("T")[0],expectedDeliveryDate:m.expectedDeliveryDate.split("T")[0],priority:"High",status:"Approved",shippingMethod:"Express",totalAmount:m.totalAmount,items:m.items.map(v=>({...v,totalAmount:v.totalPrice})),notes:m.notes,specialInstructions:"Special handling required"}),l(!1)},500)},[t]);const p=()=>{const v={};return r.purchaseOrderNumber.trim()||(v.purchaseOrderNumber="Purchase order number is required"),r.supplierName.trim()||(v.supplierName="Supplier name is required"),r.supplierEmail.trim()||(v.supplierEmail="Supplier email is required"),r.orderDate||(v.orderDate="Order date is required"),r.expectedDeliveryDate||(v.expectedDeliveryDate="Expected delivery date is required"),r.items.length===0&&(v.items="At least one purchase order item is required"),i(v),Object.keys(v).length===0},g=v=>{if(v.preventDefault(),!p())return;const x=r.items.reduce((N,j)=>N+(j.totalPrice||0),0),b={...m,poNumber:r.purchaseOrderNumber,supplierName:r.supplierName,orderDate:new Date(r.orderDate).toISOString(),expectedDeliveryDate:new Date(r.expectedDeliveryDate).toISOString(),status:r.status,totalAmount:x,items:r.items,notes:r.notes,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Purchase Order:",b),e("/purchase-orders")},h=(v,x)=>{a(b=>({...b,[v]:x})),s[v]&&i(b=>({...b,[v]:""}))},y=()=>{const v={materialId:"",materialCode:"",materialName:"",quantity:0,unitPrice:0,totalPrice:0,totalAmount:0};a(x=>({...x,items:[...x.items,v]}))},w=(v,x,b)=>{a(N=>({...N,items:N.items.map((j,O)=>{if(O===v){const _={...j,[x]:b};return(x==="quantity"||x==="unitPrice")&&(_.totalPrice=_.quantity*_.unitPrice),_}return j})}))},S=v=>{a(x=>({...x,items:x.items.filter((b,N)=>N!==v)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading purchase order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Purchase Order"}),n.jsx("p",{className:"text-gray-600",children:"Update purchase order information"})]}),n.jsxs("button",{onClick:()=>e("/purchase-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Purchase Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:g,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supplier Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.purchaseOrderNumber?"border-red-500":""}`,value:r.purchaseOrderNumber,onChange:v=>h("purchaseOrderNumber",v.target.value),placeholder:"PO-2024-001"}),s.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.supplierName?"border-red-500":""}`,value:r.supplierName,onChange:v=>h("supplierName",v.target.value),placeholder:"ABC Steel Suppliers"}),s.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierContact,onChange:v=>h("supplierContact",v.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.supplierEmail?"border-red-500":""}`,value:r.supplierEmail,onChange:v=>h("supplierEmail",v.target.value),placeholder:"john@abcsteel.com"}),s.supplierEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierEmail})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Address"}),n.jsx("textarea",{className:"input-field",rows:2,value:r.supplierAddress,onChange:v=>h("supplierAddress",v.target.value),placeholder:"123 Industrial Street, Manufacturing District, City, State 12345"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.orderDate?"border-red-500":""}`,value:r.orderDate,onChange:v=>h("orderDate",v.target.value)}),s.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.expectedDeliveryDate?"border-red-500":""}`,value:r.expectedDeliveryDate,onChange:v=>h("expectedDeliveryDate",v.target.value)}),s.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.expectedDeliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:v=>h("priority",v.target.value),children:c.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:v=>h("status",v.target.value),children:u.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),n.jsx("select",{className:"input-field",value:"",onChange:v=>h("paymentTerms",v.target.value),children:d.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Method"}),n.jsx("select",{className:"input-field",value:r.shippingMethod,onChange:v=>h("shippingMethod",v.target.value),children:f.map(v=>n.jsx("option",{value:v,children:v},v))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Purchase Order Items"}),n.jsxs("button",{type:"button",onClick:y,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((v,x)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialCode,onChange:b=>w(x,"materialCode",b.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialName,onChange:b=>w(x,"materialName",b.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.quantity,onChange:b=>w(x,"quantity",parseFloat(b.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:v.unitPrice,onChange:b=>w(x,"unitPrice",parseFloat(b.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:"",onChange:b=>w(x,"deliveryDate",b.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:"",onChange:b=>w(x,"specifications",b.target.value),placeholder:"Grade A, 12mm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",(v.totalPrice||0).toFixed(2)," KWD"]})})]},x))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",r.items.reduce((v,x)=>v+(x.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:v=>h("notes",v.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialInstructions,onChange:v=>h("specialInstructions",v.target.value),placeholder:"Special delivery instructions or quality requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/purchase-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update Purchase Order"]})]})]})})]})},uce=()=>{const e=ct(),[t,r]=T.useState([{id:"1",grnNumber:"GRN-2024-001",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"Steel Suppliers Ltd.",receiptDate:new Date("2024-01-20"),status:"Approved",totalAmount:4550,items:[{poItemId:"PO-ITEM-001",materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",orderedQuantity:100,receivedQuantity:100,unitPrice:45.5,totalPrice:4550,qualityStatus:"Accepted",remarks:"Good quality"}],warehouseId:"WH-001",warehouseName:"Main Warehouse",receivedBy:"John Doe",notes:"All items received in good condition",createdAt:new Date("2024-01-20").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"}]),[a,s]=T.useState(""),[i,o]=T.useState(null),[l,c]=T.useState(!1),[u,d]=T.useState(!1),f=T.useRef(null),m=t.filter(v=>v.grnNumber.toLowerCase().includes(a.toLowerCase())||v.supplierName.toLowerCase().includes(a.toLowerCase())),p=v=>{switch(v){case"Approved":return"bg-green-100 text-green-800";case"Draft":return"bg-gray-100 text-gray-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=v=>{window.confirm("Are you sure you want to delete this GRN?")&&r(t.filter(x=>x.id!==v))},h=()=>{if(m.length===0){alert("No GRNs to export");return}const v=[["GRN Number","PO Number","Supplier Name","Receipt Date","Status","Total Amount","Created By","Updated By"].join(","),...m.map(j=>[j.grnNumber,j.poNumber,j.supplierName,j.receiptDate.toLocaleDateString(),j.status,j.totalAmount.toFixed(2),j.createdBy,j.updatedBy].map(O=>`"${O}"`).join(","))].join(`
`),x=new Blob([v],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a"),N=URL.createObjectURL(x);b.setAttribute("href",N),b.setAttribute("download",`grn-receipts-${new Date().toISOString().split("T")[0]}.csv`),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b)},y=()=>{var v;(v=f.current)==null||v.click()},w=async v=>{var b;const x=(b=v.target.files)==null?void 0:b[0];if(x){if(!x.name.toLowerCase().endsWith(".csv")){alert("Please select a CSV file");return}try{d(!0);const j=(await x.text()).split(`
`).filter(k=>k.trim());if(j.length<2){alert("CSV file must contain at least a header row and one data row");return}const O=j.slice(1);let _=0,E=0;for(const k of O)try{const C=k.split(",").map(P=>P.replace(/"/g,"").trim()),A={id:`grn-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,grnNumber:C[0]||"",poNumber:C[1]||"",supplierId:"SUP-001",supplierName:C[2]||"",warehouseId:"WH-001",warehouseName:"Main Warehouse",receiptDate:new Date(C[3]||new Date().toISOString().split("T")[0]),status:C[4]||"Draft",totalAmount:parseFloat(C[5])||0,items:[],receivedBy:C[6]||"admin",createdBy:C[6]||"admin",updatedBy:C[7]||"admin",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r(P=>[...P,A]),_++}catch{E++}alert(`Import completed!

Successfully imported: ${_} GRNs
Errors: ${E}`)}catch(N){alert("Error importing file: "+(N instanceof Error?N.message:"Unknown error"))}finally{d(!1),f.current&&(f.current.value="")}}},S=()=>{const x=[["GRN Number","PO Number","Supplier Name","Receipt Date","Status","Total Amount","Created By","Updated By"],["GRN-2024-003","PO-2024-003","Fresh Foods Ltd","2024-01-22","Approved","1200.00","admin","admin"],["GRN-2024-004","PO-2024-004","Kitchen Supplies Co","2024-01-23","Draft","850.00","admin","admin"]].map(O=>O.map(_=>`"${_}"`).join(",")).join(`
`),b=new Blob([x],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),j=URL.createObjectURL(b);N.setAttribute("href",j),N.setAttribute("download","grn-sample-template.csv"),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Good Receipt Notes"}),n.jsx("p",{className:"text-gray-600",children:"Manage incoming material receipts"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create GRN"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search GRNs...",className:"input-field pl-10",value:a,onChange:v=>s(v.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{onClick:h,className:"btn-secondary flex items-center",title:"Export GRNs to CSV",disabled:m.length===0,children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs("button",{onClick:y,className:"btn-secondary flex items-center",title:"Import GRNs from CSV",disabled:u,children:[n.jsx(Va,{className:"h-4 w-4 mr-2"}),u?"Importing...":"Import"]}),n.jsxs("button",{onClick:S,className:"btn-secondary flex items-center",title:"Download sample CSV template",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Sample CSV"]})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"GRN Number"}),n.jsx("th",{className:"table-header",children:"PO Number"}),n.jsx("th",{className:"table-header",children:"Supplier"}),n.jsx("th",{className:"table-header",children:"Receipt Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Warehouse"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(v=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:v.grnNumber}),n.jsx("td",{className:"table-cell",children:v.poNumber}),n.jsx("td",{className:"table-cell",children:v.supplierName}),n.jsx("td",{className:"table-cell",children:v.receiptDate.toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(v.status)}`,children:v.status})}),n.jsx("td",{className:"table-cell",children:v.warehouseName}),n.jsxs("td",{className:"table-cell font-medium",children:[v.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{o(v),c(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:n.jsx(Vi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/good-receipt-notes/edit/${v.id}`),className:"text-green-600 hover:text-green-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>g(v.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},v.id))})]})})}),n.jsx("input",{type:"file",ref:f,onChange:w,accept:".csv",style:{display:"none"}})]})},dce=()=>{const e=ct(),[t,r]=T.useState({grnNumber:"",purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",receiptDate:"",receivedBy:"",inspectedBy:"",status:"Draft",warehouseLocation:"",totalAmount:0,items:[],notes:"",qualityRemarks:"",deliveryChallanNumber:"",transporterName:"",vehicleNumber:""}),[a,s]=T.useState({}),i=["Draft","Approved","Rejected"],o=()=>{const m={};return t.grnNumber.trim()||(m.grnNumber="GRN number is required"),t.purchaseOrderNumber.trim()||(m.purchaseOrderNumber="Purchase order number is required"),t.supplierName.trim()||(m.supplierName="Supplier name is required"),t.receiptDate||(m.receiptDate="Receipt date is required"),t.receivedBy.trim()||(m.receivedBy="Received by is required"),t.items.length===0&&(m.items="At least one GRN item is required"),s(m),Object.keys(m).length===0},l=m=>{if(m.preventDefault(),!o())return;const p=t.items.reduce((h,y)=>h+(y.totalPrice||0),0),g={id:Date.now().toString(),grnNumber:t.grnNumber,poNumber:t.purchaseOrderNumber,supplierId:"SUP-001",supplierName:t.supplierName,receiptDate:new Date(t.receiptDate),status:t.status,totalAmount:p,items:t.items.map(h=>({poItemId:h.poItemId,materialId:h.materialId,materialCode:h.materialCode,materialName:h.materialName,orderedQuantity:h.orderedQuantity,receivedQuantity:h.receivedQuantity,unitPrice:h.unitPrice,totalPrice:h.totalPrice,qualityStatus:h.qualityStatus,remarks:h.remarks})),warehouseId:"WH-001",warehouseName:t.warehouseLocation,receivedBy:t.receivedBy,notes:t.notes,createdAt:new Date,updatedAt:new Date,createdBy:"admin",updatedBy:"admin"};console.log("Creating GRN:",g),e("/good-receipt-notes")},c=(m,p)=>{r(g=>({...g,[m]:p})),a[m]&&s(g=>({...g,[m]:""}))},u=()=>{const m={poItemId:"",materialId:"",materialCode:"",materialName:"",orderedQuantity:0,receivedQuantity:0,unitPrice:0,totalPrice:0,qualityStatus:"Accepted",remarks:"",acceptedQuantity:0,rejectedQuantity:0,totalAmount:0,specifications:"",batchNumber:"",expiryDate:""};r(p=>({...p,items:[...p.items,m]}))},d=(m,p,g)=>{r(h=>({...h,items:h.items.map((y,w)=>{if(w===m){const S={...y,[p]:g};return(p==="receivedQuantity"||p==="unitPrice")&&(S.totalPrice=S.receivedQuantity*S.unitPrice),S}return y})}))},f=m=>{r(p=>({...p,items:p.items.filter((g,h)=>h!==m)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New GRN"}),n.jsx("p",{className:"text-gray-600",children:"Create a new good receipt note"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to GRNs"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:l,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GRN Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.grnNumber?"border-red-500":""}`,value:t.grnNumber,onChange:m=>c("grnNumber",m.target.value),placeholder:"GRN-2024-001"}),a.grnNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.grnNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.purchaseOrderNumber?"border-red-500":""}`,value:t.purchaseOrderNumber,onChange:m=>c("purchaseOrderNumber",m.target.value),placeholder:"PO-2024-001"}),a.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.supplierName?"border-red-500":""}`,value:t.supplierName,onChange:m=>c("supplierName",m.target.value),placeholder:"ABC Steel Suppliers"}),a.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierContact,onChange:m=>c("supplierContact",m.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email"}),n.jsx("input",{type:"email",className:"input-field",value:t.supplierEmail,onChange:m=>c("supplierEmail",m.target.value),placeholder:"john@abcsteel.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.receiptDate?"border-red-500":""}`,value:t.receiptDate,onChange:m=>c("receiptDate",m.target.value)}),a.receiptDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.receiptDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receipt Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By *"}),n.jsx("input",{type:"text",className:`input-field ${a.receivedBy?"border-red-500":""}`,value:t.receivedBy,onChange:m=>c("receivedBy",m.target.value),placeholder:"Warehouse Manager"}),a.receivedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.receivedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inspected By"}),n.jsx("input",{type:"text",className:"input-field",value:t.inspectedBy,onChange:m=>c("inspectedBy",m.target.value),placeholder:"Quality Inspector"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:m=>c("status",m.target.value),children:i.map(m=>n.jsx("option",{value:m,children:m},m))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Location"}),n.jsx("input",{type:"text",className:"input-field",value:t.warehouseLocation,onChange:m=>c("warehouseLocation",m.target.value),placeholder:"Main Warehouse - Zone A"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Challan Number"}),n.jsx("input",{type:"text",className:"input-field",value:t.deliveryChallanNumber,onChange:m=>c("deliveryChallanNumber",m.target.value),placeholder:"DC-2024-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transporter Name"}),n.jsx("input",{type:"text",className:"input-field",value:t.transporterName,onChange:m=>c("transporterName",m.target.value),placeholder:"ABC Logistics"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Number"}),n.jsx("input",{type:"text",className:"input-field",value:t.vehicleNumber,onChange:m=>c("vehicleNumber",m.target.value),placeholder:"MH-12-AB-1234"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"GRN Items"}),n.jsxs("button",{type:"button",onClick:u,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((m,p)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.materialCode,onChange:g=>d(p,"materialCode",g.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.materialName,onChange:g=>d(p,"materialName",g.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ordered Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.orderedQuantity,onChange:g=>d(p,"orderedQuantity",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Received Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.receivedQuantity,onChange:g=>d(p,"receivedQuantity",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Accepted Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.receivedQuantity,onChange:g=>d(p,"receivedQuantity",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:m.unitPrice,onChange:g=>d(p,"unitPrice",parseFloat(g.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Batch Number"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.batchNumber||"",onChange:g=>d(p,"batchNumber",g.target.value),placeholder:"B001"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>f(p),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"col-span-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.specifications||"",onChange:g=>d(p,"specifications",g.target.value),placeholder:"Grade A, 12mm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:m.expiryDate||"",onChange:g=>d(p,"expiryDate",g.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{className:"input-field text-sm",value:m.qualityStatus,onChange:g=>d(p,"qualityStatus",g.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Total Amount: ",(m.totalPrice||0).toFixed(2)," KWD"]})]})]},p))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total GRN Amount: ",t.items.reduce((m,p)=>m+(p.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:m=>c("notes",m.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Remarks"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.qualityRemarks,onChange:m=>c("qualityRemarks",m.target.value),placeholder:"Quality inspection remarks and observations"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/good-receipt-notes"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create GRN"]})]})]})})]})},fce=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({grnNumber:"",purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",receiptDate:"",receivedBy:"",inspectedBy:"",status:"Draft",warehouseLocation:"",totalAmount:0,items:[],notes:"",qualityRemarks:"",deliveryChallanNumber:"",transporterName:"",vehicleNumber:""}),[s,i]=T.useState({}),[o,l]=T.useState(!0),c=["Draft","Approved","Rejected"],u={id:"1",grnNumber:"GRN-2024-001",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"ABC Steel Suppliers",receiptDate:new Date("2024-01-20"),status:"Approved",totalAmount:15750,items:[{poItemId:"POI-001",materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",orderedQuantity:100,receivedQuantity:100,unitPrice:45.5,totalPrice:4550,qualityStatus:"Accepted",remarks:"Good quality"},{poItemId:"POI-002",materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",orderedQuantity:50,receivedQuantity:50,unitPrice:125,totalPrice:6250,qualityStatus:"Accepted",remarks:"Excellent quality"},{poItemId:"POI-003",materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",orderedQuantity:200,receivedQuantity:200,unitPrice:23.75,totalPrice:4750,qualityStatus:"Accepted",remarks:"Good quality"}],warehouseId:"WH-001",warehouseName:"Main Warehouse",receivedBy:"Warehouse Manager",notes:"All materials received in good condition.",createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-21"),createdBy:"admin",updatedBy:"admin"};T.useEffect(()=>{setTimeout(()=>{a({grnNumber:u.grnNumber,purchaseOrderNumber:u.poNumber,supplierName:u.supplierName,supplierContact:"John Smith",supplierEmail:"john@abcsteel.com",receiptDate:u.receiptDate.toISOString().split("T")[0],receivedBy:u.receivedBy,inspectedBy:"Quality Inspector",status:u.status,warehouseLocation:u.warehouseName,totalAmount:u.totalAmount,items:u.items.map(y=>({...y,acceptedQuantity:y.receivedQuantity,rejectedQuantity:0,totalAmount:y.totalPrice,specifications:"Standard specifications",batchNumber:"BATCH-001",expiryDate:"2025-12-31"})),notes:u.notes,qualityRemarks:"Quality inspection completed",deliveryChallanNumber:"DC-2024-001",transporterName:"ABC Logistics",vehicleNumber:"MH-12-AB-1234"}),l(!1)},500)},[t]);const d=()=>{const y={};return r.grnNumber.trim()||(y.grnNumber="GRN number is required"),r.purchaseOrderNumber.trim()||(y.purchaseOrderNumber="Purchase order number is required"),r.supplierName.trim()||(y.supplierName="Supplier name is required"),r.receiptDate||(y.receiptDate="Receipt date is required"),r.receivedBy.trim()||(y.receivedBy="Received by is required"),r.items.length===0&&(y.items="At least one GRN item is required"),i(y),Object.keys(y).length===0},f=y=>{if(y.preventDefault(),!d())return;const w=r.items.reduce((v,x)=>v+x.totalAmount,0),S={...u,grnNumber:r.grnNumber,poNumber:r.purchaseOrderNumber,supplierName:r.supplierName,receiptDate:new Date(r.receiptDate),receivedBy:r.receivedBy,status:r.status,warehouseName:r.warehouseLocation,totalAmount:w,items:r.items.map(v=>({poItemId:v.poItemId,materialId:v.materialId,materialCode:v.materialCode,materialName:v.materialName,orderedQuantity:v.orderedQuantity,receivedQuantity:v.receivedQuantity,unitPrice:v.unitPrice,totalPrice:v.totalAmount,qualityStatus:v.qualityStatus,remarks:v.remarks})),notes:r.notes,updatedAt:new Date,updatedBy:"admin"};console.log("Updating GRN:",S),e("/good-receipt-notes")},m=(y,w)=>{a(S=>({...S,[y]:w})),s[y]&&i(S=>({...S,[y]:""}))},p=()=>{const y={poItemId:"",materialId:"",materialCode:"",materialName:"",orderedQuantity:0,receivedQuantity:0,unitPrice:0,totalPrice:0,qualityStatus:"Accepted",remarks:"",acceptedQuantity:0,rejectedQuantity:0,totalAmount:0,specifications:"",batchNumber:"",expiryDate:""};a(w=>({...w,items:[...w.items,y]}))},g=(y,w,S)=>{a(v=>({...v,items:v.items.map((x,b)=>{if(b===y){const N={...x,[w]:S};return(w==="acceptedQuantity"||w==="unitPrice")&&(N.totalAmount=N.acceptedQuantity*N.unitPrice),N}return x})}))},h=y=>{a(w=>({...w,items:w.items.filter((S,v)=>v!==y)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading GRN data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit GRN"}),n.jsx("p",{className:"text-gray-600",children:"Update good receipt note information"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to GRNs"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:f,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GRN Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.grnNumber?"border-red-500":""}`,value:r.grnNumber,onChange:y=>m("grnNumber",y.target.value),placeholder:"GRN-2024-001"}),s.grnNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.grnNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.purchaseOrderNumber?"border-red-500":""}`,value:r.purchaseOrderNumber,onChange:y=>m("purchaseOrderNumber",y.target.value),placeholder:"PO-2024-001"}),s.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.supplierName?"border-red-500":""}`,value:r.supplierName,onChange:y=>m("supplierName",y.target.value),placeholder:"ABC Steel Suppliers"}),s.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierContact,onChange:y=>m("supplierContact",y.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email"}),n.jsx("input",{type:"email",className:"input-field",value:r.supplierEmail,onChange:y=>m("supplierEmail",y.target.value),placeholder:"john@abcsteel.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.receiptDate?"border-red-500":""}`,value:r.receiptDate,onChange:y=>m("receiptDate",y.target.value)}),s.receiptDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.receiptDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receipt Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By *"}),n.jsx("input",{type:"text",className:`input-field ${s.receivedBy?"border-red-500":""}`,value:r.receivedBy,onChange:y=>m("receivedBy",y.target.value),placeholder:"Warehouse Manager"}),s.receivedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.receivedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inspected By"}),n.jsx("input",{type:"text",className:"input-field",value:r.inspectedBy,onChange:y=>m("inspectedBy",y.target.value),placeholder:"Quality Inspector"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:y=>m("status",y.target.value),children:c.map(y=>n.jsx("option",{value:y,children:y},y))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Location"}),n.jsx("input",{type:"text",className:"input-field",value:r.warehouseLocation,onChange:y=>m("warehouseLocation",y.target.value),placeholder:"Main Warehouse - Zone A"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Challan Number"}),n.jsx("input",{type:"text",className:"input-field",value:r.deliveryChallanNumber,onChange:y=>m("deliveryChallanNumber",y.target.value),placeholder:"DC-2024-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transporter Name"}),n.jsx("input",{type:"text",className:"input-field",value:r.transporterName,onChange:y=>m("transporterName",y.target.value),placeholder:"ABC Logistics"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Number"}),n.jsx("input",{type:"text",className:"input-field",value:r.vehicleNumber,onChange:y=>m("vehicleNumber",y.target.value),placeholder:"MH-12-AB-1234"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"GRN Items"}),n.jsxs("button",{type:"button",onClick:p,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((y,w)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:y.materialCode,onChange:S=>g(w,"materialCode",S.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:y.materialName,onChange:S=>g(w,"materialName",S.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ordered Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:y.orderedQuantity,onChange:S=>g(w,"orderedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Received Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:y.receivedQuantity,onChange:S=>g(w,"receivedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Accepted Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:y.acceptedQuantity,onChange:S=>g(w,"acceptedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:y.unitPrice,onChange:S=>g(w,"unitPrice",parseFloat(S.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Batch Number"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:y.batchNumber,onChange:S=>g(w,"batchNumber",S.target.value),placeholder:"B001"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>h(w),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"col-span-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:y.specifications,onChange:S=>g(w,"specifications",S.target.value),placeholder:"Grade A, 12mm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:y.expiryDate,onChange:S=>g(w,"expiryDate",S.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{className:"input-field text-sm",value:y.qualityStatus,onChange:S=>g(w,"qualityStatus",S.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Total Amount: ",y.totalAmount.toFixed(2)," KWD"]})]})]},w))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total GRN Amount: ",r.items.reduce((y,w)=>y+w.totalAmount,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:y=>m("notes",y.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Remarks"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.qualityRemarks,onChange:y=>m("qualityRemarks",y.target.value),placeholder:"Quality inspection remarks and observations"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/good-receipt-notes"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update GRN"]})]})]})})]})},mce=()=>{const e=ct(),[t,r]=T.useState([{id:"1",warehouseCode:"WH-001",warehouseName:"Main Warehouse",description:"Primary storage facility",address:{street:"123 Industrial Ave",city:"Industrial City",state:"State",zipCode:"12345",country:"Country"},capacity:1e4,currentCapacity:7500,managerId:"MGR-001",managerName:"John Smith",isActive:!0,storageTypes:["Dry Storage","Cold Storage"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-15").toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"2",warehouseCode:"WH-002",warehouseName:"Secondary Warehouse",description:"Secondary storage facility",address:{street:"456 Storage St",city:"Storage City",state:"State",zipCode:"67890",country:"Country"},capacity:5e3,currentCapacity:2e3,managerId:"MGR-002",managerName:"Jane Doe",isActive:!0,storageTypes:["Dry Storage"],createdAt:new Date("2024-01-16").toISOString(),updatedAt:new Date("2024-01-16").toISOString(),createdBy:"admin",updatedBy:"admin"}]),[a,s]=T.useState(""),i=t.filter(u=>u.warehouseName.toLowerCase().includes(a.toLowerCase())||u.warehouseCode.toLowerCase().includes(a.toLowerCase())),o=(u,d)=>u/d*100,l=u=>u>=90?"bg-red-500":u>=75?"bg-yellow-500":"bg-green-500",c=u=>{window.confirm("Are you sure you want to delete this warehouse?")&&r(t.filter(d=>d.id!==u))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Warehouse Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage warehouse locations and capacity"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Warehouse"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search warehouses...",className:"input-field pl-10",value:a,onChange:u=>s(u.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(u=>{const d=o(u.currentCapacity,u.capacity);return n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u.warehouseName}),n.jsx("p",{className:"text-sm text-gray-600",children:u.warehouseCode})]}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Od,{className:"h-4 w-4 mr-2"}),n.jsxs("span",{children:[u.address.city,", ",u.address.state]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Fi,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:u.managerName})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Capacity Usage"}),n.jsxs("span",{children:[d.toFixed(1),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${l(d)}`,style:{width:`${d}%`}})}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[u.currentCapacity.toLocaleString()," / ",u.capacity.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Storage Types:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:u.storageTypes.map((f,m)=>n.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:f},m))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t",children:[n.jsx("button",{onClick:()=>e(`/warehouse-master/edit/${u.id}`),className:"text-green-600 hover:text-green-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>c(u.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})]},u.id)})})]})},hce=()=>{const e=ct(),[t,r]=T.useState({warehouseCode:"",warehouseName:"",warehouseType:"Main",location:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactPhone:"",contactEmail:"",capacity:"",capacityUnit:"SQM",status:"Active",operatingHours:"",timezone:"",notes:"",specialRequirements:""}),[a,s]=T.useState({}),i=["Main","Sub","Transit","Cold Storage","Hazardous"],o=["Active","Inactive","Maintenance","Closed"],l=["SQM","CBM","KG","TON"],c=()=>{const f={};return t.warehouseCode.trim()||(f.warehouseCode="Warehouse code is required"),t.warehouseName.trim()||(f.warehouseName="Warehouse name is required"),t.location.trim()||(f.location="Location is required"),t.address.trim()||(f.address="Address is required"),t.city.trim()||(f.city="City is required"),t.state.trim()||(f.state="State is required"),t.country.trim()||(f.country="Country is required"),t.contactPerson.trim()||(f.contactPerson="Contact person is required"),t.contactPhone.trim()||(f.contactPhone="Contact phone is required"),t.contactEmail.trim()||(f.contactEmail="Contact email is required"),s(f),Object.keys(f).length===0},u=f=>{if(f.preventDefault(),!c())return;const m={id:Date.now().toString(),warehouseCode:t.warehouseCode,warehouseName:t.warehouseName,description:t.notes,address:{street:t.address,city:t.city,state:t.state,country:t.country,zipCode:t.postalCode},capacity:parseFloat(t.capacity)||0,currentCapacity:0,managerId:"MGR-001",managerName:t.contactPerson,isActive:t.status==="Active",storageTypes:["Dry Storage"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Warehouse:",m),e("/warehouse-master")},d=(f,m)=>{r(p=>({...p,[f]:m})),a[f]&&s(p=>({...p,[f]:""}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Warehouse"}),n.jsx("p",{className:"text-gray-600",children:"Create a new warehouse location"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Warehouses"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:u,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.warehouseCode?"border-red-500":""}`,value:t.warehouseCode,onChange:f=>d("warehouseCode",f.target.value),placeholder:"WH-001"}),a.warehouseCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.warehouseCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.warehouseName?"border-red-500":""}`,value:t.warehouseName,onChange:f=>d("warehouseName",f.target.value),placeholder:"Main Warehouse"}),a.warehouseName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.warehouseName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Type"}),n.jsx("select",{className:"input-field",value:t.warehouseType,onChange:f=>d("warehouseType",f.target.value),children:i.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),n.jsx("input",{type:"text",className:`input-field ${a.location?"border-red-500":""}`,value:t.location,onChange:f=>d("location",f.target.value),placeholder:"Industrial Zone A"}),a.location&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:f=>d("status",f.target.value),children:o.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"input-field flex-1",value:t.capacity,onChange:f=>d("capacity",f.target.value),placeholder:"1000"}),n.jsx("select",{className:"input-field w-24",value:t.capacityUnit,onChange:f=>d("capacityUnit",f.target.value),children:l.map(f=>n.jsx("option",{value:f,children:f},f))})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),n.jsx("textarea",{className:`input-field ${a.address?"border-red-500":""}`,rows:3,value:t.address,onChange:f=>d("address",f.target.value),placeholder:"123 Industrial Street, Manufacturing District"}),a.address&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.address})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${a.city?"border-red-500":""}`,value:t.city,onChange:f=>d("city",f.target.value),placeholder:"Mumbai"}),a.city&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),n.jsx("input",{type:"text",className:`input-field ${a.state?"border-red-500":""}`,value:t.state,onChange:f=>d("state",f.target.value),placeholder:"Maharashtra"}),a.state&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),n.jsx("input",{type:"text",className:`input-field ${a.country?"border-red-500":""}`,value:t.country,onChange:f=>d("country",f.target.value),placeholder:"India"}),a.country&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),n.jsx("input",{type:"text",className:"input-field",value:t.postalCode,onChange:f=>d("postalCode",f.target.value),placeholder:"400001"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),n.jsx("input",{type:"text",className:`input-field ${a.contactPerson?"border-red-500":""}`,value:t.contactPerson,onChange:f=>d("contactPerson",f.target.value),placeholder:"John Smith"}),a.contactPerson&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactPerson})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${a.contactPhone?"border-red-500":""}`,value:t.contactPhone,onChange:f=>d("contactPhone",f.target.value),placeholder:"+91 98765 43210"}),a.contactPhone&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactPhone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.contactEmail?"border-red-500":""}`,value:t.contactEmail,onChange:f=>d("contactEmail",f.target.value),placeholder:"john@company.com"}),a.contactEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactEmail})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),n.jsx("input",{type:"text",className:"input-field",value:t.operatingHours,onChange:f=>d("operatingHours",f.target.value),placeholder:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:t.timezone,onChange:f=>d("timezone",f.target.value),placeholder:"IST (UTC+5:30)"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:f=>d("notes",f.target.value),placeholder:"Additional notes or comments about the warehouse"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requirements"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialRequirements,onChange:f=>d("specialRequirements",f.target.value),placeholder:"Special storage requirements, security measures, or operational notes"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/warehouse-master"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Warehouse"]})]})]})})]})},xce=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({warehouseCode:"",warehouseName:"",warehouseType:"Main",location:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactPhone:"",contactEmail:"",capacity:"",capacityUnit:"SQM",status:"Active",operatingHours:"",timezone:"",notes:"",specialRequirements:""}),[s,i]=T.useState({}),[o,l]=T.useState(!0),c=["Main","Sub","Transit","Cold Storage","Hazardous"],u=["Active","Inactive","Maintenance","Closed"],d=["SQM","CBM","KG","TON"],f={id:"1",warehouseCode:"WH-001",warehouseName:"Main Warehouse",description:"Primary warehouse for finished goods storage",address:{street:"123 Industrial Street",city:"Mumbai",state:"Maharashtra",zipCode:"400001",country:"India"},capacity:5e3,currentCapacity:3e3,managerId:"MGR-001",managerName:"John Smith",isActive:!0,storageTypes:["Dry Storage","Cold Storage"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"};T.useEffect(()=>{setTimeout(()=>{a({warehouseCode:f.warehouseCode,warehouseName:f.warehouseName,warehouseType:"Main",location:"Industrial Zone A",address:f.address.street,city:f.address.city,state:f.address.state,country:f.address.country,postalCode:f.address.zipCode,contactPerson:f.managerName,contactPhone:"+91 98765 43210",contactEmail:"john@company.com",capacity:f.capacity.toString(),capacityUnit:"SQM",status:"Active",operatingHours:"8:00 AM - 6:00 PM",timezone:"IST (UTC+5:30)",notes:f.description,specialRequirements:"Temperature controlled environment required"}),l(!1)},500)},[t]);const m=()=>{const h={};return r.warehouseCode.trim()||(h.warehouseCode="Warehouse code is required"),r.warehouseName.trim()||(h.warehouseName="Warehouse name is required"),r.location.trim()||(h.location="Location is required"),r.address.trim()||(h.address="Address is required"),r.city.trim()||(h.city="City is required"),r.state.trim()||(h.state="State is required"),r.country.trim()||(h.country="Country is required"),r.contactPerson.trim()||(h.contactPerson="Contact person is required"),r.contactPhone.trim()||(h.contactPhone="Contact phone is required"),r.contactEmail.trim()||(h.contactEmail="Contact email is required"),i(h),Object.keys(h).length===0},p=h=>{if(h.preventDefault(),!m())return;const y={...f,warehouseCode:r.warehouseCode,warehouseName:r.warehouseName,description:r.notes,address:{street:r.address,city:r.city,state:r.state,zipCode:r.postalCode,country:r.country},capacity:parseFloat(r.capacity)||0,currentCapacity:parseFloat(r.capacity)||0,managerId:"MGR-001",managerName:r.contactPerson,isActive:r.status==="Active",storageTypes:["Dry Storage","Cold Storage"],updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Warehouse:",y),e("/warehouse-master")},g=(h,y)=>{a(w=>({...w,[h]:y})),s[h]&&i(w=>({...w,[h]:""}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading warehouse data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Warehouse"}),n.jsx("p",{className:"text-gray-600",children:"Update warehouse information"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Warehouses"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:p,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.warehouseCode?"border-red-500":""}`,value:r.warehouseCode,onChange:h=>g("warehouseCode",h.target.value),placeholder:"WH-001"}),s.warehouseCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.warehouseCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.warehouseName?"border-red-500":""}`,value:r.warehouseName,onChange:h=>g("warehouseName",h.target.value),placeholder:"Main Warehouse"}),s.warehouseName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.warehouseName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Type"}),n.jsx("select",{className:"input-field",value:r.warehouseType,onChange:h=>g("warehouseType",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),n.jsx("input",{type:"text",className:`input-field ${s.location?"border-red-500":""}`,value:r.location,onChange:h=>g("location",h.target.value),placeholder:"Industrial Zone A"}),s.location&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:h=>g("status",h.target.value),children:u.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"input-field flex-1",value:r.capacity,onChange:h=>g("capacity",h.target.value),placeholder:"1000"}),n.jsx("select",{className:"input-field w-24",value:r.capacityUnit,onChange:h=>g("capacityUnit",h.target.value),children:d.map(h=>n.jsx("option",{value:h,children:h},h))})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),n.jsx("textarea",{className:`input-field ${s.address?"border-red-500":""}`,rows:3,value:r.address,onChange:h=>g("address",h.target.value),placeholder:"123 Industrial Street, Manufacturing District"}),s.address&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.address})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${s.city?"border-red-500":""}`,value:r.city,onChange:h=>g("city",h.target.value),placeholder:"Mumbai"}),s.city&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),n.jsx("input",{type:"text",className:`input-field ${s.state?"border-red-500":""}`,value:r.state,onChange:h=>g("state",h.target.value),placeholder:"Maharashtra"}),s.state&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),n.jsx("input",{type:"text",className:`input-field ${s.country?"border-red-500":""}`,value:r.country,onChange:h=>g("country",h.target.value),placeholder:"India"}),s.country&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),n.jsx("input",{type:"text",className:"input-field",value:r.postalCode,onChange:h=>g("postalCode",h.target.value),placeholder:"400001"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),n.jsx("input",{type:"text",className:`input-field ${s.contactPerson?"border-red-500":""}`,value:r.contactPerson,onChange:h=>g("contactPerson",h.target.value),placeholder:"John Smith"}),s.contactPerson&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactPerson})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${s.contactPhone?"border-red-500":""}`,value:r.contactPhone,onChange:h=>g("contactPhone",h.target.value),placeholder:"+91 98765 43210"}),s.contactPhone&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactPhone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.contactEmail?"border-red-500":""}`,value:r.contactEmail,onChange:h=>g("contactEmail",h.target.value),placeholder:"john@company.com"}),s.contactEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactEmail})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),n.jsx("input",{type:"text",className:"input-field",value:r.operatingHours,onChange:h=>g("operatingHours",h.target.value),placeholder:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:r.timezone,onChange:h=>g("timezone",h.target.value),placeholder:"IST (UTC+5:30)"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:h=>g("notes",h.target.value),placeholder:"Additional notes or comments about the warehouse"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requirements"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialRequirements,onChange:h=>g("specialRequirements",h.target.value),placeholder:"Special storage requirements, security measures, or operational notes"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/warehouse-master"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update Warehouse"]})]})]})})]})},pce=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState({page:1,limit:10,total:0,pages:0}),[l,c]=T.useState(""),[u,d]=T.useState(null),[f,m]=T.useState(!1),[p,g]=T.useState(""),h=async()=>{try{s(!0);const b=await de.getTransferOrders({page:i.page,limit:i.limit,search:l||void 0,status:p||void 0,sortBy:"transferDate",sortOrder:"desc"});b.success&&(r(b.data),o(b.pagination))}catch(b){console.error("Error loading transfer orders:",b)}finally{s(!1)}};T.useEffect(()=>{h()},[i.page,l,p]),T.useEffect(()=>{const b=setInterval(()=>{h()},3e4);return()=>clearInterval(b)},[]);const y=t,w=b=>{switch(b){case"Completed":return"bg-green-100 text-green-800";case"In Transit":return"bg-blue-100 text-blue-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Failed":return"bg-red-100 text-red-800";case"Cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=b=>{switch(b){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";case"Normal":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},v=async b=>{const N=t.find(O=>O._id===b),j=(N==null?void 0:N.transferNumber)||"this transfer order";if(window.confirm(`Are you sure you want to delete ${j}?

This action cannot be undone.`))try{s(!0);const O=await de.deleteTransferOrder(b,{updatedBy:"Admin User"});O.success?(alert(`Transfer order ${j} has been deleted successfully.`),await h()):alert(`Failed to delete transfer order: ${O.message||"Unknown error"}`)}catch(O){console.error("Error deleting transfer order:",O),alert(`Error deleting transfer order: ${O instanceof Error?O.message:"Unknown error"}`)}finally{s(!1)}},x=()=>{var b,N,j,O;return n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transfer Order Details"}),n.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),u&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transfer Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(u.priority)}`,children:u.priority})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"From Outlet"}),n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:typeof u.fromOutlet=="object"?(b=u.fromOutlet)==null?void 0:b.name:u.fromOutlet||"N/A"}),((N=u.fromOutlet)==null?void 0:N.code)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[u.fromOutlet.code,"  ",u.fromOutlet.type||"Outlet"]}),n.jsx("div",{className:"text-xs text-gray-400",children:u.fromOutlet.location||"Location not specified"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"To Outlet"}),n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:typeof u.toOutlet=="object"?(j=u.toOutlet)==null?void 0:j.name:u.toOutlet||"N/A"}),((O=u.toOutlet)==null?void 0:O.code)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[u.toOutlet.code,"  ",u.toOutlet.type||"Outlet"]}),n.jsx("div",{className:"text-xs text-gray-400",children:u.toOutlet.location||"Location not specified"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transfer Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.transferDate?new Date(u.transferDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(u.status||"Unknown")}`,children:u.status||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requested By"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.requestedBy||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Amount"}),n.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:[u.totalAmount?u.totalAmount.toFixed(2):"0.00"," KWD"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Transfer Items"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Item Code"}),n.jsx("th",{className:"table-header",children:"Item Name"}),n.jsx("th",{className:"table-header",children:"Item Type"}),n.jsx("th",{className:"table-header",children:"Quantity"}),n.jsx("th",{className:"table-header",children:"Unit"}),n.jsx("th",{className:"table-header",children:"Unit Price"}),n.jsx("th",{className:"table-header",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.items&&u.items.length>0?u.items.map((_,E)=>n.jsxs("tr",{children:[n.jsx("td",{className:"table-cell",children:_.itemCode}),n.jsx("td",{className:"table-cell",children:_.itemName}),n.jsx("td",{className:"table-cell",children:_.itemType}),n.jsx("td",{className:"table-cell",children:_.quantity}),n.jsx("td",{className:"table-cell",children:_.unitOfMeasure}),n.jsxs("td",{className:"table-cell",children:[_.unitPrice?_.unitPrice.toFixed(2):"0.00"," KWD"]}),n.jsxs("td",{className:"table-cell font-medium",children:[_.totalValue?_.totalValue.toFixed(2):"0.00"," KWD"]})]},E)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center text-gray-500",children:"No items found"})})})]})}),n.jsx("div",{className:"mt-4 text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Amount: ",u.totalAmount?u.totalAmount.toFixed(2):"0.00"," KWD"]})})]}),u.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.notes})]})]})]})})})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transfer Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage material transfers between warehouses"})]}),n.jsxs("button",{onClick:()=>e("/central-kitchen/create-transfer"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search transfer orders...",className:"input-field pl-10",value:l,onChange:b=>c(b.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{className:"input-field",value:p,onChange:b=>g(b.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"In Transit",children:"In Transit"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Failed",children:"Failed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{onClick:h,className:"btn-secondary flex items-center",disabled:a,children:[n.jsx(cr,{className:"h-4 w-4 mr-2"}),a?"Refreshing...":"Refresh"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Transfer Number"}),n.jsx("th",{className:"table-header",children:"From  To"}),n.jsx("th",{className:"table-header",children:"Transfer Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Requested By"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center py-8",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-2 text-gray-600",children:"Loading transfer orders..."})]})})}):y.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center py-8 text-gray-500",children:"No transfer orders found"})}):y.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:b.transferNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.fromOutlet.name}),n.jsx(a8,{className:"h-4 w-4 mx-3 text-gray-400 flex-shrink-0"}),n.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.toOutlet.name})]})}),n.jsx("td",{className:"table-cell",children:new Date(b.transferDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(b.status)}`,children:b.status})}),n.jsx("td",{className:"table-cell",children:b.requestedBy}),n.jsxs("td",{className:"table-cell font-medium",children:[b.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{d(b),m(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:n.jsx(Vi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>v(b._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},b._id))})]})})}),f&&n.jsx(x,{})]})},gce=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({transferNumber:"",fromWarehouseId:"",fromWarehouseName:"",toWarehouseId:"",toWarehouseName:"",transferDate:"",expectedDeliveryDate:"",status:"Draft",priority:"Medium",totalAmount:0,items:[],requestedBy:"",approvedBy:"",receivedBy:"",transferType:"Internal",reason:"",notes:""}),[s,i]=T.useState({}),[o,l]=T.useState(!0),c=["Draft","Pending","Approved","In Transit","Delivered","Cancelled"],u=["Low","Medium","High","Urgent"],d=["Internal","External","Emergency"],f=[{id:"WH-001",name:"Main Warehouse"},{id:"WH-002",name:"Secondary Warehouse"},{id:"WH-003",name:"Cold Storage"},{id:"WH-004",name:"Hazardous Storage"}],m={id:"1",transferNumber:"TO-2024-001",fromWarehouseId:"WH-001",fromWarehouseName:"Main Warehouse",toWarehouseId:"WH-002",toWarehouseName:"Secondary Warehouse",transferDate:new Date("2024-01-20").toISOString(),expectedDeliveryDate:new Date("2024-01-22").toISOString(),status:"In Transit",priority:"High",totalAmount:15750,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:100,unitOfMeasure:"KG",unitPrice:45.5,totalPrice:4550,remarks:"High priority transfer"},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:50,unitOfMeasure:"SQM",unitPrice:125,totalPrice:6250,remarks:"Handle with care"},{materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",quantity:200,unitOfMeasure:"M",unitPrice:23.75,totalPrice:4750,remarks:"Standard transfer"}],requestedBy:"John Smith",approvedBy:"Manager Name",receivedBy:"Warehouse Staff",transferType:"Internal",reason:"Inventory rebalancing between warehouses for better distribution",notes:"Transfer approved for inventory optimization. Ensure proper handling of aluminum sheets.",createdAt:new Date("2024-01-20").toISOString(),updatedAt:new Date("2024-01-21").toISOString(),createdBy:"admin",updatedBy:"admin"};T.useEffect(()=>{setTimeout(()=>{var x;a({transferNumber:m.transferNumber,fromWarehouseId:m.fromWarehouseId,fromWarehouseName:m.fromWarehouseName,toWarehouseId:m.toWarehouseId,toWarehouseName:m.toWarehouseName,transferDate:m.transferDate.split("T")[0],expectedDeliveryDate:((x=m.expectedDeliveryDate)==null?void 0:x.split("T")[0])||"",status:m.status,priority:m.priority,totalAmount:m.totalAmount,items:m.items,requestedBy:m.requestedBy,approvedBy:m.approvedBy,receivedBy:m.receivedBy,transferType:m.transferType,reason:m.reason,notes:m.notes}),l(!1)},500)},[t]);const p=()=>{const x={};return r.transferNumber.trim()||(x.transferNumber="Transfer number is required"),r.fromWarehouseId||(x.fromWarehouseId="From warehouse is required"),r.toWarehouseId||(x.toWarehouseId="To warehouse is required"),r.transferDate||(x.transferDate="Transfer date is required"),r.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),r.requestedBy.trim()||(x.requestedBy="Requested by is required"),r.reason.trim()||(x.reason="Reason is required"),r.items.length===0&&(x.items="At least one transfer item is required"),i(x),Object.keys(x).length===0},g=x=>{if(x.preventDefault(),!p())return;const b=r.items.reduce((j,O)=>j+O.totalPrice,0),N={...m,transferNumber:r.transferNumber,fromWarehouseId:r.fromWarehouseId,fromWarehouseName:r.fromWarehouseName,toWarehouseId:r.toWarehouseId,toWarehouseName:r.toWarehouseName,transferDate:new Date(r.transferDate).toISOString(),expectedDeliveryDate:new Date(r.expectedDeliveryDate).toISOString(),status:r.status,priority:r.priority,totalAmount:b,items:r.items,requestedBy:r.requestedBy,approvedBy:r.approvedBy,receivedBy:r.receivedBy,transferType:r.transferType,reason:r.reason,notes:r.notes,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Transfer Order:",N),e("/transfer-orders")},h=(x,b)=>{a(N=>({...N,[x]:b})),s[x]&&i(N=>({...N,[x]:""}))},y=(x,b)=>{const N=f.find(O=>O.id===b),j=N?N.name:"";a(x==="fromWarehouseId"?O=>({...O,fromWarehouseId:b,fromWarehouseName:j}):O=>({...O,toWarehouseId:b,toWarehouseName:j}))},w=()=>{const x={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};a(b=>({...b,items:[...b.items,x]}))},S=(x,b,N)=>{a(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},v=x=>{a(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Transfer Order"}),n.jsx("p",{className:"text-gray-600",children:"Update transfer order information"})]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Transfer Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:g,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.transferNumber?"border-red-500":""}`,value:r.transferNumber,onChange:x=>h("transferNumber",x.target.value),placeholder:"TO-2024-001"}),s.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:r.transferType,onChange:x=>h("transferType",x.target.value),children:d.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:x=>h("priority",x.target.value),children:u.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:x=>h("status",x.target.value),children:c.map(x=>n.jsx("option",{value:x,children:x},x))})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Warehouse Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Warehouse *"}),n.jsxs("select",{className:`input-field ${s.fromWarehouseId?"border-red-500":""}`,value:r.fromWarehouseId,onChange:x=>y("fromWarehouseId",x.target.value),children:[n.jsx("option",{value:"",children:"Select From Warehouse"}),f.map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))]}),s.fromWarehouseId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.fromWarehouseId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Warehouse *"}),n.jsxs("select",{className:`input-field ${s.toWarehouseId?"border-red-500":""}`,value:r.toWarehouseId,onChange:x=>y("toWarehouseId",x.target.value),children:[n.jsx("option",{value:"",children:"Select To Warehouse"}),f.filter(x=>x.id!==r.fromWarehouseId).map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))]}),s.toWarehouseId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.toWarehouseId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.transferDate?"border-red-500":""}`,value:r.transferDate,onChange:x=>h("transferDate",x.target.value)}),s.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.expectedDeliveryDate?"border-red-500":""}`,value:r.expectedDeliveryDate,onChange:x=>h("expectedDeliveryDate",x.target.value)}),s.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personnel Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested By *"}),n.jsx("input",{type:"text",className:`input-field ${s.requestedBy?"border-red-500":""}`,value:r.requestedBy,onChange:x=>h("requestedBy",x.target.value),placeholder:"John Smith"}),s.requestedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.requestedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved By"}),n.jsx("input",{type:"text",className:"input-field",value:r.approvedBy,onChange:x=>h("approvedBy",x.target.value),placeholder:"Manager Name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By"}),n.jsx("input",{type:"text",className:"input-field",value:r.receivedBy,onChange:x=>h("receivedBy",x.target.value),placeholder:"Warehouse Staff"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transfer Items"}),n.jsxs("button",{type:"button",onClick:w,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((x,b)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.materialCode,onChange:N=>S(b,"materialCode",N.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.materialName,onChange:N=>S(b,"materialName",N.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>S(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.unitOfMeasure,onChange:N=>S(b,"unitOfMeasure",N.target.value),placeholder:"KG"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:x.unitPrice,onChange:N=>S(b,"unitPrice",parseFloat(N.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks,onChange:N=>S(b,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>v(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},b))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",r.items.reduce((x,b)=>x+b.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Transfer *"}),n.jsx("textarea",{className:`input-field ${s.reason?"border-red-500":""}`,rows:3,value:r.reason,onChange:x=>h("reason",x.target.value),placeholder:"Reason for material transfer"}),s.reason&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.reason})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:x=>h("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update Transfer Order"]})]})]})})]})},yce=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,c]=T.useState(""),[u,d]=T.useState(""),[f,m]=T.useState(""),[p,g]=T.useState(""),[h,y]=T.useState("createdAt"),[w,S]=T.useState("desc"),[v,x]=T.useState(null),[b,N]=T.useState(!1);T.useEffect(()=>{j()},[]),T.useEffect(()=>{a||j()},[l,u,f,p,h,w]);const j=async()=>{try{s(!0),o(null);const C=[{id:"outlet-001",outletCode:"KC001",outletName:"Kuwait City",outletType:"Restaurant",description:"Main restaurant outlet in Kuwait City",address:{street:"123 Main Street",city:"Kuwait City",state:"Kuwait",zipCode:"12345",country:"Kuwait"},contactInfo:{phone:"+965-1234-5678",email:"kuwait@localbeat.com",managerName:"Ahmed Al-Sabah",managerPhone:"+965-1234-5679",managerEmail:"ahmed@localbeat.com"},operatingHours:{monday:{open:"08:00",close:"22:00",isOpen:!0},tuesday:{open:"08:00",close:"22:00",isOpen:!0},wednesday:{open:"08:00",close:"22:00",isOpen:!0},thursday:{open:"08:00",close:"22:00",isOpen:!0},friday:{open:"08:00",close:"22:00",isOpen:!0},saturday:{open:"08:00",close:"22:00",isOpen:!0},sunday:{open:"08:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:100,kitchenCapacity:50,storageCapacity:200,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway","Delivery"],timezone:"Asia/Kuwait",notes:"Main restaurant outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-002",outletCode:"M360001",outletName:"360 Mall",outletType:"Cafe",description:"Cafe outlet in 360 Mall",address:{street:"360 Mall, Level 2",city:"Kuwait City",state:"Kuwait",zipCode:"12346",country:"Kuwait"},contactInfo:{phone:"+965-2345-6789",email:"mall360@localbeat.com",managerName:"Sarah Johnson",managerPhone:"+965-2345-6790",managerEmail:"sarah@localbeat.com"},operatingHours:{monday:{open:"10:00",close:"23:00",isOpen:!0},tuesday:{open:"10:00",close:"23:00",isOpen:!0},wednesday:{open:"10:00",close:"23:00",isOpen:!0},thursday:{open:"10:00",close:"23:00",isOpen:!0},friday:{open:"10:00",close:"23:00",isOpen:!0},saturday:{open:"10:00",close:"23:00",isOpen:!0},sunday:{open:"10:00",close:"23:00",isOpen:!0}},capacity:{seatingCapacity:80,kitchenCapacity:30,storageCapacity:150,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway"],timezone:"Asia/Kuwait",notes:"Mall cafe outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-003",outletCode:"VC001",outletName:"Vibes Complex",outletType:"Food Court",description:"Food court outlet in Vibes Complex",address:{street:"Vibes Complex, Food Court",city:"Kuwait City",state:"Kuwait",zipCode:"12347",country:"Kuwait"},contactInfo:{phone:"+965-3456-7890",email:"vibes@localbeat.com",managerName:"Mohammed Al-Rashid",managerPhone:"+965-3456-7891",managerEmail:"mohammed@localbeat.com"},operatingHours:{monday:{open:"09:00",close:"24:00",isOpen:!0},tuesday:{open:"09:00",close:"24:00",isOpen:!0},wednesday:{open:"09:00",close:"24:00",isOpen:!0},thursday:{open:"09:00",close:"24:00",isOpen:!0},friday:{open:"09:00",close:"24:00",isOpen:!0},saturday:{open:"09:00",close:"24:00",isOpen:!0},sunday:{open:"09:00",close:"24:00",isOpen:!0}},capacity:{seatingCapacity:120,kitchenCapacity:40,storageCapacity:180,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway","Food Court"],timezone:"Asia/Kuwait",notes:"Food court outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-004",outletCode:"TH001",outletName:"Taiba Hospital",outletType:"Drive-Thru",description:"Drive-thru outlet at Taiba Hospital",address:{street:"Taiba Hospital, Ground Floor",city:"Kuwait City",state:"Kuwait",zipCode:"12348",country:"Kuwait"},contactInfo:{phone:"+965-4567-8901",email:"taiba@localbeat.com",managerName:"Fatima Al-Zahra",managerPhone:"+965-4567-8902",managerEmail:"fatima@localbeat.com"},operatingHours:{monday:{open:"06:00",close:"02:00",isOpen:!0},tuesday:{open:"06:00",close:"02:00",isOpen:!0},wednesday:{open:"06:00",close:"02:00",isOpen:!0},thursday:{open:"06:00",close:"02:00",isOpen:!0},friday:{open:"06:00",close:"02:00",isOpen:!0},saturday:{open:"06:00",close:"02:00",isOpen:!0},sunday:{open:"06:00",close:"02:00",isOpen:!0}},capacity:{seatingCapacity:20,kitchenCapacity:25,storageCapacity:100,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Drive-Thru","Takeaway"],timezone:"Asia/Kuwait",notes:"Hospital drive-thru outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-005",outletCode:"CK001",outletName:"Central Kitchen",outletType:"Central Kitchen",description:"Central kitchen for all outlets",address:{street:"Industrial Area, Block 5",city:"Kuwait City",state:"Kuwait",zipCode:"12349",country:"Kuwait"},contactInfo:{phone:"+965-5678-9012",email:"central@localbeat.com",managerName:"Chef Abdullah",managerPhone:"+965-5678-9013",managerEmail:"chef@localbeat.com"},operatingHours:{monday:{open:"05:00",close:"23:00",isOpen:!0},tuesday:{open:"05:00",close:"23:00",isOpen:!0},wednesday:{open:"05:00",close:"23:00",isOpen:!0},thursday:{open:"05:00",close:"23:00",isOpen:!0},friday:{open:"05:00",close:"23:00",isOpen:!0},saturday:{open:"05:00",close:"23:00",isOpen:!0},sunday:{open:"05:00",close:"23:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:200,storageCapacity:500,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!0,features:["Production","Storage","Distribution"],timezone:"Asia/Kuwait",notes:"Central kitchen for all outlets",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"}];console.log("Loaded Outlets:",C),r(C)}catch(C){o(C instanceof Error?C.message:"Failed to load outlets"),console.error("Error loading outlets:",C)}finally{s(!1)}},O=async C=>{if(window.confirm("Are you sure you want to delete this outlet?"))try{(await de.deleteOutlet(C)).success?await j():alert("Failed to delete outlet")}catch(A){alert("Error deleting outlet: "+(A instanceof Error?A.message:"Unknown error")),console.error("Error deleting outlet:",A)}},_=()=>{c(""),d(""),m(""),g(""),y("createdAt"),S("desc"),j()},E=C=>{switch(C){case"Active":return"bg-green-100 text-green-800";case"Inactive":return"bg-gray-100 text-gray-800";case"Maintenance":return"bg-yellow-100 text-yellow-800";case"Closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=C=>{switch(C){case"Restaurant":return"bg-blue-100 text-blue-800";case"Cafe":return"bg-purple-100 text-purple-800";case"Food Court":return"bg-orange-100 text-orange-800";case"Drive-Thru":return"bg-green-100 text-green-800";case"Takeaway":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading outlets..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:j,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Outlet Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage restaurant outlets and central kitchen operations"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:j,className:"btn-secondary flex items-center",title:"Refresh outlets",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/outlets/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Outlet"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search outlets by name, code, city, or manager...",className:"input-field pl-10",value:l,onChange:C=>c(C.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:_,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsxs("select",{className:"input-field",value:u,onChange:C=>d(C.target.value),children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"Restaurant",children:"Restaurant"}),n.jsx("option",{value:"Cafe",children:"Cafe"}),n.jsx("option",{value:"Food Court",children:"Food Court"}),n.jsx("option",{value:"Drive-Thru",children:"Drive-Thru"}),n.jsx("option",{value:"Takeaway",children:"Takeaway"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:f,onChange:C=>m(C.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Maintenance",children:"Maintenance"}),n.jsx("option",{value:"Closed",children:"Closed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Type"}),n.jsxs("select",{className:"input-field",value:p,onChange:C=>g(C.target.value),children:[n.jsx("option",{value:"",children:"All Kitchens"}),n.jsx("option",{value:"true",children:"Central Kitchen"}),n.jsx("option",{value:"false",children:"Regular Outlet"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:h,onChange:C=>y(C.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"outletName",children:"Outlet Name"}),n.jsx("option",{value:"outletCode",children:"Outlet Code"}),n.jsx("option",{value:"outletType",children:"Outlet Type"}),n.jsx("option",{value:"status",children:"Status"})]}),n.jsx("button",{onClick:()=>S(w==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${w==="asc"?"Descending":"Ascending"}`,children:w==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",t.length," outlets",(l||u||f||p)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(l||u||f||p)&&n.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Outlet Code"}),n.jsx("th",{className:"table-header",children:"Outlet Name"}),n.jsx("th",{className:"table-header",children:"Type"}),n.jsx("th",{className:"table-header",children:"Location"}),n.jsx("th",{className:"table-header",children:"Manager"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Kitchen Type"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:C.outletCode}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:C.outletName}),n.jsx("div",{className:"text-gray-500 text-sm max-w-xs truncate",children:C.description})]})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${k(C.outletType)}`,children:C.outletType})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[n.jsx(Od,{className:"h-4 w-4 mr-1"}),n.jsxs("span",{children:[C.address.city,", ",C.address.state]})]})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:C.contactInfo.managerName}),n.jsx("div",{className:"text-gray-500 text-sm",children:C.contactInfo.phone})]})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(C.status)}`,children:C.status})}),n.jsx("td",{className:"table-cell",children:C.isCentralKitchen?n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:" Central Kitchen"}):n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Regular Outlet"})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>{x(C),N(!0)},className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Vi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/outlets/edit/${C.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>O(C.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},C.id))})]})})}),b&&v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Outlet Details"}),n.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code"}),n.jsx("p",{className:"text-gray-900 font-mono",children:v.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name"}),n.jsx("p",{className:"text-gray-900",children:v.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${k(v.outletType)}`,children:v.outletType})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(v.status)}`,children:v.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Type"}),v.isCentralKitchen?n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:" Central Kitchen"}):n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Regular Outlet"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("p",{className:"text-gray-900",children:v.timezone})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),n.jsxs("p",{className:"text-gray-900",children:[v.address.street,n.jsx("br",{}),v.address.city,", ",v.address.state," ",v.address.zipCode,n.jsx("br",{}),v.address.country]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.managerPhone||"N/A"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(L1,{className:"h-6 w-6 mx-auto text-blue-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Seating"}),n.jsx("p",{className:"text-lg font-semibold text-blue-600",children:v.capacity.seatingCapacity})]}),n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(En,{className:"h-6 w-6 mx-auto text-green-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Kitchen"}),n.jsx("p",{className:"text-lg font-semibold text-green-600",children:v.capacity.kitchenCapacity})]}),n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(Od,{className:"h-6 w-6 mx-auto text-purple-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Storage"}),n.jsx("p",{className:"text-lg font-semibold text-purple-600",children:v.capacity.storageCapacity})]})]})]}),v.features.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:v.features.map((C,A)=>n.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:C},A))})]}),v.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("p",{className:"text-gray-900",children:v.notes})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>N(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{N(!1),e(`/outlets/edit/${v.id}`)},className:"btn-primary",children:"Edit Outlet"})]})]})})]})},vce=()=>{const e=ct(),[t,r]=T.useState({outletCode:"",outletName:"",outletType:"Restaurant",description:"",address:{street:"",city:"",state:"",zipCode:"",country:"Kuwait"},contactInfo:{phone:"",email:"",managerName:"",managerPhone:"",managerEmail:""},operatingHours:{monday:{open:"09:00",close:"22:00",isOpen:!0},tuesday:{open:"09:00",close:"22:00",isOpen:!0},wednesday:{open:"09:00",close:"22:00",isOpen:!0},thursday:{open:"09:00",close:"22:00",isOpen:!0},friday:{open:"09:00",close:"22:00",isOpen:!0},saturday:{open:"09:00",close:"22:00",isOpen:!0},sunday:{open:"09:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:0,storageCapacity:0,capacityUnit:"SQM"},status:"Active",isCentralKitchen:!1,features:[],timezone:"Asia/Kuwait",notes:""}),[a,s]=T.useState({}),[i,o]=T.useState(!1),l=["Restaurant","Cafe","Food Court","Drive-Thru","Takeaway"],c=["Active","Inactive","Maintenance","Closed"],u=["SQM","CBM","KG","TON"],d=["Delivery","Takeaway","Dine-in","Drive-thru","Online Ordering","Catering"],f=()=>{const h={};return t.outletCode.trim()||(h.outletCode="Outlet code is required"),t.outletName.trim()||(h.outletName="Outlet name is required"),t.address.street.trim()||(h.street="Street address is required"),t.address.city.trim()||(h.city="City is required"),t.contactInfo.phone.trim()||(h.phone="Phone number is required"),t.contactInfo.email.trim()||(h.email="Email is required"),t.contactInfo.managerName.trim()||(h.managerName="Manager name is required"),s(h),Object.keys(h).length===0},m=async h=>{if(h.preventDefault(),!!f()){o(!0);try{(await de.createOutlet(t)).success?(alert("Outlet created successfully!"),e("/outlets")):alert("Failed to create outlet")}catch(y){alert("Error creating outlet: "+(y instanceof Error?y.message:"Unknown error")),console.error("Error creating outlet:",y)}finally{o(!1)}}},p=(h,y)=>{if(h.includes(".")){const[w,S]=h.split(".");r(v=>({...v,[w]:{...v[w]||{},[S]:y}}))}else r(w=>({...w,[h]:y}));a[h]&&s(w=>({...w,[h]:""}))},g=h=>{r(y=>({...y,features:y.features.includes(h)?y.features.filter(w=>w!==h):[...y.features,h]}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/outlets"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Outlets"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Outlet"}),n.jsx("p",{className:"text-gray-600",children:"Create a new restaurant outlet or central kitchen"})]})]})}),n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.outletCode?"border-red-500":""}`,value:t.outletCode,onChange:h=>p("outletCode",h.target.value.toUpperCase()),placeholder:"OUTLET-001"}),a.outletCode&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.outletName?"border-red-500":""}`,value:t.outletName,onChange:h=>p("outletName",h.target.value),placeholder:"Downtown Restaurant"}),a.outletName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("select",{className:"input-field",value:t.outletType,onChange:h=>p("outletType",h.target.value),children:l.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:h=>p("status",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.description,onChange:h=>p("description",h.target.value),placeholder:"Brief description of the outlet..."})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isCentralKitchen",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:t.isCentralKitchen,onChange:h=>p("isCentralKitchen",h.target.checked)}),n.jsx("label",{htmlFor:"isCentralKitchen",className:"ml-2 block text-sm text-gray-900",children:"This is a Central Kitchen"})]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),n.jsx("input",{type:"text",className:`input-field ${a.street?"border-red-500":""}`,value:t.address.street,onChange:h=>p("address.street",h.target.value),placeholder:"123 Main Street"}),a.street&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${a.city?"border-red-500":""}`,value:t.address.city,onChange:h=>p("address.city",h.target.value),placeholder:"Kuwait City"}),a.city&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.state,onChange:h=>p("address.state",h.target.value),placeholder:"Kuwait"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.zipCode,onChange:h=>p("address.zipCode",h.target.value),placeholder:"12345"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.country,onChange:h=>p("address.country",h.target.value),placeholder:"Kuwait"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${a.phone?"border-red-500":""}`,value:t.contactInfo.phone,onChange:h=>p("contactInfo.phone",h.target.value),placeholder:"+965 1234 5678"}),a.phone&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.email?"border-red-500":""}`,value:t.contactInfo.email,onChange:h=>p("contactInfo.email",h.target.value),placeholder:"outlet@restaurant.com"}),a.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.managerName?"border-red-500":""}`,value:t.contactInfo.managerName,onChange:h=>p("contactInfo.managerName",h.target.value),placeholder:"John Smith"}),a.managerName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("input",{type:"tel",className:"input-field",value:t.contactInfo.managerPhone,onChange:h=>p("contactInfo.managerPhone",h.target.value),placeholder:"+965 9876 5432"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Email"}),n.jsx("input",{type:"email",className:"input-field",value:t.contactInfo.managerEmail,onChange:h=>p("contactInfo.managerEmail",h.target.value),placeholder:"manager@restaurant.com"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Capacity & Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seating Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.seatingCapacity,onChange:h=>p("capacity.seatingCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.kitchenCapacity,onChange:h=>p("capacity.kitchenCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.storageCapacity,onChange:h=>p("capacity.storageCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity Unit"}),n.jsx("select",{className:"input-field",value:t.capacity.capacityUnit,onChange:h=>p("capacity.capacityUnit",h.target.value),children:u.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(h=>n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:t.features.includes(h),onChange:()=>g(h)}),n.jsx("span",{className:"ml-2 text-sm text-gray-900",children:h})]},h))})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:t.timezone,onChange:h=>p("timezone",h.target.value),placeholder:"Asia/Kuwait"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:h=>p("notes",h.target.value),placeholder:"Additional notes about the outlet..."})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/outlets"),className:"btn-secondary",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Outlet"]})})]})]})]})},bce=()=>{const e=ct(),{id:t}=zi(),[r,a]=T.useState({outletCode:"",outletName:"",outletType:"Restaurant",description:"",address:{street:"",city:"",state:"",zipCode:"",country:"Kuwait"},contactInfo:{phone:"",email:"",managerName:"",managerPhone:"",managerEmail:""},operatingHours:{monday:{open:"09:00",close:"22:00",isOpen:!0},tuesday:{open:"09:00",close:"22:00",isOpen:!0},wednesday:{open:"09:00",close:"22:00",isOpen:!0},thursday:{open:"09:00",close:"22:00",isOpen:!0},friday:{open:"09:00",close:"22:00",isOpen:!0},saturday:{open:"09:00",close:"22:00",isOpen:!0},sunday:{open:"09:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:0,storageCapacity:0,capacityUnit:"SQM"},status:"Active",isCentralKitchen:!1,features:[],timezone:"Asia/Kuwait",notes:""}),[s,i]=T.useState({}),[o,l]=T.useState(!1),[c,u]=T.useState(!0),d=["Restaurant","Cafe","Food Court","Drive-Thru","Takeaway"],f=["Active","Inactive","Maintenance","Closed"],m=["SQM","CBM","KG","TON"],p=["Delivery","Takeaway","Dine-in","Drive-thru","Online Ordering","Catering"];T.useEffect(()=>{t&&g()},[t]);const g=async()=>{try{u(!0);const v=await de.getOutlet(t);v.success?a(v.data):(alert("Failed to load outlet"),e("/outlets"))}catch(v){alert("Error loading outlet: "+(v instanceof Error?v.message:"Unknown error")),e("/outlets")}finally{u(!1)}},h=()=>{const v={};return r.outletCode.trim()||(v.outletCode="Outlet code is required"),r.outletName.trim()||(v.outletName="Outlet name is required"),r.address.street.trim()||(v.street="Street address is required"),r.address.city.trim()||(v.city="City is required"),r.contactInfo.phone.trim()||(v.phone="Phone number is required"),r.contactInfo.email.trim()||(v.email="Email is required"),r.contactInfo.managerName.trim()||(v.managerName="Manager name is required"),i(v),Object.keys(v).length===0},y=async v=>{if(v.preventDefault(),!!h()){l(!0);try{(await de.updateOutlet(t,r)).success?(alert("Outlet updated successfully!"),e("/outlets")):alert("Failed to update outlet")}catch(x){alert("Error updating outlet: "+(x instanceof Error?x.message:"Unknown error")),console.error("Error updating outlet:",x)}finally{l(!1)}}},w=(v,x)=>{if(v.includes(".")){const[b,N]=v.split(".");a(j=>({...j,[b]:{...j[b]||{},[N]:x}}))}else a(b=>({...b,[v]:x}));s[v]&&i(b=>({...b,[v]:""}))},S=v=>{a(x=>({...x,features:x.features.includes(v)?x.features.filter(b=>b!==v):[...x.features,v]}))};return c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading outlet..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/outlets"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Outlets"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Outlet"}),n.jsx("p",{className:"text-gray-600",children:"Update outlet information"})]})]})}),n.jsxs("form",{onSubmit:y,className:"space-y-6",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.outletCode?"border-red-500":""}`,value:r.outletCode,onChange:v=>w("outletCode",v.target.value.toUpperCase()),placeholder:"OUTLET-001"}),s.outletCode&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.outletName?"border-red-500":""}`,value:r.outletName,onChange:v=>w("outletName",v.target.value),placeholder:"Downtown Restaurant"}),s.outletName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("select",{className:"input-field",value:r.outletType,onChange:v=>w("outletType",v.target.value),children:d.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:v=>w("status",v.target.value),children:f.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.description,onChange:v=>w("description",v.target.value),placeholder:"Brief description of the outlet..."})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isCentralKitchen",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:r.isCentralKitchen,onChange:v=>w("isCentralKitchen",v.target.checked)}),n.jsx("label",{htmlFor:"isCentralKitchen",className:"ml-2 block text-sm text-gray-900",children:"This is a Central Kitchen"})]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),n.jsx("input",{type:"text",className:`input-field ${s.street?"border-red-500":""}`,value:r.address.street,onChange:v=>w("address.street",v.target.value),placeholder:"123 Main Street"}),s.street&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${s.city?"border-red-500":""}`,value:r.address.city,onChange:v=>w("address.city",v.target.value),placeholder:"Kuwait City"}),s.city&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.state,onChange:v=>w("address.state",v.target.value),placeholder:"Kuwait"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.zipCode,onChange:v=>w("address.zipCode",v.target.value),placeholder:"12345"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.country,onChange:v=>w("address.country",v.target.value),placeholder:"Kuwait"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${s.phone?"border-red-500":""}`,value:r.contactInfo.phone,onChange:v=>w("contactInfo.phone",v.target.value),placeholder:"+965 1234 5678"}),s.phone&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.email?"border-red-500":""}`,value:r.contactInfo.email,onChange:v=>w("contactInfo.email",v.target.value),placeholder:"outlet@restaurant.com"}),s.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.managerName?"border-red-500":""}`,value:r.contactInfo.managerName,onChange:v=>w("contactInfo.managerName",v.target.value),placeholder:"John Smith"}),s.managerName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("input",{type:"tel",className:"input-field",value:r.contactInfo.managerPhone,onChange:v=>w("contactInfo.managerPhone",v.target.value),placeholder:"+965 9876 5432"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Email"}),n.jsx("input",{type:"email",className:"input-field",value:r.contactInfo.managerEmail,onChange:v=>w("contactInfo.managerEmail",v.target.value),placeholder:"manager@restaurant.com"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Capacity & Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seating Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.seatingCapacity,onChange:v=>w("capacity.seatingCapacity",parseInt(v.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.kitchenCapacity,onChange:v=>w("capacity.kitchenCapacity",parseInt(v.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.storageCapacity,onChange:v=>w("capacity.storageCapacity",parseInt(v.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity Unit"}),n.jsx("select",{className:"input-field",value:r.capacity.capacityUnit,onChange:v=>w("capacity.capacityUnit",v.target.value),children:m.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(v=>n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:r.features.includes(v),onChange:()=>S(v)}),n.jsx("span",{className:"ml-2 text-sm text-gray-900",children:v})]},v))})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:r.timezone,onChange:v=>w("timezone",v.target.value),placeholder:"Asia/Kuwait"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:v=>w("notes",v.target.value),placeholder:"Additional notes about the outlet..."})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/outlets"),className:"btn-secondary",disabled:o,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Update Outlet"]})})]})]})]})},wce=()=>{const e=ct(),[t,r]=T.useState(null),[a,s]=T.useState(!0),[i,o]=T.useState(null),{notifications:l,markAsRead:c,markAllAsRead:u,clearAll:d}=Js("Central Kitchen");T.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0),o(null);const m=await de.getCentralKitchens();if(m.success&&m.data.length>0){const p=m.data[0];r(p)}else o("Central Kitchen not found")}catch(m){o(m instanceof Error?m.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",m)}finally{s(!1)}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Central Kitchen..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:f,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Central Kitchen"}),n.jsxs("p",{className:"text-gray-600",children:["Main production facility - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:f,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(Zi,{notifications:l,onMarkAsRead:c,onMarkAllAsRead:u,onClearAll:d})]})]}),n.jsx("div",{className:"card p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t==null?void 0:t.outletName}),n.jsx("p",{className:"text-gray-600",children:"Central Kitchen Operations"}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(L1,{className:"h-4 w-4 mr-1"}),"Production Facility"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(yx,{className:"h-4 w-4 mr-1"}),"24/7 Operations"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-1"}),"Distribution Hub"]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t==null?void 0:t.outletCode}),n.jsx("div",{className:"text-sm text-gray-500",children:"Central Kitchen"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Material Inventory"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Sl,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Good Inventory"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/make-finished-good"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx($1,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Make Finished Good"}),n.jsx("p",{className:"text-gray-600",children:"Create finished goods from raw materials"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/create-transfer"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(ta,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Transfer"}),n.jsx("p",{className:"text-gray-600",children:"Transfer inventory to outlets"})]})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>e("/central-kitchen/add-item"),className:"btn-primary flex items-center justify-center",children:[n.jsx(rt,{className:"h-4 w-4 mr-2"}),"Add Inventory Item"]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center justify-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"View All Transfers"]}),n.jsxs("button",{onClick:()=>e("/sales-orders"),className:"btn-secondary flex items-center justify-center",children:[n.jsx(En,{className:"h-4 w-4 mr-2"}),"View Sales Orders"]})]})]})]})},t6=({isOpen:e,onClose:t,onConfirm:r,onCancel:a,title:s,message:i,type:o="info",confirmText:l="OK",cancelText:c="Cancel",showCancel:u=!1})=>{if(!e)return null;const d=()=>{switch(o){case"success":return n.jsx(M1,{className:"h-6 w-6 text-green-600"});case"warning":return n.jsx(Uo,{className:"h-6 w-6 text-yellow-600"});case"error":return n.jsx(D1,{className:"h-6 w-6 text-red-600"});default:return n.jsx(bE,{className:"h-6 w-6 text-blue-600"})}},f=()=>{switch(o){case"success":return"bg-green-600 hover:bg-green-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"error":return"bg-red-600 hover:bg-red-700 text-white";default:return"bg-blue-600 hover:bg-blue-700 text-white"}},m=()=>{r&&r(),t()},p=()=>{a&&a(),t()};return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),n.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[n.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:n.jsxs("div",{className:"sm:flex sm:items-start",children:[n.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 sm:mx-0 sm:h-10 sm:w-10",children:d()}),n.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s}),n.jsx("div",{className:"mt-2",children:n.jsx("p",{className:"text-sm text-gray-500 whitespace-pre-line",children:i})})]})]})}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[u&&n.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:p,children:c}),n.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm ${f()}`,onClick:m,children:l})]})]})]})})},tu=({isOpen:e,onClose:t,transferOrder:r,onAccept:a,onReject:s,loading:i=!1})=>{const[o,l]=T.useState([]),[c,u]=T.useState(null),[d,f]=T.useState(""),[m,p]=T.useState("");if(T.useEffect(()=>{r&&(l(r.items.map(E=>({...E}))),p(r.notes||""))},[r]),!e||!r)return null;const g=r.status==="Approved"||r.status==="Rejected",h=E=>{switch(E){case"Urgent":return"bg-red-100 text-red-800 border-red-200";case"High":return"bg-orange-100 text-orange-800 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=r.status==="Pending"||r.status==="Approved by Central Kitchen",w=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),S=E=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD"}).format(E),v=E=>{const k=o[E];u(E),f(k.quantity.toString())},x=E=>{const k=parseInt(d,10);if(isNaN(k)||k<0){alert("Please enter a valid whole number (must be 0 or greater)");return}if(d.includes(".")||d.includes(",")){alert("Please enter a whole number only (no decimal values allowed)");return}const C=[...o],A=C[E],P=r.items[E].quantity;if(k>P){alert(`Cannot exceed original requested quantity of ${P} ${A.unitOfMeasure}. You can only decrease the quantity.`);return}A.quantity=k,A.totalPrice=k*A.unitPrice,A.totalValue=k*A.unitPrice,l(C),u(null),f("")},b=E=>{const k=E.replace(/[^0-9]/g,"");f(k)},N=E=>{const k=r.items[E].quantity,C=parseInt(d,10)||0;if(C<k){const A=C+1;f(A.toString())}},j=E=>{const k=parseInt(d,10)||0;if(k>0){const C=k-1;f(C.toString())}},O=()=>{u(null),f("")},_=()=>o.reduce((E,k)=>E+(k.totalPrice||k.totalValue||k.quantity*k.unitPrice),0);return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ta,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Order Details"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Order #",r.transferNumber]})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:`p-3 rounded-md border ${y?"bg-yellow-50 border-yellow-200 text-yellow-800":r.status==="Approved"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:["Status: ",r.status]}),n.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(En,{className:"h-5 w-5 text-blue-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"From Outlet"})]}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Outlet:"}),n.jsx("span",{className:"ml-2 text-gray-900",children:r.fromOutlet.name})]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Gy,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Transfer Date"})]}),n.jsx("p",{className:"text-gray-900",children:w(r.transferDate)})]}),n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(D1,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Priority"})]}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(r.priority)}`,children:r.priority})]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Fi,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Requested By"})]}),n.jsx("p",{className:"text-gray-900",children:r.requestedBy}),n.jsx("p",{className:"text-xs text-gray-500",children:w(r.requestedAt||r.transferDate)})]})}),n.jsxs("div",{className:"card p-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Notes (Optional)"}),n.jsx("textarea",{value:m,onChange:E=>p(E.target.value),placeholder:"Add any notes or comments about this transfer order...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,disabled:i}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes will be included in the Zoho Inventory transfer order description"})]}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transfer Items"}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approved Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.items.map((E,k)=>{const C=o[k]||E,A=c===k,P=C.quantity!==E.quantity;return n.jsxs("tr",{className:`hover:bg-gray-50 ${P?"bg-yellow-50":""}`,children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.itemCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:E.itemName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E.itemType==="Raw Material"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:E.itemType==="Raw Material"?"Raw Material":"Finished Goods"})}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:[E.category||"-",E.subCategory&&n.jsx("div",{className:"text-xs text-gray-400",children:E.subCategory})]}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:[E.quantity," ",E.unitOfMeasure]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>j(),disabled:parseInt(d,10)<=0,className:`p-1 rounded border transition-colors ${parseInt(d,10)<=0?"bg-gray-100 text-gray-400 border-gray-300 cursor-not-allowed":"bg-red-50 text-red-600 border-red-300 hover:bg-red-100 hover:border-red-400"}`,title:"Decrease quantity",children:n.jsx(f8,{className:"h-4 w-4"})}),n.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",min:"0",max:E.quantity,value:d,onChange:I=>b(I.target.value),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:I=>{if(I.key==="."||I.key===","||I.key==="-"||I.key==="e"||I.key==="E"||I.key==="+"){I.preventDefault();return}I.key==="Enter"?x(k):I.key==="Escape"&&O()},onBlur:()=>{const I=parseInt(d,10);isNaN(I)||I<0?f("0"):I>E.quantity&&f(E.quantity.toString())},autoFocus:!0,title:`Enter a whole number between 0 and ${E.quantity} (cannot exceed original)`}),n.jsx("button",{type:"button",onClick:()=>N(k),disabled:parseInt(d,10)>=E.quantity,className:`p-1 rounded border transition-colors ${parseInt(d,10)>=E.quantity?"bg-gray-100 text-gray-400 border-gray-300 cursor-not-allowed":"bg-green-50 text-green-600 border-green-300 hover:bg-green-100 hover:border-green-400"}`,title:"Increase quantity (max: original requested quantity)",children:n.jsx(Nt,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-xs text-gray-500 ml-1",children:E.unitOfMeasure}),n.jsx("button",{onClick:()=>x(k),className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-100 rounded transition-colors",title:"Save",children:n.jsx(n8,{className:"h-4 w-4"})}),n.jsx("button",{onClick:O,className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",title:"Cancel",children:n.jsx(h8,{className:"h-4 w-4"})})]}):n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:`text-sm font-medium ${P?"text-yellow-700":"text-gray-900"}`,children:[C.quantity," ",E.unitOfMeasure]}),P&&n.jsx("span",{className:"text-xs text-yellow-600 bg-yellow-100 px-2 py-0.5 rounded",children:"Modified"}),!g&&n.jsx("button",{onClick:()=>v(k),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded transition-colors",title:"Edit quantity",children:n.jsx(m8,{className:"h-4 w-4"})})]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:S(E.unitPrice)}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S(C.totalPrice||C.totalValue||C.quantity*C.unitPrice)})]},k)})})]}),n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Original Total:"}),n.jsx("span",{className:"text-sm text-gray-500",children:S(r.totalAmount||r.totalValue||0)})]}),n.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 pt-2",children:[n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Approved Total:"}),n.jsx("span",{className:`text-xl font-bold ${_()!==(r.totalAmount||r.totalValue||0)?"text-yellow-700":"text-gray-900"}`,children:S(_())})]}),_()!==(r.totalAmount||r.totalValue||0)&&n.jsxs("div",{className:"text-xs text-yellow-600 bg-yellow-50 p-2 rounded",children:[n.jsx("strong",{children:"Note:"})," Quantities have been modified. Only the approved quantities will be transferred."]})]})]})]})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Review the transfer order details before making a decision"}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",disabled:i,children:"Close"}),n.jsx("button",{onClick:()=>{const E=r._id||r.id||"";console.log("TransferOrderModal: Reject button clicked"),console.log("TransferOrderModal: transferOrder._id =",r._id),console.log("TransferOrderModal: transferOrder.id =",r.id),console.log("TransferOrderModal: Using transferOrderId =",E),s(E)},className:"px-4 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors disabled:opacity-50",disabled:i||!y,children:y?i?"Processing...":"Reject Order":"Rejected"}),n.jsx("button",{onClick:()=>{const E=r._id||r.id||"";console.log("TransferOrderModal: Accept button clicked"),console.log("TransferOrderModal: transferOrder._id =",r._id),console.log("TransferOrderModal: transferOrder.id =",r.id),console.log("TransferOrderModal: Using transferOrderId =",E),console.log("TransferOrderModal: Edited items:",o),console.log("TransferOrderModal: Transfer notes:",m),o.some((C,A)=>C.quantity!==r.items[A].quantity)?a(E,o,m.trim()||void 0):a(E,void 0,m.trim()||void 0)},className:"px-4 py-2 text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors disabled:opacity-50",disabled:i||!y,children:y?i?"Processing...":"Accept Order":"Approved"})]})]})]})})};function ru(e,t=500){const[r,a]=T.useState(e);return T.useEffect(()=>{const s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const Nce=2e4,jO=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("raw"),SO=(e,t)=>{if(!e||!t)return!1;const r=t.toLowerCase(),a=i=>(i==null?void 0:i.toLowerCase())??"";if(typeof e=="string"){const i=e.toLowerCase();return i===r||i.includes(r)}return[e.outletName,e.name,e.kitchenName,e.toOutletName,e.fromOutletName].some(i=>{if(typeof i!="string")return!1;const o=a(i);return o===r||o.includes(r)})},jce=()=>{const e=T.useRef(null),{confirmation:t,closeConfirmation:r}=Hw(),[a,s]=T.useState(null),[i,o]=T.useState([]),[l,c]=T.useState(!0),[u,d]=T.useState(null),[f,m]=T.useState(""),[p,g]=T.useState(""),[h,y]=T.useState(""),[w,S]=T.useState("materialName"),[v,x]=T.useState("asc"),[b,N]=T.useState(null),[j,O]=T.useState(!1),[_,E]=T.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[k,C]=T.useState(!1),[A,P]=T.useState(null),[I,F]=T.useState(!1),[q,H]=T.useState(!1),[V,re]=T.useState(!1),[oe,U]=T.useState({}),J=T.useRef({}),Q=T.useRef(new Set),{notifications:X,markAsRead:ee,markAllAsRead:ue,clearAll:we,refreshNotifications:ne}=Js("Central Kitchen"),[ie,Ne]=T.useState(1),[W,Ee]=T.useState(20),[B,ve]=T.useState(1),[ye,fe]=T.useState(0),et=ru(f,500),Ke=X.filter(he=>{var ae,je,L,K,Z;return he.isTransferOrder&&(he.itemType==="Raw Material"||he.itemType==="Mixed")&&(((ae=he.title)==null?void 0:ae.includes("Transfer Request from Kuwait City"))||((je=he.title)==null?void 0:je.includes("Transfer Request from 360 Mall"))||((L=he.title)==null?void 0:L.includes("Transfer Request from Vibes Complex"))||((K=he.title)==null?void 0:K.includes("Transfer Request from Taiba Hospital")))||((Z=he.title)==null?void 0:Z.includes("Items Received from Ingredient Master"))&&he.type==="success"});T.useEffect(()=>{console.log(" Central Kitchen: All notifications:",X),console.log(" Central Kitchen: Filtered notifications:",Ke),console.log(" Central Kitchen: Number of all notifications:",X.length),console.log(" Central Kitchen: Number of filtered notifications:",Ke.length)},[X,Ke]),T.useEffect(()=>{const he=setInterval(()=>{console.log(" Central Kitchen Raw Materials: Auto-refreshing notifications..."),ne()},5e3);return()=>clearInterval(he)},[ne]),T.useEffect(()=>{(async()=>{var K,Z;const ae=Date.now(),je=3e4,L=X.filter(te=>{var qe,Ae;if(!te.transferOrderId||Q.current.has(te.id)||ae-te.timestamp.getTime()>je)return!1;const ce=((qe=te.title)==null?void 0:qe.includes("Transfer Request Completed"))||((Ae=te.title)==null?void 0:Ae.includes("Transfer Request Approved by Outlet")),De=te.itemType==="Raw Material"||te.itemType==="Mixed",ke=te.type==="success";return ce&&De&&ke});for(const te of L){console.log(" Central Kitchen: Detected outlet acceptance notification:",te),Q.current.add(te.id);try{await new Promise(ce=>setTimeout(ce,500));const ge=await de.getTransferOrderById(te.transferOrderId);if(ge.success&&ge.data){const ce=ge.data;console.log(" Central Kitchen: Fetched transfer order after outlet acceptance:",ce),console.log(" Transfer order items quantities:",(K=ce.items)==null?void 0:K.map(qe=>({itemCode:qe.itemCode,quantity:qe.quantity})));const De=SO(ce.fromOutlet,"Central Kitchen"),ke=SO(ce.toOutlet,"Central Kitchen");if(ce.status==="Approved"&&jO((Z=ce.items)==null?void 0:Z[0],ce.itemType)){const qe=(ce.items||[]).filter(Ae=>jO(Ae,ce.itemType)).map(Ae=>({materialCode:Ae.itemCode||Ae.materialCode,materialId:Ae.materialId,itemCode:Ae.itemCode,quantity:Ae.quantity,itemType:Ae.itemType}));if(qe.length>0){const Ae=De?"decrease":"increase";console.log(` Central Kitchen: Showing ${Ae} indicator from notification (${De?"CK  Outlet":"Outlet  CK"}):`,qe),console.log(" Quantities being shown:",qe.map(Ze=>({code:Ze.materialCode,qty:Ze.quantity}))),gt(qe,Ae),await dt()}}}}catch(ge){console.error("Error fetching transfer order for indicator:",ge)}}})()},[X]),T.useEffect(()=>(U({}),Object.values(J.current).forEach(he=>{he&&clearTimeout(he)}),J.current={},()=>{Object.values(J.current).forEach(he=>{he&&clearTimeout(he)})}),[]);const gt=(he,ae)=>{!he||he.length===0||U(je=>{const L={...je};return he.forEach(K=>{const Z=K.materialCode||K.materialId||K.itemCode,te=Number(K.quantity);!Z||!te||(L[Z]={amount:Math.abs(te),type:ae},J.current[Z]&&clearTimeout(J.current[Z]),J.current[Z]=setTimeout(()=>{U(ge=>{const ce={...ge};return delete ce[Z],ce}),delete J.current[Z]},Nce))}),L})};T.useEffect(()=>{Xe()},[]),T.useEffect(()=>{l||(Ne(1),dt())},[et,p,h,w,v]),T.useEffect(()=>{!l&&a&&dt()},[ie,W]);const Xe=async()=>{try{c(!0),d(null);const he=await de.getCentralKitchens();if(he.success&&he.data.length>0){const ae=he.data[0];s({id:ae._id,outletCode:ae.kitchenCode,outletName:ae.kitchenName,outletType:"Central Kitchen",isCentralKitchen:!0}),await dt()}else d("Central Kitchen not found")}catch(he){d(he instanceof Error?he.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",he)}finally{c(!1)}},dt=async()=>{try{console.log("Loading raw materials from Central Kitchen dedicated database");const he=await de.getCentralKitchenRawMaterials({page:ie,limit:W,search:et,subCategory:p,status:h,sortBy:w==="materialName"?"materialName":w,sortOrder:v});if(he.success)if(console.log("Loaded Central Kitchen Raw Materials:",he.data),console.log("Pagination info:",he.pagination),he.pagination&&(ve(he.pagination.totalPages),fe(he.pagination.totalItems)),he.data&&he.data.length>0){const ae=he.data.map(je=>({id:je._id||je.id,outletId:"central-kitchen",outletCode:"CK001",outletName:"Central Kitchen",materialId:je._id,materialCode:je.materialCode,materialName:je.materialName,category:je.subCategory,unitOfMeasure:je.unitOfMeasure,unitPrice:je.unitPrice,currentStock:je.currentStock,reservedStock:0,availableStock:je.currentStock,minimumStock:je.minimumStock,maximumStock:je.maximumStock,reorderPoint:je.reorderPoint,totalValue:je.currentStock*je.unitPrice,location:"Main Storage",batchNumber:"",supplier:"",lastUpdated:je.lastStockUpdate||je.updatedAt,status:je.status,notes:je.notes||"",isActive:!0}));o(ae)}else console.log("No raw materials inventory found for this central kitchen"),o([]);else console.error("Failed to load raw materials inventory:",he.error||"API Error"),d(`Failed to load inventory from server: ${he.error||"Unknown error"}`)}catch(he){d(he instanceof Error?he.message:"Failed to load inventory"),console.error("Error loading inventory:",he)}},He=()=>{m(""),g(""),y(""),S("materialName"),x("asc"),Ne(1)},kt=he=>{N(he),E({currentStock:he.currentStock.toString(),minimumStock:he.minimumStock.toString(),maximumStock:he.maximumStock.toString(),reorderPoint:he.reorderPoint.toString(),unitPrice:he.unitPrice.toString(),notes:he.notes||""}),O(!0)},vt=async()=>{if(b)try{c(!0);const he={currentStock:parseFloat(_.currentStock)||0,minimumStock:parseFloat(_.minimumStock)||0,maximumStock:parseFloat(_.maximumStock)||0,reorderPoint:parseFloat(_.reorderPoint)||0,unitPrice:parseFloat(_.unitPrice)||0,notes:_.notes,updatedBy:"user"},ae=await de.updateCentralKitchenRawMaterial(b.id,he);if(ae.success)alert("Raw material updated successfully!"),O(!1),N(null),await dt();else throw new Error(ae.message||"Failed to update raw material")}catch(he){console.error("Error updating raw material:",he),alert(`Failed to update raw material: ${he instanceof Error?he.message:"Unknown error"}`)}finally{c(!1)}},St=()=>{O(!1),N(null),E({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},Lt=()=>{var he;(he=e.current)==null||he.click()},Et=async he=>{var K;const ae=(K=he.target.files)==null?void 0:K[0];if(!ae)return;const je=ae.name.toLowerCase().endsWith(".xlsx")||ae.name.toLowerCase().endsWith(".xls"),L=ae.name.toLowerCase().endsWith(".csv");if(!je&&!L){alert("Please select an Excel (.xlsx, .xls) or CSV file");return}try{if(re(!0),je){const Z=await de.importCentralKitchenExcel(ae);if(Z.success){const{results:te}=Z;let ge=`Excel Import completed!

Total Rows: ${te.totalRows}
Processed: ${te.totalProcessed}
Created: ${te.created}
Updated: ${te.updated}
Skipped: ${te.skipped}
Errors: ${te.errors}`;te.skippedReasons&&te.skippedReasons.length>0&&(ge+=`

Skipped Reasons:
${te.skippedReasons.join(`
`)}`),alert(ge),await dt()}else alert("Import failed: "+Z.message)}else{const te=(await ae.text()).split(`
`).filter(ke=>ke.trim());if(te.length<2){alert("CSV file must contain at least a header row and one data row");return}const ge=te.slice(1);let ce=0,De=0;for(const ke of ge)try{const qe=ke.split(",").map(Oe=>Oe.replace(/"/g,"").trim()),Ae={materialCode:qe[0],materialName:qe[1],category:qe[3],unitOfMeasure:qe[4],unitPrice:0,currentStock:0,minimumStock:0,maximumStock:0,supplier:"",notes:""},Ze={id:`rm-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,outletId:(a==null?void 0:a.id)||"central-kitchen-001",outletCode:(a==null?void 0:a.outletCode)||"",outletName:(a==null?void 0:a.outletName)||"",materialId:Ae.materialCode,materialCode:Ae.materialCode,materialName:Ae.materialName,category:Ae.category,unitOfMeasure:Ae.unitOfMeasure,unitPrice:Ae.unitPrice,currentStock:Ae.currentStock,reservedStock:0,availableStock:Ae.currentStock,minimumStock:Ae.minimumStock,maximumStock:Ae.maximumStock,reorderPoint:Math.ceil(Ae.minimumStock*1.5),totalValue:Ae.currentStock*Ae.unitPrice,location:"Main Storage",batchNumber:`BATCH-${Date.now()}`,supplier:Ae.supplier,lastUpdated:new Date().toISOString(),status:"In Stock",notes:Ae.notes,isActive:!0};o(Oe=>[...Oe,Ze]),ce++}catch{De++}alert(`CSV Import completed!

Successfully imported: ${ce} items
Errors: ${De}`)}}catch(Z){alert("Error importing file: "+(Z instanceof Error?Z.message:"Unknown error"))}finally{re(!1),e.current&&(e.current.value="")}},fr=async he=>{try{console.log(" Central Kitchen Raw Materials: handleViewTransferOrder called with transferOrderId:",he),F(!0);const ae=await de.getTransferOrderById(he);if(ae.success)P(ae.data),C(!0),console.log(" Central Kitchen Raw Materials: Transfer order modal opened successfully");else throw new Error(ae.message||"Failed to load transfer order")}catch(ae){console.error("Error loading transfer order:",ae),alert("Failed to load transfer order details")}finally{F(!1)}},Qe=async(he,ae,je)=>{try{F(!0),console.log("Starting acceptance process for transfer order:",he),console.log("Edited items:",ae),console.log("Fetching transfer order details...");const L=await de.getTransferOrderById(he);if(!L.success)throw new Error(L.message||"Failed to fetch transfer order");const K=L.data;console.log("Transfer order details:",K);const Z={approvedBy:"Central Kitchen Manager",notes:je||"Transfer order approved by Central Kitchen"};ae&&ae.length>0&&(Z.editedItems=ae,console.log("Including edited items in approval request:",ae)),console.log("Approving transfer order...");let te;try{te=await de.approveTransferOrder(he,Z),console.log("Approval response:",te)}catch(ge){throw console.error("Approval failed:",ge),new Error(`Approval failed: ${ge instanceof Error?ge.message:"Unknown error"}`)}if(te.success){const ge=ae&&ae.some((ce,De)=>{var ke;return ce.quantity!==((ke=K.items[De])==null?void 0:ke.quantity)});await dt(),alert(`Transfer order accepted successfully!${ge?" (Quantities modified)":""}`),C(!1),P(null),ee(he)}else throw new Error(`Failed to approve transfer order: ${te.message}`)}catch(L){console.error("Error accepting transfer order:",L),console.error("Error details:",L instanceof Error?L.message:"Unknown error"),alert(`Failed to accept transfer order: ${L instanceof Error?L.message:"Unknown error"}`)}finally{F(!1)}},ft=async he=>{var ae,je,L;try{F(!0),console.log("Starting rejection process for transfer order:",he),console.log("Fetching transfer order details...");const K=await de.getTransferOrderById(he);if(!K.success)throw new Error(K.message||"Failed to fetch transfer order");const Z=K.data;console.log("Transfer order details:",Z),console.log("Updating transfer order inventory...");let te,ge;try{ge=await de.updateTransferOrderInventory(he,"reject"),console.log("Inventory update response:",ge)}catch(ce){throw console.error("Inventory update failed:",ce),new Error(`Inventory update failed: ${ce instanceof Error?ce.message:"Unknown error"}`)}try{te=await de.updateTransferOrderStatus(he,{status:"Rejected",approvedBy:"Central Kitchen Manager",notes:"Transfer order rejected by Central Kitchen"}),console.log("Status update response:",te)}catch(ce){throw console.error("Status update failed:",ce),new Error(`Status update failed: ${ce instanceof Error?ce.message:"Unknown error"}`)}if(te.success&&ge.success){const ce=((ae=Z.items[0])==null?void 0:ae.itemType)||"Mixed",De=Z.items.map(Ae=>`${Ae.itemName} (${Ae.quantity} ${Ae.unitOfMeasure||"pcs"})`).join(", "),ke=typeof Z.fromOutlet=="string"?Z.fromOutlet:((je=Z.fromOutlet)==null?void 0:je.outletName)||((L=Z.fromOutlet)==null?void 0:L.name)||"Unknown Outlet";console.log("Creating notification for",ke,"...");const qe=await de.createNotification({title:"Transfer Order Rejected",message:`Transfer order #${Z.transferNumber} has been rejected. Requested items: ${De}`,type:"transfer_rejection",targetOutlet:ke,sourceOutlet:"Central Kitchen",transferOrderId:he,itemType:ce,priority:"normal"});console.log("Notification response:",qe),alert(`Transfer order rejected and notification sent to ${ke}`),C(!1),P(null),ee(he)}else throw new Error(`Failed to update transfer order status. Status: ${te.success}, Inventory: ${ge.success}`)}catch(K){console.error("Error rejecting transfer order:",K),console.error("Error details:",K instanceof Error?K.message:"Unknown error"),alert(`Failed to reject transfer order: ${K instanceof Error?K.message:"Unknown error"}`)}finally{F(!1)}},ut=async()=>{try{H(!0),console.log("Starting export of raw materials..."),await de.exportCentralKitchenRawMaterials({search:f,subCategory:p,status:h}),console.log("Export completed successfully")}catch(he){console.error("Error exporting raw materials:",he),alert(`Failed to export raw materials: ${he instanceof Error?he.message:"Unknown error"}`)}finally{H(!1)}},Ge=i.reduce((he,ae)=>he+ae.totalValue,0),Sr=i.filter(he=>he.status==="Low Stock").length,Er=i.filter(he=>he.status==="Out of Stock").length,Ga=[...new Set(i.map(he=>he.category))];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Raw Materials..."})]})}):u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:u}),n.jsx("button",{onClick:Xe,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Raw Material Inventory"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",a==null?void 0:a.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:ut,disabled:q,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),q?"Exporting...":"Export"]}),n.jsxs("button",{onClick:Xe,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(Zi,{notifications:Ke,onMarkAsRead:ee,onMarkAllAsRead:ue,onClearAll:we,onViewTransferOrder:fr,onRefresh:ne})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:ye}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(across all pages)"})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(rt,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[Ge.toFixed(2)," KWD"]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx(Uo,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Sr})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(OE,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Er})]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",className:"input-field pl-10",value:f,onChange:he=>m(he.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:He,className:"btn-secondary flex items-center",title:"Clear all filters",children:"Clear Filters"}),n.jsx("button",{onClick:Lt,disabled:V,className:`btn-secondary flex items-center ${V?"opacity-50 cursor-not-allowed":""}`,title:"Import inventory from Excel or CSV",children:V?n.jsxs(n.Fragment,{children:[n.jsx(ea,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Va,{className:"h-4 w-4 mr-2"}),"Import"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:p,onChange:he=>g(he.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),Ga.map(he=>n.jsx("option",{value:he,children:he},he))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:h,onChange:he=>y(he.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),n.jsx("option",{value:"Overstock",children:"Overstock"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:he=>S(he.target.value),children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastUpdated",children:"Last Updated"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",ye>0?(ie-1)*W+1:0," - ",Math.min(ie*W,ye)," of ",ye," raw material items",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:W,onChange:he=>{Ee(Number(he.target.value)),Ne(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]}),(f||p||h)&&n.jsx("button",{onClick:He,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})]}),n.jsxs("div",{className:"card overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Complete inventory list with all fields"})]})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-green-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(rt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No raw materials found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Raw materials inventory is empty"})]})})}):i.map(he=>{var ae,je,L;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:he.materialCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:he.materialName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:he.category}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:he.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",he.unitPrice?Number(he.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:he.currentStock}),(oe[he.materialCode]||oe[he.materialId]||oe[he.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((ae=oe[he.materialCode]||oe[he.materialId]||oe[he.id])==null?void 0:ae.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((je=oe[he.materialCode]||oe[he.materialId]||oe[he.id])==null?void 0:je.type)==="increase"?"+":"-",(L=oe[he.materialCode]||oe[he.materialId]||oe[he.id])==null?void 0:L.amount]})]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>kt(he),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:"Edit"})})]},he.id)})})]})}),B>1&&n.jsx("div",{className:"px-4 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",ie," of ",B]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>Ne(1),disabled:ie===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>Ne(he=>Math.max(1,he-1)),disabled:ie===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,B)},(he,ae)=>{let je;return B<=5||ie<=3?je=ae+1:ie>=B-2?je=B-4+ae:je=ie-2+ae,n.jsx("button",{onClick:()=>Ne(je),className:`px-3 py-1 text-sm border rounded-md ${ie===je?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:je},je)})}),n.jsx("button",{onClick:()=>Ne(he=>Math.min(B,he+1)),disabled:ie===B,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>Ne(B),disabled:ie===B,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]}),V&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx(ea,{className:"h-8 w-8 animate-spin text-blue-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-center mb-2",children:"Importing Excel File"}),n.jsx("p",{className:"text-gray-600 text-center mb-4",children:"Please wait while we process your Excel file..."}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),n.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"This may take a few moments depending on file size"})]})}),n.jsx("input",{ref:e,type:"file",accept:".xlsx,.xls,.csv",onChange:Et,style:{display:"none"}}),j&&b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Raw Material: ",b.materialName]}),n.jsx("button",{onClick:St,className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.currentStock,onChange:he=>E(ae=>({...ae,currentStock:he.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum Stock (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.minimumStock,onChange:he=>E(ae=>({...ae,minimumStock:he.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Stock (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.maximumStock,onChange:he=>E(ae=>({...ae,maximumStock:he.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reorder Point (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.reorderPoint,onChange:he=>E(ae=>({...ae,reorderPoint:he.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",value:_.unitPrice,onChange:he=>E(ae=>({...ae,unitPrice:he.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:_.notes,onChange:he=>E(ae=>({...ae,notes:he.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Optional notes..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:St,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),n.jsx("button",{onClick:vt,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Saving...":"Save Changes"})]})]})}),n.jsx(t6,{isOpen:t.isOpen,onClose:r,onConfirm:t.onConfirm,onCancel:t.onCancel,title:t.title,message:t.message,type:t.type,confirmText:t.confirmText,cancelText:t.cancelText,showCancel:t.showCancel}),n.jsx(tu,{isOpen:k,onClose:()=>{C(!1),P(null)},transferOrder:A,onAccept:Qe,onReject:ft,loading:I})]})},Sce="modulepreload",Cce=function(e){return"/"+e},CO={},uf=function(t,r,a){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=Cce(i),i in CO)return;CO[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!a)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Sce,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},kce=2e4,kO=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("finished"),OO=(e,t)=>{if(!e||!t)return!1;const r=t.toLowerCase(),a=i=>(i==null?void 0:i.toLowerCase())??"";if(typeof e=="string"){const i=e.toLowerCase();return i===r||i.includes(r)}return[e.outletName,e.name,e.kitchenName,e.toOutletName,e.fromOutletName].some(i=>{if(typeof i!="string")return!1;const o=a(i);return o===r||o.includes(r)})},Oce=()=>{const e=T.useRef(null),{confirmation:t,closeConfirmation:r}=Hw(),[a,s]=T.useState(null),[i,o]=T.useState([]),[l,c]=T.useState(!0),[u,d]=T.useState(null),[f,m]=T.useState(""),[p,g]=T.useState(""),[h,y]=T.useState(""),[w,S]=T.useState("materialName"),[v,x]=T.useState("asc"),[b,N]=T.useState(null),[j,O]=T.useState(!1),[_,E]=T.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[k,C]=T.useState(!1),[A,P]=T.useState(null),[I,F]=T.useState(!1),[q,H]=T.useState(!1),[V,re]=T.useState(!1),[oe,U]=T.useState({}),J=T.useRef({}),Q=T.useRef(new Set),{notifications:X,markAsRead:ee,markAllAsRead:ue,clearAll:we,refreshNotifications:ne}=Js("Central Kitchen"),[ie,Ne]=T.useState(1),[W,Ee]=T.useState(20),[B,ve]=T.useState(1),[ye,fe]=T.useState(0),et=ru(f,500),Ke=X.filter(ae=>{var je,L,K,Z,te;return ae.isTransferOrder&&(ae.itemType==="Finished Goods"||ae.itemType==="Mixed")&&(((je=ae.title)==null?void 0:je.includes("Transfer Request from Kuwait City"))||((L=ae.title)==null?void 0:L.includes("Transfer Request from 360 Mall"))||((K=ae.title)==null?void 0:K.includes("Transfer Request from Vibes Complex"))||((Z=ae.title)==null?void 0:Z.includes("Transfer Request from Taiba Hospital")))||((te=ae.title)==null?void 0:te.includes("Items Received from Ingredient Master"))&&ae.type==="success"});T.useEffect(()=>{console.log(" Central Kitchen Finished Goods: All notifications:",X),console.log(" Central Kitchen Finished Goods: Filtered notifications:",Ke),console.log(" Central Kitchen Finished Goods: Number of all notifications:",X.length),console.log(" Central Kitchen Finished Goods: Number of filtered notifications:",Ke.length)},[X,Ke]),T.useEffect(()=>{const ae=setInterval(()=>{console.log(" Central Kitchen Finished Goods: Auto-refreshing notifications..."),ne()},5e3);return()=>clearInterval(ae)},[ne]),T.useEffect(()=>{(async()=>{var Z,te,ge,ce,De;const je=Date.now(),L=3e4,K=X.filter(ke=>{var Ue,at;if(!ke.transferOrderId||Q.current.has(ke.id)||je-ke.timestamp.getTime()>L)return!1;const Ae=((Ue=ke.title)==null?void 0:Ue.includes("Transfer Request Completed"))||((at=ke.title)==null?void 0:at.includes("Transfer Request Approved by Outlet")),Ze=ke.itemType==="Finished Goods"||ke.itemType==="Mixed",Oe=ke.type==="success";return Ae&&Ze&&Oe});for(const ke of K){console.log(" Central Kitchen Finished Goods: Detected outlet acceptance notification:",ke),Q.current.add(ke.id);try{await new Promise(Ae=>setTimeout(Ae,500));const qe=await de.getTransferOrderById(ke.transferOrderId);if(qe.success&&qe.data){const Ae=qe.data;console.log(" Central Kitchen Finished Goods: Fetched transfer order after outlet acceptance:",Ae),console.log(" Transfer order items quantities:",(Z=Ae.items)==null?void 0:Z.map(Ot=>({itemCode:Ot.itemCode,productCode:Ot.productCode,quantity:Ot.quantity})));const Ze=OO(Ae.fromOutlet,"Central Kitchen"),Oe=OO(Ae.toOutlet,"Central Kitchen");console.log(" Central Kitchen Finished Goods: Checking transfer order:",{status:Ae.status,itemType:Ae.itemType,firstItemType:(ge=(te=Ae.items)==null?void 0:te[0])==null?void 0:ge.itemType,isFromCentralKitchen:Ze,isToCentralKitchen:Oe,itemsCount:(ce=Ae.items)==null?void 0:ce.length});const Ue=(De=Ae.items)==null?void 0:De.some(Ot=>kO(Ot,Ae.itemType)),at=Ae.itemType==="Finished Goods"||Ae.itemType==="Mixed"||Ue;if(console.log(" Central Kitchen Finished Goods: Transfer check:",{status:Ae.status==="Approved",isFinishedGoodTransfer:at,hasFinishedGoods:Ue,itemType:Ae.itemType}),Ae.status==="Approved"&&at){const Ot=(Ae.items||[]).filter(Bt=>kO(Bt,Ae.itemType)).map(Bt=>({materialCode:Bt.itemCode,materialId:Bt.materialId||Bt.productId,itemCode:Bt.itemCode,quantity:Bt.quantity,itemType:Bt.itemType}));if(console.log(" Central Kitchen Finished Goods: Indicator items after filtering:",Ot),Ot.length>0){const Bt=Ze?"decrease":"increase";console.log(` Central Kitchen Finished Goods: Showing ${Bt} indicator from notification (${Ze?"CK  Outlet":"Outlet  CK"}):`,Ot),console.log(" Quantities being shown:",Ot.map(R=>({code:R.materialCode,qty:R.quantity}))),Qe(Ot,Bt),await Xe()}else console.warn(" Central Kitchen Finished Goods: No indicator items found after filtering")}else console.log(" Central Kitchen Finished Goods: Transfer order not processed:",{status:Ae.status,isFinishedGoodTransfer:at,reason:Ae.status!=="Approved"?"Status not Approved":"Not a finished goods transfer"})}}catch(qe){console.error("Error fetching transfer order for indicator:",qe)}}})()},[X]),T.useEffect(()=>(U({}),Object.values(J.current).forEach(ae=>{ae&&clearTimeout(ae)}),J.current={},()=>{Object.values(J.current).forEach(ae=>{ae&&clearTimeout(ae)})}),[]),T.useEffect(()=>{gt()},[]),T.useEffect(()=>{l||(Ne(1),Xe())},[et,p,h,w,v]),T.useEffect(()=>{!l&&a&&Xe()},[ie,W]);const gt=async()=>{try{c(!0),d(null);const ae=await de.getCentralKitchens();if(ae.success&&ae.data&&Array.isArray(ae.data)&&ae.data.length>0){const je=ae.data[0];s({id:je._id,outletCode:je.kitchenCode,outletName:je.kitchenName,outletType:"Central Kitchen",isCentralKitchen:!0}),await Xe()}else d("Central Kitchen not found")}catch(ae){d(ae instanceof Error?ae.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",ae)}finally{c(!1)}},Xe=async()=>{try{console.log("Loading finished goods from Central Kitchen dedicated database");const ae=await de.getCentralKitchenFinishedProducts({page:ie,limit:W,search:et,subCategory:p,status:h,sortBy:w==="materialName"?"productName":w,sortOrder:v});if(ae.success)if(console.log("Loaded Central Kitchen Finished Goods:",ae.data),console.log("Pagination info:",ae.pagination),ae.pagination&&(ve(ae.pagination.totalPages),fe(ae.pagination.totalItems)),ae.data&&Array.isArray(ae.data)&&ae.data.length>0){const je=ae.data.map(L=>({id:L._id||L.id,outletId:"central-kitchen",outletCode:"CK001",outletName:"Central Kitchen",materialId:L._id,materialCode:L.productCode,materialName:L.productName,category:L.subCategory,unitOfMeasure:L.unitOfMeasure,unitPrice:L.unitPrice,currentStock:L.currentStock,reservedStock:0,availableStock:L.currentStock,minimumStock:L.minimumStock,maximumStock:L.maximumStock,reorderPoint:L.reorderPoint,totalValue:L.currentStock*L.unitPrice,location:"Main Storage",batchNumber:"",supplier:"",lastUpdated:L.lastStockUpdate||L.updatedAt,status:L.status,notes:L.notes||"",isActive:!0}));o(je)}else console.log("No finished goods inventory found for this central kitchen"),o([]);else console.error("Failed to load finished goods inventory:",ae.error||"API Error"),d(`Failed to load inventory from server: ${ae.error||"Unknown error"}`)}catch(ae){d(ae instanceof Error?ae.message:"Failed to load inventory"),console.error("Error loading inventory:",ae)}},dt=()=>{m(""),g(""),y(""),S("materialName"),x("asc"),Ne(1)},He=ae=>{N(ae),E({currentStock:ae.currentStock.toString(),minimumStock:ae.minimumStock.toString(),maximumStock:ae.maximumStock.toString(),reorderPoint:ae.reorderPoint.toString(),unitPrice:ae.unitPrice.toString(),notes:ae.notes||""}),O(!0)},kt=async()=>{if(b)try{c(!0);const ae={currentStock:Number.parseFloat(_.currentStock)||0,minimumStock:Number.parseFloat(_.minimumStock)||0,maximumStock:Number.parseFloat(_.maximumStock)||0,reorderPoint:Number.parseFloat(_.reorderPoint)||0,unitPrice:Number.parseFloat(_.unitPrice)||0,notes:_.notes,updatedBy:"user"},je=await de.updateCentralKitchenFinishedProduct(b.id,ae);if(je.success)alert("Finished product updated successfully!"),O(!1),N(null),await Xe();else throw new Error(je.message||"Failed to update finished product")}catch(ae){console.error("Error updating finished product:",ae),alert(`Failed to update finished product: ${ae instanceof Error?ae.message:"Unknown error"}`)}finally{c(!1)}},vt=()=>{O(!1),N(null),E({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},St=()=>{var ae;(ae=e.current)==null||ae.click()},Lt=async()=>{try{const ae=[{SKU:"psk-001","Product Name":"Sample Finished Good","Sales Description":"Sample finished good description","Parent Category":"Finish Product","SubCategory Name":"MAIN COURSES",Unit:"piece","Unit Price":10.5,"Cost Price":7.25,"Current Quantity":100,"Minimum Stock":10,"Maximum Stock":500,"Reorder Point":25,Status:"Active",Description:"Sample product description",Notes:"Sample notes"}],je=await uf(()=>Promise.resolve().then(()=>kf),void 0),L=je.utils.book_new(),K=je.utils.json_to_sheet(ae),Z=[{wch:15},{wch:25},{wch:30},{wch:20},{wch:20},{wch:15},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:10},{wch:30},{wch:30}];K["!cols"]=Z,je.utils.book_append_sheet(L,K,"Finished Goods Template");const te=je.write(L,{type:"array",bookType:"xlsx"}),ge=new Blob([te],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ce=window.URL.createObjectURL(ge),De=document.createElement("a");De.href=ce,De.download="Central_Kitchen_Finished_Goods_Template.xlsx",document.body.appendChild(De),De.click(),window.URL.revokeObjectURL(ce),document.body.removeChild(De)}catch(ae){console.error("Error downloading template:",ae),alert("Error downloading template: "+(ae instanceof Error?ae.message:"Unknown error"))}},Et=async ae=>{var Z;const je=(Z=ae.target.files)==null?void 0:Z[0];if(!je)return;const L=[".xlsx",".xls",".csv"],K=je.name.toLowerCase().substring(je.name.lastIndexOf("."));if(!L.includes(K)){alert("Please select an Excel file (.xlsx, .xls) or CSV file");return}try{re(!0);let te=[],ge=[];if(K===".csv"){const ke=(await je.text()).split(`
`).filter(Ae=>Ae.trim());if(ke.length<2){alert("CSV file must contain at least a header row and one data row");return}te=ke.slice(1).map((Ae,Ze)=>{try{if(!Ae||Ae.trim()==="")return null;const Oe=Ae.split(",").map(Ue=>Ue.replace(/"/g,"").trim());return!Oe[0]||!Oe[1]||Oe[0]===""||Oe[1]===""?(ge.push(`Row ${Ze+2}: Missing product code or name`),null):{productCode:String(Oe[0]||"").trim(),productName:String(Oe[1]||"").trim(),salesDescription:String(Oe[2]||Oe[1]||"").trim(),subCategory:String(Oe[3]||"MAIN COURSES").trim(),unitOfMeasure:String(Oe[4]||"piece").trim(),unitPrice:Number.parseFloat(Oe[5]||"0")||0,costPrice:Number.parseFloat(Oe[6]||"0")||0,currentStock:Number.parseFloat(Oe[7]||"0")||0,minimumStock:Number.parseFloat(Oe[8]||"5")||5,maximumStock:Number.parseFloat(Oe[9]||"100")||100,reorderPoint:Number.parseFloat(Oe[10]||"10")||10,status:String(Oe[11]||"Active").trim(),description:String(Oe[12]||"").trim(),notes:String(Oe[13]||"").trim()}}catch(Oe){return ge.push(`Row ${Ze+2}: ${Oe instanceof Error?Oe.message:"Parse error"}`),null}}).filter(Boolean)}else{const De=await uf(()=>Promise.resolve().then(()=>kf),void 0),ke=await je.arrayBuffer(),qe=De.read(ke,{type:"array"}),Ae=qe.SheetNames[0],Ze=qe.Sheets[Ae],Oe=De.utils.sheet_to_json(Ze,{header:1});if(Oe.length<2){alert("Excel file must contain at least a header row and one data row");return}const Ue=Oe[0];te=Oe.slice(1).map((Ot,Bt)=>{try{if(!Ot||Ot.every(z=>!z||z===""))return null;const R=z=>{const G=Ue.findIndex(Y=>Y&&Y.toLowerCase().includes(z.toLowerCase()));return G>=0?String(Ot[G]||""):""},D=R("sku")||R("product code")||"",M=R("product name")||R("item name")||R("sales description")||"";return!D||!M||D===""||M===""?(ge.push(`Row ${Bt+2}: Missing product code or name`),null):{productCode:String(D||"").trim(),productName:String(M||"").trim(),salesDescription:String(R("sales description")||M||R("description")||"").trim(),subCategory:String(R("subcategory name")||R("subcategory")||R("category")||"MAIN COURSES").trim(),unitOfMeasure:String(R("unit")||R("unit of measure")||"piece").trim(),unitPrice:Number.parseFloat(R("unit price")||R("price")||"0")||0,costPrice:Number.parseFloat(R("cost price")||R("cost")||"0")||0,currentStock:Number.parseFloat(R("current quantity")||R("current stock")||R("quantity")||"0")||0,minimumStock:Number.parseFloat(R("minimum stock")||"5")||5,maximumStock:Number.parseFloat(R("maximum stock")||"100")||100,reorderPoint:Number.parseFloat(R("reorder point")||"10")||10,status:String(R("status")||"Active").trim(),description:String(R("description")||"").trim(),notes:String(R("notes")||"").trim()}}catch(R){return ge.push(`Row ${Bt+2}: ${R instanceof Error?R.message:"Parse error"}`),null}}).filter(Boolean)}if(ge.length>0){console.warn("Parse errors:",ge);const De=`Found ${ge.length} parsing errors:

${ge.slice(0,10).join(`
`)}${ge.length>10?`
... and ${ge.length-10} more errors`:""}`;alert(De)}if(te.length===0){alert("No valid products found in the file. Please check that your file has the required columns: Product Code, Product Name");return}console.log(`Parsed ${te.length} products for import`);const ce=await de.importCentralKitchenFinishedProducts(te);if(ce.success){const De=ce.data,ke=(De==null?void 0:De.successCount)||0,qe=(De==null?void 0:De.errorCount)||0;let Ae=`Import completed!

Successfully imported: ${ke} items
Errors: ${qe}`;De!=null&&De.errors&&De.errors.length>0&&(console.warn("Import errors:",De.errors),Ae+=`

First few errors:
${De.errors.slice(0,5).join(`
`)}`),alert(Ae),await Xe()}else throw new Error(ce.message||"Import failed")}catch(te){console.error("Error importing file:",te),alert("Error importing file: "+(te instanceof Error?te.message:"Unknown error"))}finally{re(!1),e.current&&(e.current.value="")}},fr=async ae=>{try{console.log(" Central Kitchen Raw Materials: handleViewTransferOrder called with transferOrderId:",ae),F(!0);const je=await de.getTransferOrderById(ae);if(je.success)P(je.data),C(!0),console.log(" Central Kitchen Raw Materials: Transfer order modal opened successfully");else throw new Error(je.message||"Failed to load transfer order")}catch(je){console.error("Error loading transfer order:",je),alert("Failed to load transfer order details")}finally{F(!1)}},Qe=(ae,je)=>{!ae||ae.length===0||U(L=>{const K={...L};return ae.forEach(Z=>{const te=Z.materialCode||Z.materialId||Z.itemCode,ge=Number(Z.quantity);!te||!ge||(K[te]={amount:Math.abs(ge),type:je},J.current[te]&&clearTimeout(J.current[te]),J.current[te]=setTimeout(()=>{U(ce=>{const De={...ce};return delete De[te],De}),delete J.current[te]},kce))}),K})},ft=async(ae,je,L)=>{try{F(!0),console.log("Starting acceptance process for transfer order:",ae),console.log("Edited items:",je),console.log("Fetching transfer order details...");const K=await de.getTransferOrderById(ae);if(!K.success)throw new Error(K.message||"Failed to fetch transfer order");const Z=K.data;console.log("Transfer order details:",Z);const te={approvedBy:"Central Kitchen Manager",notes:L||"Transfer order approved by Central Kitchen"};je&&je.length>0&&(te.editedItems=je,console.log("Including edited items in approval request:",je)),console.log("Approving transfer order...");let ge;try{ge=await de.approveTransferOrder(ae,te),console.log("Approval response:",ge)}catch(ce){throw console.error("Approval failed:",ce),new Error(`Approval failed: ${ce instanceof Error?ce.message:"Unknown error"}`)}if(ge.success){const ce=je&&je.some((De,ke)=>{var qe;return De.quantity!==((qe=Z.items[ke])==null?void 0:qe.quantity)});await Xe(),alert(`Transfer order accepted successfully!${ce?" (Quantities modified)":""}`),C(!1),P(null),ee(ae)}else throw new Error(`Failed to approve transfer order: ${ge.message}`)}catch(K){console.error("Error accepting transfer order:",K),console.error("Error details:",K instanceof Error?K.message:"Unknown error"),alert(`Failed to accept transfer order: ${K instanceof Error?K.message:"Unknown error"}`)}finally{F(!1)}},ut=async ae=>{try{F(!0),console.log("Starting rejection process for transfer order:",ae),console.log("Fetching transfer order details...");const je=await de.getTransferOrderById(ae);if(!je.success)throw new Error(je.message||"Failed to fetch transfer order");const L=je.data;console.log("Transfer order details:",L),console.log("Rejecting transfer order...");let K;try{K=await de.rejectTransferOrder(ae,{approvedBy:"Central Kitchen Manager",notes:"Transfer order rejected by Central Kitchen"}),console.log("Rejection response:",K)}catch(Z){throw console.error("Rejection failed:",Z),new Error(`Rejection failed: ${Z instanceof Error?Z.message:"Unknown error"}`)}if(K.success)alert("Transfer order rejected successfully!"),C(!1),P(null),ee(ae);else throw new Error(`Failed to reject transfer order: ${K.message}`)}catch(je){console.error("Error rejecting transfer order:",je),console.error("Error details:",je instanceof Error?je.message:"Unknown error"),alert(`Failed to reject transfer order: ${je instanceof Error?je.message:"Unknown error"}`)}finally{F(!1)}},Ge=async()=>{try{H(!0),console.log("Starting export of finished goods..."),await de.exportCentralKitchenFinishedProducts({search:f,subCategory:p,status:h}),console.log("Export completed successfully")}catch(ae){console.error("Error exporting finished goods:",ae),alert(`Failed to export finished goods: ${ae instanceof Error?ae.message:"Unknown error"}`)}finally{H(!1)}},Sr=i.reduce((ae,je)=>ae+je.totalValue,0),Er=i.filter(ae=>ae.status==="Low Stock").length,Ga=i.filter(ae=>ae.status==="Out of Stock").length,he=[...new Set(i.map(ae=>ae.category))];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Finished Goods..."})]})}):u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:u}),n.jsx("button",{onClick:gt,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6 relative",children:[V&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Importing Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Please wait while we process your file..."}),n.jsx("div",{className:"mt-4 text-sm text-gray-500",children:"This may take a few moments for large files"})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Finished Goods Inventory"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",a==null?void 0:a.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Ge,disabled:q,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),q?"Exporting...":"Export"]}),n.jsxs("button",{onClick:gt,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(Zi,{notifications:Ke,onMarkAsRead:ee,onMarkAllAsRead:ue,onClearAll:we,onViewTransferOrder:fr,onRefresh:ne})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:ye}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(across all pages)"})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(rt,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[Sr.toFixed(2)," KWD"]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx(Uo,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Er})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(OE,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ga})]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search finished goods by name, code, or supplier...",className:"input-field pl-10",value:f,onChange:ae=>m(ae.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:dt,className:"btn-secondary flex items-center",title:"Clear all filters",children:"Clear Filters"}),n.jsxs("button",{onClick:Lt,className:"btn-secondary flex items-center",title:"Download Excel template",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Template"]}),n.jsxs("button",{onClick:St,disabled:V,className:"btn-secondary flex items-center disabled:opacity-50",title:"Import finished goods from Excel/CSV",children:[n.jsx(Va,{className:"h-4 w-4 mr-2"}),V?"Importing...":"Import"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:p,onChange:ae=>g(ae.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),he.map(ae=>n.jsx("option",{value:ae,children:ae},ae))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:h,onChange:ae=>y(ae.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),n.jsx("option",{value:"Overstock",children:"Overstock"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:ae=>S(ae.target.value),children:[n.jsx("option",{value:"materialName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastUpdated",children:"Last Updated"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",ye>0?(ie-1)*W+1:0," - ",Math.min(ie*W,ye)," of ",ye," finished goods items",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:W,onChange:ae=>{Ee(Number(ae.target.value)),Ne(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]}),(f||p||h)&&n.jsx("button",{onClick:dt,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})]}),n.jsxs("div",{className:"card overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods Inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Complete inventory list with all fields"})]})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-green-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(rt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No finished goods found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Finished goods inventory is empty"})]})})}):i.map(ae=>{var je,L,K;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ae.materialCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:ae.materialName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ae.category}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ae.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",ae.unitPrice?Number(ae.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 relative",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:ae.currentStock}),(oe[ae.materialCode]||oe[ae.materialId]||oe[ae.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((je=oe[ae.materialCode]||oe[ae.materialId]||oe[ae.id])==null?void 0:je.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((L=oe[ae.materialCode]||oe[ae.materialId]||oe[ae.id])==null?void 0:L.type)==="increase"?"+":"-",(K=oe[ae.materialCode]||oe[ae.materialId]||oe[ae.id])==null?void 0:K.amount]})]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>He(ae),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:"Edit"})})]},ae.id)})})]})}),B>1&&n.jsx("div",{className:"px-4 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",ie," of ",B]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>Ne(1),disabled:ie===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>Ne(ae=>Math.max(1,ae-1)),disabled:ie===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,B)},(ae,je)=>{let L;return B<=5||ie<=3?L=je+1:ie>=B-2?L=B-4+je:L=ie-2+je,n.jsx("button",{onClick:()=>Ne(L),className:`px-3 py-1 text-sm border rounded-md ${ie===L?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:L},L)})}),n.jsx("button",{onClick:()=>Ne(ae=>Math.min(B,ae+1)),disabled:ie===B,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>Ne(B),disabled:ie===B,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]}),n.jsx("input",{ref:e,type:"file",accept:".xlsx,.xls,.csv",onChange:Et,style:{display:"none"}}),j&&b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Raw Material: ",b.materialName]}),n.jsx("button",{onClick:vt,className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.currentStock,onChange:ae=>E(je=>({...je,currentStock:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum Stock (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.minimumStock,onChange:ae=>E(je=>({...je,minimumStock:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Stock (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.maximumStock,onChange:ae=>E(je=>({...je,maximumStock:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reorder Point (",b.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.reorderPoint,onChange:ae=>E(je=>({...je,reorderPoint:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",value:_.unitPrice,onChange:ae=>E(je=>({...je,unitPrice:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:_.notes,onChange:ae=>E(je=>({...je,notes:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Optional notes..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:vt,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),n.jsx("button",{onClick:kt,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Saving...":"Save Changes"})]})]})}),n.jsx(t6,{isOpen:t.isOpen,onClose:r,onConfirm:t.onConfirm,onCancel:t.onCancel,title:t.title,message:t.message,type:t.type,confirmText:t.confirmText,cancelText:t.cancelText,showCancel:t.showCancel}),n.jsx(tu,{isOpen:k,onClose:()=>{C(!1),P(null)},transferOrder:A,onAccept:ft,onReject:ut,loading:I})]})},Tce=()=>{const e=ct(),[t,r]=T.useState(null),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,c]=T.useState([]),[u,d]=T.useState(!1),[f,m]=T.useState([]),[p,g]=T.useState(null),[h,y]=T.useState(!1),[w,S]=T.useState({productCode:"",productName:"",category:"",unitOfMeasure:"pcs",quantity:1,costPrice:0,unitPrice:0,expiryDays:1,notes:""});T.useEffect(()=>{v()},[]);const v=async()=>{try{s(!0),o(null);const E=await de.getCentralKitchens();if(E.success&&E.data.length>0){const C=E.data[0];r(C)}else o("Central Kitchen not found");const k=await de.getCentralKitchenFinishedProducts({limit:1e3});k.success&&k.data&&m(k.data)}catch(E){o(E instanceof Error?E.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",E)}finally{s(!1)}},x=()=>{if(!w.productCode||!w.productName||!w.quantity){alert("Please select a finished good and enter quantity");return}const E={id:`item-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,productCode:w.productCode,productName:w.productName,category:w.category||"",unitOfMeasure:w.unitOfMeasure||"pcs",quantity:w.quantity||1,costPrice:w.costPrice||0,unitPrice:w.unitPrice||0,expiryDays:w.expiryDays||1,notes:w.notes||""};c(k=>[...k,E]),S({productCode:"",productName:"",category:"",unitOfMeasure:"pcs",quantity:1,costPrice:0,unitPrice:0,expiryDays:1,notes:""}),g(null),d(!1)},b=E=>{c(k=>k.filter(C=>C.id!==E))},N=(E,k,C)=>{c(A=>A.map(P=>P.id===E?{...P,[k]:C}:P))},j=async E=>{const k=f.find(C=>C.productCode===E);if(k){S(C=>({...C,productCode:k.productCode,productName:k.productName,category:k.subCategory,unitOfMeasure:k.unitOfMeasure,unitPrice:k.unitPrice,costPrice:k.costPrice}));try{y(!0);let C=null;if(C=await de.getBillOfMaterials({search:k.productName,limit:10}),(!C.success||!C.data||C.data.length===0)&&(C=await de.getBillOfMaterials({search:k.productCode,limit:10})),(!C.success||!C.data||C.data.length===0)&&k.bomCode&&(C=await de.getBillOfMaterials({search:k.bomCode,limit:10})),C.success&&C.data&&C.data.length>0){const A=C.data.find(P=>P.productName.toLowerCase()===k.productName.toLowerCase());g(A||C.data[0])}else g(null)}catch(C){console.error("Error fetching BOM:",C),g(null)}finally{y(!1)}}},O=async()=>{if(l.length===0){alert("Please add at least one item to produce");return}try{s(!0);for(const k of l){const C=await de.getBillOfMaterials({search:k.productName,limit:10});if(!C.success||!C.data||C.data.length===0){alert(`No recipe found for ${k.productName}. Cannot produce without recipe.`);return}const A=C.data.find(I=>I.productName.toLowerCase()===k.productName.toLowerCase())||C.data[0],P=await de.makeFinishedGood({productCode:k.productCode,productName:k.productName,quantity:k.quantity,bomCode:A.bomCode,notes:k.notes});if(!P.success){alert(`Failed to produce ${k.productName}: ${P.message}`);return}console.log(`Successfully produced ${k.productName}:`,P.data)}let E=`Production completed successfully!

Produced ${l.length} items:
`;l.forEach(k=>{E+=`- ${k.productName} (${k.quantity} ${k.unitOfMeasure})
`}),E+=`
Raw materials have been deducted from Central Kitchen inventory.
Finished goods have been added to Central Kitchen inventory.`,alert(E),c([]),await v()}catch(E){console.error("Error saving production:",E),alert("Failed to save production. Please try again.")}finally{s(!1)}},_=["pcs","kg","L","g","ml","box","pack","serving"];return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Make Finished Good..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:v,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx($1,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Make Finished Good"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:v,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/central-kitchen/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(rt,{className:"h-4 w-4 mr-2"}),"View Finished Goods"]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Production Form"}),n.jsxs("button",{onClick:()=>d(!u),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),u&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Production Item"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finished Good *"}),n.jsxs("select",{className:"input-field",value:w.productCode||"",onChange:E=>j(E.target.value),children:[n.jsx("option",{value:"",children:"Select Finished Good"}),f.map(E=>n.jsxs("option",{value:E.productCode,children:[E.productName," (",E.productCode,")"]},E._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:w.productCode||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:w.productName||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:w.category||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure"}),n.jsx("select",{className:"input-field",value:w.unitOfMeasure||"pcs",onChange:E=>S(k=>({...k,unitOfMeasure:E.target.value})),children:_.map(E=>n.jsx("option",{value:E,children:E},E))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field",value:w.quantity||1,onChange:E=>S(k=>({...k,quantity:Number.parseInt(E.target.value)||1})),min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:w.costPrice||0,onChange:E=>S(k=>({...k,costPrice:Number.parseFloat(E.target.value)||0})),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:w.unitPrice||0,onChange:E=>S(k=>({...k,unitPrice:Number.parseFloat(E.target.value)||0})),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Days"}),n.jsx("input",{type:"number",className:"input-field",value:w.expiryDays||1,onChange:E=>S(k=>({...k,expiryDays:Number.parseInt(E.target.value)||1})),min:"1"})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:w.notes||"",onChange:E=>S(k=>({...k,notes:E.target.value})),placeholder:"Additional notes about this production..."})]})]}),h&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),n.jsx("span",{className:"text-blue-600",children:"Loading recipe ingredients..."})]})}),p&&!h&&n.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Required Raw Materials (Recipe Master)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity per Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.items.map((E,k)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.materialCode||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.materialName||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.quantity||0}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.unitOfMeasure||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:(E.unitCost||0)>0?(E.unitCost||0).toFixed(2)+" KWD":"0.00 KWD"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:(E.totalCost||0)>0?(E.totalCost||0).toFixed(2)+" KWD":"0.00 KWD"})]},k))}),n.jsx("tfoot",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("td",{colSpan:5,className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Total Recipe Cost:"}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:[p.totalCost.toFixed(2)," KWD"]})]})})]})}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"BOM Code:"})," ",p.bomCode]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Description:"})," ",p.productDescription]})]})]}),!p&&!h&&w.productCode&&n.jsx("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.jsx("span",{className:"text-yellow-800",children:"No recipe found for this finished good. Raw materials information not available."})]})}),n.jsxs("div",{className:"flex gap-3 mt-4",children:[n.jsxs("button",{onClick:x,className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add to Production"]}),n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Cancel"})]})]}),l.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Production Items (",l.length,")"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Days"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.productName}),n.jsxs("div",{className:"text-sm text-gray-500",children:[E.productCode,"  ",E.category]})]})}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[n.jsx("input",{type:"number",className:"input-field w-20",value:E.quantity,onChange:k=>N(E.id,"quantity",Number.parseInt(k.target.value)||1),min:"1"}),n.jsx("span",{className:"ml-2 text-sm text-gray-500",children:E.unitOfMeasure})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",step:"0.01",className:"input-field w-24",value:E.costPrice,onChange:k=>N(E.id,"costPrice",Number.parseFloat(k.target.value)||0),min:"0"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",step:"0.01",className:"input-field w-24",value:E.unitPrice,onChange:k=>N(E.id,"unitPrice",Number.parseFloat(k.target.value)||0),min:"0"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",className:"input-field w-20",value:E.expiryDays,onChange:k=>N(E.id,"expiryDays",Number.parseInt(k.target.value)||1),min:"1"})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("input",{type:"text",className:"input-field w-full",value:E.notes,onChange:k=>N(E.id,"notes",k.target.value),placeholder:"Production notes..."})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("button",{onClick:()=>b(E.id),className:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})})]},E.id))})]})}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Production Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Quantity"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.reduce((E,k)=>E+k.quantity,0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[l.reduce((E,k)=>E+k.quantity*k.unitPrice,0).toFixed(2)," KWD"]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Notes"}),n.jsx("textarea",{className:"input-field",rows:3,placeholder:"Additional notes about this production batch..."})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:O,disabled:a,className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Production"]})})]})]})]})},_ce=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Ece=()=>{const e=ct(),[t,r]=T.useState(null),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,c]=T.useState([]),[u,d]=T.useState([]),[f,m]=T.useState([]),[p,g]=T.useState(!1),[h,y]=T.useState({toOutlet:"",transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:""});T.useEffect(()=>{w(),S()},[]);const w=async()=>{try{s(!0),o(null);const C=await de.getCentralKitchens();if(C.success&&C.data.length>0){const A=C.data[0];r(A)}else o("Central Kitchen not found")}catch(C){o(C instanceof Error?C.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",C)}finally{s(!1)}},S=async()=>{try{g(!0),console.log("Loading raw materials and finished goods data...");const C=await de.getCentralKitchenRawMaterials({limit:1e3});C.success?(d(C.data),console.log("Loaded raw materials:",C.data.length)):console.error("Failed to load raw materials:",C.error||"API Error");const A=await de.getCentralKitchenFinishedProducts({limit:1e3});A.success?(m(A.data),console.log("Loaded finished goods:",A.data.length)):console.error("Failed to load finished goods:",A.error||"API Error")}catch(C){console.error("Error loading materials data:",C)}finally{g(!1)}},v=()=>{console.log("Add Item button clicked!");const C=`form-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log("Creating new form with ID:",C),c(A=>{const P=[...A,{id:C,data:{itemType:"Raw Material",itemCode:"",itemName:"",category:"",unitOfMeasure:"pcs",quantity:1,unitPrice:0,notes:""}}];return console.log("Updated forms array:",P),P})},x=(C,A,P)=>{c(I=>I.map(F=>{if(F.id===C){const q={...F,data:{...F.data,[A]:P}};if(A==="itemType"&&(q.data.itemCode="",q.data.itemName="",q.data.category=""),A==="itemCode"&&P){const H=b(q.data.itemType||"Raw Material",P);H&&(q.data.itemName=H.materialName||H.productName||"",q.data.category=H.category||H.subCategory||"",q.data.unitOfMeasure=_(H.unitOfMeasure||"pcs"),q.data.unitPrice=H.unitPrice||0)}return q}return F}))},b=(C,A)=>C==="Raw Material"?u.find(P=>P.materialCode===A):C==="Finished Goods"?f.find(P=>P.productCode===A):null,N=C=>{c(A=>A.filter(P=>P.id!==C))},j=async()=>{if(l.length===0){alert("Please add at least one item to transfer");return}if(!h.toOutlet){alert("Please select a destination outlet");return}if(l.filter(P=>!P.data.itemType||!P.data.itemCode||!P.data.itemName).length>0){alert("Please fill in all required fields (Item Type, Item Code) for all items");return}if(l.filter(P=>!P.data.quantity||P.data.quantity<=0).length>0){alert("Please enter valid quantities (greater than 0) for all items");return}try{s(!0);const P=l.map(q=>({itemType:q.data.itemType,itemCode:q.data.itemCode,itemName:q.data.itemName||q.data.itemCode,category:q.data.category||"",subCategory:q.data.subCategory||"",unitOfMeasure:q.data.unitOfMeasure||"pcs",quantity:q.data.quantity||1,unitPrice:q.data.unitPrice||0,notes:q.data.notes||""})),I={fromOutlet:(t==null?void 0:t.outletName)||"Central Kitchen",toOutlet:h.toOutlet,transferDate:h.transferDate,priority:h.priority,items:P,totalValue:P.reduce((q,H)=>q+H.quantity*H.unitPrice,0),notes:h.notes};console.log("Creating transfer with data:",I),console.log(" Calling apiService.createTransfer...");const F=await de.createTransfer(I);console.log(" Transfer API response:",F),F.success?(alert(`Transfer created successfully!

Transfer Details:
From: ${t==null?void 0:t.outletName}
To: ${I.toOutlet}
Items: ${P.length}

Transfer ID: ${F.data.transferId}

Stock has been updated in both Central Kitchen and destination outlet.${I.toOutlet==="Kuwait City"||I.toOutlet==="360 Mall"||I.toOutlet==="Vibe Complex"||I.toOutlet==="Taiba Hospital"?`

Notification sent to ${I.toOutlet}.`:""}`),c([]),y({toOutlet:"",transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:""}),await S()):alert(`Transfer failed: ${F.message}`)}catch(P){console.error(" Error creating transfer:",P),console.error(" Error details:",{message:P instanceof Error?P.message:"Unknown error",stack:P instanceof Error?P.stack:void 0,response:P==null?void 0:P.response}),alert(`Failed to create transfer order: ${P instanceof Error?P.message:"Unknown error"}`)}finally{s(!1)}},O=["km (Kilometers)","lb (Pounds)","mg (Milli Grams)","ml (Milli Litre)","m (Meter)","pcs (Pieces)","pcs 6 (Pieces 6)","pcs 12 (Pieces 12)","No.s (Number)","ltr (Liter)","kg 2 (Kilograms2)","kg 5 (Kilograms 5)","kg 10 (Kilograms 10)","Pr (Portion)","kg (Kilograms)"],_=C=>{if(!C)return"pcs (Pieces)";const A={km:"km (Kilometers)",lb:"lb (Pounds)",mg:"mg (Milli Grams)",ml:"ml (Milli Litre)",m:"m (Meter)",pcs:"pcs (Pieces)","pcs 6":"pcs 6 (Pieces 6)","pcs 12":"pcs 12 (Pieces 12)","No.s":"No.s (Number)",ltr:"ltr (Liter)","kg 2":"kg 2 (Kilograms2)","kg 5":"kg 5 (Kilograms 5)","kg 10":"kg 10 (Kilograms 10)",Pr:"Pr (Portion)",kg:"kg (Kilograms)"};return O.includes(C)?C:A[C.trim()]||"pcs (Pieces)"},E=["Kuwait City","360 Mall","Vibes Complex","Taiba Hospital"],k=["Low","Normal","High","Urgent"];return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Create Transfer..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:w,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(ta,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Transfer"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:w,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"View All Transfers"]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Transfer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Outlet"}),n.jsx("input",{type:"text",className:"input-field",value:(t==null?void 0:t.outletName)||"Central Kitchen",disabled:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Outlet *"}),n.jsxs("select",{className:"input-field",value:h.toOutlet,onChange:C=>y(A=>({...A,toOutlet:C.target.value})),children:[n.jsx("option",{value:"",children:"Select Destination"}),E.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Date"}),n.jsx("input",{type:"date",className:"input-field",value:h.transferDate,onChange:C=>y(A=>({...A,transferDate:C.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("select",{className:"input-field",value:h.priority,onChange:C=>y(A=>({...A,priority:C.target.value})),children:k.map(C=>n.jsx("option",{value:C,children:C},C))})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:h.notes,onChange:C=>y(A=>({...A,notes:C.target.value})),placeholder:"Additional notes about this transfer..."})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Items"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:S,disabled:p,className:"btn-secondary flex items-center text-sm",title:"Refresh materials data",children:[n.jsx(ea,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),p?"Loading...":"Refresh Items"]}),n.jsxs("button",{onClick:v,className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),l.map((C,A)=>n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Item #",A+1]}),n.jsx("button",{onClick:()=>N(C.id),className:"text-red-600 hover:text-red-900 text-sm",children:"Remove Item"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Type *"}),n.jsxs("select",{className:"input-field",value:C.data.itemType||"",onChange:P=>x(C.id,"itemType",P.target.value),children:[n.jsx("option",{value:"",children:"Select Item Type"}),n.jsx("option",{value:"Raw Material",children:"Raw Material"}),n.jsx("option",{value:"Finished Goods",children:"Finished Goods"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Code *"}),n.jsx(_ce,{value:C.data.itemCode||"",onChange:P=>x(C.id,"itemCode",P),disabled:!C.data.itemType||p,placeholder:"Select Item",options:C.data.itemType==="Raw Material"?u.map(P=>({value:P.materialCode,label:`${P.materialCode} - ${P.materialName}`})):C.data.itemType==="Finished Goods"?f.map(P=>({value:P.productCode,label:`${P.productCode} - ${P.productName}`})):[]}),p&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading items..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),n.jsx("input",{type:"text",className:"input-field",value:C.data.itemName||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure"}),n.jsx("select",{className:"input-field",value:C.data.unitOfMeasure||"pcs (Pieces)",onChange:P=>x(C.id,"unitOfMeasure",P.target.value),children:O.map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field",value:C.data.quantity||1,onChange:P=>x(C.id,"quantity",parseInt(P.target.value)||1),min:"1"})]})]})]},C.id)),l.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Transfer Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Quantity"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.reduce((C,A)=>C+(A.data.quantity||1),0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Priority"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:h.priority})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:j,disabled:a,className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),a?"Creating Transfer Order...":"Create Transfer Order"]})})]}),l.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Items Added"}),n.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Add Item" to start adding items to your transfer order'})]})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var df={};df.version="0.18.5";var sn=1200,Ho=1252,Ace=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Gw={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},op=function(e){Ace.indexOf(e)!=-1&&(Ho=Gw[0]=e)};function Pce(){op(1252)}var Tn=function(e){sn=e,op(e)};function lp(){Tn(1200),Pce()}function $h(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function Ice(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function r6(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ul=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Ice(e.slice(2)):t==254&&r==255?r6(e.slice(2)):t==65279?e.slice(1):e},Mu=function(t){return String.fromCharCode(t)},bb=function(t){return String.fromCharCode(t)},_t;function Dce(e){_t=e,Tn=function(t){sn=t,op(t)},Ul=function(t){return t.charCodeAt(0)===255&&t.charCodeAt(1)===254?_t.utils.decode(1200,$h(t.slice(2))):t},Mu=function(r){return sn===1200?String.fromCharCode(r):_t.utils.decode(sn,[r&255,r>>8])[0]},bb=function(r){return _t.utils.decode(Ho,[r])[0]},P6()}var vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ff(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,a=e.charCodeAt(u++),o=(r&3)<<4|a>>4,s=e.charCodeAt(u++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=vi.charAt(i)+vi.charAt(o)+vi.charAt(l)+vi.charAt(c);return t}function un(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=vi.indexOf(e.charAt(u++)),o=vi.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=vi.indexOf(e.charAt(u++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=vi.indexOf(e.charAt(u++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var pt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ri=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Ri(e){return pt?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function TO(e){return pt?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var tn=function(t){return pt?ri(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Kf(e){if(typeof ArrayBuffer>"u")return tn(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function eo(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Mce(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function Xw(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Xw(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Qr=pt?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:ri(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Fce(e){for(var t=[],r=0,a=e.length+250,s=Ri(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=Ri(65535),a=65530)}return t.push(s.slice(0,r)),Qr(t)}var Sa=/\u0000/g,Fu=/[\u0001-\u0006]/g;function tc(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Jn(e,t){var r=""+e;return r.length>=t?r:vr("0",t-r.length)+r}function Yw(e,t){var r=""+e;return r.length>=t?r:vr(" ",t-r.length)+r}function Bh(e,t){var r=""+e;return r.length>=t?r:r+vr(" ",t-r.length)}function Rce(e,t){var r=""+Math.round(e);return r.length>=t?r:vr("0",t-r.length)+r}function Lce(e,t){var r=""+e;return r.length>=t?r:vr("0",t-r.length)+r}var _O=Math.pow(2,32);function vl(e,t){if(e>_O||e<-_O)return Rce(e,t);var r=Math.round(e);return Lce(r,t)}function Uh(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var EO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Eg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function $ce(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var tt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},AO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Bce={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Wh(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),l=f*o+i,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),i=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=i):(d=u,l=o)),!r)return[0,a*l,d];var m=Math.floor(a*l/d);return[m,a*l-m*d,d]}function bi(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Vce(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var a6=new Date(1899,11,31,0,0,0),Uce=a6.getTime(),Wce=new Date(1900,2,1,0,0,0);function n6(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Wce&&(r+=24*60*60*1e3),(r-(Uce+(e.getTimezoneOffset()-a6.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Qw(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function qce(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Kce(e){var t=e<0?12:11,r=Qw(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function zce(e){var t=Qw(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function mf(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Kce(e):t===10?r=e.toFixed(10).substr(0,12):r=zce(e),Qw(qce(r.toUpperCase()))}function Go(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):mf(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return dn(14,n6(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Vce(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Hce(e,t,r,a){var s="",i=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return Eg[r.m-1][1];case 5:return Eg[r.m-1][0];default:return Eg[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return EO[r.q][0];default:return EO[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Jn(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Jn(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Jn(c,u):"";return d}function wi(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var s6=/%/g;function Gce(e,t,r){var a=t.replace(s6,""),s=t.length-a.length;return Bs(e,a,r*Math.pow(10,2*s))+vr("%",s)}function Xce(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Bs(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function i6(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+i6(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var o6=/# (\?+)( ?)\/( ?)(\d+)/;function Yce(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?vr(" ",e[1].length+1+e[4].length):Yw(o,e[1].length)+e[2]+"/"+e[3]+Jn(l,e[4].length))}function Qce(e,t,r){return r+(t===0?"":""+t)+vr(" ",e[1].length+2+e[4].length)}var l6=/^#*0*\.([0#]+)/,c6=/\).*[0#]/,u6=/\(###\) ###\\?-####/;function Aa(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function PO(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function IO(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Jce(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Zce(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function yn(e,t,r){if(e.charCodeAt(0)===40&&!t.match(c6)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yn("n",a,r):"("+yn("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Xce(e,t,r);if(t.indexOf("%")!==-1)return Gce(e,t,r);if(t.indexOf("E")!==-1)return i6(t,r);if(t.charCodeAt(0)===36)return"$"+yn(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+vl(c,t.length);if(t.match(/^[#?]+$/))return s=vl(r,0),s==="0"&&(s=""),s.length>t.length?s:Aa(t.substr(0,t.length-s.length))+s;if(i=t.match(o6))return Yce(i,c,u);if(t.match(/^#+0+$/))return u+vl(c,t.length-t.indexOf("0"));if(i=t.match(l6))return s=PO(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Aa(i[1])).replace(/\.$/,"."+Aa(i[1])).replace(/\.(\d*)$/,function(g,h){return"."+h+vr("0",Aa(i[1]).length-h.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+PO(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+wi(vl(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yn(e,t,-r):wi(""+(Math.floor(r)+Jce(r,i[1].length)))+"."+Jn(IO(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return yn(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=tc(yn(e,t.replace(/[\\-]/g,""),r)),o=0,tc(tc(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<s.length?s.charAt(o++):g==="0"?"0":""}));if(t.match(u6))return s=yn(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Wh(c,Math.pow(10,o)-1,!1),s=""+u,d=Bs("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=Bh(l[2],o),d.length<i[4].length&&(d=Aa(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Wh(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Yw(l[1],o)+i[2]+"/"+i[3]+Bh(l[2],o):vr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=vl(r,0),t.length<=s.length?s:Aa(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,m=t.length-s.length-f;return Aa(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=IO(r,i[1].length),r<0?"-"+yn(e,t,-r):wi(Zce(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Jn(0,3-g.length):"")+g})+"."+Jn(o,i[1].length);switch(t){case"###,##0.00":return yn(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=wi(vl(c,0));return p!=="0"?u+p:"";case"###,###.00":return yn(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return yn(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function eue(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Bs(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function tue(e,t,r){var a=t.replace(s6,""),s=t.length-a.length;return Bs(e,a,r*Math.pow(10,2*s))+vr("%",s)}function d6(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+d6(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function os(e,t,r){if(e.charCodeAt(0)===40&&!t.match(c6)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?os("n",a,r):"("+os("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return eue(e,t,r);if(t.indexOf("%")!==-1)return tue(e,t,r);if(t.indexOf("E")!==-1)return d6(t,r);if(t.charCodeAt(0)===36)return"$"+os(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Jn(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Aa(t.substr(0,t.length-s.length))+s;if(i=t.match(o6))return Qce(i,c,u);if(t.match(/^#+0+$/))return u+Jn(c,t.length-t.indexOf("0"));if(i=t.match(l6))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Aa(i[1])).replace(/\.$/,"."+Aa(i[1])),s=s.replace(/\.(\d*)$/,function(g,h){return"."+h+vr("0",Aa(i[1]).length-h.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+wi(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+os(e,t,-r):wi(""+r)+"."+vr("0",i[1].length);if(i=t.match(/^#,#*,#0/))return os(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=tc(os(e,t.replace(/[\\-]/g,""),r)),o=0,tc(tc(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<s.length?s.charAt(o++):g==="0"?"0":""}));if(t.match(u6))return s=os(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Wh(c,Math.pow(10,o)-1,!1),s=""+u,d=Bs("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=Bh(l[2],o),d.length<i[4].length&&(d=Aa(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Wh(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Yw(l[1],o)+i[2]+"/"+i[3]+Bh(l[2],o):vr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Aa(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,m=t.length-s.length-f;return Aa(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+os(e,t,-r):wi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Jn(0,3-g.length):"")+g})+"."+Jn(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=wi(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return os(e,t.slice(0,t.lastIndexOf(".")),r)+Aa(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Bs(e,t,r){return(r|0)===r?os(e,t,r):yn(e,t,r)}function rue(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var f6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ol(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":Uh(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(f6))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function aue(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",u,d,f,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Uh(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),g=p==="("||p===")"?p:"t";s[s.length]={t:g,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=bi(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=bi(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var h={t:l,v:l};if(u==null&&(u=bi(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(h.v=u.H>=12?"P":"A"),h.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(h.v=u.H>=12?"PM":"AM"),h.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(h.v=u.H>=12?"":""),h.t="T",o+=5,m="h"):(h.t="t",++o),u==null&&h.t==="T")return"";s[s.length]=h,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(f6)){if(u==null&&(u=bi(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",ol(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var y=0,w=0,S;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",y<1&&(y=1);break;case"s":(S=s[o].v.match(/\.0+$/))&&(w=Math.max(w,S[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&s[o].v.match(/[Hh]/)&&(y=1),y<2&&s[o].v.match(/[Mm]/)&&(y=2),y<3&&s[o].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var v="",x;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Hce(s[o].t.charCodeAt(0),s[o].v,u,w),s[o].t="t";break;case"n":case"?":for(x=o+1;s[x]!=null&&((l=s[x].t)==="?"||l==="D"||(l===" "||l==="t")&&s[x+1]!=null&&(s[x+1].t==="?"||s[x+1].t==="t"&&s[x+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[x].v==="/"||s[x].v===" "&&s[x+1]!=null&&s[x+1].t=="?"));)s[o].v+=s[x].v,s[x]={v:"",t:";"},++x;v+=s[o].v,o=x-1;break;case"G":s[o].t="t",s[o].v=Go(t,r);break}var b="",N,j;if(v.length>0){v.charCodeAt(0)==40?(N=t<0&&v.charCodeAt(0)===45?-t:t,j=Bs("n",v,N)):(N=t<0&&a>1?-t:t,j=Bs("n",v,N),N<0&&s[0]&&s[0].t=="t"&&(j=j.substr(1),s[0].v="-"+s[0].v)),x=j.length-1;var O=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){O=o;break}var _=s.length;if(O===s.length&&j.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(x>=s[o].v.length-1?(x-=s[o].v.length,s[o].v=j.substr(x+1,s[o].v.length)):x<0?s[o].v="":(s[o].v=j.substr(0,x+1),x=-1),s[o].t="t",_=o);x>=0&&_<s.length&&(s[_].v=j.substr(0,x+1)+s[_].v)}else if(O!==s.length&&j.indexOf("E")===-1){for(x=j.indexOf(".")-1,o=O;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(d=s[o].v.indexOf(".")>-1&&o===O?s[o].v.indexOf(".")-1:s[o].v.length-1,b=s[o].v.substr(d+1);d>=0;--d)x>=0&&(s[o].v.charAt(d)==="0"||s[o].v.charAt(d)==="#")&&(b=j.charAt(x--)+b);s[o].v=b,s[o].t="t",_=o}for(x>=0&&_<s.length&&(s[_].v=j.substr(0,x+1)+s[_].v),x=j.indexOf(".")+1,o=O;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==O)){for(d=s[o].v.indexOf(".")>-1&&o===O?s[o].v.indexOf(".")+1:0,b=s[o].v.substr(0,d);d<s[o].v.length;++d)x<j.length&&(b+=j.charAt(x++));s[o].v=b,s[o].t="t",_=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(N=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Bs(s[o].t,s[o].v,N),s[o].t="t");var E="";for(o=0;o!==s.length;++o)s[o]!=null&&(E+=s[o].v);return E}var DO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function MO(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function nue(e,t){var r=rue(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(DO),l=r[1].match(DO);return MO(t,o)?[a,r[0]]:MO(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function dn(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:tt)[e],a==null&&(a=r.table&&r.table[AO[e]]||tt[AO[e]]),a==null&&(a=Bce[e]||"General");break}if(Uh(a,0))return Go(t,r);t instanceof Date&&(t=n6(t,r.date1904));var s=nue(a,t);if(Uh(s[1]))return Go(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return aue(s[1],t,r,s[0])}function gs(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(tt[r]==null){t<0&&(t=r);continue}if(tt[r]==e){t=r;break}}t<0&&(t=391)}return tt[t]=e,t}function zf(e){for(var t=0;t!=392;++t)e[t]!==void 0&&gs(e[t],t)}function au(){tt=$ce()}var m6={format:dn,load:gs,_table:tt,load_table:zf,parse_date_code:bi,is_date:ol,get_table:function(){return m6._table=tt}},sue={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},h6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function iue(e){var t=typeof e=="number"?tt[e]:e;return t=t.replace(h6,"(\\d+)"),new RegExp("^"+t+"$")}function oue(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(h6)||[]).forEach(function(f,m){var p=parseInt(r[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:a==-1&&s==-1&&i==-1?d:u+"T"+d}var lue=function(){var e={};e.version="1.2.0";function t(){for(var j=0,O=new Array(256),_=0;_!=256;++_)j=_,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,O[_]=j;return typeof Int32Array<"u"?new Int32Array(O):O}var r=t();function a(j){var O=0,_=0,E=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(E=0;E!=256;++E)k[E]=j[E];for(E=0;E!=256;++E)for(_=j[E],O=256+E;O<4096;O+=256)_=k[O]=_>>>8^j[_&255];var C=[];for(E=1;E!=16;++E)C[E-1]=typeof Int32Array<"u"?k.subarray(E*256,E*256+256):k.slice(E*256,E*256+256);return C}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],u=s[4],d=s[5],f=s[6],m=s[7],p=s[8],g=s[9],h=s[10],y=s[11],w=s[12],S=s[13],v=s[14];function x(j,O){for(var _=O^-1,E=0,k=j.length;E<k;)_=_>>>8^r[(_^j.charCodeAt(E++))&255];return~_}function b(j,O){for(var _=O^-1,E=j.length-15,k=0;k<E;)_=v[j[k++]^_&255]^S[j[k++]^_>>8&255]^w[j[k++]^_>>16&255]^y[j[k++]^_>>>24]^h[j[k++]]^g[j[k++]]^p[j[k++]]^m[j[k++]]^f[j[k++]]^d[j[k++]]^u[j[k++]]^c[j[k++]]^l[j[k++]]^o[j[k++]]^i[j[k++]]^r[j[k++]];for(E+=15;k<E;)_=_>>>8^r[(_^j[k++])&255];return~_}function N(j,O){for(var _=O^-1,E=0,k=j.length,C=0,A=0;E<k;)C=j.charCodeAt(E++),C<128?_=_>>>8^r[(_^C)&255]:C<2048?(_=_>>>8^r[(_^(192|C>>6&31))&255],_=_>>>8^r[(_^(128|C&63))&255]):C>=55296&&C<57344?(C=(C&1023)+64,A=j.charCodeAt(E++)&1023,_=_>>>8^r[(_^(240|C>>8&7))&255],_=_>>>8^r[(_^(128|C>>2&63))&255],_=_>>>8^r[(_^(128|A>>6&15|(C&3)<<4))&255],_=_>>>8^r[(_^(128|A&63))&255]):(_=_>>>8^r[(_^(224|C>>12&15))&255],_=_>>>8^r[(_^(128|C>>6&63))&255],_=_>>>8^r[(_^(128|C&63))&255]);return~_}return e.table=r,e.bstr=x,e.buf=b,e.str=N,e}(),Je=function(){var t={};t.version="1.2.1";function r(R,D){for(var M=R.split("/"),z=D.split("/"),G=0,Y=0,se=Math.min(M.length,z.length);G<se;++G){if(Y=M[G].length-z[G].length)return Y;if(M[G]!=z[G])return M[G]<z[G]?-1:1}return M.length-z.length}function a(R){if(R.charAt(R.length-1)=="/")return R.slice(0,-1).indexOf("/")===-1?R:a(R.slice(0,-1));var D=R.lastIndexOf("/");return D===-1?R:R.slice(0,D+1)}function s(R){if(R.charAt(R.length-1)=="/")return s(R.slice(0,-1));var D=R.lastIndexOf("/");return D===-1?R:R.slice(D+1)}function i(R,D){typeof D=="string"&&(D=new Date(D));var M=D.getHours();M=M<<6|D.getMinutes(),M=M<<5|D.getSeconds()>>>1,R.write_shift(2,M);var z=D.getFullYear()-1980;z=z<<4|D.getMonth()+1,z=z<<5|D.getDate(),R.write_shift(2,z)}function o(R){var D=R.read_shift(2)&65535,M=R.read_shift(2)&65535,z=new Date,G=M&31;M>>>=5;var Y=M&15;M>>>=4,z.setMilliseconds(0),z.setFullYear(M+1980),z.setMonth(Y-1),z.setDate(G);var se=D&31;D>>>=5;var be=D&63;return D>>>=6,z.setHours(D),z.setMinutes(be),z.setSeconds(se<<1),z}function l(R){oa(R,0);for(var D={},M=0;R.l<=R.length-4;){var z=R.read_shift(2),G=R.read_shift(2),Y=R.l+G,se={};switch(z){case 21589:M=R.read_shift(1),M&1&&(se.mtime=R.read_shift(4)),G>5&&(M&2&&(se.atime=R.read_shift(4)),M&4&&(se.ctime=R.read_shift(4))),se.mtime&&(se.mt=new Date(se.mtime*1e3));break}R.l=Y,D[z]=se}return D}var c;function u(){return c||(c={})}function d(R,D){if(R[0]==80&&R[1]==75)return L(R,D);if((R[0]|32)==109&&(R[1]|32)==105)return Ae(R,D);if(R.length<512)throw new Error("CFB file size "+R.length+" < 512");var M=3,z=512,G=0,Y=0,se=0,be=0,me=0,xe=[],pe=R.slice(0,512);oa(pe,0);var Pe=f(pe);switch(M=Pe[0],M){case 3:z=512;break;case 4:z=4096;break;case 0:if(Pe[1]==0)return L(R,D);default:throw new Error("Major Version: Expected 3 or 4 saw "+M)}z!==512&&(pe=R.slice(0,z),oa(pe,28));var Te=R.slice(0,z);m(pe,M);var Le=pe.read_shift(4,"i");if(M===3&&Le!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Le);pe.l+=4,se=pe.read_shift(4,"i"),pe.l+=4,pe.chk("00100000","Mini Stream Cutoff Size: "),be=pe.read_shift(4,"i"),G=pe.read_shift(4,"i"),me=pe.read_shift(4,"i"),Y=pe.read_shift(4,"i");for(var Ie=-1,We=0;We<109&&(Ie=pe.read_shift(4,"i"),!(Ie<0));++We)xe[We]=Ie;var st=p(R,z);y(me,Y,st,z,xe);var Zt=S(st,se,xe,z);Zt[se].name="!Directory",G>0&&be!==A&&(Zt[be].name="!MiniFAT"),Zt[xe[0]].name="!FAT",Zt.fat_addrs=xe,Zt.ssz=z;var Gt={},Lr=[],ao=[],ou=[];v(se,Zt,st,Lr,G,Gt,ao,be),g(ao,ou,Lr),Lr.shift();var lu={FileIndex:ao,FullPaths:ou};return D&&D.raw&&(lu.raw={header:Te,sectors:st}),lu}function f(R){if(R[R.l]==80&&R[R.l+1]==75)return[0,0];R.chk(P,"Header Signature: "),R.l+=16;var D=R.read_shift(2,"u");return[R.read_shift(2,"u"),D]}function m(R,D){var M=9;switch(R.l+=2,M=R.read_shift(2)){case 9:if(D!=3)throw new Error("Sector Shift: Expected 9 saw "+M);break;case 12:if(D!=4)throw new Error("Sector Shift: Expected 12 saw "+M);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+M)}R.chk("0600","Mini Sector Shift: "),R.chk("000000000000","Reserved: ")}function p(R,D){for(var M=Math.ceil(R.length/D)-1,z=[],G=1;G<M;++G)z[G-1]=R.slice(G*D,(G+1)*D);return z[M-1]=R.slice(M*D),z}function g(R,D,M){for(var z=0,G=0,Y=0,se=0,be=0,me=M.length,xe=[],pe=[];z<me;++z)xe[z]=pe[z]=z,D[z]=M[z];for(;be<pe.length;++be)z=pe[be],G=R[z].L,Y=R[z].R,se=R[z].C,xe[z]===z&&(G!==-1&&xe[G]!==G&&(xe[z]=xe[G]),Y!==-1&&xe[Y]!==Y&&(xe[z]=xe[Y])),se!==-1&&(xe[se]=z),G!==-1&&z!=xe[z]&&(xe[G]=xe[z],pe.lastIndexOf(G)<be&&pe.push(G)),Y!==-1&&z!=xe[z]&&(xe[Y]=xe[z],pe.lastIndexOf(Y)<be&&pe.push(Y));for(z=1;z<me;++z)xe[z]===z&&(Y!==-1&&xe[Y]!==Y?xe[z]=xe[Y]:G!==-1&&xe[G]!==G&&(xe[z]=xe[G]));for(z=1;z<me;++z)if(R[z].type!==0){if(be=z,be!=xe[be])do be=xe[be],D[z]=D[be]+"/"+D[z];while(be!==0&&xe[be]!==-1&&be!=xe[be]);xe[z]=-1}for(D[0]+="/",z=1;z<me;++z)R[z].type!==2&&(D[z]+="/")}function h(R,D,M){for(var z=R.start,G=R.size,Y=[],se=z;M&&G>0&&se>=0;)Y.push(D.slice(se*C,se*C+C)),G-=C,se=go(M,se*4);return Y.length===0?Se(0):Qr(Y).slice(0,R.size)}function y(R,D,M,z,G){var Y=A;if(R===A){if(D!==0)throw new Error("DIFAT chain shorter than expected")}else if(R!==-1){var se=M[R],be=(z>>>2)-1;if(!se)return;for(var me=0;me<be&&(Y=go(se,me*4))!==A;++me)G.push(Y);y(go(se,z-4),D-1,M,z,G)}}function w(R,D,M,z,G){var Y=[],se=[];G||(G=[]);var be=z-1,me=0,xe=0;for(me=D;me>=0;){G[me]=!0,Y[Y.length]=me,se.push(R[me]);var pe=M[Math.floor(me*4/z)];if(xe=me*4&be,z<4+xe)throw new Error("FAT boundary crossed: "+me+" 4 "+z);if(!R[pe])break;me=go(R[pe],xe)}return{nodes:Y,data:HO([se])}}function S(R,D,M,z){var G=R.length,Y=[],se=[],be=[],me=[],xe=z-1,pe=0,Pe=0,Te=0,Le=0;for(pe=0;pe<G;++pe)if(be=[],Te=pe+D,Te>=G&&(Te-=G),!se[Te]){me=[];var Ie=[];for(Pe=Te;Pe>=0;){Ie[Pe]=!0,se[Pe]=!0,be[be.length]=Pe,me.push(R[Pe]);var We=M[Math.floor(Pe*4/z)];if(Le=Pe*4&xe,z<4+Le)throw new Error("FAT boundary crossed: "+Pe+" 4 "+z);if(!R[We]||(Pe=go(R[We],Le),Ie[Pe]))break}Y[Te]={nodes:be,data:HO([me])}}return Y}function v(R,D,M,z,G,Y,se,be){for(var me=0,xe=z.length?2:0,pe=D[R].data,Pe=0,Te=0,Le;Pe<pe.length;Pe+=128){var Ie=pe.slice(Pe,Pe+128);oa(Ie,64),Te=Ie.read_shift(2),Le=fp(Ie,0,Te-xe),z.push(Le);var We={name:Le,type:Ie.read_shift(1),color:Ie.read_shift(1),L:Ie.read_shift(4,"i"),R:Ie.read_shift(4,"i"),C:Ie.read_shift(4,"i"),clsid:Ie.read_shift(16),state:Ie.read_shift(4,"i"),start:0,size:0},st=Ie.read_shift(2)+Ie.read_shift(2)+Ie.read_shift(2)+Ie.read_shift(2);st!==0&&(We.ct=x(Ie,Ie.l-8));var Zt=Ie.read_shift(2)+Ie.read_shift(2)+Ie.read_shift(2)+Ie.read_shift(2);Zt!==0&&(We.mt=x(Ie,Ie.l-8)),We.start=Ie.read_shift(4,"i"),We.size=Ie.read_shift(4,"i"),We.size<0&&We.start<0&&(We.size=We.type=0,We.start=A,We.name=""),We.type===5?(me=We.start,G>0&&me!==A&&(D[me].name="!StreamData")):We.size>=4096?(We.storage="fat",D[We.start]===void 0&&(D[We.start]=w(M,We.start,D.fat_addrs,D.ssz)),D[We.start].name=We.name,We.content=D[We.start].data.slice(0,We.size)):(We.storage="minifat",We.size<0?We.size=0:me!==A&&We.start!==A&&D[me]&&(We.content=h(We,D[me].data,(D[be]||{}).data))),We.content&&oa(We.content,0),Y[Le]=We,se.push(We)}}function x(R,D){return new Date((Yr(R,D+4)/1e7*Math.pow(2,32)+Yr(R,D)/1e7-11644473600)*1e3)}function b(R,D){return u(),d(c.readFileSync(R),D)}function N(R,D){var M=D&&D.type;switch(M||pt&&Buffer.isBuffer(R)&&(M="buffer"),M||"base64"){case"file":return b(R,D);case"base64":return d(tn(un(R)),D);case"binary":return d(tn(R),D)}return d(R,D)}function j(R,D){var M=D||{},z=M.root||"Root Entry";if(R.FullPaths||(R.FullPaths=[]),R.FileIndex||(R.FileIndex=[]),R.FullPaths.length!==R.FileIndex.length)throw new Error("inconsistent CFB structure");R.FullPaths.length===0&&(R.FullPaths[0]=z+"/",R.FileIndex[0]={name:z,type:5}),M.CLSID&&(R.FileIndex[0].clsid=M.CLSID),O(R)}function O(R){var D="Sh33tJ5";if(!Je.find(R,"/"+D)){var M=Se(4);M[0]=55,M[1]=M[3]=50,M[2]=54,R.FileIndex.push({name:D,type:2,content:M,size:4,L:69,R:69,C:69}),R.FullPaths.push(R.FullPaths[0]+D),_(R)}}function _(R,D){j(R);for(var M=!1,z=!1,G=R.FullPaths.length-1;G>=0;--G){var Y=R.FileIndex[G];switch(Y.type){case 0:z?M=!0:(R.FileIndex.pop(),R.FullPaths.pop());break;case 1:case 2:case 5:z=!0,isNaN(Y.R*Y.L*Y.C)&&(M=!0),Y.R>-1&&Y.L>-1&&Y.R==Y.L&&(M=!0);break;default:M=!0;break}}if(!(!M&&!D)){var se=new Date(1987,1,19),be=0,me=Object.create?Object.create(null):{},xe=[];for(G=0;G<R.FullPaths.length;++G)me[R.FullPaths[G]]=!0,R.FileIndex[G].type!==0&&xe.push([R.FullPaths[G],R.FileIndex[G]]);for(G=0;G<xe.length;++G){var pe=a(xe[G][0]);z=me[pe],z||(xe.push([pe,{name:s(pe).replace("/",""),type:1,clsid:F,ct:se,mt:se,content:null}]),me[pe]=!0)}for(xe.sort(function(Le,Ie){return r(Le[0],Ie[0])}),R.FullPaths=[],R.FileIndex=[],G=0;G<xe.length;++G)R.FullPaths[G]=xe[G][0],R.FileIndex[G]=xe[G][1];for(G=0;G<xe.length;++G){var Pe=R.FileIndex[G],Te=R.FullPaths[G];if(Pe.name=s(Te).replace("/",""),Pe.L=Pe.R=Pe.C=-(Pe.color=1),Pe.size=Pe.content?Pe.content.length:0,Pe.start=0,Pe.clsid=Pe.clsid||F,G===0)Pe.C=xe.length>1?1:-1,Pe.size=0,Pe.type=5;else if(Te.slice(-1)=="/"){for(be=G+1;be<xe.length&&a(R.FullPaths[be])!=Te;++be);for(Pe.C=be>=xe.length?-1:be,be=G+1;be<xe.length&&a(R.FullPaths[be])!=a(Te);++be);Pe.R=be>=xe.length?-1:be,Pe.type=1}else a(R.FullPaths[G+1]||"")==a(Te)&&(Pe.R=G+1),Pe.type=2}}}function E(R,D){var M=D||{};if(M.fileType=="mad")return Ze(R,M);switch(_(R),M.fileType){case"zip":return Z(R,M)}var z=function(Le){for(var Ie=0,We=0,st=0;st<Le.FileIndex.length;++st){var Zt=Le.FileIndex[st];if(Zt.content){var Gt=Zt.content.length;Gt>0&&(Gt<4096?Ie+=Gt+63>>6:We+=Gt+511>>9)}}for(var Lr=Le.FullPaths.length+3>>2,ao=Ie+7>>3,ou=Ie+127>>7,lu=ao+We+Lr+ou,no=lu+127>>7,vp=no<=109?0:Math.ceil((no-109)/127);lu+no+vp+127>>7>no;)vp=++no<=109?0:Math.ceil((no-109)/127);var Ss=[1,vp,no,ou,Lr,We,Ie,0];return Le.FileIndex[0].size=Ie<<6,Ss[7]=(Le.FileIndex[0].start=Ss[0]+Ss[1]+Ss[2]+Ss[3]+Ss[4]+Ss[5])+(Ss[6]+7>>3),Ss}(R),G=Se(z[7]<<9),Y=0,se=0;{for(Y=0;Y<8;++Y)G.write_shift(1,I[Y]);for(Y=0;Y<8;++Y)G.write_shift(2,0);for(G.write_shift(2,62),G.write_shift(2,3),G.write_shift(2,65534),G.write_shift(2,9),G.write_shift(2,6),Y=0;Y<3;++Y)G.write_shift(2,0);for(G.write_shift(4,0),G.write_shift(4,z[2]),G.write_shift(4,z[0]+z[1]+z[2]+z[3]-1),G.write_shift(4,0),G.write_shift(4,4096),G.write_shift(4,z[3]?z[0]+z[1]+z[2]-1:A),G.write_shift(4,z[3]),G.write_shift(-4,z[1]?z[0]-1:A),G.write_shift(4,z[1]),Y=0;Y<109;++Y)G.write_shift(-4,Y<z[2]?z[1]+Y:-1)}if(z[1])for(se=0;se<z[1];++se){for(;Y<236+se*127;++Y)G.write_shift(-4,Y<z[2]?z[1]+Y:-1);G.write_shift(-4,se===z[1]-1?A:se+1)}var be=function(Le){for(se+=Le;Y<se-1;++Y)G.write_shift(-4,Y+1);Le&&(++Y,G.write_shift(-4,A))};for(se=Y=0,se+=z[1];Y<se;++Y)G.write_shift(-4,q.DIFSECT);for(se+=z[2];Y<se;++Y)G.write_shift(-4,q.FATSECT);be(z[3]),be(z[4]);for(var me=0,xe=0,pe=R.FileIndex[0];me<R.FileIndex.length;++me)pe=R.FileIndex[me],pe.content&&(xe=pe.content.length,!(xe<4096)&&(pe.start=se,be(xe+511>>9)));for(be(z[6]+7>>3);G.l&511;)G.write_shift(-4,q.ENDOFCHAIN);for(se=Y=0,me=0;me<R.FileIndex.length;++me)pe=R.FileIndex[me],pe.content&&(xe=pe.content.length,!(!xe||xe>=4096)&&(pe.start=se,be(xe+63>>6)));for(;G.l&511;)G.write_shift(-4,q.ENDOFCHAIN);for(Y=0;Y<z[4]<<2;++Y){var Pe=R.FullPaths[Y];if(!Pe||Pe.length===0){for(me=0;me<17;++me)G.write_shift(4,0);for(me=0;me<3;++me)G.write_shift(4,-1);for(me=0;me<12;++me)G.write_shift(4,0);continue}pe=R.FileIndex[Y],Y===0&&(pe.start=pe.size?pe.start-1:A);var Te=Y===0&&M.root||pe.name;if(xe=2*(Te.length+1),G.write_shift(64,Te,"utf16le"),G.write_shift(2,xe),G.write_shift(1,pe.type),G.write_shift(1,pe.color),G.write_shift(-4,pe.L),G.write_shift(-4,pe.R),G.write_shift(-4,pe.C),pe.clsid)G.write_shift(16,pe.clsid,"hex");else for(me=0;me<4;++me)G.write_shift(4,0);G.write_shift(4,pe.state||0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,pe.start),G.write_shift(4,pe.size),G.write_shift(4,0)}for(Y=1;Y<R.FileIndex.length;++Y)if(pe=R.FileIndex[Y],pe.size>=4096)if(G.l=pe.start+1<<9,pt&&Buffer.isBuffer(pe.content))pe.content.copy(G,G.l,0,pe.size),G.l+=pe.size+511&-512;else{for(me=0;me<pe.size;++me)G.write_shift(1,pe.content[me]);for(;me&511;++me)G.write_shift(1,0)}for(Y=1;Y<R.FileIndex.length;++Y)if(pe=R.FileIndex[Y],pe.size>0&&pe.size<4096)if(pt&&Buffer.isBuffer(pe.content))pe.content.copy(G,G.l,0,pe.size),G.l+=pe.size+63&-64;else{for(me=0;me<pe.size;++me)G.write_shift(1,pe.content[me]);for(;me&63;++me)G.write_shift(1,0)}if(pt)G.l=G.length;else for(;G.l<G.length;)G.write_shift(1,0);return G}function k(R,D){var M=R.FullPaths.map(function(me){return me.toUpperCase()}),z=M.map(function(me){var xe=me.split("/");return xe[xe.length-(me.slice(-1)=="/"?2:1)]}),G=!1;D.charCodeAt(0)===47?(G=!0,D=M[0].slice(0,-1)+D):G=D.indexOf("/")!==-1;var Y=D.toUpperCase(),se=G===!0?M.indexOf(Y):z.indexOf(Y);if(se!==-1)return R.FileIndex[se];var be=!Y.match(Fu);for(Y=Y.replace(Sa,""),be&&(Y=Y.replace(Fu,"!")),se=0;se<M.length;++se)if((be?M[se].replace(Fu,"!"):M[se]).replace(Sa,"")==Y||(be?z[se].replace(Fu,"!"):z[se]).replace(Sa,"")==Y)return R.FileIndex[se];return null}var C=64,A=-2,P="d0cf11e0a1b11ae1",I=[208,207,17,224,161,177,26,225],F="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:A,FREESECT:-1,HEADER_SIGNATURE:P,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:F,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(R,D,M){u();var z=E(R,M);c.writeFileSync(D,z)}function V(R){for(var D=new Array(R.length),M=0;M<R.length;++M)D[M]=String.fromCharCode(R[M]);return D.join("")}function re(R,D){var M=E(R,D);switch(D&&D.type||"buffer"){case"file":return u(),c.writeFileSync(D.filename,M),M;case"binary":return typeof M=="string"?M:V(M);case"base64":return ff(typeof M=="string"?M:V(M));case"buffer":if(pt)return Buffer.isBuffer(M)?M:ri(M);case"array":return typeof M=="string"?tn(M):M}return M}var oe;function U(R){try{var D=R.InflateRaw,M=new D;if(M._processChunk(new Uint8Array([3,0]),M._finishFlushFlag),M.bytesRead)oe=R;else throw new Error("zlib does not expose bytesRead")}catch(z){console.error("cannot use native zlib: "+(z.message||z))}}function J(R,D){if(!oe)return ae(R,D);var M=oe.InflateRaw,z=new M,G=z._processChunk(R.slice(R.l),z._finishFlushFlag);return R.l+=z.bytesRead,G}function Q(R){return oe?oe.deflateRawSync(R):Qe(R)}var X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ue=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function we(R){var D=(R<<1|R<<11)&139536|(R<<5|R<<15)&558144;return(D>>16|D>>8|D)&255}for(var ne=typeof Uint8Array<"u",ie=ne?new Uint8Array(256):[],Ne=0;Ne<256;++Ne)ie[Ne]=we(Ne);function W(R,D){var M=ie[R&255];return D<=8?M>>>8-D:(M=M<<8|ie[R>>8&255],D<=16?M>>>16-D:(M=M<<8|ie[R>>16&255],M>>>24-D))}function Ee(R,D){var M=D&7,z=D>>>3;return(R[z]|(M<=6?0:R[z+1]<<8))>>>M&3}function B(R,D){var M=D&7,z=D>>>3;return(R[z]|(M<=5?0:R[z+1]<<8))>>>M&7}function ve(R,D){var M=D&7,z=D>>>3;return(R[z]|(M<=4?0:R[z+1]<<8))>>>M&15}function ye(R,D){var M=D&7,z=D>>>3;return(R[z]|(M<=3?0:R[z+1]<<8))>>>M&31}function fe(R,D){var M=D&7,z=D>>>3;return(R[z]|(M<=1?0:R[z+1]<<8))>>>M&127}function et(R,D,M){var z=D&7,G=D>>>3,Y=(1<<M)-1,se=R[G]>>>z;return M<8-z||(se|=R[G+1]<<8-z,M<16-z)||(se|=R[G+2]<<16-z,M<24-z)||(se|=R[G+3]<<24-z),se&Y}function Ke(R,D,M){var z=D&7,G=D>>>3;return z<=5?R[G]|=(M&7)<<z:(R[G]|=M<<z&255,R[G+1]=(M&7)>>8-z),D+3}function gt(R,D,M){var z=D&7,G=D>>>3;return M=(M&1)<<z,R[G]|=M,D+1}function Xe(R,D,M){var z=D&7,G=D>>>3;return M<<=z,R[G]|=M&255,M>>>=8,R[G+1]=M,D+8}function dt(R,D,M){var z=D&7,G=D>>>3;return M<<=z,R[G]|=M&255,M>>>=8,R[G+1]=M&255,R[G+2]=M>>>8,D+16}function He(R,D){var M=R.length,z=2*M>D?2*M:D+5,G=0;if(M>=D)return R;if(pt){var Y=TO(z);if(R.copy)R.copy(Y);else for(;G<R.length;++G)Y[G]=R[G];return Y}else if(ne){var se=new Uint8Array(z);if(se.set)se.set(R);else for(;G<M;++G)se[G]=R[G];return se}return R.length=z,R}function kt(R){for(var D=new Array(R),M=0;M<R;++M)D[M]=0;return D}function vt(R,D,M){var z=1,G=0,Y=0,se=0,be=0,me=R.length,xe=ne?new Uint16Array(32):kt(32);for(Y=0;Y<32;++Y)xe[Y]=0;for(Y=me;Y<M;++Y)R[Y]=0;me=R.length;var pe=ne?new Uint16Array(me):kt(me);for(Y=0;Y<me;++Y)xe[G=R[Y]]++,z<G&&(z=G),pe[Y]=0;for(xe[0]=0,Y=1;Y<=z;++Y)xe[Y+16]=be=be+xe[Y-1]<<1;for(Y=0;Y<me;++Y)be=R[Y],be!=0&&(pe[Y]=xe[be+16]++);var Pe=0;for(Y=0;Y<me;++Y)if(Pe=R[Y],Pe!=0)for(be=W(pe[Y],z)>>z-Pe,se=(1<<z+4-Pe)-1;se>=0;--se)D[be|se<<Pe]=Pe&15|Y<<4;return z}var St=ne?new Uint16Array(512):kt(512),Lt=ne?new Uint16Array(32):kt(32);if(!ne){for(var Et=0;Et<512;++Et)St[Et]=0;for(Et=0;Et<32;++Et)Lt[Et]=0}(function(){for(var R=[],D=0;D<32;D++)R.push(5);vt(R,Lt,32);var M=[];for(D=0;D<=143;D++)M.push(8);for(;D<=255;D++)M.push(9);for(;D<=279;D++)M.push(7);for(;D<=287;D++)M.push(8);vt(M,St,288)})();var fr=function(){for(var D=ne?new Uint8Array(32768):[],M=0,z=0;M<ue.length-1;++M)for(;z<ue[M+1];++z)D[z]=M;for(;z<32768;++z)D[z]=29;var G=ne?new Uint8Array(259):[];for(M=0,z=0;M<ee.length-1;++M)for(;z<ee[M+1];++z)G[z]=M;function Y(be,me){for(var xe=0;xe<be.length;){var pe=Math.min(65535,be.length-xe),Pe=xe+pe==be.length;for(me.write_shift(1,+Pe),me.write_shift(2,pe),me.write_shift(2,~pe&65535);pe-- >0;)me[me.l++]=be[xe++]}return me.l}function se(be,me){for(var xe=0,pe=0,Pe=ne?new Uint16Array(32768):[];pe<be.length;){var Te=Math.min(65535,be.length-pe);if(Te<10){for(xe=Ke(me,xe,+(pe+Te==be.length)),xe&7&&(xe+=8-(xe&7)),me.l=xe/8|0,me.write_shift(2,Te),me.write_shift(2,~Te&65535);Te-- >0;)me[me.l++]=be[pe++];xe=me.l*8;continue}xe=Ke(me,xe,+(pe+Te==be.length)+2);for(var Le=0;Te-- >0;){var Ie=be[pe];Le=(Le<<5^Ie)&32767;var We=-1,st=0;if((We=Pe[Le])&&(We|=pe&-32768,We>pe&&(We-=32768),We<pe))for(;be[We+st]==be[pe+st]&&st<250;)++st;if(st>2){Ie=G[st],Ie<=22?xe=Xe(me,xe,ie[Ie+1]>>1)-1:(Xe(me,xe,3),xe+=5,Xe(me,xe,ie[Ie-23]>>5),xe+=3);var Zt=Ie<8?0:Ie-4>>2;Zt>0&&(dt(me,xe,st-ee[Ie]),xe+=Zt),Ie=D[pe-We],xe=Xe(me,xe,ie[Ie]>>3),xe-=3;var Gt=Ie<4?0:Ie-2>>1;Gt>0&&(dt(me,xe,pe-We-ue[Ie]),xe+=Gt);for(var Lr=0;Lr<st;++Lr)Pe[Le]=pe&32767,Le=(Le<<5^be[pe])&32767,++pe;Te-=st-1}else Ie<=143?Ie=Ie+48:xe=gt(me,xe,1),xe=Xe(me,xe,ie[Ie]),Pe[Le]=pe&32767,++pe}xe=Xe(me,xe,0)-1}return me.l=(xe+7)/8|0,me.l}return function(me,xe){return me.length<8?Y(me,xe):se(me,xe)}}();function Qe(R){var D=Se(50+Math.floor(R.length*1.1)),M=fr(R,D);return D.slice(0,M)}var ft=ne?new Uint16Array(32768):kt(32768),ut=ne?new Uint16Array(32768):kt(32768),Ge=ne?new Uint16Array(128):kt(128),Sr=1,Er=1;function Ga(R,D){var M=ye(R,D)+257;D+=5;var z=ye(R,D)+1;D+=5;var G=ve(R,D)+4;D+=4;for(var Y=0,se=ne?new Uint8Array(19):kt(19),be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],me=1,xe=ne?new Uint8Array(8):kt(8),pe=ne?new Uint8Array(8):kt(8),Pe=se.length,Te=0;Te<G;++Te)se[X[Te]]=Y=B(R,D),me<Y&&(me=Y),xe[Y]++,D+=3;var Le=0;for(xe[0]=0,Te=1;Te<=me;++Te)pe[Te]=Le=Le+xe[Te-1]<<1;for(Te=0;Te<Pe;++Te)(Le=se[Te])!=0&&(be[Te]=pe[Le]++);var Ie=0;for(Te=0;Te<Pe;++Te)if(Ie=se[Te],Ie!=0){Le=ie[be[Te]]>>8-Ie;for(var We=(1<<7-Ie)-1;We>=0;--We)Ge[Le|We<<Ie]=Ie&7|Te<<3}var st=[];for(me=1;st.length<M+z;)switch(Le=Ge[fe(R,D)],D+=Le&7,Le>>>=3){case 16:for(Y=3+Ee(R,D),D+=2,Le=st[st.length-1];Y-- >0;)st.push(Le);break;case 17:for(Y=3+B(R,D),D+=3;Y-- >0;)st.push(0);break;case 18:for(Y=11+fe(R,D),D+=7;Y-- >0;)st.push(0);break;default:st.push(Le),me<Le&&(me=Le);break}var Zt=st.slice(0,M),Gt=st.slice(M);for(Te=M;Te<286;++Te)Zt[Te]=0;for(Te=z;Te<30;++Te)Gt[Te]=0;return Sr=vt(Zt,ft,286),Er=vt(Gt,ut,30),D}function he(R,D){if(R[0]==3&&!(R[1]&3))return[Ri(D),2];for(var M=0,z=0,G=TO(D||1<<18),Y=0,se=G.length>>>0,be=0,me=0;!(z&1);){if(z=B(R,M),M+=3,z>>>1)z>>1==1?(be=9,me=5):(M=Ga(R,M),be=Sr,me=Er);else{M&7&&(M+=8-(M&7));var xe=R[M>>>3]|R[(M>>>3)+1]<<8;if(M+=32,xe>0)for(!D&&se<Y+xe&&(G=He(G,Y+xe),se=G.length);xe-- >0;)G[Y++]=R[M>>>3],M+=8;continue}for(;;){!D&&se<Y+32767&&(G=He(G,Y+32767),se=G.length);var pe=et(R,M,be),Pe=z>>>1==1?St[pe]:ft[pe];if(M+=Pe&15,Pe>>>=4,!(Pe>>>8&255))G[Y++]=Pe;else{if(Pe==256)break;Pe-=257;var Te=Pe<8?0:Pe-4>>2;Te>5&&(Te=0);var Le=Y+ee[Pe];Te>0&&(Le+=et(R,M,Te),M+=Te),pe=et(R,M,me),Pe=z>>>1==1?Lt[pe]:ut[pe],M+=Pe&15,Pe>>>=4;var Ie=Pe<4?0:Pe-2>>1,We=ue[Pe];for(Ie>0&&(We+=et(R,M,Ie),M+=Ie),!D&&se<Le&&(G=He(G,Le+100),se=G.length);Y<Le;)G[Y]=G[Y-We],++Y}}}return D?[G,M+7>>>3]:[G.slice(0,Y),M+7>>>3]}function ae(R,D){var M=R.slice(R.l||0),z=he(M,D);return R.l+=z[1],z[0]}function je(R,D){if(R)typeof console<"u"&&console.error(D);else throw new Error(D)}function L(R,D){var M=R;oa(M,0);var z=[],G=[],Y={FileIndex:z,FullPaths:G};j(Y,{root:D.root});for(var se=M.length-4;(M[se]!=80||M[se+1]!=75||M[se+2]!=5||M[se+3]!=6)&&se>=0;)--se;M.l=se+4,M.l+=4;var be=M.read_shift(2);M.l+=6;var me=M.read_shift(4);for(M.l=me,se=0;se<be;++se){M.l+=20;var xe=M.read_shift(4),pe=M.read_shift(4),Pe=M.read_shift(2),Te=M.read_shift(2),Le=M.read_shift(2);M.l+=8;var Ie=M.read_shift(4),We=l(M.slice(M.l+Pe,M.l+Pe+Te));M.l+=Pe+Te+Le;var st=M.l;M.l=Ie+4,K(M,xe,pe,Y,We),M.l=st}return Y}function K(R,D,M,z,G){R.l+=2;var Y=R.read_shift(2),se=R.read_shift(2),be=o(R);if(Y&8257)throw new Error("Unsupported ZIP encryption");for(var me=R.read_shift(4),xe=R.read_shift(4),pe=R.read_shift(4),Pe=R.read_shift(2),Te=R.read_shift(2),Le="",Ie=0;Ie<Pe;++Ie)Le+=String.fromCharCode(R[R.l++]);if(Te){var We=l(R.slice(R.l,R.l+Te));(We[21589]||{}).mt&&(be=We[21589].mt),((G||{})[21589]||{}).mt&&(be=G[21589].mt)}R.l+=Te;var st=R.slice(R.l,R.l+xe);switch(se){case 8:st=J(R,pe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+se)}var Zt=!1;Y&8&&(me=R.read_shift(4),me==134695760&&(me=R.read_shift(4),Zt=!0),xe=R.read_shift(4),pe=R.read_shift(4)),xe!=D&&je(Zt,"Bad compressed size: "+D+" != "+xe),pe!=M&&je(Zt,"Bad uncompressed size: "+M+" != "+pe),Ue(z,Le,st,{unsafe:!0,mt:be})}function Z(R,D){var M=D||{},z=[],G=[],Y=Se(1),se=M.compression?8:0,be=0,me=0,xe=0,pe=0,Pe=0,Te=R.FullPaths[0],Le=Te,Ie=R.FileIndex[0],We=[],st=0;for(me=1;me<R.FullPaths.length;++me)if(Le=R.FullPaths[me].slice(Te.length),Ie=R.FileIndex[me],!(!Ie.size||!Ie.content||Le=="Sh33tJ5")){var Zt=pe,Gt=Se(Le.length);for(xe=0;xe<Le.length;++xe)Gt.write_shift(1,Le.charCodeAt(xe)&127);Gt=Gt.slice(0,Gt.l),We[Pe]=lue.buf(Ie.content,0);var Lr=Ie.content;se==8&&(Lr=Q(Lr)),Y=Se(30),Y.write_shift(4,67324752),Y.write_shift(2,20),Y.write_shift(2,be),Y.write_shift(2,se),Ie.mt?i(Y,Ie.mt):Y.write_shift(4,0),Y.write_shift(-4,We[Pe]),Y.write_shift(4,Lr.length),Y.write_shift(4,Ie.content.length),Y.write_shift(2,Gt.length),Y.write_shift(2,0),pe+=Y.length,z.push(Y),pe+=Gt.length,z.push(Gt),pe+=Lr.length,z.push(Lr),Y=Se(46),Y.write_shift(4,33639248),Y.write_shift(2,0),Y.write_shift(2,20),Y.write_shift(2,be),Y.write_shift(2,se),Y.write_shift(4,0),Y.write_shift(-4,We[Pe]),Y.write_shift(4,Lr.length),Y.write_shift(4,Ie.content.length),Y.write_shift(2,Gt.length),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(4,0),Y.write_shift(4,Zt),st+=Y.l,G.push(Y),st+=Gt.length,G.push(Gt),++Pe}return Y=Se(22),Y.write_shift(4,101010256),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,Pe),Y.write_shift(2,Pe),Y.write_shift(4,st),Y.write_shift(4,pe),Y.write_shift(2,0),Qr([Qr(z),Qr(G),Y])}var te={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ge(R,D){if(R.ctype)return R.ctype;var M=R.name||"",z=M.match(/\.([^\.]+)$/);return z&&te[z[1]]||D&&(z=(M=D).match(/[\.\\]([^\.\\])+$/),z&&te[z[1]])?te[z[1]]:"application/octet-stream"}function ce(R){for(var D=ff(R),M=[],z=0;z<D.length;z+=76)M.push(D.slice(z,z+76));return M.join(`\r
`)+`\r
`}function De(R){var D=R.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(xe){var pe=xe.charCodeAt(0).toString(16).toUpperCase();return"="+(pe.length==1?"0"+pe:pe)});D=D.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),D.charAt(0)==`
`&&(D="=0D"+D.slice(1)),D=D.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var M=[],z=D.split(`\r
`),G=0;G<z.length;++G){var Y=z[G];if(Y.length==0){M.push("");continue}for(var se=0;se<Y.length;){var be=76,me=Y.slice(se,se+be);me.charAt(be-1)=="="?be--:me.charAt(be-2)=="="?be-=2:me.charAt(be-3)=="="&&(be-=3),me=Y.slice(se,se+be),se+=be,se<Y.length&&(me+="="),M.push(me)}}return M.join(`\r
`)}function ke(R){for(var D=[],M=0;M<R.length;++M){for(var z=R[M];M<=R.length&&z.charAt(z.length-1)=="=";)z=z.slice(0,z.length-1)+R[++M];D.push(z)}for(var G=0;G<D.length;++G)D[G]=D[G].replace(/[=][0-9A-Fa-f]{2}/g,function(Y){return String.fromCharCode(parseInt(Y.slice(1),16))});return tn(D.join(`\r
`))}function qe(R,D,M){for(var z="",G="",Y="",se,be=0;be<10;++be){var me=D[be];if(!me||me.match(/^\s*$/))break;var xe=me.match(/^(.*?):\s*([^\s].*)$/);if(xe)switch(xe[1].toLowerCase()){case"content-location":z=xe[2].trim();break;case"content-type":Y=xe[2].trim();break;case"content-transfer-encoding":G=xe[2].trim();break}}switch(++be,G.toLowerCase()){case"base64":se=tn(un(D.slice(be).join("")));break;case"quoted-printable":se=ke(D.slice(be));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+G)}var pe=Ue(R,z.slice(M.length),se,{unsafe:!0});Y&&(pe.ctype=Y)}function Ae(R,D){if(V(R.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var M=D&&D.root||"",z=(pt&&Buffer.isBuffer(R)?R.toString("binary"):V(R)).split(`\r
`),G=0,Y="";for(G=0;G<z.length;++G)if(Y=z[G],!!/^Content-Location:/i.test(Y)&&(Y=Y.slice(Y.indexOf("file")),M||(M=Y.slice(0,Y.lastIndexOf("/")+1)),Y.slice(0,M.length)!=M))for(;M.length>0&&(M=M.slice(0,M.length-1),M=M.slice(0,M.lastIndexOf("/")+1),Y.slice(0,M.length)!=M););var se=(z[1]||"").match(/boundary="(.*?)"/);if(!se)throw new Error("MAD cannot find boundary");var be="--"+(se[1]||""),me=[],xe=[],pe={FileIndex:me,FullPaths:xe};j(pe);var Pe,Te=0;for(G=0;G<z.length;++G){var Le=z[G];Le!==be&&Le!==be+"--"||(Te++&&qe(pe,z.slice(Pe,G),M),Pe=G)}return pe}function Ze(R,D){var M=D||{},z=M.boundary||"SheetJS";z="------="+z;for(var G=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+z.slice(2)+'"',"","",""],Y=R.FullPaths[0],se=Y,be=R.FileIndex[0],me=1;me<R.FullPaths.length;++me)if(se=R.FullPaths[me].slice(Y.length),be=R.FileIndex[me],!(!be.size||!be.content||se=="Sh33tJ5")){se=se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(st){return"_x"+st.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(st){return"_u"+st.charCodeAt(0).toString(16)+"_"});for(var xe=be.content,pe=pt&&Buffer.isBuffer(xe)?xe.toString("binary"):V(xe),Pe=0,Te=Math.min(1024,pe.length),Le=0,Ie=0;Ie<=Te;++Ie)(Le=pe.charCodeAt(Ie))>=32&&Le<128&&++Pe;var We=Pe>=Te*4/5;G.push(z),G.push("Content-Location: "+(M.root||"file:///C:/SheetJS/")+se),G.push("Content-Transfer-Encoding: "+(We?"quoted-printable":"base64")),G.push("Content-Type: "+ge(be,se)),G.push(""),G.push(We?De(pe):ce(pe))}return G.push(z+`--\r
`),G.join(`\r
`)}function Oe(R){var D={};return j(D,R),D}function Ue(R,D,M,z){var G=z&&z.unsafe;G||j(R);var Y=!G&&Je.find(R,D);if(!Y){var se=R.FullPaths[0];D.slice(0,se.length)==se?se=D:(se.slice(-1)!="/"&&(se+="/"),se=(se+D).replace("//","/")),Y={name:s(D),type:2},R.FileIndex.push(Y),R.FullPaths.push(se),G||Je.utils.cfb_gc(R)}return Y.content=M,Y.size=M?M.length:0,z&&(z.CLSID&&(Y.clsid=z.CLSID),z.mt&&(Y.mt=z.mt),z.ct&&(Y.ct=z.ct)),Y}function at(R,D){j(R);var M=Je.find(R,D);if(M){for(var z=0;z<R.FileIndex.length;++z)if(R.FileIndex[z]==M)return R.FileIndex.splice(z,1),R.FullPaths.splice(z,1),!0}return!1}function Ot(R,D,M){j(R);var z=Je.find(R,D);if(z){for(var G=0;G<R.FileIndex.length;++G)if(R.FileIndex[G]==z)return R.FileIndex[G].name=s(M),R.FullPaths[G]=M,!0}return!1}function Bt(R){_(R,!0)}return t.find=k,t.read=N,t.parse=d,t.write=re,t.writeFile=H,t.utils={cfb_new:Oe,cfb_add:Ue,cfb_del:at,cfb_mov:Ot,cfb_gc:Bt,ReadShift:Ju,CheckField:I6,prep_blob:oa,bconcat:Qr,use_zlib:U,_deflateRaw:Qe,_inflateRaw:ae,consts:q},t}();let Ni;function cue(e){Ni=e}function uue(e){return typeof e=="string"?Kf(e):Array.isArray(e)?Mce(e):e}function Vf(e,t,r){if(typeof Ni<"u"&&Ni.writeFileSync)return r?Ni.writeFileSync(e,t,r):Ni.writeFileSync(e,t);if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Kf(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?fs(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([uue(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=eo(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function due(e){if(typeof Ni<"u")return Ni.readFileSync(e);if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function jr(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function FO(e,t){for(var r=[],a=jr(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function cp(e){for(var t=[],r=jr(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function up(e){for(var t=[],r=jr(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function fue(e){for(var t=[],r=jr(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var qh=new Date(1899,11,30,0,0,0);function zr(e,t){var r=e.getTime();t&&(r-=1462*24*60*60*1e3);var a=qh.getTime()+(e.getTimezoneOffset()-qh.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var x6=new Date,mue=qh.getTime()+(x6.getTimezoneOffset()-qh.getTimezoneOffset())*6e4,RO=x6.getTimezoneOffset();function dp(e){var t=new Date;return t.setTime(e*24*60*60*1e3+mue),t.getTimezoneOffset()!==RO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-RO)*6e4),t}function hue(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var LO=new Date("2017-02-19T19:06:09.000Z"),p6=isNaN(LO.getFullYear())?new Date("2/19/17"):LO,xue=p6.getFullYear()==2017;function lr(e,t){var r=new Date(e);if(xue)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(p6.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Xo(e,t){if(pt&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return fs(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return fs(r6(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return fs(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return fs(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function Yt(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Yt(e[r]));return t}function vr(e,t){for(var r="";r.length<t;)r+=e;return r}function ts(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var pue=["january","february","march","april","may","june","july","august","september","october","november","december"];function Fc(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&pue.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var gue=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function g6(e){return e?e.content&&e.type?Xo(e.content,!0):e.data?Ul(e.data):e.asNodeBuffer&&pt?Ul(e.asNodeBuffer().toString("binary")):e.asBinary?Ul(e.asBinary()):e._data&&e._data.getContent?Ul(Xo(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function y6(e){if(!e)return null;if(e.data)return $h(e.data);if(e.asNodeBuffer&&pt)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?$h(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function yue(e){return e&&e.name.slice(-4)===".bin"?y6(e):g6(e)}function wn(e,t){for(var r=e.FullPaths||jr(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function Jw(e,t){var r=wn(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ir(e,t,r){if(!r)return yue(Jw(e,t));if(!t)return null;try{return Ir(e,t)}catch{return null}}function rn(e,t,r){if(!r)return g6(Jw(e,t));if(!t)return null;try{return rn(e,t)}catch{return null}}function v6(e,t,r){if(!r)return y6(Jw(e,t));if(!t)return null;try{return v6(e,t)}catch{return null}}function $O(e){for(var t=e.FullPaths||jr(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function ht(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return pt?a=ri(r):a=Fce(r),Je.utils.cfb_add(e,t,a)}Je.utils.cfb_add(e,t,r)}else e.file(t,r)}function Zw(){return Je.utils.cfb_new()}function b6(e,t){switch(t.type){case"base64":return Je.read(e,{type:"base64"});case"binary":return Je.read(e,{type:"binary"});case"buffer":case"array":return Je.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Ru(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var _r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,vue=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,BO=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,bue=/<[^>]*>/g,_a=_r.match(BO)?BO:bue,wue=/<\w*:/,Nue=/<(\/?)\w+:/;function lt(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(vue),l=0,c="",u=0,d="",f="",m=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(d=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(m=(s=f.charCodeAt(i+1))==34||s==39?1:0,c=f.slice(i+1+m,f.length-m),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,r||(a[d.toLowerCase()]=c);else{var p=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(a[p]&&d.slice(l-3,l)=="ext")continue;a[p]=c,r||(a[p.toLowerCase()]=c)}}return a}function Ns(e){return e.replace(Nue,"<$1")}var w6={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},eN=cp(w6),Pt=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return w6[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),tN=/[&<>'"]/g,jue=/[\u0000-\u0008\u000b-\u001f]/g;function qt(e){var t=e+"";return t.replace(tN,function(r){return eN[r]}).replace(jue,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function UO(e){return qt(e).replace(/ /g,"_x0020_")}var N6=/[\u0000-\u001f]/g;function rN(e){var t=e+"";return t.replace(tN,function(r){return eN[r]}).replace(/\n/g,"<br/>").replace(N6,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Sue(e){var t=e+"";return t.replace(tN,function(r){return eN[r]}).replace(N6,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var WO=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function Cue(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function sr(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ag(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function qO(e){var t=Ri(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function KO(e){return ri(e,"binary").toString("utf8")}var R0="foo bar baz",Ht=pt&&(KO(R0)==Ag(R0)&&KO||qO(R0)==Ag(R0)&&qO)||Ag,fs=pt?function(e){return ri(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},hf=function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),j6=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}}(),kue=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Oue=/<\/?(?:vt:)?variant>/g,Tue=/<(?:vt:)([^>]*)>([\s\S]*)</;function zO(e,t){var r=lt(e),a=e.match(kue(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(Oue,"").match(Tue);o&&s.push({v:Ht(o[2]),t:o[1]})}),s}var S6=/(^\s|\s$|\n)/;function la(e,t){return"<"+e+(t.match(S6)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function xf(e){return jr(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Re(e,t,r){return"<"+e+(r!=null?xf(r):"")+(t!=null?(t.match(S6)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function wb(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function _ue(e,t){switch(typeof e){case"string":var r=Re("vt:lpwstr",qt(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return Re((e|0)==e?"vt:i4":"vt:r8",qt(String(e)));case"boolean":return Re("vt:bool",e?"true":"false")}if(e instanceof Date)return Re("vt:filetime",wb(e));throw new Error("Unable to serialize "+e)}function aN(e){if(pt&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ht(eo(Xw(e)));throw new Error("Bad input format: expected Buffer or string")}var pf=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Wr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ll=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Za={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Eue(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function Aue(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var VO=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},HO=pt?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:ri(t)})):VO(e)}:VO,GO=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(Is(e,s)));return a.join("").replace(Sa,"")},fp=pt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Sa,""):GO(e,t,r)}:GO,XO=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},C6=pt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):XO(e,t,r)}:XO,YO=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(Cl(e,s)));return a.join("")},nu=pt?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):YO(t,r,a)}:YO,k6=function(e,t){var r=Yr(e,t);return r>0?nu(e,t+4,t+4+r-1):""},nN=k6,O6=function(e,t){var r=Yr(e,t);return r>0?nu(e,t+4,t+4+r-1):""},sN=O6,T6=function(e,t){var r=2*Yr(e,t);return r>0?nu(e,t+4,t+4+r-1):""},iN=T6,_6=function(t,r){var a=Yr(t,r);return a>0?fp(t,r+4,r+4+a):""},oN=_6,E6=function(e,t){var r=Yr(e,t);return r>0?nu(e,t+4,t+4+r):""},lN=E6,A6=function(e,t){return Eue(e,t)},Kh=A6,cN=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pt&&(nN=function(t,r){if(!Buffer.isBuffer(t))return k6(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},sN=function(t,r){if(!Buffer.isBuffer(t))return O6(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},iN=function(t,r){if(!Buffer.isBuffer(t))return T6(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},oN=function(t,r){if(!Buffer.isBuffer(t))return _6(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},lN=function(t,r){if(!Buffer.isBuffer(t))return E6(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},Kh=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):A6(t,r)},cN=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});function P6(){fp=function(e,t,r){return _t.utils.decode(1200,e.slice(t,r)).replace(Sa,"")},nu=function(e,t,r){return _t.utils.decode(65001,e.slice(t,r))},nN=function(e,t){var r=Yr(e,t);return r>0?_t.utils.decode(Ho,e.slice(t+4,t+4+r-1)):""},sN=function(e,t){var r=Yr(e,t);return r>0?_t.utils.decode(sn,e.slice(t+4,t+4+r-1)):""},iN=function(e,t){var r=2*Yr(e,t);return r>0?_t.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},oN=function(e,t){var r=Yr(e,t);return r>0?_t.utils.decode(1200,e.slice(t+4,t+4+r)):""},lN=function(e,t){var r=Yr(e,t);return r>0?_t.utils.decode(65001,e.slice(t+4,t+4+r)):""}}typeof _t<"u"&&P6();var Cl=function(e,t){return e[t]},Is=function(e,t){return e[t+1]*256+e[t]},Pue=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Yr=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},go=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Iue=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ju(e,t){var r="",a,s,i=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,pt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Is(this,u)),u+=2;e*=2;break;case"utf8":r=nu(this,this.l,this.l+e);break;case"utf16le":e*=2,r=fp(this,this.l,this.l+e);break;case"wstr":if(typeof _t<"u")r=_t.utils.decode(sn,this.slice(this.l,this.l+2*e));else return Ju.call(this,e,"dbcs");e=2*e;break;case"lpstr-ansi":r=nN(this,this.l),e=4+Yr(this,this.l);break;case"lpstr-cp":r=sN(this,this.l),e=4+Yr(this,this.l);break;case"lpwstr":r=iN(this,this.l),e=4+2*Yr(this,this.l);break;case"lpp4":e=4+Yr(this,this.l),r=oN(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Yr(this,this.l),r=lN(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Cl(this,this.l+e++))!==0;)i.push(Mu(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Is(this,this.l+e))!==0;)i.push(Mu(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Cl(this,u),this.l=u+1,l=Ju.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mu(Is(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":if(typeof _t<"u"){r=_t.utils.decode(sn,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Cl(this,u),this.l=u+1,l=Ju.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mu(Cl(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return a=Cl(this,this.l),this.l++,a;case 2:return a=(t==="i"?Pue:Is)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(a=(e>0?go:Iue)(this,this.l),this.l+=4,a):(s=Yr(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Kh(this,this.l):s=Kh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=C6(this,this.l,e);break}}return this.l+=e,r}var Due=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Mue=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Fue=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Rue(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Fue(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){if(typeof _t<"u"&&Ho==874)for(s=0;s!=t.length;++s){var i=_t.utils.encode(Ho,t.charAt(s));this[this.l+s]=i[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var o=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var l=t.charCodeAt(s);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,Due(this,t,this.l);break;case 8:if(a=8,r==="f"){Aue(this,t,this.l);break}case 16:break;case-4:a=4,Mue(this,t,this.l);break}return this.l+=a,this}function I6(e,t){var r=C6(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function oa(e,t){e.l=t,e.read_shift=Ju,e.chk=I6,e.write_shift=Rue}function Oa(e,t){e.l+=t}function Se(e){var t=Ri(e);return oa(t,0),t}function ai(e,t,r){if(e){var a,s,i;oa(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=Nf[l]||Nf[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var d=u.f&&u.f(e,i,r);if(e.l=c,t(d,u,l))return}}}function za(){var e=[],t=pt?256:2048,r=function(u){var d=Se(u);return oa(d,0),d},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(s(),a=r(Math.max(u+1,t)))},o=function(){return s(),Qr(e)},l=function(u){s(),a=u,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function _e(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=Nf[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&cN(r)&&e.push(r)}}function Zu(e,t,r){var a=Yt(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function QO(e,t,r){var a=Yt(e);return a.s=Zu(a.s,t.s,r),a.e=Zu(a.e,t.s,r),a}function ed(e,t){if(e.cRel&&e.c<0)for(e=Yt(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Yt(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=ot(e);return!e.cRel&&e.cRel!=null&&(r=Bue(r)),!e.rRel&&e.rRel!=null&&(r=Lue(r)),r}function Pg(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+or(e.s.c)+":"+(e.e.cRel?"":"$")+or(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+br(e.s.r)+":"+(e.e.rRel?"":"$")+br(e.e.r):ed(e.s,t.biff)+":"+ed(e.e,t.biff)}function uN(e){return parseInt($ue(e),10)-1}function br(e){return""+(e+1)}function Lue(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function $ue(e){return e.replace(/\$(\d+)$/,"$1")}function dN(e){for(var t=Uue(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function or(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Bue(e){return e.replace(/^([A-Z])/,"$$$1")}function Uue(e){return e.replace(/^\$([A-Z])/,"$1")}function Wue(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function hr(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function ot(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Ma(e){var t=e.indexOf(":");return t==-1?{s:hr(e),e:hr(e)}:{s:hr(e.slice(0,t)),e:hr(e.slice(t+1))}}function mt(e,t){return typeof t>"u"||typeof t=="number"?mt(e.s,e.e):(typeof e!="string"&&(e=ot(e)),typeof t!="string"&&(t=ot(t)),e==t?e:e+":"+t)}function Ct(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function JO(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=dn(e.z,r?zr(t):t)}catch{}try{return e.w=dn((e.XF||{}).numFmtId||(r?14:0),r?zr(t):t)}catch{return""+t}}function bs(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?ni[e.v]||e.v:t==null?JO(e,e.v):JO(e,t))}function to(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function D6(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?hr(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Ct(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var p={v:t[f][m]},g=o+f,h=l+m;if(u.s.r>g&&(u.s.r=g),u.s.c>h&&(u.s.c=h),u.e.r<g&&(u.e.r=g),u.e.c<h&&(u.e.c=h),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))p=t[f][m];else if(Array.isArray(p.v)&&(p.f=t[f][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(a.nullError)p.t="e",p.v=0;else if(a.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=a.dateNF||tt[14],a.cellDates?(p.t="d",p.w=dn(p.z,zr(p.v))):(p.t="n",p.v=zr(p.v),p.w=dn(p.z,p.v))):p.t="s";if(s)i[g]||(i[g]=[]),i[g][h]&&i[g][h].z&&(p.z=i[g][h].z),i[g][h]=p;else{var y=ot({c:h,r:g});i[y]&&i[y].z&&(p.z=i[y].z),i[y]=p}}}return u.s.c<1e7&&(i["!ref"]=mt(u)),i}function su(e,t){return D6(null,e,t)}function que(e){return e.read_shift(4,"i")}function rs(e,t){return t||(t=Se(4)),t.write_shift(4,e),t}function Ca(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Jr(e,t){var r=!1;return t==null&&(r=!0,t=Se(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Kue(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function zue(e,t){return t||(t=Se(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0),t}function fN(e,t){var r=e.l,a=e.read_shift(1),s=Ca(e),i=[],o={t:s,h:s};if(a&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Kue(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Vue(e,t){var r=!1;return t==null&&(r=!0,t=Se(15+4*e.t.length)),t.write_shift(1,0),Jr(e.t,t),r?t.slice(0,t.l):t}var Hue=fN;function Gue(e,t){var r=!1;return t==null&&(r=!0,t=Se(23+4*e.t.length)),t.write_shift(1,1),Jr(e.t,t),t.write_shift(4,1),zue({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function $n(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function cl(e,t){return t==null&&(t=Se(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ul(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function dl(e,t){return t==null&&(t=Se(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Xue=Ca,M6=Jr;function mN(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function zh(e,t){var r=!1;return t==null&&(r=!0,t=Se(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Yue=Ca,Nb=mN,hN=zh;function xN(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?Kh([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):go(t,0)>>2;return r?s/100:s}function F6(e,t){t==null&&(t=Se(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-(1<<29)&&e<1<<29?a=1:s==(s|0)&&s>=-(1<<29)&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function R6(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Que(e,t){return t||(t=Se(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var fl=R6,iu=Que;function ja(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Yo(e,t){return(t||Se(8)).write_shift(8,e,"f")}function Jue(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var u=Eo[s];u&&(t.rgb=yf(u));break;case 2:t.rgb=yf([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Vh(e,t){if(t||(t=Se(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Zue(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function ede(e,t){t||(t=Se(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function L6(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function tde(e){return L6(e,1)}function rde(e){return L6(e,2)}var pN=2,La=3,L0=11,ZO=12,Hh=19,$0=64,ade=65,nde=71,sde=4108,ide=4126,Gr=80,$6=81,ode=[Gr,$6],jb={1:{n:"CodePage",t:pN},2:{n:"Category",t:Gr},3:{n:"PresentationFormat",t:Gr},4:{n:"ByteCount",t:La},5:{n:"LineCount",t:La},6:{n:"ParagraphCount",t:La},7:{n:"SlideCount",t:La},8:{n:"NoteCount",t:La},9:{n:"HiddenCount",t:La},10:{n:"MultimediaClipCount",t:La},11:{n:"ScaleCrop",t:L0},12:{n:"HeadingPairs",t:sde},13:{n:"TitlesOfParts",t:ide},14:{n:"Manager",t:Gr},15:{n:"Company",t:Gr},16:{n:"LinksUpToDate",t:L0},17:{n:"CharacterCount",t:La},19:{n:"SharedDoc",t:L0},22:{n:"HyperlinksChanged",t:L0},23:{n:"AppVersion",t:La,p:"version"},24:{n:"DigSig",t:ade},26:{n:"ContentType",t:Gr},27:{n:"ContentStatus",t:Gr},28:{n:"Language",t:Gr},29:{n:"Version",t:Gr},255:{},2147483648:{n:"Locale",t:Hh},2147483651:{n:"Behavior",t:Hh},1919054434:{}},Sb={1:{n:"CodePage",t:pN},2:{n:"Title",t:Gr},3:{n:"Subject",t:Gr},4:{n:"Author",t:Gr},5:{n:"Keywords",t:Gr},6:{n:"Comments",t:Gr},7:{n:"Template",t:Gr},8:{n:"LastAuthor",t:Gr},9:{n:"RevNumber",t:Gr},10:{n:"EditTime",t:$0},11:{n:"LastPrinted",t:$0},12:{n:"CreatedDate",t:$0},13:{n:"ModifiedDate",t:$0},14:{n:"PageCount",t:La},15:{n:"WordCount",t:La},16:{n:"CharCount",t:La},17:{n:"Thumbnail",t:nde},18:{n:"Application",t:Gr},19:{n:"DocSecurity",t:La},255:{},2147483648:{n:"Locale",t:Hh},2147483651:{n:"Behavior",t:Hh},1919054434:{}},eT={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},lde=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function cde(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var ude=cde([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Eo=Yt(ude),ni={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},B6={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Cb={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},B0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function gN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function dde(e){var t=gN();if(!e||!e.match)return t;var r={};if((e.match(_a)||[]).forEach(function(a){var s=lt(a);switch(s[0].replace(wue,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[Cb[s.ContentType]]!==void 0&&t[Cb[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Wr.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function U6(e,t){var r=fue(Cb),a=[],s;a[a.length]=_r,a[a.length]=Re("Types",null,{xmlns:Wr.CT,"xmlns:xsd":Wr.xsd,"xmlns:xsi":Wr.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Re("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=Re("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:B0[c][t.bookType]||B0[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){a[a.length]=Re("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:B0[c][t.bookType]||B0[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){a[a.length]=Re("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var yt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function gf(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function td(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(_a)||[]).forEach(function(s){var i=lt(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Ru(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function rc(e){var t=[_r,Re("Relationships",null,{xmlns:Wr.RELS})];return jr(e["!id"]).forEach(function(r){t[t.length]=Re("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Wt(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,i?s.TargetMode=i:[yt.HLINK,yt.XPATH,yt.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var fde="application/vnd.oasis.opendocument.spreadsheet";function mde(e,t){for(var r=aN(e),a,s;a=pf.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=lt(a[0],!1),s.path=="/"&&s.type!==fde)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function hde(e){var t=[_r];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function tT(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function xde(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function pde(e){var t=[_r];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(tT(e[r][0],e[r][1])),t.push(xde("",e[r][0]));return t.push(tT("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function W6(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+df.version+"</meta:generator></office:meta></office:document-meta>"}var In=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],gde=function(){for(var e=new Array(In.length),t=0;t<In.length;++t){var r=In[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function q6(e){var t={};e=Ht(e);for(var r=0;r<In.length;++r){var a=In[r],s=e.match(gde[r]);s!=null&&s.length>0&&(t[a[1]]=Pt(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=lr(t[a[1]]))}return t}function Ig(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=qt(t),a[a.length]=r?Re(e,t,r):la(e,t))}function K6(e,t){var r=t||{},a=[_r,Re("cp:coreProperties",null,{"xmlns:cp":Wr.CORE_PROPS,"xmlns:dc":Wr.dc,"xmlns:dcterms":Wr.dcterms,"xmlns:dcmitype":Wr.dcmitype,"xmlns:xsi":Wr.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Ig("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:wb(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&Ig("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:wb(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=In.length;++i){var o=In[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Ig(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var Ao=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],z6=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function V6(e,t,r,a){var s=[];if(typeof e=="string")s=zO(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(d){return{v:d}}));var o=typeof t=="string"?zO(t,a).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function yde(e,t,r){var a={};return t||(t={}),e=Ht(e),Ao.forEach(function(s){var i=(e.match(hf(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Pt(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&V6(a.HeadingPairs,a.TitlesOfParts,t,r),t}function H6(e){var t=[],r=Re;return e||(e={}),e.Application="SheetJS",t[t.length]=_r,t[t.length]=Re("Properties",null,{xmlns:Wr.EXT_PROPS,"xmlns:vt":Wr.vt}),Ao.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=qt(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+qt(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var vde=/<[^>]+>[^<]*/g;function bde(e,t){var r={},a="",s=e.match(vde);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=lt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Pt(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=Pt(d);break;case"bool":r[a]=sr(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(d);break;case"filetime":case"date":r[a]=lr(d);break;case"cy":case"error":r[a]=Pt(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function G6(e){var t=[_r,Re("Properties",null,{xmlns:Wr.CUST_PROPS,"xmlns:vt":Wr.vt})];if(!e)return t.join("");var r=1;return jr(e).forEach(function(s){++r,t[t.length]=Re("property",_ue(e[s],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:qt(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var kb={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Dg;function wde(e,t,r){Dg||(Dg=cp(kb)),t=Dg[t]||t,e[t]=r}function Nde(e,t){var r=[];return jr(kb).map(function(a){for(var s=0;s<In.length;++s)if(In[s][1]==a)return In[s];for(s=0;s<Ao.length;++s)if(Ao[s][1]==a)return Ao[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(la(kb[a[1]]||a[1],s))}}),Re("DocumentProperties",r.join(""),{xmlns:Za.o})}function jde(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&jr(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<In.length;++o)if(i==In[o][1])return;for(o=0;o<Ao.length;++o)if(i==Ao[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(Re(UO(i),l,{"dt:dt":c}))}}),t&&jr(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(Re(UO(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+Za.o+'">'+s.join("")+"</"+a+">"}function yN(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Sde(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=Se(8);return o.write_shift(4,a),o.write_shift(4,s),o}function X6(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function Y6(e,t,r){var a=e.read_shift(0,"lpwstr");return r&&(e.l+=4-(a.length+1&3)&3),a}function Q6(e,t,r){return t===31?Y6(e):X6(e,t,r)}function Ob(e,t,r){return Q6(e,t,r===!1?0:4)}function Cde(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Q6(e,t,0)}function kde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Sa,""),e.l-s&2&&(e.l+=2)}return r}function Ode(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Sa,"");return r}function Tde(e){var t=e.l,r=Gh(e,$6);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=Gh(e,La);return[r,a]}function _de(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(Tde(e));return r}function rT(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Sa,"").replace(Fu,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>2+1<<2),a}function J6(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Ede(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Gh(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==ZO&&a!==t&&ode.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===ZO?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return X6(e,a,4).replace(Sa,"");case 31:return Y6(e);case 64:return yN(e);case 65:return J6(e);case 71:return Ede(e);case 80:return Ob(e,a,!i.raw).replace(Sa,"");case 81:return Cde(e,a).replace(Sa,"");case 4108:return _de(e);case 4126:case 4127:return a==4127?kde(e):Ode(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function aT(e,t){var r=Se(4),a=Se(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=Se(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=Sde(t);break;case 31:case 80:for(a=Se(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Qr([r,a])}function nT(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,u={};for(o=0;o!=s;++o){var d=e.read_shift(4),f=e.read_shift(4);i[o]=[d,f+r]}i.sort(function(S,v){return S[1]-v[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[i[o][0]];if(m[g.n]=Gh(e,g.t,{raw:!0}),g.p==="version"&&(m[g.n]=String(m[g.n]>>16)+"."+("0000"+String(m[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(m[g.n]){case 0:m[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Tn(l=m[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[g.n])}}else if(i[o][0]===1){if(l=m.CodePage=Gh(e,pN),Tn(l),c!==-1){var h=e.l;e.l=i[c][1],u=rT(e,l),e.l=h}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}u=rT(e,l)}else{var y=u[i[o][0]],w;switch(e[e.l]){case 65:e.l+=4,w=J6(e);break;case 30:e.l+=4,w=Ob(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=Ob(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=Cr(e,4);break;case 64:e.l+=4,w=lr(yN(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[y]=w}}return e.l=r+a,m}var Z6=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Ade(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function sT(e,t,r){var a=Se(8),s=[],i=[],o=8,l=0,c=Se(8),u=Se(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),s.push(u),o+=8+c.length,!t){u=Se(8),u.write_shift(4,0),s.unshift(u);var d=[Se(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Se(4+4+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Qr(d),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(Z6.indexOf(e[l][0])>-1||z6.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var g=r[p];if(g.p=="version"&&typeof m=="string"){var h=m.split(".");m=(+h[0]<<16)+(+h[1]||0)}c=aT(g.t,m)}else{var y=Ade(m);y==-1&&(y=31,m=String(m)),c=aT(y,m)}i.push(c),u=Se(8),u.write_shift(4,t?p:2+l),s.push(u),o+=8+c.length}var w=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,w),w+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),Qr([a].concat(s).concat(i))}function iT(e,t,r){var a=e.content;if(!a)return{};oa(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),d=a.read_shift(16);if(d!==Je.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=nT(a,t),m={SystemIdentifier:u};for(var p in f)m[p]=f[p];if(m.FMTID=i,s===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var g;try{g=nT(a,null)}catch{}for(p in g)m[p]=g[p];return m.FMTID=[i,o],m}function oT(e,t,r,a,s,i){var o=Se(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Je.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=sT(e,r,a);if(l.push(c),s){var u=sT(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Qr(l)}function ii(e,t){return e.read_shift(t),null}function Pde(e,t){t||(t=Se(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Ide(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function Cr(e,t){return e.read_shift(t)===1}function Pa(e,t){return t||(t=Se(2)),t.write_shift(2,+!!e),t}function Dr(e){return e.read_shift(2,"u")}function Nn(e,t){return t||(t=Se(2)),t.write_shift(2,e),t}function eI(e,t){return Ide(e,t,Dr)}function Dde(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function tI(e,t,r){return r||(r=Se(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Hf(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont",i=sn;if(r&&r.biff>=8&&(sn=1200),!r||r.biff==8){var o=e.read_shift(1);o&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var l=a?e.read_shift(a,s):"";return sn=i,l}function Mde(e){var t=sn;sn=1200;var r=e.read_shift(2),a=e.read_shift(1),s=a&4,i=a&8,o=1+(a&1),l=0,c,u={};i&&(l=e.read_shift(2)),s&&(c=e.read_shift(4));var d=o==2?"dbcs-cont":"sbcs-cont",f=r===0?"":e.read_shift(r,d);return i&&(e.l+=4*l),s&&(e.l+=c),u.t=f,i||(u.raw="<t>"+u.t+"</t>",u.r=u.t),sn=t,u}function Fde(e){var t=e.t||"",r=Se(3+0);r.write_shift(2,t.length),r.write_shift(1,1);var a=Se(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return Qr(s)}function Qo(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Gf(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Qo(e,a,r)}function ml(e,t,r){if(r.biff>5)return Gf(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function rI(e,t,r){return r||(r=Se(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Rde(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Lde(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Sa,"");return a&&(e.l+=24),s}function $de(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Sa,"");return r+o}function Bde(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Lde(e);case"0303000000000000c000000000000046":return $de(e);default:throw new Error("Unsupported Moniker "+r)}}function U0(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Sa,""):"";return r}function lT(e,t){t||(t=Se(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Ude(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,u="",d,f;s&16&&(i=U0(e,r-e.l)),s&128&&(o=U0(e,r-e.l)),(s&257)===257&&(l=U0(e,r-e.l)),(s&257)===1&&(c=Bde(e,r-e.l)),s&8&&(u=U0(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=yN(e)),e.l=r;var m=o||l||c||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),f&&(p.time=f),i&&(p.Tooltip=i),p}function Wde(e){var t=Se(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),lT(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&lT(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function aI(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function nI(e,t){var r=aI(e);return r[3]=0,r}function js(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Jo(e,t,r,a){return a||(a=Se(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function qde(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Kde(e,t,r){return t===0?"":ml(e,t,r)}function zde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function sI(e){var t=e.read_shift(2),r=xN(e);return[t,r]}function Vde(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Hf(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function mp(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function iI(e,t){return t||(t=Se(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function oI(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var Hde=oI;function lI(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function Gde(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Xde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function xa(e){e.l+=2,e.l+=e.read_shift(2)}var Yde={0:xa,4:xa,5:xa,6:xa,7:Xde,8:xa,9:xa,10:xa,11:xa,12:xa,13:Gde,14:xa,15:xa,16:xa,17:xa,18:xa,19:xa,20:xa,21:lI};function Qde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(Yde[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function W0(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function vN(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Se(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Jde(e,t){return t===0||e.read_shift(2),1200}function Zde(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=ml(e,0,r);return e.read_shift(t+a-e.l),s}function efe(e,t){var r=!t||t.biff==8,a=Se(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function tfe(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function rfe(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Hf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function afe(e,t){var r=!t||t.biff>=8?2:1,a=Se(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function nfe(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Mde(e));return i.Count=a,i.Unique=s,i}function sfe(e,t){var r=Se(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=Fde(e[s]);var i=Qr([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function ife(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function ofe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function lfe(e){var t=qde(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function cfe(e){return e.read_shift(2),e.read_shift(4)}function cT(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function ufe(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function dfe(){var e=Se(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function ffe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function mfe(e){var t=Se(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function hfe(){}function xfe(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Hf(e,0,r),a}function pfe(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=Se(s);return i.write_shift(2,(e.sz||12)*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function gfe(e){var t=js(e);return t.isst=e.read_shift(4),t}function yfe(e,t,r,a){var s=Se(10);return Jo(e,t,a,s),s.write_shift(4,r),s}function vfe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=js(e);r.biff==2&&e.l++;var i=Gf(e,a-e.l,r);return s.val=i,s}function bfe(e,t,r,a,s){var i=!s||s.biff==8,o=Se(6+2+ +i+(1+i)*r.length);return Jo(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function wfe(e,t,r){var a=e.read_shift(2),s=ml(e,0,r);return[a,s]}function Nfe(e,t,r,a){var s=r&&r.biff==5;a||(a=Se(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var jfe=ml;function uT(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function Sfe(e,t){var r=t.biff==8||!t.biff?4:2,a=Se(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function Cfe(e){var t=e.read_shift(2),r=e.read_shift(2),a=sI(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function kfe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(sI(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function Ofe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function Tfe(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=lde[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function _fe(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=Tfe(e,t,a.fStyle,r),a}function dT(e,t,r,a){var s=r&&r.biff==5;a||(a=Se(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function Efe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Afe(e){var t=Se(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}function fT(e,t,r){var a=js(e);(r.biff==2||t==9)&&++e.l;var s=Dde(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function Pfe(e,t,r,a,s,i){var o=Se(8);return Jo(e,t,a,o),tI(r,i,o),o}function Ife(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=js(e),s=ja(e);return a.val=s,a}function Dfe(e,t,r,a){var s=Se(14);return Jo(e,t,a,s),Yo(r,s),s}var mT=Kde;function Mfe(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Qo(e,i),l=[];a>e.l;)l.push(Gf(e));return[i,s,o,l]}function hT(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Vde(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Ffe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function xT(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Qo(e,o,r);s&32&&(u=Ffe[u.charCodeAt(0)]);var d=a-e.l;r&&r.biff==2&&--d;var f=a==e.l||l===0||!(d>0)?[]:Qxe(e,d,r,l);return{chKey:i,Name:u,itab:c,rgce:f}}function cI(e,t,r){if(r.biff<8)return Rfe(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(zde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function Rfe(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Hf(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function Lfe(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Qo(e,a,r),o=Qo(e,s,r);return[i,o]}function $fe(e,t,r){var a=oI(e);e.l++;var s=e.read_shift(1);return t-=8,[Jxe(e,t,r),s,a]}function pT(e,t,r){var a=Hde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,Xxe(e,t,r)]}function Bfe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function Ufe(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=ml(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function Wfe(e,t,r){return Ufe(e,t,r)}function qfe(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(mp(e));return r}function Kfe(e){var t=Se(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)iI(e[r],t);return t}function zfe(e,t,r){if(r&&r.biff<8)return Hfe(e,t,r);var a=lI(e),s=Qde(e,t-22,a[1]);return{cmo:a,ft:s}}var Vfe={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function Hfe(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Vfe[a]||Oa)(e,t,r)),{cmo:[s,a,i],ft:o}}function Gfe(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Rde(e,6,r);var l=e.read_shift(2);e.read_shift(2),Dr(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Qo(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Xfe(e,t){var r=mp(e);e.l+=16;var a=Ude(e,t-24);return[r,a]}function Yfe(e){var t=Se(24),r=hr(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return Qr([t,Wde(e[1])])}function Qfe(e,t){e.read_shift(2);var r=mp(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Sa,""),[r,a]}function Jfe(e){var t=e[1].Tooltip,r=Se(10+2*(t.length+1));r.write_shift(2,2048);var a=hr(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Zfe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=eT[r]||r,r=e.read_shift(2),t[1]=eT[r]||r,t}function e0e(e){return e||(e=Se(4)),e.write_shift(2,1),e.write_shift(2,1),e}function t0e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nI(e));return r}function r0e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nI(e));return r}function a0e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function uI(e,t,r){if(!r.cellStyles)return Oa(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function n0e(e,t){var r=Se(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function s0e(e,t){var r={};return t<32||(e.l+=16,r.header=ja(e),r.footer=ja(e),e.l+=2),r}function i0e(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function o0e(e){for(var t=Se(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var l0e=js,c0e=eI,u0e=Gf;function d0e(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function f0e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=js(e);++e.l;var s=ml(e,t-7,r);return a.t="str",a.val=s,a}function m0e(e){var t=js(e);++e.l;var r=ja(e);return t.t="n",t.val=r,t}function h0e(e,t,r){var a=Se(15);return Jf(a,e,t),a.write_shift(8,r,"f"),a}function x0e(e){var t=js(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function p0e(e,t,r){var a=Se(9);return Jf(a,e,t),a.write_shift(2,r),a}function g0e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function y0e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function v0e(e,t,r){var a=e.l+t,s=js(e),i=e.read_shift(2),o=Qo(e,i,r);return e.l=a,s.t="str",s.val=o,s}var b0e=[2,3,48,49,131,139,140,245],Tb=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=cp({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Ri(1);switch(c.type){case"base64":d=tn(un(l));break;case"binary":d=tn(l);break;case"buffer":case"array":d=l;break}oa(d,0);var f=d.read_shift(1),m=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var h=0,y=521;f==2&&(h=d.read_shift(2)),d.l+=3,f!=2&&(h=d.read_shift(4)),h>1048576&&(h=1e6),f!=2&&(y=d.read_shift(2));var w=d.read_shift(2),S=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(S=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var v=[],x={},b=Math.min(d.length,f==2?521:y-10-(p?264:0)),N=g?32:11;d.l<b&&d[d.l]!=13;)switch(x={},x.name=_t.utils.decode(S,d.slice(d.l,d.l+N)).replace(/[\u0000\r\n].*$/g,""),d.l+=N,x.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(x.offset=d.read_shift(4)),x.len=d.read_shift(1),f==2&&(x.offset=d.read_shift(2)),x.dec=d.read_shift(1),x.name.length&&v.push(x),f!=2&&(d.l+=g?13:14),x.type){case"B":(!p||x.len!=8)&&c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+x.type)}if(d[d.l]!==13&&(d.l=y-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=y;var j=0,O=0;for(u[0]=[],O=0;O!=v.length;++O)u[0][O]=v[O].name;for(;h-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,u[++j]=[],O=0,O=0;O!=v.length;++O){var _=d.slice(d.l,d.l+v[O].len);d.l+=v[O].len,oa(_,0);var E=_t.utils.decode(S,_);switch(v[O].type){case"C":E.trim().length&&(u[j][O]=E.replace(/\s+$/,""));break;case"D":E.length===8?u[j][O]=new Date(+E.slice(0,4),+E.slice(4,6)-1,+E.slice(6,8)):u[j][O]=E;break;case"F":u[j][O]=parseFloat(E.trim());break;case"+":case"I":u[j][O]=g?_.read_shift(-4,"i")^2147483648:_.read_shift(4,"i");break;case"L":switch(E.trim().toUpperCase()){case"Y":case"T":u[j][O]=!0;break;case"N":case"F":u[j][O]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+E+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][O]="##MEMO##"+(g?parseInt(E.trim(),10):_.read_shift(4));break;case"N":E=E.replace(/\u0000/g,"").trim(),E&&E!="."&&(u[j][O]=+E||0);break;case"@":u[j][O]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":u[j][O]=new Date((_.read_shift(4)-2440588)*864e5+_.read_shift(4));break;case"Y":u[j][O]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][O]=-_.read_shift(-8,"f");break;case"B":if(p&&v[O].len==8){u[j][O]=_.read_shift(8,"f");break}case"G":case"P":_.l+=v[O].len;break;case"0":if(v[O].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+v[O].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=v,u}function a(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=su(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(l,c){try{return to(a(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Tn(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=za(),f=Qh(l,{header:1,raw:!0,cellDates:!0}),m=f[0],p=f.slice(1),g=l["!cols"]||[],h=0,y=0,w=0,S=1;for(h=0;h<m.length;++h){if(((g[h]||{}).DBF||{}).name){m[h]=g[h].DBF.name,++w;continue}if(m[h]!=null){if(++w,typeof m[h]=="number"&&(m[h]=m[h].toString(10)),typeof m[h]!="string")throw new Error("DBF Invalid column name "+m[h]+" |"+typeof m[h]+"|");if(m.indexOf(m[h])!==h){for(y=0;y<1024;++y)if(m.indexOf(m[h]+"_"+y)==-1){m[h]+="_"+y;break}}}}var v=Ct(l["!ref"]),x=[],b=[],N=[];for(h=0;h<=v.e.c-v.s.c;++h){var j="",O="",_=0,E=[];for(y=0;y<p.length;++y)p[y][h]!=null&&E.push(p[y][h]);if(E.length==0||m[h]==null){x[h]="?";continue}for(y=0;y<E.length;++y){switch(typeof E[y]){case"number":O="B";break;case"string":O="C";break;case"boolean":O="L";break;case"object":O=E[y]instanceof Date?"D":"C";break;default:O="C"}_=Math.max(_,String(E[y]).length),j=j&&j!=O?"C":O}_>250&&(_=250),O=((g[h]||{}).DBF||{}).type,O=="C"&&g[h].DBF.len>_&&(_=g[h].DBF.len),j=="B"&&O=="N"&&(j="N",N[h]=g[h].DBF.dec,_=g[h].DBF.len),b[h]=j=="C"||O=="N"?_:i[j]||0,S+=b[h],x[h]=j}var k=d.next(32);for(k.write_shift(4,318902576),k.write_shift(4,p.length),k.write_shift(2,296+32*w),k.write_shift(2,S),h=0;h<4;++h)k.write_shift(4,0);for(k.write_shift(4,0|(+t[Ho]||3)<<8),h=0,y=0;h<m.length;++h)if(m[h]!=null){var C=d.next(32),A=(m[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,A,"sbcs"),C.write_shift(1,x[h]=="?"?"C":x[h],"sbcs"),C.write_shift(4,y),C.write_shift(1,b[h]||i[x[h]]||0),C.write_shift(1,N[h]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),y+=b[h]||i[x[h]]||0}var P=d.next(264);for(P.write_shift(4,13),h=0;h<65;++h)P.write_shift(4,0);for(h=0;h<p.length;++h){var I=d.next(S);for(I.write_shift(1,0),y=0;y<m.length;++y)if(m[y]!=null)switch(x[y]){case"L":I.write_shift(1,p[h][y]==null?63:p[h][y]?84:70);break;case"B":I.write_shift(8,p[h][y]||0,"f");break;case"N":var F="0";for(typeof p[h][y]=="number"&&(F=p[h][y].toFixed(N[y]||0)),w=0;w<b[y]-F.length;++w)I.write_shift(1,32);I.write_shift(1,F,"sbcs");break;case"D":p[h][y]?(I.write_shift(4,("0000"+p[h][y].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(p[h][y].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+p[h][y].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var q=String(p[h][y]!=null?p[h][y]:"").slice(0,b[y]);for(I.write_shift(1,q,"sbcs"),w=0;w<b[y]-q.length;++w)I.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}}(),dI=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+jr(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var g=e[p];return typeof g=="number"?bb(g):g},a=function(m,p,g){var h=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return h==59?m:bb(h)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(un(m),p);case"binary":return i(m,p);case"buffer":return i(pt&&Buffer.isBuffer(m)?m.toString("binary"):eo(m),p);case"array":return i(Xo(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var g=m.split(/[\n\r]+/),h=-1,y=-1,w=0,S=0,v=[],x=[],b=null,N={},j=[],O=[],_=[],E=0,k;for(+p.codepage>=0&&Tn(+p.codepage);w!==g.length;++w){E=0;var C=g[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),A=C.replace(/;;/g,"\0").split(";").map(function(X){return X.replace(/\u0000/g,";")}),P=A[0],I;if(C.length>0)switch(P){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":A[1].charAt(0)=="P"&&x.push(C.slice(3).replace(/;;/g,";"));break;case"C":var F=!1,q=!1,H=!1,V=!1,re=-1,oe=-1;for(S=1;S<A.length;++S)switch(A[S].charAt(0)){case"A":break;case"X":y=parseInt(A[S].slice(1))-1,q=!0;break;case"Y":for(h=parseInt(A[S].slice(1))-1,q||(y=0),k=v.length;k<=h;++k)v[k]=[];break;case"K":I=A[S].slice(1),I.charAt(0)==='"'?I=I.slice(1,I.length-1):I==="TRUE"?I=!0:I==="FALSE"?I=!1:isNaN(ts(I))?isNaN(Fc(I).getDate())||(I=lr(I)):(I=ts(I),b!==null&&ol(b)&&(I=dp(I))),typeof _t<"u"&&typeof I=="string"&&(p||{}).type!="string"&&(p||{}).codepage&&(I=_t.utils.decode(p.codepage,I)),F=!0;break;case"E":V=!0;var U=ac(A[S].slice(1),{r:h,c:y});v[h][y]=[v[h][y],U];break;case"S":H=!0,v[h][y]=[v[h][y],"S5S"];break;case"G":break;case"R":re=parseInt(A[S].slice(1))-1;break;case"C":oe=parseInt(A[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+C)}if(F&&(v[h][y]&&v[h][y].length==2?v[h][y][0]=I:v[h][y]=I,b=null),H){if(V)throw new Error("SYLK shared formula cannot have own formula");var J=re>-1&&v[re][oe];if(!J||!J[1])throw new Error("SYLK shared formula cannot find base");v[h][y][1]=_I(J[1],{r:h-re,c:y-oe})}break;case"F":var Q=0;for(S=1;S<A.length;++S)switch(A[S].charAt(0)){case"X":y=parseInt(A[S].slice(1))-1,++Q;break;case"Y":for(h=parseInt(A[S].slice(1))-1,k=v.length;k<=h;++k)v[k]=[];break;case"M":E=parseInt(A[S].slice(1))/20;break;case"F":break;case"G":break;case"P":b=x[parseInt(A[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(_=A[S].slice(1).split(" "),k=parseInt(_[0],10);k<=parseInt(_[1],10);++k)E=parseInt(_[2],10),O[k-1]=E===0?{hidden:!0}:{wch:E},Li(O[k-1]);break;case"C":y=parseInt(A[S].slice(1))-1,O[y]||(O[y]={});break;case"R":h=parseInt(A[S].slice(1))-1,j[h]||(j[h]={}),E>0?(j[h].hpt=E,j[h].hpx=Lc(E)):E===0&&(j[h].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+C)}Q<1&&(b=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+C)}}return j.length>0&&(N["!rows"]=j),O.length>0&&(N["!cols"]=O),p&&p.sheetRows&&(v=v.slice(0,p.sheetRows)),[v,N]}function o(m,p){var g=s(m,p),h=g[0],y=g[1],w=su(h,p);return jr(y).forEach(function(S){w[S]=y[S]}),w}function l(m,p){return to(o(m,p),p)}function c(m,p,g,h){var y="C;Y"+(g+1)+";X"+(h+1)+";K";switch(m.t){case"n":y+=m.v||0,m.f&&!m.F&&(y+=";E"+CN(m.f,{r:g,c:h}));break;case"b":y+=m.v?"TRUE":"FALSE";break;case"e":y+=m.w||m.v;break;case"d":y+='"'+(m.w||m.v)+'"';break;case"s":y+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(m,p){p.forEach(function(g,h){var y="F;W"+(h+1)+" "+(h+1)+" ";g.hidden?y+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=vf(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=bf(g.wpx)),typeof g.wch=="number"&&(y+=Math.round(g.wch))),y.charAt(y.length-1)!=" "&&m.push(y)})}function d(m,p){p.forEach(function(g,h){var y="F;";g.hidden?y+="M0;":g.hpt?y+="M"+20*g.hpt+";":g.hpx&&(y+="M"+20*wf(g.hpx)+";"),y.length>2&&m.push(y+"R"+(h+1))})}function f(m,p){var g=["ID;PWXL;N;E"],h=[],y=Ct(m["!ref"]),w,S=Array.isArray(m),v=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),m["!cols"]&&u(g,m["!cols"]),m["!rows"]&&d(g,m["!rows"]),g.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var x=y.s.r;x<=y.e.r;++x)for(var b=y.s.c;b<=y.e.c;++b){var N=ot({r:x,c:b});w=S?(m[x]||[])[b]:m[N],!(!w||w.v==null&&(!w.f||w.F))&&h.push(c(w,m,x,b))}return g.join(v)+v+h.join(v)+v+"E"+v}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),fI=function(){function e(i,o){switch(o.type){case"base64":return t(un(i),o);case"binary":return t(i,o);case"buffer":return t(pt&&Buffer.isBuffer(i)?i.toString("binary"):eo(i),o);case"array":return t(Xo(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var m=l[d].trim().split(","),p=m[0],g=m[1];++d;for(var h=l[d]||"";(h.match(/["]/g)||[]).length&1&&d<l.length-1;)h+=`
`+l[++d];switch(h=h.trim(),+p){case-1:if(h==="BOT"){f[++c]=[],u=0;continue}else if(h!=="EOD")throw new Error("Unrecognized DIF special command "+h);break;case 0:h==="TRUE"?f[c][u]=!0:h==="FALSE"?f[c][u]=!1:isNaN(ts(g))?isNaN(Fc(g).getDate())?f[c][u]=g:f[c][u]=lr(g):f[c][u]=ts(g),++u;break;case 1:h=h.slice(1,h.length-1),h=h.replace(/""/g,'"'),h&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),f[c][u++]=h!==""?h:null;break}if(h==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return su(e(i,o),o)}function a(i,o){return to(r(i,o),o)}var s=function(){var i=function(c,u,d,f,m){c.push(u),c.push(d+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Ct(c["!ref"]),f,m=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var h=ot({r:p,c:g});if(f=m?(c[p]||[])[g]:c[h],!f){o(u,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,y,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=dn(f.z||tt[14],zr(lr(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var w=`\r
`,S=u.join(w);return S}}();return{to_workbook:a,to_sheet:r,from_sheet:s}}(),mI=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,m){for(var p=f.split(`
`),g=-1,h=-1,y=0,w=[];y!==p.length;++y){var S=p[y].trim().split(":");if(S[0]==="cell"){var v=hr(S[1]);if(w.length<=v.r)for(g=w.length;g<=v.r;++g)w[g]||(w[g]=[]);switch(g=v.r,h=v.c,S[2]){case"t":w[g][h]=e(S[3]);break;case"v":w[g][h]=+S[3];break;case"vtf":var x=S[S.length-1];case"vtc":switch(S[3]){case"nl":w[g][h]=!!+S[4];break;default:w[g][h]=+S[4];break}S[2]=="vtf"&&(w[g][h]=[w[g][h],x])}}}return m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),w}function a(f,m){return su(r(f,m),m)}function s(f,m){return to(a(f,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var m=[],p=[],g,h="",y=Ma(f["!ref"]),w=Array.isArray(f),S=y.s.r;S<=y.e.r;++S)for(var v=y.s.c;v<=y.e.c;++v)if(h=ot({r:S,c:v}),g=w?(f[S]||[])[v]:f[h],!(!g||g.v==null||g.t==="z")){switch(p=["cell",h,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var x=zr(lr(g.v));p[2]="vtc",p[3]="nd",p[4]=""+x,p[5]=g.w||dn(g.z||tt[14],x);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[i,o,l,o,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:d}}(),Rc=function(){function e(d,f,m,p,g){g.raw?f[m][p]=d:d===""||(d==="TRUE"?f[m][p]=!0:d==="FALSE"?f[m][p]=!1:isNaN(ts(d))?isNaN(Fc(d).getDate())?f[m][p]=d:f[m][p]=lr(d):f[m][p]=ts(d))}function t(d,f){var m=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),h=g.length-1;h>=0&&g[h].length===0;)--h;for(var y=10,w=0,S=0;S<=h;++S)w=g[S].indexOf(" "),w==-1?w=g[S].length:w++,y=Math.max(y,w);for(S=0;S<=h;++S){p[S]=[];var v=0;for(e(g[S].slice(0,y).trim(),p,S,v,m),v=1;v<=(g[S].length-y)/10+1;++v)e(g[S].slice(y+(v-1)*10,y+v*10).trim(),p,S,v,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(d){for(var f={},m=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?m=!m:!m&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=a;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(h,y){return h[0]-y[0]||a[h[1]]-a[y[1]]}),r[g.pop()[1]]||44}function i(d,f){var m=f||{},p="",g=m.dense?[]:{},h={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=s(d.slice(0,1024)):m&&m.FS?p=m.FS:p=s(d.slice(0,1024));var y=0,w=0,S=0,v=0,x=0,b=p.charCodeAt(0),N=!1,j=0,O=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var _=m.dateNF!=null?iue(m.dateNF):null;function E(){var k=d.slice(v,x),C={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)C.t="z";else if(m.raw)C.t="s",C.v=k;else if(k.trim().length===0)C.t="s",C.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(C.t="s",C.v=k.slice(2,-1).replace(/""/g,'"')):Mhe(k)?(C.t="n",C.f=k.slice(1)):(C.t="s",C.v=k);else if(k=="TRUE")C.t="b",C.v=!0;else if(k=="FALSE")C.t="b",C.v=!1;else if(!isNaN(S=ts(k)))C.t="n",m.cellText!==!1&&(C.w=k),C.v=S;else if(!isNaN(Fc(k).getDate())||_&&k.match(_)){C.z=m.dateNF||tt[14];var A=0;_&&k.match(_)&&(k=oue(k,m.dateNF,k.match(_)||[]),A=1),m.cellDates?(C.t="d",C.v=lr(k,A)):(C.t="n",C.v=zr(lr(k,A))),m.cellText!==!1&&(C.w=dn(C.z,C.v instanceof Date?zr(C.v):C.v)),m.cellNF||delete C.z}else C.t="s",C.v=k;if(C.t=="z"||(m.dense?(g[y]||(g[y]=[]),g[y][w]=C):g[ot({c:w,r:y})]=C),v=x+1,O=d.charCodeAt(v),h.e.c<w&&(h.e.c=w),h.e.r<y&&(h.e.r=y),j==b)++w;else if(w=0,++y,m.sheetRows&&m.sheetRows<=y)return!0}e:for(;x<d.length;++x)switch(j=d.charCodeAt(x)){case 34:O===34&&(N=!N);break;case b:case 10:case 13:if(!N&&E())break e;break}return x-v>0&&E(),g["!ref"]=mt(h),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):su(t(d,f),f)}function l(d,f){var m="",p=f.type=="string"?[0,0,0,0]:DN(d,f);switch(f.type){case"base64":m=un(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof _t<"u"?m=_t.utils.decode(f.codepage,d):m=pt&&Buffer.isBuffer(d)?d.toString("binary"):eo(d);break;case"array":m=Xo(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Ht(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=Ht(m):f.type=="binary"&&typeof _t<"u"&&f.codepage&&(m=_t.utils.decode(f.codepage,_t.utils.encode(28591,m))),m.slice(0,19)=="socialcalc:version:"?mI.to_sheet(f.type=="string"?m:Ht(m),f):o(m,f)}function c(d,f){return to(l(d,f),f)}function u(d){for(var f=[],m=Ct(d["!ref"]),p,g=Array.isArray(d),h=m.s.r;h<=m.e.r;++h){for(var y=[],w=m.s.c;w<=m.e.c;++w){var S=ot({r:h,c:w});if(p=g?(d[h]||[])[w]:d[S],!p||p.v==null){y.push("          ");continue}for(var v=(p.w||(bs(p),p.w)||"").slice(0,10);v.length<10;)v+=" ";y.push(v+(w===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function w0e(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=dI.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Rc.to_workbook(e,t)}}var Po=function(){function e(U,J,Q){if(U){oa(U,U.l||0);for(var X=Q.Enum||re;U.l<U.length;){var ee=U.read_shift(2),ue=X[ee]||X[65535],we=U.read_shift(2),ne=U.l+we,ie=ue.f&&ue.f(U,we,Q);if(U.l=ne,J(ie,ue,ee))return}}}function t(U,J){switch(J.type){case"base64":return r(tn(un(U)),J);case"binary":return r(tn(U),J);case"buffer":case"array":return r(U,J)}throw"Unsupported type "+J.type}function r(U,J){if(!U)return U;var Q=J||{},X=Q.dense?[]:{},ee="Sheet1",ue="",we=0,ne={},ie=[],Ne=[],W={s:{r:0,c:0},e:{r:0,c:0}},Ee=Q.sheetRows||0;if(U[2]==0&&(U[3]==8||U[3]==9)&&U.length>=16&&U[14]==5&&U[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(U[2]==2)Q.Enum=re,e(U,function(fe,et,Ke){switch(Ke){case 0:Q.vers=fe,fe>=4096&&(Q.qpro=!0);break;case 6:W=fe;break;case 204:fe&&(ue=fe);break;case 222:ue=fe;break;case 15:case 51:Q.qpro||(fe[1].v=fe[1].v.slice(1));case 13:case 14:case 16:Ke==14&&(fe[2]&112)==112&&(fe[2]&15)>1&&(fe[2]&15)<15&&(fe[1].z=Q.dateNF||tt[14],Q.cellDates&&(fe[1].t="d",fe[1].v=dp(fe[1].v))),Q.qpro&&fe[3]>we&&(X["!ref"]=mt(W),ne[ee]=X,ie.push(ee),X=Q.dense?[]:{},W={s:{r:0,c:0},e:{r:0,c:0}},we=fe[3],ee=ue||"Sheet"+(we+1),ue="");var gt=Q.dense?(X[fe[0].r]||[])[fe[0].c]:X[ot(fe[0])];if(gt){gt.t=fe[1].t,gt.v=fe[1].v,fe[1].z!=null&&(gt.z=fe[1].z),fe[1].f!=null&&(gt.f=fe[1].f);break}Q.dense?(X[fe[0].r]||(X[fe[0].r]=[]),X[fe[0].r][fe[0].c]=fe[1]):X[ot(fe[0])]=fe[1];break}},Q);else if(U[2]==26||U[2]==14)Q.Enum=oe,U[2]==14&&(Q.qpro=!0,U.l=0),e(U,function(fe,et,Ke){switch(Ke){case 204:ee=fe;break;case 22:fe[1].v=fe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(fe[3]>we&&(X["!ref"]=mt(W),ne[ee]=X,ie.push(ee),X=Q.dense?[]:{},W={s:{r:0,c:0},e:{r:0,c:0}},we=fe[3],ee="Sheet"+(we+1)),Ee>0&&fe[0].r>=Ee)break;Q.dense?(X[fe[0].r]||(X[fe[0].r]=[]),X[fe[0].r][fe[0].c]=fe[1]):X[ot(fe[0])]=fe[1],W.e.c<fe[0].c&&(W.e.c=fe[0].c),W.e.r<fe[0].r&&(W.e.r=fe[0].r);break;case 27:fe[14e3]&&(Ne[fe[14e3][0]]=fe[14e3][1]);break;case 1537:Ne[fe[0]]=fe[1],fe[0]==we&&(ee=fe[1]);break}},Q);else throw new Error("Unrecognized LOTUS BOF "+U[2]);if(X["!ref"]=mt(W),ne[ue||ee]=X,ie.push(ue||ee),!Ne.length)return{SheetNames:ie,Sheets:ne};for(var B={},ve=[],ye=0;ye<Ne.length;++ye)ne[ie[ye]]?(ve.push(Ne[ye]||ie[ye]),B[Ne[ye]]=ne[Ne[ye]]||ne[ie[ye]]):(ve.push(Ne[ye]),B[Ne[ye]]={"!ref":"A1"});return{SheetNames:ve,Sheets:B}}function a(U,J){var Q=J||{};if(+Q.codepage>=0&&Tn(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK1 to JS string");var X=za(),ee=Ct(U["!ref"]),ue=Array.isArray(U),we=[];$e(X,0,i(1030)),$e(X,6,c(ee));for(var ne=Math.min(ee.e.r,8191),ie=ee.s.r;ie<=ne;++ie)for(var Ne=br(ie),W=ee.s.c;W<=ee.e.c;++W){ie===ee.s.r&&(we[W]=or(W));var Ee=we[W]+Ne,B=ue?(U[ie]||[])[W]:U[Ee];if(!(!B||B.t=="z"))if(B.t=="n")(B.v|0)==B.v&&B.v>=-32768&&B.v<=32767?$e(X,13,p(ie,W,B.v)):$e(X,14,h(ie,W,B.v));else{var ve=bs(B);$e(X,15,f(ie,W,ve.slice(0,239)))}}return $e(X,1),X.end()}function s(U,J){var Q=J||{};if(+Q.codepage>=0&&Tn(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK3 to JS string");var X=za();$e(X,0,o(U));for(var ee=0,ue=0;ee<U.SheetNames.length;++ee)(U.Sheets[U.SheetNames[ee]]||{})["!ref"]&&$e(X,27,V(U.SheetNames[ee],ue++));var we=0;for(ee=0;ee<U.SheetNames.length;++ee){var ne=U.Sheets[U.SheetNames[ee]];if(!(!ne||!ne["!ref"])){for(var ie=Ct(ne["!ref"]),Ne=Array.isArray(ne),W=[],Ee=Math.min(ie.e.r,8191),B=ie.s.r;B<=Ee;++B)for(var ve=br(B),ye=ie.s.c;ye<=ie.e.c;++ye){B===ie.s.r&&(W[ye]=or(ye));var fe=W[ye]+ve,et=Ne?(ne[B]||[])[ye]:ne[fe];if(!(!et||et.t=="z"))if(et.t=="n")$e(X,23,E(B,ye,we,et.v));else{var Ke=bs(et);$e(X,22,j(B,ye,we,Ke.slice(0,239)))}}++we}}return $e(X,1),X.end()}function i(U){var J=Se(2);return J.write_shift(2,U),J}function o(U){var J=Se(26);J.write_shift(2,4096),J.write_shift(2,4),J.write_shift(4,0);for(var Q=0,X=0,ee=0,ue=0;ue<U.SheetNames.length;++ue){var we=U.SheetNames[ue],ne=U.Sheets[we];if(!(!ne||!ne["!ref"])){++ee;var ie=Ma(ne["!ref"]);Q<ie.e.r&&(Q=ie.e.r),X<ie.e.c&&(X=ie.e.c)}}return Q>8191&&(Q=8191),J.write_shift(2,Q),J.write_shift(1,ee),J.write_shift(1,X),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(1,1),J.write_shift(1,2),J.write_shift(4,0),J.write_shift(4,0),J}function l(U,J,Q){var X={s:{c:0,r:0},e:{c:0,r:0}};return J==8&&Q.qpro?(X.s.c=U.read_shift(1),U.l++,X.s.r=U.read_shift(2),X.e.c=U.read_shift(1),U.l++,X.e.r=U.read_shift(2),X):(X.s.c=U.read_shift(2),X.s.r=U.read_shift(2),J==12&&Q.qpro&&(U.l+=2),X.e.c=U.read_shift(2),X.e.r=U.read_shift(2),J==12&&Q.qpro&&(U.l+=2),X.s.c==65535&&(X.s.c=X.e.c=X.s.r=X.e.r=0),X)}function c(U){var J=Se(8);return J.write_shift(2,U.s.c),J.write_shift(2,U.s.r),J.write_shift(2,U.e.c),J.write_shift(2,U.e.r),J}function u(U,J,Q){var X=[{c:0,r:0},{t:"n",v:0},0,0];return Q.qpro&&Q.vers!=20768?(X[0].c=U.read_shift(1),X[3]=U.read_shift(1),X[0].r=U.read_shift(2),U.l+=2):(X[2]=U.read_shift(1),X[0].c=U.read_shift(2),X[0].r=U.read_shift(2)),X}function d(U,J,Q){var X=U.l+J,ee=u(U,J,Q);if(ee[1].t="s",Q.vers==20768){U.l++;var ue=U.read_shift(1);return ee[1].v=U.read_shift(ue,"utf8"),ee}return Q.qpro&&U.l++,ee[1].v=U.read_shift(X-U.l,"cstr"),ee}function f(U,J,Q){var X=Se(7+Q.length);X.write_shift(1,255),X.write_shift(2,J),X.write_shift(2,U),X.write_shift(1,39);for(var ee=0;ee<X.length;++ee){var ue=Q.charCodeAt(ee);X.write_shift(1,ue>=128?95:ue)}return X.write_shift(1,0),X}function m(U,J,Q){var X=u(U,J,Q);return X[1].v=U.read_shift(2,"i"),X}function p(U,J,Q){var X=Se(7);return X.write_shift(1,255),X.write_shift(2,J),X.write_shift(2,U),X.write_shift(2,Q,"i"),X}function g(U,J,Q){var X=u(U,J,Q);return X[1].v=U.read_shift(8,"f"),X}function h(U,J,Q){var X=Se(13);return X.write_shift(1,255),X.write_shift(2,J),X.write_shift(2,U),X.write_shift(8,Q,"f"),X}function y(U,J,Q){var X=U.l+J,ee=u(U,J,Q);if(ee[1].v=U.read_shift(8,"f"),Q.qpro)U.l=X;else{var ue=U.read_shift(2);x(U.slice(U.l,U.l+ue),ee),U.l+=ue}return ee}function w(U,J,Q){var X=J&32768;return J&=-32769,J=(X?U:0)+(J>=8192?J-16384:J),(X?"":"$")+(Q?or(J):br(J))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},v=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function x(U,J){oa(U,0);for(var Q=[],X=0,ee="",ue="",we="",ne="";U.l<U.length;){var ie=U[U.l++];switch(ie){case 0:Q.push(U.read_shift(8,"f"));break;case 1:ue=w(J[0].c,U.read_shift(2),!0),ee=w(J[0].r,U.read_shift(2),!1),Q.push(ue+ee);break;case 2:{var Ne=w(J[0].c,U.read_shift(2),!0),W=w(J[0].r,U.read_shift(2),!1);ue=w(J[0].c,U.read_shift(2),!0),ee=w(J[0].r,U.read_shift(2),!1),Q.push(Ne+W+":"+ue+ee)}break;case 3:if(U.l<U.length){console.error("WK1 premature formula end");return}break;case 4:Q.push("("+Q.pop()+")");break;case 5:Q.push(U.read_shift(2));break;case 6:{for(var Ee="";ie=U[U.l++];)Ee+=String.fromCharCode(ie);Q.push('"'+Ee.replace(/"/g,'""')+'"')}break;case 8:Q.push("-"+Q.pop());break;case 23:Q.push("+"+Q.pop());break;case 22:Q.push("NOT("+Q.pop()+")");break;case 20:case 21:ne=Q.pop(),we=Q.pop(),Q.push(["AND","OR"][ie-20]+"("+we+","+ne+")");break;default:if(ie<32&&v[ie])ne=Q.pop(),we=Q.pop(),Q.push(we+v[ie]+ne);else if(S[ie]){if(X=S[ie][1],X==69&&(X=U[U.l++]),X>Q.length){console.error("WK1 bad formula parse 0x"+ie.toString(16)+":|"+Q.join("|")+"|");return}var B=Q.slice(-X);Q.length-=X,Q.push(S[ie][0]+"("+B.join(",")+")")}else return ie<=7?console.error("WK1 invalid opcode "+ie.toString(16)):ie<=24?console.error("WK1 unsupported op "+ie.toString(16)):ie<=30?console.error("WK1 invalid opcode "+ie.toString(16)):ie<=115?console.error("WK1 unsupported function opcode "+ie.toString(16)):console.error("WK1 unrecognized opcode "+ie.toString(16))}}Q.length==1?J[1].f=""+Q[0]:console.error("WK1 bad formula parse |"+Q.join("|")+"|")}function b(U){var J=[{c:0,r:0},{t:"n",v:0},0];return J[0].r=U.read_shift(2),J[3]=U[U.l++],J[0].c=U[U.l++],J}function N(U,J){var Q=b(U);return Q[1].t="s",Q[1].v=U.read_shift(J-4,"cstr"),Q}function j(U,J,Q,X){var ee=Se(6+X.length);ee.write_shift(2,U),ee.write_shift(1,Q),ee.write_shift(1,J),ee.write_shift(1,39);for(var ue=0;ue<X.length;++ue){var we=X.charCodeAt(ue);ee.write_shift(1,we>=128?95:we)}return ee.write_shift(1,0),ee}function O(U,J){var Q=b(U);Q[1].v=U.read_shift(2);var X=Q[1].v>>1;if(Q[1].v&1)switch(X&7){case 0:X=(X>>3)*5e3;break;case 1:X=(X>>3)*500;break;case 2:X=(X>>3)/20;break;case 3:X=(X>>3)/200;break;case 4:X=(X>>3)/2e3;break;case 5:X=(X>>3)/2e4;break;case 6:X=(X>>3)/16;break;case 7:X=(X>>3)/64;break}return Q[1].v=X,Q}function _(U,J){var Q=b(U),X=U.read_shift(4),ee=U.read_shift(4),ue=U.read_shift(2);if(ue==65535)return X===0&&ee===3221225472?(Q[1].t="e",Q[1].v=15):X===0&&ee===3489660928?(Q[1].t="e",Q[1].v=42):Q[1].v=0,Q;var we=ue&32768;return ue=(ue&32767)-16446,Q[1].v=(1-we*2)*(ee*Math.pow(2,ue+32)+X*Math.pow(2,ue)),Q}function E(U,J,Q,X){var ee=Se(14);if(ee.write_shift(2,U),ee.write_shift(1,Q),ee.write_shift(1,J),X==0)return ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(2,65535),ee;var ue=0,we=0,ne=0,ie=0;return X<0&&(ue=1,X=-X),we=Math.log2(X)|0,X/=Math.pow(2,we-31),ie=X>>>0,ie&2147483648||(X/=2,++we,ie=X>>>0),X-=ie,ie|=2147483648,ie>>>=0,X*=Math.pow(2,32),ne=X>>>0,ee.write_shift(4,ne),ee.write_shift(4,ie),we+=16383+(ue?32768:0),ee.write_shift(2,we),ee}function k(U,J){var Q=_(U);return U.l+=J-14,Q}function C(U,J){var Q=b(U),X=U.read_shift(4);return Q[1].v=X>>6,Q}function A(U,J){var Q=b(U),X=U.read_shift(8,"f");return Q[1].v=X,Q}function P(U,J){var Q=A(U);return U.l+=J-10,Q}function I(U,J){return U[U.l+J-1]==0?U.read_shift(J,"cstr"):""}function F(U,J){var Q=U[U.l++];Q>J-1&&(Q=J-1);for(var X="";X.length<Q;)X+=String.fromCharCode(U[U.l++]);return X}function q(U,J,Q){if(!(!Q.qpro||J<21)){var X=U.read_shift(1);U.l+=17,U.l+=1,U.l+=2;var ee=U.read_shift(J-21,"cstr");return[X,ee]}}function H(U,J){for(var Q={},X=U.l+J;U.l<X;){var ee=U.read_shift(2);if(ee==14e3){for(Q[ee]=[0,""],Q[ee][0]=U.read_shift(2);U[U.l];)Q[ee][1]+=String.fromCharCode(U[U.l]),U.l++;U.l++}}return Q}function V(U,J){var Q=Se(5+U.length);Q.write_shift(2,14e3),Q.write_shift(2,J);for(var X=0;X<U.length;++X){var ee=U.charCodeAt(X);Q[Q.l++]=ee>127?95:ee}return Q[Q.l++]=0,Q}var re={0:{n:"BOF",f:Dr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:I},222:{n:"SHEETNAMELP",f:F},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:_},24:{n:"NUMBER18",f:O},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:C},38:{n:"??"},39:{n:"NUMBER27",f:A},40:{n:"FORMULA28",f:P},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:I},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}}();function N0e(e){var t={},r=e.match(_a),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=lt(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=Gw[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var j0e=function(){var e=hf("t"),t=hf("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Pt(o[1])},c=i.match(t);return c&&(l.s=N0e(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}}(),S0e=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),C0e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,k0e=/<(?:\w+:)?r>/,O0e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function bN(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Pt(Ht(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Ht(e),r&&(a.h=rN(a.t))):e.match(k0e)&&(a.r=Ht(e),a.t=Pt(Ht((e.replace(O0e,"").match(C0e)||[]).join("").replace(_a,""))),r&&(a.h=S0e(j0e(a.r)))),a):{t:""}}var T0e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_0e=/<(?:\w+:)?(?:si|sstItem)>/g,E0e=/<\/(?:\w+:)?(?:si|sstItem)>/;function A0e(e,t){var r=[],a="";if(!e)return r;var s=e.match(T0e);if(s){a=s[2].replace(_0e,"").split(E0e);for(var i=0;i!=a.length;++i){var o=bN(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=lt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var P0e=/^\s|\s$|[\t\n\r]/;function hI(e,t){if(!t.bookSST)return"";var r=[_r];r[r.length]=Re("sst",null,{xmlns:ll[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(P0e)&&(i+=' xml:space="preserve"'),i+=">"+qt(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function I0e(e){return[e.read_shift(4),e.read_shift(4)]}function D0e(e,t){var r=[],a=!1;return ai(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function M0e(e,t){return t||(t=Se(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var F0e=Vue;function R0e(e){var t=za();_e(t,159,M0e(e));for(var r=0;r<e.length;++r)_e(t,19,F0e(e[r]));return _e(t,160),t.end()}function xI(e){if(typeof _t<"u")return _t.utils.encode(Ho,e);for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Us(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function L0e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Us(e,4),t.U=Us(e,4),t.W=Us(e,4),t}function $0e(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function B0e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push($0e(e));return t}function U0e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function W0e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Us(e,4),t.U=Us(e,4),t.W=Us(e,4),t}function q0e(e){var t=W0e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function pI(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function gI(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function K0e(e){var t=Us(e);switch(t.Minor){case 2:return[t.Minor,z0e(e)];case 3:return[t.Minor,V0e()];case 4:return[t.Minor,H0e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function z0e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=pI(e,r),s=gI(e,e.length-e.l);return{t:"Std",h:a,v:s}}function V0e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function H0e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(_a,function(i){var o=lt(i);switch(Ns(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function G0e(e,t){var r={},a=r.EncryptionVersionInfo=Us(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=pI(e,s),t-=s,r.EncryptionVerifier=gI(e,t),r}function X0e(e){var t={},r=t.EncryptionVersionInfo=Us(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function wN(e){var t=0,r,a=xI(e),s=a.length+1,i,o,l,c,u;for(r=Ri(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var yI=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=xI(o),c=i(l),u=l.length,d=Ri(16),f=0;f!=16;++f)d[f]=0;var m,p,g;for((u&1)===1&&(m=c>>8,d[u]=s(e[0],m),--u,m=c&255,p=l[l.length-1],d[u]=s(p,m));u>0;)--u,m=c>>8,d[u]=s(l[u],m),--u,m=c&255,d[u]=s(l[u],m);for(u=15,g=15-l.length;g>0;)m=c>>8,d[u]=s(e[g],m),--u,--g,m=c&255,d[u]=s(l[u],m),--u,--g;return d}}(),Y0e=function(e,t,r,a,s){s||(s=t),a||(a=yI(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},Q0e=function(e){var t=0,r=yI(e);return function(a){var s=Y0e("",a,t,r);return t=s[1],s[0]}};function J0e(e,t,r,a){var s={key:Dr(e),verificationBytes:Dr(e)};return r.password&&(s.verifier=wN(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=Q0e(r.password)),s}function Z0e(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=X0e(e):a.Data=G0e(e,t),a}function eme(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?Z0e(e,t-2,a):J0e(e,r.biff>=8?t:t-2,r,a),a}var vI=function(){function e(s,i){switch(i.type){case"base64":return t(un(s),i);case"binary":return t(s,i);case"buffer":return t(pt&&Buffer.isBuffer(s)?s.toString("binary"):eo(s),i);case"array":return t(Xo(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var m=/\\\w+\b/g,p=0,g,h=-1;g=m.exec(d);){switch(g[0]){case"\\cell":var y=d.slice(p,m.lastIndex-g[0].length);if(y[0]==" "&&(y=y.slice(1)),++h,y.length){var w={v:y,t:"s"};Array.isArray(l)?l[f][h]=w:l[ot({r:f,c:h})]=w}break}p=m.lastIndex}h>u.e.c&&(u.e.c=h)}),l["!ref"]=mt(u),l}function r(s,i){return to(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=Ct(s["!ref"]),l,c=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=ot({r:u,c:d});l=c?(s[u]||[])[d]:s[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(bs(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function tme(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function yf(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function rme(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,u=s+i;switch(c=o/(u>1?2-u:u),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,u/2]}function ame(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function Xh(e,t){if(t===0)return e;var r=rme(tme(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),yf(ame(r))}var bI=6,nme=15,sme=1,Na=bI;function vf(e){return Math.floor((e+Math.round(128/Na)/256)*Na)}function bf(e){return Math.floor((e-5)/Na*100+.5)/100}function Yh(e){return Math.round((e*Na+5)/Na*256)/256}function Mg(e){return Yh(bf(vf(e)))}function NN(e){var t=Math.abs(e-Mg(e)),r=Na;if(t>.005)for(Na=sme;Na<nme;++Na)Math.abs(e-Mg(e))<=t&&(t=Math.abs(e-Mg(e)),r=Na);Na=r}function Li(e){e.width?(e.wpx=vf(e.width),e.wch=bf(e.wpx),e.MDW=Na):e.wpx?(e.wch=bf(e.wpx),e.width=Yh(e.wch),e.MDW=Na):typeof e.wch=="number"&&(e.width=Yh(e.wch),e.wpx=vf(e.width),e.MDW=Na),e.customWidth&&delete e.customWidth}var ime=96,wI=ime;function wf(e){return e*96/wI}function Lc(e){return e*wI/96}var ome={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function lme(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(_a)||[]).forEach(function(o){var l=lt(o);switch(Ns(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=sr(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=sr(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function cme(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(_a)||[]).forEach(function(o){var l=lt(o);switch(Ns(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function ume(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(_a)||[]).forEach(function(o){var l=lt(o);switch(Ns(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ht(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?sr(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?sr(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?sr(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?sr(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?sr(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?sr(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?sr(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Gw[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=sr(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=Eo[s.color.index];s.color.index==81&&(c=Eo[1]),c||(c=Eo[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Xh(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function dme(e,t,r){t.NumberFmt=[];for(var a=jr(tt),s=0;s<a.length;++s)t.NumberFmt[a[s]]=tt[a[s]];var i=e[0].match(_a);if(i)for(s=0;s<i.length;++s){var o=lt(i[s]);switch(Ns(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Pt(Ht(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}gs(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function fme(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=Re("numFmt",null,{numFmtId:a,formatCode:qt(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Re("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var q0=["numFmtId","fillId","fontId","borderId","xfId"],K0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function mme(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(_a)||[]).forEach(function(i){var o=lt(i),l=0;switch(Ns(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<q0.length;++l)a[q0[l]]&&(a[q0[l]]=parseInt(a[q0[l]],10));for(l=0;l<K0.length;++l)a[K0[l]]&&(a[K0[l]]=sr(a[K0[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=sr(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function hme(e){var t=[];return t[t.length]=Re("cellXfs",null),e.forEach(function(r){t[t.length]=Re("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Re("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var xme=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&dme(f,d,u),(f=l.match(s))&&ume(f,d,c,u),(f=l.match(a))&&cme(f,d,c,u),(f=l.match(i))&&lme(f,d,c,u),(f=l.match(r))&&mme(f,d,u),d}}();function NI(e,t){var r=[_r,Re("styleSheet",null,{xmlns:ll[0],"xmlns:vt":Wr.vt})],a;return e.SSF&&(a=fme(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=hme(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function pme(e,t){var r=e.read_shift(2),a=Ca(e);return[r,a]}function gme(e,t,r){r||(r=Se(6+4*t.length)),r.write_shift(2,e),Jr(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function yme(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Zue(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=Jue(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Ca(e),a}function vme(e,t){t||(t=Se(25+4*32)),t.write_shift(2,e.sz*20),ede(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Vh(e.color,t);var a=0;return e.scheme=="major"&&(a=1),e.scheme=="minor"&&(a=2),t.write_shift(1,a),Jr(e.name,t),t.length>t.l?t.slice(0,t.l):t}var bme=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Fg,wme=Oa;function gT(e,t){t||(t=Se(4*3+8*7+16*1)),Fg||(Fg=cp(bme));var r=Fg[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(Vh({auto:1},t),Vh({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Nme(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function jI(e,t,r){r||(r=Se(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ou(e,t){return t||(t=Se(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var jme=Oa;function Sme(e,t){return t||(t=Se(51)),t.write_shift(1,0),Ou(null,t),Ou(null,t),Ou(null,t),Ou(null,t),Ou(null,t),t.length>t.l?t.slice(0,t.l):t}function Cme(e,t){return t||(t=Se(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),zh(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function kme(e,t,r){var a=Se(2052);return a.write_shift(4,e),zh(t,a),zh(r,a),a.length>a.l?a.slice(0,a.l):a}function Ome(e,t,r){var a={};a.NumberFmt=[];for(var s in tt)a.NumberFmt[s]=tt[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return ai(e,function(c,u,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],gs(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Xh(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(d),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(d);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}function Tme(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(_e(e,615,rs(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&_e(e,44,gme(s,t[s]))}),_e(e,616))}}function _me(e){var t=1;_e(e,611,rs(t)),_e(e,43,vme({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),_e(e,612)}function Eme(e){var t=2;_e(e,603,rs(t)),_e(e,45,gT({patternType:"none"})),_e(e,45,gT({patternType:"gray125"})),_e(e,604)}function Ame(e){var t=1;_e(e,613,rs(t)),_e(e,46,Sme()),_e(e,614)}function Pme(e){var t=1;_e(e,626,rs(t)),_e(e,47,jI({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),_e(e,627)}function Ime(e,t){_e(e,617,rs(t.length)),t.forEach(function(r){_e(e,47,jI(r,0))}),_e(e,618)}function Dme(e){var t=1;_e(e,619,rs(t)),_e(e,48,Cme({xfId:0,builtinId:0,name:"Normal"})),_e(e,620)}function Mme(e){var t=0;_e(e,505,rs(t)),_e(e,506)}function Fme(e){var t=0;_e(e,508,kme(t,"TableStyleMedium9","PivotStyleMedium4")),_e(e,509)}function Rme(e,t){var r=za();return _e(r,278),Tme(r,e.SSF),_me(r),Eme(r),Ame(r),Pme(r),Ime(r,t.cellXfs),Dme(r),Mme(r),Fme(r),_e(r,279),r.end()}var Lme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function $me(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(_a)||[]).forEach(function(s){var i=lt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Lme.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Bme(){}function Ume(){}var Wme=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,qme=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Kme=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function zme(e,t,r){t.themeElements={};var a;[["clrScheme",Wme,$me],["fontScheme",qme,Bme],["fmtScheme",Kme,Ume]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var Vme=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function SI(e,t){(!e||e.length===0)&&(e=jN());var r,a={};if(!(r=e.match(Vme)))throw new Error("themeElements not found in theme");return zme(r[0],a,t),a.raw=e,a}function jN(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[_r];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Hme(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=b6(i,{type:"array"})}catch{return}var l=rn(o,"theme/theme/theme1.xml",!0);if(l)return SI(l,r)}}function Gme(e){return e.read_shift(4)}function Xme(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Yme(e,4);break;case 2:t.xclrValue=aI(e);break;case 3:t.xclrValue=Gme(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Yme(e,t){return Oa(e,t)}function Qme(e,t){return Oa(e,t)}function Jme(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=Xme(e);break;case 6:a[1]=Qme(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function Zme(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(Jme(e,r-e.l));return{ixfe:a,ext:i}}function ehe(e,t){t.forEach(function(r){switch(r[0]){}})}function the(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ca(e)}}function rhe(e){var t=Se(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Jr(e.name,t),t.slice(0,t.l)}function ahe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function nhe(e){var t=Se(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function she(e,t){var r=Se(8+2*t.length);return r.write_shift(4,e),Jr(t,r),r.slice(0,r.l)}function ihe(e){return e.l+=4,e.read_shift(4)!=0}function ohe(e,t){var r=Se(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}function lhe(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return ai(e,function(c,u,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(d),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function che(){var e=za();return _e(e,332),_e(e,334,rs(1)),_e(e,335,rhe({name:"XLDAPR",version:12e4,flags:3496657072})),_e(e,336),_e(e,339,she(1,"XLDAPR")),_e(e,52),_e(e,35,rs(514)),_e(e,4096,rs(0)),_e(e,4097,Nn(1)),_e(e,36),_e(e,53),_e(e,340),_e(e,337,ohe(1,!0)),_e(e,51,nhe([[1,0]])),_e(e,338),_e(e,333),e.end()}function uhe(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(_a,function(l){var c=lt(l);switch(Ns(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==c.name&&(o=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function CI(){var e=[_r];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function dhe(e){var t=[];if(!e)return t;var r=1;return(e.match(_a)||[]).forEach(function(a){var s=lt(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function fhe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=ot(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function mhe(e,t,r){var a=[];return ai(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function hhe(e,t,r,a){if(!e)return e;var s=a||{},i=!1;ai(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function xhe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Wl=1024;function kI(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Re("xml",null,{"xmlns:v":Za.v,"xmlns:o":Za.o,"xmlns:x":Za.x,"xmlns:mv":Za.mv}).replace(/\/>/,">"),Re("o:shapelayout",Re("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Re("v:shapetype",[Re("v:stroke",null,{joinstyle:"miter"}),Re("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];Wl<e*1e3;)Wl+=1e3;return t.forEach(function(i){var o=hr(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Re("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Re("v:fill",c,l),d={on:"t",obscured:"t"};++Wl,s=s.concat(["<v:shape"+xf({id:"_x0000_s"+Wl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Re("v:shadow",null,d),Re("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",la("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),la("x:AutoFill","False"),la("x:Row",String(o.r)),la("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function yT(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=hr(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Ct(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=mt(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}i.c.push(d)})}function phe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=lt(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=hr(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&bN(f[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=m.h),a.push(u)}}}}),a}function OI(e){var t=[_r,Re("comments",null,{xmlns:ll[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=qt(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(qt(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(la("t",qt(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(la("t",qt(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function ghe(e,t){var r=[],a=!1,s={},i=0;return e.replace(_a,function(l,c){var u=lt(l);switch(Ns(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function yhe(e,t,r){var a=[_r,Re("ThreadedComments",null,{xmlns:Wr.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(Re("threadedComment",la("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function vhe(e,t){var r=[],a=!1;return e.replace(_a,function(i){var o=lt(i);switch(Ns(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function bhe(e){var t=[_r,Re("personList",null,{xmlns:Wr.TCMNT,"xmlns:x":ll[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(Re("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function whe(e){var t={};t.iauthor=e.read_shift(4);var r=fl(e);return t.rfx=r.s,t.ref=ot(r.s),e.l+=16,t}function Nhe(e,t){return t==null&&(t=Se(36)),t.write_shift(4,e[1].iauthor),iu(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var jhe=Ca;function She(e){return Jr(e.slice(0,54))}function Che(e,t){var r=[],a=[],s={},i=!1;return ai(e,function(l,c,u){switch(u){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function khe(e){var t=za(),r=[];return _e(t,628),_e(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),_e(t,632,She(s.a)))})}),_e(t,631),_e(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:hr(a[0]),e:hr(a[0])};_e(t,635,Nhe([i,s])),s.t&&s.t.length>0&&_e(t,637,Gue(s)),_e(t,636),delete s.iauthor})}),_e(t,634),_e(t,629),t.end()}var Ohe="application/vnd.ms-office.vbaProject";function The(e){var t=Je.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Je.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Je.write(t)}function _he(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Je.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var TI=["xlsb","xlsm","xlam","biff8","xla"];function Ehe(){return{"!type":"dialog"}}function Ahe(){return{"!type":"dialog"}}function Phe(){return{"!type":"macro"}}function Ihe(){return{"!type":"macro"}}var ac=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,s+(l?"":"$")+or(d)+(c?"":"$")+br(u)}return function(s,i){return t=i,s.replace(e,r)}}(),SN=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,CN=function(){return function(t,r){return t.replace(SN,function(a,s,i,o,l,c){var u=dN(o)-(i?0:r.c),d=uN(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",m=u==0?"":i?u+1:"["+u+"]";return s+"R"+f+"C"+m})}}();function _I(e,t){return e.replace(SN,function(r,a,s,i,o,l){return a+(s=="$"?s+i:or(dN(i)+t.c))+(o=="$"?o+l:br(uN(l)+t.r))})}function Dhe(e,t,r){var a=Ma(t),s=a.s,i=hr(r),o={r:i.r-s.r,c:i.c-s.c};return _I(e,o)}function Mhe(e){return e.length!=1}function vT(e){return e.replace(/_xlfn\./g,"")}function Ar(e){e.l+=1}function $i(e,t){var r=e.read_shift(t==1?1:2);return[r&16383,r>>14&1,r>>15&1]}function EI(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return AI(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=$i(e,2),l=$i(e,2);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function AI(e){var t=$i(e,2),r=$i(e,2),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Fhe(e,t,r){if(r.biff<8)return AI(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=$i(e,2),o=$i(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function PI(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Rhe(e);var a=e.read_shift(r&&r.biff==12?4:2),s=$i(e,2);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function Rhe(e){var t=$i(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Lhe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function $he(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return Bhe(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function Bhe(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function Uhe(e,t,r){var a=(e[e.l++]&96)>>5,s=EI(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function Whe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=EI(e,i,r);return[a,s,o]}function qhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function Khe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function zhe(e,t,r){var a=(e[e.l++]&96)>>5,s=Fhe(e,t-1,r);return[a,s]}function Vhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function bT(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Hhe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Ghe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Xhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Yhe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Qhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function II(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Jhe(e){return e.read_shift(2),II(e)}function Zhe(e){return e.read_shift(2),II(e)}function exe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=PI(e,0,r);return[a,s]}function txe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=$he(e,0,r);return[a,s]}function rxe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=PI(e,0,r);return[a,s,i]}function axe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[ipe[s],FI[s],a]}function nxe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:sxe(e);return[s,(i[0]===0?FI:spe)[i[1]]]}function sxe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function ixe(e,t,r){e.l+=r&&r.biff==2?3:4}function oxe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function lxe(e){return e.l++,ni[e.read_shift(1)]}function cxe(e){return e.l++,e.read_shift(2)}function uxe(e){return e.l++,e.read_shift(1)!==0}function dxe(e){return e.l++,ja(e)}function fxe(e,t,r){return e.l++,Hf(e,t-1,r)}function mxe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Cr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=ni[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ja(e);break;case 2:r[1]=ml(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function hxe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?fl:mp)(e));return s}function xxe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=mxe(e,r.biff);return o}function pxe(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function gxe(e,t,r){if(r.biff==5)return yxe(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function yxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function vxe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function bxe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function wxe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function Nxe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var jxe=Oa,Sxe=Oa,Cxe=Oa;function Xf(e,t,r){return e.l+=2,[Lhe(e)]}function kN(e){return e.l+=6,[]}var kxe=Xf,Oxe=kN,Txe=kN,_xe=Xf;function DI(e){return e.l+=2,[Dr(e),e.read_shift(2)&1]}var Exe=Xf,Axe=DI,Pxe=kN,Ixe=Xf,Dxe=Xf,Mxe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Fxe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=Mxe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function Rxe(e){return e.l+=2,[e.read_shift(4)]}function Lxe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function $xe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Bxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Uxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Wxe(e){return e.l+=4,[0,0]}var wT={1:{n:"PtgExp",f:oxe},2:{n:"PtgTbl",f:Cxe},3:{n:"PtgAdd",f:Ar},4:{n:"PtgSub",f:Ar},5:{n:"PtgMul",f:Ar},6:{n:"PtgDiv",f:Ar},7:{n:"PtgPower",f:Ar},8:{n:"PtgConcat",f:Ar},9:{n:"PtgLt",f:Ar},10:{n:"PtgLe",f:Ar},11:{n:"PtgEq",f:Ar},12:{n:"PtgGe",f:Ar},13:{n:"PtgGt",f:Ar},14:{n:"PtgNe",f:Ar},15:{n:"PtgIsect",f:Ar},16:{n:"PtgUnion",f:Ar},17:{n:"PtgRange",f:Ar},18:{n:"PtgUplus",f:Ar},19:{n:"PtgUminus",f:Ar},20:{n:"PtgPercent",f:Ar},21:{n:"PtgParen",f:Ar},22:{n:"PtgMissArg",f:Ar},23:{n:"PtgStr",f:fxe},26:{n:"PtgSheet",f:Lxe},27:{n:"PtgEndSheet",f:$xe},28:{n:"PtgErr",f:lxe},29:{n:"PtgBool",f:uxe},30:{n:"PtgInt",f:cxe},31:{n:"PtgNum",f:dxe},32:{n:"PtgArray",f:Vhe},33:{n:"PtgFunc",f:axe},34:{n:"PtgFuncVar",f:nxe},35:{n:"PtgName",f:pxe},36:{n:"PtgRef",f:exe},37:{n:"PtgArea",f:Uhe},38:{n:"PtgMemArea",f:vxe},39:{n:"PtgMemErr",f:jxe},40:{n:"PtgMemNoMem",f:Sxe},41:{n:"PtgMemFunc",f:bxe},42:{n:"PtgRefErr",f:wxe},43:{n:"PtgAreaErr",f:qhe},44:{n:"PtgRefN",f:txe},45:{n:"PtgAreaN",f:zhe},46:{n:"PtgMemAreaN",f:Bxe},47:{n:"PtgMemNoMemN",f:Uxe},57:{n:"PtgNameX",f:gxe},58:{n:"PtgRef3d",f:rxe},59:{n:"PtgArea3d",f:Whe},60:{n:"PtgRefErr3d",f:Nxe},61:{n:"PtgAreaErr3d",f:Khe},255:{}},qxe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Kxe={1:{n:"PtgElfLel",f:DI},2:{n:"PtgElfRw",f:Ixe},3:{n:"PtgElfCol",f:kxe},6:{n:"PtgElfRwV",f:Dxe},7:{n:"PtgElfColV",f:_xe},10:{n:"PtgElfRadical",f:Exe},11:{n:"PtgElfRadicalS",f:Pxe},13:{n:"PtgElfColS",f:Oxe},15:{n:"PtgElfColSV",f:Txe},16:{n:"PtgElfRadicalLel",f:Axe},25:{n:"PtgList",f:Fxe},29:{n:"PtgSxName",f:Rxe},255:{}},zxe={0:{n:"PtgAttrNoop",f:Wxe},1:{n:"PtgAttrSemi",f:Qhe},2:{n:"PtgAttrIf",f:Xhe},4:{n:"PtgAttrChoose",f:Hhe},8:{n:"PtgAttrGoto",f:Ghe},16:{n:"PtgAttrSum",f:ixe},32:{n:"PtgAttrBaxcel",f:bT},33:{n:"PtgAttrBaxcel",f:bT},64:{n:"PtgAttrSpace",f:Jhe},65:{n:"PtgAttrSpaceSemi",f:Zhe},128:{n:"PtgAttrIfError",f:Yhe},255:{}};function Yf(e,t,r,a){if(a.biff<8)return Oa(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=xxe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=hxe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Oa(e,t)),i}function Qf(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=wT[i]||wT[qxe[i]],(i===24||i===25)&&(s=(i===24?Kxe:zxe)[e[e.l+1]]),!s||!s.f?Oa(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Vxe(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Hxe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Gxe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function MI(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function NT(e,t,r){var a=MI(e,t,r);return a=="#REF"?a:Gxe(a,r)}function ya(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},l=[],c,u,d,f=0,m=0,p,g="";if(!e[0]||!e[0][0])return"";for(var h=-1,y="",w=0,S=e[0].length;w<S;++w){var v=e[0][w];switch(v[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),h>=0){switch(e[0][h][1][0]){case 0:y=vr(" ",e[0][h][1][1]);break;case 1:y=vr("\r",e[0][h][1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}u=u+y,h=-1}l.push(u+Hxe[v[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Zu(v[1][1],o,s),l.push(ed(d,i));break;case"PtgRefN":d=r?Zu(v[1][1],r,s):v[1][1],l.push(ed(d,i));break;case"PtgRef3d":f=v[1][1],d=Zu(v[1][2],o,s),g=NT(a,f,s),l.push(g+"!"+ed(d,i));break;case"PtgFunc":case"PtgFuncVar":var x=v[1][0],b=v[1][1];x||(x=0),x&=127;var N=x==0?[]:l.slice(-x);l.length-=x,b==="User"&&(b=N.shift()),l.push(b+"("+N.join(",")+")");break;case"PtgBool":l.push(v[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(v[1]);break;case"PtgNum":l.push(String(v[1]));break;case"PtgStr":l.push('"'+v[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(v[1]);break;case"PtgAreaN":p=QO(v[1][1],r?{s:r}:o,s),l.push(Pg(p,s));break;case"PtgArea":p=QO(v[1][1],o,s),l.push(Pg(p,s));break;case"PtgArea3d":f=v[1][1],p=v[1][2],g=NT(a,f,s),l.push(g+"!"+Pg(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=v[1][2];var j=(a.names||[])[m-1]||(a[0]||[])[m],O=j?j.Name:"SH33TJSNAME"+String(m);O&&O.slice(0,6)=="_xlfn."&&!s.xlfn&&(O=O.slice(6)),l.push(O);break;case"PtgNameX":var _=v[1][1];m=v[1][2];var E;if(s.biff<=5)_<0&&(_=-_),a[_]&&(E=a[_][m]);else{var k="";if(((a[_]||[])[0]||[])[0]==14849||(((a[_]||[])[0]||[])[0]==1025?a[_][m]&&a[_][m].itab>0&&(k=a.SheetNames[a[_][m].itab-1]+"!"):k=a.SheetNames[m-1]+"!"),a[_]&&a[_][m])k+=a[_][m].Name;else if(a[0]&&a[0][m])k+=a[0][m].Name;else{var C=(MI(a,_,s)||"").split(";;");C[m-1]?k=C[m-1]:k+="SH33TJSERRX"}l.push(k);break}E||(E={Name:"SH33TJSERRY"}),l.push(E.Name);break;case"PtgParen":var A="(",P=")";if(h>=0){switch(y="",e[0][h][1][0]){case 2:A=vr(" ",e[0][h][1][1])+A;break;case 3:A=vr("\r",e[0][h][1][1])+A;break;case 4:P=vr(" ",e[0][h][1][1])+P;break;case 5:P=vr("\r",e[0][h][1][1])+P;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}h=-1}l.push(A+l.pop()+P);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:v[1][1],r:v[1][0]};var I={c:r.c,r:r.r};if(a.sharedf[ot(d)]){var F=a.sharedf[ot(d)];l.push(ya(F,o,I,a,s))}else{var q=!1;for(c=0;c!=a.arrayf.length;++c)if(u=a.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(ya(u[1],o,I,a,s)),q=!0;break}q||l.push(v[1])}break;case"PtgArray":l.push("{"+Vxe(v[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":h=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+v[1].idx+"[#"+v[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(v));default:throw new Error("Unrecognized Formula Token: "+String(v))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&h>=0&&H.indexOf(e[0][w][0])==-1){v=e[0][h];var V=!0;switch(v[1][0]){case 4:V=!1;case 0:y=vr(" ",v[1][1]);break;case 5:V=!1;case 1:y=vr("\r",v[1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+v[1][0])}l.push((V?y:"")+l.pop()+(V?"":y)),h=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Xxe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Oa(e,t-2)];var l=Qf(e,o,r);return t!==o+s&&(i=Yf(e,t-o-s,l,r)),e.l=a,[l,i]}function Yxe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Oa(e,t-2)];var l=Qf(e,o,r);return t!==o+s&&(i=Yf(e,t-o-s,l,r)),e.l=a,[l,i]}function Qxe(e,t,r,a){var s=e.l+t,i=Qf(e,a,r),o;return s!==e.l&&(o=Yf(e,s-e.l,i,r)),[i,o]}function Jxe(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=Qf(e,i,r);return i==65535?[[],Oa(e,t-2)]:(t!==i+2&&(s=Yf(e,a-i-2,o,r)),[o,s])}function Zxe(e){var t;if(Is(e,e.l+6)!==65535)return[ja(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function epe(e){if(e==null){var t=Se(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Yo(e);return Yo(0)}function Rg(e,t,r){var a=e.l+t,s=js(e);r.biff==2&&++e.l;var i=Zxe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Yxe(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function tpe(e,t,r,a,s){var i=Jo(t,r,s),o=epe(e.v),l=Se(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Se(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Qr([i,o,l,u]);return f}function hp(e,t,r){var a=e.read_shift(4),s=Qf(e,a,r),i=e.read_shift(4),o=i>0?Yf(e,i,s,r):null;return[s,o]}var rpe=hp,xp=hp,ape=hp,npe=hp,spe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},FI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ipe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function jT(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function ope(e){var t="of:="+e.replace(SN,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Lg(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function lpe(e){return e.replace(/\./,"!")}var rd={},nc={},ad=typeof Map<"u";function ON(e,t,r){var a=0,s=e.length;if(r){if(ad?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=ad?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(ad?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function pp(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(Na=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=bf(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=Yh(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Io(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function ro(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){gs(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function RI(e,t,r,a,s,i){try{a.cellNF&&(e.z=tt[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=lr(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(tt[t]==null&&gs(sue[t]||"General",t),e.t==="e")e.w=e.w||ni[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mf(e.v);else if(e.t==="d"){var o=zr(e.v);(o|0)===o?e.w=o.toString(10):e.w=mf(o)}else{if(e.v===void 0)return"";e.w=Go(e.v,nc)}else e.t==="d"?e.w=dn(t,zr(e.v),nc):e.w=dn(t,e.v,nc)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Xh(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Xh(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function cpe(e,t,r){if(e&&e["!ref"]){var a=Ct(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function upe(e,t){var r=Ct(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=mt(r))}var dpe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,fpe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,mpe=/<(?:\w:)?hyperlink [^>]*>/mg,hpe=/"(\w*:\w*)"/,xpe=/<(?:\w:)?col\b[^>]*[\/]?>/g,ppe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,gpe=/<(?:\w:)?pageMargins[^>]*\/>/g,LI=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,ype=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,vpe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function bpe(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(fpe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var m=u.match(LI);m?TN(m[0],l,s,r):(m=u.match(ype))&&Npe(m[0],m[1]||"",l,s,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(hpe);g&&upe(l,g[1])}var h=u.match(vpe);h&&h[1]&&Mpe(h[1],s);var y=[];if(t.cellStyles){var w=u.match(xpe);w&&Epe(y,w)}f&&Lpe(f[1],l,t,c,i,o);var S=d.match(ppe);S&&(l["!autofilter"]=Ppe(S[0]));var v=[],x=d.match(dpe);if(x)for(p=0;p!=x.length;++p)v[p]=Ct(x[p].slice(x[p].indexOf('"')+1));var b=d.match(mpe);b&&Ope(l,b,a);var N=d.match(gpe);if(N&&(l["!margins"]=Tpe(lt(N[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=mt(c)),t.sheetRows>0&&l["!ref"]){var j=Ct(l["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=mt(j))}return y.length>0&&(l["!cols"]=y),v.length>0&&(l["!merges"]=v),l}function wpe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+mt(e[r])+'"/>';return t+"</mergeCells>"}function TN(e,t,r,a){var s=lt(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=Pt(Ht(s.codeName)))}function Npe(e,t,r,a,s){TN(e.slice(0,e.indexOf(">")),r,a,s)}function jpe(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=fs(qt(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Re("outlinePr",null,u)}!i&&!l||(s[s.length]=Re("sheetPr",l,o))}var Spe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Cpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function kpe(e){var t={sheet:1};return Spe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Cpe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=wN(e.password).toString(16).toUpperCase()),Re("sheetProtection",null,t)}function Ope(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=lt(Ht(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Pt(i.location))):(i.Target="#"+Pt(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Ct(i.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=ot({c:u,r:c});a?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=i)}}}function Tpe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function _pe(e){return Io(e),Re("pageMargins",null,e)}function Epe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=lt(t[a],!0);s.hidden&&(s.hidden=sr(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,NN(s.width)),Li(s);i<=o;)e[i++]=Yt(s)}}function Ape(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=Re("col",null,pp(s,a)));return r[r.length]="</cols>",r.join("")}function Ppe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Ipe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:mt(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Ma(s);o.s.r==o.e.r&&(o.e.r=Ma(t["!ref"]).e.r,s=mt(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),Re("autoFilter",null,{ref:s})}var Dpe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Mpe(e,t){t.Views||(t.Views=[{}]),(e.match(Dpe)||[]).forEach(function(r,a){var s=lt(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),sr(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function Fpe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),Re("sheetViews",Re("sheetView",null,s),{})}function Rpe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=ni[e.v];break;case"d":a&&a.cellDates?s=lr(e.v,-1).toISOString():(e=Yt(e),e.t="n",s=""+(e.v=zr(lr(e.v)))),typeof e.z>"u"&&(e.z=tt[14]);break;default:s=e.v;break}var l=la("v",qt(s)),c={r:t},u=ro(a.cellXfs,e,a);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=la("v",""+ON(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Re("f",qt(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Re("c",l,c)}var Lpe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=hf("v"),o=hf("f");return function(c,u,d,f,m,p){for(var g=0,h="",y=[],w=[],S=0,v=0,x=0,b="",N,j,O=0,_=0,E,k,C=0,A=0,P=Array.isArray(p.CellXf),I,F=[],q=[],H=Array.isArray(u),V=[],re={},oe=!1,U=!!d.sheetStubs,J=c.split(t),Q=0,X=J.length;Q!=X;++Q){h=J[Q].trim();var ee=h.length;if(ee!==0){var ue=0;e:for(g=0;g<ee;++g)switch(h[g]){case">":if(h[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(j=lt(h.slice(ue,g),!0),O=j.r!=null?parseInt(j.r,10):O+1,_=-1,d.sheetRows&&d.sheetRows<O)continue;re={},oe=!1,j.ht&&(oe=!0,re.hpt=parseFloat(j.ht),re.hpx=Lc(re.hpt)),j.hidden=="1"&&(oe=!0,re.hidden=!0),j.outlineLevel!=null&&(oe=!0,re.level=+j.outlineLevel),oe&&(V[O-1]=re)}break;case"<":ue=g;break}if(ue>=g)break;if(j=lt(h.slice(ue,g),!0),O=j.r!=null?parseInt(j.r,10):O+1,_=-1,!(d.sheetRows&&d.sheetRows<O)){f.s.r>O-1&&(f.s.r=O-1),f.e.r<O-1&&(f.e.r=O-1),d&&d.cellStyles&&(re={},oe=!1,j.ht&&(oe=!0,re.hpt=parseFloat(j.ht),re.hpx=Lc(re.hpt)),j.hidden=="1"&&(oe=!0,re.hidden=!0),j.outlineLevel!=null&&(oe=!0,re.level=+j.outlineLevel),oe&&(V[O-1]=re)),y=h.slice(g).split(e);for(var we=0;we!=y.length&&y[we].trim().charAt(0)=="<";++we);for(y=y.slice(we),g=0;g!=y.length;++g)if(h=y[g].trim(),h.length!==0){if(w=h.match(r),S=g,v=0,x=0,h="<c "+(h.slice(0,1)=="<"?">":"")+h,w!=null&&w.length===2){for(S=0,b=w[1],v=0;v!=b.length&&!((x=b.charCodeAt(v)-64)<1||x>26);++v)S=26*S+x;--S,_=S}else++_;for(v=0;v!=h.length&&h.charCodeAt(v)!==62;++v);if(++v,j=lt(h.slice(0,v),!0),j.r||(j.r=ot({r:O-1,c:_})),b=h.slice(v),N={t:""},(w=b.match(i))!=null&&w[1]!==""&&(N.v=Pt(w[1])),d.cellFormula){if((w=b.match(o))!=null&&w[1]!==""){if(N.f=Pt(Ht(w[1])).replace(/\r\n/g,`
`),d.xlfn||(N.f=vT(N.f)),w[0].indexOf('t="array"')>-1)N.F=(b.match(s)||[])[1],N.F.indexOf(":")>-1&&F.push([Ct(N.F),N.F]);else if(w[0].indexOf('t="shared"')>-1){k=lt(w[0]);var ne=Pt(Ht(w[1]));d.xlfn||(ne=vT(ne)),q[parseInt(k.si,10)]=[k,ne,j.r]}}else(w=b.match(/<f[^>]*\/>/))&&(k=lt(w[0]),q[k.si]&&(N.f=Dhe(q[k.si][1],q[k.si][2],j.r)));var ie=hr(j.r);for(v=0;v<F.length;++v)ie.r>=F[v][0].s.r&&ie.r<=F[v][0].e.r&&ie.c>=F[v][0].s.c&&ie.c<=F[v][0].e.c&&(N.F=F[v][1])}if(j.t==null&&N.v===void 0)if(N.f||N.F)N.v=0,N.t="n";else if(U)N.t="z";else continue;else N.t=j.t||"n";switch(f.s.c>_&&(f.s.c=_),f.e.c<_&&(f.e.c=_),N.t){case"n":if(N.v==""||N.v==null){if(!U)continue;N.t="z"}else N.v=parseFloat(N.v);break;case"s":if(typeof N.v>"u"){if(!U)continue;N.t="z"}else E=rd[parseInt(N.v,10)],N.v=E.t,N.r=E.r,d.cellHTML&&(N.h=E.h);break;case"str":N.t="s",N.v=N.v!=null?Ht(N.v):"",d.cellHTML&&(N.h=rN(N.v));break;case"inlineStr":w=b.match(a),N.t="s",w!=null&&(E=bN(w[1]))?(N.v=E.t,d.cellHTML&&(N.h=E.h)):N.v="";break;case"b":N.v=sr(N.v);break;case"d":d.cellDates?N.v=lr(N.v,1):(N.v=zr(lr(N.v,1)),N.t="n");break;case"e":(!d||d.cellText!==!1)&&(N.w=N.v),N.v=B6[N.v];break}if(C=A=0,I=null,P&&j.s!==void 0&&(I=p.CellXf[j.s],I!=null&&(I.numFmtId!=null&&(C=I.numFmtId),d.cellStyles&&I.fillId!=null&&(A=I.fillId))),RI(N,C,A,d,m,p),d.cellDates&&P&&N.t=="n"&&ol(tt[C])&&(N.t="d",N.v=dp(N.v)),j.cm&&d.xlmeta){var Ne=(d.xlmeta.Cell||[])[+j.cm-1];Ne&&Ne.type=="XLDAPR"&&(N.D=!0)}if(H){var W=hr(j.r);u[W.r]||(u[W.r]=[]),u[W.r][W.c]=N}else u[j.r]=N}}}}V.length>0&&(u["!rows"]=V)}}();function $pe(e,t,r,a){var s=[],i=[],o=Ct(e["!ref"]),l="",c,u="",d=[],f=0,m=0,p=e["!rows"],g=Array.isArray(e),h={r:u},y,w=-1;for(m=o.s.c;m<=o.e.c;++m)d[m]=or(m);for(f=o.s.r;f<=o.e.r;++f){for(i=[],u=br(f),m=o.s.c;m<=o.e.c;++m){c=d[m]+u;var S=g?(e[f]||[])[m]:e[c];S!==void 0&&(l=Rpe(S,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[f])&&(h={r:u},p&&p[f]&&(y=p[f],y.hidden&&(h.hidden=1),w=-1,y.hpx?w=wf(y.hpx):y.hpt&&(w=y.hpt),w>-1&&(h.ht=w,h.customHeight=1),y.level&&(h.outlineLevel=y.level)),s[s.length]=Re("row",i.join(""),h))}if(p)for(;f<p.length;++f)p&&p[f]&&(h={r:f+1},y=p[f],y.hidden&&(h.hidden=1),w=-1,y.hpx?w=wf(y.hpx):y.hpt&&(w=y.hpt),w>-1&&(h.ht=w,h.customHeight=1),y.level&&(h.outlineLevel=y.level),s[s.length]=Re("row","",h));return s.join("")}function $I(e,t,r,a){var s=[_r,Re("worksheet",null,{xmlns:ll[0],"xmlns:r":Wr.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=Ct(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=mt(d)}a||(a={}),c["!comments"]=[];var f=[];jpe(c,r,e,t,s),s[s.length]=Re("dimension",null,{ref:u}),s[s.length]=Fpe(c,t,e,r),t.sheetFormat&&(s[s.length]=Re("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Ape(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=$pe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=kpe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Ipe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=wpe(c["!merges"]));var m=-1,p,g=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(h){h[1].Target&&(p={ref:h[0]},h[1].Target.charAt(0)!="#"&&(g=Wt(a,-1,qt(h[1].Target).replace(/#.*$/,""),yt.HLINK),p["r:id"]="rId"+g),(m=h[1].Target.indexOf("#"))>-1&&(p.location=qt(h[1].Target.slice(m+1))),h[1].Tooltip&&(p.tooltip=qt(h[1].Tooltip)),s[s.length]=Re("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=_pe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=la("ignoredErrors",Re("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=Wt(a,-1,"../drawings/drawing"+(e+1)+".xml",yt.DRAW),s[s.length]=Re("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=Wt(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",yt.VML),s[s.length]=Re("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Bpe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function Upe(e,t,r){var a=Se(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=wf(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,m=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[ot(u)];g&&(f<0&&(f=p),m=p)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,m))}var h=a.l;return a.l=c,a.write_shift(4,l),a.l=h,a.length>a.l?a.slice(0,a.l):a}function Wpe(e,t,r,a){var s=Upe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&_e(e,0,s)}var qpe=fl,Kpe=iu;function zpe(){}function Vpe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Xue(e),r}function Hpe(e,t,r){r==null&&(r=Se(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return Vh({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),M6(e,r),r.slice(0,r.l)}function Gpe(e){var t=$n(e);return[t]}function Xpe(e,t,r){return r==null&&(r=Se(8)),cl(t,r)}function Ype(e){var t=ul(e);return[t]}function Qpe(e,t,r){return r==null&&(r=Se(4)),dl(t,r)}function Jpe(e){var t=$n(e),r=e.read_shift(1);return[t,r,"b"]}function Zpe(e,t,r){return r==null&&(r=Se(9)),cl(t,r),r.write_shift(1,e.v?1:0),r}function ege(e){var t=ul(e),r=e.read_shift(1);return[t,r,"b"]}function tge(e,t,r){return r==null&&(r=Se(5)),dl(t,r),r.write_shift(1,e.v?1:0),r}function rge(e){var t=$n(e),r=e.read_shift(1);return[t,r,"e"]}function age(e,t,r){return r==null&&(r=Se(9)),cl(t,r),r.write_shift(1,e.v),r}function nge(e){var t=ul(e),r=e.read_shift(1);return[t,r,"e"]}function sge(e,t,r){return r==null&&(r=Se(8)),dl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function ige(e){var t=$n(e),r=e.read_shift(4);return[t,r,"s"]}function oge(e,t,r){return r==null&&(r=Se(12)),cl(t,r),r.write_shift(4,t.v),r}function lge(e){var t=ul(e),r=e.read_shift(4);return[t,r,"s"]}function cge(e,t,r){return r==null&&(r=Se(8)),dl(t,r),r.write_shift(4,t.v),r}function uge(e){var t=$n(e),r=ja(e);return[t,r,"n"]}function dge(e,t,r){return r==null&&(r=Se(16)),cl(t,r),Yo(e.v,r),r}function BI(e){var t=ul(e),r=ja(e);return[t,r,"n"]}function fge(e,t,r){return r==null&&(r=Se(12)),dl(t,r),Yo(e.v,r),r}function mge(e){var t=$n(e),r=xN(e);return[t,r,"n"]}function hge(e,t,r){return r==null&&(r=Se(12)),cl(t,r),F6(e.v,r),r}function xge(e){var t=ul(e),r=xN(e);return[t,r,"n"]}function pge(e,t,r){return r==null&&(r=Se(8)),dl(t,r),F6(e.v,r),r}function gge(e){var t=$n(e),r=fN(e);return[t,r,"is"]}function yge(e){var t=$n(e),r=Ca(e);return[t,r,"str"]}function vge(e,t,r){return r==null&&(r=Se(12+4*e.v.length)),cl(t,r),Jr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function bge(e){var t=ul(e),r=Ca(e);return[t,r,"str"]}function wge(e,t,r){return r==null&&(r=Se(8+4*e.v.length)),dl(t,r),Jr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Nge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=xp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}function jge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=xp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}function Sge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=ja(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=xp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}function Cge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=Ca(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=xp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}var kge=fl,Oge=iu;function Tge(e,t){return t==null&&(t=Se(4)),t.write_shift(4,e),t}function _ge(e,t){var r=e.l+t,a=fl(e),s=mN(e),i=Ca(e),o=Ca(e),l=Ca(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function Ege(e,t){var r=Se(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));iu({s:hr(e[0]),e:hr(e[0])},r),hN("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return Jr(s||"",r),Jr(e[1].Tooltip||"",r),Jr("",r),r.slice(0,r.l)}function Age(){}function Pge(e,t,r){var a=e.l+t,s=R6(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=rpe(e,a-e.l,r);o[1]=l}else e.l=a;return o}function Ige(e,t,r){var a=e.l+t,s=fl(e),i=[s];if(r.cellFormula){var o=npe(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function Dge(e,t,r){r==null&&(r=Se(18));var a=pp(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var UI=["left","right","top","bottom","header","footer"];function Mge(e){var t={};return UI.forEach(function(r){t[r]=ja(e)}),t}function Fge(e,t){return t==null&&(t=Se(6*8)),Io(e),UI.forEach(function(r){Yo(e[r],t)}),t}function Rge(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Lge(e,t,r){r==null&&(r=Se(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function $ge(e){var t=Se(24);return t.write_shift(4,4),t.write_shift(4,1),iu(e,t),t}function Bge(e,t){return t==null&&(t=Se(16*4+2)),t.write_shift(2,e.password?wN(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Uge(){}function Wge(){}function qge(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,p,g,h,y,w,S,v,x,b,N=[];l.biff=12,l["!row"]=0;var j=0,O=!1,_=[],E={},k=l.supbooks||s.supbooks||[[]];if(k.sharedf=E,k.arrayf=_,k.SheetNames=s.SheetNames||s.Sheets.map(function(H){return H.name}),!l.supbooks&&(l.supbooks=k,s.Names))for(var C=0;C<s.Names.length;++C)k[0][C+1]=s.Names[C];var A=[],P=[],I=!1;Nf[16]={n:"BrtShortReal",f:BI};var F;if(ai(e,function(V,re,oe){if(!m)switch(oe){case 148:u=V;break;case 0:p=V,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),x=br(y=p.r),l["!row"]=p.r,(V.hidden||V.hpt||V.level!=null)&&(V.hpt&&(V.hpx=Lc(V.hpt)),P[V.r]=V);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:V[2]},V[2]){case"n":g.v=V[1];break;case"s":v=rd[V[1]],g.v=v.t,g.r=v.r;break;case"b":g.v=!!V[1];break;case"e":g.v=V[1],l.cellText!==!1&&(g.w=ni[g.v]);break;case"str":g.t="s",g.v=V[1];break;case"is":g.t="s",g.v=V[1].t;break}if((h=o.CellXf[V[0].iStyleRef])&&RI(g,h.numFmtId,null,l,i,o),w=V[0].c==-1?w+1:V[0].c,l.dense?(c[y]||(c[y]=[]),c[y][w]=g):c[or(w)+x]=g,l.cellFormula){for(O=!1,j=0;j<_.length;++j){var U=_[j];p.r>=U[0].s.r&&p.r<=U[0].e.r&&w>=U[0].s.c&&w<=U[0].e.c&&(g.F=mt(U[0]),O=!0)}!O&&V.length>3&&(g.f=V[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>w&&(d.s.c=w),d.e.r<p.r&&(d.e.r=p.r),d.e.c<w&&(d.e.c=w),l.cellDates&&h&&g.t=="n"&&ol(tt[h.numFmtId])){var J=bi(g.v);J&&(g.t="d",g.v=new Date(J.y,J.m-1,J.d,J.H,J.M,J.S,J.u))}F&&(F.type=="XLDAPR"&&(g.D=!0),F=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},w=V[0].c==-1?w+1:V[0].c,l.dense?(c[y]||(c[y]=[]),c[y][w]=g):c[or(w)+x]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>w&&(d.s.c=w),d.e.r<p.r&&(d.e.r=p.r),d.e.c<w&&(d.e.c=w),F&&(F.type=="XLDAPR"&&(g.D=!0),F=void 0);break;case 176:N.push(V);break;case 49:F=((l.xlmeta||{}).Cell||[])[V-1];break;case 494:var Q=a["!id"][V.relId];for(Q?(V.Target=Q.Target,V.loc&&(V.Target+="#"+V.loc),V.Rel=Q):V.relId==""&&(V.Target="#"+V.loc),y=V.rfx.s.r;y<=V.rfx.e.r;++y)for(w=V.rfx.s.c;w<=V.rfx.e.c;++w)l.dense?(c[y]||(c[y]=[]),c[y][w]||(c[y][w]={t:"z",v:void 0}),c[y][w].l=V):(S=ot({c:w,r:y}),c[S]||(c[S]={t:"z",v:void 0}),c[S].l=V);break;case 426:if(!l.cellFormula)break;_.push(V),b=l.dense?c[y][w]:c[or(w)+x],b.f=ya(V[1],d,{r:p.r,c:w},k,l),b.F=mt(V[0]);break;case 427:if(!l.cellFormula)break;E[ot(V[0].s)]=V[1],b=l.dense?c[y][w]:c[or(w)+x],b.f=ya(V[1],d,{r:p.r,c:w},k,l);break;case 60:if(!l.cellStyles)break;for(;V.e>=V.s;)A[V.e--]={width:V.w/256,hidden:!!(V.flags&1),level:V.level},I||(I=!0,NN(V.w/256)),Li(A[V.e+1]);break;case 161:c["!autofilter"]={ref:mt(V)};break;case 476:c["!margins"]=V;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),V.name&&(s.Sheets[r].CodeName=V.name),(V.above||V.left)&&(c["!outline"]={above:V.above,left:V.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),V.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!re.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+oe.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=mt(u||d)),l.sheetRows&&c["!ref"]){var q=Ct(c["!ref"]);l.sheetRows<=+q.e.r&&(q.e.r=l.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=mt(q))}return N.length>0&&(c["!merges"]=N),A.length>0&&(c["!cols"]=A),P.length>0&&(c["!rows"]=P),c}function Kge(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Yt(t),t.z=t.z||tt[14],t.v=zr(lr(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=ro(s.cellXfs,t,s),t.l&&i["!links"].push([ot(c),t.l]),t.c&&i["!comments"].push([ot(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=ON(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?_e(e,18,cge(t,c)):_e(e,7,oge(t,c))):(c.t="str",o?_e(e,17,wge(t,c)):_e(e,6,vge(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?_e(e,13,pge(t,c)):_e(e,2,hge(t,c)):o?_e(e,16,fge(t,c)):_e(e,5,dge(t,c)),!0;case"b":return c.t="b",o?_e(e,15,tge(t,c)):_e(e,4,Zpe(t,c)),!0;case"e":return c.t="e",o?_e(e,14,sge(t,c)):_e(e,3,age(t,c)),!0}return o?_e(e,12,Qpe(t,c)):_e(e,1,Xpe(t,c)),!0}function zge(e,t,r,a){var s=Ct(t["!ref"]||"A1"),i,o="",l=[];_e(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){o=br(d),Wpe(e,t,s,d);var f=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(l[m]=or(m)),i=l[m]+o;var p=c?(t[d]||[])[m]:t[i];if(!p){f=!1;continue}f=Kge(e,p,d,m,a,t,f)}}_e(e,146)}function Vge(e,t){!t||!t["!merges"]||(_e(e,177,Tge(t["!merges"].length)),t["!merges"].forEach(function(r){_e(e,176,Oge(r))}),_e(e,178))}function Hge(e,t){!t||!t["!cols"]||(_e(e,390),t["!cols"].forEach(function(r,a){r&&_e(e,60,Dge(a,r))}),_e(e,391))}function Gge(e,t){!t||!t["!ref"]||(_e(e,648),_e(e,649,$ge(Ct(t["!ref"]))),_e(e,650))}function Xge(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Wt(r,-1,a[1].Target.replace(/#.*$/,""),yt.HLINK);_e(e,494,Ege(a,s))}}),delete t["!links"]}function Yge(e,t,r,a){if(t["!comments"].length>0){var s=Wt(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",yt.VML);_e(e,551,hN("rId"+s)),t["!legacy"]=s}}function Qge(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:mt(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Ma(i);l.s.r==l.e.r&&(l.e.r=Ma(t["!ref"]).e.r,i=mt(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),_e(e,161,iu(Ct(i))),_e(e,162)}}function Jge(e,t,r){_e(e,133),_e(e,137,Lge(t,r)),_e(e,138),_e(e,134)}function Zge(e,t){t["!protect"]&&_e(e,535,Bge(t["!protect"]))}function eye(e,t,r,a){var s=za(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Ct(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],_e(s,129),(r.vbaraw||o["!outline"])&&_e(s,147,Hpe(l,o["!outline"])),_e(s,148,Kpe(c)),Jge(s,o,r.Workbook),Hge(s,o),zge(s,o,e,t),Zge(s,o),Qge(s,o,r,e),Vge(s,o),Xge(s,o,a),o["!margins"]&&_e(s,476,Fge(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Gge(s,o),Yge(s,o,e,a),_e(s,130),s.end()}function tye(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Pt((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function rye(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=tye(f);d.s.r=d.s.c=0,d.e.c=l,u=or(l),m[0].forEach(function(p,g){o[u+br(g)]={t:"n",v:p,z:m[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=mt(d)),o}function aye(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(LI);return l&&TN(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function nye(e,t){e.l+=10;var r=Ca(e);return{name:r}}function sye(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return ai(e,function(c,u,d){switch(d){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var _N=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],iye=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],oye=[],lye=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function ST(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=sr(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function CT(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=sr(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function WI(e){CT(e.WBProps,_N),CT(e.CalcPr,lye),ST(e.WBView,iye),ST(e.Sheets,oye),nc.date1904=sr(e.WBProps.date1904)}function cye(e){return!e.Workbook||!e.Workbook.WBProps?"false":sr(e.Workbook.WBProps.date1904)?"true":"false"}var uye="][*?/\\".split("");function qI(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return uye.forEach(function(a){if(e.indexOf(a)!=-1){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function dye(e,t,r){e.forEach(function(a,s){qI(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function KI(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];dye(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)cpe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var fye=/<\w+:workbook/;function mye(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(_a,function(c,u){var d=lt(c);switch(Ns(d[0])){case"<?xml":break;case"<workbook":c.match(fye)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":_N.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=sr(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ht(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Pt(Ht(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Ht(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),sr(d.hidden||"0")&&(i.Hidden=!0),o=u+c.length;break;case"</definedName>":i.Ref=Pt(Ht(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),ll.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return WI(r),r}function zI(e){var t=[_r];t[t.length]=Re("workbook",null,{xmlns:ll[0],"xmlns:r":Wr.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(_N.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=Re("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:qt(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Re("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Re("definedName",qt(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function hye(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Nb(e),r.name=Ca(e),r}function xye(e,t){return t||(t=Se(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),hN(e.strRelID,t),Jr(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function pye(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Ca(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function gye(e,t){t||(t=Se(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),M6(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function yye(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function vye(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Yue(e),o=ape(e,0,r),l=mN(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function bye(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],Nf[16]={n:"BrtFRTArchID$",f:yye},ai(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ya(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(d),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),WI(r),r.Names=i,r.supbooks=o,r}function wye(e,t){_e(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};_e(e,156,xye(s))}_e(e,144)}function Nye(e,t){t||(t=Se(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Jr("SheetJS",t),Jr(df.version,t),Jr(df.version,t),Jr("7262",t),t.length>t.l?t.slice(0,t.l):t}function jye(e,t){t||(t=Se(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Sye(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(_e(e,135),_e(e,158,jye(s)),_e(e,136))}}function Cye(e,t){var r=za();return _e(r,131),_e(r,128,Nye()),_e(r,153,gye(e.Workbook&&e.Workbook.WBProps||null)),Sye(r,e),wye(r,e),_e(r,132),r.end()}function kye(e,t,r){return t.slice(-4)===".bin"?bye(e,r):mye(e,r)}function Oye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?qge(e,a,r,s,i,o,l):bpe(e,a,r,s,i,o,l)}function Tye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?sye(e,a,r,s,i):aye(e,a,r,s,i)}function _ye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Phe():Ihe()}function Eye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Ehe():Ahe()}function Aye(e,t,r,a){return t.slice(-4)===".bin"?Ome(e,r,a):xme(e,r,a)}function Pye(e,t,r){return SI(e,r)}function Iye(e,t,r){return t.slice(-4)===".bin"?D0e(e,r):A0e(e,r)}function Dye(e,t,r){return t.slice(-4)===".bin"?Che(e,r):phe(e,r)}function Mye(e,t,r){return t.slice(-4)===".bin"?mhe(e):dhe(e)}function Fye(e,t,r,a){return r.slice(-4)===".bin"?hhe(e,t,r,a):void 0}function Rye(e,t,r){return t.slice(-4)===".bin"?lhe(e,t,r):uhe(e,t,r)}function Lye(e,t,r){return(t.slice(-4)===".bin"?Cye:zI)(e)}function $ye(e,t,r,a,s){return(t.slice(-4)===".bin"?eye:$I)(e,r,a,s)}function Bye(e,t,r){return(t.slice(-4)===".bin"?Rme:NI)(e,r)}function Uye(e,t,r){return(t.slice(-4)===".bin"?R0e:hI)(e,r)}function Wye(e,t,r){return(t.slice(-4)===".bin"?khe:OI)(e)}function qye(e){return(e.slice(-4)===".bin"?che:CI)()}var VI=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,HI=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Wn(e,t){var r=e.split(/\s+/),a=[];if(t||(a[0]=r[0]),r.length===1)return a;var s=e.match(VI),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(HI),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function Kye(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(VI),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(HI),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var nd;function zye(e,t){var r=nd[e]||Pt(e);return r==="General"?Go(t):dn(r,t)}function Vye(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=sr(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=lr(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Pt(t)]=s}function Hye(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||ni[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mf(e.v):e.w=Go(e.v):e.w=zye(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=nd[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&ol(a)){var s=bi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Gye(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=ome[a.Pattern]||a.Pattern)}e[t.ID]=t}function Xye(e,t,r,a,s,i,o,l,c,u){var d="General",f=a.StyleID,m={};u=u||{};var p=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(d=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=sr(e);break;case"String":a.t="s",a.r=WO(Pt(e)),a.v=e.indexOf("<")>-1?Pt(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(lr(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=Pt(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=B6[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=WO(t||e));break}if(Hye(a,d,u),u.cellFormula!==!1)if(a.Formula){var h=Pt(a.Formula);h.charCodeAt(0)==61&&(h=h.slice(1)),a.f=ac(h,s),delete a.Formula,a.ArrayRange=="RC"?a.F=ac("RC:RC",s):a.ArrayRange&&(a.F=ac(a.ArrayRange,s),c.push([Ct(a.F),a.F]))}else for(g=0;g<c.length;++g)s.r>=c[g][0].s.r&&s.r<=c[g][0].e.r&&s.c>=c[g][0].s.c&&s.c<=c[g][0].e.c&&(a.F=c[g][1]);u.cellStyles&&(p.forEach(function(y){!m.patternType&&y.patternType&&(m.patternType=y.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Yye(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function $g(e,t){var r=t||{};au();var a=Ul(aN(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(typeof _t<"u"?a=_t.utils.decode(65001,$h(a)):a=Ht(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Yt(r);return o.type="string",Rc.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(et){s.indexOf("<"+et)>=0&&(i=!0)}),i)return Pve(a,r);nd={"General Number":"General","General Date":tt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tt[15],"Short Date":tt[14],"Long Time":tt[19],"Medium Time":tt[18],"Short Time":tt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tt[2],Standard:tt[4],Percent:tt[10],Scientific:tt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],m=r.dense?[]:{},p="",g={},h={},y=Wn('<Data ss:Type="String">'),w=0,S=0,v=0,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},b={},N={},j="",O=0,_=[],E={},k={},C=0,A=[],P=[],I={},F=[],q,H=!1,V=[],re=[],oe={},U=0,J=0,Q={Sheets:[],WBProps:{date1904:!1}},X={};pf.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ee="";l=pf.exec(a);)switch(l[3]=(ee=l[3]).toLowerCase()){case"data":if(ee=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Xye(a.slice(w,l.index),j,y,c[c.length-1][0]=="comment"?I:g,{c:S,r:v},b,F[S],h,V,r):(j="",y=Wn(l[0]),w=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(P.length>0&&(g.c=P),(!r.sheetRows||r.sheetRows>v)&&g.v!==void 0&&(r.dense?(m[v]||(m[v]=[]),m[v][S]=g):m[or(S)+br(v)]=g),g.HRef&&(g.l={Target:Pt(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(U=S+(parseInt(g.MergeAcross,10)|0),J=v+(parseInt(g.MergeDown,10)|0),_.push({s:{c:S,r:v},e:{c:U,r:J}})),!r.sheetStubs)g.MergeAcross?S=U+1:++S;else if(g.MergeAcross||g.MergeDown){for(var ue=S;ue<=U;++ue)for(var we=v;we<=J;++we)(ue>S||we>v)&&(r.dense?(m[we]||(m[we]=[]),m[we][ue]={t:"z"}):m[or(ue)+br(we)]={t:"z"});S=U+1}else++S;else g=Kye(l[0]),g.Index&&(S=+g.Index-1),S<x.s.c&&(x.s.c=S),S>x.e.c&&(x.e.c=S),l[0].slice(-2)==="/>"&&++S,P=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(v<x.s.r&&(x.s.r=v),v>x.e.r&&(x.e.r=v),l[0].slice(-2)==="/>"&&(h=Wn(l[0]),h.Index&&(v=+h.Index-1)),S=0,++v):(h=Wn(l[0]),h.Index&&(v=+h.Index-1),oe={},(h.AutoFitHeight=="0"||h.Height)&&(oe.hpx=parseInt(h.Height,10),oe.hpt=wf(oe.hpx),re[v]=oe),h.Hidden=="1"&&(oe.hidden=!0,re[v]=oe));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(p),x.s.r<=x.e.r&&x.s.c<=x.e.c&&(m["!ref"]=mt(x),r.sheetRows&&r.sheetRows<=x.e.r&&(m["!fullref"]=m["!ref"],x.e.r=r.sheetRows-1,m["!ref"]=mt(x))),_.length&&(m["!merges"]=_),F.length>0&&(m["!cols"]=F),re.length>0&&(m["!rows"]=re),d[p]=m}else x={s:{r:2e6,c:2e6},e:{r:0,c:0}},v=S=0,c.push([l[3],!1]),u=Wn(l[0]),p=Pt(u.Name),m=r.dense?[]:{},_=[],V=[],re=[],X={name:p,Hidden:0},Q.Sheets.push(X);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),F=[],H=!1}break;case"style":l[1]==="/"?Gye(b,N,r):N=Wn(l[0]);break;case"numberformat":N.nf=Pt(Wn(l[0]).Format||"General"),nd[N.nf]&&(N.nf=nd[N.nf]);for(var ne=0;ne!=392&&tt[ne]!=N.nf;++ne);if(ne==392){for(ne=57;ne!=392;++ne)if(tt[ne]==null){gs(N.nf,ne);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(q=Wn(l[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!H&&q.wpx>10){H=!0,Na=bI;for(var ie=0;ie<F.length;++ie)F[ie]&&Li(F[ie])}H&&Li(q),F[q.Index-1||F.length]=q;for(var Ne=0;Ne<+q.Span;++Ne)F[F.length]=Yt(q);break;case"namedrange":if(l[1]==="/")break;Q.Names||(Q.Names=[]);var W=lt(l[0]),Ee={Name:W.Name,Ref:ac(W.RefersTo.slice(1),{r:0,c:0})};Q.Sheets.length>0&&(Ee.Sheet=Q.Sheets.length-1),Q.Names.push(Ee);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=a.slice(O,l.index):O=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;N.Interior=Wn(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?wde(E,ee,a.slice(C,l.index)):C=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));Yye(I),P.push(I)}else c.push([l[3],!1]),u=Wn(l[0]),I={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var B=Wn(l[0]);m["!autofilter"]={ref:ac(B.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return ET(a,r);var ve=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ve=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ve=!1}break;case"excelworkbook":switch(l[3]){case"date1904":Q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ve=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ve=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(C,l.index)){case"SheetHidden":X.Hidden=1;break;case"SheetVeryHidden":X.Hidden=2;break}else C=l.index+l[0].length;break;case"header":m["!margins"]||Io(m["!margins"]={},"xlml"),isNaN(+lt(l[0]).Margin)||(m["!margins"].header=+lt(l[0]).Margin);break;case"footer":m["!margins"]||Io(m["!margins"]={},"xlml"),isNaN(+lt(l[0]).Margin)||(m["!margins"].footer=+lt(l[0]).Margin);break;case"pagemargins":var ye=lt(l[0]);m["!margins"]||Io(m["!margins"]={},"xlml"),isNaN(+ye.Top)||(m["!margins"].top=+ye.Top),isNaN(+ye.Left)||(m["!margins"].left=+ye.Left),isNaN(+ye.Right)||(m["!margins"].right=+ye.Right),isNaN(+ye.Bottom)||(m["!margins"].bottom=+ye.Bottom);break;case"displayrighttoleft":Q.Views||(Q.Views=[]),Q.Views[0]||(Q.Views[0]={}),Q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ve=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ve=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ve=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ve=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ve=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ve=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ve=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ve=!1}break;case"smarttags":break;default:ve=!1;break}if(ve||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Vye(k,ee,A,a.slice(C,l.index)):(A=l,C=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var fe={};return!r.bookSheets&&!r.bookProps&&(fe.Sheets=d),fe.SheetNames=f,fe.Workbook=Q,fe.SSF=Yt(tt),fe.Props=E,fe.Custprops=k,fe}function _b(e,t){switch(PN(t=t||{}),t.type||"base64"){case"base64":return $g(un(e),t);case"binary":case"buffer":case"file":return $g(e,t);case"array":return $g(eo(e),t)}}function Qye(e,t){var r=[];return e.Props&&r.push(Nde(e.Props,t)),e.Custprops&&r.push(jde(e.Props,e.Custprops)),r.join("")}function Jye(){return""}function Zye(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(Re("NumberFormat",null,{"ss:Format":qt(tt[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(Re("Style",i.join(""),o))}),Re("Styles",r.join(""))}function GI(e){return Re("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+CN(e.Ref,{r:0,c:0})})}function eve(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(GI(s)))}return Re("Names",r.join(""))}function tve(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(GI(l)))}return i.join("")}function rve(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Re("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Re("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Re("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(Re("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(la("ProtectContents","True")),e["!protect"].objects&&s.push(la("ProtectObjects","True")),e["!protect"].scenarios&&s.push(la("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(la("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(la("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":Re("WorksheetOptions",s.join(""),{xmlns:Za.x})}function ave(e){return e.map(function(t){var r=Cue(t.t||""),a=Re("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Re("Comment",a,{"ss:Author":t.a})}).join("")}function nve(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+qt(CN(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=hr(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=qt(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=qt(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",m="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",m=String(e.v);break;case"b":f="Boolean",m=e.v?"1":"0";break;case"e":f="Error",m=ni[e.v];break;case"d":f="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||tt[14]);break;case"s":f="String",m=Sue(e.v||"");break}var p=ro(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var g=e.v!=null?m:"",h=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(h+=ave(e.c)),Re("Cell",h,l)}function sve(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Lc(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function ive(e,t,r,a){if(!e["!ref"])return"";var s=Ct(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(y,w){Li(y);var S=!!y.width,v=pp(w,y),x={"ss:Index":w+1};S&&(x["ss:Width"]=vf(v.width)),y.hidden&&(x["ss:Hidden"]="1"),l.push(Re("Column",null,x))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[sve(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>u)&&!(i[o].e.c<f)&&!(i[o].e.r<u)){(i[o].s.c!=f||i[o].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:f},g=ot(p),h=c?(e[u]||[])[f]:e[g];d.push(nve(h,g,e,t,r,a,p))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function ove(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?tve(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?ive(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(rve(i,t,e,r)),a.join("")}function lve(e,t){t||(t={}),e.SSF||(e.SSF=Yt(tt)),e.SSF&&(au(),zf(e.SSF),t.revssf=up(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],ro(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Qye(e,t)),r.push(Jye()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(Re("Worksheet",ove(a,t,e),{"ss:Name":qt(e.SheetNames[a])}));return r[2]=Zye(e,t),r[3]=eve(e),_r+Re("Workbook",r.join(""),{xmlns:Za.ss,"xmlns:o":Za.o,"xmlns:x":Za.x,"xmlns:ss":Za.ss,"xmlns:dt":Za.dt,"xmlns:html":Za.html})}function cve(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=tde(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=rde(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var uve=[60,1084,2066,2165,2175];function dve(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=Is(r,r.l),u=Eb[c],d=0;u!=null&&uve.indexOf(c)>-1;)i=Is(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+i),o.push(l),r.l+=4+i,u=Eb[c=Is(r,r.l)];var f=Qr(o);oa(f,0);var m=0;f.lens=[];for(var p=0;p<o.length;++p)f.lens.push(m),m+=o[p].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,s)}function is(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=tt[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||ni[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mf(e.v):e.w=Go(e.v):e.w=dn(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&ol(tt[a]||String(a))){var s=bi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function z0(e,t,r){return{v:e,ixfe:t,t:r}}function fve(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],u="",d={},f,m="",p,g,h,y,w={},S=[],v,x,b=[],N=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},O={},_=function(Qe){return Qe<8?Eo[Qe]:Qe<64&&N[Qe-8]||Eo[Qe]},E=function(Qe,ft,ut){var Ge=ft.XF.data;if(!(!Ge||!Ge.patternType||!ut||!ut.cellStyles)){ft.s={},ft.s.patternType=Ge.patternType;var Sr;(Sr=yf(_(Ge.icvFore)))&&(ft.s.fgColor={rgb:Sr}),(Sr=yf(_(Ge.icvBack)))&&(ft.s.bgColor={rgb:Sr})}},k=function(Qe,ft,ut){if(!(oe>1)&&!(ut.sheetRows&&Qe.r>=ut.sheetRows)){if(ut.cellStyles&&ft.XF&&ft.XF.data&&E(Qe,ft,ut),delete ft.ixfe,delete ft.XF,f=Qe,m=ot(Qe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Qe.r<o.s.r&&(o.s.r=Qe.r),Qe.c<o.s.c&&(o.s.c=Qe.c),Qe.r+1>o.e.r&&(o.e.r=Qe.r+1),Qe.c+1>o.e.c&&(o.e.c=Qe.c+1),ut.cellFormula&&ft.f){for(var Ge=0;Ge<S.length;++Ge)if(!(S[Ge][0].s.c>Qe.c||S[Ge][0].s.r>Qe.r)&&!(S[Ge][0].e.c<Qe.c||S[Ge][0].e.r<Qe.r)){ft.F=mt(S[Ge][0]),(S[Ge][0].s.c!=Qe.c||S[Ge][0].s.r!=Qe.r)&&delete ft.f,ft.f&&(ft.f=""+ya(S[Ge][1],o,Qe,V,C));break}}ut.dense?(s[Qe.r]||(s[Qe.r]=[]),s[Qe.r][Qe.c]=ft):s[m]=ft}},C={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(C.password=t.password);var A,P=[],I=[],F=[],q=[],H=!1,V=[];V.SheetNames=C.snames,V.sharedf=C.sharedf,V.arrayf=C.arrayf,V.names=[],V.XTI=[];var re=0,oe=0,U=0,J=[],Q=[],X;C.codepage=1200,Tn(1200);for(var ee=!1;e.l<e.length-1;){var ue=e.l,we=e.read_shift(2);if(we===0&&re===10)break;var ne=e.l===e.length?0:e.read_shift(2),ie=Eb[we];if(ie&&ie.f){if(t.bookSheets&&re===133&&we!==133)break;if(re=we,ie.r===2||ie.r==12){var Ne=e.read_shift(2);if(ne-=2,!C.enc&&Ne!==we&&((Ne&255)<<8|Ne>>8)!==we)throw new Error("rt mismatch: "+Ne+"!="+we);ie.r==12&&(e.l+=10,ne-=10)}var W={};if(we===10?W=ie.f(e,ne,C):W=dve(we,ie,e,ne,C),oe==0&&[9,521,1033,2057].indexOf(re)===-1)continue;switch(we){case 34:r.opts.Date1904=j.WBProps.date1904=W;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(C.enc||(e.l=0),C.enc=W,!t.password)throw new Error("File is password-protected");if(W.valid==null)throw new Error("Encryption scheme unsupported");if(!W.valid)throw new Error("Password is incorrect");break;case 92:C.lastuser=W;break;case 66:var Ee=Number(W);switch(Ee){case 21010:Ee=1200;break;case 32768:Ee=1e4;break;case 32769:Ee=1252;break}Tn(C.codepage=Ee),ee=!0;break;case 317:C.rrtabid=W;break;case 25:C.winlocked=W;break;case 439:r.opts.RefreshAll=W;break;case 12:r.opts.CalcCount=W;break;case 16:r.opts.CalcDelta=W;break;case 17:r.opts.CalcIter=W;break;case 13:r.opts.CalcMode=W;break;case 14:r.opts.CalcPrecision=W;break;case 95:r.opts.CalcSaveRecalc=W;break;case 15:C.CalcRefMode=W;break;case 2211:r.opts.FullCalc=W;break;case 129:W.fDialog&&(s["!type"]="dialog"),W.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),W.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:b.push(W);break;case 430:V.push([W]),V[V.length-1].XTI=[];break;case 35:case 547:V[V.length-1].push(W);break;case 24:case 536:X={Name:W.Name,Ref:ya(W.rgce,o,null,V,C)},W.itab>0&&(X.Sheet=W.itab-1),V.names.push(X),V[0]||(V[0]=[],V[0].XTI=[]),V[V.length-1].push(W),W.Name=="_xlnm._FilterDatabase"&&W.itab>0&&W.rgce&&W.rgce[0]&&W.rgce[0][0]&&W.rgce[0][0][0]=="PtgArea3d"&&(Q[W.itab-1]={ref:mt(W.rgce[0][0][1][2])});break;case 22:C.ExternCount=W;break;case 23:V.length==0&&(V[0]=[],V[0].XTI=[]),V[V.length-1].XTI=V[V.length-1].XTI.concat(W),V.XTI=V.XTI.concat(W);break;case 2196:if(C.biff<8)break;X!=null&&(X.Comment=W[1]);break;case 18:s["!protect"]=W;break;case 19:W!==0&&C.WTF&&console.error("Password verifier: "+W);break;case 133:i[W.pos]=W,C.snames.push(W.name);break;case 10:{if(--oe)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=mt(o),t.sheetRows&&t.sheetRows<=o.e.r){var B=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=mt(o),o.e.r=B}o.e.r++,o.e.c++}P.length>0&&(s["!merges"]=P),I.length>0&&(s["!objects"]=I),F.length>0&&(s["!cols"]=F),q.length>0&&(s["!rows"]=q),j.Sheets.push(O)}u===""?d=s:a[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(C.biff===8&&(C.biff={9:2,521:3,1033:4}[we]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[W.BIFFVer]||8),C.biffguess=W.BIFFVer==0,W.BIFFVer==0&&W.dt==4096&&(C.biff=5,ee=!0,Tn(C.codepage=28591)),C.biff==8&&W.BIFFVer==0&&W.dt==16&&(C.biff=2),oe++)break;if(s=t.dense?[]:{},C.biff<8&&!ee&&(ee=!0,Tn(C.codepage=t.codepage||1252)),C.biff<5||W.BIFFVer==0&&W.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ve={pos:e.l-ne,name:u};i[ve.pos]=ve,C.snames.push(u)}else u=(i[ue]||{name:""}).name;W.dt==32&&(s["!type"]="chart"),W.dt==64&&(s["!type"]="macro"),P=[],I=[],C.arrayf=S=[],F=[],q=[],H=!1,O={Hidden:(i[ue]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[W.r]||[])[W.c]:s[ot({c:W.c,r:W.r})])&&++W.c,v={ixfe:W.ixfe,XF:b[W.ixfe]||{},v:W.val,t:"n"},U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:W.c,r:W.r},v,t);break;case 5:case 517:v={ixfe:W.ixfe,XF:b[W.ixfe],v:W.val,t:W.t},U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:W.c,r:W.r},v,t);break;case 638:v={ixfe:W.ixfe,XF:b[W.ixfe],v:W.rknum,t:"n"},U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:W.c,r:W.r},v,t);break;case 189:for(var ye=W.c;ye<=W.C;++ye){var fe=W.rkrec[ye-W.c][0];v={ixfe:fe,XF:b[fe],v:W.rkrec[ye-W.c][1],t:"n"},U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:ye,r:W.r},v,t)}break;case 6:case 518:case 1030:{if(W.val=="String"){l=W;break}if(v=z0(W.val,W.cell.ixfe,W.tt),v.XF=b[v.ixfe],t.cellFormula){var et=W.formula;if(et&&et[0]&&et[0][0]&&et[0][0][0]=="PtgExp"){var Ke=et[0][0][1][0],gt=et[0][0][1][1],Xe=ot({r:Ke,c:gt});w[Xe]?v.f=""+ya(W.formula,o,W.cell,V,C):v.F=((t.dense?(s[Ke]||[])[gt]:s[Xe])||{}).F}else v.f=""+ya(W.formula,o,W.cell,V,C)}U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k(W.cell,v,t),l=W}break;case 7:case 519:if(l)l.val=W,v=z0(W,l.cell.ixfe,"s"),v.XF=b[v.ixfe],t.cellFormula&&(v.f=""+ya(l.formula,o,l.cell,V,C)),U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k(l.cell,v,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(W);var dt=ot(W[0].s);if(p=t.dense?(s[W[0].s.r]||[])[W[0].s.c]:s[dt],t.cellFormula&&p){if(!l||!dt||!p)break;p.f=""+ya(W[1],o,W[0],V,C),p.F=mt(W[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;w[ot(l.cell)]=W[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[ot(l.cell)],(p||{}).f=""+ya(W[0],o,f,V,C)}}break;case 253:v=z0(c[W.isst].t,W.ixfe,"s"),c[W.isst].h&&(v.h=c[W.isst].h),v.XF=b[v.ixfe],U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:W.c,r:W.r},v,t);break;case 513:t.sheetStubs&&(v={ixfe:W.ixfe,XF:b[W.ixfe],t:"z"},U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:W.c,r:W.r},v,t));break;case 190:if(t.sheetStubs)for(var He=W.c;He<=W.C;++He){var kt=W.ixfe[He-W.c];v={ixfe:kt,XF:b[kt],t:"z"},U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:He,r:W.r},v,t)}break;case 214:case 516:case 4:v=z0(W.val,W.ixfe,"s"),v.XF=b[v.ixfe],U>0&&(v.z=J[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),k({c:W.c,r:W.r},v,t);break;case 0:case 512:oe===1&&(o=W);break;case 252:c=W;break;case 1054:if(C.biff==4){J[U++]=W[1];for(var vt=0;vt<U+163&&tt[vt]!=W[1];++vt);vt>=163&&gs(W[1],U+163)}else gs(W[1],W[0]);break;case 30:{J[U++]=W;for(var St=0;St<U+163&&tt[St]!=W;++St);St>=163&&gs(W,U+163)}break;case 229:P=P.concat(W);break;case 93:I[W.cmo[0]]=C.lastobj=W;break;case 438:C.lastobj.TxO=W;break;case 127:C.lastobj.ImData=W;break;case 440:for(y=W[0].s.r;y<=W[0].e.r;++y)for(h=W[0].s.c;h<=W[0].e.c;++h)p=t.dense?(s[y]||[])[h]:s[ot({c:h,r:y})],p&&(p.l=W[1]);break;case 2048:for(y=W[0].s.r;y<=W[0].e.r;++y)for(h=W[0].s.c;h<=W[0].e.c;++h)p=t.dense?(s[y]||[])[h]:s[ot({c:h,r:y})],p&&p.l&&(p.l.Tooltip=W[1]);break;case 28:{if(C.biff<=5&&C.biff>=2)break;p=t.dense?(s[W[0].r]||[])[W[0].c]:s[ot(W[0])];var Lt=I[W[2]];p||(t.dense?(s[W[0].r]||(s[W[0].r]=[]),p=s[W[0].r][W[0].c]={t:"z"}):p=s[ot(W[0])]={t:"z"},o.e.r=Math.max(o.e.r,W[0].r),o.s.r=Math.min(o.s.r,W[0].r),o.e.c=Math.max(o.e.c,W[0].c),o.s.c=Math.min(o.s.c,W[0].c)),p.c||(p.c=[]),g={a:W[1],t:Lt.TxO.t},p.c.push(g)}break;case 2173:ehe(b[W.ixfe],W.ext);break;case 125:{if(!C.cellStyles)break;for(;W.e>=W.s;)F[W.e--]={width:W.w/256,level:W.level||0,hidden:!!(W.flags&1)},H||(H=!0,NN(W.w/256)),Li(F[W.e+1])}break;case 520:{var Et={};W.level!=null&&(q[W.r]=Et,Et.level=W.level),W.hidden&&(q[W.r]=Et,Et.hidden=!0),W.hpt&&(q[W.r]=Et,Et.hpt=W.hpt,Et.hpx=Lc(W.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Io(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[we]]=W;break;case 161:s["!margins"]||Io(s["!margins"]={}),s["!margins"].header=W.header,s["!margins"].footer=W.footer;break;case 574:W.RTL&&(j.Views[0].RTL=!0);break;case 146:N=W;break;case 2198:A=W;break;case 140:x=W;break;case 442:u?O.CodeName=W||O.name:j.WBProps.CodeName=W||"ThisWorkbook";break}}else ie||console.error("Missing Info for XLS Record 0x"+we.toString(16)),e.l+=ne}return r.SheetNames=jr(i).sort(function(fr,Qe){return Number(fr)-Number(Qe)}).map(function(fr){return i[fr].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Q.forEach(function(fr,Qe){r.Sheets[r.SheetNames[Qe]]["!autofilter"]=fr}),r.Strings=c,r.SSF=Yt(tt),C.enc&&(r.Encryption=C.enc),A&&(r.Themes=A),r.Metadata={},x!==void 0&&(r.Metadata.Country=x),V.names.length>0&&(j.Names=V.names),r.Workbook=j,r}var sd={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function mve(e,t,r){var a=Je.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=iT(a,jb,sd.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Je.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=iT(o,Sb,sd.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(V6(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function hve(e,t){var r=[],a=[],s=[],i=0,o,l=FO(jb,"n"),c=FO(Sb,"n");if(e.Props)for(o=jr(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=jr(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<s.length;++i)Z6.indexOf(s[i][0])>-1||z6.indexOf(s[i][0])>-1||s[i][1]!=null&&u.push(s[i]);a.length&&Je.utils.cfb_add(t,"/SummaryInformation",oT(a,sd.SI,c,Sb)),(r.length||u.length)&&Je.utils.cfb_add(t,"/DocumentSummaryInformation",oT(r,sd.DSI,l,jb,u.length?u:null,sd.UDI))}function EN(e,t){t||(t={}),PN(t),lp(),t.codepage&&op(t.codepage);var r,a;if(e.FullPaths){if(Je.find(e,"/encryption"))throw new Error("File is password-protected");r=Je.find(e,"!CompObj"),a=Je.find(e,"/Workbook")||Je.find(e,"/Book")}else{switch(t.type){case"base64":e=tn(un(e));break;case"binary":e=tn(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}oa(e,0),a={content:e}}var s,i;if(r&&cve(r),t.bookProps&&!t.bookSheets)s={};else{var o=pt?"buffer":"array";if(a&&a.content)s=fve(a.content,t);else if((i=Je.find(e,"PerfectOffice_MAIN"))&&i.content)s=Po.to_workbook(i.content,(t.type=o,t));else if((i=Je.find(e,"NativeContent_MAIN"))&&i.content)s=Po.to_workbook(i.content,(t.type=o,t));else throw(i=Je.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Je.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=The(e))}var l={};return e.FullPaths&&mve(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function xve(e,t){var r=t||{},a=Je.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Je.utils.cfb_add(a,s,XI(e,r)),r.biff==8&&(e.Props||e.Custprops)&&hve(e,a),r.biff==8&&e.vbaraw&&_he(a,Je.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var Nf={0:{f:Bpe},1:{f:Gpe},2:{f:mge},3:{f:rge},4:{f:Jpe},5:{f:uge},6:{f:yge},7:{f:ige},8:{f:Cge},9:{f:Sge},10:{f:Nge},11:{f:jge},12:{f:Ype},13:{f:xge},14:{f:nge},15:{f:ege},16:{f:BI},17:{f:bge},18:{f:lge},19:{f:fN},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:vye},40:{},42:{},43:{f:yme},44:{f:pme},45:{f:wme},46:{f:jme},47:{f:Nme},48:{},49:{f:que},50:{},51:{f:ahe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:uI},62:{f:gge},63:{f:fhe},64:{f:Uge},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Oa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Rge},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Vpe},148:{f:qpe,p:16},151:{f:Age},152:{},153:{f:pye},154:{},155:{},156:{f:hye},157:{},158:{},159:{T:1,f:I0e},160:{T:-1},161:{T:1,f:fl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:kge},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:the},336:{T:-1},337:{f:ihe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Nb},357:{},358:{},359:{},360:{T:1},361:{},362:{f:cI},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Pge},427:{f:Ige},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Mge},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:zpe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:_ge},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Nb},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:jhe},633:{T:1},634:{T:-1},635:{T:1,f:whe},636:{T:-1},637:{f:Hue},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:nye},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Wge},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Eb={6:{f:Rg},10:{f:ii},12:{f:Dr},13:{f:Dr},14:{f:Cr},15:{f:Cr},16:{f:ja},17:{f:Cr},18:{f:Cr},19:{f:Dr},20:{f:mT},21:{f:mT},23:{f:cI},24:{f:xT},25:{f:Cr},26:{},27:{},28:{f:Wfe},29:{},34:{f:Cr},35:{f:hT},38:{f:ja},39:{f:ja},40:{f:ja},41:{f:ja},42:{f:Cr},43:{f:Cr},47:{f:eme},49:{f:xfe},51:{f:Dr},60:{},61:{f:ufe},64:{f:Cr},65:{f:hfe},66:{f:Dr},77:{},80:{},81:{},82:{},85:{f:Dr},89:{},90:{},91:{},92:{f:Zde},93:{f:zfe},94:{},95:{f:Cr},96:{},97:{},99:{f:Cr},125:{f:uI},128:{f:Efe},129:{f:tfe},130:{f:Dr},131:{f:Cr},132:{f:Cr},133:{f:rfe},134:{},140:{f:Zfe},141:{f:Dr},144:{},146:{f:r0e},151:{},152:{},153:{},154:{},155:{},156:{f:Dr},157:{},158:{},160:{f:c0e},161:{f:s0e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:kfe},190:{f:Ofe},193:{f:ii},197:{},198:{},199:{},200:{},201:{},202:{f:Cr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Dr},220:{},221:{f:Cr},222:{},224:{f:_fe},225:{f:Jde},226:{f:ii},227:{},229:{f:qfe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:nfe},253:{f:gfe},255:{f:ife},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:eI},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Cr},353:{f:ii},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Mfe},431:{f:Cr},432:{},433:{},434:{},437:{},438:{f:Gfe},439:{f:Cr},440:{f:Xfe},441:{},442:{f:Gf},443:{},444:{f:Dr},445:{},446:{},448:{f:ii},449:{f:cfe,r:2},450:{f:ii},512:{f:uT},513:{f:l0e},515:{f:Ife},516:{f:vfe},517:{f:fT},519:{f:u0e},520:{f:ofe},523:{},545:{f:pT},549:{f:cT},566:{},574:{f:ffe},638:{f:Cfe},659:{},1048:{},1054:{f:wfe},1084:{},1212:{f:$fe},2048:{f:Qfe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:W0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ii},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:a0e,r:12},2173:{f:Zme,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Cr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Lfe,r:12},2197:{},2198:{f:Hme,r:12},2199:{},2200:{},2201:{},2202:{f:Bfe,r:12},2203:{f:ii},2204:{},2205:{},2206:{},2207:{},2211:{f:lfe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Dr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:i0e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:t0e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:uT},1:{},2:{f:x0e},3:{f:m0e},4:{f:f0e},5:{f:fT},7:{f:g0e},8:{},9:{f:W0},11:{},22:{f:Dr},30:{f:jfe},31:{},32:{},33:{f:pT},36:{},37:{f:cT},50:{f:y0e},62:{},52:{},67:{},68:{f:Dr},69:{},86:{},126:{},127:{f:d0e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:v0e},223:{},234:{},354:{},421:{},518:{f:Rg},521:{f:W0},536:{f:xT},547:{f:hT},561:{},579:{},1030:{f:Rg},1033:{f:W0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function $e(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&cN(r)&&e.push(r)}}function pve(e,t,r,a){var s=a||(r||[]).length||0;if(s<=8224)return $e(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Jf(e,t,r){return e||(e=Se(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function gve(e,t,r,a){var s=Se(9);return Jf(s,e,t),tI(r,a||"b",s),s}function yve(e,t,r){var a=Se(8+2*r.length);return Jf(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function vve(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?zr(lr(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?$e(e,2,p0e(r,a,s)):$e(e,3,h0e(r,a,s));return;case"b":case"e":$e(e,5,gve(r,a,t.v,t.t));return;case"s":case"str":$e(e,4,yve(r,a,(t.v||"").slice(0,255)));return}$e(e,1,Jf(null,r,a))}function bve(e,t,r,a){var s=Array.isArray(t),i=Ct(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=mt(i)}for(var u=i.s.r;u<=i.e.r;++u){l=br(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=or(d)),o=c[d]+l;var f=s?(t[u]||[])[d]:t[o];f&&vve(e,f,u,d)}}}function wve(e,t){for(var r=t||{},a=za(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return $e(a,r.biff==4?1033:r.biff==3?521:9,vN(e,16,r)),bve(a,e.Sheets[e.SheetNames[s]],s,r),$e(a,10),a.end()}function Nve(e,t,r){$e(e,49,pfe({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function jve(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&$e(e,1054,Nfe(s,t[s],r))})}function Sve(e,t){var r=Se(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),$e(e,2151,r),r=Se(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),iI(Ct(t["!ref"]||"A1"),r),r.write_shift(4,4),$e(e,2152,r)}function Cve(e,t){for(var r=0;r<16;++r)$e(e,224,dT({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){$e(e,224,dT(a,0,t))})}function kve(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];$e(e,440,Yfe(a)),a[1].Tooltip&&$e(e,2048,Jfe(a))}delete t["!links"]}function Ove(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&$e(e,125,n0e(pp(s,a),s))})}}function Tve(e,t,r,a,s){var i=16+ro(s.cellXfs,t,s);if(t.v==null&&!t.bf){$e(e,513,Jo(r,a,i));return}if(t.bf)$e(e,6,tpe(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?zr(lr(t.v)):t.v;$e(e,515,Dfe(r,a,o,i));break;case"b":case"e":$e(e,517,Pfe(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=ON(s.Strings,t.v,s.revStrings);$e(e,253,yfe(r,a,l,i))}else $e(e,516,bfe(r,a,(t.v||"").slice(0,255),i,s));break;default:$e(e,513,Jo(r,a,i))}}function _ve(e,t,r){var a=za(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",m=[],p=Ct(i["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}$e(a,2057,vN(r,16,t)),$e(a,13,Nn(1)),$e(a,12,Nn(100)),$e(a,15,Pa(!0)),$e(a,17,Pa(!1)),$e(a,16,Yo(.001)),$e(a,95,Pa(!0)),$e(a,42,Pa(!1)),$e(a,43,Pa(!1)),$e(a,130,Nn(1)),$e(a,128,Afe([0,0])),$e(a,131,Pa(!1)),$e(a,132,Pa(!1)),u&&Ove(a,i["!cols"]),$e(a,512,Sfe(p,t)),u&&(i["!links"]=[]);for(var h=p.s.r;h<=p.e.r;++h){f=br(h);for(var y=p.s.c;y<=p.e.c;++y){h===p.s.r&&(m[y]=or(y)),d=m[y]+f;var w=c?(i[h]||[])[y]:i[d];w&&(Tve(a,w,h,y,t),u&&w.l&&i["!links"].push([d,w.l]))}}var S=l.CodeName||l.name||s;return u&&$e(a,574,mfe((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&$e(a,229,Kfe(i["!merges"])),u&&kve(a,i),$e(a,442,rI(S)),u&&Sve(a,i),$e(a,10),a.end()}function Eve(e,t,r){var a=za(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if($e(a,2057,vN(e,5,r)),r.bookType=="xla"&&$e(a,135),$e(a,225,l?Nn(1200):null),$e(a,193,Pde(2)),c&&$e(a,191),c&&$e(a,192),$e(a,226),$e(a,92,efe("SheetJS",r)),$e(a,66,Nn(l?1200:1252)),l&&$e(a,353,Nn(0)),l&&$e(a,448),$e(a,317,o0e(e.SheetNames.length)),l&&e.vbaraw&&$e(a,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";$e(a,442,rI(u))}$e(a,156,Nn(17)),$e(a,25,Pa(!1)),$e(a,18,Pa(!1)),$e(a,19,Nn(0)),l&&$e(a,431,Pa(!1)),l&&$e(a,444,Nn(0)),$e(a,61,dfe()),$e(a,64,Pa(!1)),$e(a,141,Nn(0)),$e(a,34,Pa(cye(e)=="true")),$e(a,14,Pa(!0)),l&&$e(a,439,Pa(!1)),$e(a,218,Nn(0)),Nve(a,e,r),jve(a,e.SSF,r),Cve(a,r),l&&$e(a,352,Pa(!1));var d=a.end(),f=za();l&&$e(f,140,e0e()),l&&r.Strings&&pve(f,252,sfe(r.Strings)),$e(f,10);var m=f.end(),p=za(),g=0,h=0;for(h=0;h<e.SheetNames.length;++h)g+=(l?12:11)+(l?2:1)*e.SheetNames[h].length;var y=d.length+g+m.length;for(h=0;h<e.SheetNames.length;++h){var w=i[h]||{};$e(p,133,afe({pos:y,hs:w.Hidden||0,dt:0,name:e.SheetNames[h]},r)),y+=t[h].length}var S=p.end();if(g!=S.length)throw new Error("BS8 "+g+" != "+S.length);var v=[];return d.length&&v.push(d),S.length&&v.push(S),m.length&&v.push(m),Qr(v)}function Ave(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=Yt(tt)),e&&e.SSF&&(au(),zf(e.SSF),r.revssf=up(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,IN(r),r.cellXfs=[],ro(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=_ve(s,r,e);return a.unshift(Eve(e,a,r)),Qr(a)}function XI(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=Ma(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Ave(e,t);case 4:case 3:case 2:return wve(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function kT(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=gue(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var h=c[o].trim(),y=h.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(y!="<td"&&y!="<th")){var w=h.split(/<\/t[dh]>/i);for(l=0;l<w.length;++l){var S=w[l].trim();if(S.match(/<t[dh]/i)){for(var v=S,x=0;v.charAt(0)=="<"&&(x=v.indexOf(">"))>-1;)v=v.slice(x+1);for(var b=0;b<g.length;++b){var N=g[b];N.s.c==d&&N.s.r<u&&u<=N.e.r&&(d=N.e.c+1,b=-1)}var j=lt(S.slice(0,S.indexOf(">")));m=j.colspan?+j.colspan:1,((f=+j.rowspan)>1||m>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+m-1}});var O=j.t||j["data-t"]||"";if(!v.length){d+=m;continue}if(v=j6(v),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!v.length){d+=m;continue}var _={t:"s",v};r.raw||!v.trim().length||O=="s"||(v==="TRUE"?_={t:"b",v:!0}:v==="FALSE"?_={t:"b",v:!1}:isNaN(ts(v))?isNaN(Fc(v).getDate())||(_={t:"d",v:lr(v)},r.cellDates||(_={t:"n",v:zr(_.v)}),_.z=r.dateNF||tt[14]):_={t:"n",v:ts(v)}),r.dense?(a[u]||(a[u]=[]),a[u][d]=_):a[ot({r:u,c:d})]=_,d+=m}}}}return a["!ref"]=mt(p),g.length&&(a["!merges"]=g),a}function YI(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var d=ot({r,c:o}),f=a.dense?(e[r]||[])[o]:e[d],m=f&&f.v!=null&&(f.h||rN(f.w||(bs(f),f.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),p.id=(a.id||"sjs")+"-"+d,i.push(Re("td",m,p))}}var g="<tr>";return g+i.join("")+"</tr>"}var QI='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',JI="</body></html>";function Pve(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return to(kT(r[0],t),t);var a=LN();return r.forEach(function(s,i){$N(a,kT(s,t),"Sheet"+(i+1))}),a}function ZI(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function eD(e,t){var r=t||{},a=r.header!=null?r.header:QI,s=r.footer!=null?r.footer:JI,i=[a],o=Ma(e["!ref"]);r.dense=Array.isArray(e),i.push(ZI(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(YI(e,o,l,r));return i.push("</table>"+s),i.join("")}function tD(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?hr(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var d=Ma(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],m=0,p=e["!rows"]||(e["!rows"]=[]),g=0,h=0,y=0,w=0,S=0,v=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&h<c;++g){var x=l[g];if(OT(x)){if(a.display)continue;p[h]={hidden:!0}}var b=x.children;for(y=w=0;y<b.length;++y){var N=b[y];if(!(a.display&&OT(N))){var j=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):j6(N.innerHTML),O=N.getAttribute("data-z")||N.getAttribute("z");for(m=0;m<f.length;++m){var _=f[m];_.s.c==w+i&&_.s.r<h+s&&h+s<=_.e.r&&(w=_.e.c+1-i,m=-1)}v=+N.getAttribute("colspan")||1,((S=+N.getAttribute("rowspan")||1)>1||v>1)&&f.push({s:{r:h+s,c:w+i},e:{r:h+s+(S||1)-1,c:w+i+(v||1)-1}});var E={t:"s",v:j},k=N.getAttribute("data-t")||N.getAttribute("t")||"";j!=null&&(j.length==0?E.t=k||"z":a.raw||j.trim().length==0||k=="s"||(j==="TRUE"?E={t:"b",v:!0}:j==="FALSE"?E={t:"b",v:!1}:isNaN(ts(j))?isNaN(Fc(j).getDate())||(E={t:"d",v:lr(j)},a.cellDates||(E={t:"n",v:zr(E.v)}),E.z=a.dateNF||tt[14]):E={t:"n",v:ts(j)})),E.z===void 0&&O!=null&&(E.z=O);var C="",A=N.getElementsByTagName("A");if(A&&A.length)for(var P=0;P<A.length&&!(A[P].hasAttribute("href")&&(C=A[P].getAttribute("href"),C.charAt(0)!="#"));++P);C&&C.charAt(0)!="#"&&(E.l={Target:C}),a.dense?(e[h+s]||(e[h+s]=[]),e[h+s][w+i]=E):e[ot({c:w+i,r:h+s})]=E,u.e.c<w+i&&(u.e.c=w+i),w+=v}}++h}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,h-1+s),e["!ref"]=mt(u),h>=c&&(e["!fullref"]=mt((u.e.r=l.length-g+h-1+s,u))),e}function rD(e,t){var r=t||{},a=r.dense?[]:{};return tD(a,e,t)}function Ive(e,t){return to(rD(e,t),t)}function OT(e){var t="",r=Dve(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Dve(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Mve(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Pt(t.replace(/<[^>]*>/g,""));return[r]}var TT={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function aD(e,t){var r=t||{},a=aN(e),s=[],i,o,l={name:""},c="",u=0,d,f,m={},p=[],g=r.dense?[]:{},h,y,w={value:""},S="",v=0,x=[],b=-1,N=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},O=0,_={},E=[],k={},C=0,A=0,P=[],I=1,F=1,q=[],H={Names:[]},V={},re=["",""],oe=[],U={},J="",Q=0,X=!1,ee=!1,ue=0;for(pf.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");h=pf.exec(a);)switch(h[3]=h[3].replace(/_.*$/,"")){case"table":case"":h[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?g["!ref"]=mt(j):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(g["!fullref"]=g["!ref"],j.e.r=r.sheetRows-1,g["!ref"]=mt(j)),E.length&&(g["!merges"]=E),P.length&&(g["!rows"]=P),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=g,ee=!1):h[0].charAt(h[0].length-2)!=="/"&&(d=lt(h[0],!1),b=N=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,g=r.dense?[]:{},E=[],P=[],ee=!0);break;case"table-row-group":h[1]==="/"?--O:++O;break;case"table-row":case"":if(h[1]==="/"){b+=I,I=1;break}if(f=lt(h[0],!1),f.?b=f.-1:b==-1&&(b=0),I=+f["number-rows-repeated"]||1,I<10)for(ue=0;ue<I;++ue)O>0&&(P[b+ue]={level:O});N=-1;break;case"covered-table-cell":h[1]!=="/"&&++N,r.sheetStubs&&(r.dense?(g[b]||(g[b]=[]),g[b][N]={t:"z"}):g[ot({r:b,c:N})]={t:"z"}),S="",x=[];break;case"table-cell":case"":if(h[0].charAt(h[0].length-2)==="/")++N,w=lt(h[0],!1),F=parseInt(w["number-columns-repeated"]||"1",10),y={t:"z",v:null},w.formula&&r.cellFormula!=!1&&(y.f=jT(Pt(w.formula))),(w.||w["value-type"])=="string"&&(y.t="s",y.v=Pt(w["string-value"]||""),r.dense?(g[b]||(g[b]=[]),g[b][N]=y):g[ot({r:b,c:N})]=y),N+=F-1;else if(h[1]!=="/"){++N,S="",v=0,x=[],F=1;var we=I?b+I-1:b;if(N>j.e.c&&(j.e.c=N),N<j.s.c&&(j.s.c=N),b<j.s.r&&(j.s.r=b),we>j.e.r&&(j.e.r=we),w=lt(h[0],!1),oe=[],U={},y={t:w.||w["value-type"],v:null},r.cellFormula)if(w.formula&&(w.formula=Pt(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(C=parseInt(w["number-matrix-rows-spanned"],10)||0,A=parseInt(w["number-matrix-columns-spanned"],10)||0,k={s:{r:b,c:N},e:{r:b+C-1,c:N+A-1}},y.F=mt(k),q.push([k,y.F])),w.formula)y.f=jT(w.formula);else for(ue=0;ue<q.length;++ue)b>=q[ue][0].s.r&&b<=q[ue][0].e.r&&N>=q[ue][0].s.c&&N<=q[ue][0].e.c&&(y.F=q[ue][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(C=parseInt(w["number-rows-spanned"],10)||0,A=parseInt(w["number-columns-spanned"],10)||0,k={s:{r:b,c:N},e:{r:b+C-1,c:N+A-1}},E.push(k)),w["number-columns-repeated"]&&(F=parseInt(w["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=sr(w["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(w.value);break;case"percentage":y.t="n",y.v=parseFloat(w.value);break;case"currency":y.t="n",y.v=parseFloat(w.value);break;case"date":y.t="d",y.v=lr(w["date-value"]),r.cellDates||(y.t="n",y.v=zr(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=hue(w["time-value"])/86400,r.cellDates&&(y.t="d",y.v=dp(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(w.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",w["string-value"]!=null&&(S=Pt(w["string-value"]),x=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(X=!1,y.t==="s"&&(y.v=S||"",x.length&&(y.R=x),X=v==0),V.Target&&(y.l=V),oe.length>0&&(y.c=oe,oe=[]),S&&r.cellText!==!1&&(y.w=S),X&&(y.t="z",delete y.v),(!X||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=b))for(var ne=0;ne<I;++ne){if(F=parseInt(w["number-columns-repeated"]||"1",10),r.dense)for(g[b+ne]||(g[b+ne]=[]),g[b+ne][N]=ne==0?y:Yt(y);--F>0;)g[b+ne][N+F]=Yt(y);else for(g[ot({r:b+ne,c:N})]=y;--F>0;)g[ot({r:b+ne,c:N+F})]=Yt(y);j.e.c<=N&&(j.e.c=N)}F=parseInt(w["number-columns-repeated"]||"1",10),N+=F-1,F=0,y={},S="",x=[]}V={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!0]);break;case"annotation":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i;U.t=S,x.length&&(U.R=x),U.a=J,oe.push(U)}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!1]);J="",Q=0,S="",v=0,x=[];break;case"creator":h[1]==="/"?J=a.slice(Q,h.index):Q=h.index+h[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!1]);S="",v=0,x=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(h[1]==="/"){if(_[l.name]=c,(i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&(c="",l=lt(h[0],!1),s.push([h[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=lt(h[0],!1),c+=TT[h[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=lt(h[0],!1),c+=TT[h[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(h[0].slice(-2)==="/>")break;if(h[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(u,h.index);break}else u=h.index+h[0].length;break;case"named-range":o=lt(h[0],!1),re=Lg(o["cell-range-address"]);var ie={Name:o.name,Ref:re[0]+"!"+re[1]};ee&&(ie.Sheet=p.length),H.Names.push(ie);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(h[1]==="/"&&(!w||!w["string-value"])){var Ne=Mve(a.slice(v,h.index));S=(S.length>0?S+`
`:"")+Ne[0]}else lt(h[0],!1),v=h.index+h[0].length;break;case"s":break;case"database-range":if(h[1]==="/")break;try{re=Lg(lt(h[0])["target-range-address"]),m[re[0]]["!autofilter"]={ref:re[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(h[1]!=="/"){if(V=lt(h[0],!1),!V.href)break;V.Target=Pt(V.href),delete V.href,V.Target.charAt(0)=="#"&&V.Target.indexOf(".")>-1?(re=Lg(V.Target.slice(1)),V.Target="#"+re[0]+"!"+re[1]):V.Target.match(/^\.\.[\\\/]/)&&(V.Target=V.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(h[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(h)}}var W={Sheets:m,SheetNames:p,Workbook:H};return r.bookSheets&&delete W.Sheets,W}function _T(e,t){t=t||{},wn(e,"META-INF/manifest.xml")&&mde(Ir(e,"META-INF/manifest.xml"),t);var r=rn(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=aD(Ht(r),t);return wn(e,"meta.xml")&&(a.Props=q6(Ir(e,"meta.xml"))),a}function ET(e,t){return aD(e,t)}var Fve=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+xf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return _r+t}}(),AT=function(){var e=function(i){return qt(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+qt(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Ma(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,g=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var h="",y=i["!rows"]||[];for(u=0;u<f.s.r;++u)h=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+h+`></table:table-row>
`);for(;u<=f.e.r;++u){for(h=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+h+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var w=!1,S={},v="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>u)&&!(m[p].e.c<d)&&!(m[p].e.r<u)){(m[p].s.c!=d||m[p].s.r!=u)&&(w=!0),S["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,S["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(w){c.push(r);continue}var x=ot({r:u,c:d}),b=g?(i[u]||[])[d]:i[x];if(b&&b.f&&(S["table:formula"]=qt(ope(b.f)),b.F&&b.F.slice(0,x.length)==x)){var N=Ma(b.F);S["table:number-matrix-columns-spanned"]=N.e.c-N.s.c+1,S["table:number-matrix-rows-spanned"]=N.e.r-N.s.r+1}if(!b){c.push(t);continue}switch(b.t){case"b":v=b.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=b.v?"true":"false";break;case"n":v=b.w||String(b.v||0),S["office:value-type"]="float",S["office:value"]=b.v||0;break;case"s":case"str":v=b.v==null?"":b.v,S["office:value-type"]="string";break;case"d":v=b.w||lr(b.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=lr(b.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(v);if(b.l&&b.l.Target){var O=b.l.Target;O=O.charAt(0)=="#"?"#"+lpe(O.slice(1)):O,O.charAt(0)!="#"&&!O.match(/^\w+:/)&&(O="../"+O),j=Re("text:a",j,{"xlink:href":O.replace(/&/g,"&amp;")})}c.push("          "+Re("table:table-cell",Re("text:p",j,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Li(f),f.ods=l;var m=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[_r],u=xf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=xf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(W6().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function nD(e,t){if(t.bookType=="fods")return AT(e,t);var r=Zw(),a="",s=[],i=[];return a="mimetype",ht(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",ht(r,a,AT(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",ht(r,a,Fve(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",ht(r,a,_r+W6()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",ht(r,a,pde(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",ht(r,a,hde(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Zo(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ab(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ht(eo(e))}function Rve(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):tn(fs(e))}function Lve(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Bi(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function PT(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function $ve(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function Bve(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function jf(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Ut(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function wr(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Mt(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=jf(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=jf(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function aa(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(Ut(a*8+s.type)),s.type==2&&t.push(Ut(s.data.length)),t.push(s.data))})}),Bi(t)}function AN(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function vn(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=jf(e,a),i=Mt(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:wr(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Mt(l.data),u=wr(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=wr(i[3][0].data)>>>0>0),r.push(o)}return r}function bl(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Ut(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Ut(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Ut(o.data.length)}],a[2].push({data:aa(o.meta),type:2})});var i=aa(a);t.push(Ut(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),Bi(t)}function Uve(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=jf(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Bi(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=Bi(s);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function bn(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Uve(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Bi(t)}function wl(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Ut(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return Bi(t)}function Wve(e,t,r,a){var s=Zo(e),i=s.getUint32(4,!0),o=(a>1?12:8)+PT(i&(a>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=PT(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(d.setTime(d.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function qve(e,t,r){var a=Zo(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(c=$ve(e,i),i+=16),s&2&&(u=a.getFloat64(i,!0),i+=8),s&4&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function Bg(e,t){var r=new Uint8Array(32),a=Zo(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Bve(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function Ug(e,t){var r=new Uint8Array(32),a=Zo(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function Kve(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Wve(e,t,r,e[0]);case 5:return qve(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ga(e){var t=Mt(e);return jf(t[1][0].data)}function IT(e,t){var r=Mt(t.data),a=wr(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Mt(o.data),c=wr(l[1][0].data)>>>0;switch(a){case 1:i[c]=Ab(l[3][0].data);break;case 8:{var u=e[ga(l[9][0].data)][0],d=Mt(u.data),f=e[ga(d[1][0].data)][0],m=wr(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Mt(f.data);i[c]=p[3].map(function(g){return Ab(g.data)}).join("")}break}}),i}function zve(e,t){var r,a,s,i,o,l,c,u,d,f,m,p,g,h,y=Mt(e),w=wr(y[1][0].data)>>>0,S=wr(y[2][0].data)>>>0,v=((a=(r=y[8])==null?void 0:r[0])==null?void 0:a.data)&&wr(y[8][0].data)>0||!1,x,b;if((i=(s=y[7])==null?void 0:s[0])!=null&&i.data&&t!=0)x=(l=(o=y[7])==null?void 0:o[0])==null?void 0:l.data,b=(u=(c=y[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=y[4])==null?void 0:d[0])!=null&&f.data&&t!=1)x=(p=(m=y[4])==null?void 0:m[0])==null?void 0:p.data,b=(h=(g=y[3])==null?void 0:g[0])==null?void 0:h.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var N=v?4:1,j=Zo(x),O=[],_=0;_<x.length/2;++_){var E=j.getUint16(_*2,!0);E<65535&&O.push([_,E])}if(O.length!=S)throw"Expected ".concat(S," cells, found ").concat(O.length);var k=[];for(_=0;_<O.length-1;++_)k[O[_][0]]=b.subarray(O[_][1]*N,O[_+1][1]*N);return O.length>=1&&(k[O[O.length-1][0]]=b.subarray(O[O.length-1][1]*N)),{R:w,cells:k}}function Vve(e,t){var r,a=Mt(t.data),s=(r=a==null?void 0:a[7])!=null&&r[0]?wr(a[7][0].data)>>>0>0?1:0:-1,i=AN(a[5],function(o){return zve(o,s)});return{nrows:wr(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function Hve(e,t,r){var a,s=Mt(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(wr(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(wr(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=mt(i);var o=Mt(s[4][0].data),l=IT(e,e[ga(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?IT(e,e[ga(o[17][0].data)][0]):[],u=Mt(o[3][0].data),d=0;u[1].forEach(function(f){var m=Mt(f.data),p=e[ga(m[2][0].data)][0],g=wr(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var h=Vve(e,p);h.data.forEach(function(y,w){y.forEach(function(S,v){var x=ot({r:d+w,c:v}),b=Kve(S,l,c);b&&(r[x]=b)})}),d+=h.nrows})}function Gve(e,t){var r=Mt(t.data),a={"!ref":"A1"},s=e[ga(r[2][0].data)],i=wr(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Hve(e,s[0],a),a}function Xve(e,t){var r,a=Mt(t.data),s={name:(r=a[1])!=null&&r[0]?Ab(a[1][0].data):"",sheets:[]},i=AN(a[2],ga);return i.forEach(function(o){e[o].forEach(function(l){var c=wr(l.meta[1][0].data);c==6e3&&s.sheets.push(Gve(e,l))})}),s}function Yve(e,t){var r=LN(),a=Mt(t.data),s=AN(a[1],ga);if(s.forEach(function(i){e[i].forEach(function(o){var l=wr(o.meta[1][0].data);if(l==2){var c=Xve(e,o);c.sheets.forEach(function(u,d){$N(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Wg(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=bn(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=vn(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&wr(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(u){var d=wr(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Yve(i,l)}function Qve(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&wr(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Zo(e[7][0].data),d=0,f=[],m=Zo(e[4][0].data),p=0,g=[],h=0;h<t.length;++h){if(t[h]==null){u.setUint16(h*2,65535,!0),m.setUint16(h*2,65535);continue}u.setUint16(h*2,d,!0),m.setUint16(h*2,p,!0);var y,w;switch(typeof t[h]){case"string":y=Bg({t:"s",v:t[h]},r),w=Ug({t:"s",v:t[h]},r);break;case"number":y=Bg({t:"n",v:t[h]},r),w=Ug({t:"n",v:t[h]},r);break;case"boolean":y=Bg({t:"b",v:t[h]},r),w=Ug({t:"b",v:t[h]},r);break;default:throw new Error("Unsupported value "+t[h])}f.push(y),d+=y.length,g.push(w),p+=w.length,++c}for(e[2][0].data=Ut(c);h<e[7][0].data.length/2;++h)u.setUint16(h*2,65535,!0),m.setUint16(h*2,65535,!0);return e[6][0].data=Bi(f),e[3][0].data=Bi(g),c}function Jve(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Ma(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(mt(a)));var i=Qh(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(J){return J.forEach(function(Q){typeof Q=="string"&&o.push(Q)})});var l={},c=[],u=Je.read(t.numbers,{type:"base64"});u.FileIndex.map(function(J,Q){return[J,u.FullPaths[Q]]}).forEach(function(J){var Q=J[0],X=J[1];if(Q.type==2&&Q.name.match(/\.iwa/)){var ee=Q.content,ue=bn(ee),we=vn(ue);we.forEach(function(ne){c.push(ne.id),l[ne.id]={deps:[],location:X,type:wr(ne.messages[0].meta[1][0].data)}})}}),c.sort(function(J,Q){return J-Q});var d=c.filter(function(J){return J>1}).map(function(J){return[J,Ut(J)]});u.FileIndex.map(function(J,Q){return[J,u.FullPaths[Q]]}).forEach(function(J){var Q=J[0];if(J[1],!!Q.name.match(/\.iwa/)){var X=vn(bn(Q.content));X.forEach(function(ee){ee.messages.forEach(function(ue){d.forEach(function(we){ee.messages.some(function(ne){return wr(ne.meta[1][0].data)!=11006&&Lve(ne.data,we[1])})&&l[we[0]].deps.push(ee.id)})})})}});for(var f=Je.find(u,l[1].location),m=vn(bn(f.content)),p,g=0;g<m.length;++g){var h=m[g];h.id==1&&(p=h)}var y=ga(Mt(p.messages[0].data)[1][0].data);for(f=Je.find(u,l[y].location),m=vn(bn(f.content)),g=0;g<m.length;++g)h=m[g],h.id==y&&(p=h);for(y=ga(Mt(p.messages[0].data)[2][0].data),f=Je.find(u,l[y].location),m=vn(bn(f.content)),g=0;g<m.length;++g)h=m[g],h.id==y&&(p=h);for(y=ga(Mt(p.messages[0].data)[2][0].data),f=Je.find(u,l[y].location),m=vn(bn(f.content)),g=0;g<m.length;++g)h=m[g],h.id==y&&(p=h);var w=Mt(p.messages[0].data);{w[6][0].data=Ut(a.e.r+1),w[7][0].data=Ut(a.e.c+1);var S=ga(w[46][0].data),v=Je.find(u,l[S].location),x=vn(bn(v.content));{for(var b=0;b<x.length&&x[b].id!=S;++b);if(x[b].id!=S)throw"Bad ColumnRowUIDMapArchive";var N=Mt(x[b].messages[0].data);N[1]=[],N[2]=[],N[3]=[];for(var j=0;j<=a.e.c;++j){var O=[];O[1]=O[2]=[{type:0,data:Ut(j+420690)}],N[1].push({type:2,data:aa(O)}),N[2].push({type:0,data:Ut(j)}),N[3].push({type:0,data:Ut(j)})}N[4]=[],N[5]=[],N[6]=[];for(var _=0;_<=a.e.r;++_)O=[],O[1]=O[2]=[{type:0,data:Ut(_+726270)}],N[4].push({type:2,data:aa(O)}),N[5].push({type:0,data:Ut(_)}),N[6].push({type:0,data:Ut(_)});x[b].messages[0].data=aa(N)}v.content=wl(bl(x)),v.size=v.content.length,delete w[46];var E=Mt(w[4][0].data);{E[7][0].data=Ut(a.e.r+1);var k=Mt(E[1][0].data),C=ga(k[2][0].data);v=Je.find(u,l[C].location),x=vn(bn(v.content));{if(x[0].id!=C)throw"Bad HeaderStorageBucket";var A=Mt(x[0].messages[0].data);for(_=0;_<i.length;++_){var P=Mt(A[2][0].data);P[1][0].data=Ut(_),P[4][0].data=Ut(i[_].length),A[2][_]={type:A[2][0].type,data:aa(P)}}x[0].messages[0].data=aa(A)}v.content=wl(bl(x)),v.size=v.content.length;var I=ga(E[2][0].data);v=Je.find(u,l[I].location),x=vn(bn(v.content));{if(x[0].id!=I)throw"Bad HeaderStorageBucket";for(A=Mt(x[0].messages[0].data),j=0;j<=a.e.c;++j)P=Mt(A[2][0].data),P[1][0].data=Ut(j),P[4][0].data=Ut(a.e.r+1),A[2][j]={type:A[2][0].type,data:aa(P)};x[0].messages[0].data=aa(A)}v.content=wl(bl(x)),v.size=v.content.length;var F=ga(E[4][0].data);(function(){for(var J=Je.find(u,l[F].location),Q=vn(bn(J.content)),X,ee=0;ee<Q.length;++ee){var ue=Q[ee];ue.id==F&&(X=ue)}var we=Mt(X.messages[0].data);{we[3]=[];var ne=[];o.forEach(function(W,Ee){ne[1]=[{type:0,data:Ut(Ee)}],ne[2]=[{type:0,data:Ut(1)}],ne[3]=[{type:2,data:Rve(W)}],we[3].push({type:2,data:aa(ne)})})}X.messages[0].data=aa(we);var ie=bl(Q),Ne=wl(ie);J.content=Ne,J.size=J.content.length})();var q=Mt(E[3][0].data);{var H=q[1][0];delete q[2];var V=Mt(H.data);{var re=ga(V[2][0].data);(function(){for(var J=Je.find(u,l[re].location),Q=vn(bn(J.content)),X,ee=0;ee<Q.length;++ee){var ue=Q[ee];ue.id==re&&(X=ue)}var we=Mt(X.messages[0].data);{delete we[6],delete q[7];var ne=new Uint8Array(we[5][0].data);we[5]=[];for(var ie=0,Ne=0;Ne<=a.e.r;++Ne){var W=Mt(ne);ie+=Qve(W,i[Ne],o),W[1][0].data=Ut(Ne),we[5].push({data:aa(W),type:2})}we[1]=[{type:0,data:Ut(a.e.c+1)}],we[2]=[{type:0,data:Ut(a.e.r+1)}],we[3]=[{type:0,data:Ut(ie)}],we[4]=[{type:0,data:Ut(a.e.r+1)}]}X.messages[0].data=aa(we);var Ee=bl(Q),B=wl(Ee);J.content=B,J.size=J.content.length})()}H.data=aa(V)}E[3][0].data=aa(q)}w[4][0].data=aa(E)}p.messages[0].data=aa(w);var oe=bl(m),U=wl(oe);return f.content=U,f.size=f.content.length,u}function sD(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function PN(e){sD([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function IN(e){sD([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Zve(e){return yt.WS.indexOf(e)>-1?"sheet":e==yt.CS?"chart":e==yt.DS?"dialog":e==yt.MS?"macro":e&&e.length?e:"sheet"}function ebe(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Zve(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function tbe(e,t,r,a,s,i,o,l,c,u,d,f){try{i[a]=td(rn(e,r,!0),t);var m=Ir(e,t),p;switch(l){case"sheet":p=Oye(m,t,s,c,i[a],u,d,f);break;case"chart":if(p=Tye(m,t,s,c,i[a],u,d,f),!p||!p["!drawel"])break;var g=Ru(p["!drawel"].Target,t),h=gf(g),y=xhe(rn(e,g,!0),td(rn(e,h,!0),g)),w=Ru(y,g),S=gf(w);p=rye(rn(e,w,!0),w,c,td(rn(e,S,!0),w),u,p);break;case"macro":p=_ye(m,t,s,c,i[a],u,d,f);break;case"dialog":p=Eye(m,t,s,c,i[a],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=p;var v=[];i&&i[a]&&jr(i[a]).forEach(function(x){var b="";if(i[a][x].Type==yt.CMNT){b=Ru(i[a][x].Target,t);var N=Dye(Ir(e,b,!0),b,c);if(!N||!N.length)return;yT(p,N,!1)}i[a][x].Type==yt.TCMNT&&(b=Ru(i[a][x].Target,t),v=v.concat(ghe(Ir(e,b,!0),c)))}),v&&v.length&&yT(p,v,!0,c.people||[])}catch(x){if(c.WTF)throw x}}function gn(e){return e.charAt(0)=="/"?e.slice(1):e}function iD(e,t){if(au(),t=t||{},PN(t),wn(e,"META-INF/manifest.xml")||wn(e,"objectdata.xml"))return _T(e,t);if(wn(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Wg<"u"){if(e.FileIndex)return Wg(e);var r=Je.utils.cfb_new();return $O(e).forEach(function(P){ht(r,P,v6(e,P))}),Wg(r)}throw new Error("Unsupported NUMBERS file")}if(!wn(e,"[Content_Types].xml"))throw wn(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):wn(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=$O(e),s=dde(rn(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Ir(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Ir(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(rd=[],s.sst)try{rd=Iye(Ir(e,gn(s.sst)),s.sst,t)}catch(P){if(t.WTF)throw P}t.cellStyles&&s.themes.length&&(c=Pye(rn(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Aye(Ir(e,gn(s.style)),s.style,c,t))}s.links.map(function(P){try{var I=td(rn(e,gf(gn(P))),P);return Fye(Ir(e,gn(P)),I,P,t)}catch{}});var d=kye(Ir(e,gn(s.workbooks[0])),s.workbooks[0],t),f={},m="";s.coreprops.length&&(m=Ir(e,gn(s.coreprops[0]),!0),m&&(f=q6(m)),s.extprops.length!==0&&(m=Ir(e,gn(s.extprops[0]),!0),m&&yde(m,f,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=rn(e,gn(s.custprops[0]),!0),m&&(p=bde(m,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(I){return I.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var h={};t.bookDeps&&s.calcchain&&(h=Mye(Ir(e,gn(s.calcchain)),s.calcchain));var y=0,w={},S,v;{var x=d.Sheets;f.Worksheets=x.length,f.SheetNames=[];for(var b=0;b!=x.length;++b)f.SheetNames[b]=x[b].name}var N=i?"bin":"xml",j=s.workbooks[0].lastIndexOf("/"),O=(s.workbooks[0].slice(0,j+1)+"_rels/"+s.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");wn(e,O)||(O="xl/_rels/workbook."+N+".rels");var _=td(rn(e,O,!0),O.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Rye(Ir(e,gn(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=vhe(Ir(e,gn(s.people[0])),t)),_&&(_=ebe(_,d.Sheets));var E=Ir(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var k="sheet";if(_&&_[y]?(S="xl/"+_[y][1].replace(/[\/]?xl\//,""),wn(e,S)||(S=_[y][1]),wn(e,S)||(S=O.replace(/_rels\/.*$/,"")+_[y][1]),k=_[y][2]):(S="xl/worksheets/sheet"+(y+1-E)+"."+N,S=S.replace(/sheet0\./,"sheet.")),v=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var C=!1,A=0;A!=t.sheets.length;++A)typeof t.sheets[A]=="number"&&t.sheets[A]==y&&(C=1),typeof t.sheets[A]=="string"&&t.sheets[A].toLowerCase()==f.SheetNames[y].toLowerCase()&&(C=1);if(!C)continue e}}tbe(e,S,v,f.SheetNames[y],y,w,o,k,t,d,c,u)}return g={Directory:s,Workbook:d,Props:f,Custprops:p,Deps:h,Sheets:o,SheetNames:f.SheetNames,Strings:rd,Styles:u,Themes:c,SSF:Yt(tt)},t&&t.bookFiles&&(e.files?(g.keys=a,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(P,I){P=P.replace(/^Root Entry[\/]/,""),g.keys.push(P),g.files[P]=e.FileIndex[I]}))),t&&t.bookVBA&&(s.vba.length>0?g.vbaraw=Ir(e,gn(s.vba[0]),!0):s.defaults&&s.defaults.bin===Ohe&&(g.vbaraw=Ir(e,"xl/vbaProject.bin",!0))),g}function rbe(e,t){var r=t||{},a="Workbook",s=Je.find(e,a);try{if(a="/!DataSpaces/Version",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(L0e(s.content),a="/!DataSpaces/DataSpaceMap",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=B0e(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=U0e(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);q0e(s.content)}catch{}if(a="/EncryptionInfo",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=K0e(s.content);if(a="/EncryptedPackage",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function abe(e,t){return t.bookType=="ods"?nD(e,t):t.bookType=="numbers"?Jve(e,t):t.bookType=="xlsb"?nbe(e,t):oD(e,t)}function nbe(e,t){Wl=1024,e&&!e.SSF&&(e.SSF=Yt(tt)),e&&e.SSF&&(au(),zf(e.SSF),t.revssf=up(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ad?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=TI.indexOf(t.bookType)>-1,s=gN();IN(t=t||{});var i=Zw(),o="",l=0;if(t.cellXfs=[],ro(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",ht(i,o,K6(e.Props,t)),s.coreprops.push(o),Wt(t.rels,2,o,yt.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,ht(i,o,H6(e.Props)),s.extprops.push(o),Wt(t.rels,3,o,yt.EXT_PROPS),e.Custprops!==e.Props&&jr(e.Custprops||{}).length>0&&(o="docProps/custom.xml",ht(i,o,G6(e.Custprops)),s.custprops.push(o),Wt(t.rels,4,o,yt.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,ht(i,o,$ye(l-1,o,t,e,d)),s.sheets.push(o),Wt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,yt.WS[0])}if(f){var p=f["!comments"],g=!1,h="";p&&p.length>0&&(h="xl/comments"+l+"."+r,ht(i,h,Wye(p,h)),s.comments.push(h),Wt(d,-1,"../comments"+l+"."+r,yt.CMNT),g=!0),f["!legacy"]&&g&&ht(i,"xl/drawings/vmlDrawing"+l+".vml",kI(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&ht(i,gf(o),rc(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,ht(i,o,Uye(t.Strings,o,t)),s.strs.push(o),Wt(t.wbrels,-1,"sharedStrings."+r,yt.SST)),o="xl/workbook."+r,ht(i,o,Lye(e,o)),s.workbooks.push(o),Wt(t.rels,1,o,yt.WB),o="xl/theme/theme1.xml",ht(i,o,jN(e.Themes,t)),s.themes.push(o),Wt(t.wbrels,-1,"theme/theme1.xml",yt.THEME),o="xl/styles."+r,ht(i,o,Bye(e,o,t)),s.styles.push(o),Wt(t.wbrels,-1,"styles."+r,yt.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",ht(i,o,e.vbaraw),s.vba.push(o),Wt(t.wbrels,-1,"vbaProject.bin",yt.VBA)),o="xl/metadata."+r,ht(i,o,qye(o)),s.metadata.push(o),Wt(t.wbrels,-1,"metadata."+r,yt.XLMETA),ht(i,"[Content_Types].xml",U6(s,t)),ht(i,"_rels/.rels",rc(t.rels)),ht(i,"xl/_rels/workbook."+r+".rels",rc(t.wbrels)),delete t.revssf,delete t.ssf,i}function oD(e,t){Wl=1024,e&&!e.SSF&&(e.SSF=Yt(tt)),e&&e.SSF&&(au(),zf(e.SSF),t.revssf=up(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ad?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=TI.indexOf(t.bookType)>-1,s=gN();IN(t=t||{});var i=Zw(),o="",l=0;if(t.cellXfs=[],ro(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",ht(i,o,K6(e.Props,t)),s.coreprops.push(o),Wt(t.rels,2,o,yt.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,ht(i,o,H6(e.Props)),s.extprops.push(o),Wt(t.rels,3,o,yt.EXT_PROPS),e.Custprops!==e.Props&&jr(e.Custprops||{}).length>0&&(o="docProps/custom.xml",ht(i,o,G6(e.Custprops)),s.custprops.push(o),Wt(t.rels,4,o,yt.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,ht(i,o,$I(l-1,t,e,f)),s.sheets.push(o),Wt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,yt.WS[0])}if(m){var g=m["!comments"],h=!1,y="";if(g&&g.length>0){var w=!1;g.forEach(function(S){S[1].forEach(function(v){v.T==!0&&(w=!0)})}),w&&(y="xl/threadedComments/threadedComment"+l+"."+r,ht(i,y,yhe(g,d,t)),s.threadedcomments.push(y),Wt(f,-1,"../threadedComments/threadedComment"+l+"."+r,yt.TCMNT)),y="xl/comments"+l+"."+r,ht(i,y,OI(g)),s.comments.push(y),Wt(f,-1,"../comments"+l+"."+r,yt.CMNT),h=!0}m["!legacy"]&&h&&ht(i,"xl/drawings/vmlDrawing"+l+".vml",kI(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&ht(i,gf(o),rc(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,ht(i,o,hI(t.Strings,t)),s.strs.push(o),Wt(t.wbrels,-1,"sharedStrings."+r,yt.SST)),o="xl/workbook."+r,ht(i,o,zI(e)),s.workbooks.push(o),Wt(t.rels,1,o,yt.WB),o="xl/theme/theme1.xml",ht(i,o,jN(e.Themes,t)),s.themes.push(o),Wt(t.wbrels,-1,"theme/theme1.xml",yt.THEME),o="xl/styles."+r,ht(i,o,NI(e,t)),s.styles.push(o),Wt(t.wbrels,-1,"styles."+r,yt.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",ht(i,o,e.vbaraw),s.vba.push(o),Wt(t.wbrels,-1,"vbaProject.bin",yt.VBA)),o="xl/metadata."+r,ht(i,o,CI()),s.metadata.push(o),Wt(t.wbrels,-1,"metadata."+r,yt.XLMETA),d.length>1&&(o="xl/persons/person.xml",ht(i,o,bhe(d)),s.people.push(o),Wt(t.wbrels,-1,"persons/person.xml",yt.PEOPLE)),ht(i,"[Content_Types].xml",U6(s,t)),ht(i,"_rels/.rels",rc(t.rels)),ht(i,"xl/_rels/workbook."+r+".rels",rc(t.wbrels)),delete t.revssf,delete t.ssf,i}function DN(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=un(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function sbe(e,t){return Je.find(e,"EncryptedPackage")?rbe(e,t):EN(e,t)}function ibe(e,t){var r,a=e,s=t||{};return s.type||(s.type=pt&&Buffer.isBuffer(e)?"buffer":"base64"),r=b6(a,s),iD(r,s)}function lD(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return _b(e.slice(r),t);default:break e}return Rc.to_workbook(e,t)}function obe(e,t){var r="",a=DN(e,t);switch(t.type){case"base64":r=un(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Xo(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Ht(r)),t.type="binary",lD(r,t)}function lbe(e,t){var r=e;return t.type=="base64"&&(r=un(r)),r=_t.utils.decode(1200,r.slice(2),"str"),t.type="binary",lD(r,t)}function cbe(e){return e.match(/[^\x00-\x7F]/)?fs(e):e}function qg(e,t,r,a){return a?(r.type="string",Rc.to_workbook(e,r)):Rc.to_workbook(t,r)}function Sf(e,t){lp();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Sf(new Uint8Array(e),(r=Yt(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),nc={},r.dateNF&&(nc.dateNF=r.dateNF),r.type||(r.type=pt&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pt?"buffer":"binary",a=due(e),typeof Uint8Array<"u"&&!pt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=cbe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Yt(r),r.type="array",Sf(Xw(a),r)}switch((s=DN(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return sbe(Je.read(a,r),r);break;case 9:if(s[1]<=8)return EN(a,r);break;case 60:return _b(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return w0e(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return fI.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?ibe(a,r):qg(e,a,r,i);case 239:return s[3]===60?_b(a,r):qg(e,a,r,i);case 255:if(s[1]===254)return lbe(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Po.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Po.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return Tb.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return vI.to_workbook(a,r);break;case 10:case 13:case 32:return obe(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return b0e.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Tb.to_workbook(a,r):qg(e,a,r,i)}function DT(e,t){var r=t||{};return r.type="file",Sf(e,r)}function cD(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Vf(t.file,Je.write(e,{type:pt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Je.write(e,t)}function ube(e,t){var r=Yt(t||{}),a=abe(e,r);return uD(a,r)}function dbe(e,t){var r=Yt(t||{}),a=oD(e,r);return uD(a,r)}function uD(e,t){var r={},a=pt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Je.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(Kf(s))}return t.password&&typeof encrypt_agile<"u"?cD(encrypt_agile(s,t.password),t):t.type==="file"?Vf(t.file,s):t.type=="string"?Ht(s):s}function fbe(e,t){var r=t||{},a=xve(e,r);return cD(a,r)}function ls(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return ff(fs(a));case"binary":return fs(a);case"string":return e;case"file":return Vf(t.file,a,"utf8");case"buffer":return pt?ri(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ls(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function mbe(e,t){switch(t.type){case"base64":return ff(e);case"binary":return e;case"string":return e;case"file":return Vf(t.file,e,"binary");case"buffer":return pt?ri(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function V0(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?ff(r):t.type=="string"?Ht(r):r;case"file":return Vf(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function MN(e,t){lp(),KI(e);var r=Yt(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=MN(e,r);return r.type="array",Kf(a)}return dbe(e,r)}function gp(e,t){lp(),KI(e);var r=Yt(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=gp(e,r);return r.type="array",Kf(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ls(lve(e,r),r);case"slk":case"sylk":return ls(dI.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ls(eD(e.Sheets[e.SheetNames[s]],r),r);case"txt":return mbe(mD(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ls(RN(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ls(fI.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return V0(Tb.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ls(Rc.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ls(vI.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ls(mI.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ls(nD(e,r),r);case"wk1":return V0(Po.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return V0(Po.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),V0(XI(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),fbe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ube(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function FN(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function MT(e,t,r){var a=r||{};return a.type="file",a.file=t,FN(a),gp(e,a)}function hbe(e,t,r){var a=r||{};return a.type="file",a.file=t,FN(a),MN(e,a)}function xbe(e,t,r,a){var s=r||{};s.type="file",s.file=e,FN(s),s.type="buffer";var i=a;return i instanceof Function||(i=r),Ni.writeFile(e,gp(t,s),i)}function dD(e,t,r,a,s,i,o,l){var c=br(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=o?e[r][p]:e[a[p]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;i[p]!=null&&(m[i[p]]=u);continue}var h=g.v;switch(g.t){case"z":if(h==null)break;continue;case"e":h=h==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[p]!=null){if(h==null)if(g.t=="e"&&h===null)m[i[p]]=null;else if(u!==void 0)m[i[p]]=u;else if(d&&h===null)m[i[p]]=null;else continue;else m[i[p]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?h:bs(g,h,l);h!=null&&(f=!1)}}return{row:m,isempty:f}}function Qh(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof d){case"string":c=Ct(d);break;case"number":c=Ct(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(s=0);var f=br(c.s.r),m=[],p=[],g=0,h=0,y=Array.isArray(e),w=c.s.r,S=0,v={};y&&!e[w]&&(e[w]=[]);var x=u.skipHidden&&e["!cols"]||[],b=u.skipHidden&&e["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(x[S]||{}).hidden)switch(m[S]=or(S),r=y?e[w][S]:e[m[S]+f],a){case 1:i[S]=S-c.s.c;break;case 2:i[S]=m[S];break;case 3:i[S]=u.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=bs(r,null,u),h=v[o]||0,!h)v[o]=1;else{do l=o+"_"+h++;while(v[l]);v[o]=h,v[l]=1}i[S]=l}for(w=c.s.r+s;w<=c.e.r;++w)if(!(b[w]||{}).hidden){var N=dD(e,c,w,m,a,i,y,u);(N.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=N.row)}return p.length=g,p}var FT=/"/g;function fD(e,t,r,a,s,i,o,l){for(var c=!0,u=[],d="",f=br(r),m=t.s.c;m<=t.e.c;++m)if(a[m]){var p=l.dense?(e[r]||[])[m]:e[a[m]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(l.rawNumbers&&p.t=="n"?p.v:bs(p,null,l));for(var g=0,h=0;g!==d.length;++g)if((h=d.charCodeAt(g))===s||h===i||h===34||l.forceQuotes){d='"'+d.replace(FT,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(FT,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function RN(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=Ct(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],g=s.s.c;g<=s.e.c;++g)(m[g]||{}).hidden||(f[g]=or(g));for(var h=0,y=s.s.r;y<=s.e.r;++y)(p[y]||{}).hidden||(d=fD(e,s,y,f,o,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),(d||a.blankrows!==!1)&&r.push((h++?l:"")+d)));return delete a.dense,r.join("")}function mD(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=RN(e,t);if(typeof _t>"u"||t.type=="string")return r;var a=_t.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+a}function pbe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=Ct(e["!ref"]),i="",o=[],l,c=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=or(l);for(var d=s.s.r;d<=s.e.r;++d)for(i=br(d),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[d]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function hD(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?hr(a.origin):a.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var f=Ct(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+s)}else o==-1&&(o=0,d.e.r=t.length-1+s);var m=a.header||[],p=0;t.forEach(function(h,y){jr(h).forEach(function(w){(p=m.indexOf(w))==-1&&(m[p=m.length]=w);var S=h[w],v="z",x="",b=ot({c:l+p,r:o+y+s});u=Cf(i,b),S&&typeof S=="object"&&!(S instanceof Date)?i[b]=S:(typeof S=="number"?v="n":typeof S=="boolean"?v="b":typeof S=="string"?v="s":S instanceof Date?(v="d",a.cellDates||(v="n",S=zr(S)),x=a.dateNF||tt[14]):S===null&&a.nullError&&(v="e",S=0),u?(u.t=v,u.v=S,delete u.w,delete u.R,x&&(u.z=x)):i[b]=u={t:v,v:S},x&&(u.z=x))})}),d.e.c=Math.max(d.e.c,l+m.length-1);var g=br(o);if(s)for(p=0;p<m.length;++p)i[or(p+l)+g]={t:"s",v:m[p]};return i["!ref"]=mt(d),i}function gbe(e,t){return hD(null,e,t)}function Cf(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=hr(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Cf(e,ot(t)):Cf(e,ot({r:t,c:r||0}))}function ybe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function LN(){return{SheetNames:[],Sheets:{}}}function $N(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(qI(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function vbe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=ybe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function bbe(e,t){return e.z=t,e}function xD(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function wbe(e,t,r){return xD(e,"#"+t,r)}function Nbe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function jbe(e,t,r,a){for(var s=typeof t!="string"?t:Ct(t),i=typeof t=="string"?t:mt(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=Cf(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var pD={encode_col:or,encode_row:br,encode_cell:ot,encode_range:mt,decode_col:dN,decode_row:uN,split_cell:Wue,decode_cell:hr,decode_range:Ma,format_cell:bs,sheet_add_aoa:D6,sheet_add_json:hD,sheet_add_dom:tD,aoa_to_sheet:su,json_to_sheet:gbe,table_to_sheet:rD,table_to_book:Ive,sheet_to_csv:RN,sheet_to_txt:mD,sheet_to_json:Qh,sheet_to_html:eD,sheet_to_formulae:pbe,sheet_to_row_object_array:Qh,sheet_get_cell:Cf,book_new:LN,book_append_sheet:$N,book_set_sheet_visibility:vbe,cell_set_number_format:bbe,cell_set_hyperlink:xD,cell_set_internal_link:wbe,cell_add_comment:Nbe,sheet_set_array_formula:jbe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},yp;function Sbe(e){yp=e}function Cbe(e,t){var r=yp(),a=t??{};if(e==null||e["!ref"]==null)return r.push(null),r;var s=Ct(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],g=s.s.c;g<=s.e.c;++g)(m[g]||{}).hidden||(f[g]=or(g));var h=s.s.r,y=!1,w=0;return r._read=function(){if(!y)return y=!0,r.push("\uFEFF");for(;h<=s.e.r;)if(++h,!(p[h-1]||{}).hidden&&(d=fD(e,s,h-1,f,o,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),d||a.blankrows!==!1)))return r.push((w++?l:"")+d);return r.push(null)},r}function kbe(e,t){var r=yp(),a=t||{},s=a.header!=null?a.header:QI,i=a.footer!=null?a.footer:JI;r.push(s);var o=Ma(e["!ref"]);a.dense=Array.isArray(e),r.push(ZI(e,o,a));var l=o.s.r,c=!1;return r._read=function(){if(l>o.e.r)return c||(c=!0,r.push("</table>"+i)),r.push(null);for(;l<=o.e.r;){r.push(YI(e,o,l,a)),++l;break}},r}function Obe(e,t){var r=yp({objectMode:!0});if(e==null||e["!ref"]==null)return r.push(null),r;var a={t:"n",v:0},s=0,i=1,o=[],l=0,c="",u={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)&&(s=3),typeof f){case"string":u=Ct(f);break;case"number":u=Ct(e["!ref"]),u.s.r=f;break;default:u=f}s>0&&(i=0);var m=br(u.s.r),p=[],g=0,h=Array.isArray(e),y=u.s.r,w=0,S={};h&&!e[y]&&(e[y]=[]);var v=d.skipHidden&&e["!cols"]||[],x=d.skipHidden&&e["!rows"]||[];for(w=u.s.c;w<=u.e.c;++w)if(!(v[w]||{}).hidden)switch(p[w]=or(w),a=h?e[y][w]:e[p[w]+m],s){case 1:o[w]=w-u.s.c;break;case 2:o[w]=p[w];break;case 3:o[w]=d.header[w-u.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),c=l=bs(a,null,d),g=S[l]||0,!g)S[l]=1;else{do c=l+"_"+g++;while(S[c]);S[l]=g,S[c]=1}o[w]=c}return y=u.s.r+i,r._read=function(){for(;y<=u.e.r;)if(!(x[y-1]||{}).hidden){var b=dD(e,u,y,p,s,o,h,d);if(++y,b.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows)){r.push(b.row);return}}return r.push(null)},r}var Tbe={to_json:Obe,to_html:kbe,to_csv:Cbe,set_readable:Sbe};const _be=df.version,kf=Object.freeze(Object.defineProperty({__proto__:null,CFB:Je,SSF:m6,parse_xlscfb:EN,parse_zip:iD,read:Sf,readFile:DT,readFileSync:DT,set_cptable:Dce,set_fs:cue,stream:Tbe,utils:pD,version:_be,write:gp,writeFile:MT,writeFileAsync:xbe,writeFileSync:MT,writeFileXLSX:hbe,writeXLSX:MN},Symbol.toStringTag,{value:"Module"})),Ebe=2e4,Abe=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("raw"),Pbe=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("finished"),Ibe=(e,t)=>{if(!e||!t)return!1;const r=t.toLowerCase(),a=i=>(i==null?void 0:i.toLowerCase())??"";if(typeof e=="string"){const i=e.toLowerCase();return i===r||i.includes(r)}return[e.outletName,e.name,e.kitchenName,e.toOutletName,e.fromOutletName].some(i=>{if(typeof i!="string")return!1;const o=a(i);return o===r||o.includes(r)})},Kg=()=>{const e=ct(),t=Ta(),[r,a]=T.useState(null),[s,i]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState(!0),[d,f]=T.useState(null),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState(""),[S,v]=T.useState("materialName"),[x,b]=T.useState("asc"),[N,j]=T.useState(!1),[O,_]=T.useState(!1),E=T.useRef(null),[k,C]=T.useState(!1),[A,P]=T.useState(null),[I,F]=T.useState(!1),{notifications:q,markAsRead:H,markAllAsRead:V,clearAll:re,refreshNotifications:oe}=Js("Kuwait City"),[U,J]=T.useState(1),[Q,X]=T.useState(20),[ee,ue]=T.useState(1),[we,ne]=T.useState(0),[ie,Ne]=T.useState(1),[W,Ee]=T.useState(20),[B,ve]=T.useState(1),[ye,fe]=T.useState(0),et=ru(m,500),[Ke,gt]=T.useState({}),Xe=T.useRef({}),dt=()=>{const L=t.pathname;return L.includes("/raw-materials")?"raw-materials":L.includes("/finished-goods")?"finished-goods":L.includes("/sales-orders")?"sales-orders":"overview"},He=dt(),kt=()=>{const L=dt();console.log(` Kuwait City: Current section: ${L}`),console.log(" Kuwait City: All notifications:",q);let K=[];return L==="raw-materials"?K=q.filter(Z=>Z.isTransferOrder&&(Z.itemType==="Raw Material"||Z.itemType==="Mixed")):L==="finished-goods"?K=q.filter(Z=>Z.isTransferOrder&&(Z.itemType==="Finished Goods"||Z.itemType==="Mixed")):K=q,console.log(` Kuwait City: Filtered notifications for ${L}:`,K),K};T.useEffect(()=>{console.log(" Kuwait City: Notifications updated:",q),console.log(` Kuwait City: Number of notifications: ${q.length}`),q.length>0&&console.log(" Kuwait City: First notification:",q[0])},[q]),T.useEffect(()=>()=>{Object.values(Xe.current).forEach(L=>{L&&clearTimeout(L)})},[]);const vt=le.useCallback(async L=>{try{console.log(" Kuwait City: handleViewTransferOrder called with transferOrderId:",L),F(!0);const K=await de.getTransferOrderById(L);if(K.success)P(K.data),C(!0),console.log(" Kuwait City: Transfer order modal opened successfully");else throw new Error(K.message||"Failed to load transfer order")}catch(K){console.error("Error loading transfer order:",K),alert("Failed to load transfer order details")}finally{F(!1)}},[]);T.useEffect(()=>{St(),ft();const L=Z=>{const{transferOrderId:te}=Z.detail;te&&vt(te)};window.addEventListener("viewTransferOrder",L);const K=localStorage.getItem("pendingTransferOrderView");return K&&(localStorage.removeItem("pendingTransferOrderView"),vt(K)),()=>{window.removeEventListener("viewTransferOrder",L)}},[vt]),T.useEffect(()=>{c||(J(1),Ne(1),ft())},[c,et,g,y,S,x]),T.useEffect(()=>{!c&&r&&ft()},[U,Q,ie,W]);const St=async()=>{try{u(!0),f(null);const L=await de.getOutlets({limit:1e3});if(L.success){const K=L.data.find(Z=>Z.outletName==="Kuwait City");K?a(K):f("Kuwait City not found")}else f("Failed to load outlet data")}catch(L){f(L instanceof Error?L.message:"Failed to load outlet data"),console.error("Error loading outlet data:",L)}finally{u(!1)}},Lt=()=>{p(""),h(""),w(""),v(He==="finished-goods"?"productName":"materialName"),b("asc"),J(1),Ne(1),ft()},Et=(L,K)=>{!L||L.length===0||gt(Z=>{const te={...Z};return L.forEach(ge=>{const ce=ge.materialCode||ge.materialId||ge.itemCode,De=Number(ge.quantity);!ce||!De||(te[ce]={amount:Math.abs(De),type:K},Xe.current[ce]&&clearTimeout(Xe.current[ce]),Xe.current[ce]=setTimeout(()=>{gt(ke=>{const qe={...ke};return delete qe[ce],qe}),delete Xe.current[ce]},Ebe))}),te})},fr=async(L,K,Z)=>{try{F(!0),console.log("Starting acceptance process for transfer order:",L),console.log("Edited items:",K),console.log("Transfer notes:",Z),console.log("Fetching transfer order details...");const te=await de.getTransferOrderById(L);if(!te.success)throw new Error(te.message||"Failed to fetch transfer order");const ge=te.data;console.log("Transfer order details:",ge);const ce={approvedBy:"Kuwait City Manager",notes:Z||"Transfer order approved by Kuwait City"};K&&K.length>0&&(ce.editedItems=K,console.log("Including edited items in approval request:",K)),console.log("Approving transfer order...");const De=await de.approveTransferOrder(L,ce);if(console.log("Approval response:",De),De.success){const ke=K&&K.some((Ae,Ze)=>{var Oe;return Ae.quantity!==((Oe=ge.items[Ze])==null?void 0:Oe.quantity)});alert(`Transfer order accepted successfully!${ke?" (Quantities modified)":""}`),C(!1),P(null),await ft();const qe=(r==null?void 0:r.outletName)||"Kuwait City";if(Ibe(ge.toOutlet,qe)){const Ae=(ge.items||[]).map((Oe,Ue)=>{const at=K&&K[Ue]?K[Ue].quantity:Oe.quantity;return{materialCode:Oe.itemCode||Oe.materialCode,materialId:Oe.materialId,itemCode:Oe.itemCode,quantity:at,itemType:Oe.itemType}}).filter(Oe=>Abe(Oe,ge.itemType));Ae.length>0&&Et(Ae,"increase");const Ze=(ge.items||[]).map((Oe,Ue)=>{const at=K&&K[Ue]?K[Ue].quantity:Oe.quantity;return{materialCode:Oe.productCode||Oe.itemCode,materialId:Oe.productId||Oe.materialId,itemCode:Oe.productCode||Oe.itemCode,quantity:at,itemType:Oe.itemType}}).filter(Oe=>Pbe(Oe,ge.itemType));Ze.length>0&&Et(Ze,"increase")}oe()}else throw new Error(`Failed to approve transfer order: ${De.message}`)}catch(te){console.error("Error accepting transfer order:",te),console.error("Error details:",te instanceof Error?te.message:"Unknown error"),alert(`Failed to accept transfer order: ${te instanceof Error?te.message:"Unknown error"}`)}finally{F(!1)}},Qe=async L=>{try{F(!0),console.log("Starting rejection process for transfer order:",L),console.log("Fetching transfer order details...");const K=await de.getTransferOrderById(L);if(!K.success)throw new Error(K.message||"Failed to fetch transfer order");const Z=K.data;console.log("Transfer order details:",Z),console.log("Rejecting transfer order...");const te=await de.rejectTransferOrder(L,{approvedBy:"Kuwait City Manager",notes:"Transfer order rejected by Kuwait City"});if(console.log("Rejection response:",te),te.success)alert("Transfer order rejected successfully!"),C(!1),P(null),oe();else throw new Error(`Failed to reject transfer order: ${te.message}`)}catch(K){console.error("Error rejecting transfer order:",K),console.error("Error details:",K instanceof Error?K.message:"Unknown error"),alert(`Failed to reject transfer order: ${K instanceof Error?K.message:"Unknown error"}`)}finally{F(!1)}},ft=async()=>{try{console.log("Loading Kuwait City inventory from dedicated database");const L=await de.getKuwaitCityRawMaterials({page:U,limit:Q,search:et,subCategory:g,status:y,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(L.success)if(console.log("Loaded Kuwait City Raw Materials:",L.data),console.log("Raw Materials Pagination info:",L.pagination),L.pagination&&(ue(L.pagination.totalPages),ne(L.pagination.totalItems)),L.data&&L.data.length>0){const Z=L.data.map(te=>({id:te._id||te.id,outletId:"kuwait-city",outletCode:"OUT-001",outletName:"Kuwait City",materialId:te._id,materialCode:te.materialCode,materialName:te.materialName,category:te.subCategory||te.category,unitOfMeasure:te.unitOfMeasure,unitPrice:te.unitPrice,currentStock:te.currentStock,reservedStock:0,availableStock:te.currentStock,minimumStock:te.minimumStock,maximumStock:te.maximumStock,reorderPoint:te.reorderPoint,totalValue:te.currentStock*te.unitPrice,location:"Main Storage",batchNumber:`KCBATCH-${te.materialCode}-${Date.now()}`,supplier:"Various Suppliers",lastUpdated:te.updatedAt,status:te.status,notes:te.notes||"",isActive:te.isActive}));i(Z)}else console.log("No raw materials inventory found for Kuwait City"),i([]);else console.error("Failed to load raw materials inventory:","API Error"),i([]);const K=await de.getKuwaitCityFinishedProducts({page:ie,limit:W,search:et,subCategory:g,status:y,sortBy:S==="productName"?"productName":S,sortOrder:x});if(K.success)if(console.log("Loaded Kuwait City Finished Products:",K.data),console.log("Finished Goods Pagination info:",K.pagination),K.pagination&&(ve(K.pagination.totalPages),fe(K.pagination.totalItems)),K.data&&K.data.length>0){const Z=K.data.map(te=>{var ge;return{id:te._id||te.id,outletId:"kuwait-city",outletCode:"OUT-001",outletName:"Kuwait City",productId:te._id,productCode:te.productCode,productName:te.productName,category:te.subCategory||te.category,unitOfMeasure:te.unitOfMeasure,unitPrice:te.unitPrice,costPrice:te.costPrice,currentStock:te.currentStock,reservedStock:0,availableStock:te.currentStock,minimumStock:te.minimumStock,maximumStock:te.maximumStock,reorderPoint:te.reorderPoint,totalValue:te.currentStock*te.unitPrice,productionDate:new Date().toISOString(),expiryDate:te.shelfLife?new Date(Date.now()+te.shelfLife*24*60*60*1e3).toISOString():new Date(Date.now()+6048e5).toISOString(),batchNumber:`KCFG-${te.productCode}-${Date.now()}`,storageLocation:"Main Storage",storageTemperature:((ge=te.storageRequirements)==null?void 0:ge.temperature)||"Room Temperature",qualityStatus:"Good",qualityNotes:"",status:te.status,transferSource:"Production",lastUpdated:te.updatedAt,notes:te.notes||"",isActive:te.isActive}});l(Z)}else console.log("No finished goods inventory found for Kuwait City"),l([]);else console.error("Failed to load finished goods inventory:","API Error")}catch(L){f(L instanceof Error?L.message:"Failed to load inventory"),console.error("Error loading inventory:",L)}},ut=async L=>{var Z,te;const K=(Z=L.target.files)==null?void 0:Z[0];if(K)try{if(_(!0),He==="raw-materials"){const ge=K.name.toLowerCase();if(!(ge.endsWith(".xlsx")||ge.endsWith(".xls"))){alert("Please select an Excel file (.xlsx or .xls) for Raw Materials import");return}const ce=await de.importKuwaitCityRawMaterialsExcel(K);alert(ce.message||"Raw materials import completed"),await ft()}else if(He==="finished-goods"){const ge=K.name.toLowerCase();let ce=[];if(ge.endsWith(".json")){const ke=await K.text(),qe=JSON.parse(ke);ce=Array.isArray(qe)?qe:qe.products||[]}else if(ge.endsWith(".csv"))ce=(await K.text()).split(`
`).filter(Ze=>Ze.trim()).slice(1).map(Ze=>{const Oe=Ze.split(",").map(Ue=>Ue.replace(/\"/g,"").trim());return{productCode:Oe[0]||Oe[1],productName:Oe[1]||Oe[2],subCategory:Oe[2]||"MAIN COURSES",unitOfMeasure:Oe[3]||"piece",unitPrice:parseFloat(Oe[4])||0,currentStock:parseFloat(Oe[5])||0}}).filter(Ze=>Ze.productCode&&Ze.productName);else if(ge.endsWith(".xlsx")||ge.endsWith(".xls")){const ke=await K.arrayBuffer(),qe=Sf(ke,{type:"array"}),Ae=qe.SheetNames[0],Ze=qe.Sheets[Ae];ce=pD.sheet_to_json(Ze,{defval:""}).map(Ue=>{const at=G=>{const Y=G.find(be=>Object.keys(Ue).some(me=>me.toString().trim().toLowerCase()===be));if(!Y)return;const se=Object.keys(Ue).find(be=>be.toString().trim().toLowerCase()===Y);return Ue[se]},Ot=(at(["product code","sku","code"])||"").toString().trim(),Bt=(at(["product name","item name","name"])||"").toString().trim(),R=(at(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim(),D=(at(["unit of measure","unit","uom"])||"piece").toString().trim(),M=at(["unit price","price"]),z=at(["current stock","current quantity","quantity","qty"]);return{productCode:Ot,productName:Bt,subCategory:R,category:R,unitOfMeasure:D,unitPrice:Number.parseFloat(String(M))||0,currentStock:Number.parseFloat(String(z))||0}}).filter(Ue=>Ue.productCode&&Ue.productName)}else{alert("Please select an Excel (.xlsx/.xls), CSV or JSON file for Finished Products import");return}const De=await de.importKuwaitCityFinishedProducts(ce);alert(De.message||`Finished products import completed. Success: ${((te=De.data)==null?void 0:te.successCount)||0}`),await ft()}}catch(ge){alert("Error importing file: "+(ge instanceof Error?ge.message:"Unknown error"))}finally{_(!1),E.current&&(E.current.value="")}},Ge=async()=>{try{j(!0),console.log("Starting export of Kuwait City raw materials..."),await de.exportKuwaitCityRawMaterials({search:m,subCategory:g,status:y}),console.log("Export completed successfully")}catch(L){console.error("Error exporting raw materials:",L),alert(`Failed to export raw materials: ${L instanceof Error?L.message:"Unknown error"}`)}finally{j(!1)}},Sr=async()=>{try{j(!0),console.log("Starting export of Kuwait City finished goods..."),await de.exportKuwaitCityFinishedProducts({search:m,subCategory:g,status:y}),console.log("Export completed successfully")}catch(L){console.error("Error exporting finished goods:",L),alert(`Failed to export finished goods: ${L instanceof Error?L.message:"Unknown error"}`)}finally{j(!1)}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Kuwait City..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:St,className:"btn-primary",children:"Retry"})]})});const Er=()=>{switch(He){case"raw-materials":return Ga();case"finished-goods":return he();case"sales-orders":return ae();default:return je()}},Ga=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(rt,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{var L;return(L=E.current)==null?void 0:L.click()},className:"btn-secondary flex items-center",title:"Import raw materials from Excel (.xlsx/.xls)",disabled:O,children:O?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Va,{className:"h-4 w-4 mr-2"}),"Import"]})}),n.jsxs("button",{onClick:Ge,disabled:N||O,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:L=>p(L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsxs("select",{value:g,onChange:L=>h(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Categories"}),n.jsx("option",{value:"NON FOOD - PACKING",children:"NON FOOD - PACKING"}),n.jsx("option",{value:"Vegetables",children:"Vegetables"}),n.jsx("option",{value:"Dairy",children:"Dairy"})]}),n.jsxs("select",{value:y,onChange:L=>w(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:L=>v(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Lt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",we>0?(U-1)*Q+1:0," - ",Math.min(U*Q,we)," of ",we," raw material items",(m||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:Q,onChange:L=>{X(Number(L.target.value)),J(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Lt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:ft,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(L=>L.materialId&&L.materialCode&&L.materialName).map(L=>{var K,Z,te;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:L.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",L.unitPrice?Number(L.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:L.currentStock}),(Ke[L.materialCode]||Ke[L.materialId]||Ke[L.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((K=Ke[L.materialCode]||Ke[L.materialId]||Ke[L.id])==null?void 0:K.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((Z=Ke[L.materialCode]||Ke[L.materialId]||Ke[L.id])==null?void 0:Z.type)==="increase"?"+":"-",(te=Ke[L.materialCode]||Ke[L.materialId]||Ke[L.id])==null?void 0:te.amount]})]})})]},L.id)})})]})}),ee>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",U," of ",ee]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>J(1),disabled:U===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>J(L=>Math.max(1,L-1)),disabled:U===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ee)},(L,K)=>{let Z;return ee<=5||U<=3?Z=K+1:U>=ee-2?Z=ee-4+K:Z=U-2+K,n.jsx("button",{onClick:()=>J(Z),className:`px-3 py-1 text-sm border rounded-md ${U===Z?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:Z},Z)})}),n.jsx("button",{onClick:()=>J(L=>Math.min(ee,L+1)),disabled:U===ee,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>J(ee),disabled:U===ee,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),he=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(rt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{var L;return(L=E.current)==null?void 0:L.click()},className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON",disabled:O,children:O?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Va,{className:"h-4 w-4 mr-2"}),"Import"]})}),n.jsxs("button",{onClick:Sr,disabled:N||O,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:L=>p(L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsxs("select",{value:g,onChange:L=>h(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Categories"}),n.jsx("option",{value:"GATHERING",children:"GATHERING"}),n.jsx("option",{value:"HAPPY ENDINGS",children:"HAPPY ENDINGS"})]}),n.jsxs("select",{value:y,onChange:L=>w(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:L=>v(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Lt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",ye>0?(ie-1)*W+1:0," - ",Math.min(ie*W,ye)," of ",ye," finished goods items",(m||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:W,onChange:L=>{Ee(Number(L.target.value)),Ne(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Lt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:ft,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit of Measure"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(L=>L.productId&&L.productCode&&L.productName).map(L=>{var K,Z,te;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:L.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KWD ",L.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 relative",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:L.currentStock}),(Ke[L.productCode]||Ke[L.productId]||Ke[L.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((K=Ke[L.productCode]||Ke[L.productId]||Ke[L.id])==null?void 0:K.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((Z=Ke[L.productCode]||Ke[L.productId]||Ke[L.id])==null?void 0:Z.type)==="increase"?"+":"-",(te=Ke[L.productCode]||Ke[L.productId]||Ke[L.id])==null?void 0:te.amount]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L.status==="In Stock"?"bg-green-100 text-green-800":L.status==="Low Stock"?"bg-yellow-100 text-yellow-800":L.status==="Out of Stock"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:L.status})})]},L.id)})})]})}),B>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",ie," of ",B]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>Ne(1),disabled:ie===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>Ne(L=>Math.max(1,L-1)),disabled:ie===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,B)},(L,K)=>{let Z;return B<=5||ie<=3?Z=K+1:ie>=B-2?Z=B-4+K:Z=ie-2+K,n.jsx("button",{onClick:()=>Ne(Z),className:`px-3 py-1 text-sm border rounded-md ${ie===Z?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:Z},Z)})}),n.jsx("button",{onClick:()=>Ne(L=>Math.min(B,L+1)),disabled:ie===B,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>Ne(B),disabled:ie===B,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),ae=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"POS Sales"}),n.jsxs("button",{onClick:()=>e("/kuwait-city/pos-sales/create-order",{state:{outletName:"Kuwait City"}}),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Point of Sale system for Kuwait City outlet"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/pos-sales/create-order",{state:{outletName:"Kuwait City"}}),children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Fr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"New Order"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create a new sales order"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(SE,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Order History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View past orders"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(F1,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View payment summaries"})]})]})})]})]})}),je=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-blue-50 to-green-50 border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(rt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Raw Materials"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(L=>L.materialId&&L.materialCode&&L.materialName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(rt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Finished Goods"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(L=>L.productId&&L.productCode&&L.productName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",(s.reduce((L,K)=>L+K.totalValue,0)+o.reduce((L,K)=>L+K.totalValue,0)).toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-yellow-500",children:n.jsx(Uo,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(L=>L.status==="Low Stock").length+o.filter(L=>L.status==="Low Stock").length})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kuwait City"}),n.jsxs("p",{className:"text-gray-600",children:[He==="raw-materials"?"Raw Materials Inventory":He==="finished-goods"?"Finished Goods Inventory":He==="sales-orders"?"Sales Orders":"Premium dining restaurant"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>{St(),ft()},className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),He==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/kuwait-city/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),He==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/kuwait-city/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:kt(),onMarkAsRead:H,onMarkAllAsRead:V,onClearAll:re,onRefresh:oe,onViewTransferOrder:vt})]})]}),Er(),n.jsx("input",{ref:E,type:"file",accept:He==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:ut,className:"hidden",disabled:O}),n.jsx(tu,{isOpen:k,onClose:()=>{C(!1),P(null)},transferOrder:A,onAccept:fr,onReject:Qe,loading:I})]})},Dbe=2e4,Mbe=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("raw"),Fbe=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("finished"),Rbe=(e,t)=>{if(!e||!t)return!1;const r=t.toLowerCase(),a=i=>(i==null?void 0:i.toLowerCase())??"";if(typeof e=="string"){const i=e.toLowerCase();return i===r||i.includes(r)}return[e.outletName,e.name,e.kitchenName,e.toOutletName,e.fromOutletName].some(i=>{if(typeof i!="string")return!1;const o=a(i);return o===r||o.includes(r)})},Nl=()=>{const e=ct(),t=Ta(),[r,a]=T.useState(null),[s,i]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState(!0),[d,f]=T.useState(null),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState(""),[S,v]=T.useState("materialName"),[x,b]=T.useState("asc"),[N,j]=T.useState(!1),O=T.useRef(null),[_,E]=T.useState(!1),[k,C]=T.useState({}),A=T.useRef({}),{notifications:P,markAsRead:I,markAllAsRead:F,clearAll:q,refreshNotifications:H}=Js("Vibes Complex"),[V,re]=T.useState(!1),[oe,U]=T.useState(null),[J,Q]=T.useState(!1),[X,ee]=T.useState(1),[ue,we]=T.useState(20),[ne,ie]=T.useState(1),[Ne,W]=T.useState(0),[Ee,B]=T.useState(1),[ve,ye]=T.useState(20),[fe,et]=T.useState(1),[Ke,gt]=T.useState(0),Xe=ru(m,500);T.useEffect(()=>{console.log(" Vibes Complex: Notifications updated:",P),console.log(` Vibes Complex: Number of notifications: ${P.length}`),P.length>0&&console.log(" Vibes Complex: First notification:",P[0])},[P]),T.useEffect(()=>{console.log(' Vibes Complex: Component mounted, loading notifications for: "Vibes Complex"'),console.log(` Vibes Complex: Current URL path: ${t.pathname}`),console.log(" Vibes Complex: Component file: MarinaWalkCafe.tsx")},[]);const dt=()=>{const L=t.pathname;return L.includes("/raw-materials")?"raw-materials":L.includes("/finished-goods")?"finished-goods":L.includes("/sales-orders")?"sales-orders":"overview"},He=dt(),kt=()=>{const L=dt();console.log(` Vibes Complex: Current section: ${L}`),console.log(" Vibes Complex: All notifications:",P);let K=[];return L==="raw-materials"?K=P.filter(Z=>Z.isTransferOrder&&(Z.itemType==="Raw Material"||Z.itemType==="Mixed")):L==="finished-goods"?K=P.filter(Z=>Z.isTransferOrder&&(Z.itemType==="Finished Goods"||Z.itemType==="Mixed")):K=P,console.log(` Vibes Complex: Filtered notifications for ${L}:`,K),K},vt=le.useCallback(async L=>{try{console.log(" Vibes Complex: handleViewTransferOrder called with transferOrderId:",L),Q(!0);const K=await de.getTransferOrderById(L);if(K.success)U(K.data),re(!0),console.log(" Vibes Complex: Transfer order modal opened successfully");else throw new Error(K.message||"Failed to load transfer order")}catch(K){console.error("Error loading transfer order:",K),alert("Failed to load transfer order details")}finally{Q(!1)}},[]);T.useEffect(()=>{Lt(),Ge();const L=Z=>{const{transferOrderId:te}=Z.detail;te&&vt(te)};window.addEventListener("viewTransferOrder",L);const K=localStorage.getItem("pendingTransferOrderView");return K&&(localStorage.removeItem("pendingTransferOrderView"),vt(K)),()=>{window.removeEventListener("viewTransferOrder",L)}},[vt]),T.useEffect(()=>{P.length>0&&P.some(K=>{var Z,te,ge;return!K.read&&(((Z=K.title)==null?void 0:Z.includes("Items Received from Central Kitchen"))||((te=K.title)==null?void 0:te.includes("Transfer from Central Kitchen"))||((ge=K.title)==null?void 0:ge.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for Vibes Complex, refreshing inventory..."),Ge())},[P]),T.useEffect(()=>{const L=setInterval(()=>{console.log(" Vibes Complex: Auto-refreshing notifications..."),H()},5e3);return()=>clearInterval(L)},[H]),T.useEffect(()=>()=>{Object.values(A.current).forEach(L=>{L&&clearTimeout(L)})},[]);const St=(L,K)=>{!L||L.length===0||C(Z=>{const te={...Z};return L.forEach(ge=>{const ce=ge.materialCode||ge.materialId||ge.itemCode,De=Number(ge.quantity);!ce||!De||(te[ce]={amount:Math.abs(De),type:K},A.current[ce]&&clearTimeout(A.current[ce]),A.current[ce]=setTimeout(()=>{C(ke=>{const qe={...ke};return delete qe[ce],qe}),delete A.current[ce]},Dbe))}),te})};T.useEffect(()=>{c||Ge()},[Xe,g,y,S,x,X,ue,Ee,ve]);const Lt=async()=>{try{u(!0),f(null);const L=await de.getOutlets({limit:1e3});if(L.success){const K=L.data.find(Z=>Z.outletName==="Vibes Complex");K?(a(K),await Ge()):f("Vibes Complex not found")}else f("Failed to load outlet data")}catch(L){f(L instanceof Error?L.message:"Failed to load outlet data"),console.error("Error loading outlet data:",L)}finally{u(!1)}},Et=async(L,K,Z)=>{try{Q(!0),console.log("Starting acceptance process for transfer order:",L),console.log("Edited items:",K),console.log("Transfer notes:",Z),console.log("Fetching transfer order details...");const te=await de.getTransferOrderById(L);if(!te.success)throw new Error(te.message||"Failed to fetch transfer order");const ge=te.data;console.log("Transfer order details:",ge);const ce={approvedBy:"Vibes Complex Manager",notes:Z||"Transfer order approved by Vibes Complex"};K&&K.length>0&&(ce.editedItems=K,console.log("Including edited items in approval request:",K)),console.log("Approving transfer order...");const De=await de.approveTransferOrder(L,ce);if(console.log("Approval response:",De),De.success){const ke=K&&K.some((Ae,Ze)=>{var Oe;return Ae.quantity!==((Oe=ge.items[Ze])==null?void 0:Oe.quantity)});alert(`Transfer order accepted successfully!${ke?" (Quantities modified)":""}`),re(!1),U(null),await Ge();const qe=(r==null?void 0:r.outletName)||"Vibes Complex";if(Rbe(ge.toOutlet,qe)){const Ae=(ge.items||[]).map((Oe,Ue)=>{const at=K&&K[Ue]?K[Ue].quantity:Oe.quantity;return{materialCode:Oe.itemCode||Oe.materialCode,materialId:Oe.materialId,itemCode:Oe.itemCode,quantity:at,itemType:Oe.itemType}}).filter(Oe=>Mbe(Oe,ge.itemType));Ae.length>0&&St(Ae,"increase");const Ze=(ge.items||[]).map((Oe,Ue)=>{const at=K&&K[Ue]?K[Ue].quantity:Oe.quantity;return{materialCode:Oe.itemCode,materialId:Oe.productId||Oe.materialId,itemCode:Oe.itemCode,quantity:at,itemType:Oe.itemType}}).filter(Oe=>Fbe(Oe,ge.itemType));Ze.length>0&&St(Ze,"increase")}H()}else throw new Error(`Failed to approve transfer order: ${De.message}`)}catch(te){console.error("Error accepting transfer order:",te),console.error("Error details:",te instanceof Error?te.message:"Unknown error"),alert(`Failed to accept transfer order: ${te instanceof Error?te.message:"Unknown error"}`)}finally{Q(!1)}},fr=async L=>{try{Q(!0);const K=await de.getTransferOrderById(L);if(!K.success)throw new Error(K.message||"Failed to fetch transfer order");const Z=await de.rejectTransferOrder(L,{approvedBy:"Vibes Complex Manager",notes:"Transfer order rejected by Vibes Complex"});if(Z.success)alert("Transfer order rejected successfully!"),re(!1),U(null),H();else throw new Error(`Failed to reject transfer order: ${Z.message}`)}catch(K){console.error("Error rejecting transfer order:",K),alert(`Failed to reject transfer order: ${K instanceof Error?K.message:"Unknown error"}`)}finally{Q(!1)}},Qe=()=>{p(""),h(""),w(""),v("materialName"),b("asc"),ee(1),B(1),Ge()},ft=async()=>{try{j(!0),await de.exportVibesComplexRawMaterials({search:m,subCategory:g,status:y})}catch(L){console.error("Error exporting raw materials:",L),alert("Error exporting raw materials: "+(L instanceof Error?L.message:"Unknown error"))}finally{j(!1)}},ut=async()=>{try{j(!0),await de.exportVibesComplexFinishedProducts({search:m,subCategory:g,status:y})}catch(L){console.error("Error exporting finished goods:",L),alert("Error exporting finished goods: "+(L instanceof Error?L.message:"Unknown error"))}finally{j(!1)}},Ge=async()=>{var L,K;try{console.log("Loading Vibes Complex inventory from dedicated database"),console.log("   Search params:",{debouncedSearchTerm:Xe,filterCategory:g,filterStatus:y,sortBy:S,sortOrder:x});const Z=await de.getVibesComplexRawMaterials({page:X,limit:ue,search:Xe,subCategory:g,status:y,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(console.log(" Raw Materials API Response:",{success:Z.success,dataLength:((L=Z.data)==null?void 0:L.length)||0,pagination:Z.pagination}),Z.success)if(console.log(" Loaded Vibes Complex Raw Materials:",((K=Z.data)==null?void 0:K.length)||0,"items"),Z.data&&Z.data.length>0){const ge=Z.data.map(ce=>{var De;return{id:ce._id||ce.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"",outletName:(r==null?void 0:r.outletName)||"Vibes Complex",materialId:ce._id,materialCode:ce.materialCode,materialName:ce.materialName,category:ce.subCategory||ce.category,unitOfMeasure:ce.unitOfMeasure,unitPrice:ce.unitPrice||0,currentStock:ce.currentStock||0,reservedStock:0,availableStock:ce.currentStock||0,minimumStock:ce.minimumStock||0,maximumStock:ce.maximumStock||0,reorderPoint:ce.reorderPoint||0,totalValue:(ce.currentStock||0)*(ce.unitPrice||0),location:((De=ce.storageRequirements)==null?void 0:De.location)||"Main Storage",batchNumber:ce.batchNumber||"",supplier:ce.supplierName||"",lastUpdated:ce.lastUpdated||ce.updatedAt,status:ce.status,notes:ce.notes||"",isActive:ce.isActive}});i(ge),Z.pagination&&(ie(Z.pagination.totalPages),W(Z.pagination.totalItems))}else console.log("No raw materials inventory found for Vibes Complex"),i([]),ie(1),W(0);else console.error("Failed to load raw materials inventory:",Z.error||"API Error"),i([]),ie(1),W(0);const te=await de.getVibesComplexFinishedProducts({page:Ee,limit:ve,search:Xe,subCategory:g,status:y,sortBy:S==="productName"?"productName":S,sortOrder:x});if(te.success)if(console.log("Loaded Vibes Complex Finished Products:",te.data),te.data&&te.data.length>0){const ge=te.data.map(ce=>({id:ce._id||ce.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"",outletName:(r==null?void 0:r.outletName)||"Vibes Complex",productId:ce._id,productCode:ce.productCode,productName:ce.productName,category:ce.subCategory||ce.category,unitOfMeasure:ce.unitOfMeasure,unitPrice:ce.unitPrice||0,costPrice:ce.costPrice||0,currentStock:ce.currentStock||0,reservedStock:0,availableStock:ce.currentStock||0,minimumStock:ce.minimumStock||0,maximumStock:ce.maximumStock||0,reorderPoint:ce.reorderPoint||0,totalValue:(ce.currentStock||0)*(ce.unitPrice||0),productionDate:ce.productionDate||new Date().toISOString(),expiryDate:ce.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:ce.batchNumber||"",storageLocation:ce.storageLocation||"Cold Storage",storageTemperature:ce.storageTemperature||"Cold",qualityStatus:ce.qualityStatus||"Good",qualityNotes:ce.qualityNotes||"",status:ce.status,transferSource:"Transfer",lastUpdated:ce.lastUpdated||ce.updatedAt,notes:ce.notes||"",isActive:ce.isActive}));l(ge),te.pagination&&(et(te.pagination.totalPages),gt(te.pagination.totalItems))}else console.log("No finished goods inventory found for Vibes Complex"),l([]),et(1),gt(0);else console.error("Failed to load finished goods inventory:",te.error||"API Error"),l([]),et(1),gt(0)}catch(Z){f(Z instanceof Error?Z.message:"Failed to load inventory"),console.error("Error loading inventory:",Z)}},Sr=async L=>{var Z,te;const K=(Z=L.target.files)==null?void 0:Z[0];if(K)try{E(!0);const ge=K.name.toLowerCase(),ce=dt();if(ce==="raw-materials"){if(!(ge.endsWith(".xlsx")||ge.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const De=await de.importVibeComplexRawMaterialsExcel(K);alert(De.message||"Raw materials import completed"),await Ge()}else if(ce==="finished-goods"){let De=[];if(ge.endsWith(".json")){const qe=await K.text(),Ae=JSON.parse(qe);De=Array.isArray(Ae)?Ae:Ae.products||[]}else if(ge.endsWith(".csv"))De=(await K.text()).split(`
`).filter(Oe=>Oe.trim()).slice(1).map(Oe=>{const Ue=Oe.split(",").map(at=>at.replace(/\"/g,"").trim());return{productCode:Ue[0]||Ue[1],productName:Ue[1]||Ue[2],subCategory:Ue[2]||"MAIN COURSES",category:Ue[2]||"MAIN COURSES",unitOfMeasure:Ue[3]||"piece",unitPrice:parseFloat(Ue[4])||0,currentStock:parseFloat(Ue[5])||0}}).filter(Oe=>Oe.productCode&&Oe.productName);else if(ge.endsWith(".xlsx")||ge.endsWith(".xls")){const qe=await K.arrayBuffer(),Ae=await uf(()=>Promise.resolve().then(()=>kf),void 0),Ze=Ae.read(qe,{type:"array"}),Oe=Ze.Sheets[Ze.SheetNames[0]];De=Ae.utils.sheet_to_json(Oe,{defval:""}).map(at=>{const Ot=D=>D.toString().trim().toLowerCase(),Bt=D=>{const M=Object.keys(at).find(z=>D.includes(Ot(z)));return M?at[M]:void 0},R=(Bt(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(Bt(["product code","sku","code"])||"").toString().trim(),productName:(Bt(["product name","item name","name"])||"").toString().trim(),subCategory:R,category:R,unitOfMeasure:(Bt(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(Bt(["unit price","price"])))||0,currentStock:Number.parseFloat(String(Bt(["current stock","current quantity","quantity","qty"])))||0}}).filter(at=>at.productCode&&at.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const ke=await de.importVibeComplexFinishedProducts(De);alert(ke.message||`Finished products import completed. Success: ${((te=ke.data)==null?void 0:te.successCount)||0}`),await Ge()}}catch(ge){alert("Error importing file: "+(ge instanceof Error?ge.message:"Unknown error"))}finally{E(!1),O.current&&(O.current.value="")}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Vibes Complex..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:Lt,className:"btn-primary",children:"Retry"})]})});const Er=()=>{switch(He){case"raw-materials":return Ga();case"finished-goods":return he();case"sales-orders":return ae();default:return je()}},Ga=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(rt,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var L;return(L=O.current)==null?void 0:L.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Va,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:ft,disabled:N||_,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:L=>p(L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:g,onChange:L=>h(L.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:y,onChange:L=>w(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:L=>v(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",Ne>0?(X-1)*ue+1:0," - ",Math.min(X*ue,Ne)," of ",Ne," raw material items",(Xe||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:ue,onChange:L=>{we(Number(L.target.value)),ee(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(L=>L.materialId&&L.materialCode&&L.materialName).map(L=>{var K,Z,te;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:L.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",L.unitPrice?Number(L.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:L.currentStock}),(k[L.materialCode]||k[L.materialId]||k[L.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((K=k[L.materialCode]||k[L.materialId]||k[L.id])==null?void 0:K.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((Z=k[L.materialCode]||k[L.materialId]||k[L.id])==null?void 0:Z.type)==="increase"?"+":"-",(te=k[L.materialCode]||k[L.materialId]||k[L.id])==null?void 0:te.amount]})]})})]},L.id)})})]})}),ne>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",X," of ",ne]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ee(1),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>ee(L=>Math.max(1,L-1)),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ne)},(L,K)=>{let Z;return ne<=5||X<=3?Z=K+1:X>=ne-2?Z=ne-4+K:Z=X-2+K,n.jsx("button",{onClick:()=>ee(Z),className:`px-3 py-1 text-sm border rounded-md ${X===Z?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:Z},Z)})}),n.jsx("button",{onClick:()=>ee(L=>Math.min(ne,L+1)),disabled:X===ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>ee(ne),disabled:X===ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),he=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(rt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var L;return(L=O.current)==null?void 0:L.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Va,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:ut,disabled:N||_,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:L=>p(L.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:g,onChange:L=>h(L.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:y,onChange:L=>w(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:L=>v(L.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",Ke>0?(Ee-1)*ve+1:0," - ",Math.min(Ee*ve,Ke)," of ",Ke," finished goods items",(Xe||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:ve,onChange:L=>{ye(Number(L.target.value)),B(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit of Measure"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(L=>L.productId&&L.productCode&&L.productName).map(L=>{var K,Z,te;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:L.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KWD ",L.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 relative",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:L.currentStock}),(k[L.productCode]||k[L.productId]||k[L.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((K=k[L.productCode]||k[L.productId]||k[L.id])==null?void 0:K.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((Z=k[L.productCode]||k[L.productId]||k[L.id])==null?void 0:Z.type)==="increase"?"+":"-",(te=k[L.productCode]||k[L.productId]||k[L.id])==null?void 0:te.amount]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L.status==="In Stock"?"bg-green-100 text-green-800":L.status==="Low Stock"?"bg-yellow-100 text-yellow-800":L.status==="Out of Stock"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:L.status})})]},L.id)})})]})}),fe>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",Ee," of ",fe]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>B(1),disabled:Ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>B(L=>Math.max(1,L-1)),disabled:Ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,fe)},(L,K)=>{let Z;return fe<=5||Ee<=3?Z=K+1:Ee>=fe-2?Z=fe-4+K:Z=Ee-2+K,n.jsx("button",{onClick:()=>B(Z),className:`px-3 py-1 text-sm border rounded-md ${Ee===Z?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:Z},Z)})}),n.jsx("button",{onClick:()=>B(L=>Math.min(fe,L+1)),disabled:Ee===fe,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>B(fe),disabled:Ee===fe,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),ae=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"POS Sales"}),n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/pos-sales/create-order",{state:{outletName:"360 Mall"}}),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Point of Sale system for 360 Mall outlet"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/pos-sales/create-order",{state:{outletName:"360 Mall"}}),children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Fr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"New Order"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create a new sales order"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(SE,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Order History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View past orders"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(F1,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View payment summaries"})]})]})})]})]})}),je=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Lm,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(rt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Raw Materials"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(L=>L.materialId&&L.materialCode&&L.materialName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(rt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Finished Goods"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(L=>L.productId&&L.productCode&&L.productName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",(s.reduce((L,K)=>L+K.totalValue,0)+o.reduce((L,K)=>L+K.totalValue,0)).toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-yellow-500",children:n.jsx(Uo,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(L=>L.status==="Low Stock").length+o.filter(L=>L.status==="Low Stock").length})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Lm,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(r==null?void 0:r.outletName)||"Vibes Complex"}),n.jsxs("p",{className:"text-gray-600",children:[He==="raw-materials"?"Raw Materials Inventory":He==="finished-goods"?"Finished Goods Inventory":He==="sales-orders"?"Sales Orders":"Cozy waterfront cafe"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Lt,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),He==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/vibes-complex/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),He==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/vibes-complex/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:kt(),onMarkAsRead:I,onMarkAllAsRead:F,onClearAll:q,onRefresh:H,onViewTransferOrder:vt})]})]}),Er(),n.jsx("input",{ref:O,type:"file",accept:He==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:Sr,className:"hidden",disabled:_}),n.jsx(tu,{isOpen:V,onClose:()=>{re(!1),U(null)},transferOrder:oe,onAccept:Et,onReject:fr,loading:J})]})},Lbe=2e4,$be=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("raw"),Bbe=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("finished"),Ube=(e,t)=>{if(!e||!t)return!1;const r=t.toLowerCase(),a=i=>(i==null?void 0:i.toLowerCase())??"";if(typeof e=="string"){const i=e.toLowerCase();return i===r||i.includes(r)}return[e.outletName,e.name,e.kitchenName,e.toOutletName,e.fromOutletName].some(i=>{if(typeof i!="string")return!1;const o=a(i);return o===r||o.includes(r)})},zg=()=>{const e=ct(),t=Ta(),[r,a]=T.useState(null),[s,i]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState(!0),[d,f]=T.useState(null),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState(""),[S,v]=T.useState("materialName"),[x,b]=T.useState("asc"),[N,j]=T.useState(!1),O=T.useRef(null),[_,E]=T.useState(!1),[k,C]=T.useState({}),A=T.useRef({}),{notifications:P,markAsRead:I,markAllAsRead:F,clearAll:q,refreshNotifications:H}=Js("360 Mall"),[V,re]=T.useState(!1),[oe,U]=T.useState(null),[J,Q]=T.useState(!1),[X,ee]=T.useState(1),[ue,we]=T.useState(20),[ne,ie]=T.useState(1),[Ne,W]=T.useState(0),[Ee,B]=T.useState(1),[ve,ye]=T.useState(20),[fe,et]=T.useState(1),[Ke,gt]=T.useState(0),Xe=ru(m,500),dt=()=>{const K=He();console.log(` 360 Mall: Current section: ${K}`),console.log(" 360 Mall: All notifications:",P);let Z=[];return K==="raw-materials"?Z=P.filter(te=>te.isTransferOrder&&(te.itemType==="Raw Material"||te.itemType==="Mixed")):K==="finished-goods"?Z=P.filter(te=>te.isTransferOrder&&(te.itemType==="Finished Goods"||te.itemType==="Mixed")):Z=P,console.log(` 360 Mall: Filtered notifications for ${K}:`,Z),Z},He=()=>{const K=t.pathname;return K.includes("/raw-materials")?"raw-materials":K.includes("/finished-goods")?"finished-goods":K.includes("/sales-orders")?"sales-orders":"overview"},kt=He(),vt=le.useCallback(async K=>{try{console.log(" 360 Mall: handleViewTransferOrder called with transferOrderId:",K),Q(!0);const Z=await de.getTransferOrderById(K);if(Z.success)U(Z.data),re(!0),console.log(" 360 Mall: Transfer order modal opened successfully");else throw new Error(Z.message||"Failed to load transfer order")}catch(Z){console.error("Error loading transfer order:",Z),alert("Failed to load transfer order details")}finally{Q(!1)}},[]);T.useEffect(()=>{Lt(),Ge();const K=te=>{const{transferOrderId:ge}=te.detail;ge&&vt(ge)};window.addEventListener("viewTransferOrder",K);const Z=localStorage.getItem("pendingTransferOrderView");return Z&&(localStorage.removeItem("pendingTransferOrderView"),vt(Z)),()=>{window.removeEventListener("viewTransferOrder",K)}},[vt]),T.useEffect(()=>{console.log(" 360 Mall: Notifications updated:",P),console.log(` 360 Mall: Number of notifications: ${P.length}`),P.length>0&&console.log(" 360 Mall: First notification:",P[0])},[P]),T.useEffect(()=>{console.log(' 360 Mall: Component mounted, loading notifications for: "360 Mall"')},[]),T.useEffect(()=>()=>{Object.values(A.current).forEach(K=>{K&&clearTimeout(K)})},[]);const St=(K,Z)=>{!K||K.length===0||C(te=>{const ge={...te};return K.forEach(ce=>{const De=ce.materialCode||ce.materialId||ce.itemCode,ke=Number(ce.quantity);!De||!ke||(ge[De]={amount:Math.abs(ke),type:Z},A.current[De]&&clearTimeout(A.current[De]),A.current[De]=setTimeout(()=>{C(qe=>{const Ae={...qe};return delete Ae[De],Ae}),delete A.current[De]},Lbe))}),ge})};T.useEffect(()=>{c||Ge()},[Xe,g,y,S,x,X,ue,Ee,ve]),T.useEffect(()=>{P.length>0&&P.some(Z=>{var te,ge,ce;return!Z.read&&(((te=Z.title)==null?void 0:te.includes("Items Received from Central Kitchen"))||((ge=Z.title)==null?void 0:ge.includes("Transfer from Central Kitchen"))||((ce=Z.title)==null?void 0:ce.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for 360 Mall, refreshing inventory..."),Ge())},[P]),T.useEffect(()=>{const K=setInterval(()=>{console.log(" 360 Mall: Auto-refreshing notifications..."),H()},5e3);return()=>clearInterval(K)},[H]);const Lt=async()=>{try{u(!0),f(null);const K=await de.getOutlets({limit:1e3});if(K.success){const Z=K.data.find(te=>te.outletName==="360 Mall");Z?(a(Z),await Ge()):f("360 Mall not found")}else f("Failed to load outlet data")}catch(K){f(K instanceof Error?K.message:"Failed to load outlet data"),console.error("Error loading outlet data:",K)}finally{u(!1)}},Et=async(K,Z,te)=>{try{Q(!0),console.log("Starting acceptance process for transfer order:",K),console.log("Edited items:",Z),console.log("Transfer notes:",te),console.log("Fetching transfer order details...");const ge=await de.getTransferOrderById(K);if(!ge.success)throw new Error(ge.message||"Failed to fetch transfer order");const ce=ge.data;console.log("Transfer order details:",ce);const De={approvedBy:"360 Mall Manager",notes:te||"Transfer order approved by 360 Mall"};Z&&Z.length>0&&(De.editedItems=Z,console.log("Including edited items in approval request:",Z)),console.log("Approving transfer order...");const ke=await de.approveTransferOrder(K,De);if(console.log("Approval response:",ke),ke.success){const qe=Z&&Z.some((Ze,Oe)=>{var Ue;return Ze.quantity!==((Ue=ce.items[Oe])==null?void 0:Ue.quantity)});alert(`Transfer order accepted successfully!${qe?" (Quantities modified)":""}`),re(!1),U(null),await Ge();const Ae=(r==null?void 0:r.outletName)||"360 Mall";if(Ube(ce.toOutlet,Ae)){const Ze=(ce.items||[]).map((Ue,at)=>{const Ot=Z&&Z[at]?Z[at].quantity:Ue.quantity;return{materialCode:Ue.itemCode||Ue.materialCode,materialId:Ue.materialId,itemCode:Ue.itemCode,quantity:Ot,itemType:Ue.itemType}}).filter(Ue=>$be(Ue,ce.itemType));Ze.length>0&&St(Ze,"increase");const Oe=(ce.items||[]).map((Ue,at)=>{const Ot=Z&&Z[at]?Z[at].quantity:Ue.quantity;return{materialCode:Ue.productCode||Ue.itemCode,materialId:Ue.productId||Ue.materialId,itemCode:Ue.productCode||Ue.itemCode,quantity:Ot,itemType:Ue.itemType}}).filter(Ue=>Bbe(Ue,ce.itemType));Oe.length>0&&St(Oe,"increase")}H()}else throw new Error(`Failed to approve transfer order: ${ke.message}`)}catch(ge){console.error("Error accepting transfer order:",ge),console.error("Error details:",ge instanceof Error?ge.message:"Unknown error"),alert(`Failed to accept transfer order: ${ge instanceof Error?ge.message:"Unknown error"}`)}finally{Q(!1)}},fr=async K=>{try{Q(!0);const Z=await de.getTransferOrderById(K);if(!Z.success)throw new Error(Z.message||"Failed to fetch transfer order");const te=await de.rejectTransferOrder(K,{approvedBy:"360 Mall Manager",notes:"Transfer order rejected by 360 Mall"});if(te.success)alert("Transfer order rejected successfully!"),re(!1),U(null),H();else throw new Error(`Failed to reject transfer order: ${te.message}`)}catch(Z){console.error("Error rejecting transfer order:",Z),alert(`Failed to reject transfer order: ${Z instanceof Error?Z.message:"Unknown error"}`)}finally{Q(!1)}},Qe=()=>{p(""),h(""),w(""),v("materialName"),b("asc"),ee(1),B(1),Ge()},ft=async()=>{try{j(!0),await de.exportMall360RawMaterials({search:m,subCategory:g,status:y})}catch(K){console.error("Error exporting raw materials:",K),alert("Error exporting raw materials: "+(K instanceof Error?K.message:"Unknown error"))}finally{j(!1)}},ut=async()=>{try{j(!0),await de.exportMall360FinishedProducts({search:m,subCategory:g,status:y})}catch(K){console.error("Error exporting finished goods:",K),alert("Error exporting finished goods: "+(K instanceof Error?K.message:"Unknown error"))}finally{j(!1)}},Ge=async()=>{var K,Z,te;try{console.log(" Loading 360 Mall inventory from dedicated database"),console.log("   Search params:",{debouncedSearchTerm:Xe,filterCategory:g,filterStatus:y,sortBy:S,sortOrder:x});const ge=await de.get360MallRawMaterials({page:X,limit:ue,search:Xe,subCategory:g,status:y,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(console.log(" Raw Materials API Response:",{success:ge.success,dataLength:((K=ge.data)==null?void 0:K.length)||0,pagination:ge.pagination}),ge.success)if(console.log(" Loaded 360 Mall Raw Materials:",((Z=ge.data)==null?void 0:Z.length)||0,"items"),console.log("   First few items:",(te=ge.data)==null?void 0:te.slice(0,3)),ge.data&&ge.data.length>0){const De=ge.data.map(ke=>{var qe;return{id:ke._id||ke.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"OUT-003",outletName:(r==null?void 0:r.outletName)||"360 Mall",materialId:ke._id,materialCode:ke.materialCode,materialName:ke.materialName,category:ke.subCategory||ke.category,unitOfMeasure:ke.unitOfMeasure,unitPrice:ke.unitPrice||0,currentStock:ke.currentStock||0,reservedStock:0,availableStock:ke.currentStock||0,minimumStock:ke.minimumStock||0,maximumStock:ke.maximumStock||0,reorderPoint:ke.reorderPoint||0,totalValue:(ke.currentStock||0)*(ke.unitPrice||0),location:((qe=ke.storageRequirements)==null?void 0:qe.location)||"Main Storage",batchNumber:ke.batchNumber||"",supplier:ke.supplierName||"",lastUpdated:ke.lastUpdated||ke.updatedAt,status:ke.status,notes:ke.notes||"",isActive:ke.isActive}});i(De),ge.pagination&&(ie(ge.pagination.totalPages),W(ge.pagination.totalItems))}else console.log("No raw materials inventory found for 360 Mall"),i([]),ie(1),W(0);else console.error("Failed to load raw materials inventory:",ge.error||"API Error"),i([]),ie(1),W(0);const ce=await de.get360MallFinishedProducts({page:Ee,limit:ve,search:Xe,subCategory:g,status:y,sortBy:S==="productName"?"productName":S,sortOrder:x});if(ce.success)if(console.log("Loaded 360 Mall Finished Products:",ce.data),ce.data&&ce.data.length>0){const De=ce.data.map(ke=>({id:ke._id||ke.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"OUT-003",outletName:(r==null?void 0:r.outletName)||"360 Mall",productId:ke._id,productCode:ke.productCode,productName:ke.productName,category:ke.subCategory||ke.category,unitOfMeasure:ke.unitOfMeasure,unitPrice:ke.unitPrice||0,costPrice:ke.costPrice||0,currentStock:ke.currentStock||0,reservedStock:0,availableStock:ke.currentStock||0,minimumStock:ke.minimumStock||0,maximumStock:ke.maximumStock||0,reorderPoint:ke.reorderPoint||0,totalValue:(ke.currentStock||0)*(ke.unitPrice||0),productionDate:ke.productionDate||new Date().toISOString(),expiryDate:ke.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:ke.batchNumber||"",storageLocation:ke.storageLocation||"Cold Storage",storageTemperature:ke.storageTemperature||"Cold",qualityStatus:ke.qualityStatus||"Good",qualityNotes:ke.qualityNotes||"",status:ke.status,transferSource:"Transfer",lastUpdated:ke.lastUpdated||ke.updatedAt,notes:ke.notes||"",isActive:ke.isActive}));l(De),ce.pagination&&(et(ce.pagination.totalPages),gt(ce.pagination.totalItems))}else console.log("No finished goods inventory found for 360 Mall"),l([]),et(1),gt(0);else console.error("Failed to load finished goods inventory:",ce.error||"API Error"),l([]),et(1),gt(0)}catch(ge){f(ge instanceof Error?ge.message:"Failed to load inventory"),console.error("Error loading inventory:",ge)}},Sr=K=>{switch(K){case"In Stock":return"bg-green-100 text-green-800";case"Low Stock":return"bg-yellow-100 text-yellow-800";case"Out of Stock":return"bg-red-100 text-red-800";case"Overstock":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading 360 Mall..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:Lt,className:"btn-primary",children:"Retry"})]})});const Er=()=>{switch(kt){case"raw-materials":return he();case"finished-goods":return ae();case"sales-orders":return je();default:return L()}},Ga=async K=>{var te,ge;const Z=(te=K.target.files)==null?void 0:te[0];if(Z)try{E(!0);const ce=Z.name.toLowerCase(),De=He();if(De==="raw-materials"){if(!(ce.endsWith(".xlsx")||ce.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const ke=await de.importMall360RawMaterialsExcel(Z);alert(ke.message||"Raw materials import completed"),await Ge()}else if(De==="finished-goods"){let ke=[];if(ce.endsWith(".json")){const Ae=await Z.text(),Ze=JSON.parse(Ae);ke=Array.isArray(Ze)?Ze:Ze.products||[]}else if(ce.endsWith(".csv"))ke=(await Z.text()).split(`
`).filter(Ue=>Ue.trim()).slice(1).map(Ue=>{const at=Ue.split(",").map(Ot=>Ot.replace(/\"/g,"").trim());return{productCode:at[0]||at[1],productName:at[1]||at[2],subCategory:at[2]||"MAIN COURSES",category:at[2]||"MAIN COURSES",unitOfMeasure:at[3]||"piece",unitPrice:parseFloat(at[4])||0,currentStock:parseFloat(at[5])||0}}).filter(Ue=>Ue.productCode&&Ue.productName);else if(ce.endsWith(".xlsx")||ce.endsWith(".xls")){const Ae=await Z.arrayBuffer(),Ze=await uf(()=>Promise.resolve().then(()=>kf),void 0),Oe=Ze.read(Ae,{type:"array"}),Ue=Oe.Sheets[Oe.SheetNames[0]];ke=Ze.utils.sheet_to_json(Ue,{defval:""}).map(Ot=>{const Bt=M=>M.toString().trim().toLowerCase(),R=M=>{const z=Object.keys(Ot).find(G=>M.includes(Bt(G)));return z?Ot[z]:void 0},D=(R(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(R(["product code","sku","code"])||"").toString().trim(),productName:(R(["product name","item name","name"])||"").toString().trim(),subCategory:D,category:D,unitOfMeasure:(R(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(R(["unit price","price"])))||0,currentStock:Number.parseFloat(String(R(["current stock","current quantity","quantity","qty"])))||0}}).filter(Ot=>Ot.productCode&&Ot.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const qe=await de.importMall360FinishedProducts(ke);alert(qe.message||`Finished products import completed. Success: ${((ge=qe.data)==null?void 0:ge.successCount)||0}`),await Ge()}}catch(ce){console.error("Error importing file:",ce),alert("Error importing file. Please check the file format.")}finally{E(!1),O.current&&(O.current.value="")}},he=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var K;return(K=O.current)==null?void 0:K.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Va,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:ft,disabled:N||_,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:K=>p(K.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:g,onChange:K=>h(K.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:y,onChange:K=>w(K.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:K=>v(K.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",Ne>0?(X-1)*ue+1:0," - ",Math.min(X*ue,Ne)," of ",Ne," raw material items",(Xe||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:ue,onChange:K=>{we(Number(K.target.value)),ee(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(K=>K.materialId&&K.materialCode&&K.materialName).map(K=>{var Z,te,ge;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",K.unitPrice?Number(K.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:K.currentStock}),(k[K.materialCode]||k[K.materialId]||k[K.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((Z=k[K.materialCode]||k[K.materialId]||k[K.id])==null?void 0:Z.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((te=k[K.materialCode]||k[K.materialId]||k[K.id])==null?void 0:te.type)==="increase"?"+":"-",(ge=k[K.materialCode]||k[K.materialId]||k[K.id])==null?void 0:ge.amount]})]})})]},K.id)})})]})}),ne>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",X," of ",ne]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ee(1),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>ee(K=>Math.max(1,K-1)),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ne)},(K,Z)=>{let te;return ne<=5||X<=3?te=Z+1:X>=ne-2?te=ne-4+Z:te=X-2+Z,n.jsx("button",{onClick:()=>ee(te),className:`px-3 py-1 text-sm border rounded-md ${X===te?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:te},te)})}),n.jsx("button",{onClick:()=>ee(K=>Math.min(ne,K+1)),disabled:X===ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>ee(ne),disabled:X===ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),ae=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(rt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var K;return(K=O.current)==null?void 0:K.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Va,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:ut,disabled:N||_,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:K=>p(K.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:g,onChange:K=>h(K.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:y,onChange:K=>w(K.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:K=>v(K.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",Ke>0?(Ee-1)*ve+1:0," - ",Math.min(Ee*ve,Ke)," of ",Ke," finished goods items",(Xe||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:ve,onChange:K=>{ye(Number(K.target.value)),B(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Qe,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(K=>K.productId&&K.productCode&&K.productName).map(K=>{var Z,te,ge;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.unitOfMeasure}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 relative",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:K.currentStock}),(k[K.productCode]||k[K.productId]||k[K.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((Z=k[K.productCode]||k[K.productId]||k[K.id])==null?void 0:Z.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((te=k[K.productCode]||k[K.productId]||k[K.id])==null?void 0:te.type)==="increase"?"+":"-",(ge=k[K.productCode]||k[K.productId]||k[K.id])==null?void 0:ge.amount]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",K.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Sr(K.status)}`,children:K.status})})]},K.id)})})]})}),fe>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",Ee," of ",fe]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>B(1),disabled:Ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>B(K=>Math.max(1,K-1)),disabled:Ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,fe)},(K,Z)=>{let te;return fe<=5||Ee<=3?te=Z+1:Ee>=fe-2?te=fe-4+Z:te=Ee-2+Z,n.jsx("button",{onClick:()=>B(te),className:`px-3 py-1 text-sm border rounded-md ${Ee===te?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:te},te)})}),n.jsx("button",{onClick:()=>B(K=>Math.min(fe,K+1)),disabled:Ee===fe,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>B(fe),disabled:Ee===fe,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),je=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Sales orders functionality will be implemented here."})]})}),L=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-orange-50 to-red-50 border-orange-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx($m,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx($m,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(r==null?void 0:r.outletName)||"360 Mall"}),n.jsxs("p",{className:"text-gray-600",children:[kt==="raw-materials"?"Raw Materials Inventory":kt==="finished-goods"?"Finished Goods Inventory":kt==="sales-orders"?"Sales Orders":"Fast-service food court outlet"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Lt,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),kt==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/360-mall/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),kt==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/360-mall/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:dt(),onMarkAsRead:I,onMarkAllAsRead:F,onClearAll:q,onRefresh:H,onViewTransferOrder:vt})]})]}),Er(),n.jsx("input",{ref:O,type:"file",accept:kt==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:Ga,className:"hidden",disabled:_}),n.jsx(tu,{isOpen:V,onClose:()=>{re(!1),U(null)},transferOrder:oe,onAccept:Et,onReject:fr,loading:J})]})},Wbe=2e4,qbe=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("raw"),Kbe=(e,t)=>((e==null?void 0:e.itemType)||t||"").toString().toLowerCase().includes("finished"),zbe=(e,t)=>{if(!e||!t)return!1;const r=t.toLowerCase(),a=i=>(i==null?void 0:i.toLowerCase())??"";if(typeof e=="string"){const i=e.toLowerCase();return i===r||i.includes(r)}return[e.outletName,e.name,e.kitchenName,e.toOutletName,e.fromOutletName].some(i=>{if(typeof i!="string")return!1;const o=a(i);return o===r||o.includes(r)})},jl=()=>{const e=ct(),t=Ta(),[r,a]=T.useState(null),[s,i]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState(!0),[d,f]=T.useState(null),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState(""),[S,v]=T.useState("materialName"),[x,b]=T.useState("asc"),[N,j]=T.useState(!1),[O,_]=T.useState(!1),E=T.useRef(null),[k,C]=T.useState({}),A=T.useRef({}),{notifications:P,markAsRead:I,markAllAsRead:F,clearAll:q,refreshNotifications:H}=Js("Taiba Hospital"),[V,re]=T.useState(!1),[oe,U]=T.useState(null),[J,Q]=T.useState(!1),[X,ee]=T.useState(1),[ue,we]=T.useState(20),[ne,ie]=T.useState(1),[Ne,W]=T.useState(0),[Ee,B]=T.useState(1),[ve,ye]=T.useState(20),[fe,et]=T.useState(1),[Ke,gt]=T.useState(0),Xe=ru(m,500),[dt,He]=T.useState(null),[kt,vt]=T.useState(!1),[St,Lt]=T.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[Et,fr]=T.useState(null),[Qe,ft]=T.useState(!1),[ut,Ge]=T.useState({currentStock:"",unitPrice:"",costPrice:"",minimumStock:"",maximumStock:"",reorderPoint:"",storageLocation:"",storageTemperature:"",qualityStatus:"",qualityNotes:"",notes:""}),Sr=()=>{const D=t.pathname;return D.includes("/raw-materials")?"raw-materials":D.includes("/finished-goods")?"finished-goods":D.includes("/sales-orders")?"sales-orders":"overview"},Er=Sr(),Ga=()=>{const D=Sr();return D==="raw-materials"?P.filter(M=>M.isTransferOrder&&(M.itemType==="Raw Material"||M.itemType==="Mixed")):D==="finished-goods"?P.filter(M=>M.isTransferOrder&&(M.itemType==="Finished Goods"||M.itemType==="Mixed")):P},he=le.useCallback(async D=>{try{console.log(" Taiba Hospital: handleViewTransferOrder called with transferOrderId:",D),Q(!0);const M=await de.getTransferOrderById(D);if(M.success)U(M.data),re(!0),console.log(" Taiba Hospital: Transfer order modal opened successfully");else throw new Error(M.message||"Failed to load transfer order")}catch(M){console.error("Error loading transfer order:",M),alert("Failed to load transfer order details")}finally{Q(!1)}},[]);T.useEffect(()=>{ae(),ce();const D=z=>{const{transferOrderId:G}=z.detail;G&&he(G)};window.addEventListener("viewTransferOrder",D);const M=localStorage.getItem("pendingTransferOrderView");return M&&(localStorage.removeItem("pendingTransferOrderView"),he(M)),()=>{window.removeEventListener("viewTransferOrder",D)}},[he]),T.useEffect(()=>{P.length>0&&P.some(M=>{var z,G,Y;return!M.read&&(((z=M.title)==null?void 0:z.includes("Items Received from Central Kitchen"))||((G=M.title)==null?void 0:G.includes("Transfer from Central Kitchen"))||((Y=M.title)==null?void 0:Y.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for Taiba Hospital, refreshing inventory..."),ce())},[P]),T.useEffect(()=>{r&&!c&&ce()},[Xe,g,y,S,x,X,ue,Ee,ve]);const ae=async()=>{try{u(!0),f(null);const D=await de.getOutlets({limit:1e3});if(D.success){const M=D.data.find(z=>z.outletName==="Taiba Hospital");M?(a(M),await ce()):f("Taiba Hospital not found")}else f("Failed to load outlet data")}catch(D){f(D instanceof Error?D.message:"Failed to load outlet data"),console.error("Error loading outlet data:",D)}finally{u(!1)}},je=()=>{p(""),h(""),w(""),v("materialName"),b("asc"),ee(1),B(1),ce()};T.useEffect(()=>()=>{Object.values(A.current).forEach(D=>{D&&clearTimeout(D)})},[]);const L=(D,M)=>{!D||D.length===0||C(z=>{const G={...z};return D.forEach(Y=>{const se=Y.materialCode||Y.materialId||Y.itemCode,be=Number(Y.quantity);!se||!be||(G[se]={amount:Math.abs(be),type:M},A.current[se]&&clearTimeout(A.current[se]),A.current[se]=setTimeout(()=>{C(me=>{const xe={...me};return delete xe[se],xe}),delete A.current[se]},Wbe))}),G})},K=async(D,M,z)=>{try{Q(!0),console.log("Starting acceptance process for transfer order:",D),console.log("Edited items:",M),console.log("Transfer notes:",z),console.log("Fetching transfer order details...");const G=await de.getTransferOrderById(D);if(!G.success)throw new Error(G.message||"Failed to fetch transfer order");const Y=G.data;console.log("Transfer order details:",Y);const se={approvedBy:"Taiba Hospital Manager",notes:z||"Transfer order approved by Taiba Hospital"};M&&M.length>0&&(se.editedItems=M,console.log("Including edited items in approval request:",M)),console.log("Approving transfer order...");const be=await de.approveTransferOrder(D,se);if(console.log("Approval response:",be),be.success){const me=M&&M.some((pe,Pe)=>{var Te;return pe.quantity!==((Te=Y.items[Pe])==null?void 0:Te.quantity)});alert(`Transfer order accepted successfully!${me?" (Quantities modified)":""}`),re(!1),U(null),await ce();const xe=(r==null?void 0:r.outletName)||"Taiba Hospital";if(zbe(Y.toOutlet,xe)){const pe=(Y.items||[]).map((Te,Le)=>{const Ie=M&&M[Le]?M[Le].quantity:Te.quantity;return{materialCode:Te.itemCode||Te.materialCode,materialId:Te.materialId,itemCode:Te.itemCode,quantity:Ie,itemType:Te.itemType}}).filter(Te=>qbe(Te,Y.itemType));pe.length>0&&L(pe,"increase");const Pe=(Y.items||[]).map((Te,Le)=>{const Ie=M&&M[Le]?M[Le].quantity:Te.quantity;return{materialCode:Te.itemCode,materialId:Te.productId||Te.materialId,itemCode:Te.itemCode,quantity:Ie,itemType:Te.itemType}}).filter(Te=>Kbe(Te,Y.itemType));Pe.length>0&&L(Pe,"increase")}H()}else throw new Error(`Failed to approve transfer order: ${be.message}`)}catch(G){console.error("Error accepting transfer order:",G),console.error("Error details:",G instanceof Error?G.message:"Unknown error"),alert(`Failed to accept transfer order: ${G instanceof Error?G.message:"Unknown error"}`)}finally{Q(!1)}},Z=async D=>{try{Q(!0);const M=await de.getTransferOrderById(D);if(!M.success)throw new Error(M.message||"Failed to fetch transfer order");const z=await de.rejectTransferOrder(D,{approvedBy:"Taiba Hospital Manager",notes:"Transfer order rejected by Taiba Hospital"});if(z.success)alert("Transfer order rejected successfully!"),re(!1),U(null),H();else throw new Error(`Failed to reject transfer order: ${z.message}`)}catch(M){console.error("Error rejecting transfer order:",M),alert(`Failed to reject transfer order: ${M instanceof Error?M.message:"Unknown error"}`)}finally{Q(!1)}},te=async()=>{try{_(!0),await de.exportTaibaHospitalRawMaterials({search:m,category:g,status:y})}catch(D){console.error("Error exporting raw materials:",D),alert("Error exporting raw materials: "+(D instanceof Error?D.message:"Unknown error"))}finally{_(!1)}},ge=async()=>{try{_(!0),await de.exportTaibaHospitalFinishedProducts({search:m,category:g,status:y})}catch(D){console.error("Error exporting finished goods:",D),alert("Error exporting finished goods: "+(D instanceof Error?D.message:"Unknown error"))}finally{_(!1)}},ce=async()=>{var D,M;try{console.log("Loading Taiba Kitchen inventory..."),console.log("   Search params:",{debouncedSearchTerm:Xe,filterCategory:g,filterStatus:y,sortBy:S,sortOrder:x});const z=await de.getTaibaKitchenRawMaterials({page:X,limit:ue,search:Xe,category:g,status:y,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(console.log(" Raw Materials API Response:",{success:z.success,dataLength:((D=z.data)==null?void 0:D.length)||0,pagination:z.pagination}),z.success)if(console.log(" Loaded Taiba Kitchen Raw Materials:",((M=z.data)==null?void 0:M.length)||0,"items"),z.data&&z.data.length>0){const Y=z.data.map(se=>{var be;return{id:se._id||se.id,outletId:"taiba-kitchen",outletCode:"OUT-004",outletName:"Taiba Hospital",materialId:se._id||se.id,materialCode:se.materialCode,materialName:se.materialName,category:se.category,unitOfMeasure:se.unitOfMeasure,unitPrice:se.unitPrice,currentStock:se.currentStock,reservedStock:0,availableStock:se.currentStock,minimumStock:se.minimumStock,maximumStock:se.maximumStock,reorderPoint:se.reorderPoint,totalValue:se.currentStock*se.unitPrice,location:((be=se.storageRequirements)==null?void 0:be.location)||"Main Storage",batchNumber:se.batchNumber||"",supplier:se.supplierName||"",lastUpdated:se.updatedAt||new Date().toISOString(),status:se.status,notes:se.notes||"",isActive:se.isActive}});i(Y),z.pagination&&(ie(z.pagination.totalPages),W(z.pagination.totalItems))}else console.log("No raw materials inventory found for Taiba Kitchen"),i([]),ie(1),W(0);else console.error("Failed to load raw materials inventory:",z.error||"API Error"),i([]),ie(1),W(0);const G=await de.getTaibaKitchenFinishedProducts({page:Ee,limit:ve,search:Xe,category:g,status:y,sortBy:S==="productName"?"productName":S,sortOrder:x});if(G.success)if(console.log("Loaded outlet finished goods inventory:",G.data),G.data&&G.data.length>0){const Y=G.data.map(se=>({id:se._id||se.id,outletId:"taiba-kitchen",outletCode:"OUT-004",outletName:"Taiba Hospital",productId:se._id||se.id,productCode:se.productCode,productName:se.productName,category:se.category,unitOfMeasure:se.unitOfMeasure,unitPrice:se.unitPrice,costPrice:se.costPrice||0,currentStock:se.currentStock,reservedStock:0,availableStock:se.currentStock,minimumStock:se.minimumStock,maximumStock:se.maximumStock,reorderPoint:se.reorderPoint,totalValue:se.currentStock*se.unitPrice,productionDate:se.productionDate||new Date().toISOString(),expiryDate:se.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:se.batchNumber||"",storageLocation:se.storageLocation||"Cold Storage",storageTemperature:se.storageTemperature||"Cold",qualityStatus:se.qualityStatus||"Good",qualityNotes:se.qualityNotes||"",status:se.status,transferSource:"Transfer",lastUpdated:se.lastUpdated||se.updatedAt,notes:se.notes||"",isActive:se.isActive}));l(Y),G.pagination&&(et(G.pagination.totalPages),gt(G.pagination.totalItems))}else console.log("No finished goods inventory found for this outlet"),l([]),et(1),gt(0);else console.error("Failed to load finished goods inventory:",G.error||"API Error"),l([]),et(1),gt(0)}catch(z){f(z instanceof Error?z.message:"Failed to load inventory"),console.error("Error loading inventory:",z)}},De=async()=>{if(dt)try{const D={currentStock:parseFloat(St.currentStock),minimumStock:parseFloat(St.minimumStock),maximumStock:parseFloat(St.maximumStock),reorderPoint:parseFloat(St.reorderPoint),unitPrice:parseFloat(St.unitPrice),notes:St.notes},M=await de.updateTaibaKitchenRawMaterial(dt.id,D);M.success?(i(z=>z.map(G=>G.id===dt.id?{...G,...D,totalValue:D.currentStock*D.unitPrice}:G)),vt(!1),He(null)):alert(`Failed to update inventory item: ${M.error||"Unknown error"}`)}catch(D){console.error("Error updating inventory item:",D),alert("Failed to update inventory item")}},ke=()=>{vt(!1),He(null),Lt({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},qe=async()=>{if(Et)try{const D={currentStock:parseFloat(ut.currentStock),unitPrice:parseFloat(ut.unitPrice),costPrice:parseFloat(ut.costPrice),minimumStock:parseFloat(ut.minimumStock),maximumStock:parseFloat(ut.maximumStock),reorderPoint:parseFloat(ut.reorderPoint),storageLocation:ut.storageLocation,storageTemperature:ut.storageTemperature,qualityStatus:ut.qualityStatus,qualityNotes:ut.qualityNotes,notes:ut.notes},M=await de.updateTaibaKitchenFinishedProduct(Et.id,D);M.success?(l(z=>z.map(G=>G.id===Et.id?{...G,...D,totalValue:D.currentStock*D.unitPrice}:G)),ft(!1),fr(null)):alert(`Failed to update finished good inventory item: ${M.error||"Unknown error"}`)}catch(D){console.error("Error updating finished good inventory item:",D),alert("Failed to update finished good inventory item")}},Ae=()=>{ft(!1),fr(null),Ge({currentStock:"",unitPrice:"",costPrice:"",minimumStock:"",maximumStock:"",reorderPoint:"",storageLocation:"",storageTemperature:"",qualityStatus:"",qualityNotes:"",notes:""})},Ze=D=>{switch(D){case"In Stock":return"bg-green-100 text-green-800";case"Low Stock":return"bg-yellow-100 text-yellow-800";case"Out of Stock":return"bg-red-100 text-red-800";case"Overstock":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Taiba Hospital..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:ae,className:"btn-primary",children:"Retry"})]})});const Oe=()=>{switch(Er){case"raw-materials":return at();case"finished-goods":return Ot();case"sales-orders":return Bt();default:return R()}},Ue=async D=>{var z,G;const M=(z=D.target.files)==null?void 0:z[0];if(M)try{j(!0);const Y=M.name.toLowerCase(),se=Sr();if(se==="raw-materials"){if(!(Y.endsWith(".xlsx")||Y.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const be=await de.importTaibaKitchenRawMaterialsExcel(M);alert(be.message||"Raw materials import completed"),await ce()}else if(se==="finished-goods"){let be=[];if(Y.endsWith(".json")){const xe=await M.text(),pe=JSON.parse(xe);be=Array.isArray(pe)?pe:pe.products||[]}else if(Y.endsWith(".csv"))be=(await M.text()).split(`
`).filter(Te=>Te.trim()).slice(1).map(Te=>{const Le=Te.split(",").map(Ie=>Ie.replace(/\"/g,"").trim());return{productCode:Le[0]||Le[1],productName:Le[1]||Le[2],subCategory:Le[2]||"MAIN COURSES",category:Le[2]||"MAIN COURSES",unitOfMeasure:Le[3]||"piece",unitPrice:parseFloat(Le[4])||0,currentStock:parseFloat(Le[5])||0}}).filter(Te=>Te.productCode&&Te.productName);else if(Y.endsWith(".xlsx")||Y.endsWith(".xls")){const xe=await M.arrayBuffer(),pe=await uf(()=>Promise.resolve().then(()=>kf),void 0),Pe=pe.read(xe,{type:"array"}),Te=Pe.Sheets[Pe.SheetNames[0]];be=pe.utils.sheet_to_json(Te,{defval:""}).map(Ie=>{const We=Gt=>Gt.toString().trim().toLowerCase(),st=Gt=>{const Lr=Object.keys(Ie).find(ao=>Gt.includes(We(ao)));return Lr?Ie[Lr]:void 0},Zt=(st(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(st(["product code","sku","code"])||"").toString().trim(),productName:(st(["product name","item name","name"])||"").toString().trim(),subCategory:Zt,category:Zt,unitOfMeasure:(st(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(st(["unit price","price"])))||0,currentStock:Number.parseFloat(String(st(["current stock","current quantity","quantity","qty"])))||0}}).filter(Ie=>Ie.productCode&&Ie.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const me=await de.importTaibaKitchenFinishedProducts(be);alert(me.message||`Finished products import completed. Success: ${((G=me.data)==null?void 0:G.successCount)||0}`),await ce()}}catch(Y){console.error("Error importing file:",Y),alert("Error importing file. Please check the file format.")}finally{j(!1),E.current&&(E.current.value="")}},at=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var D;return(D=E.current)==null?void 0:D.click()},disabled:N,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[N?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Va,{className:"h-4 w-4 mr-2"}),N?"Importing...":"Import"]}),n.jsxs("button",{onClick:te,disabled:O||N,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),O?"Exporting...":"Export"]})]})]}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:D=>p(D.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:g,onChange:D=>h(D.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:y,onChange:D=>w(D.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:D=>v(D.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:je,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",Ne>0?(X-1)*ue+1:0," - ",Math.min(X*ue,Ne)," of ",Ne," raw material items",(Xe||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:ue,onChange:D=>{we(Number(D.target.value)),ee(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:je,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:ce,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(D=>D.materialId&&D.materialCode&&D.materialName).map(D=>{var M,z,G;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:D.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",D.unitPrice?Number(D.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:D.currentStock}),(k[D.materialCode]||k[D.materialId]||k[D.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((M=k[D.materialCode]||k[D.materialId]||k[D.id])==null?void 0:M.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((z=k[D.materialCode]||k[D.materialId]||k[D.id])==null?void 0:z.type)==="increase"?"+":"-",(G=k[D.materialCode]||k[D.materialId]||k[D.id])==null?void 0:G.amount]})]})})]},D.id)})})]})}),ne>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",X," of ",ne]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ee(1),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>ee(D=>Math.max(1,D-1)),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ne)},(D,M)=>{let z;return ne<=5||X<=3?z=M+1:X>=ne-2?z=ne-4+M:z=X-2+M,n.jsx("button",{onClick:()=>ee(z),className:`px-3 py-1 text-sm border rounded-md ${X===z?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:z},z)})}),n.jsx("button",{onClick:()=>ee(D=>Math.min(ne,D+1)),disabled:X===ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>ee(ne),disabled:X===ne,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),Ot=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(rt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var D;return(D=E.current)==null?void 0:D.click()},disabled:N,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[N?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Va,{className:"h-4 w-4 mr-2"}),N?"Importing...":"Import"]}),n.jsxs("button",{onClick:ge,disabled:O||N,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),O?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:D=>p(D.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:g,onChange:D=>h(D.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:y,onChange:D=>w(D.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:D=>v(D.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:je,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",Ke>0?(Ee-1)*ve+1:0," - ",Math.min(Ee*ve,Ke)," of ",Ke," finished goods items",(Xe||g||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:ve,onChange:D=>{ye(Number(D.target.value)),B(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:je,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:ce,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(D=>D.productId&&D.productCode&&D.productName).map(D=>{var M,z,G;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:D.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.unitOfMeasure}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 relative",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:D.currentStock}),(k[D.productCode]||k[D.productId]||k[D.id])&&n.jsxs("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${((M=k[D.productCode]||k[D.productId]||k[D.id])==null?void 0:M.type)==="increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[((z=k[D.productCode]||k[D.productId]||k[D.id])==null?void 0:z.type)==="increase"?"+":"-",(G=k[D.productCode]||k[D.productId]||k[D.id])==null?void 0:G.amount]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",D.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Ze(D.status)}`,children:D.status})})]},D.id)})})]})}),fe>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",Ee," of ",fe]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>B(1),disabled:Ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>B(D=>Math.max(1,D-1)),disabled:Ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,fe)},(D,M)=>{let z;return fe<=5||Ee<=3?z=M+1:Ee>=fe-2?z=fe-4+M:z=Ee-2+M,n.jsx("button",{onClick:()=>B(z),className:`px-3 py-1 text-sm border rounded-md ${Ee===z?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:z},z)})}),n.jsx("button",{onClick:()=>B(D=>Math.min(fe,D+1)),disabled:Ee===fe,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>B(fe),disabled:Ee===fe,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),Bt=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Sales orders functionality will be implemented here."})]})}),R=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Rm,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(rt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Rm,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Taiba Hospital"}),n.jsxs("p",{className:"text-gray-600",children:[Er==="raw-materials"?"Raw Materials Inventory":Er==="finished-goods"?"Finished Goods Inventory":Er==="sales-orders"?"Sales Orders":"Express drive-thru outlet"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:ae,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),Er==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/drive-thru-express/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),Er==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/drive-thru-express/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:Ga(),onMarkAsRead:I,onMarkAllAsRead:F,onClearAll:q,onRefresh:H,onViewTransferOrder:he})]})]}),Oe(),n.jsx("input",{ref:E,type:"file",accept:Er==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:Ue,className:"hidden",disabled:N}),n.jsx(tu,{isOpen:V,onClose:()=>{re(!1),U(null)},transferOrder:oe,onAccept:K,onReject:Z,loading:J}),kt&&dt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Edit Inventory Item"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[dt.materialCode," - ",dt.materialName]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{type:"number",step:"0.01",value:St.currentStock,onChange:D=>Lt(M=>({...M,currentStock:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",value:St.unitPrice,onChange:D=>Lt(M=>({...M,unitPrice:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:St.minimumStock,onChange:D=>Lt(M=>({...M,minimumStock:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:St.maximumStock,onChange:D=>Lt(M=>({...M,maximumStock:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{type:"number",step:"0.01",value:St.reorderPoint,onChange:D=>Lt(M=>({...M,reorderPoint:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:St.notes,onChange:D=>Lt(M=>({...M,notes:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:ke,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:De,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})}),Qe&&Et&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Edit Finished Good Inventory Item"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[Et.productCode," - ",Et.productName]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{type:"number",step:"0.01",value:ut.currentStock,onChange:D=>Ge(M=>({...M,currentStock:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",value:ut.unitPrice,onChange:D=>Ge(M=>({...M,unitPrice:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price"}),n.jsx("input",{type:"number",step:"0.01",value:ut.costPrice,onChange:D=>Ge(M=>({...M,costPrice:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:ut.minimumStock,onChange:D=>Ge(M=>({...M,minimumStock:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:ut.maximumStock,onChange:D=>Ge(M=>({...M,maximumStock:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{type:"number",step:"0.01",value:ut.reorderPoint,onChange:D=>Ge(M=>({...M,reorderPoint:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Location"}),n.jsx("input",{type:"text",value:ut.storageLocation,onChange:D=>Ge(M=>({...M,storageLocation:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Temperature"}),n.jsxs("select",{value:ut.storageTemperature,onChange:D=>Ge(M=>({...M,storageTemperature:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Cold",children:"Cold"}),n.jsx("option",{value:"Frozen",children:"Frozen"}),n.jsx("option",{value:"Hot",children:"Hot"}),n.jsx("option",{value:"Room Temperature",children:"Room Temperature"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{value:ut.qualityStatus,onChange:D=>Ge(M=>({...M,qualityStatus:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Good",children:"Good"}),n.jsx("option",{value:"Damaged",children:"Damaged"}),n.jsx("option",{value:"Expired",children:"Expired"}),n.jsx("option",{value:"Under Review",children:"Under Review"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Notes"}),n.jsx("textarea",{value:ut.qualityNotes,onChange:D=>Ge(M=>({...M,qualityNotes:D.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:ut.notes,onChange:D=>Ge(M=>({...M,notes:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:Ae,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:qe,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})]})},Vbe=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,c]=T.useState(null),[u,d]=T.useState(!1),[f,m]=T.useState(""),[p,g]=T.useState(""),[h,y]=T.useState(""),[w,S]=T.useState("createdAt"),[v,x]=T.useState("desc");T.useEffect(()=>{b()},[]),T.useEffect(()=>{a||b()},[f,p,h,w,v]);const b=async()=>{try{s(!0),o(null);const C=await de.getRawMaterialForecasts({limit:1e3,search:f,status:p,forecastPeriod:h,sortBy:w,sortOrder:v});C.success?(console.log("Loaded Raw Material Forecasts:",C.data),r(C.data)):o("Failed to load forecasts")}catch(C){o(C instanceof Error?C.message:"Failed to load forecasts"),console.error("Error loading forecasts:",C)}finally{s(!1)}},N=t,j=()=>{m(""),g(""),y(""),S("createdAt"),x("desc"),b()},O=C=>{c(C),d(!0)},_=async C=>{if(window.confirm("Are you sure you want to delete this forecast?"))try{(await de.deleteRawMaterialForecast(C)).success?await b():alert("Failed to delete forecast")}catch(A){alert("Error deleting forecast: "+(A instanceof Error?A.message:"Unknown error")),console.error("Error deleting forecast:",A)}},E=C=>{switch(C){case"Active":return"bg-green-100 text-green-800";case"Draft":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=C=>{switch(C){case"High":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading forecasts..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:b,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ingredient Forecast"}),n.jsx("p",{className:"text-gray-600",children:"Plan and predict your ingredient requirements based on Job Orders"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:b,className:"btn-secondary flex items-center",title:"Refresh forecasts",children:[n.jsx(Iu,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/raw-material-forecast/add"),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Create Forecast"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search forecasts by name, number, or description...",className:"input-field pl-10",value:f,onChange:C=>m(C.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:j,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:C=>g(C.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),n.jsxs("select",{className:"input-field",value:h,onChange:C=>y(C.target.value),children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"Weekly",children:"Weekly"}),n.jsx("option",{value:"Monthly",children:"Monthly"}),n.jsx("option",{value:"Quarterly",children:"Quarterly"}),n.jsx("option",{value:"Yearly",children:"Yearly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:C=>S(C.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"forecastNumber",children:"Forecast Number"}),n.jsx("option",{value:"forecastName",children:"Forecast Name"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"forecastStartDate",children:"Start Date"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",N.length," forecasts",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(f||p||h)&&n.jsx("button",{onClick:j,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Forecast #"}),n.jsx("th",{className:"table-header",children:"Name"}),n.jsx("th",{className:"table-header",children:"Period"}),n.jsx("th",{className:"table-header",children:"Start Date"}),n.jsx("th",{className:"table-header",children:"End Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Confidence"}),n.jsx("th",{className:"table-header",children:"Total Value"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:C.forecastNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:C.forecastName}),n.jsx("div",{className:"text-gray-500 text-sm max-w-xs truncate",children:C.forecastDescription})]})}),n.jsx("td",{className:"table-cell",children:C.forecastPeriod}),n.jsx("td",{className:"table-cell",children:new Date(C.forecastStartDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:new Date(C.forecastEndDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(C.status)}`,children:C.status})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${k(C.confidenceLevel)}`,children:C.confidenceLevel})}),n.jsxs("td",{className:"table-cell font-semibold",children:[C.totalValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>O(C),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Vi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/raw-material-forecast/edit/${C.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_(C.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},C.id))})]})})}),u&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Forecast Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forecast Number"}),n.jsx("p",{className:"text-gray-900 font-mono",children:l.forecastNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forecast Name"}),n.jsx("p",{className:"text-gray-900",children:l.forecastName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),n.jsx("p",{className:"text-gray-900",children:l.forecastPeriod})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(l.status)}`,children:l.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.forecastStartDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.forecastEndDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confidence Level"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${k(l.confidenceLevel)}`,children:l.confidenceLevel})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Value"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[l.totalValue.toFixed(2)," KWD"]})]})]}),l.forecastDescription&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:l.forecastDescription})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Forecast Items (",l.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.items.map((C,A)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:C.materialCode}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:C.materialName}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[C.requiredQuantity.toFixed(2)," ",C.unitOfMeasure]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[C.availableQuantity.toFixed(2)," ",C.unitOfMeasure]}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.shortfall>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:[C.shortfall.toFixed(2)," ",C.unitOfMeasure]})}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[C.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[C.forecastValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:C.jobOrderNumber}),n.jsx("div",{className:"text-xs",children:C.bomCode})]})})]},A))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:l.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:l.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/raw-material-forecast/edit/${l.id}`)},className:"btn-primary",children:"Edit Forecast"})]})]})})]})},Hbe=()=>{const e=ct(),[t,r]=T.useState({selectedJobOrderId:"",items:[]}),[a,s]=T.useState({}),[i,o]=T.useState([]),[l,c]=T.useState([]),[u,d]=T.useState(!1),[f,m]=T.useState(null),[p,g]=T.useState(new Set);T.useEffect(()=>{h(),y()},[]);const h=async()=>{try{d(!0),console.log("Loading job orders from backend...");const b=await de.getJobOrders({limit:1e3});console.log("Job orders response:",b),b.success&&b.data&&b.data.length>0?(o(b.data),console.log(" Loaded job orders from backend:",b.data.length)):(console.log(" No job orders found in backend"),o([]))}catch(b){console.error(" Error loading job orders from backend:",b),o([])}finally{d(!1)}},y=async()=>{try{console.log("Loading BOMs from backend...");const b=await de.getBillOfMaterials({limit:1e3});b.success&&b.data&&b.data.length>0?(c(b.data),console.log(" Loaded BOMs from backend:",b.data.length)):(console.log(" No BOMs found in backend"),c([]))}catch(b){console.error(" Error loading BOMs from backend:",b),c([])}},w=b=>{const N=i.find(O=>O.id===b);if(!N)return;m(N),r(O=>({...O,selectedJobOrderId:b}));const j=new Map;N.items.forEach(O=>{const _=l.find(E=>E.id===O.bomId);_&&_.items.forEach(E=>{const k=E.materialCode,C=O.totalQuantity*E.quantity;if(j.has(k)){const A=j.get(k);A.requiredQuantity+=C,A.forecastQuantity=A.requiredQuantity,A.forecastValue=A.forecastQuantity*A.unitPrice,A.shortfall=Math.max(0,A.requiredQuantity-A.availableQuantity)}else{const A={materialId:E.materialId,materialCode:E.materialCode,materialName:E.materialName,currentStock:0,unitOfMeasure:E.unitOfMeasure,unitPrice:E.unitCost,forecastQuantity:C,forecastValue:C*E.unitCost,leadTime:3,requiredQuantity:C,availableQuantity:0,shortfall:C,jobOrderId:N.id,jobOrderNumber:N.jobOrderNumber,bomId:_.id,bomCode:_.bomCode,notes:`Required for ${O.product} (${O.totalQuantity} units)`};j.set(k,A)}})}),r(O=>({...O,items:Array.from(j.values())}))},S=()=>{const b={};return t.selectedJobOrderId||(b.selectedJobOrderId="Please select a Recipe Order"),t.items.length===0&&(b.items="No forecast items generated. Please select a Recipe Order with valid BOMs."),s(b),Object.keys(b).length===0},v=async b=>{if(b.preventDefault(),!!S())try{const N=t.items.reduce((E,k)=>E+k.forecastValue,0),O={forecastNumber:`FC-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`,forecastName:`Forecast for ${f==null?void 0:f.jobOrderNumber}`,forecastDescription:`Material forecast based on Job Order ${f==null?void 0:f.jobOrderNumber}`,forecastPeriod:"Monthly",forecastStartDate:new Date().toISOString().split("T")[0],forecastEndDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"Draft",totalValue:Math.round(N*100)/100,items:t.items,basedOnJobOrders:!0,basedOnHistoricalData:!1,confidenceLevel:"Medium",createdBy:"admin",updatedBy:"admin"};console.log("Creating Forecast:",O);const _=await de.createRawMaterialForecast(O);if(_.success){let E="Forecast created successfully!";if(_.data&&_.data.generatedPurchaseOrder){const k=_.data.generatedPurchaseOrder;E+=`

 Purchase Order Generated:
PO Number: ${k.poNumber}
Total Amount: ${k.totalAmount.toFixed(2)} KWD
Items: ${k.items.length} materials
Status: ${k.status}`}alert(E),e("/raw-material-forecast")}else alert("Error creating forecast: "+(_.message||"Unknown error"))}catch(N){console.error("Error creating forecast:",N),alert("Error creating forecast: "+(N instanceof Error?N.message:"Unknown error"))}},x=b=>{const N=new Set(p);N.has(b)?N.delete(b):N.add(b),g(N)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Ingredient Forecast"}),n.jsx("p",{className:"text-gray-600",children:"Create an ingredient forecast based on Job Orders"})]}),n.jsxs("button",{onClick:()=>e("/raw-material-forecast"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Forecasts"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Step 1: Select Recipe Order"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Recipe Order *"}),n.jsxs("select",{className:`input-field ${a.selectedJobOrderId?"border-red-500":""}`,value:t.selectedJobOrderId,onChange:b=>w(b.target.value),children:[n.jsx("option",{value:"",children:"Select a Recipe Order"}),u?n.jsx("option",{disabled:!0,children:"Loading recipe orders..."}):i.map(b=>n.jsxs("option",{value:b.id,children:["Recipe Order #",b.jobOrderNumber," - ",b.customerName," (",b.items.length," items)"]},b.id))]}),a.selectedJobOrderId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.selectedJobOrderId})]}),f&&n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Recipe Order Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Order Number:"})," ",f.jobOrderNumber]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",f.customerName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total Items:"})," ",f.items.length]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",f.totalAmount.toFixed(2)," KWD"]})]})]})]})]}),f&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 2: Recipe Order Items & Ingredients"}),n.jsx("div",{className:"space-y-4",children:f.items.map((b,N)=>{const j=l.find(E=>E.id===b.bomId),O=`item-${N}`,_=p.has(O);return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(s8,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:b.product}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",b.totalQuantity," units | Unit Price: ",b.unitPrice.toFixed(2)," KWD | Total: ",b.totalPrice.toFixed(2)," KWD"]})]})]}),n.jsx("button",{type:"button",onClick:()=>x(O),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:_?"Hide Ingredients":"Show Ingredients"})]}),_&&j&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx(rt,{className:"h-4 w-4 text-green-600"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Recipe: ",j.productName," (",j.bomCode,")"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ingredient"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Per Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.items.map((E,k)=>{const C=b.totalQuantity*E.quantity,A=0,P=Math.max(0,C-A),I=C*E.unitCost;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.materialName}),n.jsx("div",{className:"text-sm text-gray-500 font-mono",children:E.materialCode})]})}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:E.unitOfMeasure}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:E.quantity}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 font-semibold",children:C.toFixed(2)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:A.toFixed(2)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:P.toFixed(2)})}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900",children:[E.unitCost.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900 font-semibold",children:[I.toFixed(2)," KWD"]})]},k)})})]})})]})]},N)})})]}),t.items.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 3: Forecast Summary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-red-800 font-semibold text-lg",children:t.items.reduce((b,N)=>b+N.shortfall,0).toFixed(2)}),n.jsx("div",{className:"text-red-600 text-sm",children:"Total Shortfall"})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-blue-800 font-semibold text-lg",children:t.items.reduce((b,N)=>b+N.requiredQuantity,0).toFixed(2)}),n.jsx("div",{className:"text-blue-600 text-sm",children:"Total Required"})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-green-800 font-semibold text-lg",children:t.items.reduce((b,N)=>b+N.availableQuantity,0).toFixed(2)}),n.jsx("div",{className:"text-green-600 text-sm",children:"Total Available"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.items.map((b,N)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.materialName}),n.jsx("div",{className:"text-sm text-gray-500 font-mono",children:b.materialCode})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.unitOfMeasure}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:b.requiredQuantity.toFixed(2)}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.availableQuantity.toFixed(2)}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b.shortfall>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:b.shortfall.toFixed(2)})}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[b.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[b.forecastValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:b.jobOrderNumber}),n.jsx("div",{className:"text-xs",children:b.bomCode})]})})]},N))})]})}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("div",{children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Forecast Value: ",t.items.reduce((b,N)=>b+N.forecastValue,0).toFixed(2)," KWD"]})}),n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-red-600",children:["Total Shortfall Value: ",t.items.reduce((b,N)=>b+N.shortfall*N.unitPrice,0).toFixed(2)," KWD"]})})]}),t.items.some(b=>b.shortfall>0)&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:" Purchase Order will be automatically generated for shortfall quantities"}),n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Total PO Value: ",t.items.reduce((b,N)=>b+N.shortfall*N.unitPrice,0).toFixed(2)," KWD"]})]})]})})]})]})]}),t.items.length>0&&n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-material-forecast"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Generate Forecast"]})]})]})})]})},oi=()=>{const e=ct(),t=Ta(),[r,a]=T.useState([]),[s,i]=T.useState(!0),[o,l]=T.useState(null),[c,u]=T.useState(""),[d,f]=T.useState(""),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState(""),[S,v]=T.useState(null),[x,b]=T.useState(!1),[N,j]=T.useState([]),[O,_]=T.useState(null),[E,k]=T.useState([]),[C,A]=T.useState(!1),[P,I]=T.useState({}),F=()=>{const B=t.pathname;return B.includes("/kuwait-city/")?"Kuwait City":B.includes("/360-mall/")||B.includes("/marina-walk-cafe/")?"360 Mall":B.includes("/vibes-complex/")||B.includes("/mall-food-court/")?"Vibes Complex":B.includes("/taiba-hospital/")||B.includes("/drive-thru-express/")?"Taiba Hospital":null},q=F(),H=["Pending","Confirmed","Preparing","Ready","Served","Completed","Cancelled"],V=["Dine-in","Takeaway","Delivery","Drive-thru"],re=["Pending","Paid","Partially Paid","Refunded"],oe=async()=>{i(!0),l(null);try{const ve=F()||(O==null?void 0:O.outletName)||"",ye=await de.getSalesOrders({search:c,outletName:ve,orderStatus:m,orderType:g,paymentStatus:y,limit:1e3,sortBy:"orderTiming.orderDate",sortOrder:"desc"});ye.success?a(ye.data):(console.log("API failed, loading sample data"),U())}catch(B){console.log("API error, loading sample data:",B),U()}finally{i(!1)}},U=()=>{const B=F(),ve=[{_id:"so-001",orderNumber:"SO-DT-001-001",outletId:{_id:"outlet-downtown-001",outletCode:"DT-001",outletName:B||"Kuwait City"},outletCode:"DT-001",outletName:B||"Kuwait City",customerInfo:{customerName:"John Smith",customerPhone:"+965-1234-5678",customerEmail:"john.smith@email.com",tableNumber:"T-05",orderType:"Dine-in"},orderItems:[{productId:{_id:"fg-001",productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages"},productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages",quantity:2,unitPrice:4.5,totalPrice:9,specialInstructions:"Extra ice"},{productId:{_id:"fg-002",productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals"},productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals",quantity:1,unitPrice:8.75,totalPrice:8.75,specialInstructions:"No nuts"}],orderSummary:{subtotal:17.75,taxAmount:2.66,discountAmount:0,totalAmount:20.41,paymentMethod:"Card",paymentStatus:"Paid"},orderStatus:"Ready",orderTiming:{orderDate:new Date().toISOString(),estimatedPrepTime:15,servedAt:new Date().toISOString()},notes:"Regular customer",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"so-002",orderNumber:"SO-MW-001-002",outletId:{_id:"outlet-marina-001",outletCode:"MW-001",outletName:B||"360 Mall"},outletCode:"MW-001",outletName:B||"360 Mall",customerInfo:{customerName:"Sarah Johnson",customerPhone:"+965-9876-5432",customerEmail:"sarah.j@email.com",orderType:"Takeaway"},orderItems:[{productId:{_id:"fg-003",productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages"},productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages",quantity:1,unitPrice:5.25,totalPrice:5.25}],orderSummary:{subtotal:5.25,taxAmount:.79,discountAmount:0,totalAmount:6.04,paymentMethod:"Cash",paymentStatus:"Paid"},orderStatus:"Completed",orderTiming:{orderDate:new Date(Date.now()-30*60*1e3).toISOString(),estimatedPrepTime:10,servedAt:new Date(Date.now()-20*60*1e3).toISOString(),completedAt:new Date(Date.now()-10*60*1e3).toISOString()},notes:"Quick takeaway order",createdAt:new Date(Date.now()-30*60*1e3).toISOString(),updatedAt:new Date(Date.now()-10*60*1e3).toISOString()},{_id:"so-003",orderNumber:"SO-MF-001-003",outletId:{_id:"outlet-mall-001",outletCode:"MF-001",outletName:B||"Vibes Complex"},outletCode:"MF-001",outletName:B||"Vibes Complex",customerInfo:{customerName:"Ahmed Al-Rashid",customerPhone:"+965-5555-1234",tableNumber:"T-12",orderType:"Dine-in"},orderItems:[{productId:{_id:"fg-004",productCode:"FG-004",productName:"Quinoa Salad",category:"Meals"},productCode:"FG-004",productName:"Quinoa Salad",category:"Meals",quantity:2,unitPrice:7.5,totalPrice:15,specialInstructions:"Extra dressing"},{productId:{_id:"fg-005",productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks"},productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks",quantity:1,unitPrice:3.25,totalPrice:3.25}],orderSummary:{subtotal:18.25,taxAmount:2.74,discountAmount:1,totalAmount:19.99,paymentMethod:"Digital Wallet",paymentStatus:"Paid"},orderStatus:"Preparing",orderTiming:{orderDate:new Date(Date.now()-10*60*1e3).toISOString(),estimatedPrepTime:20},notes:"Family lunch order",createdAt:new Date(Date.now()-10*60*1e3).toISOString(),updatedAt:new Date(Date.now()-5*60*1e3).toISOString()}],ye=B?ve.filter(fe=>fe.outletName===B):ve;a(ye),l(null)},J=async()=>{try{console.log("SalesOrders - loadOutlets called, pathname:",t.pathname);const B=await de.getOutlets({limit:1e3});if(B.success){j(B.data);const ve=F();if(console.log("SalesOrders - Detected outlet from path:",ve),ve){O||_({outletName:ve});const ye=B.data.find(fe=>fe.outletName===ve);console.log("SalesOrders - Found outlet in data:",ye),ye&&(_(ye),f(ye._id),console.log("SalesOrders - Set currentOutlet:",ye.outletName))}else _(null)}}catch(B){console.error("Error loading outlets:",B)}};T.useEffect(()=>{J()},[t.pathname]),T.useEffect(()=>{oe()},[c,d,m,g,y,t.pathname]),T.useEffect(()=>{const B=setTimeout(()=>{oe()},500);return()=>clearTimeout(B)},[]);const Q=()=>{oe()};T.useEffect(()=>{const B=()=>{setTimeout(()=>{oe()},100)};return window.addEventListener("focus",B),()=>{window.removeEventListener("focus",B)}},[]);const X=B=>{v(B),b(!0)},ee=async B=>{if(globalThis.confirm("Are you sure you want to delete this sales order?"))try{const ve=await de.deleteSalesOrder(B);ve.success?(alert(ve.message),oe()):alert(ve.message||"Failed to delete sales order")}catch(ve){alert(ve.message||"An error occurred during deletion")}},ue=async B=>{I(ve=>({...ve,[B]:"pushing"}));try{const ve=await de.pushSalesOrderToZoho(B);ve.success?(I(ye=>({...ye,[B]:"success"})),alert(`Sales order pushed to Zoho as Invoice successfully! Zoho Invoice ID: ${ve.data.zohoInvoiceId}`),oe()):(I(ye=>({...ye,[B]:"error"})),alert(ve.message||"Failed to push sales order to Zoho"))}catch(ve){I(ye=>({...ye,[B]:"error"})),alert(ve.message||"An error occurred while pushing to Zoho")}},we=async()=>{if(E.length===0){alert("Please select at least one sales order to push to Zoho");return}A(!0);try{const B=await de.pushBulkSalesOrdersToZoho(E);B.success?(alert(`Bulk push to Zoho Invoices completed! ${B.data.successful.length} successful, ${B.data.failed.length} failed`),k([]),oe()):alert(B.message||"Failed to push sales orders to Zoho")}catch(B){alert(B.message||"An error occurred during bulk push to Zoho")}finally{A(!1)}},ne=B=>{k(ve=>ve.includes(B)?ve.filter(ye=>ye!==B):[...ve,B])},ie=()=>{E.length===r.length?k([]):k(r.map(B=>B._id))},Ne=B=>{switch(B){case"Pending":return"bg-yellow-100 text-yellow-800";case"Confirmed":return"bg-blue-100 text-blue-800";case"Preparing":return"bg-orange-100 text-orange-800";case"Ready":return"bg-green-100 text-green-800";case"Served":return"bg-green-100 text-green-800";case"Completed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},W=B=>{switch(B){case"Pending":return"bg-yellow-100 text-yellow-800";case"Paid":return"bg-green-100 text-green-800";case"Partially Paid":return"bg-blue-100 text-blue-800";case"Refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ee=B=>{switch(B){case"Dine-in":return"";case"Takeaway":return"";case"Delivery":return"";case"Drive-thru":return"";default:return""}};return n.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Sales Orders",O&&n.jsxs("span",{className:"text-lg font-normal text-gray-600 ml-2",children:["- ",O.outletName]})]}),O&&n.jsxs("p",{className:"text-gray-600 mt-1",children:["Managing sales orders for ",O.outletName]})]}),n.jsxs("div",{className:"flex space-x-3",children:[E.length>0&&n.jsx("button",{onClick:we,disabled:C,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:C?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Pushing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Va,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Push to Zoho Invoices (",E.length,")"]})}),n.jsxs("button",{onClick:()=>{const B=F();if(B){const ye={"Kuwait City":"kuwait-city","360 Mall":"360-mall","Vibes Complex":"vibes-complex","Taiba Hospital":"taiba-hospital"}[B]||B.toLowerCase().replace(/\s+/g,"-");e(`/${ye}/pos-sales/create-order`)}else e("/sales-orders/add")},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(Nt,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Create Order"]})]})]}),n.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Search"}),n.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(cr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),n.jsx("input",{type:"text",name:"search",id:"search",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search orders...",value:c,onChange:B=>u(B.target.value)})]})]}),!q&&!O&&n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"outletFilter",className:"block text-sm font-medium text-gray-700",children:"Outlet"}),n.jsxs("select",{id:"outletFilter",name:"outletFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:d,onChange:B=>f(B.target.value),children:[n.jsx("option",{value:"",children:"All Outlets"}),N.map(B=>n.jsx("option",{value:B._id,children:B.outletName},B._id))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsxs("select",{id:"statusFilter",name:"statusFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:m,onChange:B=>p(B.target.value),children:[n.jsx("option",{value:"",children:"All Statuses"}),H.map(B=>n.jsx("option",{value:B,children:B},B))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"orderTypeFilter",className:"block text-sm font-medium text-gray-700",children:"Order Type"}),n.jsxs("select",{id:"orderTypeFilter",name:"orderTypeFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:g,onChange:B=>h(B.target.value),children:[n.jsx("option",{value:"",children:"All Types"}),V.map(B=>n.jsx("option",{value:B,children:B},B))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"paymentStatusFilter",className:"block text-sm font-medium text-gray-700",children:"Payment"}),n.jsxs("select",{id:"paymentStatusFilter",name:"paymentStatusFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:y,onChange:B=>w(B.target.value),children:[n.jsx("option",{value:"",children:"All Payments"}),re.map(B=>n.jsx("option",{value:B,children:B},B))]})]})]}),n.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[n.jsxs("button",{onClick:()=>{u(""),O||f(""),p(""),h(""),w("")},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(wt,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Clear Filters"]}),n.jsxs("button",{onClick:Q,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(ea,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Refresh"]})]})]}),s?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full"}),n.jsx("p",{className:"text-gray-600 mt-3",children:"Loading sales orders..."})]}):o?n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error!"}),n.jsxs("span",{className:"block sm:inline",children:[" ",o]}),n.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:n.jsx(wt,{className:"h-6 w-6 text-red-500 cursor-pointer",onClick:()=>l(null)})})]}):r.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Fr,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-lg",children:"No sales orders found."}),n.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new order."})]}):n.jsx("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.jsx("input",{type:"checkbox",checked:E.length===r.length&&r.length>0,onChange:ie,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order #"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Status"}),n.jsx("th",{scope:"col",className:"relative px-6 py-3",children:n.jsx("span",{className:"sr-only",children:"Actions"})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(B=>{var ve,ye,fe;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:E.includes(B._id),onChange:()=>ne(B._id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:B.orderNumber}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:B.customerInfo.customerName}),B.customerInfo.customerPhone&&n.jsx("div",{className:"text-gray-400",children:B.customerInfo.customerPhone})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B.outletName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("span",{className:"flex items-center",children:[n.jsx("span",{className:"mr-1",children:Ee(B.customerInfo.orderType)}),B.customerInfo.orderType]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[B.orderItems.length," item",B.orderItems.length!==1?"s":""]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",B.orderSummary.totalAmount.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Ne(B.orderStatus)}`,children:B.orderStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${W(B.orderSummary.paymentStatus)}`,children:B.orderSummary.paymentStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(B.orderTiming.orderDate).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((ve=B.zohoIntegration)==null?void 0:ve.status)==="pushed"?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(M1,{className:"h-3 w-3 mr-1"}),"Invoice Created"]}):((ye=B.zohoIntegration)==null?void 0:ye.status)==="failed"?n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Failed"}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Pushed"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[((fe=B.zohoIntegration)==null?void 0:fe.status)!=="pushed"&&n.jsx("button",{onClick:()=>ue(B._id),disabled:P[B._id]==="pushing",className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:"Push to Zoho as Invoice",children:P[B._id]==="pushing"?n.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-green-600 border-t-transparent rounded-full"}):n.jsx(Va,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>X(B),className:"text-indigo-600 hover:text-indigo-900",title:"View Details",children:n.jsx(Vi,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>e(`/sales-orders/edit/${B._id}`),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:n.jsx(ys,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>ee(B._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Dt,{className:"h-5 w-5"})})]})})]},B._id)})})]})}),x&&S&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-gray-800 bg-opacity-75 flex justify-center items-center",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl mx-4 my-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Order Details: ",S.orderNumber]}),n.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Customer Information"}),n.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",S.customerInfo.customerName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",S.customerInfo.customerPhone||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",S.customerInfo.customerEmail||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Order Type:"})," ",Ee(S.customerInfo.orderType)," ",S.customerInfo.orderType]}),S.customerInfo.tableNumber&&n.jsxs("p",{children:[n.jsx("strong",{children:"Table:"})," ",S.customerInfo.tableNumber]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Order Summary"}),n.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Outlet:"})," ",S.outletName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Ne(S.orderStatus)}`,children:S.orderStatus})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Payment:"})," ",n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${W(S.orderSummary.paymentStatus)}`,children:S.orderSummary.paymentStatus})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Method:"})," ",S.orderSummary.paymentMethod]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total:"})," KWD ",S.orderSummary.totalAmount.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Order Items"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.orderItems.map((B,ve)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:B.productName}),n.jsx("div",{className:"text-gray-500",children:B.productCode}),B.specialInstructions&&n.jsx("div",{className:"text-gray-400 text-xs italic",children:B.specialInstructions})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B.quantity}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",B.unitPrice.toFixed(2)]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",B.totalPrice.toFixed(2)]})]},ve))})]})})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Close"})})]})})]})},li=()=>{const e=ct(),t=Ta(),[r,a]=T.useState(null),[s,i]=T.useState([]),[o,l]=T.useState(!0),[c,u]=T.useState({orderNumber:"",outletId:"",outletCode:"",outletName:"",customerInfo:{customerName:"",customerPhone:"",customerEmail:"",tableNumber:"",orderType:"Dine-in"},orderItems:[],orderSummary:{subtotal:0,taxAmount:0,discountAmount:0,totalAmount:0,paymentMethod:"Cash",paymentStatus:"Pending"},orderStatus:"Pending",orderTiming:{orderDate:new Date().toISOString().split("T")[0],estimatedPrepTime:15},notes:""}),[d,f]=T.useState({}),[m]=T.useState("");T.useEffect(()=>{const A=new URLSearchParams(t.search).get("outlet");A?p(A):g()},[t.search]);const p=async C=>{try{l(!0);const P={"kuwait-city":"Kuwait City","360-mall":"360 Mall","marina-walk-cafe":"360 Mall","vibes-complex":"Vibes Complex","mall-food-court":"Vibes Complex","taiba-hospital":"Taiba Hospital","drive-thru-express":"Taiba Hospital"}[C]||C,I=await de.getOutlets({limit:1e3});if(I.success&&Array.isArray(I.data)){const F=I.data.find(q=>q.outletName===P);F&&(a(F),u(q=>({...q,outletId:F._id||F.id,outletCode:F.outletCode,outletName:F.outletName,orderNumber:`SO-${F.outletCode}-${Date.now().toString().slice(-6)}`})))}await h()}catch(A){console.error("Error loading outlet data:",A)}finally{l(!1)}},g=async()=>{try{l(!0);const C=await de.getOutlets({limit:1e3});if(C.success&&C.data.length>0){const A=C.data[0];a(A),u(P=>({...P,outletId:A._id||A.id,outletCode:A.outletCode,outletName:A.outletName,orderNumber:`SO-${A.outletCode}-${Date.now().toString().slice(-6)}`}))}await h()}catch(C){console.error("Error loading default outlet:",C)}finally{l(!1)}},h=async()=>{try{const C=(r==null?void 0:r.outletName)||c.outletName;let A;C?A=await de.getOutletFinishedGoods(C,{limit:1e3}):A=await de.getOutletFinishedGoods("Kuwait City",{limit:1e3}),A.success?i(A.data):(console.log("API failed, loading sample products"),y())}catch(C){console.error("Error loading products:",C),y()}},y=()=>{i([{_id:"fg-001",id:"fg-001",productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages",unitPrice:4.5,description:"Fresh green smoothie with spinach, banana, and apple"},{_id:"fg-002",id:"fg-002",productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals",unitPrice:8.75,description:"High protein meal bowl with quinoa and vegetables"},{_id:"fg-003",id:"fg-003",productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages",unitPrice:5.25,description:"Fresh detox juice blend with celery and cucumber"},{_id:"fg-004",id:"fg-004",productCode:"FG-004",productName:"Quinoa Salad",category:"Meals",unitPrice:7.5,description:"Healthy quinoa salad with mixed vegetables"},{_id:"fg-005",id:"fg-005",productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks",unitPrice:3.25,description:"High protein energy bar for quick nutrition"},{_id:"fg-006",id:"fg-006",productCode:"FG-006",productName:"Fresh Fruit Bowl",category:"Meals",unitPrice:6,description:"Mixed fresh fruit bowl with seasonal fruits"},{_id:"fg-007",id:"fg-007",productCode:"FG-007",productName:"Acai Bowl",category:"Meals",unitPrice:9.5,description:"Nutritious acai bowl with granola and berries"},{_id:"fg-008",id:"fg-008",productCode:"FG-008",productName:"Cold Brew Coffee",category:"Beverages",unitPrice:3.75,description:"Smooth cold brew coffee with natural sweetness"}])},w=["Dine-in","Takeaway","Delivery","Drive-thru"],S=["Cash","Card","Digital Wallet","Credit","Mixed"],v=["Pending","Paid","Partially Paid","Refunded"],x=["Pending","Confirmed","Preparing","Ready","Served","Completed","Cancelled"],b=()=>{const C={};return c.orderNumber.trim()||(C.orderNumber="Order number is required"),c.customerInfo.customerName.trim()||(C.customerName="Customer name is required"),c.customerInfo.orderType||(C.orderType="Order type is required"),c.orderItems.length===0&&(C.orderItems="At least one item is required"),f(C),Object.keys(C).length===0},N=async C=>{if(C.preventDefault(),!!b())try{const A=c.orderItems.reduce((H,V)=>H+V.totalPrice,0),P=A*.15,I=A+P-c.orderSummary.discountAmount,F={orderNumber:c.orderNumber,outletId:c.outletId,outletCode:c.outletCode,outletName:c.outletName,customerInfo:c.customerInfo,orderItems:c.orderItems,orderSummary:{...c.orderSummary,subtotal:A,taxAmount:P,totalAmount:I},orderStatus:c.orderStatus,orderTiming:c.orderTiming,notes:c.notes};console.log("Creating Sales Order:",F);const q=await de.createSalesOrder(F);if(q.success){alert("Sales Order created successfully!");const H=new URLSearchParams(t.search).get("outlet");if(H)if(H==="Central Kitchen")e("/central-kitchen");else{const V=H.toLowerCase().replace(/\s+/g,"-");e(`/${V}/sales-orders`)}else e("/sales-orders")}else alert("Failed to create Sales Order: "+q.message)}catch(A){console.error("Error creating Sales Order:",A),alert("Error creating Sales Order: "+(A instanceof Error?A.message:"Unknown error"))}},j=(C,A)=>{if(C.includes(".")){const[P,I]=C.split(".");u(F=>({...F,[P]:{...F[P]||{},[I]:A}}))}else u(P=>({...P,[C]:A}));d[C]&&f(P=>({...P,[C]:""}))},O=()=>{const C={productId:"",productCode:"",productName:"",category:"",quantity:1,unitPrice:0,totalPrice:0,specialInstructions:""};u(A=>({...A,orderItems:[...A.orderItems,C]}))},_=(C,A,P)=>{const I=[...c.orderItems];if(I[C]={...I[C],[A]:P},A==="quantity"||A==="unitPrice"){const F=A==="quantity"?Number(P):I[C].quantity,q=A==="unitPrice"?Number(P):I[C].unitPrice;I[C].totalPrice=F*q}if(A==="productId"&&typeof P=="string"){const F=s.find(q=>q._id===P||q.id===P);F&&(I[C].productCode=F.productCode,I[C].productName=F.productName,I[C].category=F.category,I[C].unitPrice=F.unitPrice,I[C].totalPrice=I[C].quantity*F.unitPrice)}u(F=>({...F,orderItems:I}))},E=C=>{const A=c.orderItems.filter((P,I)=>I!==C);u(P=>({...P,orderItems:A}))},k=s.filter(C=>C.productName.toLowerCase().includes(m.toLowerCase())||C.productCode.toLowerCase().includes(m.toLowerCase())||C.category.toLowerCase().includes(m.toLowerCase()));return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading sales order form..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Sales Order"}),n.jsx("p",{className:"text-gray-600",children:r?`${r.outletName} (${r.outletCode})`:"Select an outlet"})]}),n.jsxs("button",{onClick:()=>e("/sales-orders"),className:"btn-secondary flex items-center",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Back to Sales Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:N,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(rt,{className:"h-5 w-5 mr-2"}),"Order Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${d.orderNumber?"border-red-500":""}`,value:c.orderNumber,onChange:C=>j("orderNumber",C.target.value),placeholder:"Enter order number"}),d.orderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${d.orderDate?"border-red-500":""}`,value:c.orderTiming.orderDate,onChange:C=>j("orderTiming.orderDate",C.target.value)}),d.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Fi,{className:"h-5 w-5 mr-2"}),"Customer Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${d.customerName?"border-red-500":""}`,value:c.customerInfo.customerName,onChange:C=>j("customerInfo.customerName",C.target.value),placeholder:"Enter customer name"}),d.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type *"}),n.jsx("select",{className:`input-field ${d.orderType?"border-red-500":""}`,value:c.customerInfo.orderType,onChange:C=>j("customerInfo.orderType",C.target.value),children:w.map(C=>n.jsx("option",{value:C,children:C},C))}),d.orderType&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderType})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(jE,{className:"h-4 w-4 inline mr-1"}),"Phone Number"]}),n.jsx("input",{type:"tel",className:"input-field",value:c.customerInfo.customerPhone,onChange:C=>j("customerInfo.customerPhone",C.target.value),placeholder:"Enter phone number"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(NE,{className:"h-4 w-4 inline mr-1"}),"Email Address"]}),n.jsx("input",{type:"email",className:"input-field",value:c.customerInfo.customerEmail,onChange:C=>j("customerInfo.customerEmail",C.target.value),placeholder:"Enter email address"})]}),c.customerInfo.orderType==="Dine-in"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Od,{className:"h-4 w-4 inline mr-1"}),"Table Number"]}),n.jsx("input",{type:"text",className:"input-field",value:c.customerInfo.tableNumber,onChange:C=>j("customerInfo.tableNumber",C.target.value),placeholder:"Enter table number"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[n.jsx(Fr,{className:"h-5 w-5 mr-2"}),"Order Items"]}),n.jsxs("button",{type:"button",onClick:O,className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),c.orderItems.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Fr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:'No items added yet. Click "Add Item" to start building the order.'})]}):n.jsx("div",{className:"space-y-4",children:c.orderItems.map((C,A)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h4",{className:"font-medium text-gray-900",children:["Item ",A+1]}),n.jsx("button",{type:"button",onClick:()=>E(A),className:"text-red-600 hover:text-red-800",children:n.jsx(Dt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),n.jsxs("select",{className:"input-field",value:C.productId,onChange:P=>_(A,"productId",P.target.value),children:[n.jsx("option",{value:"",children:"Select Product"}),k.map(P=>n.jsxs("option",{value:P._id||P.id,children:[P.productName," - ",P.unitPrice.toFixed(2)," KWD"]},P._id||P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),n.jsx("input",{type:"number",min:"1",className:"input-field",value:C.quantity,onChange:P=>_(A,"quantity",parseInt(P.target.value)||1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:C.unitPrice,onChange:P=>_(A,"unitPrice",parseFloat(P.target.value)||0)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:C.totalPrice.toFixed(2),readOnly:!0})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:2,value:C.specialInstructions,onChange:P=>_(A,"specialInstructions",P.target.value),placeholder:"Any special instructions for this item..."})]})]},A))}),d.orderItems&&n.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.orderItems})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtotal (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:c.orderItems.reduce((C,A)=>C+A.totalPrice,0).toFixed(2),readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:c.orderSummary.discountAmount,onChange:C=>j("orderSummary.discountAmount",(parseFloat(C.target.value)||0).toString())})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:(c.orderItems.reduce((C,A)=>C+A.totalPrice,0)*.15).toFixed(2),readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-blue-50 font-semibold",value:(c.orderItems.reduce((C,A)=>C+A.totalPrice,0)+c.orderItems.reduce((C,A)=>C+A.totalPrice,0)*.15-c.orderSummary.discountAmount).toFixed(2),readOnly:!0})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),n.jsx("select",{className:"input-field",value:c.orderSummary.paymentMethod,onChange:C=>j("orderSummary.paymentMethod",C.target.value),children:S.map(C=>n.jsx("option",{value:C,children:C},C))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),n.jsx("select",{className:"input-field",value:c.orderSummary.paymentStatus,onChange:C=>j("orderSummary.paymentStatus",C.target.value),children:v.map(C=>n.jsx("option",{value:C,children:C},C))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),n.jsx("select",{className:"input-field",value:c.orderStatus,onChange:C=>j("orderStatus",C.target.value),children:x.map(C=>n.jsx("option",{value:C,children:C},C))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(yx,{className:"h-4 w-4 inline mr-1"}),"Estimated Prep Time (minutes)"]}),n.jsx("input",{type:"number",min:"1",className:"input-field",value:c.orderTiming.estimatedPrepTime,onChange:C=>j("orderTiming.estimatedPrepTime",(parseInt(C.target.value)||15).toString())})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:c.notes,onChange:C=>j("notes",C.target.value),placeholder:"Any additional notes for this order..."})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/sales-orders"),className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Sales Order"]})]})]})})]})};function Gbe(e){return{"kuwait-city":"Kuwait City","360-mall":"360 Mall","marina-walk-cafe":"360 Mall","vibes-complex":"Vibes Complex","mall-food-court":"Vibes Complex","taiba-hospital":"Taiba Hospital","drive-thru-express":"Taiba Hospital"}[e.toLowerCase()]||"Kuwait City"}const co=()=>{const e=ct(),t=Ta(),r=t.pathname.split("/")[1],a=Gbe(r);console.log("POSCreateOrder - URL Path:",t.pathname),console.log("POSCreateOrder - Outlet Slug:",r),console.log("POSCreateOrder - Outlet Name:",a);const[s,i]=T.useState([]),[o,l]=T.useState([]),[c,u]=T.useState("finished"),[d,f]=T.useState([]),[m,p]=T.useState(""),[g,h]=T.useState(""),[y,w]=T.useState({name:"",phone:"",email:""}),[S,v]=T.useState("Dine-in"),[x,b]=T.useState("Cash"),[N,j]=T.useState(0),[O]=T.useState(15),[_,E]=T.useState(!1),[k,C]=T.useState(null),[A,P]=T.useState([]),I=[{value:"Dine-in",label:"Dine-in",icon:""},{value:"Takeaway",label:"Takeaway",icon:""},{value:"Delivery",label:"Delivery",icon:""},{value:"Drive-thru",label:"Drive-thru",icon:""}];T.useEffect(()=>{console.log("useEffect triggered - outletName changed to:",a),console.log("useEffect - location.pathname:",t.pathname),console.log("useEffect - outletSlug:",r),P([]),i([]),C(null),F(),q(),H(),V()},[a,t.pathname]);const F=async()=>{try{console.log("loadOutletData - Looking for outlet:",a);const B=await de.getOutlets();if(B.success&&Array.isArray(B.data)){console.log("loadOutletData - Available outlets:",B.data.map(ye=>ye.outletName));const ve=B.data.find(ye=>ye.outletName===a);ve?(console.log("loadOutletData - Found outlet match:",ve),C(ve)):console.log("loadOutletData - No outlet match found for:",a)}}catch(B){console.error("Error loading outlet data:",B)}},q=async()=>{try{E(!0);let B;if(console.log("loadProducts - Loading products for outlet:",a),a==="Kuwait City"?(console.log("loadProducts - Calling getKuwaitCityFinishedProducts"),B=await de.getKuwaitCityFinishedProducts({limit:1e3})):a==="360 Mall"?(console.log("loadProducts - Calling get360MallFinishedProducts"),B=await de.get360MallFinishedProducts({limit:1e3})):a==="Vibes Complex"?(console.log("loadProducts - Calling getVibeComplexFinishedProducts"),B=await de.getVibeComplexFinishedProducts({limit:1e3})):a==="Taiba Hospital"?(console.log("loadProducts - Calling getTaibaKitchenFinishedProducts"),B=await de.getTaibaKitchenFinishedProducts({limit:1e3})):(console.log("loadProducts - Fallback to getFinishedGoods"),B=await de.getFinishedGoods({limit:1e3})),B.success&&Array.isArray(B.data)){console.log("loadProducts - Raw response data:",B.data.length,"products");const ve=B.data.filter(ye=>ye.isActive&&ye.currentStock>0&&ye.status!=="Out of Stock");console.log("loadProducts - Filtered available products:",ve.length,"products"),console.log("loadProducts - First few products:",ve.slice(0,3).map(ye=>({name:ye.productName,stock:ye.currentStock}))),i(ve)}}catch(B){console.error("Error loading products:",B),i([])}finally{E(!1)}},H=async()=>{try{const B=await de.getBillOfMaterials({limit:1e3,sortBy:"productName",sortOrder:"asc"});if(B.success&&Array.isArray(B.data)){const ve=B.data.map(ye=>({id:ye.id||ye._id,bomCode:ye.bomCode,productName:ye.productName,productDescription:ye.productDescription,totalCost:ye.totalCost}));l(ve)}else l([])}catch(B){console.error("Error loading recipes:",B),l([])}},V=async()=>{try{console.log("loadExistingOrders - Loading orders for outlet:",a);const B=await de.getSalesOrders({outletName:a,limit:10,sortBy:"orderTiming.orderDate",sortOrder:"desc"});B.success&&Array.isArray(B.data)&&(console.log("loadExistingOrders - Found orders:",B.data.length),P(B.data))}catch(B){console.error("Error loading existing orders:",B),P([])}},re=["All",...Array.from(new Set(s.map(B=>B.category)))],oe=s.filter(B=>{const ve=B.productName.toLowerCase().includes(m.toLowerCase())||B.productCode.toLowerCase().includes(m.toLowerCase()),ye=g===""||g==="All"||B.category===g;return ve&&ye&&B.isActive&&B.currentStock>0}),U=B=>{const ve=d.find(fe=>fe.kind==="finished"&&fe.product&&fe.product._id===B._id);if((ve?ve.quantity:0)>=B.currentStock){alert(`Only ${B.currentStock} ${B.unitOfMeasure} available in stock`);return}f(ve?d.map(fe=>fe.kind==="finished"&&fe.product&&fe.product._id===B._id?{...fe,quantity:fe.quantity+1,subtotal:(fe.quantity+1)*B.unitPrice}:fe):[...d,{kind:"finished",product:B,quantity:1,subtotal:B.unitPrice}])},J=B=>{const ve=d.find(ye=>ye.kind==="recipe"&&ye.recipe&&ye.recipe.bomCode===B.bomCode);f(ve?ye=>ye.map(fe=>fe.kind==="recipe"&&fe.recipe&&fe.recipe.bomCode===B.bomCode?{...fe,quantity:fe.quantity+1,subtotal:(fe.quantity+1)*(fe.recipe.totalCost||0)}:fe):ye=>[...ye,{kind:"recipe",recipe:B,quantity:1,subtotal:B.totalCost||0}])},Q=(B,ve)=>{ve<0||f(d.map(ye=>ye.kind==="finished"&&ye.product&&ye.product._id===B?{...ye,quantity:ve,subtotal:ve*ye.product.unitPrice}:ye))},X=(B,ve)=>{ve<0||f(ye=>ye.map(fe=>fe.kind==="recipe"&&fe.recipe&&fe.recipe.bomCode===B.replace("recipe-","")?{...fe,quantity:ve,subtotal:ve*(fe.recipe.totalCost||0)}:fe))},ee=B=>{f(ve=>ve.filter(ye=>!(ye.kind==="recipe"&&ye.recipe&&ye.recipe.bomCode===B)))},ue=B=>{f(d.filter(ve=>!(ve.kind==="finished"&&ve.product&&ve.product._id===B)))},we=()=>d.reduce((B,ve)=>B+ve.subtotal,0),ne=()=>we()*O/100,ie=()=>we()*N/100,Ne=()=>we()+ne()-ie(),W=async()=>{var ye;if(d.length===0){alert("Please add items to cart before checkout");return}if(!y.name.trim()){alert("Please enter customer name");return}const B=[],ve=d.filter(fe=>fe.kind==="finished"&&fe.product);for(const fe of ve)fe.quantity>fe.product.currentStock&&B.push(`${fe.product.productName}: Requested ${fe.quantity}, Available ${fe.product.currentStock} ${fe.product.unitOfMeasure}`);if(B.length>0){const fe=`Insufficient stock for the following items:

${B.join(`
`)}

Please adjust quantities and try again.`;alert(fe);return}if(k||await F(),!k){alert("Unable to resolve outlet for this order. Please reload the page and try again.");return}E(!0);try{const et=d.filter(He=>He.kind==="finished"&&He.product).map(He=>({productId:He.product._id,productCode:He.product.productCode,productName:He.product.productName,category:He.product.category,quantity:He.quantity,unitPrice:He.product.unitPrice,totalPrice:He.subtotal})),gt=d.filter(He=>He.kind==="recipe"&&He.recipe).map(He=>({bomCode:He.recipe.bomCode,productName:He.recipe.productName,quantity:He.quantity,unitPrice:He.recipe.totalCost||0})),Xe={outletId:(k==null?void 0:k._id)||(k==null?void 0:k.id),outletCode:k==null?void 0:k.outletCode,outletName:a,outletSlug:r,customerInfo:{customerName:y.name,customerPhone:y.phone,customerEmail:y.email,orderType:S},orderItems:et,recipeItems:gt,orderSummary:{subtotal:we(),taxAmount:ne(),discountAmount:ie(),totalAmount:Ne(),paymentMethod:x,paymentStatus:"Paid"},orderStatus:"Completed",orderTiming:{orderDate:new Date().toISOString(),estimatedPrepTime:15},notes:`POS Order - ${S}`,createdBy:"pos-user",updatedBy:"pos-user"};console.log("Creating Sales Order:",Xe),console.log("Outlet object:",k),console.log("Outlet slug:",r);const dt=await de.createSalesOrder(Xe);if(dt.success){const He=((ye=dt.data)==null?void 0:ye.orderNumber)||"N/A";alert(`Order ${He} created successfully!
Total: KWD ${Ne().toFixed(2)}

Please refresh the sales orders page to see the new order.`),f([]),w({name:"",phone:"",email:""}),j(0),await q(),await V(),setTimeout(()=>{const vt={"Kuwait City":"kuwait-city","360 Mall":"360-mall","Vibes Complex":"vibes-complex","Taiba Hospital":"taiba-hospital"}[a]||r;e(`/${vt}/sales-orders`)},1e3)}else alert("Failed to create order: "+dt.message)}catch(fe){console.error("Error creating order:",fe),alert("Error creating order: "+(fe instanceof Error?fe.message:"Unknown error"))}finally{E(!1)}},Ee=()=>{d.length>0&&window.confirm("Are you sure you want to clear the cart?")&&f([])};return n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:n.jsx(Jt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"POS - Create Order"}),n.jsx("p",{className:"text-gray-600",children:a})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(yx,{className:"h-4 w-4"}),n.jsx("span",{children:new Date().toLocaleString()})]})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"inline-flex rounded-md shadow-sm overflow-hidden",role:"group",children:[n.jsx("button",{onClick:()=>u("finished"),className:`px-4 py-2 text-sm font-medium border ${c==="finished"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>u("recipe"),className:`px-4 py-2 text-sm font-medium border -ml-px ${c==="recipe"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipes"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx("div",{className:"card p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:m,onChange:B=>p(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),c==="finished"&&n.jsx("select",{value:g,onChange:B=>h(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:re.map(B=>n.jsx("option",{value:B,children:B},B))})]})}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:c==="finished"?"Available Products":"Available Recipes"}),_?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Loading products..."})]}):c==="finished"?oe.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No products available"}),n.jsx("p",{className:"text-sm",children:"Check back later or contact admin"})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:oe.map(B=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>U(B),onKeyDown:ve=>ve.key==="Enter"&&U(B),role:"button",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:B.productName}),n.jsxs("span",{className:"text-green-600 font-semibold",children:["KWD ",B.unitPrice.toFixed(2)]})]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Code: ",B.productCode]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:B.category}),n.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:["Stock: ",B.currentStock," ",B.unitOfMeasure]})]}),n.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Add to Cart"})]},B._id))}):o.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No recipes available"}),n.jsx("p",{className:"text-sm",children:"Add recipes in Recipe Master (BOM)"})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:o.filter(B=>B.productName.toLowerCase().includes(m.toLowerCase())||B.bomCode.toLowerCase().includes(m.toLowerCase())).map(B=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>J(B),onKeyDown:ve=>ve.key==="Enter"&&J(B),role:"button",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:B.productName}),n.jsx("span",{className:"text-green-600 font-semibold",children:B.totalCost?`KWD ${B.totalCost.toFixed(2)}`:"Recipe"})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",B.bomCode]}),B.productDescription&&n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:B.productDescription}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"text-indigo-600 text-sm font-medium",children:"Add to Cart"})})]},B.bomCode))})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Fr,{className:"h-5 w-5 mr-2"}),"Cart (",d.length,")"]}),d.length>0&&n.jsx("button",{onClick:Ee,className:"text-red-600 hover:text-red-800 text-sm",children:"Clear Cart"})]}),d.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Cart is empty"}),n.jsx("p",{className:"text-sm",children:"Add products to get started"})]}):n.jsx("div",{className:"space-y-3",children:d.map(B=>B.kind==="finished"&&B.product?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:B.product.productName}),n.jsxs("p",{className:"text-xs text-gray-600",children:["KWD ",B.product.unitPrice.toFixed(2)," each"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",B.product.currentStock," ",B.product.unitOfMeasure]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",value:B.quantity.toString(),onChange:ve=>{const ye=parseInt(ve.target.value)||0;ye>=0&&Q(B.product._id,ye)},className:"w-16 text-center text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"}),n.jsx("button",{onClick:()=>ue(B.product._id),className:"p-1 text-red-600 hover:bg-red-50 rounded ml-2",children:n.jsx(Dt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"text-right ml-4",children:n.jsxs("p",{className:"font-medium text-sm",children:["KWD ",B.subtotal.toFixed(2)]})})]},B.product._id):B.kind==="recipe"&&B.recipe?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"font-medium text-sm",children:[B.recipe.productName," ",n.jsx("span",{className:"text-xs text-gray-500",children:"(Recipe)"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:B.recipe.totalCost?`KWD ${B.recipe.totalCost.toFixed(2)} each`:"Cost not set"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",value:B.quantity.toString(),onChange:ve=>{const ye=parseInt(ve.target.value)||0;ye>=0&&X(`recipe-${B.recipe.bomCode}`,ye)},className:"w-16 text-center text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"}),n.jsx("button",{onClick:()=>ee(B.recipe.bomCode),className:"p-1 text-red-600 hover:bg-red-50 rounded ml-2",children:n.jsx(Dt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"text-right ml-4",children:n.jsxs("p",{className:"font-medium text-sm",children:["KWD ",B.subtotal.toFixed(2)]})})]},`recipe-${B.recipe.bomCode}`):null)})]}),d.length>0&&n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["KWD ",we().toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",O,"%):"]}),n.jsxs("span",{children:["KWD ",ne().toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Discount (",N,"%):"]}),n.jsxs("span",{className:"text-red-600",children:["-KWD ",ie().toFixed(2)]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["KWD ",Ne().toFixed(2)]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Type"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:I.map(B=>n.jsxs("button",{onClick:()=>v(B.value),className:`p-2 text-sm rounded-lg border transition-colors ${S===B.value?"bg-blue-100 border-blue-500 text-blue-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("span",{className:"mr-1",children:B.icon}),B.label]},B.value))})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Customer Info"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Customer name *",value:y.name,onChange:B=>w({...y,name:B.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsx(jE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"tel",placeholder:"Phone number",value:y.phone,onChange:B=>w({...y,phone:B.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(NE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"email",placeholder:"Email (optional)",value:y.email||"",onChange:B=>w({...y,email:B.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Method"}),n.jsxs("select",{value:x,onChange:B=>b(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"Cash",children:"Cash"}),n.jsx("option",{value:"Card",children:"Credit/Debit Card"}),n.jsx("option",{value:"Digital Wallet",children:"Digital Wallet"}),n.jsx("option",{value:"Credit",children:"Credit"}),n.jsx("option",{value:"Mixed",children:"Mixed"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:N,onChange:B=>j(Number(B.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsx("button",{onClick:W,disabled:_||d.length===0,className:"w-full mt-6 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:_?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(F1,{className:"h-4 w-4 mr-2"}),"Complete Order - $",Ne().toFixed(2)]})})]})]})]})]})})},Xbe=({user:e,permissions:t,onClose:r,onSave:a})=>{const[s,i]=T.useState((e==null?void 0:e.permissions)||[]),o=t.reduce((d,f)=>(d[f.module]||(d[f.module]=[]),d[f.module].push(f),d),{}),l=(d,f)=>{i(f?m=>[...m,d]:m=>m.filter(p=>p!==d))},c=(d,f)=>{const m=o[d].map(p=>p.id);i(f?p=>[...new Set([...p,...m])]:p=>p.filter(g=>!m.includes(g)))},u=()=>{e&&(a(e.id,s),r())};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Fi,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Permissions"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," (",e.email,")"]})]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.role})]})]})}),Object.entries(o).map(([d,f])=>{const m=f.every(g=>s.includes(g.id)),p=f.some(g=>s.includes(g.id));return n.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:m,ref:g=>{g&&(g.indeterminate=p&&!m)},onChange:g=>c(d,g.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(R1,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:d}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",f.filter(g=>s.includes(g.id)).length,"/",f.length,")"]})]})]})}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(g=>n.jsxs("label",{className:"flex items-start space-x-3",children:[n.jsx("input",{type:"checkbox",checked:s.includes(g.id),onChange:h=>l(g.id,h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:g.category})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:g.description})]})]},g.id))})})]},d)})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx(wE,{className:"h-4 w-4 inline mr-1"}),s.length," permissions selected"]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{onClick:u,className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}):null},Ybe=({role:e,permissions:t,onClose:r,onSave:a,onDelete:s})=>{const[i,o]=T.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",permissions:(e==null?void 0:e.permissions)||[]}),l=t.reduce((m,p)=>(m[p.module]||(m[p.module]=[]),m[p.module].push(p),m),{}),c=(m,p)=>{o(p?g=>({...g,permissions:[...g.permissions,m]}):g=>({...g,permissions:g.permissions.filter(h=>h!==m)}))},u=(m,p)=>{const g=l[m].map(h=>h.id);o(p?h=>({...h,permissions:[...new Set([...h.permissions,...g])]}):h=>({...h,permissions:h.permissions.filter(y=>!g.includes(y))}))},d=()=>{i.name.trim()&&i.description.trim()&&(a(i),r())},f=()=>{e&&s&&(s(e.id),r())};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(R1,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Edit Role":"Create New Role"}),n.jsx("p",{className:"text-sm text-gray-600",children:e?"Modify role permissions and settings":"Define a new role with specific permissions"})]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),n.jsx("input",{type:"text",value:i.name,onChange:m=>o(p=>({...p,name:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter role name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Count"}),n.jsx("input",{type:"text",value:(e==null?void 0:e.userCount)||0,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),n.jsx("textarea",{value:i.description,onChange:m=>o(p=>({...p,description:m.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter role description"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Permissions"}),n.jsx("div",{className:"space-y-4",children:Object.entries(l).map(([m,p])=>{const g=p.every(y=>i.permissions.includes(y.id)),h=p.some(y=>i.permissions.includes(y.id));return n.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:g,ref:y=>{y&&(y.indeterminate=h&&!g)},onChange:y=>u(m,y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("span",{className:"font-medium text-gray-900",children:m}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",p.filter(y=>i.permissions.includes(y.id)).length,"/",p.length,")"]})]})}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(y=>n.jsxs("label",{className:"flex items-start space-x-3",children:[n.jsx("input",{type:"checkbox",checked:i.permissions.includes(y.id),onChange:w=>c(y.id,w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:y.category})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:y.description})]})]},y.id))})})]},m)})})]})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[i.permissions.length," permissions selected"]}),e&&s&&n.jsxs("button",{onClick:f,className:"text-red-600 hover:text-red-800 flex items-center space-x-1",children:[n.jsx(Dt,{className:"h-4 w-4"}),n.jsx("span",{children:"Delete Role"})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{onClick:d,className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),e?"Update Role":"Create Role"]})]})]})]})})},Qbe=()=>{const[e,t]=T.useState("users"),[r,a]=T.useState([]),[s,i]=T.useState(!1),[o,l]=T.useState({name:"",email:"",password:"",role:"Staff",status:"Active"}),[c,u]=T.useState([{id:"1",name:"Admin",description:"Full system access",permissions:["all"],userCount:1},{id:"2",name:"Manager",description:"Management level access",permissions:["inventory.view","inventory.edit","reports.view","users.view"],userCount:1},{id:"3",name:"Staff",description:"Basic operational access",permissions:["inventory.view","sales.view"],userCount:1}]),[d]=T.useState([{id:"dashboard.view",name:"View Dashboard",description:"Access to main dashboard",category:"Dashboard",module:"Dashboard"},{id:"inventory.view",name:"View Inventory",description:"View inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.edit",name:"Edit Inventory",description:"Modify inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.add",name:"Add Inventory",description:"Add new inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.delete",name:"Delete Inventory",description:"Delete inventory items",category:"Inventory",module:"Inventory Management"},{id:"rawmaterials.view",name:"View Raw Materials",description:"View raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"rawmaterials.edit",name:"Edit Raw Materials",description:"Edit raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"rawmaterials.add",name:"Add Raw Materials",description:"Add new raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"centralkitchen.view",name:"View Central Kitchen",description:"Access central kitchen",category:"Central Kitchen",module:"Central Kitchen"},{id:"centralkitchen.edit",name:"Edit Central Kitchen",description:"Modify central kitchen data",category:"Central Kitchen",module:"Central Kitchen"},{id:"centralkitchen.transfer",name:"Create Transfers",description:"Create transfer orders",category:"Central Kitchen",module:"Central Kitchen"},{id:"outlets.view",name:"View Outlets",description:"View outlet information",category:"Outlets",module:"Outlet Management"},{id:"outlets.edit",name:"Edit Outlets",description:"Modify outlet data",category:"Outlets",module:"Outlet Management"},{id:"outlets.kuwait",name:"Kuwait City Access",description:"Access Kuwait City outlet",category:"Outlets",module:"Outlet Management"},{id:"outlets.mall360",name:"360 Mall Access",description:"Access 360 Mall outlets",category:"Outlets",module:"Outlet Management"},{id:"outlets.taiba",name:"Taiba Hospital Access",description:"Access Taiba Hospital outlet",category:"Outlets",module:"Outlet Management"},{id:"sales.view",name:"View Sales",description:"View sales data",category:"Sales",module:"Sales Management"},{id:"sales.edit",name:"Edit Sales",description:"Modify sales data",category:"Sales",module:"Sales Management"},{id:"sales.create",name:"Create Sales",description:"Create new sales orders",category:"Sales",module:"Sales Management"},{id:"reports.view",name:"View Reports",description:"Access reports",category:"Reports",module:"Reporting"},{id:"reports.export",name:"Export Reports",description:"Export report data",category:"Reports",module:"Reporting"},{id:"users.view",name:"View Users",description:"View user information",category:"Users",module:"User Management"},{id:"users.edit",name:"Edit Users",description:"Modify user data",category:"Users",module:"User Management"},{id:"users.add",name:"Add Users",description:"Add new users",category:"Users",module:"User Management"},{id:"users.delete",name:"Delete Users",description:"Delete users",category:"Users",module:"User Management"},{id:"settings.view",name:"View Settings",description:"Access system settings",category:"Settings",module:"System Settings"},{id:"settings.edit",name:"Edit Settings",description:"Modify system settings",category:"Settings",module:"System Settings"}]),[f,m]=T.useState(null),[p,g]=T.useState(null),[h,y]=T.useState(!1),[w,S]=T.useState(!1),v=d.reduce((C,A)=>(C[A.module]||(C[A.module]=[]),C[A.module].push(A),C),{}),x=(C,A,P)=>{a(I=>I.map(F=>F.id===C?P?{...F,permissions:[...F.permissions,A]}:{...F,permissions:F.permissions.filter(q=>q!==A)}:F))},b=(C,A)=>{a(P=>P.map(I=>I.id===C?{...I,permissions:A}:I))},N=C=>{if(p)u(A=>A.map(P=>P.id===p.id?{...P,...C}:P));else{const A={id:Date.now().toString(),...C,userCount:0};u(P=>[...P,A])}},j=C=>{u(A=>A.filter(P=>P.id!==C))},O=C=>{m(C),y(!0)},_=C=>{g(C),S(!0)},E=()=>{g(null),S(!0)},k=[{id:"users",name:"Users",icon:L1},{id:"roles",name:"Roles",icon:R1},{id:"permissions",name:"Permissions",icon:wE}];return le.useEffect(()=>{(async()=>{try{const C=await de.getUsers();C!=null&&C.success&&a(C.data.map(A=>({id:A._id,name:A.name,email:A.email,role:A.role,status:(A.status||"Active").toLowerCase(),lastLogin:A.updatedAt?new Date(A.updatedAt).toLocaleString():"-",permissions:[]})))}catch{}})()},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(kE,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings & Permissions"}),n.jsx("p",{className:"text-gray-600",children:"Manage user access and system permissions"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-2",children:k.map(C=>n.jsxs("button",{onClick:()=>t(C.id),className:`flex items-center space-x-2 py-2 px-3 font-medium text-sm rounded-md transition-colors ${e===C.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-800 hover:bg-gray-50 border border-transparent"}`,children:[n.jsx(C.icon,{className:"h-4 w-4"}),n.jsx("span",{children:C.name})]},C.id))})}),e==="users"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),n.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),n.jsx("div",{className:"text-sm text-gray-500",children:C.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:C.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.lastLogin}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>O(C),className:"text-blue-600 hover:text-blue-900",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Dt,{className:"h-4 w-4"})})]})})]},C.id))})]})})})]}),e==="roles"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Role Management"}),n.jsxs("button",{onClick:E,className:"btn-primary flex items-center",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Role"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(C=>n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.name}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>_(C),className:"text-blue-600 hover:text-blue-900",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Dt,{className:"h-4 w-4"})})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:C.description}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("span",{children:[C.permissions.length," permissions"]}),n.jsxs("span",{children:[C.userCount," users"]})]})]},C.id))})]}),e==="permissions"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Permission Management"}),Object.entries(v).map(([C,A])=>n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:C}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(P=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:P.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:P.category})]}),n.jsx("p",{className:"text-xs text-gray-600",children:P.description})]},P.id))})]},C))]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add User"}),n.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),n.jsx("input",{className:"input-field",placeholder:"Full name",value:o.name,onChange:C=>l({...o,name:C.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",className:"input-field",placeholder:"you@company.com",value:o.email,onChange:C=>l({...o,email:C.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsx("input",{type:"password",className:"input-field",placeholder:"",value:o.password,onChange:C=>l({...o,password:C.target.value})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>i(!1),className:"btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:async()=>{const C=await de.createUser({name:o.name,email:o.email,password:o.password,role:"Staff",status:"Active"});if(C!=null&&C.success){i(!1),l({name:"",email:"",password:"",role:"Staff",status:"Active"});const A=await de.getUsers();A!=null&&A.success&&a(A.data.map(P=>({id:P._id,name:P.name,email:P.email,role:P.role,status:(P.status||"Active").toLowerCase(),lastLogin:P.updatedAt?new Date(P.updatedAt).toLocaleString():"-",permissions:[]})))}},className:"btn-primary",children:"Save"})]})]})}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Permissions - ",f.name]}),n.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"space-y-6",children:Object.entries(v).map(([C,A])=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:C}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(P=>n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:f.permissions.includes(P.id),onChange:I=>x(f.id,P.id,I.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),n.jsx("div",{className:"text-xs text-gray-500",children:P.description})]})]},P.id))})]},C))}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>m(null),className:"btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:()=>m(null),className:"btn-primary",children:"Save Changes"})]})]})}),h&&f&&n.jsx(Xbe,{user:f,permissions:d,onClose:()=>{y(!1),m(null)},onSave:b}),w&&n.jsx(Ybe,{role:p,permissions:d,onClose:()=>{S(!1),g(null)},onSave:N,onDelete:j})]})},Jbe=()=>{const[e,t]=T.useState([]),[r,a]=T.useState(!1),[s,i]=T.useState(!1),[o,l]=T.useState(1),[c]=T.useState(20),[u,d]=T.useState(0),[f,m]=T.useState(""),p=async()=>{try{a(!0);const y=await de.getItemsList({page:o,limit:c,search:f});if(y.success){const w=y.data||{},S=w.data||[],v=w.pagination||{};t(S),d(Number(v.total||0))}}finally{a(!1)}};T.useEffect(()=>{p()},[o,c]);const g=async()=>{var y;try{i(!0);const w=await de.syncItemsListFromZoho();await p();const S=((y=w.data)==null?void 0:y.summary)||(w==null?void 0:w.summary)||{};alert(`Synced. Total: ${S.total??0}, Created: ${S.created??0}, Updated: ${S.updated??0}, Skipped: ${S.skipped??0}`)}catch(w){alert(`Sync failed: ${(w==null?void 0:w.message)||"Unknown error"}`)}finally{i(!1)}},h=Math.max(1,Math.ceil(u/c));return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Items List"}),n.jsxs("button",{onClick:g,disabled:s,className:`btn-primary flex items-center ${s?"opacity-60":""}`,children:[n.jsx(CE,{className:"h-4 w-4 mr-2"}),s?"Syncing":"Sync from Zoho"]})]}),n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("input",{value:f,onChange:y=>m(y.target.value),placeholder:"Search SKU or Name",className:"input-field"}),n.jsx("button",{onClick:()=>{l(1),p()},className:"btn-secondary",children:"Search"})]}),n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-gray-600",children:[n.jsx("th",{className:"px-3 py-2",children:"SKU"}),n.jsx("th",{className:"px-3 py-2",children:"Name"}),n.jsx("th",{className:"px-3 py-2",children:"Zoho Item ID"}),n.jsx("th",{className:"px-3 py-2",children:"Category"}),n.jsx("th",{className:"px-3 py-2",children:"Unit"}),n.jsx("th",{className:"px-3 py-2",children:"Rate"}),n.jsx("th",{className:"px-3 py-2",children:"Updated"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:6,children:"Loading..."})}):e.length?e.map(y=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-3 py-2 font-mono",children:y.sku}),n.jsx("td",{className:"px-3 py-2",children:y.name}),n.jsx("td",{className:"px-3 py-2 font-mono",children:y.zohoItemId||"-"}),n.jsx("td",{className:"px-3 py-2",children:y.category||"-"}),n.jsx("td",{className:"px-3 py-2",children:y.unit||"-"}),n.jsx("td",{className:"px-3 py-2",children:Number(y.rate||0).toFixed(3)}),n.jsx("td",{className:"px-3 py-2",children:y.updatedAt?new Date(y.updatedAt).toLocaleString():"-"})]},`${y.sku}`)):n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:6,children:"No items"})})})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",o," of ",h]}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{disabled:o<=1,onClick:()=>l(y=>Math.max(1,y-1)),className:"btn-secondary",children:"Prev"}),n.jsx("button",{disabled:o>=h,onClick:()=>l(y=>Math.min(h,y+1)),className:"btn-secondary",children:"Next"})]})]})]})]})},Zbe=()=>{const[e,t]=T.useState([]),[r,a]=T.useState(!1),[s,i]=T.useState(!1),o=async()=>{a(!0);try{const c=await de.getLocationsList({limit:200});if(c.success){const u=c.data||{};t(u.data||[])}}finally{a(!1)}};T.useEffect(()=>{o()},[]);const l=async()=>{i(!0);try{await de.syncLocationsFromZoho(),await o()}finally{i(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Locations"}),n.jsxs("button",{onClick:l,disabled:s,className:`btn-primary flex items-center ${s?"opacity-60":""}`,children:[n.jsx(CE,{className:"h-4 w-4 mr-2"}),s?"Syncing":"Sync from Zoho"]})]}),n.jsx("div",{className:"card p-4",children:n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-gray-600",children:[n.jsx("th",{className:"px-3 py-2",children:"Zoho Location ID"}),n.jsx("th",{className:"px-3 py-2",children:"Location Name"}),n.jsx("th",{className:"px-3 py-2",children:"Updated"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:3,children:"Loading..."})}):e.length?e.map(c=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-3 py-2 font-mono",children:c.zohoLocationId}),n.jsx("td",{className:"px-3 py-2",children:c.locationName}),n.jsx("td",{className:"px-3 py-2",children:c.updatedAt?new Date(c.updatedAt).toLocaleString():"-"})]},c.zohoLocationId)):n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:3,children:"No locations"})})})]})})})]})},e1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},t1e=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"Kuwait City",fromWarehouseName:"Kuwait City",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.getKuwaitCityRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{var b,N;if(x.preventDefault(),!!h())try{const j={fromOutlet:"Kuwait City",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(_=>({itemType:"Raw Material",itemCode:_.materialCode||"",itemName:_.materialName||"",category:"",subCategory:"",unitOfMeasure:_.unitOfMeasure,quantity:_.quantity,unitPrice:_.unitPrice,notes:_.remarks})),notes:a.notes,requestedBy:"Kuwait City Manager"},O=await de.createTransferOrder(j);if(console.log(" Kuwait City: Transfer order response:",O),console.log(" Kuwait City: response.data:",O.data),console.log(" Kuwait City: response.data._id:",(b=O.data)==null?void 0:b._id),console.log(" Kuwait City: response.data.id:",(N=O.data)==null?void 0:N.id),O.success){try{const _=a.items.map(()=>"Raw Material"),E=[...new Set(_)],k=E.length===1?E[0]:"Mixed",C=a.items.map(I=>`${I.materialName} (${I.quantity} ${I.unitOfMeasure})`).join(", "),A={title:`Transfer Request from Kuwait City - ${k}`,message:`Transfer order #${j.fromOutlet}-${Date.now()} from Kuwait City. Items: ${C}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Kuwait City",transferOrderId:O.data._id||O.data.id||O.data.transferId||null,itemType:k,priority:a.priority==="Urgent"?"high":"normal"};console.log(" Kuwait City: Creating notification with data:",A),console.log(" Kuwait City: transferOrderId being set to:",A.transferOrderId),console.log(" Kuwait City: response.data keys:",Object.keys(O.data)),console.log(" Kuwait City: response.data values:",O.data);const P=await de.createNotification(A);console.log("Notification sent to Central Kitchen:",P)}catch(_){console.error("Failed to send notification to Central Kitchen:",_)}alert("Transfer order created successfully!"),e("/kuwait-city/raw-materials")}else throw new Error(O.message||"Failed to create transfer order")}catch(j){console.error("Error creating transfer order:",j),alert("Error creating transfer order: "+(j instanceof Error?j.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/kuwait-city/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(e1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/kuwait-city/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},r1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},a1e=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"Kuwait City",fromWarehouseName:"Kuwait City",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.getKuwaitCityFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!h())try{const b={fromOutlet:"Kuwait City",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Kuwait City Manager"},N=await de.createTransferOrder(b);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),k={title:`Transfer Request from Kuwait City - ${_}`,message:`Transfer order #${b.fromOutlet}-${Date.now()} from Kuwait City. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Kuwait City",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},C=await de.createNotification(k);console.log("Notification sent to Central Kitchen:",C)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/kuwait-city/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(b){console.error("Error creating transfer order:",b),alert("Error creating transfer order: "+(b instanceof Error?b.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/kuwait-city/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(r1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/kuwait-city/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},n1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},s1e=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"360 Mall",fromWarehouseName:"360 Mall",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.get360MallRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!h())try{const b={fromOutlet:"360 Mall",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"360 Mall Manager"},N=await de.createTransferOrder(b);if(N.success){console.log(" 360 Mall: Transfer order created successfully:",N.data);try{const j=a.items.map(()=>"Raw Material"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),k={title:`Transfer Request from 360 Mall - ${_}`,message:`Transfer order #${b.fromOutlet}-${Date.now()} from 360 Mall. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"360 Mall",transferOrderId:N.data._id||N.data.id||N.data.transferId||null,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};console.log(" 360 Mall: Attempting to create notification:",k);const C=await de.createNotification(k);console.log(" 360 Mall: Notification response:",C),C.success?console.log(" 360 Mall: Notification sent to Central Kitchen successfully!"):console.error(" 360 Mall: Failed to send notification:",C)}catch(j){console.error(" 360 Mall: Error sending notification to Central Kitchen:",j),console.error(" 360 Mall: Notification error details:",j.message)}alert("Transfer order created successfully!"),e("/360-mall/raw-materials")}else throw new Error(N.message||"Failed to create transfer order")}catch(b){console.error("Error creating transfer order:",b),alert("Error creating transfer order: "+(b instanceof Error?b.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/360-mall/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(n1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/360-mall/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},i1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},o1e=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"360 Mall",fromWarehouseName:"360 Mall",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.get360MallFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!h())try{const b={fromOutlet:"360 Mall",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"360 Mall Manager"},N=await de.createTransferOrder(b);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),k={title:`Transfer Request from 360 Mall - ${_}`,message:`Transfer order #${b.fromOutlet}-${Date.now()} from 360 Mall. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"360 Mall",transferOrderId:N.data._id||N.data.id||N.data.transferId||null,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},C=await de.createNotification(k);console.log("Notification sent to Central Kitchen:",C)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/360-mall/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(b){console.error("Error creating transfer order:",b),alert("Error creating transfer order: "+(b instanceof Error?b.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/360-mall/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(i1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/360-mall/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},l1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},RT=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"Vibes Complex",fromWarehouseName:"Vibes Complex",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.getVibeComplexRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!h())try{const b={fromOutlet:"Vibes Complex",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Vibes Complex Manager"},N=await de.createTransferOrder(b);if(N.success){try{const j=a.items.map(()=>"Raw Material"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),k={title:`Transfer Request from Vibes Complex - ${_}`,message:`Transfer order #${b.fromOutlet}-${Date.now()} from Vibes Complex. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Vibes Complex",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},C=await de.createNotification(k);console.log("Notification sent to Central Kitchen:",C)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/marina-walk-cafe/raw-materials")}else throw new Error(N.message||"Failed to create transfer order")}catch(b){console.error("Error creating transfer order:",b),alert("Error creating transfer order: "+(b instanceof Error?b.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(l1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/marina-walk-cafe/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},c1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},LT=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"Vibes Complex",fromWarehouseName:"Vibes Complex",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.getVibeComplexFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!h())try{const b={fromOutlet:"Vibes Complex",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Vibes Complex Manager"},N=await de.createTransferOrder(b);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(C=>`${C.materialName} (${C.quantity} ${C.unitOfMeasure})`).join(", "),k={title:`Transfer Request from Vibes Complex - ${_}`,message:`Transfer order #${b.fromOutlet}-${Date.now()} from Vibes Complex. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Vibes Complex",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await de.createNotification(k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/marina-walk-cafe/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(b){console.error("Error creating transfer order:",b),alert("Error creating transfer order: "+(b instanceof Error?b.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(c1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/marina-walk-cafe/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},u1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},$T=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"Taiba Hospital",fromWarehouseName:"Taiba Hospital",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.getTaibaKitchenRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!h())try{const b={fromOutlet:"Taiba Hospital",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Taiba Hospital Manager"},N=await de.createTransferOrder(b);if(N.success){try{const j=a.items.map(()=>"Raw Material"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(C=>`${C.materialName} (${C.quantity} ${C.unitOfMeasure})`).join(", "),k={title:`Transfer Request from Taiba Hospital - ${_}`,message:`Transfer order #${b.fromOutlet}-${Date.now()} from Taiba Hospital. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Taiba Hospital",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await de.createNotification(k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/drive-thru-express/raw-materials")}else throw new Error(N.message||"Failed to create transfer order")}catch(b){console.error("Error creating transfer order:",b),alert("Error creating transfer order: "+(b instanceof Error?b.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/drive-thru-express/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(u1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/drive-thru-express/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},d1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=T.useState(!1),[l,c]=T.useState(""),[u,d]=T.useState(r),f=T.useRef(null),m=T.useRef(null);T.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),T.useEffect(()=>{const h=y=>{f.current&&!f.current.contains(y.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),T.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},g=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:g?"text-gray-900":"text-gray-500",children:g?g.label:a}),n.jsx(ca,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},BT=()=>{const e=ct(),[t,r]=T.useState([]),[a,s]=T.useState({transferNumber:"",fromWarehouseId:"Taiba Hospital",fromWarehouseName:"Taiba Hospital",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=T.useState({}),[l,c]=T.useState(!0);T.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],b=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:N,transferDate:x,expectedDeliveryDate:b}));const j=await de.getTaibaKitchenFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,b)=>{s(N=>({...N,[x]:b})),i[x]&&o(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(b=>({...b,items:[...b.items,x]}))},m=(x,b,N)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[b]:N};return(b==="quantity"||b==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,b)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===b);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",b),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",b),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},g=x=>{s(b=>({...b,items:b.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},y=async x=>{if(x.preventDefault(),!!h())try{const b={fromOutlet:"Taiba Hospital",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Taiba Hospital Manager"},N=await de.createTransferOrder(b);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(C=>`${C.materialName} (${C.quantity} ${C.unitOfMeasure})`).join(", "),k={title:`Transfer Request from Taiba Hospital - ${_}`,message:`Transfer order #${b.fromOutlet}-${Date.now()} from Taiba Hospital. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Taiba Hospital",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await de.createNotification(k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/drive-thru-express/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(b){console.error("Error creating transfer order:",b),alert("Error creating transfer order: "+(b instanceof Error?b.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/drive-thru-express/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Jt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(rt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,b)=>n.jsxs("div",{className:"flex items-end gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(d1e,{value:x.materialCode,onChange:N=>p(b,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{className:"w-24",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{className:"w-32",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsx("div",{className:"flex items-center pb-0.5",children:n.jsx("button",{type:"button",onClick:()=>g(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Dt,{className:"h-4 w-4"})})})]},b))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/drive-thru-express/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})};function f1e(){const t=Ta().pathname==="/login",r=typeof window<"u"?localStorage.getItem("auth_token"):null,a=typeof window<"u"?(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})():null,s=!!(a!=null&&a.isAdmin);return t?n.jsx(Hp,{children:n.jsx(Me,{path:"/login",element:n.jsx(wO,{})})}):r?n.jsx(p8,{children:n.jsxs(Hp,{children:[n.jsx(Me,{path:"/",element:n.jsx(bO,{})}),n.jsx(Me,{path:"/dashboard",element:n.jsx(bO,{})}),n.jsx(Me,{path:"/raw-materials",element:n.jsx(Gle,{})}),n.jsx(Me,{path:"/raw-materials/add",element:n.jsx(Xle,{})}),n.jsx(Me,{path:"/raw-materials/edit/:id",element:n.jsx(Yle,{})}),n.jsx(Me,{path:"/bill-of-materials",element:n.jsx(Qle,{})}),n.jsx(Me,{path:"/bill-of-materials/add",element:n.jsx(Zle,{})}),n.jsx(Me,{path:"/bill-of-materials/edit/:id",element:n.jsx(ece,{})}),n.jsx(Me,{path:"/finished-goods/add",element:n.jsx(tce,{})}),n.jsx(Me,{path:"/job-orders",element:n.jsx(rce,{})}),n.jsx(Me,{path:"/job-orders/add",element:n.jsx(nce,{})}),n.jsx(Me,{path:"/job-orders/edit/:id",element:n.jsx(ice,{})}),n.jsx(Me,{path:"/purchase-orders",element:n.jsx(oce,{})}),n.jsx(Me,{path:"/purchase-orders/add",element:n.jsx(lce,{})}),n.jsx(Me,{path:"/purchase-orders/edit/:id",element:n.jsx(cce,{})}),n.jsx(Me,{path:"/items-list",element:n.jsx(Jbe,{})}),n.jsx(Me,{path:"/locations-list",element:n.jsx(Zbe,{})}),n.jsx(Me,{path:"/good-receipt-notes",element:n.jsx(uce,{})}),n.jsx(Me,{path:"/good-receipt-notes/add",element:n.jsx(dce,{})}),n.jsx(Me,{path:"/good-receipt-notes/edit/:id",element:n.jsx(fce,{})}),n.jsx(Me,{path:"/warehouse-master",element:n.jsx(mce,{})}),n.jsx(Me,{path:"/warehouse-master/add",element:n.jsx(hce,{})}),n.jsx(Me,{path:"/warehouse-master/edit/:id",element:n.jsx(xce,{})}),n.jsx(Me,{path:"/transfer-orders",element:n.jsx(pce,{})}),n.jsx(Me,{path:"/transfer-orders/edit/:id",element:n.jsx(gce,{})}),n.jsx(Me,{path:"/outlets",element:n.jsx(yce,{})}),n.jsx(Me,{path:"/outlets/add",element:n.jsx(vce,{})}),n.jsx(Me,{path:"/outlets/edit/:id",element:n.jsx(bce,{})}),s&&n.jsxs(n.Fragment,{children:[n.jsx(Me,{path:"/central-kitchen",element:n.jsx(wce,{})}),n.jsx(Me,{path:"/central-kitchen/raw-materials",element:n.jsx(jce,{})}),n.jsx(Me,{path:"/central-kitchen/finished-goods",element:n.jsx(Oce,{})}),n.jsx(Me,{path:"/central-kitchen/make-finished-good",element:n.jsx(Tce,{})}),n.jsx(Me,{path:"/central-kitchen/create-transfer",element:n.jsx(Ece,{})})]}),n.jsx(Me,{path:"/kuwait-city",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(Kg,{})})}),n.jsx(Me,{path:"/kuwait-city/raw-materials",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(Kg,{})})}),n.jsx(Me,{path:"/kuwait-city/finished-goods",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(Kg,{})})}),n.jsx(Me,{path:"/kuwait-city/request-raw-materials",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(t1e,{})})}),n.jsx(Me,{path:"/kuwait-city/request-finished-goods",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(a1e,{})})}),n.jsx(Me,{path:"/360-mall",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(zg,{})})}),n.jsx(Me,{path:"/360-mall/raw-materials",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(zg,{})})}),n.jsx(Me,{path:"/360-mall/finished-goods",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(zg,{})})}),n.jsx(Me,{path:"/360-mall/request-raw-materials",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(s1e,{})})}),n.jsx(Me,{path:"/360-mall/request-finished-goods",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(o1e,{})})}),n.jsx(Me,{path:"/marina-walk-cafe",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(Nl,{})})}),n.jsx(Me,{path:"/marina-walk-cafe/raw-materials",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(Nl,{})})}),n.jsx(Me,{path:"/marina-walk-cafe/finished-goods",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(Nl,{})})}),n.jsx(Me,{path:"/marina-walk-cafe/request-raw-materials",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(RT,{})})}),n.jsx(Me,{path:"/marina-walk-cafe/request-finished-goods",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(LT,{})})}),n.jsx(Me,{path:"/vibes-complex",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(Nl,{})})}),n.jsx(Me,{path:"/vibes-complex/raw-materials",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(Nl,{})})}),n.jsx(Me,{path:"/vibes-complex/finished-goods",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(Nl,{})})}),n.jsx(Me,{path:"/vibes-complex/request-raw-materials",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(RT,{})})}),n.jsx(Me,{path:"/vibes-complex/request-finished-goods",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(LT,{})})}),n.jsx(Me,{path:"/drive-thru-express",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(jl,{})})}),n.jsx(Me,{path:"/drive-thru-express/raw-materials",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(jl,{})})}),n.jsx(Me,{path:"/drive-thru-express/finished-goods",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(jl,{})})}),n.jsx(Me,{path:"/drive-thru-express/request-raw-materials",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx($T,{})})}),n.jsx(Me,{path:"/drive-thru-express/request-finished-goods",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(BT,{})})}),n.jsx(Me,{path:"/taiba-hospital",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(jl,{})})}),n.jsx(Me,{path:"/taiba-hospital/raw-materials",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(jl,{})})}),n.jsx(Me,{path:"/taiba-hospital/finished-goods",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(jl,{})})}),n.jsx(Me,{path:"/taiba-hospital/request-raw-materials",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx($T,{})})}),n.jsx(Me,{path:"/taiba-hospital/request-finished-goods",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(BT,{})})}),n.jsx(Me,{path:"/raw-material-forecast",element:n.jsx(Vbe,{})}),n.jsx(Me,{path:"/raw-material-forecast/add",element:n.jsx(Hbe,{})}),n.jsx(Me,{path:"/sales-orders",element:n.jsx(oi,{})}),n.jsx(Me,{path:"/sales-orders/add",element:n.jsx(li,{})}),n.jsx(Me,{path:"/kuwait-city/sales-orders",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(oi,{})})}),n.jsx(Me,{path:"/kuwait-city/sales-orders/add",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(li,{})})}),n.jsx(Me,{path:"/kuwait-city/pos-sales/create-order",element:n.jsx(nt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(co,{})})}),n.jsx(Me,{path:"/marina-walk-cafe/sales-orders",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(oi,{})})}),n.jsx(Me,{path:"/marina-walk-cafe/sales-orders/add",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(li,{})})}),n.jsx(Me,{path:"/marina-walk-cafe/pos-sales/create-order",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(co,{})})}),n.jsx(Me,{path:"/360-mall/sales-orders",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(oi,{})})}),n.jsx(Me,{path:"/360-mall/sales-orders/add",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(li,{})})}),n.jsx(Me,{path:"/360-mall/pos-sales/create-order",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(co,{})})}),n.jsx(Me,{path:"/mall-food-court/sales-orders",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(oi,{})})}),n.jsx(Me,{path:"/mall-food-court/sales-orders/add",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(li,{})})}),n.jsx(Me,{path:"/mall-food-court/pos-sales/create-order",element:n.jsx(nt,{allowedOutletCodes:["MALL_360"],children:n.jsx(co,{})})}),n.jsx(Me,{path:"/vibes-complex/sales-orders",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(oi,{})})}),n.jsx(Me,{path:"/vibes-complex/sales-orders/add",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(li,{})})}),n.jsx(Me,{path:"/vibes-complex/pos-sales/create-order",element:n.jsx(nt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(co,{})})}),n.jsx(Me,{path:"/drive-thru-express/sales-orders",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(oi,{})})}),n.jsx(Me,{path:"/drive-thru-express/sales-orders/add",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(li,{})})}),n.jsx(Me,{path:"/drive-thru-express/pos-sales/create-order",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(co,{})})}),n.jsx(Me,{path:"/taiba-hospital/sales-orders",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(oi,{})})}),n.jsx(Me,{path:"/taiba-hospital/sales-orders/add",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(li,{})})}),n.jsx(Me,{path:"/taiba-hospital/pos-sales/create-order",element:n.jsx(nt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(co,{})})}),s?n.jsx(Me,{path:"/settings",element:n.jsx(Qbe,{})}):n.jsx(Me,{path:"/settings",element:n.jsx(oE,{to:"/dashboard",replace:!0})})]})}):n.jsx(Hp,{children:n.jsx(Me,{path:"*",element:n.jsx(wO,{})})})}Vg.createRoot(document.getElementById("root")).render(n.jsx(le.StrictMode,{children:n.jsx(fR,{store:e8,children:n.jsx(W5,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsx(f1e,{})})})}));
