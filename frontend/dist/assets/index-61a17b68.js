var dI=Object.defineProperty;var fI=(e,t,r)=>t in e?dI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $N=(e,t,r)=>(fI(e,typeof t!="symbol"?t+"":t,r),r);function mI(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M_={exports:{}},Yh={},F_={exports:{}},bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf=Symbol.for("react.element"),hI=Symbol.for("react.portal"),xI=Symbol.for("react.fragment"),pI=Symbol.for("react.strict_mode"),gI=Symbol.for("react.profiler"),yI=Symbol.for("react.provider"),vI=Symbol.for("react.context"),bI=Symbol.for("react.forward_ref"),wI=Symbol.for("react.suspense"),NI=Symbol.for("react.memo"),jI=Symbol.for("react.lazy"),BN=Symbol.iterator;function SI(e){return e===null||typeof e!="object"?null:(e=BN&&e[BN]||e["@@iterator"],typeof e=="function"?e:null)}var R_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L_=Object.assign,$_={};function Rc(e,t,r){this.props=e,this.context=t,this.refs=$_,this.updater=r||R_}Rc.prototype.isReactComponent={};Rc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B_(){}B_.prototype=Rc.prototype;function A1(e,t,r){this.props=e,this.context=t,this.refs=$_,this.updater=r||R_}var P1=A1.prototype=new B_;P1.constructor=A1;L_(P1,Rc.prototype);P1.isPureReactComponent=!0;var UN=Array.isArray,U_=Object.prototype.hasOwnProperty,D1={current:null},W_={key:!0,ref:!0,__self:!0,__source:!0};function q_(e,t,r){var a,s={},i=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)U_.call(t,a)&&!W_.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)s[a]===void 0&&(s[a]=l[a]);return{$$typeof:Cf,type:e,key:i,ref:o,props:s,_owner:D1.current}}function kI(e,t){return{$$typeof:Cf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function I1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cf}function CI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var WN=/\/+/g;function yp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?CI(""+e.key):t.toString(36)}function V0(e,t,r,a,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Cf:case hI:o=!0}}if(o)return o=e,s=s(o),e=a===""?"."+yp(o,0):a,UN(s)?(r="",e!=null&&(r=e.replace(WN,"$&/")+"/"),V0(s,t,r,"",function(u){return u})):s!=null&&(I1(s)&&(s=kI(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(WN,"$&/")+"/")+e)),t.push(s)),1;if(o=0,a=a===""?".":a+":",UN(e))for(var l=0;l<e.length;l++){i=e[l];var c=a+yp(i,l);o+=V0(i,t,r,c,s)}else if(c=SI(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=a+yp(i,l++),o+=V0(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Zf(e,t,r){if(e==null)return e;var a=[],s=0;return V0(e,a,"","",function(i){return t.call(r,i,s++)}),a}function OI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ra={current:null},z0={transition:null},_I={ReactCurrentDispatcher:Ra,ReactCurrentBatchConfig:z0,ReactCurrentOwner:D1};function K_(){throw Error("act(...) is not supported in production builds of React.")}bt.Children={map:Zf,forEach:function(e,t,r){Zf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Zf(e,function(){t++}),t},toArray:function(e){return Zf(e,function(t){return t})||[]},only:function(e){if(!I1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};bt.Component=Rc;bt.Fragment=xI;bt.Profiler=gI;bt.PureComponent=A1;bt.StrictMode=pI;bt.Suspense=wI;bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I;bt.act=K_;bt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=L_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=D1.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)U_.call(t,c)&&!W_.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:Cf,type:e.type,key:s,ref:i,props:a,_owner:o}};bt.createContext=function(e){return e={$$typeof:vI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yI,_context:e},e.Consumer=e};bt.createElement=q_;bt.createFactory=function(e){var t=q_.bind(null,e);return t.type=e,t};bt.createRef=function(){return{current:null}};bt.forwardRef=function(e){return{$$typeof:bI,render:e}};bt.isValidElement=I1;bt.lazy=function(e){return{$$typeof:jI,_payload:{_status:-1,_result:e},_init:OI}};bt.memo=function(e,t){return{$$typeof:NI,type:e,compare:t===void 0?null:t}};bt.startTransition=function(e){var t=z0.transition;z0.transition={};try{e()}finally{z0.transition=t}};bt.unstable_act=K_;bt.useCallback=function(e,t){return Ra.current.useCallback(e,t)};bt.useContext=function(e){return Ra.current.useContext(e)};bt.useDebugValue=function(){};bt.useDeferredValue=function(e){return Ra.current.useDeferredValue(e)};bt.useEffect=function(e,t){return Ra.current.useEffect(e,t)};bt.useId=function(){return Ra.current.useId()};bt.useImperativeHandle=function(e,t,r){return Ra.current.useImperativeHandle(e,t,r)};bt.useInsertionEffect=function(e,t){return Ra.current.useInsertionEffect(e,t)};bt.useLayoutEffect=function(e,t){return Ra.current.useLayoutEffect(e,t)};bt.useMemo=function(e,t){return Ra.current.useMemo(e,t)};bt.useReducer=function(e,t,r){return Ra.current.useReducer(e,t,r)};bt.useRef=function(e){return Ra.current.useRef(e)};bt.useState=function(e){return Ra.current.useState(e)};bt.useSyncExternalStore=function(e,t,r){return Ra.current.useSyncExternalStore(e,t,r)};bt.useTransition=function(){return Ra.current.useTransition()};bt.version="18.3.1";F_.exports=bt;var C=F_.exports;const se=Qt(C),TI=mI({__proto__:null,default:se},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI=C,AI=Symbol.for("react.element"),PI=Symbol.for("react.fragment"),DI=Object.prototype.hasOwnProperty,II=EI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MI={key:!0,ref:!0,__self:!0,__source:!0};function V_(e,t,r){var a,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)DI.call(t,a)&&!MI.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:AI,type:e,key:i,ref:o,props:s,_owner:II.current}}Yh.Fragment=PI;Yh.jsx=V_;Yh.jsxs=V_;M_.exports=Yh;var n=M_.exports,Vg={},z_={exports:{}},fn={},H_={exports:{}},G_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,B){var ae=Y.length;Y.push(B);e:for(;0<ae;){var oe=ae-1>>>1,D=Y[oe];if(0<s(D,B))Y[oe]=B,Y[ae]=D,ae=oe;else break e}}function r(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var B=Y[0],ae=Y.pop();if(ae!==B){Y[0]=ae;e:for(var oe=0,D=Y.length,H=D>>>1;oe<H;){var G=2*(oe+1)-1,Z=Y[G],X=G+1,ie=Y[X];if(0>s(Z,ae))X<D&&0>s(ie,Z)?(Y[oe]=ie,Y[X]=ae,oe=X):(Y[oe]=Z,Y[G]=ae,oe=G);else if(X<D&&0>s(ie,ae))Y[oe]=ie,Y[X]=ae,oe=X;else break e}}return B}function s(Y,B){var ae=Y.sortIndex-B.sortIndex;return ae!==0?ae:Y.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,p=!1,y=!1,h=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(Y){for(var B=r(u);B!==null;){if(B.callback===null)a(u);else if(B.startTime<=Y)a(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function x(Y){if(h=!1,v(Y),!y)if(r(c)!==null)y=!0,U(g);else{var B=r(u);B!==null&&W(x,B.startTime-Y)}}function g(Y,B){y=!1,h&&(h=!1,N(O),O=-1),p=!0;var ae=m;try{for(v(B),f=r(c);f!==null&&(!(f.expirationTime>B)||Y&&!T());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,m=f.priorityLevel;var D=oe(f.expirationTime<=B);B=e.unstable_now(),typeof D=="function"?f.callback=D:f===r(c)&&a(c),v(B)}else a(c);f=r(c)}if(f!==null)var H=!0;else{var G=r(u);G!==null&&W(x,G.startTime-B),H=!1}return H}finally{f=null,m=ae,p=!1}}var w=!1,j=null,O=-1,_=5,E=-1;function T(){return!(e.unstable_now()-E<_)}function k(){if(j!==null){var Y=e.unstable_now();E=Y;var B=!0;try{B=j(!0,Y)}finally{B?A():(w=!1,j=null)}}else w=!1}var A;if(typeof S=="function")A=function(){S(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=k,A=function(){M.postMessage(null)}}else A=function(){b(k,0)};function U(Y){j=Y,w||(w=!0,A())}function W(Y,B){O=b(function(){Y(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,U(g))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var ae=m;m=B;try{return Y()}finally{m=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,B){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ae=m;m=Y;try{return B()}finally{m=ae}},e.unstable_scheduleCallback=function(Y,B,ae){var oe=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?oe+ae:oe):ae=oe,Y){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ae+D,Y={id:d++,callback:B,priorityLevel:Y,startTime:ae,expirationTime:D,sortIndex:-1},ae>oe?(Y.sortIndex=ae,t(u,Y),r(c)===null&&Y===r(u)&&(h?(N(O),O=-1):h=!0,W(x,ae-oe))):(Y.sortIndex=D,t(c,Y),y||p||(y=!0,U(g))),Y},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(Y){var B=m;return function(){var ae=m;m=B;try{return Y.apply(this,arguments)}finally{m=ae}}}})(G_);H_.exports=G_;var FI=H_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=C,on=FI;function Ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X_=new Set,sd={};function Jo(e,t){ac(e,t),ac(e+"Capture",t)}function ac(e,t){for(sd[e]=t,e=0;e<t.length;e++)X_.add(t[e])}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zg=Object.prototype.hasOwnProperty,LI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qN={},KN={};function $I(e){return zg.call(KN,e)?!0:zg.call(qN,e)?!1:LI.test(e)?KN[e]=!0:(qN[e]=!0,!1)}function BI(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UI(e,t,r,a){if(t===null||typeof t>"u"||BI(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function La(e,t,r,a,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var da={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){da[e]=new La(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];da[t]=new La(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){da[e]=new La(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){da[e]=new La(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){da[e]=new La(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){da[e]=new La(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){da[e]=new La(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){da[e]=new La(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){da[e]=new La(e,5,!1,e.toLowerCase(),null,!1,!1)});var M1=/[\-:]([a-z])/g;function F1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M1,F1);da[t]=new La(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M1,F1);da[t]=new La(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M1,F1);da[t]=new La(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){da[e]=new La(e,1,!1,e.toLowerCase(),null,!1,!1)});da.xlinkHref=new La("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){da[e]=new La(e,1,!1,e.toLowerCase(),null,!0,!0)});function R1(e,t,r,a){var s=da.hasOwnProperty(t)?da[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UI(t,r,s,a)&&(r=null),a||s===null?$I(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,a=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Ys=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,e0=Symbol.for("react.element"),Sl=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),L1=Symbol.for("react.strict_mode"),Hg=Symbol.for("react.profiler"),Y_=Symbol.for("react.provider"),Q_=Symbol.for("react.context"),$1=Symbol.for("react.forward_ref"),Gg=Symbol.for("react.suspense"),Xg=Symbol.for("react.suspense_list"),B1=Symbol.for("react.memo"),ci=Symbol.for("react.lazy"),J_=Symbol.for("react.offscreen"),VN=Symbol.iterator;function lu(e){return e===null||typeof e!="object"?null:(e=VN&&e[VN]||e["@@iterator"],typeof e=="function"?e:null)}var gr=Object.assign,vp;function Ou(e){if(vp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);vp=t&&t[1]||""}return`
`+vp+e}var bp=!1;function wp(e,t){if(!e||bp)return"";bp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var a=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){a=u}e.call(t.prototype)}else{try{throw Error()}catch(u){a=u}e()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=a.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{bp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ou(e):""}function WI(e){switch(e.tag){case 5:return Ou(e.type);case 16:return Ou("Lazy");case 13:return Ou("Suspense");case 19:return Ou("SuspenseList");case 0:case 2:case 15:return e=wp(e.type,!1),e;case 11:return e=wp(e.type.render,!1),e;case 1:return e=wp(e.type,!0),e;default:return""}}function Yg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kl:return"Fragment";case Sl:return"Portal";case Hg:return"Profiler";case L1:return"StrictMode";case Gg:return"Suspense";case Xg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q_:return(e.displayName||"Context")+".Consumer";case Y_:return(e._context.displayName||"Context")+".Provider";case $1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B1:return t=e.displayName||null,t!==null?t:Yg(e.type)||"Memo";case ci:t=e._payload,e=e._init;try{return Yg(e(t))}catch{}}return null}function qI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yg(t);case 8:return t===L1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ii(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function KI(e){var t=Z_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){a=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function t0(e){e._valueTracker||(e._valueTracker=KI(e))}function e4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Z_(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function nm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qg(e,t){var r=t.checked;return gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zN(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Ii(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function t4(e,t){t=t.checked,t!=null&&R1(e,"checked",t,!1)}function Jg(e,t){t4(e,t);var r=Ii(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Zg(e,t.type,Ii(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function HN(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Zg(e,t,r){(t!=="number"||nm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _u=Array.isArray;function Ul(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Ii(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ey(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function GN(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ae(92));if(_u(r)){if(1<r.length)throw Error(Ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ii(r)}}function r4(e,t){var r=Ii(t.value),a=Ii(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function XN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function a4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ty(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?a4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var r0,n4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(r0=r0||document.createElement("div"),r0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=r0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function id(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VI=["Webkit","ms","Moz","O"];Object.keys(Ru).forEach(function(e){VI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ru[t]=Ru[e]})});function s4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ru.hasOwnProperty(e)&&Ru[e]?(""+t).trim():t+"px"}function i4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,s=s4(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}var zI=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ry(e,t){if(t){if(zI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ae(62))}}function ay(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ny=null;function U1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sy=null,Wl=null,ql=null;function YN(e){if(e=Tf(e)){if(typeof sy!="function")throw Error(Ae(280));var t=e.stateNode;t&&(t=tx(t),sy(e.stateNode,e.type,t))}}function o4(e){Wl?ql?ql.push(e):ql=[e]:Wl=e}function l4(){if(Wl){var e=Wl,t=ql;if(ql=Wl=null,YN(e),t)for(e=0;e<t.length;e++)YN(t[e])}}function c4(e,t){return e(t)}function u4(){}var Np=!1;function d4(e,t,r){if(Np)return e(t,r);Np=!0;try{return c4(e,t,r)}finally{Np=!1,(Wl!==null||ql!==null)&&(u4(),l4())}}function od(e,t){var r=e.stateNode;if(r===null)return null;var a=tx(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ae(231,t,typeof r));return r}var iy=!1;if(Ws)try{var cu={};Object.defineProperty(cu,"passive",{get:function(){iy=!0}}),window.addEventListener("test",cu,cu),window.removeEventListener("test",cu,cu)}catch{iy=!1}function HI(e,t,r,a,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Lu=!1,sm=null,im=!1,oy=null,GI={onError:function(e){Lu=!0,sm=e}};function XI(e,t,r,a,s,i,o,l,c){Lu=!1,sm=null,HI.apply(GI,arguments)}function YI(e,t,r,a,s,i,o,l,c){if(XI.apply(this,arguments),Lu){if(Lu){var u=sm;Lu=!1,sm=null}else throw Error(Ae(198));im||(im=!0,oy=u)}}function Zo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function f4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function QN(e){if(Zo(e)!==e)throw Error(Ae(188))}function QI(e){var t=e.alternate;if(!t){if(t=Zo(e),t===null)throw Error(Ae(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(a=s.return,a!==null){r=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return QN(s),e;if(i===a)return QN(s),t;i=i.sibling}throw Error(Ae(188))}if(r.return!==a.return)r=s,a=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,a=i;break}if(l===a){o=!0,a=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,a=s;break}if(l===a){o=!0,a=i,r=s;break}l=l.sibling}if(!o)throw Error(Ae(189))}}if(r.alternate!==a)throw Error(Ae(190))}if(r.tag!==3)throw Error(Ae(188));return r.stateNode.current===r?e:t}function m4(e){return e=QI(e),e!==null?h4(e):null}function h4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=h4(e);if(t!==null)return t;e=e.sibling}return null}var x4=on.unstable_scheduleCallback,JN=on.unstable_cancelCallback,JI=on.unstable_shouldYield,ZI=on.unstable_requestPaint,Or=on.unstable_now,eM=on.unstable_getCurrentPriorityLevel,W1=on.unstable_ImmediatePriority,p4=on.unstable_UserBlockingPriority,om=on.unstable_NormalPriority,tM=on.unstable_LowPriority,g4=on.unstable_IdlePriority,Qh=null,ms=null;function rM(e){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(Qh,e,void 0,(e.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:sM,aM=Math.log,nM=Math.LN2;function sM(e){return e>>>=0,e===0?32:31-(aM(e)/nM|0)|0}var a0=64,n0=4194304;function Tu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lm(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?a=Tu(l):(i&=o,i!==0&&(a=Tu(i)))}else o=r&~s,o!==0?a=Tu(o):i!==0&&(a=Tu(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Zn(t),s=1<<r,a|=e[r],t&=~s;return a}function iM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oM(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Zn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&a)&&(s[o]=iM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ly(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function y4(){var e=a0;return a0<<=1,!(a0&4194240)&&(a0=64),e}function jp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Of(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zn(t),e[t]=r}function lM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Zn(r),i=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~i}}function q1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Zn(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var qt=0;function v4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var b4,K1,w4,N4,j4,cy=!1,s0=[],ji=null,Si=null,ki=null,ld=new Map,cd=new Map,fi=[],cM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZN(e,t){switch(e){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":ld.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cd.delete(t.pointerId)}}function uu(e,t,r,a,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Tf(t),t!==null&&K1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function uM(e,t,r,a,s){switch(t){case"focusin":return ji=uu(ji,e,t,r,a,s),!0;case"dragenter":return Si=uu(Si,e,t,r,a,s),!0;case"mouseover":return ki=uu(ki,e,t,r,a,s),!0;case"pointerover":var i=s.pointerId;return ld.set(i,uu(ld.get(i)||null,e,t,r,a,s)),!0;case"gotpointercapture":return i=s.pointerId,cd.set(i,uu(cd.get(i)||null,e,t,r,a,s)),!0}return!1}function S4(e){var t=po(e.target);if(t!==null){var r=Zo(t);if(r!==null){if(t=r.tag,t===13){if(t=f4(r),t!==null){e.blockedOn=t,j4(e.priority,function(){w4(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function H0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=uy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);ny=a,r.target.dispatchEvent(a),ny=null}else return t=Tf(r),t!==null&&K1(t),e.blockedOn=r,!1;t.shift()}return!0}function ej(e,t,r){H0(e)&&r.delete(t)}function dM(){cy=!1,ji!==null&&H0(ji)&&(ji=null),Si!==null&&H0(Si)&&(Si=null),ki!==null&&H0(ki)&&(ki=null),ld.forEach(ej),cd.forEach(ej)}function du(e,t){e.blockedOn===t&&(e.blockedOn=null,cy||(cy=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,dM)))}function ud(e){function t(s){return du(s,e)}if(0<s0.length){du(s0[0],e);for(var r=1;r<s0.length;r++){var a=s0[r];a.blockedOn===e&&(a.blockedOn=null)}}for(ji!==null&&du(ji,e),Si!==null&&du(Si,e),ki!==null&&du(ki,e),ld.forEach(t),cd.forEach(t),r=0;r<fi.length;r++)a=fi[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<fi.length&&(r=fi[0],r.blockedOn===null);)S4(r),r.blockedOn===null&&fi.shift()}var Kl=Ys.ReactCurrentBatchConfig,cm=!0;function fM(e,t,r,a){var s=qt,i=Kl.transition;Kl.transition=null;try{qt=1,V1(e,t,r,a)}finally{qt=s,Kl.transition=i}}function mM(e,t,r,a){var s=qt,i=Kl.transition;Kl.transition=null;try{qt=4,V1(e,t,r,a)}finally{qt=s,Kl.transition=i}}function V1(e,t,r,a){if(cm){var s=uy(e,t,r,a);if(s===null)Dp(e,t,a,um,r),ZN(e,a);else if(uM(s,e,t,r,a))a.stopPropagation();else if(ZN(e,a),t&4&&-1<cM.indexOf(e)){for(;s!==null;){var i=Tf(s);if(i!==null&&b4(i),i=uy(e,t,r,a),i===null&&Dp(e,t,a,um,r),i===s)break;s=i}s!==null&&a.stopPropagation()}else Dp(e,t,a,null,r)}}var um=null;function uy(e,t,r,a){if(um=null,e=U1(a),e=po(e),e!==null)if(t=Zo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=f4(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return um=e,null}function k4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eM()){case W1:return 1;case p4:return 4;case om:case tM:return 16;case g4:return 536870912;default:return 16}default:return 16}}var xi=null,z1=null,G0=null;function C4(){if(G0)return G0;var e,t=z1,r=t.length,a,s="value"in xi?xi.value:xi.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(a=1;a<=o&&t[r-a]===s[i-a];a++);return G0=s.slice(e,1<a?1-a:void 0)}function X0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function i0(){return!0}function tj(){return!1}function mn(e){function t(r,a,s,i,o){this._reactName=r,this._targetInst=s,this.type=a,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?i0:tj,this.isPropagationStopped=tj,this}return gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=i0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=i0)},persist:function(){},isPersistent:i0}),t}var Lc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H1=mn(Lc),_f=gr({},Lc,{view:0,detail:0}),hM=mn(_f),Sp,kp,fu,Jh=gr({},_f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fu&&(fu&&e.type==="mousemove"?(Sp=e.screenX-fu.screenX,kp=e.screenY-fu.screenY):kp=Sp=0,fu=e),Sp)},movementY:function(e){return"movementY"in e?e.movementY:kp}}),rj=mn(Jh),xM=gr({},Jh,{dataTransfer:0}),pM=mn(xM),gM=gr({},_f,{relatedTarget:0}),Cp=mn(gM),yM=gr({},Lc,{animationName:0,elapsedTime:0,pseudoElement:0}),vM=mn(yM),bM=gr({},Lc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wM=mn(bM),NM=gr({},Lc,{data:0}),aj=mn(NM),jM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kM[e])?!!t[e]:!1}function G1(){return CM}var OM=gr({},_f,{key:function(e){if(e.key){var t=jM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=X0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G1,charCode:function(e){return e.type==="keypress"?X0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?X0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_M=mn(OM),TM=gr({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nj=mn(TM),EM=gr({},_f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G1}),AM=mn(EM),PM=gr({},Lc,{propertyName:0,elapsedTime:0,pseudoElement:0}),DM=mn(PM),IM=gr({},Jh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MM=mn(IM),FM=[9,13,27,32],X1=Ws&&"CompositionEvent"in window,$u=null;Ws&&"documentMode"in document&&($u=document.documentMode);var RM=Ws&&"TextEvent"in window&&!$u,O4=Ws&&(!X1||$u&&8<$u&&11>=$u),sj=String.fromCharCode(32),ij=!1;function _4(e,t){switch(e){case"keyup":return FM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cl=!1;function LM(e,t){switch(e){case"compositionend":return T4(t);case"keypress":return t.which!==32?null:(ij=!0,sj);case"textInput":return e=t.data,e===sj&&ij?null:e;default:return null}}function $M(e,t){if(Cl)return e==="compositionend"||!X1&&_4(e,t)?(e=C4(),G0=z1=xi=null,Cl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return O4&&t.locale!=="ko"?null:t.data;default:return null}}var BM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!BM[e.type]:t==="textarea"}function E4(e,t,r,a){o4(a),t=dm(t,"onChange"),0<t.length&&(r=new H1("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Bu=null,dd=null;function UM(e){U4(e,0)}function Zh(e){var t=Tl(e);if(e4(t))return e}function WM(e,t){if(e==="change")return t}var A4=!1;if(Ws){var Op;if(Ws){var _p="oninput"in document;if(!_p){var lj=document.createElement("div");lj.setAttribute("oninput","return;"),_p=typeof lj.oninput=="function"}Op=_p}else Op=!1;A4=Op&&(!document.documentMode||9<document.documentMode)}function cj(){Bu&&(Bu.detachEvent("onpropertychange",P4),dd=Bu=null)}function P4(e){if(e.propertyName==="value"&&Zh(dd)){var t=[];E4(t,dd,e,U1(e)),d4(UM,t)}}function qM(e,t,r){e==="focusin"?(cj(),Bu=t,dd=r,Bu.attachEvent("onpropertychange",P4)):e==="focusout"&&cj()}function KM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zh(dd)}function VM(e,t){if(e==="click")return Zh(t)}function zM(e,t){if(e==="input"||e==="change")return Zh(t)}function HM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var as=typeof Object.is=="function"?Object.is:HM;function fd(e,t){if(as(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!zg.call(t,s)||!as(e[s],t[s]))return!1}return!0}function uj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dj(e,t){var r=uj(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uj(r)}}function D4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?D4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function I4(){for(var e=window,t=nm();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=nm(e.document)}return t}function Y1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function GM(e){var t=I4(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&D4(r.ownerDocument.documentElement,r)){if(a!==null&&Y1(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(a.start,s);a=a.end===void 0?i:Math.min(a.end,s),!e.extend&&i>a&&(s=a,a=i,i=s),s=dj(r,i);var o=dj(r,a);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XM=Ws&&"documentMode"in document&&11>=document.documentMode,Ol=null,dy=null,Uu=null,fy=!1;function fj(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fy||Ol==null||Ol!==nm(a)||(a=Ol,"selectionStart"in a&&Y1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Uu&&fd(Uu,a)||(Uu=a,a=dm(dy,"onSelect"),0<a.length&&(t=new H1("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Ol)))}function o0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _l={animationend:o0("Animation","AnimationEnd"),animationiteration:o0("Animation","AnimationIteration"),animationstart:o0("Animation","AnimationStart"),transitionend:o0("Transition","TransitionEnd")},Tp={},M4={};Ws&&(M4=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function ex(e){if(Tp[e])return Tp[e];if(!_l[e])return e;var t=_l[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in M4)return Tp[e]=t[r];return e}var F4=ex("animationend"),R4=ex("animationiteration"),L4=ex("animationstart"),$4=ex("transitionend"),B4=new Map,mj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(e,t){B4.set(e,t),Jo(t,[e])}for(var Ep=0;Ep<mj.length;Ep++){var Ap=mj[Ep],YM=Ap.toLowerCase(),QM=Ap[0].toUpperCase()+Ap.slice(1);Ui(YM,"on"+QM)}Ui(F4,"onAnimationEnd");Ui(R4,"onAnimationIteration");Ui(L4,"onAnimationStart");Ui("dblclick","onDoubleClick");Ui("focusin","onFocus");Ui("focusout","onBlur");Ui($4,"onTransitionEnd");ac("onMouseEnter",["mouseout","mouseover"]);ac("onMouseLeave",["mouseout","mouseover"]);ac("onPointerEnter",["pointerout","pointerover"]);ac("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eu));function hj(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,YI(a,t,void 0,e),e.currentTarget=null}function U4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var l=a[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;hj(s,l,u),i=c}else for(o=0;o<a.length;o++){if(l=a[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;hj(s,l,u),i=c}}}if(im)throw e=oy,im=!1,oy=null,e}function rr(e,t){var r=t[gy];r===void 0&&(r=t[gy]=new Set);var a=e+"__bubble";r.has(a)||(W4(t,e,2,!1),r.add(a))}function Pp(e,t,r){var a=0;t&&(a|=4),W4(r,e,a,t)}var l0="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[l0]){e[l0]=!0,X_.forEach(function(r){r!=="selectionchange"&&(JM.has(r)||Pp(r,!1,e),Pp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[l0]||(t[l0]=!0,Pp("selectionchange",!1,t))}}function W4(e,t,r,a){switch(k4(t)){case 1:var s=fM;break;case 4:s=mM;break;default:s=V1}r=s.bind(null,t,r,e),s=void 0,!iy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Dp(e,t,r,a,s){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var l=a.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=po(l),o===null)return;if(c=o.tag,c===5||c===6){a=i=o;continue e}l=l.parentNode}}a=a.return}d4(function(){var u=i,d=U1(r),f=[];e:{var m=B4.get(e);if(m!==void 0){var p=H1,y=e;switch(e){case"keypress":if(X0(r)===0)break e;case"keydown":case"keyup":p=_M;break;case"focusin":y="focus",p=Cp;break;case"focusout":y="blur",p=Cp;break;case"beforeblur":case"afterblur":p=Cp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=pM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=AM;break;case F4:case R4:case L4:p=vM;break;case $4:p=DM;break;case"scroll":p=hM;break;case"wheel":p=MM;break;case"copy":case"cut":case"paste":p=wM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=nj}var h=(t&4)!==0,b=!h&&e==="scroll",N=h?m!==null?m+"Capture":null:m;h=[];for(var S=u,v;S!==null;){v=S;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,N!==null&&(x=od(S,N),x!=null&&h.push(hd(S,x,v)))),b)break;S=S.return}0<h.length&&(m=new p(m,y,null,r,d),f.push({event:m,listeners:h}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==ny&&(y=r.relatedTarget||r.fromElement)&&(po(y)||y[qs]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?po(y):null,y!==null&&(b=Zo(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(h=rj,x="onMouseLeave",N="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(h=nj,x="onPointerLeave",N="onPointerEnter",S="pointer"),b=p==null?m:Tl(p),v=y==null?m:Tl(y),m=new h(x,S+"leave",p,r,d),m.target=b,m.relatedTarget=v,x=null,po(d)===u&&(h=new h(N,S+"enter",y,r,d),h.target=v,h.relatedTarget=b,x=h),b=x,p&&y)t:{for(h=p,N=y,S=0,v=h;v;v=fl(v))S++;for(v=0,x=N;x;x=fl(x))v++;for(;0<S-v;)h=fl(h),S--;for(;0<v-S;)N=fl(N),v--;for(;S--;){if(h===N||N!==null&&h===N.alternate)break t;h=fl(h),N=fl(N)}h=null}else h=null;p!==null&&xj(f,m,p,h,!1),y!==null&&b!==null&&xj(f,b,y,h,!0)}}e:{if(m=u?Tl(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var g=WM;else if(oj(m))if(A4)g=zM;else{g=KM;var w=qM}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(g=VM);if(g&&(g=g(e,u))){E4(f,g,r,d);break e}w&&w(e,m,u),e==="focusout"&&(w=m._wrapperState)&&w.controlled&&m.type==="number"&&Zg(m,"number",m.value)}switch(w=u?Tl(u):window,e){case"focusin":(oj(w)||w.contentEditable==="true")&&(Ol=w,dy=u,Uu=null);break;case"focusout":Uu=dy=Ol=null;break;case"mousedown":fy=!0;break;case"contextmenu":case"mouseup":case"dragend":fy=!1,fj(f,r,d);break;case"selectionchange":if(XM)break;case"keydown":case"keyup":fj(f,r,d)}var j;if(X1)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Cl?_4(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(O4&&r.locale!=="ko"&&(Cl||O!=="onCompositionStart"?O==="onCompositionEnd"&&Cl&&(j=C4()):(xi=d,z1="value"in xi?xi.value:xi.textContent,Cl=!0)),w=dm(u,O),0<w.length&&(O=new aj(O,e,null,r,d),f.push({event:O,listeners:w}),j?O.data=j:(j=T4(r),j!==null&&(O.data=j)))),(j=RM?LM(e,r):$M(e,r))&&(u=dm(u,"onBeforeInput"),0<u.length&&(d=new aj("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}U4(f,t)})}function hd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function dm(e,t){for(var r=t+"Capture",a=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=od(e,r),i!=null&&a.unshift(hd(e,i,s)),i=od(e,t),i!=null&&a.push(hd(e,i,s))),e=e.return}return a}function fl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xj(e,t,r,a,s){for(var i=t._reactName,o=[];r!==null&&r!==a;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===a)break;l.tag===5&&u!==null&&(l=u,s?(c=od(r,i),c!=null&&o.unshift(hd(r,c,l))):s||(c=od(r,i),c!=null&&o.push(hd(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var ZM=/\r\n?/g,eF=/\u0000|\uFFFD/g;function pj(e){return(typeof e=="string"?e:""+e).replace(ZM,`
`).replace(eF,"")}function c0(e,t,r){if(t=pj(t),pj(e)!==t&&r)throw Error(Ae(425))}function fm(){}var my=null,hy=null;function xy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var py=typeof setTimeout=="function"?setTimeout:void 0,tF=typeof clearTimeout=="function"?clearTimeout:void 0,gj=typeof Promise=="function"?Promise:void 0,rF=typeof queueMicrotask=="function"?queueMicrotask:typeof gj<"u"?function(e){return gj.resolve(null).then(e).catch(aF)}:py;function aF(e){setTimeout(function(){throw e})}function Ip(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){e.removeChild(s),ud(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=s}while(r);ud(t)}function Ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $c=Math.random().toString(36).slice(2),us="__reactFiber$"+$c,xd="__reactProps$"+$c,qs="__reactContainer$"+$c,gy="__reactEvents$"+$c,nF="__reactListeners$"+$c,sF="__reactHandles$"+$c;function po(e){var t=e[us];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qs]||r[us]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=yj(e);e!==null;){if(r=e[us])return r;e=yj(e)}return t}e=r,r=e.parentNode}return null}function Tf(e){return e=e[us]||e[qs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Tl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ae(33))}function tx(e){return e[xd]||null}var yy=[],El=-1;function Wi(e){return{current:e}}function ir(e){0>El||(e.current=yy[El],yy[El]=null,El--)}function er(e,t){El++,yy[El]=e.current,e.current=t}var Mi={},Oa=Wi(Mi),qa=Wi(!1),Po=Mi;function nc(e,t){var r=e.type.contextTypes;if(!r)return Mi;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ka(e){return e=e.childContextTypes,e!=null}function mm(){ir(qa),ir(Oa)}function vj(e,t,r){if(Oa.current!==Mi)throw Error(Ae(168));er(Oa,t),er(qa,r)}function q4(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(Ae(108,qI(e)||"Unknown",s));return gr({},r,a)}function hm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,Po=Oa.current,er(Oa,e),er(qa,qa.current),!0}function bj(e,t,r){var a=e.stateNode;if(!a)throw Error(Ae(169));r?(e=q4(e,t,Po),a.__reactInternalMemoizedMergedChildContext=e,ir(qa),ir(Oa),er(Oa,e)):ir(qa),er(qa,r)}var Os=null,rx=!1,Mp=!1;function K4(e){Os===null?Os=[e]:Os.push(e)}function iF(e){rx=!0,K4(e)}function qi(){if(!Mp&&Os!==null){Mp=!0;var e=0,t=qt;try{var r=Os;for(qt=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Os=null,rx=!1}catch(s){throw Os!==null&&(Os=Os.slice(e+1)),x4(W1,qi),s}finally{qt=t,Mp=!1}}return null}var Al=[],Pl=0,xm=null,pm=0,Sn=[],kn=0,Do=null,_s=1,Ts="";function lo(e,t){Al[Pl++]=pm,Al[Pl++]=xm,xm=e,pm=t}function V4(e,t,r){Sn[kn++]=_s,Sn[kn++]=Ts,Sn[kn++]=Do,Do=e;var a=_s;e=Ts;var s=32-Zn(a)-1;a&=~(1<<s),r+=1;var i=32-Zn(t)+s;if(30<i){var o=s-s%5;i=(a&(1<<o)-1).toString(32),a>>=o,s-=o,_s=1<<32-Zn(t)+s|r<<s|a,Ts=i+e}else _s=1<<i|r<<s|a,Ts=e}function Q1(e){e.return!==null&&(lo(e,1),V4(e,1,0))}function J1(e){for(;e===xm;)xm=Al[--Pl],Al[Pl]=null,pm=Al[--Pl],Al[Pl]=null;for(;e===Do;)Do=Sn[--kn],Sn[kn]=null,Ts=Sn[--kn],Sn[kn]=null,_s=Sn[--kn],Sn[kn]=null}var nn=null,an=null,cr=!1,Hn=null;function z4(e,t){var r=Cn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function wj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nn=e,an=Ci(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nn=e,an=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Do!==null?{id:_s,overflow:Ts}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Cn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,nn=e,an=null,!0):!1;default:return!1}}function vy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function by(e){if(cr){var t=an;if(t){var r=t;if(!wj(e,t)){if(vy(e))throw Error(Ae(418));t=Ci(r.nextSibling);var a=nn;t&&wj(e,t)?z4(a,r):(e.flags=e.flags&-4097|2,cr=!1,nn=e)}}else{if(vy(e))throw Error(Ae(418));e.flags=e.flags&-4097|2,cr=!1,nn=e}}}function Nj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nn=e}function u0(e){if(e!==nn)return!1;if(!cr)return Nj(e),cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xy(e.type,e.memoizedProps)),t&&(t=an)){if(vy(e))throw H4(),Error(Ae(418));for(;t;)z4(e,t),t=Ci(t.nextSibling)}if(Nj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){an=Ci(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}an=null}}else an=nn?Ci(e.stateNode.nextSibling):null;return!0}function H4(){for(var e=an;e;)e=Ci(e.nextSibling)}function sc(){an=nn=null,cr=!1}function Z1(e){Hn===null?Hn=[e]:Hn.push(e)}var oF=Ys.ReactCurrentBatchConfig;function mu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ae(309));var a=r.stateNode}if(!a)throw Error(Ae(147,e));var s=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ae(284));if(!r._owner)throw Error(Ae(290,e))}return e}function d0(e,t){throw e=Object.prototype.toString.call(t),Error(Ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jj(e){var t=e._init;return t(e._payload)}function G4(e){function t(N,S){if(e){var v=N.deletions;v===null?(N.deletions=[S],N.flags|=16):v.push(S)}}function r(N,S){if(!e)return null;for(;S!==null;)t(N,S),S=S.sibling;return null}function a(N,S){for(N=new Map;S!==null;)S.key!==null?N.set(S.key,S):N.set(S.index,S),S=S.sibling;return N}function s(N,S){return N=Ei(N,S),N.index=0,N.sibling=null,N}function i(N,S,v){return N.index=v,e?(v=N.alternate,v!==null?(v=v.index,v<S?(N.flags|=2,S):v):(N.flags|=2,S)):(N.flags|=1048576,S)}function o(N){return e&&N.alternate===null&&(N.flags|=2),N}function l(N,S,v,x){return S===null||S.tag!==6?(S=Wp(v,N.mode,x),S.return=N,S):(S=s(S,v),S.return=N,S)}function c(N,S,v,x){var g=v.type;return g===kl?d(N,S,v.props.children,x,v.key):S!==null&&(S.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===ci&&jj(g)===S.type)?(x=s(S,v.props),x.ref=mu(N,S,v),x.return=N,x):(x=rm(v.type,v.key,v.props,null,N.mode,x),x.ref=mu(N,S,v),x.return=N,x)}function u(N,S,v,x){return S===null||S.tag!==4||S.stateNode.containerInfo!==v.containerInfo||S.stateNode.implementation!==v.implementation?(S=qp(v,N.mode,x),S.return=N,S):(S=s(S,v.children||[]),S.return=N,S)}function d(N,S,v,x,g){return S===null||S.tag!==7?(S=So(v,N.mode,x,g),S.return=N,S):(S=s(S,v),S.return=N,S)}function f(N,S,v){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Wp(""+S,N.mode,v),S.return=N,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case e0:return v=rm(S.type,S.key,S.props,null,N.mode,v),v.ref=mu(N,null,S),v.return=N,v;case Sl:return S=qp(S,N.mode,v),S.return=N,S;case ci:var x=S._init;return f(N,x(S._payload),v)}if(_u(S)||lu(S))return S=So(S,N.mode,v,null),S.return=N,S;d0(N,S)}return null}function m(N,S,v,x){var g=S!==null?S.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return g!==null?null:l(N,S,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case e0:return v.key===g?c(N,S,v,x):null;case Sl:return v.key===g?u(N,S,v,x):null;case ci:return g=v._init,m(N,S,g(v._payload),x)}if(_u(v)||lu(v))return g!==null?null:d(N,S,v,x,null);d0(N,v)}return null}function p(N,S,v,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return N=N.get(v)||null,l(S,N,""+x,g);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case e0:return N=N.get(x.key===null?v:x.key)||null,c(S,N,x,g);case Sl:return N=N.get(x.key===null?v:x.key)||null,u(S,N,x,g);case ci:var w=x._init;return p(N,S,v,w(x._payload),g)}if(_u(x)||lu(x))return N=N.get(v)||null,d(S,N,x,g,null);d0(S,x)}return null}function y(N,S,v,x){for(var g=null,w=null,j=S,O=S=0,_=null;j!==null&&O<v.length;O++){j.index>O?(_=j,j=null):_=j.sibling;var E=m(N,j,v[O],x);if(E===null){j===null&&(j=_);break}e&&j&&E.alternate===null&&t(N,j),S=i(E,S,O),w===null?g=E:w.sibling=E,w=E,j=_}if(O===v.length)return r(N,j),cr&&lo(N,O),g;if(j===null){for(;O<v.length;O++)j=f(N,v[O],x),j!==null&&(S=i(j,S,O),w===null?g=j:w.sibling=j,w=j);return cr&&lo(N,O),g}for(j=a(N,j);O<v.length;O++)_=p(j,N,O,v[O],x),_!==null&&(e&&_.alternate!==null&&j.delete(_.key===null?O:_.key),S=i(_,S,O),w===null?g=_:w.sibling=_,w=_);return e&&j.forEach(function(T){return t(N,T)}),cr&&lo(N,O),g}function h(N,S,v,x){var g=lu(v);if(typeof g!="function")throw Error(Ae(150));if(v=g.call(v),v==null)throw Error(Ae(151));for(var w=g=null,j=S,O=S=0,_=null,E=v.next();j!==null&&!E.done;O++,E=v.next()){j.index>O?(_=j,j=null):_=j.sibling;var T=m(N,j,E.value,x);if(T===null){j===null&&(j=_);break}e&&j&&T.alternate===null&&t(N,j),S=i(T,S,O),w===null?g=T:w.sibling=T,w=T,j=_}if(E.done)return r(N,j),cr&&lo(N,O),g;if(j===null){for(;!E.done;O++,E=v.next())E=f(N,E.value,x),E!==null&&(S=i(E,S,O),w===null?g=E:w.sibling=E,w=E);return cr&&lo(N,O),g}for(j=a(N,j);!E.done;O++,E=v.next())E=p(j,N,O,E.value,x),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?O:E.key),S=i(E,S,O),w===null?g=E:w.sibling=E,w=E);return e&&j.forEach(function(k){return t(N,k)}),cr&&lo(N,O),g}function b(N,S,v,x){if(typeof v=="object"&&v!==null&&v.type===kl&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case e0:e:{for(var g=v.key,w=S;w!==null;){if(w.key===g){if(g=v.type,g===kl){if(w.tag===7){r(N,w.sibling),S=s(w,v.props.children),S.return=N,N=S;break e}}else if(w.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===ci&&jj(g)===w.type){r(N,w.sibling),S=s(w,v.props),S.ref=mu(N,w,v),S.return=N,N=S;break e}r(N,w);break}else t(N,w);w=w.sibling}v.type===kl?(S=So(v.props.children,N.mode,x,v.key),S.return=N,N=S):(x=rm(v.type,v.key,v.props,null,N.mode,x),x.ref=mu(N,S,v),x.return=N,N=x)}return o(N);case Sl:e:{for(w=v.key;S!==null;){if(S.key===w)if(S.tag===4&&S.stateNode.containerInfo===v.containerInfo&&S.stateNode.implementation===v.implementation){r(N,S.sibling),S=s(S,v.children||[]),S.return=N,N=S;break e}else{r(N,S);break}else t(N,S);S=S.sibling}S=qp(v,N.mode,x),S.return=N,N=S}return o(N);case ci:return w=v._init,b(N,S,w(v._payload),x)}if(_u(v))return y(N,S,v,x);if(lu(v))return h(N,S,v,x);d0(N,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,S!==null&&S.tag===6?(r(N,S.sibling),S=s(S,v),S.return=N,N=S):(r(N,S),S=Wp(v,N.mode,x),S.return=N,N=S),o(N)):r(N,S)}return b}var ic=G4(!0),X4=G4(!1),gm=Wi(null),ym=null,Dl=null,eb=null;function tb(){eb=Dl=ym=null}function rb(e){var t=gm.current;ir(gm),e._currentValue=t}function wy(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Vl(e,t){ym=e,eb=Dl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ua=!0),e.firstContext=null)}function In(e){var t=e._currentValue;if(eb!==e)if(e={context:e,memoizedValue:t,next:null},Dl===null){if(ym===null)throw Error(Ae(308));Dl=e,ym.dependencies={lanes:0,firstContext:e}}else Dl=Dl.next=e;return t}var go=null;function ab(e){go===null?go=[e]:go.push(e)}function Y4(e,t,r,a){var s=t.interleaved;return s===null?(r.next=r,ab(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ks(e,a)}function Ks(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ui=!1;function nb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Et&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Ks(e,r)}return s=a.interleaved,s===null?(t.next=t,ab(a)):(t.next=s.next,s.next=t),a.interleaved=t,Ks(e,r)}function Y0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,q1(e,r)}}function Sj(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vm(e,t,r,a){var s=e.updateQueue;ui=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((a&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,h=l;switch(m=t,p=r,h.tag){case 1:if(y=h.payload,typeof y=="function"){f=y.call(p,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=h.payload,m=typeof y=="function"?y.call(p,f,m):y,m==null)break e;f=gr({},f,m);break e;case 2:ui=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Mo|=o,e.lanes=o,e.memoizedState=f}}function kj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=r,typeof s!="function")throw Error(Ae(191,s));s.call(a)}}}var Ef={},hs=Wi(Ef),pd=Wi(Ef),gd=Wi(Ef);function yo(e){if(e===Ef)throw Error(Ae(174));return e}function sb(e,t){switch(er(gd,t),er(pd,e),er(hs,Ef),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ty(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ty(t,e)}ir(hs),er(hs,t)}function oc(){ir(hs),ir(pd),ir(gd)}function J4(e){yo(gd.current);var t=yo(hs.current),r=ty(t,e.type);t!==r&&(er(pd,e),er(hs,r))}function ib(e){pd.current===e&&(ir(hs),ir(pd))}var hr=Wi(0);function bm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fp=[];function ob(){for(var e=0;e<Fp.length;e++)Fp[e]._workInProgressVersionPrimary=null;Fp.length=0}var Q0=Ys.ReactCurrentDispatcher,Rp=Ys.ReactCurrentBatchConfig,Io=0,pr=null,Br=null,Xr=null,wm=!1,Wu=!1,yd=0,lF=0;function ma(){throw Error(Ae(321))}function lb(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!as(e[r],t[r]))return!1;return!0}function cb(e,t,r,a,s,i){if(Io=i,pr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Q0.current=e===null||e.memoizedState===null?fF:mF,e=r(a,s),Wu){i=0;do{if(Wu=!1,yd=0,25<=i)throw Error(Ae(301));i+=1,Xr=Br=null,t.updateQueue=null,Q0.current=hF,e=r(a,s)}while(Wu)}if(Q0.current=Nm,t=Br!==null&&Br.next!==null,Io=0,Xr=Br=pr=null,wm=!1,t)throw Error(Ae(300));return e}function ub(){var e=yd!==0;return yd=0,e}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?pr.memoizedState=Xr=e:Xr=Xr.next=e,Xr}function Mn(){if(Br===null){var e=pr.alternate;e=e!==null?e.memoizedState:null}else e=Br.next;var t=Xr===null?pr.memoizedState:Xr.next;if(t!==null)Xr=t,Br=e;else{if(e===null)throw Error(Ae(310));Br=e,e={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Xr===null?pr.memoizedState=Xr=e:Xr=Xr.next=e}return Xr}function vd(e,t){return typeof t=="function"?t(e):t}function Lp(e){var t=Mn(),r=t.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=e;var a=Br,s=a.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}a.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,a=a.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Io&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=a):c=c.next=f,pr.lanes|=d,Mo|=d}u=u.next}while(u!==null&&u!==i);c===null?o=a:c.next=l,as(a,t.memoizedState)||(Ua=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,r.lastRenderedState=a}if(e=r.interleaved,e!==null){s=e;do i=s.lane,pr.lanes|=i,Mo|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function $p(e){var t=Mn(),r=t.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);as(i,t.memoizedState)||(Ua=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function Z4(){}function eT(e,t){var r=pr,a=Mn(),s=t(),i=!as(a.memoizedState,s);if(i&&(a.memoizedState=s,Ua=!0),a=a.queue,db(aT.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||Xr!==null&&Xr.memoizedState.tag&1){if(r.flags|=2048,bd(9,rT.bind(null,r,a,s,t),void 0,null),Zr===null)throw Error(Ae(349));Io&30||tT(r,t,s)}return s}function tT(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function rT(e,t,r,a){t.value=r,t.getSnapshot=a,nT(t)&&sT(e)}function aT(e,t,r){return r(function(){nT(t)&&sT(e)})}function nT(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!as(e,r)}catch{return!0}}function sT(e){var t=Ks(e,1);t!==null&&es(t,e,1,-1)}function Cj(e){var t=cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:e},t.queue=e,e=e.dispatch=dF.bind(null,pr,e),[t.memoizedState,e]}function bd(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function iT(){return Mn().memoizedState}function J0(e,t,r,a){var s=cs();pr.flags|=e,s.memoizedState=bd(1|t,r,void 0,a===void 0?null:a)}function ax(e,t,r,a){var s=Mn();a=a===void 0?null:a;var i=void 0;if(Br!==null){var o=Br.memoizedState;if(i=o.destroy,a!==null&&lb(a,o.deps)){s.memoizedState=bd(t,r,i,a);return}}pr.flags|=e,s.memoizedState=bd(1|t,r,i,a)}function Oj(e,t){return J0(8390656,8,e,t)}function db(e,t){return ax(2048,8,e,t)}function oT(e,t){return ax(4,2,e,t)}function lT(e,t){return ax(4,4,e,t)}function cT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uT(e,t,r){return r=r!=null?r.concat([e]):null,ax(4,4,cT.bind(null,t,e),r)}function fb(){}function dT(e,t){var r=Mn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&lb(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function fT(e,t){var r=Mn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&lb(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function mT(e,t,r){return Io&21?(as(r,t)||(r=y4(),pr.lanes|=r,Mo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ua=!0),e.memoizedState=r)}function cF(e,t){var r=qt;qt=r!==0&&4>r?r:4,e(!0);var a=Rp.transition;Rp.transition={};try{e(!1),t()}finally{qt=r,Rp.transition=a}}function hT(){return Mn().memoizedState}function uF(e,t,r){var a=Ti(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},xT(e))pT(t,r);else if(r=Y4(e,t,r,a),r!==null){var s=Ma();es(r,e,a,s),gT(r,t,a)}}function dF(e,t,r){var a=Ti(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(xT(e))pT(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,as(l,o)){var c=t.interleaved;c===null?(s.next=s,ab(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Y4(e,t,s,a),r!==null&&(s=Ma(),es(r,e,a,s),gT(r,t,a))}}function xT(e){var t=e.alternate;return e===pr||t!==null&&t===pr}function pT(e,t){Wu=wm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gT(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,q1(e,r)}}var Nm={readContext:In,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},fF={readContext:In,useCallback:function(e,t){return cs().memoizedState=[e,t===void 0?null:t],e},useContext:In,useEffect:Oj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,J0(4194308,4,cT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return J0(4194308,4,e,t)},useInsertionEffect:function(e,t){return J0(4,2,e,t)},useMemo:function(e,t){var r=cs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=cs();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=uF.bind(null,pr,e),[a.memoizedState,e]},useRef:function(e){var t=cs();return e={current:e},t.memoizedState=e},useState:Cj,useDebugValue:fb,useDeferredValue:function(e){return cs().memoizedState=e},useTransition:function(){var e=Cj(!1),t=e[0];return e=cF.bind(null,e[1]),cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=pr,s=cs();if(cr){if(r===void 0)throw Error(Ae(407));r=r()}else{if(r=t(),Zr===null)throw Error(Ae(349));Io&30||tT(a,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Oj(aT.bind(null,a,i,e),[e]),a.flags|=2048,bd(9,rT.bind(null,a,i,r,t),void 0,null),r},useId:function(){var e=cs(),t=Zr.identifierPrefix;if(cr){var r=Ts,a=_s;r=(a&~(1<<32-Zn(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=yd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=lF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mF={readContext:In,useCallback:dT,useContext:In,useEffect:db,useImperativeHandle:uT,useInsertionEffect:oT,useLayoutEffect:lT,useMemo:fT,useReducer:Lp,useRef:iT,useState:function(){return Lp(vd)},useDebugValue:fb,useDeferredValue:function(e){var t=Mn();return mT(t,Br.memoizedState,e)},useTransition:function(){var e=Lp(vd)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Z4,useSyncExternalStore:eT,useId:hT,unstable_isNewReconciler:!1},hF={readContext:In,useCallback:dT,useContext:In,useEffect:db,useImperativeHandle:uT,useInsertionEffect:oT,useLayoutEffect:lT,useMemo:fT,useReducer:$p,useRef:iT,useState:function(){return $p(vd)},useDebugValue:fb,useDeferredValue:function(e){var t=Mn();return Br===null?t.memoizedState=e:mT(t,Br.memoizedState,e)},useTransition:function(){var e=$p(vd)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Z4,useSyncExternalStore:eT,useId:hT,unstable_isNewReconciler:!1};function qn(e,t){if(e&&e.defaultProps){t=gr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ny(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:gr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var nx={isMounted:function(e){return(e=e._reactInternals)?Zo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Ma(),s=Ti(e),i=Is(a,s);i.payload=t,r!=null&&(i.callback=r),t=Oi(e,i,s),t!==null&&(es(t,e,s,a),Y0(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Ma(),s=Ti(e),i=Is(a,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Oi(e,i,s),t!==null&&(es(t,e,s,a),Y0(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ma(),a=Ti(e),s=Is(r,a);s.tag=2,t!=null&&(s.callback=t),t=Oi(e,s,a),t!==null&&(es(t,e,a,r),Y0(t,e,a))}};function _j(e,t,r,a,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,o):t.prototype&&t.prototype.isPureReactComponent?!fd(r,a)||!fd(s,i):!0}function yT(e,t,r){var a=!1,s=Mi,i=t.contextType;return typeof i=="object"&&i!==null?i=In(i):(s=Ka(t)?Po:Oa.current,a=t.contextTypes,i=(a=a!=null)?nc(e,s):Mi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nx,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Tj(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&nx.enqueueReplaceState(t,t.state,null)}function jy(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},nb(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=In(i):(i=Ka(t)?Po:Oa.current,s.context=nc(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ny(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&nx.enqueueReplaceState(s,s.state,null),vm(e,r,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function lc(e,t){try{var r="",a=t;do r+=WI(a),a=a.return;while(a);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Bp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Sy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var xF=typeof WeakMap=="function"?WeakMap:Map;function vT(e,t,r){r=Is(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Sm||(Sm=!0,Iy=a),Sy(e,t)},r}function bT(e,t,r){r=Is(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){Sy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Sy(e,t),typeof a!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Ej(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new xF;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=TF.bind(null,e,t,r),t.then(e,e))}function Aj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pj(e,t,r,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Is(-1,1),t.tag=2,Oi(r,t,1))),r.lanes|=1),e)}var pF=Ys.ReactCurrentOwner,Ua=!1;function Aa(e,t,r,a){t.child=e===null?X4(t,null,r,a):ic(t,e.child,r,a)}function Dj(e,t,r,a,s){r=r.render;var i=t.ref;return Vl(t,s),a=cb(e,t,r,a,i,s),r=ub(),e!==null&&!Ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(cr&&r&&Q1(t),t.flags|=1,Aa(e,t,a,s),t.child)}function Ij(e,t,r,a,s){if(e===null){var i=r.type;return typeof i=="function"&&!bb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,wT(e,t,i,a,s)):(e=rm(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:fd,r(o,a)&&e.ref===t.ref)return Vs(e,t,s)}return t.flags|=1,e=Ei(i,a),e.ref=t.ref,e.return=t,t.child=e}function wT(e,t,r,a,s){if(e!==null){var i=e.memoizedProps;if(fd(i,a)&&e.ref===t.ref)if(Ua=!1,t.pendingProps=a=i,(e.lanes&s)!==0)e.flags&131072&&(Ua=!0);else return t.lanes=e.lanes,Vs(e,t,s)}return ky(e,t,r,a,s)}function NT(e,t,r){var a=t.pendingProps,s=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(Ml,Qa),Qa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,er(Ml,Qa),Qa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,er(Ml,Qa),Qa|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,er(Ml,Qa),Qa|=a;return Aa(e,t,s,r),t.child}function jT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ky(e,t,r,a,s){var i=Ka(r)?Po:Oa.current;return i=nc(t,i),Vl(t,s),r=cb(e,t,r,a,i,s),a=ub(),e!==null&&!Ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(cr&&a&&Q1(t),t.flags|=1,Aa(e,t,r,s),t.child)}function Mj(e,t,r,a,s){if(Ka(r)){var i=!0;hm(t)}else i=!1;if(Vl(t,s),t.stateNode===null)Z0(e,t),yT(t,r,a),jy(t,r,a,s),a=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=In(u):(u=Ka(r)?Po:Oa.current,u=nc(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==u)&&Tj(t,o,a,u),ui=!1;var m=t.memoizedState;o.state=m,vm(t,a,o,s),c=t.memoizedState,l!==a||m!==c||qa.current||ui?(typeof d=="function"&&(Ny(t,r,d,a),c=t.memoizedState),(l=ui||_j(t,r,l,a,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),o.props=a,o.state=c,o.context=u,a=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,Q4(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:qn(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=In(c):(c=Ka(r)?Po:Oa.current,c=nc(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Tj(t,o,a,c),ui=!1,m=t.memoizedState,o.state=m,vm(t,a,o,s);var y=t.memoizedState;l!==f||m!==y||qa.current||ui?(typeof p=="function"&&(Ny(t,r,p,a),y=t.memoizedState),(u=ui||_j(t,r,u,a,m,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=y),o.props=a,o.state=y,o.context=c,a=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Cy(e,t,r,a,i,s)}function Cy(e,t,r,a,s,i){jT(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return s&&bj(t,r,!1),Vs(e,t,i);a=t.stateNode,pF.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=ic(t,e.child,null,i),t.child=ic(t,null,l,i)):Aa(e,t,l,i),t.memoizedState=a.state,s&&bj(t,r,!0),t.child}function ST(e){var t=e.stateNode;t.pendingContext?vj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vj(e,t.context,!1),sb(e,t.containerInfo)}function Fj(e,t,r,a,s){return sc(),Z1(s),t.flags|=256,Aa(e,t,r,a),t.child}var Oy={dehydrated:null,treeContext:null,retryLane:0};function _y(e){return{baseLanes:e,cachePool:null,transitions:null}}function kT(e,t,r){var a=t.pendingProps,s=hr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),er(hr,s&1),e===null)return by(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ox(o,a,0,null),e=So(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=_y(r),t.memoizedState=Oy,e):mb(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gF(e,t,o,a,l,s,r);if(i){i=a.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:a.children};return!(o&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ei(s,c),a.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ei(l,i):(i=So(i,o,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=e.child.memoizedState,o=o===null?_y(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Oy,a}return i=e.child,e=i.sibling,a=Ei(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function mb(e,t){return t=ox({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function f0(e,t,r,a){return a!==null&&Z1(a),ic(t,e.child,null,r),e=mb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gF(e,t,r,a,s,i,o){if(r)return t.flags&256?(t.flags&=-257,a=Bp(Error(Ae(422))),f0(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,s=t.mode,a=ox({mode:"visible",children:a.children},s,0,null),i=So(i,s,o,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&ic(t,e.child,null,o),t.child.memoizedState=_y(o),t.memoizedState=Oy,i);if(!(t.mode&1))return f0(e,t,o,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var l=a.dgst;return a=l,i=Error(Ae(419)),a=Bp(i,a,void 0),f0(e,t,o,a)}if(l=(o&e.childLanes)!==0,Ua||l){if(a=Zr,a!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ks(e,s),es(a,e,s,-1))}return vb(),a=Bp(Error(Ae(421))),f0(e,t,o,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=EF.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,an=Ci(s.nextSibling),nn=t,cr=!0,Hn=null,e!==null&&(Sn[kn++]=_s,Sn[kn++]=Ts,Sn[kn++]=Do,_s=e.id,Ts=e.overflow,Do=t),t=mb(t,a.children),t.flags|=4096,t)}function Rj(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),wy(e.return,t,r)}function Up(e,t,r,a,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=s)}function CT(e,t,r){var a=t.pendingProps,s=a.revealOrder,i=a.tail;if(Aa(e,t,a.children,r),a=hr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rj(e,r,t);else if(e.tag===19)Rj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(er(hr,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&bm(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Up(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bm(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Up(t,!0,r,null,i);break;case"together":Up(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Z0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ae(153));if(t.child!==null){for(e=t.child,r=Ei(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ei(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function yF(e,t,r){switch(t.tag){case 3:ST(t),sc();break;case 5:J4(t);break;case 1:Ka(t.type)&&hm(t);break;case 4:sb(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;er(gm,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(er(hr,hr.current&1),t.flags|=128,null):r&t.child.childLanes?kT(e,t,r):(er(hr,hr.current&1),e=Vs(e,t,r),e!==null?e.sibling:null);er(hr,hr.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return CT(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),er(hr,hr.current),a)break;return null;case 22:case 23:return t.lanes=0,NT(e,t,r)}return Vs(e,t,r)}var OT,Ty,_T,TT;OT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ty=function(){};_T=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,yo(hs.current);var i=null;switch(r){case"input":s=Qg(e,s),a=Qg(e,a),i=[];break;case"select":s=gr({},s,{value:void 0}),a=gr({},a,{value:void 0}),i=[];break;case"textarea":s=ey(e,s),a=ey(e,a),i=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=fm)}ry(r,a);var o;r=null;for(u in s)if(!a.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(sd.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in a){var c=a[u];if(l=s!=null?s[u]:void 0,a.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(sd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&rr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};TT=function(e,t,r,a){r!==a&&(t.flags|=4)};function hu(e,t){if(!cr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ha(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function vF(e,t,r){var a=t.pendingProps;switch(J1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ha(t),null;case 1:return Ka(t.type)&&mm(),ha(t),null;case 3:return a=t.stateNode,oc(),ir(qa),ir(Oa),ob(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(u0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hn!==null&&(Ry(Hn),Hn=null))),Ty(e,t),ha(t),null;case 5:ib(t);var s=yo(gd.current);if(r=t.type,e!==null&&t.stateNode!=null)_T(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ae(166));return ha(t),null}if(e=yo(hs.current),u0(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[us]=t,a[xd]=i,e=(t.mode&1)!==0,r){case"dialog":rr("cancel",a),rr("close",a);break;case"iframe":case"object":case"embed":rr("load",a);break;case"video":case"audio":for(s=0;s<Eu.length;s++)rr(Eu[s],a);break;case"source":rr("error",a);break;case"img":case"image":case"link":rr("error",a),rr("load",a);break;case"details":rr("toggle",a);break;case"input":zN(a,i),rr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},rr("invalid",a);break;case"textarea":GN(a,i),rr("invalid",a)}ry(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?a.textContent!==l&&(i.suppressHydrationWarning!==!0&&c0(a.textContent,l,e),s=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&c0(a.textContent,l,e),s=["children",""+l]):sd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&rr("scroll",a)}switch(r){case"input":t0(a),HN(a,i,!0);break;case"textarea":t0(a),XN(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=fm)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=a4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(r,{is:a.is}):(e=o.createElement(r),r==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,r),e[us]=t,e[xd]=a,OT(e,t,!1,!1),t.stateNode=e;e:{switch(o=ay(r,a),r){case"dialog":rr("cancel",e),rr("close",e),s=a;break;case"iframe":case"object":case"embed":rr("load",e),s=a;break;case"video":case"audio":for(s=0;s<Eu.length;s++)rr(Eu[s],e);s=a;break;case"source":rr("error",e),s=a;break;case"img":case"image":case"link":rr("error",e),rr("load",e),s=a;break;case"details":rr("toggle",e),s=a;break;case"input":zN(e,a),s=Qg(e,a),rr("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=gr({},a,{value:void 0}),rr("invalid",e);break;case"textarea":GN(e,a),s=ey(e,a),rr("invalid",e);break;default:s=a}ry(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?i4(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&n4(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&id(e,c):typeof c=="number"&&id(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rr("scroll",e):c!=null&&R1(e,i,c,o))}switch(r){case"input":t0(e),HN(e,a,!1);break;case"textarea":t0(e),XN(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ii(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?Ul(e,!!a.multiple,i,!1):a.defaultValue!=null&&Ul(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=fm)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ha(t),null;case 6:if(e&&t.stateNode!=null)TT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ae(166));if(r=yo(gd.current),yo(hs.current),u0(t)){if(a=t.stateNode,r=t.memoizedProps,a[us]=t,(i=a.nodeValue!==r)&&(e=nn,e!==null))switch(e.tag){case 3:c0(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&c0(a.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[us]=t,t.stateNode=a}return ha(t),null;case 13:if(ir(hr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cr&&an!==null&&t.mode&1&&!(t.flags&128))H4(),sc(),t.flags|=98560,i=!1;else if(i=u0(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(Ae(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ae(317));i[us]=t}else sc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ha(t),i=!1}else Hn!==null&&(Ry(Hn),Hn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||hr.current&1?Wr===0&&(Wr=3):vb())),t.updateQueue!==null&&(t.flags|=4),ha(t),null);case 4:return oc(),Ty(e,t),e===null&&md(t.stateNode.containerInfo),ha(t),null;case 10:return rb(t.type._context),ha(t),null;case 17:return Ka(t.type)&&mm(),ha(t),null;case 19:if(ir(hr),i=t.memoizedState,i===null)return ha(t),null;if(a=(t.flags&128)!==0,o=i.rendering,o===null)if(a)hu(i,!1);else{if(Wr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bm(e),o!==null){for(t.flags|=128,hu(i,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return er(hr,hr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Or()>cc&&(t.flags|=128,a=!0,hu(i,!1),t.lanes=4194304)}else{if(!a)if(e=bm(o),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!cr)return ha(t),null}else 2*Or()-i.renderingStartTime>cc&&r!==1073741824&&(t.flags|=128,a=!0,hu(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Or(),t.sibling=null,r=hr.current,er(hr,a?r&1|2:r&1),t):(ha(t),null);case 22:case 23:return yb(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Qa&1073741824&&(ha(t),t.subtreeFlags&6&&(t.flags|=8192)):ha(t),null;case 24:return null;case 25:return null}throw Error(Ae(156,t.tag))}function bF(e,t){switch(J1(t),t.tag){case 1:return Ka(t.type)&&mm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oc(),ir(qa),ir(Oa),ob(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ib(t),null;case 13:if(ir(hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ae(340));sc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ir(hr),null;case 4:return oc(),null;case 10:return rb(t.type._context),null;case 22:case 23:return yb(),null;case 24:return null;default:return null}}var m0=!1,va=!1,wF=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Il(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){vr(e,t,a)}else r.current=null}function Ey(e,t,r){try{r()}catch(a){vr(e,t,a)}}var Lj=!1;function NF(e,t){if(my=cm,e=I4(),Y1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||a!==0&&f.nodeType!==3||(c=o+a),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===a&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(hy={focusedElem:e,selectionRange:r},cm=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){t=qe;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var h=y.memoizedProps,b=y.memoizedState,N=t.stateNode,S=N.getSnapshotBeforeUpdate(t.elementType===t.type?h:qn(t.type,h),b);N.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(x){vr(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}return y=Lj,Lj=!1,y}function qu(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ey(t,r,i)}s=s.next}while(s!==a)}}function sx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Ay(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ET(e){var t=e.alternate;t!==null&&(e.alternate=null,ET(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[us],delete t[xd],delete t[gy],delete t[nF],delete t[sF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AT(e){return e.tag===5||e.tag===3||e.tag===4}function $j(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Py(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=fm));else if(a!==4&&(e=e.child,e!==null))for(Py(e,t,r),e=e.sibling;e!==null;)Py(e,t,r),e=e.sibling}function Dy(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Dy(e,t,r),e=e.sibling;e!==null;)Dy(e,t,r),e=e.sibling}var ia=null,Kn=!1;function si(e,t,r){for(r=r.child;r!==null;)PT(e,t,r),r=r.sibling}function PT(e,t,r){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(Qh,r)}catch{}switch(r.tag){case 5:va||Il(r,t);case 6:var a=ia,s=Kn;ia=null,si(e,t,r),ia=a,Kn=s,ia!==null&&(Kn?(e=ia,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ia.removeChild(r.stateNode));break;case 18:ia!==null&&(Kn?(e=ia,r=r.stateNode,e.nodeType===8?Ip(e.parentNode,r):e.nodeType===1&&Ip(e,r),ud(e)):Ip(ia,r.stateNode));break;case 4:a=ia,s=Kn,ia=r.stateNode.containerInfo,Kn=!0,si(e,t,r),ia=a,Kn=s;break;case 0:case 11:case 14:case 15:if(!va&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ey(r,t,o),s=s.next}while(s!==a)}si(e,t,r);break;case 1:if(!va&&(Il(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(l){vr(r,t,l)}si(e,t,r);break;case 21:si(e,t,r);break;case 22:r.mode&1?(va=(a=va)||r.memoizedState!==null,si(e,t,r),va=a):si(e,t,r);break;default:si(e,t,r)}}function Bj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new wF),t.forEach(function(a){var s=AF.bind(null,e,a);r.has(a)||(r.add(a),a.then(s,s))})}}function Bn(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ia=l.stateNode,Kn=!1;break e;case 3:ia=l.stateNode.containerInfo,Kn=!0;break e;case 4:ia=l.stateNode.containerInfo,Kn=!0;break e}l=l.return}if(ia===null)throw Error(Ae(160));PT(i,o,s),ia=null,Kn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){vr(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)DT(t,e),t=t.sibling}function DT(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bn(t,e),ss(e),a&4){try{qu(3,e,e.return),sx(3,e)}catch(h){vr(e,e.return,h)}try{qu(5,e,e.return)}catch(h){vr(e,e.return,h)}}break;case 1:Bn(t,e),ss(e),a&512&&r!==null&&Il(r,r.return);break;case 5:if(Bn(t,e),ss(e),a&512&&r!==null&&Il(r,r.return),e.flags&32){var s=e.stateNode;try{id(s,"")}catch(h){vr(e,e.return,h)}}if(a&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&t4(s,i),ay(l,o);var u=ay(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?i4(s,f):d==="dangerouslySetInnerHTML"?n4(s,f):d==="children"?id(s,f):R1(s,d,f,u)}switch(l){case"input":Jg(s,i);break;case"textarea":r4(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ul(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ul(s,!!i.multiple,i.defaultValue,!0):Ul(s,!!i.multiple,i.multiple?[]:"",!1))}s[xd]=i}catch(h){vr(e,e.return,h)}}break;case 6:if(Bn(t,e),ss(e),a&4){if(e.stateNode===null)throw Error(Ae(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){vr(e,e.return,h)}}break;case 3:if(Bn(t,e),ss(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{ud(t.containerInfo)}catch(h){vr(e,e.return,h)}break;case 4:Bn(t,e),ss(e);break;case 13:Bn(t,e),ss(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pb=Or())),a&4&&Bj(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(va=(u=va)||d,Bn(t,e),va=u):Bn(t,e),ss(e),a&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(qe=e,d=e.child;d!==null;){for(f=qe=d;qe!==null;){switch(m=qe,p=m.child,m.tag){case 0:case 11:case 14:case 15:qu(4,m,m.return);break;case 1:Il(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){a=m,r=m.return;try{t=a,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(h){vr(a,r,h)}}break;case 5:Il(m,m.return);break;case 22:if(m.memoizedState!==null){Wj(f);continue}}p!==null?(p.return=m,qe=p):Wj(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=s4("display",o))}catch(h){vr(e,e.return,h)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(h){vr(e,e.return,h)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bn(t,e),ss(e),a&4&&Bj(e);break;case 21:break;default:Bn(t,e),ss(e)}}function ss(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(AT(r)){var a=r;break e}r=r.return}throw Error(Ae(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(id(s,""),a.flags&=-33);var i=$j(e);Dy(e,i,s);break;case 3:case 4:var o=a.stateNode.containerInfo,l=$j(e);Py(e,l,o);break;default:throw Error(Ae(161))}}catch(c){vr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jF(e,t,r){qe=e,IT(e)}function IT(e,t,r){for(var a=(e.mode&1)!==0;qe!==null;){var s=qe,i=s.child;if(s.tag===22&&a){var o=s.memoizedState!==null||m0;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||va;l=m0;var u=va;if(m0=o,(va=c)&&!u)for(qe=s;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?qj(s):c!==null?(c.return=o,qe=c):qj(s);for(;i!==null;)qe=i,IT(i),i=i.sibling;qe=s,m0=l,va=u}Uj(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,qe=i):Uj(e)}}function Uj(e){for(;qe!==null;){var t=qe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:va||sx(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!va)if(r===null)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:qn(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&kj(t,i,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}kj(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ud(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}va||t.flags&512&&Ay(t)}catch(m){vr(t,t.return,m)}}if(t===e){qe=null;break}if(r=t.sibling,r!==null){r.return=t.return,qe=r;break}qe=t.return}}function Wj(e){for(;qe!==null;){var t=qe;if(t===e){qe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,qe=r;break}qe=t.return}}function qj(e){for(;qe!==null;){var t=qe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{sx(4,t)}catch(c){vr(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(c){vr(t,s,c)}}var i=t.return;try{Ay(t)}catch(c){vr(t,i,c)}break;case 5:var o=t.return;try{Ay(t)}catch(c){vr(t,o,c)}}}catch(c){vr(t,t.return,c)}if(t===e){qe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,qe=l;break}qe=t.return}}var SF=Math.ceil,jm=Ys.ReactCurrentDispatcher,hb=Ys.ReactCurrentOwner,Tn=Ys.ReactCurrentBatchConfig,Et=0,Zr=null,Mr=null,ua=0,Qa=0,Ml=Wi(0),Wr=0,wd=null,Mo=0,ix=0,xb=0,Ku=null,Ba=null,pb=0,cc=1/0,Cs=null,Sm=!1,Iy=null,_i=null,h0=!1,pi=null,km=0,Vu=0,My=null,em=-1,tm=0;function Ma(){return Et&6?Or():em!==-1?em:em=Or()}function Ti(e){return e.mode&1?Et&2&&ua!==0?ua&-ua:oF.transition!==null?(tm===0&&(tm=y4()),tm):(e=qt,e!==0||(e=window.event,e=e===void 0?16:k4(e.type)),e):1}function es(e,t,r,a){if(50<Vu)throw Vu=0,My=null,Error(Ae(185));Of(e,r,a),(!(Et&2)||e!==Zr)&&(e===Zr&&(!(Et&2)&&(ix|=r),Wr===4&&mi(e,ua)),Va(e,a),r===1&&Et===0&&!(t.mode&1)&&(cc=Or()+500,rx&&qi()))}function Va(e,t){var r=e.callbackNode;oM(e,t);var a=lm(e,e===Zr?ua:0);if(a===0)r!==null&&JN(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&JN(r),t===1)e.tag===0?iF(Kj.bind(null,e)):K4(Kj.bind(null,e)),rF(function(){!(Et&6)&&qi()}),r=null;else{switch(v4(a)){case 1:r=W1;break;case 4:r=p4;break;case 16:r=om;break;case 536870912:r=g4;break;default:r=om}r=WT(r,MT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function MT(e,t){if(em=-1,tm=0,Et&6)throw Error(Ae(327));var r=e.callbackNode;if(zl()&&e.callbackNode!==r)return null;var a=lm(e,e===Zr?ua:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Cm(e,a);else{t=a;var s=Et;Et|=2;var i=RT();(Zr!==e||ua!==t)&&(Cs=null,cc=Or()+500,jo(e,t));do try{OF();break}catch(l){FT(e,l)}while(1);tb(),jm.current=i,Et=s,Mr!==null?t=0:(Zr=null,ua=0,t=Wr)}if(t!==0){if(t===2&&(s=ly(e),s!==0&&(a=s,t=Fy(e,s))),t===1)throw r=wd,jo(e,0),mi(e,a),Va(e,Or()),r;if(t===6)mi(e,a);else{if(s=e.current.alternate,!(a&30)&&!kF(s)&&(t=Cm(e,a),t===2&&(i=ly(e),i!==0&&(a=i,t=Fy(e,i))),t===1))throw r=wd,jo(e,0),mi(e,a),Va(e,Or()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(Ae(345));case 2:co(e,Ba,Cs);break;case 3:if(mi(e,a),(a&130023424)===a&&(t=pb+500-Or(),10<t)){if(lm(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){Ma(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=py(co.bind(null,e,Ba,Cs),t);break}co(e,Ba,Cs);break;case 4:if(mi(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var o=31-Zn(a);i=1<<o,o=t[o],o>s&&(s=o),a&=~i}if(a=s,a=Or()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*SF(a/1960))-a,10<a){e.timeoutHandle=py(co.bind(null,e,Ba,Cs),a);break}co(e,Ba,Cs);break;case 5:co(e,Ba,Cs);break;default:throw Error(Ae(329))}}}return Va(e,Or()),e.callbackNode===r?MT.bind(null,e):null}function Fy(e,t){var r=Ku;return e.current.memoizedState.isDehydrated&&(jo(e,t).flags|=256),e=Cm(e,t),e!==2&&(t=Ba,Ba=r,t!==null&&Ry(t)),e}function Ry(e){Ba===null?Ba=e:Ba.push.apply(Ba,e)}function kF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var s=r[a],i=s.getSnapshot;s=s.value;try{if(!as(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mi(e,t){for(t&=~xb,t&=~ix,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zn(t),a=1<<r;e[r]=-1,t&=~a}}function Kj(e){if(Et&6)throw Error(Ae(327));zl();var t=lm(e,0);if(!(t&1))return Va(e,Or()),null;var r=Cm(e,t);if(e.tag!==0&&r===2){var a=ly(e);a!==0&&(t=a,r=Fy(e,a))}if(r===1)throw r=wd,jo(e,0),mi(e,t),Va(e,Or()),r;if(r===6)throw Error(Ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,co(e,Ba,Cs),Va(e,Or()),null}function gb(e,t){var r=Et;Et|=1;try{return e(t)}finally{Et=r,Et===0&&(cc=Or()+500,rx&&qi())}}function Fo(e){pi!==null&&pi.tag===0&&!(Et&6)&&zl();var t=Et;Et|=1;var r=Tn.transition,a=qt;try{if(Tn.transition=null,qt=1,e)return e()}finally{qt=a,Tn.transition=r,Et=t,!(Et&6)&&qi()}}function yb(){Qa=Ml.current,ir(Ml)}function jo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,tF(r)),Mr!==null)for(r=Mr.return;r!==null;){var a=r;switch(J1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&mm();break;case 3:oc(),ir(qa),ir(Oa),ob();break;case 5:ib(a);break;case 4:oc();break;case 13:ir(hr);break;case 19:ir(hr);break;case 10:rb(a.type._context);break;case 22:case 23:yb()}r=r.return}if(Zr=e,Mr=e=Ei(e.current,null),ua=Qa=t,Wr=0,wd=null,xb=ix=Mo=0,Ba=Ku=null,go!==null){for(t=0;t<go.length;t++)if(r=go[t],a=r.interleaved,a!==null){r.interleaved=null;var s=a.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,a.next=o}r.pending=a}go=null}return e}function FT(e,t){do{var r=Mr;try{if(tb(),Q0.current=Nm,wm){for(var a=pr.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}wm=!1}if(Io=0,Xr=Br=pr=null,Wu=!1,yd=0,hb.current=null,r===null||r.return===null){Wr=1,wd=t,Mr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=ua,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Aj(o);if(p!==null){p.flags&=-257,Pj(p,o,l,i,t),p.mode&1&&Ej(i,u,t),t=p,c=u;var y=t.updateQueue;if(y===null){var h=new Set;h.add(c),t.updateQueue=h}else y.add(c);break e}else{if(!(t&1)){Ej(i,u,t),vb();break e}c=Error(Ae(426))}}else if(cr&&l.mode&1){var b=Aj(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Pj(b,o,l,i,t),Z1(lc(c,l));break e}}i=c=lc(c,l),Wr!==4&&(Wr=2),Ku===null?Ku=[i]:Ku.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var N=vT(i,c,t);Sj(i,N);break e;case 1:l=c;var S=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(_i===null||!_i.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=bT(i,l,t);Sj(i,x);break e}}i=i.return}while(i!==null)}$T(r)}catch(g){t=g,Mr===r&&r!==null&&(Mr=r=r.return);continue}break}while(1)}function RT(){var e=jm.current;return jm.current=Nm,e===null?Nm:e}function vb(){(Wr===0||Wr===3||Wr===2)&&(Wr=4),Zr===null||!(Mo&268435455)&&!(ix&268435455)||mi(Zr,ua)}function Cm(e,t){var r=Et;Et|=2;var a=RT();(Zr!==e||ua!==t)&&(Cs=null,jo(e,t));do try{CF();break}catch(s){FT(e,s)}while(1);if(tb(),Et=r,jm.current=a,Mr!==null)throw Error(Ae(261));return Zr=null,ua=0,Wr}function CF(){for(;Mr!==null;)LT(Mr)}function OF(){for(;Mr!==null&&!JI();)LT(Mr)}function LT(e){var t=UT(e.alternate,e,Qa);e.memoizedProps=e.pendingProps,t===null?$T(e):Mr=t,hb.current=null}function $T(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=bF(r,t),r!==null){r.flags&=32767,Mr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wr=6,Mr=null;return}}else if(r=vF(r,t,Qa),r!==null){Mr=r;return}if(t=t.sibling,t!==null){Mr=t;return}Mr=t=e}while(t!==null);Wr===0&&(Wr=5)}function co(e,t,r){var a=qt,s=Tn.transition;try{Tn.transition=null,qt=1,_F(e,t,r,a)}finally{Tn.transition=s,qt=a}return null}function _F(e,t,r,a){do zl();while(pi!==null);if(Et&6)throw Error(Ae(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ae(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(lM(e,i),e===Zr&&(Mr=Zr=null,ua=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||h0||(h0=!0,WT(om,function(){return zl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Tn.transition,Tn.transition=null;var o=qt;qt=1;var l=Et;Et|=4,hb.current=null,NF(e,r),DT(r,e),GM(hy),cm=!!my,hy=my=null,e.current=r,jF(r),ZI(),Et=l,qt=o,Tn.transition=i}else e.current=r;if(h0&&(h0=!1,pi=e,km=s),i=e.pendingLanes,i===0&&(_i=null),rM(r.stateNode),Va(e,Or()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(Sm)throw Sm=!1,e=Iy,Iy=null,e;return km&1&&e.tag!==0&&zl(),i=e.pendingLanes,i&1?e===My?Vu++:(Vu=0,My=e):Vu=0,qi(),null}function zl(){if(pi!==null){var e=v4(km),t=Tn.transition,r=qt;try{if(Tn.transition=null,qt=16>e?16:e,pi===null)var a=!1;else{if(e=pi,pi=null,km=0,Et&6)throw Error(Ae(331));var s=Et;for(Et|=4,qe=e.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(qe=u;qe!==null;){var d=qe;switch(d.tag){case 0:case 11:case 15:qu(8,d,i)}var f=d.child;if(f!==null)f.return=d,qe=f;else for(;qe!==null;){d=qe;var m=d.sibling,p=d.return;if(ET(d),d===u){qe=null;break}if(m!==null){m.return=p,qe=m;break}qe=p}}}var y=i.alternate;if(y!==null){var h=y.child;if(h!==null){y.child=null;do{var b=h.sibling;h.sibling=null,h=b}while(h!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qu(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,qe=N;break e}qe=i.return}}var S=e.current;for(qe=S;qe!==null;){o=qe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,qe=v;else e:for(o=S;qe!==null;){if(l=qe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sx(9,l)}}catch(g){vr(l,l.return,g)}if(l===o){qe=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,qe=x;break e}qe=l.return}}if(Et=s,qi(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(Qh,e)}catch{}a=!0}return a}finally{qt=r,Tn.transition=t}}return!1}function Vj(e,t,r){t=lc(r,t),t=vT(e,t,1),e=Oi(e,t,1),t=Ma(),e!==null&&(Of(e,1,t),Va(e,t))}function vr(e,t,r){if(e.tag===3)Vj(e,e,r);else for(;t!==null;){if(t.tag===3){Vj(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(_i===null||!_i.has(a))){e=lc(r,e),e=bT(t,e,1),t=Oi(t,e,1),e=Ma(),t!==null&&(Of(t,1,e),Va(t,e));break}}t=t.return}}function TF(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Ma(),e.pingedLanes|=e.suspendedLanes&r,Zr===e&&(ua&r)===r&&(Wr===4||Wr===3&&(ua&130023424)===ua&&500>Or()-pb?jo(e,0):xb|=r),Va(e,t)}function BT(e,t){t===0&&(e.mode&1?(t=n0,n0<<=1,!(n0&130023424)&&(n0=4194304)):t=1);var r=Ma();e=Ks(e,t),e!==null&&(Of(e,t,r),Va(e,r))}function EF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),BT(e,r)}function AF(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Ae(314))}a!==null&&a.delete(t),BT(e,r)}var UT;UT=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||qa.current)Ua=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ua=!1,yF(e,t,r);Ua=!!(e.flags&131072)}else Ua=!1,cr&&t.flags&1048576&&V4(t,pm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Z0(e,t),e=t.pendingProps;var s=nc(t,Oa.current);Vl(t,r),s=cb(null,t,a,e,s,r);var i=ub();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ka(a)?(i=!0,hm(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nb(t),s.updater=nx,t.stateNode=s,s._reactInternals=t,jy(t,a,e,r),t=Cy(null,t,a,!0,i,r)):(t.tag=0,cr&&i&&Q1(t),Aa(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Z0(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=DF(a),e=qn(a,e),s){case 0:t=ky(null,t,a,e,r);break e;case 1:t=Mj(null,t,a,e,r);break e;case 11:t=Dj(null,t,a,e,r);break e;case 14:t=Ij(null,t,a,qn(a.type,e),r);break e}throw Error(Ae(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),ky(e,t,a,s,r);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),Mj(e,t,a,s,r);case 3:e:{if(ST(t),e===null)throw Error(Ae(387));a=t.pendingProps,i=t.memoizedState,s=i.element,Q4(e,t),vm(t,a,null,r);var o=t.memoizedState;if(a=o.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=lc(Error(Ae(423)),t),t=Fj(e,t,a,r,s);break e}else if(a!==s){s=lc(Error(Ae(424)),t),t=Fj(e,t,a,r,s);break e}else for(an=Ci(t.stateNode.containerInfo.firstChild),nn=t,cr=!0,Hn=null,r=X4(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(sc(),a===s){t=Vs(e,t,r);break e}Aa(e,t,a,r)}t=t.child}return t;case 5:return J4(t),e===null&&by(t),a=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,xy(a,s)?o=null:i!==null&&xy(a,i)&&(t.flags|=32),jT(e,t),Aa(e,t,o,r),t.child;case 6:return e===null&&by(t),null;case 13:return kT(e,t,r);case 4:return sb(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ic(t,null,a,r):Aa(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),Dj(e,t,a,s,r);case 7:return Aa(e,t,t.pendingProps,r),t.child;case 8:return Aa(e,t,t.pendingProps.children,r),t.child;case 12:return Aa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,er(gm,a._currentValue),a._currentValue=o,i!==null)if(as(i.value,o)){if(i.children===s.children&&!qa.current){t=Vs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Is(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),wy(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ae(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),wy(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Aa(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Vl(t,r),s=In(s),a=a(s),t.flags|=1,Aa(e,t,a,r),t.child;case 14:return a=t.type,s=qn(a,t.pendingProps),s=qn(a.type,s),Ij(e,t,a,s,r);case 15:return wT(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:qn(a,s),Z0(e,t),t.tag=1,Ka(a)?(e=!0,hm(t)):e=!1,Vl(t,r),yT(t,a,s),jy(t,a,s,r),Cy(null,t,a,!0,e,r);case 19:return CT(e,t,r);case 22:return NT(e,t,r)}throw Error(Ae(156,t.tag))};function WT(e,t){return x4(e,t)}function PF(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(e,t,r,a){return new PF(e,t,r,a)}function bb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function DF(e){if(typeof e=="function")return bb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$1)return 11;if(e===B1)return 14}return 2}function Ei(e,t){var r=e.alternate;return r===null?(r=Cn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function rm(e,t,r,a,s,i){var o=2;if(a=e,typeof e=="function")bb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case kl:return So(r.children,s,i,t);case L1:o=8,s|=8;break;case Hg:return e=Cn(12,r,t,s|2),e.elementType=Hg,e.lanes=i,e;case Gg:return e=Cn(13,r,t,s),e.elementType=Gg,e.lanes=i,e;case Xg:return e=Cn(19,r,t,s),e.elementType=Xg,e.lanes=i,e;case J_:return ox(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y_:o=10;break e;case Q_:o=9;break e;case $1:o=11;break e;case B1:o=14;break e;case ci:o=16,a=null;break e}throw Error(Ae(130,e==null?e:typeof e,""))}return t=Cn(o,r,t,s),t.elementType=e,t.type=a,t.lanes=i,t}function So(e,t,r,a){return e=Cn(7,e,a,t),e.lanes=r,e}function ox(e,t,r,a){return e=Cn(22,e,a,t),e.elementType=J_,e.lanes=r,e.stateNode={isHidden:!1},e}function Wp(e,t,r){return e=Cn(6,e,null,t),e.lanes=r,e}function qp(e,t,r){return t=Cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IF(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jp(0),this.expirationTimes=jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jp(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wb(e,t,r,a,s,i,o,l,c){return e=new IF(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Cn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nb(i),e}function MF(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function qT(e){if(!e)return Mi;e=e._reactInternals;e:{if(Zo(e)!==e||e.tag!==1)throw Error(Ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ka(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ae(171))}if(e.tag===1){var r=e.type;if(Ka(r))return q4(e,r,t)}return t}function KT(e,t,r,a,s,i,o,l,c){return e=wb(r,a,!0,e,s,i,o,l,c),e.context=qT(null),r=e.current,a=Ma(),s=Ti(r),i=Is(a,s),i.callback=t??null,Oi(r,i,s),e.current.lanes=s,Of(e,s,a),Va(e,a),e}function lx(e,t,r,a){var s=t.current,i=Ma(),o=Ti(s);return r=qT(r),t.context===null?t.context=r:t.pendingContext=r,t=Is(i,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Oi(s,t,o),e!==null&&(es(e,s,o,i),Y0(e,s,o)),o}function Om(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Nb(e,t){zj(e,t),(e=e.alternate)&&zj(e,t)}function FF(){return null}var VT=typeof reportError=="function"?reportError:function(e){console.error(e)};function jb(e){this._internalRoot=e}cx.prototype.render=jb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ae(409));lx(e,t,null,null)};cx.prototype.unmount=jb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fo(function(){lx(null,e,null,null)}),t[qs]=null}};function cx(e){this._internalRoot=e}cx.prototype.unstable_scheduleHydration=function(e){if(e){var t=N4();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fi.length&&t!==0&&t<fi[r].priority;r++);fi.splice(r,0,e),r===0&&S4(e)}};function Sb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ux(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hj(){}function RF(e,t,r,a,s){if(s){if(typeof a=="function"){var i=a;a=function(){var u=Om(o);i.call(u)}}var o=KT(t,a,e,0,null,!1,!1,"",Hj);return e._reactRootContainer=o,e[qs]=o.current,md(e.nodeType===8?e.parentNode:e),Fo(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var l=a;a=function(){var u=Om(c);l.call(u)}}var c=wb(e,0,!1,null,null,!1,!1,"",Hj);return e._reactRootContainer=c,e[qs]=c.current,md(e.nodeType===8?e.parentNode:e),Fo(function(){lx(t,c,r,a)}),c}function dx(e,t,r,a,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Om(o);l.call(c)}}lx(t,o,e,s)}else o=RF(r,t,e,s,a);return Om(o)}b4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Tu(t.pendingLanes);r!==0&&(q1(t,r|1),Va(t,Or()),!(Et&6)&&(cc=Or()+500,qi()))}break;case 13:Fo(function(){var a=Ks(e,1);if(a!==null){var s=Ma();es(a,e,1,s)}}),Nb(e,1)}};K1=function(e){if(e.tag===13){var t=Ks(e,134217728);if(t!==null){var r=Ma();es(t,e,134217728,r)}Nb(e,134217728)}};w4=function(e){if(e.tag===13){var t=Ti(e),r=Ks(e,t);if(r!==null){var a=Ma();es(r,e,t,a)}Nb(e,t)}};N4=function(){return qt};j4=function(e,t){var r=qt;try{return qt=e,t()}finally{qt=r}};sy=function(e,t,r){switch(t){case"input":if(Jg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=tx(a);if(!s)throw Error(Ae(90));e4(a),Jg(a,s)}}}break;case"textarea":r4(e,r);break;case"select":t=r.value,t!=null&&Ul(e,!!r.multiple,t,!1)}};c4=gb;u4=Fo;var LF={usingClientEntryPoint:!1,Events:[Tf,Tl,tx,o4,l4,gb]},xu={findFiberByHostInstance:po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$F={bundleType:xu.bundleType,version:xu.version,rendererPackageName:xu.rendererPackageName,rendererConfig:xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=m4(e),e===null?null:e.stateNode},findFiberByHostInstance:xu.findFiberByHostInstance||FF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x0.isDisabled&&x0.supportsFiber)try{Qh=x0.inject($F),ms=x0}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LF;fn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sb(t))throw Error(Ae(200));return MF(e,t,null,r)};fn.createRoot=function(e,t){if(!Sb(e))throw Error(Ae(299));var r=!1,a="",s=VT;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=wb(e,1,!1,null,null,r,!1,a,s),e[qs]=t.current,md(e.nodeType===8?e.parentNode:e),new jb(t)};fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ae(188)):(e=Object.keys(e).join(","),Error(Ae(268,e)));return e=m4(t),e=e===null?null:e.stateNode,e};fn.flushSync=function(e){return Fo(e)};fn.hydrate=function(e,t,r){if(!ux(t))throw Error(Ae(200));return dx(null,e,t,!0,r)};fn.hydrateRoot=function(e,t,r){if(!Sb(e))throw Error(Ae(405));var a=r!=null&&r.hydratedSources||null,s=!1,i="",o=VT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=KT(t,null,e,1,r??null,s,!1,i,o),e[qs]=t.current,md(e),a)for(e=0;e<a.length;e++)r=a[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new cx(t)};fn.render=function(e,t,r){if(!ux(t))throw Error(Ae(200));return dx(null,e,t,!1,r)};fn.unmountComponentAtNode=function(e){if(!ux(e))throw Error(Ae(40));return e._reactRootContainer?(Fo(function(){dx(null,null,e,!1,function(){e._reactRootContainer=null,e[qs]=null})}),!0):!1};fn.unstable_batchedUpdates=gb;fn.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!ux(r))throw Error(Ae(200));if(e==null||e._reactInternals===void 0)throw Error(Ae(38));return dx(e,t,r,!1,a)};fn.version="18.3.1-next-f1338f8080-20240426";function zT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zT)}catch(e){console.error(e)}}zT(),z_.exports=fn;var BF=z_.exports,Gj=BF;Vg.createRoot=Gj.createRoot,Vg.hydrateRoot=Gj.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Nd.apply(this,arguments)}var gi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gi||(gi={}));const Xj="popstate";function UF(e){e===void 0&&(e={});function t(s,i){let{pathname:o="/",search:l="",hash:c=""}=el(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ly("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:_m(i))}function a(s,i){kb(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return qF(t,r,a,e)}function Tr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WF(){return Math.random().toString(36).substr(2,8)}function Yj(e,t){return{usr:e.state,key:e.key,idx:t}}function Ly(e,t,r,a){return r===void 0&&(r=null),Nd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?el(t):t,{state:r,key:t&&t.key||a||WF()})}function _m(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function el(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function qF(e,t,r,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l=gi.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Nd({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=gi.Pop;let b=d(),N=b==null?null:b-u;u=b,c&&c({action:l,location:h.location,delta:N})}function m(b,N){l=gi.Push;let S=Ly(h.location,b,N);r&&r(S,b),u=d()+1;let v=Yj(S,u),x=h.createHref(S);try{o.pushState(v,"",x)}catch(g){if(g instanceof DOMException&&g.name==="DataCloneError")throw g;s.location.assign(x)}i&&c&&c({action:l,location:h.location,delta:1})}function p(b,N){l=gi.Replace;let S=Ly(h.location,b,N);r&&r(S,b),u=d();let v=Yj(S,u),x=h.createHref(S);o.replaceState(v,"",x),i&&c&&c({action:l,location:h.location,delta:0})}function y(b){let N=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof b=="string"?b:_m(b);return S=S.replace(/ $/,"%20"),Tr(N,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,N)}let h={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Xj,f),c=b,()=>{s.removeEventListener(Xj,f),c=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let N=y(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:p,go(b){return o.go(b)}};return h}var Qj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Qj||(Qj={}));function KF(e,t,r){return r===void 0&&(r="/"),VF(e,t,r,!1)}function VF(e,t,r,a){let s=typeof t=="string"?el(t):t,i=Cb(s.pathname||"/",r);if(i==null)return null;let o=HT(e);zF(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=a5(i);l=t5(o[c],u,a)}return l}function HT(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Tr(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let u=Ai([a,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Tr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),HT(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:ZF(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of GT(i.path))s(i,o,c)}),t}function GT(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let o=GT(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function zF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:e5(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const HF=/^:[\w-]+$/,GF=3,XF=2,YF=1,QF=10,JF=-2,Jj=e=>e==="*";function ZF(e,t){let r=e.split("/"),a=r.length;return r.some(Jj)&&(a+=JF),t&&(a+=XF),r.filter(s=>!Jj(s)).reduce((s,i)=>s+(HF.test(i)?GF:i===""?YF:QF),a)}function e5(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function t5(e,t,r){r===void 0&&(r=!1);let{routesMeta:a}=e,s={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],u=l===a.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Zj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!a[a.length-1].route.index&&(f=Zj({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ai([i,f.pathname]),pathnameBase:o5(Ai([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ai([i,f.pathnameBase]))}return o}function Zj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=r5(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((u,d,f)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let h=l[f]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const y=l[f];return p&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function r5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),kb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function a5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Cb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function n5(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?el(e):e;return{pathname:r?r.startsWith("/")?r:s5(r,t):t,search:l5(a),hash:c5(s)}}function s5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Kp(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ob(e,t){let r=i5(e);return t?r.map((a,s)=>s===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function _b(e,t,r,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=el(e):(s=Nd({},e),Tr(!s.pathname||!s.pathname.includes("?"),Kp("?","pathname","search",s)),Tr(!s.pathname||!s.pathname.includes("#"),Kp("#","pathname","hash",s)),Tr(!s.search||!s.search.includes("#"),Kp("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!a&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=n5(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ai=e=>e.join("/").replace(/\/\/+/g,"/"),o5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,c5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function u5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const XT=["post","put","patch","delete"];new Set(XT);const d5=["get",...XT];new Set(d5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jd.apply(this,arguments)}const Tb=C.createContext(null),f5=C.createContext(null),Ki=C.createContext(null),fx=C.createContext(null),Qs=C.createContext({outlet:null,matches:[],isDataRoute:!1}),YT=C.createContext(null);function m5(e,t){let{relative:r}=t===void 0?{}:t;Bc()||Tr(!1);let{basename:a,navigator:s}=C.useContext(Ki),{hash:i,pathname:o,search:l}=JT(e,{relative:r}),c=o;return a!=="/"&&(c=o==="/"?a:Ai([a,o])),s.createHref({pathname:c,search:l,hash:i})}function Bc(){return C.useContext(fx)!=null}function Ta(){return Bc()||Tr(!1),C.useContext(fx).location}function QT(e){C.useContext(Ki).static||C.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=C.useContext(Qs);return e?C5():h5()}function h5(){Bc()||Tr(!1);let e=C.useContext(Tb),{basename:t,future:r,navigator:a}=C.useContext(Ki),{matches:s}=C.useContext(Qs),{pathname:i}=Ta(),o=JSON.stringify(Ob(s,r.v7_relativeSplatPath)),l=C.useRef(!1);return QT(()=>{l.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){a.go(u);return}let f=_b(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ai([t,f.pathname])),(d.replace?a.replace:a.push)(f,d.state,d)},[t,a,o,i,e])}function Vi(){let{matches:e}=C.useContext(Qs),t=e[e.length-1];return t?t.params:{}}function JT(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=C.useContext(Ki),{matches:s}=C.useContext(Qs),{pathname:i}=Ta(),o=JSON.stringify(Ob(s,a.v7_relativeSplatPath));return C.useMemo(()=>_b(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function x5(e,t){return p5(e,t)}function p5(e,t,r,a){Bc()||Tr(!1);let{navigator:s}=C.useContext(Ki),{matches:i}=C.useContext(Qs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Ta(),d;if(t){var f;let b=typeof t=="string"?el(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Tr(!1),d=b}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=KF(e,{pathname:p}),h=w5(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ai([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ai([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,a);return t&&h?C.createElement(fx.Provider,{value:{location:jd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gi.Pop}},h):h}function g5(){let e=k5(),t=u5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:s},r):null,i)}const y5=C.createElement(g5,null);class v5 extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?C.createElement(Qs.Provider,{value:this.props.routeContext},C.createElement(YT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b5(e){let{routeContext:t,match:r,children:a}=e,s=C.useContext(Tb);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(Qs.Provider,{value:t},a)}function w5(e,t,r,a){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Tr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=r,y=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let p,y=!1,h=null,b=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,h=f.route.errorElement||y5,c&&(u<0&&m===0?(O5("route-fallback",!1),y=!0,b=null):u===m&&(y=!0,b=f.route.hydrateFallbackElement||null)));let N=t.concat(o.slice(0,m+1)),S=()=>{let v;return p?v=h:y?v=b:f.route.Component?v=C.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=d,C.createElement(b5,{match:f,routeContext:{outlet:d,matches:N,isDataRoute:r!=null},children:v})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?C.createElement(v5,{location:r.location,revalidation:r.revalidation,component:h,error:p,children:S(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):S()},null)}var ZT=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ZT||{}),Tm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tm||{});function N5(e){let t=C.useContext(Tb);return t||Tr(!1),t}function j5(e){let t=C.useContext(f5);return t||Tr(!1),t}function S5(e){let t=C.useContext(Qs);return t||Tr(!1),t}function eE(e){let t=S5(),r=t.matches[t.matches.length-1];return r.route.id||Tr(!1),r.route.id}function k5(){var e;let t=C.useContext(YT),r=j5(Tm.UseRouteError),a=eE(Tm.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function C5(){let{router:e}=N5(ZT.UseNavigateStable),t=eE(Tm.UseNavigateStable),r=C.useRef(!1);return QT(()=>{r.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,jd({fromRouteId:t},i)))},[e,t])}const e2={};function O5(e,t,r){!t&&!e2[e]&&(e2[e]=!0)}function _5(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function tE(e){let{to:t,replace:r,state:a,relative:s}=e;Bc()||Tr(!1);let{future:i,static:o}=C.useContext(Ki),{matches:l}=C.useContext(Qs),{pathname:c}=Ta(),u=lt(),d=_b(t,Ob(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(f),{replace:r,state:a,relative:s}),[u,f,s,r,a]),null}function Pe(e){Tr(!1)}function T5(e){let{basename:t="/",children:r=null,location:a,navigationType:s=gi.Pop,navigator:i,static:o=!1,future:l}=e;Bc()&&Tr(!1);let c=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:c,navigator:i,static:o,future:jd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof a=="string"&&(a=el(a));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:y="default"}=a,h=C.useMemo(()=>{let b=Cb(d,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:p,key:y},navigationType:s}},[c,d,f,m,p,y,s]);return h==null?null:C.createElement(Ki.Provider,{value:u},C.createElement(fx.Provider,{children:r,value:h}))}function Vp(e){let{children:t,location:r}=e;return x5($y(t),r)}new Promise(()=>{});function $y(e,t){t===void 0&&(t=[]);let r=[];return C.Children.forEach(e,(a,s)=>{if(!C.isValidElement(a))return;let i=[...t,s];if(a.type===C.Fragment){r.push.apply(r,$y(a.props.children,i));return}a.type!==Pe&&Tr(!1),!a.props.index||!a.props.children||Tr(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=$y(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},By.apply(this,arguments)}function E5(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function A5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function P5(e,t){return e.button===0&&(!t||t==="_self")&&!A5(e)}const D5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],I5="6";try{window.__reactRouterVersion=I5}catch{}const M5="startTransition",t2=TI[M5];function F5(e){let{basename:t,children:r,future:a,window:s}=e,i=C.useRef();i.current==null&&(i.current=UF({window:s,v5Compat:!0}));let o=i.current,[l,c]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=a||{},d=C.useCallback(f=>{u&&t2?t2(()=>c(f)):c(f)},[c,u]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>_5(a),[a]),C.createElement(T5,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}const R5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,no=C.forwardRef(function(t,r){let{onClick:a,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=E5(t,D5),{basename:p}=C.useContext(Ki),y,h=!1;if(typeof u=="string"&&L5.test(u)&&(y=u,R5))try{let v=new URL(window.location.href),x=u.startsWith("//")?new URL(v.protocol+u):new URL(u),g=Cb(x.pathname,p);x.origin===v.origin&&g!=null?u=g+x.search+x.hash:h=!0}catch{}let b=m5(u,{relative:s}),N=$5(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function S(v){a&&a(v),v.defaultPrevented||N(v)}return C.createElement("a",By({},m,{href:y||b,onClick:h||i?a:S,ref:r,target:c}))});var r2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(r2||(r2={}));var a2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(a2||(a2={}));function $5(e,t){let{target:r,replace:a,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=lt(),u=Ta(),d=JT(e,{relative:o});return C.useCallback(f=>{if(P5(f,r)){f.preventDefault();let m=a!==void 0?a:_m(u)===_m(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,a,s,r,e,i,o,l])}var B5={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=C;function U5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W5=typeof Object.is=="function"?Object.is:U5,q5=Af.useSyncExternalStore,K5=Af.useRef,V5=Af.useEffect,z5=Af.useMemo,H5=Af.useDebugValue;B5.useSyncExternalStoreWithSelector=function(e,t,r,a,s){var i=K5(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=z5(function(){function c(p){if(!u){if(u=!0,d=p,p=a(p),s!==void 0&&o.hasValue){var y=o.value;if(s(y,p))return f=y}return f=p}if(y=f,W5(d,p))return y;var h=a(p);return s!==void 0&&s(y,h)?(d=p,y):(d=p,f=h)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,a,s]);var l=q5(e,i[0],i[1]);return V5(function(){o.hasValue=!0,o.value=l},[l]),H5(l),l};function G5(e){e()}function X5(){let e=null,t=null;return{clear(){e=null,t=null},notify(){G5(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var n2={notify(){},get:()=>[]};function Y5(e,t){let r,a=n2,s=0,i=!1;function o(h){d();const b=a.subscribe(h);let N=!1;return()=>{N||(N=!0,b(),f())}}function l(){a.notify()}function c(){y.onStateChange&&y.onStateChange()}function u(){return i}function d(){s++,r||(r=t?t.addNestedSub(c):e.subscribe(c),a=X5())}function f(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=n2)}function m(){i||(i=!0,d())}function p(){i&&(i=!1,f())}const y={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>a};return y}var Q5=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",J5=Q5(),Z5=()=>typeof navigator<"u"&&navigator.product==="ReactNative",eR=Z5(),tR=()=>J5||eR?C.useLayoutEffect:C.useEffect,rR=tR(),zp=Symbol.for("react-redux-context"),Hp=typeof globalThis<"u"?globalThis:{};function aR(){if(!C.createContext)return{};const e=Hp[zp]??(Hp[zp]=new Map);let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var nR=aR();function sR(e){const{children:t,context:r,serverState:a,store:s}=e,i=C.useMemo(()=>{const c=Y5(s);return{store:s,subscription:c,getServerState:a?()=>a:void 0}},[s,a]),o=C.useMemo(()=>s.getState(),[s]);rR(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||nR;return C.createElement(l.Provider,{value:i},t)}var iR=sR;function na(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oR=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),s2=oR,Gp=()=>Math.random().toString(36).substring(7).split("").join("."),lR={INIT:`@@redux/INIT${Gp()}`,REPLACE:`@@redux/REPLACE${Gp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gp()}`},Em=lR;function Eb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function rE(e,t,r){if(typeof e!="function")throw new Error(na(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(na(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(na(1));return r(rE)(e,t)}let a=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((b,N)=>{o.set(N,b)}))}function d(){if(c)throw new Error(na(3));return s}function f(b){if(typeof b!="function")throw new Error(na(4));if(c)throw new Error(na(5));let N=!0;u();const S=l++;return o.set(S,b),function(){if(N){if(c)throw new Error(na(6));N=!1,u(),o.delete(S),i=null}}}function m(b){if(!Eb(b))throw new Error(na(7));if(typeof b.type>"u")throw new Error(na(8));if(typeof b.type!="string")throw new Error(na(17));if(c)throw new Error(na(9));try{c=!0,s=a(s,b)}finally{c=!1}return(i=o).forEach(S=>{S()}),b}function p(b){if(typeof b!="function")throw new Error(na(10));a=b,m({type:Em.REPLACE})}function y(){const b=f;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(na(11));function S(){const x=N;x.next&&x.next(d())}return S(),{unsubscribe:b(S)}},[s2](){return this}}}return m({type:Em.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:p,[s2]:y}}function cR(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Em.INIT})>"u")throw new Error(na(12));if(typeof r(void 0,{type:Em.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(na(13))})}function uR(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const a=Object.keys(r);let s;try{cR(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<a.length;d++){const f=a[d],m=r[f],p=o[f],y=m(p,l);if(typeof y>"u")throw l&&l.type,new Error(na(14));u[f]=y,c=c||y!==p}return c=c||a.length!==Object.keys(o).length,c?u:o}}function Am(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function dR(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(na(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=Am(...l)(s.dispatch),{...s,dispatch:i}}}function fR(e){return Eb(e)&&"type"in e&&typeof e.type=="string"}var aE=Symbol.for("immer-nothing"),i2=Symbol.for("immer-draftable"),ln=Symbol.for("immer-state");function Xn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var uc=Object.getPrototypeOf;function Ro(e){return!!e&&!!e[ln]}function zs(e){var t;return e?nE(e)||Array.isArray(e)||!!e[i2]||!!((t=e.constructor)!=null&&t[i2])||Pf(e)||hx(e):!1}var mR=Object.prototype.constructor.toString();function nE(e){if(!e||typeof e!="object")return!1;const t=uc(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===mR}function Pm(e,t){mx(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function mx(e){const t=e[ln];return t?t.type_:Array.isArray(e)?1:Pf(e)?2:hx(e)?3:0}function Uy(e,t){return mx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sE(e,t,r){const a=mx(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function hR(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pf(e){return e instanceof Map}function hx(e){return e instanceof Set}function uo(e){return e.copy_||e.base_}function Wy(e,t){if(Pf(e))return new Map(e);if(hx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=nE(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[ln];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const o=s[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(uc(e),a)}else{const a=uc(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function Ab(e,t=!1){return xx(e)||Ro(e)||!zs(e)||(mx(e)>1&&Object.defineProperties(e,{set:{value:p0},add:{value:p0},clear:{value:p0},delete:{value:p0}}),Object.freeze(e),t&&Object.values(e).forEach(r=>Ab(r,!0))),e}function p0(){Xn(2)}function xx(e){return Object.isFrozen(e)}var xR={};function Lo(e){const t=xR[e];return t||Xn(0,e),t}var Sd;function iE(){return Sd}function pR(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function o2(e,t){t&&(Lo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qy(e){Ky(e),e.drafts_.forEach(gR),e.drafts_=null}function Ky(e){e===Sd&&(Sd=e.parent_)}function l2(e){return Sd=pR(Sd,e)}function gR(e){const t=e[ln];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function c2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ln].modified_&&(qy(t),Xn(4)),zs(e)&&(e=Dm(t,e),t.parent_||Im(t,e)),t.patches_&&Lo("Patches").generateReplacementPatches_(r[ln].base_,e,t.patches_,t.inversePatches_)):e=Dm(t,r,[]),qy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==aE?e:void 0}function Dm(e,t,r){if(xx(t))return t;const a=t[ln];if(!a)return Pm(t,(s,i)=>u2(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return Im(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,o=!1;a.type_===3&&(i=new Set(s),s.clear(),o=!0),Pm(i,(l,c)=>u2(e,a,s,l,c,r,o)),Im(e,s,!1),r&&e.patches_&&Lo("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function u2(e,t,r,a,s,i,o){if(Ro(s)){const l=i&&t&&t.type_!==3&&!Uy(t.assigned_,a)?i.concat(a):void 0,c=Dm(e,s,l);if(sE(r,a,c),Ro(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(zs(s)&&!xx(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Dm(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(Pf(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&Im(e,s)}}function Im(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ab(t,r)}function yR(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:iE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=Pb;r&&(s=[a],i=kd);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return a.draft_=l,a.revoke_=o,l}var Pb={get(e,t){if(t===ln)return e;const r=uo(e);if(!Uy(r,t))return vR(e,r,t);const a=r[t];return e.finalized_||!zs(a)?a:a===Xp(e.base_,t)?(Yp(e),e.copy_[t]=zy(a,e)):a},has(e,t){return t in uo(e)},ownKeys(e){return Reflect.ownKeys(uo(e))},set(e,t,r){const a=oE(uo(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=Xp(uo(e),t),i=s==null?void 0:s[ln];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(hR(r,s)&&(r!==void 0||Uy(e.base_,t)))return!0;Yp(e),Vy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Xp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Yp(e),Vy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=uo(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Xn(11)},getPrototypeOf(e){return uc(e.base_)},setPrototypeOf(){Xn(12)}},kd={};Pm(Pb,(e,t)=>{kd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});kd.deleteProperty=function(e,t){return kd.set.call(this,e,t,void 0)};kd.set=function(e,t,r){return Pb.set.call(this,e[0],t,r,e[0])};function Xp(e,t){const r=e[ln];return(r?uo(r):e)[t]}function vR(e,t,r){var s;const a=oE(t,r);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function oE(e,t){if(!(t in e))return;let r=uc(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=uc(r)}}function Vy(e){e.modified_||(e.modified_=!0,e.parent_&&Vy(e.parent_))}function Yp(e){e.copy_||(e.copy_=Wy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Xn(6),a!==void 0&&typeof a!="function"&&Xn(7);let s;if(zs(t)){const i=l2(this),o=zy(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?qy(i):Ky(i)}return o2(i,a),c2(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===aE&&(s=void 0),this.autoFreeze_&&Ab(s,!0),a){const i=[],o=[];Lo("Patches").generateReplacementPatches_(t,s,i,o),a(i,o)}return s}else Xn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,s;return[this.produce(t,r,(o,l)=>{a=o,s=l}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){zs(e)||Xn(8),Ro(e)&&(e=wR(e));const t=l2(this),r=zy(e,void 0);return r[ln].isManual_=!0,Ky(t),r}finishDraft(e,t){const r=e&&e[ln];(!r||!r.isManual_)&&Xn(9);const{scope_:a}=r;return o2(a,t),c2(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=Lo("Patches").applyPatches_;return Ro(e)?a(e,t):this.produce(e,s=>a(s,t))}};function zy(e,t){const r=Pf(e)?Lo("MapSet").proxyMap_(e,t):hx(e)?Lo("MapSet").proxySet_(e,t):yR(e,t);return(t?t.scope_:iE()).drafts_.push(r),r}function wR(e){return Ro(e)||Xn(10,e),lE(e)}function lE(e){if(!zs(e)||xx(e))return e;const t=e[ln];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Wy(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Wy(e,!0);return Pm(r,(a,s)=>{sE(r,a,lE(s))}),t&&(t.finalized_=!1),r}var NR=new bR,cE=NR.produce;function uE(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var jR=uE(),SR=uE,kR=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Am:Am.apply(null,arguments)};function d2(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(Ms(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>fR(a)&&a.type===e,r}var dE=class Au extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Au.prototype)}static get[Symbol.species](){return Au}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Au(...t[0].concat(this)):new Au(...t.concat(this))}};function f2(e){return zs(e)?cE(e,()=>{}):e}function g0(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function CR(e){return typeof e=="boolean"}var OR=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new dE;return r&&(CR(r)?o.push(jR):o.push(SR(r.extraArgument))),o},_R="RTK_autoBatch",m2=e=>t=>{setTimeout(t,e)},TR=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:m2(10):e.type==="callback"?e.queueNotification:m2(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},a,{subscribe(d){const f=()=>s&&d(),m=a.subscribe(f);return l.add(d),()=>{m(),l.delete(d)}},dispatch(d){var f;try{return s=!((f=d==null?void 0:d.meta)!=null&&f[_R]),i=!s,i&&(o||(o=!0,c(u))),a.dispatch(d)}finally{s=!0}}})},ER=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new dE(e);return a&&s.push(TR(typeof a=="object"?a:void 0)),s};function AR(e){const t=OR(),{reducer:r=void 0,middleware:a,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(Eb(r))c=uR(r);else throw new Error(Ms(1));let u;typeof a=="function"?u=a(t):u=t();let d=Am;s&&(d=kR({trace:!1,...typeof s=="object"&&s}));const f=dR(...u),m=ER(f);let p=typeof l=="function"?l(m):m();const y=d(...p);return rE(c,o,y)}function fE(e){const t={},r=[];let a;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Ms(28));if(l in t)throw new Error(Ms(29));return t[l]=o,s},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function PR(e){return typeof e=="function"}function DR(e,t){let[r,a,s]=fE(t),i;if(PR(e))i=()=>f2(e());else{const l=f2(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...a.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Ro(d)){const p=f(d,c);return p===void 0?d:p}else{if(zs(d))return cE(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},l)}return o.getInitialState=i,o}var IR=Symbol.for("rtk-slice-createasyncthunk");function MR(e,t){return`${e}/${t}`}function FR({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[IR];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Ms(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers($R()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(x,g){const w=typeof x=="string"?x:x.type;if(!w)throw new Error(Ms(12));if(w in u.sliceCaseReducersByType)throw new Error(Ms(13));return u.sliceCaseReducersByType[w]=g,d},addMatcher(x,g){return u.sliceMatchers.push({matcher:x,reducer:g}),d},exposeAction(x,g){return u.actionCreators[x]=g,d},exposeCaseReducer(x,g){return u.sliceCaseReducersByName[x]=g,d}};c.forEach(x=>{const g=l[x],w={reducerName:x,type:MR(i,x),createNotation:typeof s.reducers=="function"};UR(g)?qR(w,g,d,t):BR(w,g,d)});function f(){const[x={},g=[],w=void 0]=typeof s.extraReducers=="function"?fE(s.extraReducers):[s.extraReducers],j={...x,...u.sliceCaseReducersByType};return DR(s.initialState,O=>{for(let _ in j)O.addCase(_,j[_]);for(let _ of u.sliceMatchers)O.addMatcher(_.matcher,_.reducer);for(let _ of g)O.addMatcher(_.matcher,_.reducer);w&&O.addDefaultCase(w)})}const m=x=>x,p=new Map,y=new WeakMap;let h;function b(x,g){return h||(h=f()),h(x,g)}function N(){return h||(h=f()),h.getInitialState()}function S(x,g=!1){function w(O){let _=O[x];return typeof _>"u"&&g&&(_=g0(y,w,N)),_}function j(O=m){const _=g0(p,g,()=>new WeakMap);return g0(_,O,()=>{const E={};for(const[T,k]of Object.entries(s.selectors??{}))E[T]=RR(k,O,()=>g0(y,O,N),g);return E})}return{reducerPath:x,getSelectors:j,get selectors(){return j(w)},selectSlice:w}}const v={name:i,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:N,...S(o),injectInto(x,{reducerPath:g,...w}={}){const j=g??o;return x.inject({reducerPath:j,reducer:b},w),{...v,...S(j,!0)}}};return v}}function RR(e,t,r,a){function s(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var LR=FR();function $R(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function BR({type:e,reducerName:t,createNotation:r},a,s){let i,o;if("reducer"in a){if(r&&!WR(a))throw new Error(Ms(17));i=a.reducer,o=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?d2(e,o):d2(e))}function UR(e){return e._reducerDefinitionType==="asyncThunk"}function WR(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qR({type:e,reducerName:t},r,a,s){if(!s)throw new Error(Ms(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=s(e,i,d);a.exposeAction(t,f),o&&a.addCase(f.fulfilled,o),l&&a.addCase(f.pending,l),c&&a.addCase(f.rejected,c),u&&a.addMatcher(f.settled,u),a.exposeCaseReducer(t,{fulfilled:o||y0,pending:l||y0,rejected:c||y0,settled:u||y0})}function y0(){}function Ms(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const KR={rawMaterials:[],loading:!1,error:null},VR=()=>{try{localStorage.removeItem("rawMaterials"),console.log(" Cleared rawMaterials from localStorage")}catch(e){console.error("Error clearing localStorage:",e)}return[]},zR=VR(),mE=LR({name:"inventory",initialState:{...KR,rawMaterials:zR},reducers:{setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload},setRawMaterials:(e,t)=>{e.rawMaterials=t.payload;try{localStorage.setItem("rawMaterials",JSON.stringify(t.payload))}catch(r){console.error("Error saving to localStorage:",r)}},addRawMaterial:(e,t)=>{e.rawMaterials.push(t.payload);try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(r){console.error("Error saving to localStorage:",r)}},updateRawMaterial:(e,t)=>{const r=e.rawMaterials.findIndex(a=>a.id===t.payload.id);if(r!==-1){e.rawMaterials[r]=t.payload;try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(a){console.error("Error saving to localStorage:",a)}}},deleteRawMaterial:(e,t)=>{e.rawMaterials=e.rawMaterials.filter(r=>r.id!==t.payload);try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(r){console.error("Error saving to localStorage:",r)}},importRawMaterials:(e,t)=>{const r=t.payload,s=[...e.rawMaterials];r.forEach(i=>{const o=s.findIndex(l=>l.materialCode===i.materialCode);o!==-1?s[o]={...s[o],materialName:i.materialName,description:i.description,category:i.category,unitOfMeasure:i.unitOfMeasure,updatedAt:new Date().toISOString()}:s.push(i)}),e.rawMaterials=s;try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(i){console.error("Error saving to localStorage:",i)}},clearRawMaterials:e=>{e.rawMaterials=[];try{localStorage.removeItem("rawMaterials")}catch(t){console.error("Error clearing localStorage:",t)}}}});mE.actions;const HR=mE.reducer,GR=AR({reducer:{inventory:HR}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Qe=(e,t)=>{const r=C.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>C.createElement("svg",{ref:d,...XR,width:s,height:s,stroke:a,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${YR(e)}`,l].join(" "),...u},[...t.map(([f,m])=>C.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Qe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Qe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=Qe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=Qe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Qe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Qe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Qe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=Qe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=Qe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=Qe("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Qe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=Qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Qe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Qe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=Qe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Qe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Qe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=Qe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Qe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=Qe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=Qe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Qe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Qe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=Qe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=Qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=Qe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Qe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=Qe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=Qe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Qe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Qe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=Qe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=Qe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=Qe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Qe("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=Qe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=Qe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Qe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=Qe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Qe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Qe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Qe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Qe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Qe("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Qe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=Qe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=Qe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=Qe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class c8{constructor(){$N(this,"baseURL");this.baseURL={}.VITE_API_URL||"http://localhost:5000/api"}async request(t,r={}){const a=`${this.baseURL}${t}`,s=r.body instanceof FormData,i=localStorage.getItem("auth_token"),o={};s||(o["Content-Type"]="application/json"),i&&(o.Authorization=`Bearer ${i}`),r.headers&&Object.assign(o,r.headers);const l={headers:o,...r};try{const c=await fetch(a,l),u=await c.json();if(!c.ok)throw new Error(u.message||`HTTP error! status: ${c.status}`);return u}catch(c){throw console.error("API request failed:",c),c}}async login(t){return this.request("/auth/login",{method:"POST",body:JSON.stringify(t)})}async me(){return this.request("/auth/me")}async getUsers(){return this.request("/users")}async createUser(t){return this.request("/users",{method:"POST",body:JSON.stringify(t)})}async healthCheck(){return this.request("/health")}async getRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/raw-materials${a?`?${a}`:""}`;return this.request(s)}async createRawMaterial(t){return this.request("/raw-materials",{method:"POST",body:JSON.stringify(t)})}async updateRawMaterial(t,r){return this.request(`/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRawMaterial(t){return this.request(`/raw-materials/${t}`,{method:"DELETE"})}async syncWithZohoRawMaterials(){return this.request("/sync-zoho/raw-materials",{method:"POST"})}async getCentralKitchens(){return this.request("/central-kitchen")}async getCentralKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/central-kitchen/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getCentralKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/central-kitchen/finished-products${a?`?${a}`:""}`;return this.request(s)}async getItemsList(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search);const a=r.toString();return this.request(`/items-list${a?`?${a}`:""}`)}async syncItemsListFromZoho(){return this.request("/items-list/sync",{method:"POST"})}async getLocationsList(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search);const a=r.toString();return this.request(`/locations-list${a?`?${a}`:""}`)}async syncLocationsFromZoho(){return this.request("/locations-list/sync",{method:"POST"})}async createCentralKitchenRawMaterial(t){return this.request("/central-kitchen/raw-materials",{method:"POST",body:JSON.stringify(t)})}async exportCentralKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/central-kitchen/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Central_Kitchen_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportCentralKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/central-kitchen/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Central_Kitchen_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async getKuwaitCityRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/kuwait-city/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getKuwaitCityFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/kuwait-city/finished-products${a?`?${a}`:""}`;return this.request(s)}async importKuwaitCityRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/kuwait-city/raw-materials/import-excel",{method:"POST",body:r})}async importKuwaitCityFinishedProducts(t){return this.request("/kuwait-city/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importMall360RawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/360-mall/raw-materials/import-excel",{method:"POST",body:r})}async importMall360FinishedProducts(t){return this.request("/360-mall/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importVibeComplexRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/vibe-complex/raw-materials/import-excel",{method:"POST",body:r})}async importVibeComplexFinishedProducts(t){return this.request("/vibe-complex/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async exportKuwaitCityRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/kuwait-city/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Kuwait_City_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportKuwaitCityFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/kuwait-city/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Kuwait_City_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportMall360RawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/360-mall/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Mall360_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportMall360FinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/360-mall/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:(()=>{const u={"Content-Type":"application/json"},d=typeof window<"u"?localStorage.getItem("auth_token"):null;return d&&(u.Authorization=`Bearer ${d}`),u})()});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Mall360_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportVibesComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/vibe-complex/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Vibes_Complex_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportVibesComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/vibe-complex/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Vibes_Complex_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportTaibaHospitalRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/taiba-kitchen/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Taiba_Hospital_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async exportTaibaHospitalFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/taiba-kitchen/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Taiba_Hospital_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}async get360MallRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/360-mall/raw-materials${a?`?${a}`:""}`;return this.request(s)}async get360MallFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/360-mall/finished-products${a?`?${a}`:""}`;return this.request(s)}async getVibesComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.category&&r.append("subCategory",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getVibeComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getVibesComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/finished-products${a?`?${a}`:""}`;return this.request(s)}async getVibeComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/finished-products${a?`?${a}`:""}`;return this.request(s)}async getTaibaKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/taiba-kitchen/raw-materials${a?`?${a}`:""}`;return this.request(s)}async importTaibaKitchenRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/taiba-kitchen/raw-materials/import-excel",{method:"POST",body:r})}async importTaibaKitchenFinishedProducts(t){return this.request("/taiba-kitchen/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async getTaibaKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("category",t.subCategory),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/taiba-kitchen/finished-products${a?`?${a}`:""}`;return this.request(s)}async getNotifications(t,r,a){const s=new URLSearchParams;r&&s.append("type",r),a&&s.append("limit",a.toString());const i=s.toString(),o=`/notifications/${encodeURIComponent(t)}${i?`?${i}`:""}`;return this.request(o)}async markNotificationAsRead(t){return this.request(`/notifications/${t}/read`,{method:"PUT"})}async markAllNotificationsAsRead(t){return this.request("/notifications/mark-all-read",{method:"PUT",body:JSON.stringify({outlet:t})})}async clearAllNotifications(t){return this.request("/notifications/clear-all",{method:"DELETE",body:JSON.stringify({outlet:t})})}async createNotification(t){return this.request("/notifications",{method:"POST",body:JSON.stringify(t)})}async getTransferOrderById(t){return this.request(`/transfer-orders/${t}`)}async updateTransferOrderInventory(t,r){return this.request(`/transfer-order-inventory/${t}/${r}`,{method:"PUT",body:JSON.stringify({action:r})})}async getOutlets(t){return this.request("/outlets")}async getFinishedGoods(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/finished-goods${a?`?${a}`:""}`;return this.request(s)}async createFinishedGood(t){return this.request("/finished-goods",{method:"POST",body:JSON.stringify(t)})}async updateFinishedGood(t,r){return this.request(`/finished-goods/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteFinishedGood(t){return this.request(`/finished-goods/${t}`,{method:"DELETE"})}async getTransferOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.fromOutlet&&r.append("fromOutlet",t.fromOutlet),t!=null&&t.toOutlet&&r.append("toOutlet",t.toOutlet),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/transfer-orders${a?`?${a}`:""}`;return this.request(s)}async deleteTransferOrder(t,r){const a=r?JSON.stringify(r):void 0;return this.request(`/transfer-orders/${t}`,{method:"DELETE",body:a})}async updateTransferOrderStatus(t,r){return this.request(`/transfer-orders/${t}/status`,{method:"PUT",body:JSON.stringify(r)})}async approveTransferOrder(t,r){return this.request(`/transfer-order-inventory/${t}/approve`,{method:"PUT",body:JSON.stringify(r)})}async rejectTransferOrder(t,r){return this.request(`/transfer-order-inventory/${t}/reject`,{method:"PUT",body:JSON.stringify(r)})}async getBillOfMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/bill-of-materials${a?`?${a}`:""}`;return this.request(s)}async getBillOfMaterialById(t){return this.request(`/bill-of-materials/${t}`)}async createBillOfMaterial(t){return this.request("/bill-of-materials",{method:"POST",body:JSON.stringify(t)})}async updateBillOfMaterial(t,r){return this.request(`/bill-of-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteBillOfMaterial(t){return this.request(`/bill-of-materials/${t}`,{method:"DELETE"})}async createTransfer(t){return this.request("/transfers/create",{method:"POST",body:JSON.stringify(t)})}async createTransferOrder(t){return this.request("/transfer-orders",{method:"POST",body:JSON.stringify(t)})}async getSalesOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.outletId&&r.append("outletId",t.outletId),t!=null&&t.outletCode&&r.append("outletCode",t.outletCode),t!=null&&t.outletName&&r.append("outletName",t.outletName),t!=null&&t.orderStatus&&r.append("orderStatus",t.orderStatus),t!=null&&t.orderType&&r.append("orderType",t.orderType),t!=null&&t.paymentStatus&&r.append("paymentStatus",t.paymentStatus),t!=null&&t.startDate&&r.append("startDate",t.startDate),t!=null&&t.endDate&&r.append("endDate",t.endDate),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/sales-orders${a?`?${a}`:""}`;return this.request(s)}async getSalesOrderById(t){return this.request(`/sales-orders/${t}`)}async createSalesOrder(t){return this.request("/sales-orders",{method:"POST",body:JSON.stringify(t)})}async updateSalesOrder(t,r){return this.request(`/sales-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSalesOrder(t){return this.request(`/sales-orders/${t}`,{method:"DELETE"})}async updateSalesOrderStatus(t,r){return this.request(`/sales-orders/${t}/status`,{method:"PUT",body:JSON.stringify(r)})}async createIngredientMasterTransfer(t){return this.request("/ingredient-master/create-transfer",{method:"POST",body:JSON.stringify(t)})}async getPurchaseOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/purchase-orders${a?`?${a}`:""}`;return this.request(s)}async getPurchaseOrderById(t){return this.request(`/purchase-orders/${t}`)}async createPurchaseOrder(t){return this.request("/purchase-orders",{method:"POST",body:JSON.stringify(t)})}async updatePurchaseOrder(t,r){return this.request(`/purchase-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deletePurchaseOrder(t){return this.request(`/purchase-orders/${t}`,{method:"DELETE"})}async syncZohoBillsToPurchaseOrders(){return this.request("/sync-zoho-bills/purchase-orders",{method:"POST"})}async pushSalesOrderToZoho(t){return this.request(`/sales-orders/${t}/push-to-zoho`,{method:"POST"})}async pushBulkSalesOrdersToZoho(t){return this.request("/sales-orders/push-bulk-to-zoho",{method:"POST",body:JSON.stringify({orderIds:t})})}async updateCentralKitchenFinishedProduct(t,r){return this.request(`/central-kitchen/finished-products/${t}`,{method:"PUT",body:JSON.stringify(r)})}async importCentralKitchenFinishedProducts(t){return this.request("/central-kitchen/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importCentralKitchenExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/central-kitchen/import-excel",{method:"POST",body:r})}async getCentralKitchenImportStatus(){return this.request("/central-kitchen/import-status",{method:"GET"})}async makeFinishedGood(t){return this.request("/central-kitchen/finished-products/make-finished-good",{method:"POST",body:JSON.stringify(t)})}async getJobOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString();return this.request(`/job-orders${a?`?${a}`:""}`)}async getJobOrder(t){return this.request(`/job-orders/${t}`)}async createJobOrder(t){return this.request("/job-orders",{method:"POST",body:JSON.stringify(t)})}async updateJobOrder(t,r){return this.request(`/job-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteJobOrder(t){return this.request(`/job-orders/${t}`,{method:"DELETE"})}async createOutlet(t){return this.request("/outlets",{method:"POST",body:JSON.stringify(t)})}async getOutlet(t){return this.request(`/outlets/${t}`)}async updateOutlet(t,r){return this.request(`/outlets/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteOutlet(t){return this.request(`/outlets/${t}`,{method:"DELETE"})}async getRawMaterial(t){return this.request(`/raw-materials/${t}`)}async getRawMaterialForecasts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString();return this.request(`/raw-material-forecasts${a?`?${a}`:""}`)}async createRawMaterialForecast(t){return this.request("/raw-material-forecasts",{method:"POST",body:JSON.stringify(t)})}async deleteRawMaterialForecast(t){return this.request(`/raw-material-forecasts/${t}`,{method:"DELETE"})}async createCentralKitchenInventoryItem(t){return this.request("/central-kitchen/raw-materials",{method:"POST",body:JSON.stringify(t)})}async updateCentralKitchenRawMaterial(t,r){return this.request(`/central-kitchen/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async getOutletFinishedGoods(t){return this.getFinishedGoods(t)}async updateTaibaKitchenRawMaterial(t,r){return this.request(`/taiba-kitchen/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async updateTaibaKitchenFinishedProduct(t,r){return this.request(`/taiba-kitchen/finished-products/${t}`,{method:"PUT",body:JSON.stringify(r)})}}const ce=new c8,Js=e=>{const[t,r]=C.useState([]),[a,s]=C.useState(!0),i=C.useCallback(async()=>{if(!e){s(!1);return}try{s(!0),console.log(` useNotifications: Loading notifications for outlet: "${e}"`);const d=await ce.getNotifications(e,void 0,20);if(console.log(" useNotifications: API response:",d),d.success){const m=(d.data||[]).map(p=>({id:p.id,title:p.title,message:p.message,type:p.type==="transfer_rejection"?"error":p.type==="transfer_acceptance"||p.type==="transfer_completed"?"success":p.priority==="high"?"warning":"info",timestamp:new Date(p.timestamp),read:p.read,outlet:e,transferOrderId:p.transferOrderId,isTransferOrder:p.type==="transfer_completed"||p.type==="transfer_request"||p.type==="transfer_acceptance"||p.type==="transfer_rejection"||p.isTransferOrder||!1,itemType:p.itemType,priority:p.priority}));r(m)}}catch(d){console.error("Error loading notifications:",d),r([])}finally{s(!1)}},[e]);C.useEffect(()=>{i();const d=setInterval(()=>{i()},3e4);return()=>clearInterval(d)},[i]);const o=C.useCallback(async d=>{try{await ce.markNotificationAsRead(d),r(f=>f.map(m=>m.id===d?{...m,read:!0}:m))}catch(f){console.error("Error marking notification as read:",f)}},[]),l=C.useCallback(async()=>{if(e)try{await ce.markAllNotificationsAsRead(e),r(d=>d.map(f=>({...f,read:!0})))}catch(d){console.error("Error marking all notifications as read:",d)}},[e]),c=C.useCallback(async()=>{if(e)try{await ce.clearAllNotifications(e),r([])}catch(d){console.error("Error clearing notifications:",d)}},[e]),u=C.useCallback(d=>{const f={...d,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,read:!1};r(m=>[f,...m])},[]);return{notifications:t,markAsRead:o,markAllAsRead:l,clearAll:c,addNotification:u,loading:a,refreshNotifications:i}},Qp=[{name:"Dashboard",href:"/dashboard",icon:a8},{name:"Recipe Master",href:"/bill-of-materials",icon:t8},{name:"Central Kitchen",icon:En,hasDropdown:!0,children:[{name:"Raw Material Inventory",href:"/central-kitchen/raw-materials",icon:tt},{name:"Finished Good Inventory",href:"/central-kitchen/finished-goods",icon:Nl},{name:"Make Finished Good",href:"/central-kitchen/make-finished-good",icon:Lb},{name:"Create Transfer",href:"/central-kitchen/create-transfer",icon:ta}]},{name:"Outlets",icon:En,hasDropdown:!0,children:[{name:"Kuwait City",icon:En,hasDropdown:!0,children:[{name:"POS Sales",href:"/kuwait-city/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/kuwait-city/raw-materials",icon:tt},{name:"Finished Goods Inventory",href:"/kuwait-city/finished-goods",icon:Nl}]},{name:"360 Mall",icon:Rm,hasDropdown:!0,children:[{name:"POS Sales",href:"/360-mall/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/360-mall/raw-materials",icon:tt},{name:"Finished Goods Inventory",href:"/360-mall/finished-goods",icon:Nl}]},{name:"Vibes Complex",icon:Fm,hasDropdown:!0,children:[{name:"POS Sales",href:"/vibes-complex/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/vibes-complex/raw-materials",icon:tt},{name:"Finished Goods Inventory",href:"/vibes-complex/finished-goods",icon:Nl}]},{name:"Taiba Hospital",icon:Mm,hasDropdown:!0,children:[{name:"POS Sales",href:"/taiba-hospital/sales-orders",icon:Fr},{name:"Raw Material Inventory",href:"/taiba-hospital/raw-materials",icon:tt},{name:"Finished Goods Inventory",href:"/taiba-hospital/finished-goods",icon:Nl}]}]},{name:"Transfer Orders",href:"/transfer-orders",icon:ta},{name:"Purchase Orders",href:"/purchase-orders",icon:Fr}],u8=({children:e})=>{const[t,r]=C.useState(!1),[a,s]=C.useState(new Set),i=Ta(),o=(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})(),l=!!(o!=null&&o.isAdmin),c=String((o==null?void 0:o.assignedOutletCode)||""),u=se.useMemo(()=>{const S=i.pathname;if(console.log(" Layout: Determining outlet name for notifications",{isAdmin:l,assignedOutlet:c,pathname:S}),S.includes("/kuwait-city")||S.includes("/downtown-restaurant"))return console.log(' Layout: On Kuwait City page, using "Kuwait City"'),"Kuwait City";if(S.includes("/mall-360")||S.includes("/mall-food-court"))return console.log(' Layout: On 360 Mall page, using "360 Mall"'),"360 Mall";if(S.includes("/vibes-complex")||S.includes("/marina-walk-cafe"))return console.log(' Layout: On Vibes Complex page, using "Vibes Complex"'),"Vibes Complex";if(S.includes("/taiba-hospital")||S.includes("/drive-thru-express"))return console.log(' Layout: On Taiba Hospital page, using "Taiba Hospital"'),"Taiba Hospital";if(S.includes("/central-kitchen")||S.includes("/central-kitchen-raw-materials")||S.includes("/central-kitchen-finished-goods")||S.includes("/create-transfer"))return console.log(' Layout: On Central Kitchen page, using "Central Kitchen"'),"Central Kitchen";if(l)return console.log(' Layout: User is admin and not on specific outlet page, using "Central Kitchen"'),"Central Kitchen";if(c==="KUWAIT_CITY")return console.log(' Layout: Assigned outlet is KUWAIT_CITY, using "Kuwait City"'),"Kuwait City";if(c==="MALL_360")return console.log(' Layout: Assigned outlet is MALL_360, using "360 Mall"'),"360 Mall";if(c==="VIBE_COMPLEX")return console.log(' Layout: Assigned outlet is VIBE_COMPLEX, using "Vibes Complex"'),"Vibes Complex";if(c==="TAIBA_HOSPITAL")return console.log(' Layout: Assigned outlet is TAIBA_HOSPITAL, using "Taiba Hospital"'),"Taiba Hospital";console.warn(" Layout: Unknown assignedOutlet or route, returning undefined",{assignedOutlet:c,pathname:S})},[l,c,i.pathname]),{notifications:d,markAsRead:f,markAllAsRead:m,clearAll:p,refreshNotifications:y}=Js(u);se.useEffect(()=>{const S=()=>{y()};return window.addEventListener("refreshNotifications",S),()=>{window.removeEventListener("refreshNotifications",S)}},[y]);const h=se.useMemo(()=>{const S=i.pathname;return S.includes("/raw-materials")?"Raw Material":S.includes("/finished-goods")?"Finished Goods":null},[i.pathname]);se.useMemo(()=>{console.log(" Layout: All notifications:",d),console.log(" Layout: Outlet for notifications:",u),console.log(" Layout: Current module:",h);let S=d.filter(v=>{var g,w;return v.isTransferOrder||((g=v.title)==null?void 0:g.includes("Transfer Request"))||((w=v.title)==null?void 0:w.includes("Transfer"))||v.transferOrderId});return h&&(S=S.filter(v=>{const x=v.itemType,g=!x||x===h||x==="Mixed";return console.log(" Layout: Filtering notification by itemType:",{id:v.id,title:v.title,itemType:x,currentModule:h,shouldShow:g}),g})),console.log(" Layout: Filtered notifications count:",S.length),S},[d,u,h]);const b=se.useMemo(()=>{if(l)return Qp;const S=c==="KUWAIT_CITY"?"Kuwait City":c==="MALL_360"?"360 Mall":c==="VIBE_COMPLEX"?"Vibes Complex":c==="TAIBA_HOSPITAL"?"Taiba Hospital":"",v=[];v.push(Qp[0]);const x=Qp.find(g=>g.name==="Outlets");if(x&&x.children&&S){const g=x.children.filter(w=>w.name===S);g.length&&v.push({...x,children:g})}return v},[l,c]),N=S=>{const v=new Set(a);v.has(S)?v.delete(S):v.add(S),s(v)};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        /* Enhanced scrollbar styling for sidebar */
        .sidebar-nav::-webkit-scrollbar {
          width: 6px;
        }
        .sidebar-nav::-webkit-scrollbar-track {
          background: transparent;
          border-radius: 3px;
        }
        .sidebar-nav::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 3px;
          transition: background-color 0.2s ease;
        }
        .sidebar-nav::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
        .sidebar-nav {
          scrollbar-width: thin;
          scrollbar-color: #d1d5db transparent;
        }
        
        /* Smooth scrolling behavior */
        .sidebar-nav {
          scroll-behavior: smooth;
        }
        
        /* Ensure proper height constraints */
        .sidebar-container {
          height: calc(100vh - 4rem); /* Subtract header height */
          display: flex;
          flex-direction: column;
        }
        
        .sidebar-nav-container {
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          min-height: 0;
        }
        
        /* Mobile sidebar height fix */
        .mobile-sidebar-nav {
          height: calc(100vh - 4rem);
          overflow-y: auto;
          overflow-x: hidden;
        }
      `}),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${t?"block":"hidden"}`,children:[n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),n.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white sidebar-container",children:[n.jsxs("div",{className:"flex h-16 items-center justify-between px-4 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"L"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"localbeet"})})]}),n.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"sidebar-nav-container",children:n.jsx("nav",{className:"px-4 py-4 space-y-1 sidebar-nav mobile-sidebar-nav",children:b.map(S=>{const v=S.icon,x=i.pathname===S.href,g=S.hasDropdown,w=a.has(S.name);return g?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>N(S.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(v,{className:"mr-3 h-5 w-5 flex-shrink-0"}),S.name]}),w?n.jsx(Sa,{className:"h-4 w-4"}):n.jsx(b0,{className:"h-4 w-4"})]}),w&&S.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:S.children.map(j=>{const O=j.icon,_=j.href?i.pathname===j.href:!1,E=j.hasDropdown||!1,T=a.has(j.name);return E?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>N(j.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(O,{className:"mr-3 h-4 w-4 flex-shrink-0"}),j.name]}),T?n.jsx(Sa,{className:"h-4 w-4"}):n.jsx(b0,{className:"h-4 w-4"})]}),T&&j.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:j.children.map(k=>{const A=k.icon,P=k.href?i.pathname===k.href:!1;return n.jsxs(no,{to:k.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${P?"bg-primary-100 text-primary-700":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(A,{className:"mr-3 h-4 w-4 flex-shrink-0"}),k.name]},k.name)})})]},j.name):n.jsxs(no,{to:j.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${_?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(O,{className:"mr-3 h-4 w-4 flex-shrink-0"}),j.name]},j.name)})})]},S.name):n.jsxs(no,{to:S.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${x?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(v,{className:"mr-3 h-5 w-5 flex-shrink-0"}),S.name]},S.name)})})})]})]}),n.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:n.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 sidebar-container",children:[n.jsx("div",{className:"flex h-16 items-center px-4 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"L"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"localbeet"})})]})}),n.jsx("div",{className:"sidebar-nav-container",children:n.jsx("nav",{className:"px-4 py-4 space-y-1 sidebar-nav",children:b.map(S=>{const v=S.icon,x=i.pathname===S.href,g=S.hasDropdown,w=a.has(S.name);return g?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>N(S.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(v,{className:"mr-3 h-5 w-5 flex-shrink-0"}),S.name]}),w?n.jsx(Sa,{className:"h-4 w-4"}):n.jsx(b0,{className:"h-4 w-4"})]}),w&&S.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:S.children.map(j=>{const O=j.icon,_=j.href?i.pathname===j.href:!1,E=j.hasDropdown||!1,T=a.has(j.name);return E?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>N(j.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(O,{className:"mr-3 h-4 w-4 flex-shrink-0"}),j.name]}),T?n.jsx(Sa,{className:"h-4 w-4"}):n.jsx(b0,{className:"h-4 w-4"})]}),T&&j.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:j.children.map(k=>{const A=k.icon,P=k.href?i.pathname===k.href:!1;return n.jsxs(no,{to:k.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${P?"bg-primary-100 text-primary-700":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(A,{className:"mr-3 h-4 w-4 flex-shrink-0"}),k.name]},k.name)})})]},j.name):n.jsxs(no,{to:j.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${_?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(O,{className:"mr-3 h-4 w-4 flex-shrink-0"}),j.name]},j.name)})})]},S.name):n.jsxs(no,{to:S.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${x?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(v,{className:"mr-3 h-5 w-5 flex-shrink-0"}),S.name]},S.name)})})}),n.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Fi,{className:"h-8 w-8 text-gray-400"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:(o==null?void 0:o.name)||"User"}),n.jsx("p",{className:"text-xs text-gray-500",children:(o==null?void 0:o.email)||""})]})]}),n.jsxs("div",{className:"mt-3 space-y-1",children:[l&&n.jsxs(no,{to:"/settings",className:`flex items-center px-3 py-2 text-sm rounded-lg w-full ${i.pathname==="/settings"?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"}`,children:[n.jsx(bE,{className:"mr-3 h-4 w-4"}),"Settings"]}),n.jsxs("button",{onClick:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="/login"},className:"flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg w-full",children:[n.jsx(n8,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]})]})}),n.jsxs("div",{className:"lg:pl-64",children:[n.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[n.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>r(!0),children:n.jsx(s8,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[n.jsx("div",{className:"flex flex-1"}),n.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[n.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),n.jsx("div",{className:"flex items-center gap-x-2",children:n.jsxs("span",{className:"text-sm text-gray-700",children:["Welcome back, ",(o==null?void 0:o.name)||"Admin"]})})]})]})]}),n.jsx("main",{className:"py-6",children:n.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})]})]})]})},rt=({children:e,allowedOutletCodes:t})=>{const r=Ta(),a=(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})(),s=!!(a!=null&&a.isAdmin),i=String((a==null?void 0:a.assignedOutletCode)||"");return s||t.includes(i)?e:n.jsx(tE,{to:"/dashboard",replace:!0,state:{from:r}})};function NE(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=NE(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Pt(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=NE(e))&&(a&&(a+=" "),a+=t);return a}var d8=Array.isArray,Ga=d8,f8=typeof Jf=="object"&&Jf&&Jf.Object===Object&&Jf,jE=f8,m8=jE,h8=typeof self=="object"&&self&&self.Object===Object&&self,x8=m8||h8||Function("return this")(),ws=x8,p8=ws,g8=p8.Symbol,Df=g8,p2=Df,SE=Object.prototype,y8=SE.hasOwnProperty,v8=SE.toString,pu=p2?p2.toStringTag:void 0;function b8(e){var t=y8.call(e,pu),r=e[pu];try{e[pu]=void 0;var a=!0}catch{}var s=v8.call(e);return a&&(t?e[pu]=r:delete e[pu]),s}var w8=b8,N8=Object.prototype,j8=N8.toString;function S8(e){return j8.call(e)}var k8=S8,g2=Df,C8=w8,O8=k8,_8="[object Null]",T8="[object Undefined]",y2=g2?g2.toStringTag:void 0;function E8(e){return e==null?e===void 0?T8:_8:y2&&y2 in Object(e)?C8(e):O8(e)}var Zs=E8;function A8(e){return e!=null&&typeof e=="object"}var ei=A8,P8=Zs,D8=ei,I8="[object Symbol]";function M8(e){return typeof e=="symbol"||D8(e)&&P8(e)==I8}var Uc=M8,F8=Ga,R8=Uc,L8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$8=/^\w*$/;function B8(e,t){if(F8(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||R8(e)?!0:$8.test(e)||!L8.test(e)||t!=null&&e in Object(t)}var $b=B8;function U8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Gi=U8;const Wc=Qt(Gi);var W8=Zs,q8=Gi,K8="[object AsyncFunction]",V8="[object Function]",z8="[object GeneratorFunction]",H8="[object Proxy]";function G8(e){if(!q8(e))return!1;var t=W8(e);return t==V8||t==z8||t==K8||t==H8}var Bb=G8;const xt=Qt(Bb);var X8=ws,Y8=X8["__core-js_shared__"],Q8=Y8,Jp=Q8,v2=function(){var e=/[^.]+$/.exec(Jp&&Jp.keys&&Jp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function J8(e){return!!v2&&v2 in e}var Z8=J8,eL=Function.prototype,tL=eL.toString;function rL(e){if(e!=null){try{return tL.call(e)}catch{}try{return e+""}catch{}}return""}var kE=rL,aL=Bb,nL=Z8,sL=Gi,iL=kE,oL=/[\\^$.*+?()[\]{}|]/g,lL=/^\[object .+?Constructor\]$/,cL=Function.prototype,uL=Object.prototype,dL=cL.toString,fL=uL.hasOwnProperty,mL=RegExp("^"+dL.call(fL).replace(oL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hL(e){if(!sL(e)||nL(e))return!1;var t=aL(e)?mL:lL;return t.test(iL(e))}var xL=hL;function pL(e,t){return e==null?void 0:e[t]}var gL=pL,yL=xL,vL=gL;function bL(e,t){var r=vL(e,t);return yL(r)?r:void 0}var tl=bL,wL=tl,NL=wL(Object,"create"),gx=NL,b2=gx;function jL(){this.__data__=b2?b2(null):{},this.size=0}var SL=jL;function kL(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var CL=kL,OL=gx,_L="__lodash_hash_undefined__",TL=Object.prototype,EL=TL.hasOwnProperty;function AL(e){var t=this.__data__;if(OL){var r=t[e];return r===_L?void 0:r}return EL.call(t,e)?t[e]:void 0}var PL=AL,DL=gx,IL=Object.prototype,ML=IL.hasOwnProperty;function FL(e){var t=this.__data__;return DL?t[e]!==void 0:ML.call(t,e)}var RL=FL,LL=gx,$L="__lodash_hash_undefined__";function BL(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=LL&&t===void 0?$L:t,this}var UL=BL,WL=SL,qL=CL,KL=PL,VL=RL,zL=UL;function qc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}qc.prototype.clear=WL;qc.prototype.delete=qL;qc.prototype.get=KL;qc.prototype.has=VL;qc.prototype.set=zL;var HL=qc;function GL(){this.__data__=[],this.size=0}var XL=GL;function YL(e,t){return e===t||e!==e&&t!==t}var Ub=YL,QL=Ub;function JL(e,t){for(var r=e.length;r--;)if(QL(e[r][0],t))return r;return-1}var yx=JL,ZL=yx,e$=Array.prototype,t$=e$.splice;function r$(e){var t=this.__data__,r=ZL(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():t$.call(t,r,1),--this.size,!0}var a$=r$,n$=yx;function s$(e){var t=this.__data__,r=n$(t,e);return r<0?void 0:t[r][1]}var i$=s$,o$=yx;function l$(e){return o$(this.__data__,e)>-1}var c$=l$,u$=yx;function d$(e,t){var r=this.__data__,a=u$(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var f$=d$,m$=XL,h$=a$,x$=i$,p$=c$,g$=f$;function Kc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Kc.prototype.clear=m$;Kc.prototype.delete=h$;Kc.prototype.get=x$;Kc.prototype.has=p$;Kc.prototype.set=g$;var vx=Kc,y$=tl,v$=ws,b$=y$(v$,"Map"),Wb=b$,w2=HL,w$=vx,N$=Wb;function j$(){this.size=0,this.__data__={hash:new w2,map:new(N$||w$),string:new w2}}var S$=j$;function k$(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var C$=k$,O$=C$;function _$(e,t){var r=e.__data__;return O$(t)?r[typeof t=="string"?"string":"hash"]:r.map}var bx=_$,T$=bx;function E$(e){var t=T$(this,e).delete(e);return this.size-=t?1:0,t}var A$=E$,P$=bx;function D$(e){return P$(this,e).get(e)}var I$=D$,M$=bx;function F$(e){return M$(this,e).has(e)}var R$=F$,L$=bx;function $$(e,t){var r=L$(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var B$=$$,U$=S$,W$=A$,q$=I$,K$=R$,V$=B$;function Vc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Vc.prototype.clear=U$;Vc.prototype.delete=W$;Vc.prototype.get=q$;Vc.prototype.has=K$;Vc.prototype.set=V$;var qb=Vc,CE=qb,z$="Expected a function";function Kb(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(z$);var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,a);return r.cache=i.set(s,o)||i,o};return r.cache=new(Kb.Cache||CE),r}Kb.Cache=CE;var OE=Kb;const H$=Qt(OE);var G$=OE,X$=500;function Y$(e){var t=G$(e,function(a){return r.size===X$&&r.clear(),a}),r=t.cache;return t}var Q$=Y$,J$=Q$,Z$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e7=/\\(\\)?/g,t7=J$(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Z$,function(r,a,s,i){t.push(s?i.replace(e7,"$1"):a||r)}),t}),r7=t7;function a7(e,t){for(var r=-1,a=e==null?0:e.length,s=Array(a);++r<a;)s[r]=t(e[r],r,e);return s}var Vb=a7,N2=Df,n7=Vb,s7=Ga,i7=Uc,o7=1/0,j2=N2?N2.prototype:void 0,S2=j2?j2.toString:void 0;function _E(e){if(typeof e=="string")return e;if(s7(e))return n7(e,_E)+"";if(i7(e))return S2?S2.call(e):"";var t=e+"";return t=="0"&&1/e==-o7?"-0":t}var l7=_E,c7=l7;function u7(e){return e==null?"":c7(e)}var TE=u7,d7=Ga,f7=$b,m7=r7,h7=TE;function x7(e,t){return d7(e)?e:f7(e,t)?[e]:m7(h7(e))}var EE=x7,p7=Uc,g7=1/0;function y7(e){if(typeof e=="string"||p7(e))return e;var t=e+"";return t=="0"&&1/e==-g7?"-0":t}var wx=y7,v7=EE,b7=wx;function w7(e,t){t=v7(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[b7(t[r++])];return r&&r==a?e:void 0}var zb=w7,N7=zb;function j7(e,t,r){var a=e==null?void 0:N7(e,t);return a===void 0?r:a}var AE=j7;const An=Qt(AE);function S7(e){return e==null}var k7=S7;const vt=Qt(k7);var C7=Zs,O7=Ga,_7=ei,T7="[object String]";function E7(e){return typeof e=="string"||!O7(e)&&_7(e)&&C7(e)==T7}var A7=E7;const Bo=Qt(A7);var PE={exports:{}},Kt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb=Symbol.for("react.element"),Gb=Symbol.for("react.portal"),Nx=Symbol.for("react.fragment"),jx=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),kx=Symbol.for("react.provider"),Cx=Symbol.for("react.context"),P7=Symbol.for("react.server_context"),Ox=Symbol.for("react.forward_ref"),_x=Symbol.for("react.suspense"),Tx=Symbol.for("react.suspense_list"),Ex=Symbol.for("react.memo"),Ax=Symbol.for("react.lazy"),D7=Symbol.for("react.offscreen"),DE;DE=Symbol.for("react.module.reference");function Rn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Hb:switch(e=e.type,e){case Nx:case Sx:case jx:case _x:case Tx:return e;default:switch(e=e&&e.$$typeof,e){case P7:case Cx:case Ox:case Ax:case Ex:case kx:return e;default:return t}}case Gb:return t}}}Kt.ContextConsumer=Cx;Kt.ContextProvider=kx;Kt.Element=Hb;Kt.ForwardRef=Ox;Kt.Fragment=Nx;Kt.Lazy=Ax;Kt.Memo=Ex;Kt.Portal=Gb;Kt.Profiler=Sx;Kt.StrictMode=jx;Kt.Suspense=_x;Kt.SuspenseList=Tx;Kt.isAsyncMode=function(){return!1};Kt.isConcurrentMode=function(){return!1};Kt.isContextConsumer=function(e){return Rn(e)===Cx};Kt.isContextProvider=function(e){return Rn(e)===kx};Kt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hb};Kt.isForwardRef=function(e){return Rn(e)===Ox};Kt.isFragment=function(e){return Rn(e)===Nx};Kt.isLazy=function(e){return Rn(e)===Ax};Kt.isMemo=function(e){return Rn(e)===Ex};Kt.isPortal=function(e){return Rn(e)===Gb};Kt.isProfiler=function(e){return Rn(e)===Sx};Kt.isStrictMode=function(e){return Rn(e)===jx};Kt.isSuspense=function(e){return Rn(e)===_x};Kt.isSuspenseList=function(e){return Rn(e)===Tx};Kt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Nx||e===Sx||e===jx||e===_x||e===Tx||e===D7||typeof e=="object"&&e!==null&&(e.$$typeof===Ax||e.$$typeof===Ex||e.$$typeof===kx||e.$$typeof===Cx||e.$$typeof===Ox||e.$$typeof===DE||e.getModuleId!==void 0)};Kt.typeOf=Rn;PE.exports=Kt;var I7=PE.exports,M7=Zs,F7=ei,R7="[object Number]";function L7(e){return typeof e=="number"||F7(e)&&M7(e)==R7}var IE=L7;const $7=Qt(IE);var B7=IE;function U7(e){return B7(e)&&e!=+e}var W7=U7;const If=Qt(W7);var Qn=function(t){return t===0?0:t>0?1:-1},vo=function(t){return Bo(t)&&t.indexOf("%")===t.length-1},Re=function(t){return $7(t)&&!If(t)},q7=function(t){return vt(t)},qr=function(t){return Re(t)||Bo(t)},K7=0,Mf=function(t){var r=++K7;return"".concat(t||"").concat(r)},Uo=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Re(t)&&!Bo(t))return a;var i;if(vo(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return If(i)&&(i=a),s&&i>r&&(i=r),i},hi=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},V7=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},Gn=function(t,r){return Re(t)&&Re(r)?function(a){return t+a*(r-t)}:function(){return r}};function Lm(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):An(a,t))===r})}var z7=function(t,r){return Re(t)&&Re(r)?t-r:Bo(t)&&Bo(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Hl(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Gy(e){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(e)}var H7=["viewBox","children"],G7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],k2=["points","pathLength"],Zp={svg:H7,polygon:k2,polyline:k2},Xb=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],$m=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(C.isValidElement(t)&&(a=t.props),!Wc(a))return null;var s={};return Object.keys(a).forEach(function(i){Xb.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},X7=function(t,r,a){return function(s){return t(r,a,s),null}},Bm=function(t,r,a){if(!Wc(t)||Gy(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];Xb.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=X7(o,r,a))}),s},Y7=["children"],Q7=["children"];function C2(e,t){if(e==null)return{};var r=J7(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function J7(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Xy(e){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(e)}var O2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},_2=null,eg=null,Yb=function e(t){if(t===_2&&Array.isArray(eg))return eg;var r=[];return C.Children.forEach(t,function(a){vt(a)||(I7.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),eg=r,_2=t,r};function Pn(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return Fs(s)}):a=[Fs(t)],Yb(e).forEach(function(s){var i=An(s,"type.displayName")||An(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function Ja(e,t){var r=Pn(e,t);return r&&r[0]}var T2=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!Re(a)||a<=0||!Re(s)||s<=0)},Z7=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],eB=function(t){return t&&t.type&&Bo(t.type)&&Z7.indexOf(t.type)>=0},tB=function(t){return t&&Xy(t)==="object"&&"clipDot"in t},rB=function(t,r,a,s){var i,o=(i=Zp==null?void 0:Zp[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!xt(t)&&(s&&o.includes(r)||G7.includes(r))||a&&Xb.includes(r)},St=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(C.isValidElement(t)&&(s=t.props),!Wc(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;rB((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},Yy=function e(t,r){if(t===r)return!0;var a=C.Children.count(t);if(a!==C.Children.count(r))return!1;if(a===0)return!0;if(a===1)return E2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!E2(i,o))return!1}return!0},E2=function(t,r){if(vt(t)&&vt(r))return!0;if(!vt(t)&&!vt(r)){var a=t.props||{},s=a.children,i=C2(a,Y7),o=r.props||{},l=o.children,c=C2(o,Q7);return s&&l?Hl(i,c)&&Yy(s,l):!s&&!l?Hl(i,c):!1}return!1},A2=function(t,r){var a=[],s={};return Yb(t).forEach(function(i,o){if(eB(i))a.push(i);else if(i){var l=Fs(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var f=u(i,l,o);a.push(f),s[l]=!0}}}),a},aB=function(t){var r=t&&t.type;return r&&O2[r]?O2[r]:null},nB=function(t,r){return Yb(r).indexOf(t)},sB=["children","width","height","viewBox","className","style","title","desc"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qy.apply(this,arguments)}function iB(e,t){if(e==null)return{};var r=oB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function oB(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Jy(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=iB(e,sB),d=s||{width:r,height:a,x:0,y:0},f=Pt("recharts-surface",i);return se.createElement("svg",Qy({},St(u,!0,"svg"),{className:f,width:r,height:a,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),se.createElement("title",null,l),se.createElement("desc",null,c),t)}var lB=["children","className"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zy.apply(this,arguments)}function cB(e,t){if(e==null)return{};var r=uB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function uB(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var _r=se.forwardRef(function(e,t){var r=e.children,a=e.className,s=cB(e,lB),i=Pt("recharts-layer",a);return se.createElement("g",Zy({className:i},St(s,!0),{ref:t}),r)}),Rs=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function dB(e,t,r){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++a<s;)i[a]=e[a+t];return i}var fB=dB,mB=fB;function hB(e,t,r){var a=e.length;return r=r===void 0?a:r,!t&&r>=a?e:mB(e,t,r)}var xB=hB,pB="\\ud800-\\udfff",gB="\\u0300-\\u036f",yB="\\ufe20-\\ufe2f",vB="\\u20d0-\\u20ff",bB=gB+yB+vB,wB="\\ufe0e\\ufe0f",NB="\\u200d",jB=RegExp("["+NB+pB+bB+wB+"]");function SB(e){return jB.test(e)}var ME=SB;function kB(e){return e.split("")}var CB=kB,FE="\\ud800-\\udfff",OB="\\u0300-\\u036f",_B="\\ufe20-\\ufe2f",TB="\\u20d0-\\u20ff",EB=OB+_B+TB,AB="\\ufe0e\\ufe0f",PB="["+FE+"]",ev="["+EB+"]",tv="\\ud83c[\\udffb-\\udfff]",DB="(?:"+ev+"|"+tv+")",RE="[^"+FE+"]",LE="(?:\\ud83c[\\udde6-\\uddff]){2}",$E="[\\ud800-\\udbff][\\udc00-\\udfff]",IB="\\u200d",BE=DB+"?",UE="["+AB+"]?",MB="(?:"+IB+"(?:"+[RE,LE,$E].join("|")+")"+UE+BE+")*",FB=UE+BE+MB,RB="(?:"+[RE+ev+"?",ev,LE,$E,PB].join("|")+")",LB=RegExp(tv+"(?="+tv+")|"+RB+FB,"g");function $B(e){return e.match(LB)||[]}var BB=$B,UB=CB,WB=ME,qB=BB;function KB(e){return WB(e)?qB(e):UB(e)}var VB=KB,zB=xB,HB=ME,GB=VB,XB=TE;function YB(e){return function(t){t=XB(t);var r=HB(t)?GB(t):void 0,a=r?r[0]:t.charAt(0),s=r?zB(r,1).join(""):t.slice(1);return a[e]()+s}}var QB=YB,JB=QB,ZB=JB("toUpperCase"),e9=ZB;const Px=Qt(e9);function Zt(e){return function(){return e}}const WE=Math.cos,Um=Math.sin,ns=Math.sqrt,Wm=Math.PI,Dx=2*Wm,rv=Math.PI,av=2*rv,fo=1e-6,t9=av-fo;function qE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function r9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qE;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class a9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qE:r9(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,u=s-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>fo)if(!(Math.abs(f*c-u*d)>fo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=a-o,y=s-l,h=c*c+u*u,b=p*p+y*y,N=Math.sqrt(h),S=Math.sqrt(m),v=i*Math.tan((rv-Math.acos((h+m-b)/(2*N*S)))/2),x=v/S,g=v/N;Math.abs(x-1)>fo&&this._append`L${t+x*d},${r+x*f}`,this._append`A${i},${i},0,0,${+(f*p>d*y)},${this._x1=t+g*c},${this._y1=r+g*u}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),u=t+l,d=r+c,f=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>fo||Math.abs(this._y1-d)>fo)&&this._append`L${u},${d}`,a&&(m<0&&(m=m%av+av),m>t9?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=u},${this._y1=d}`:m>fo&&this._append`A${a},${a},0,${+(m>=rv)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Qb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new a9(t)}function Jb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KE(e){this._context=e}KE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ix(e){return new KE(e)}function VE(e){return e[0]}function zE(e){return e[1]}function HE(e,t){var r=Zt(!0),a=null,s=Ix,i=null,o=Qb(l);e=typeof e=="function"?e:e===void 0?VE:Zt(e),t=typeof t=="function"?t:t===void 0?zE:Zt(t);function l(c){var u,d=(c=Jb(c)).length,f,m=!1,p;for(a==null&&(i=s(p=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Zt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Zt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Zt(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function w0(e,t,r){var a=null,s=Zt(!0),i=null,o=Ix,l=null,c=Qb(u);e=typeof e=="function"?e:e===void 0?VE:Zt(+e),t=typeof t=="function"?t:Zt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?zE:Zt(+r);function u(f){var m,p,y,h=(f=Jb(f)).length,b,N=!1,S,v=new Array(h),x=new Array(h);for(i==null&&(l=o(S=c())),m=0;m<=h;++m){if(!(m<h&&s(b=f[m],m,f))===N)if(N=!N)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=p;--y)l.point(v[y],x[y]);l.lineEnd(),l.areaEnd()}N&&(v[m]=+e(b,m,f),x[m]=+t(b,m,f),l.point(a?+a(b,m,f):v[m],r?+r(b,m,f):x[m]))}if(S)return l=null,S+""||null}function d(){return HE().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Zt(+f),a=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Zt(+f),u):e},u.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Zt(+f),u):a},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Zt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Zt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Zt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(a).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Zt(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class GE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function n9(e){return new GE(e,!0)}function s9(e){return new GE(e,!1)}const Zb={draw(e,t){const r=ns(t/Wm);e.moveTo(r,0),e.arc(0,0,r,0,Dx)}},i9={draw(e,t){const r=ns(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},XE=ns(1/3),o9=XE*2,l9={draw(e,t){const r=ns(t/o9),a=r*XE;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},c9={draw(e,t){const r=ns(t),a=-r/2;e.rect(a,a,r,r)}},u9=.8908130915292852,YE=Um(Wm/10)/Um(7*Wm/10),d9=Um(Dx/10)*YE,f9=-WE(Dx/10)*YE,m9={draw(e,t){const r=ns(t*u9),a=d9*r,s=f9*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=Dx*i/5,l=WE(o),c=Um(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},tg=ns(3),h9={draw(e,t){const r=-ns(t/(tg*3));e.moveTo(0,r*2),e.lineTo(-tg*r,-r),e.lineTo(tg*r,-r),e.closePath()}},hn=-.5,xn=ns(3)/2,nv=1/ns(12),x9=(nv/2+1)*3,p9={draw(e,t){const r=ns(t/x9),a=r/2,s=r*nv,i=a,o=r*nv+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(hn*a-xn*s,xn*a+hn*s),e.lineTo(hn*i-xn*o,xn*i+hn*o),e.lineTo(hn*l-xn*c,xn*l+hn*c),e.lineTo(hn*a+xn*s,hn*s-xn*a),e.lineTo(hn*i+xn*o,hn*o-xn*i),e.lineTo(hn*l+xn*c,hn*c-xn*l),e.closePath()}};function g9(e,t){let r=null,a=Qb(s);e=typeof e=="function"?e:Zt(e||Zb),t=typeof t=="function"?t:Zt(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Zt(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Zt(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function qm(){}function Km(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function QE(e){this._context=e}QE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Km(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Km(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y9(e){return new QE(e)}function JE(e){this._context=e}JE.prototype={areaStart:qm,areaEnd:qm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Km(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v9(e){return new JE(e)}function ZE(e){this._context=e}ZE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Km(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b9(e){return new ZE(e)}function e3(e){this._context=e}e3.prototype={areaStart:qm,areaEnd:qm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function w9(e){return new e3(e)}function P2(e){return e<0?-1:1}function D2(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(P2(i)+P2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function I2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function rg(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function Vm(e){this._context=e}Vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rg(this,this._t0,I2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,rg(this,I2(this,r=D2(this,e,t)),r);break;default:rg(this,this._t0,r=D2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function t3(e){this._context=new r3(e)}(t3.prototype=Object.create(Vm.prototype)).point=function(e,t){Vm.prototype.point.call(this,t,e)};function r3(e){this._context=e}r3.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function N9(e){return new Vm(e)}function j9(e){return new t3(e)}function a3(e){this._context=e}a3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=M2(e),s=M2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function M2(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function S9(e){return new a3(e)}function Mx(e,t){this._context=e,this._t=t}Mx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function k9(e){return new Mx(e,.5)}function C9(e){return new Mx(e,0)}function O9(e){return new Mx(e,1)}function dc(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function sv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function _9(e,t){return e[t]}function T9(e){const t=[];return t.key=e,t}function E9(){var e=Zt([]),t=sv,r=dc,a=_9;function s(i){var o=Array.from(e.apply(this,arguments),T9),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+a(f,o[l].key,u,i)]).data=f;for(l=0,d=Jb(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Zt(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Zt(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?sv:typeof i=="function"?i:Zt(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??dc,s):r},s}function A9(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}dc(e,t)}}function P9(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}dc(e,t)}}function D9(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[a][1]||0,m=d[a-1][1]||0,p=(f-m)/2,y=0;y<l;++y){var h=e[t[y]],b=h[a][1]||0,N=h[a-1][1]||0;p+=b-N}c+=f,u+=p*f}s[a-1][1]+=s[a-1][0]=r,c&&(r-=u/c)}s[a-1][1]+=s[a-1][0]=r,dc(e,t)}}function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}var I9=["type","size","sizeType"];function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},iv.apply(this,arguments)}function F2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function R2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F2(Object(r),!0).forEach(function(a){M9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function M9(e,t,r){return t=F9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F9(e){var t=R9(e,"string");return Od(t)=="symbol"?t:t+""}function R9(e,t){if(Od(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Od(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L9(e,t){if(e==null)return{};var r=$9(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $9(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var n3={symbolCircle:Zb,symbolCross:i9,symbolDiamond:l9,symbolSquare:c9,symbolStar:m9,symbolTriangle:h9,symbolWye:p9},B9=Math.PI/180,U9=function(t){var r="symbol".concat(Px(t));return n3[r]||Zb},W9=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*B9;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},q9=function(t,r){n3["symbol".concat(Px(t))]=r},ew=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=L9(t,I9),u=R2(R2({},c),{},{type:a,size:i,sizeType:l}),d=function(){var b=U9(a),N=g9().type(b).size(W9(i,l,a));return N()},f=u.className,m=u.cx,p=u.cy,y=St(u,!0);return m===+m&&p===+p&&i===+i?se.createElement("path",iv({},y,{className:Pt("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(p,")"),d:d()})):null};ew.registerSymbol=q9;function fc(e){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(e)}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ov.apply(this,arguments)}function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function K9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(a){_d(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function V9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $2(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i3(a.key),a)}}function z9(e,t,r){return t&&$2(e.prototype,t),r&&$2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function H9(e,t,r){return t=zm(t),G9(e,s3()?Reflect.construct(t,r||[],zm(e).constructor):t.apply(e,r))}function G9(e,t){if(t&&(fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X9(e)}function X9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s3=function(){return!!e})()}function zm(e){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zm(e)}function Y9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lv(e,t)}function lv(e,t){return lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lv(e,t)}function _d(e,t,r){return t=i3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i3(e){var t=Q9(e,"string");return fc(t)=="symbol"?t:t+""}function Q9(e,t){if(fc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(fc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pn=32,tw=function(e){function t(){return V9(this,t),H9(this,t,arguments)}return Y9(t,e),z9(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=pn/2,o=pn/6,l=pn/3,c=a.inactive?s:a.color;if(a.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:pn,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(pn,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return se.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(pn/8,"h").concat(pn,"v").concat(pn*3/4,"h").concat(-pn,"z"),className:"recharts-legend-icon"});if(se.isValidElement(a.legendIcon)){var u=K9({},a);return delete u.legendIcon,se.cloneElement(a.legendIcon,u)}return se.createElement(ew,{fill:c,cx:i,cy:i,size:pn,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:pn,height:pn},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var h=p.formatter||c,b=Pt(_d(_d({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var N=xt(p.value)?null:p.value;Rs(!xt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=p.inactive?u:p.color;return se.createElement("li",ov({className:b,style:f,key:"legend-item-".concat(y)},Bm(a.props,p,y)),se.createElement(Jy,{width:o,height:o,viewBox:d,style:m},a.renderIcon(p)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},h?h(N,p,y):N))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(C.PureComponent);_d(tw,"displayName","Legend");_d(tw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var J9=vx;function Z9(){this.__data__=new J9,this.size=0}var eU=Z9;function tU(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var rU=tU;function aU(e){return this.__data__.get(e)}var nU=aU;function sU(e){return this.__data__.has(e)}var iU=sU,oU=vx,lU=Wb,cU=qb,uU=200;function dU(e,t){var r=this.__data__;if(r instanceof oU){var a=r.__data__;if(!lU||a.length<uU-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new cU(a)}return r.set(e,t),this.size=r.size,this}var fU=dU,mU=vx,hU=eU,xU=rU,pU=nU,gU=iU,yU=fU;function zc(e){var t=this.__data__=new mU(e);this.size=t.size}zc.prototype.clear=hU;zc.prototype.delete=xU;zc.prototype.get=pU;zc.prototype.has=gU;zc.prototype.set=yU;var o3=zc,vU="__lodash_hash_undefined__";function bU(e){return this.__data__.set(e,vU),this}var wU=bU;function NU(e){return this.__data__.has(e)}var jU=NU,SU=qb,kU=wU,CU=jU;function Hm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new SU;++t<r;)this.add(e[t])}Hm.prototype.add=Hm.prototype.push=kU;Hm.prototype.has=CU;var l3=Hm;function OU(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var c3=OU;function _U(e,t){return e.has(t)}var u3=_U,TU=l3,EU=c3,AU=u3,PU=1,DU=2;function IU(e,t,r,a,s,i){var o=r&PU,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,p=r&DU?new TU:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var y=e[f],h=t[f];if(a)var b=o?a(h,y,f,t,e,i):a(y,h,f,e,t,i);if(b!==void 0){if(b)continue;m=!1;break}if(p){if(!EU(t,function(N,S){if(!AU(p,S)&&(y===N||s(y,N,r,a,i)))return p.push(S)})){m=!1;break}}else if(!(y===h||s(y,h,r,a,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var d3=IU,MU=ws,FU=MU.Uint8Array,RU=FU;function LU(e){var t=-1,r=Array(e.size);return e.forEach(function(a,s){r[++t]=[s,a]}),r}var $U=LU;function BU(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var rw=BU,B2=Df,U2=RU,UU=Ub,WU=d3,qU=$U,KU=rw,VU=1,zU=2,HU="[object Boolean]",GU="[object Date]",XU="[object Error]",YU="[object Map]",QU="[object Number]",JU="[object RegExp]",ZU="[object Set]",eW="[object String]",tW="[object Symbol]",rW="[object ArrayBuffer]",aW="[object DataView]",W2=B2?B2.prototype:void 0,ag=W2?W2.valueOf:void 0;function nW(e,t,r,a,s,i,o){switch(r){case aW:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case rW:return!(e.byteLength!=t.byteLength||!i(new U2(e),new U2(t)));case HU:case GU:case QU:return UU(+e,+t);case XU:return e.name==t.name&&e.message==t.message;case JU:case eW:return e==t+"";case YU:var l=qU;case ZU:var c=a&VU;if(l||(l=KU),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;a|=zU,o.set(e,t);var d=WU(l(e),l(t),a,s,i,o);return o.delete(e),d;case tW:if(ag)return ag.call(e)==ag.call(t)}return!1}var sW=nW;function iW(e,t){for(var r=-1,a=t.length,s=e.length;++r<a;)e[s+r]=t[r];return e}var f3=iW,oW=f3,lW=Ga;function cW(e,t,r){var a=t(e);return lW(e)?a:oW(a,r(e))}var uW=cW;function dW(e,t){for(var r=-1,a=e==null?0:e.length,s=0,i=[];++r<a;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var fW=dW;function mW(){return[]}var hW=mW,xW=fW,pW=hW,gW=Object.prototype,yW=gW.propertyIsEnumerable,q2=Object.getOwnPropertySymbols,vW=q2?function(e){return e==null?[]:(e=Object(e),xW(q2(e),function(t){return yW.call(e,t)}))}:pW,bW=vW;function wW(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var NW=wW,jW=Zs,SW=ei,kW="[object Arguments]";function CW(e){return SW(e)&&jW(e)==kW}var OW=CW,K2=OW,_W=ei,m3=Object.prototype,TW=m3.hasOwnProperty,EW=m3.propertyIsEnumerable,AW=K2(function(){return arguments}())?K2:function(e){return _W(e)&&TW.call(e,"callee")&&!EW.call(e,"callee")},aw=AW,Gm={exports:{}};function PW(){return!1}var DW=PW;Gm.exports;(function(e,t){var r=ws,a=DW,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||a;e.exports=u})(Gm,Gm.exports);var h3=Gm.exports,IW=9007199254740991,MW=/^(?:0|[1-9]\d*)$/;function FW(e,t){var r=typeof e;return t=t??IW,!!t&&(r=="number"||r!="symbol"&&MW.test(e))&&e>-1&&e%1==0&&e<t}var nw=FW,RW=9007199254740991;function LW(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=RW}var sw=LW,$W=Zs,BW=sw,UW=ei,WW="[object Arguments]",qW="[object Array]",KW="[object Boolean]",VW="[object Date]",zW="[object Error]",HW="[object Function]",GW="[object Map]",XW="[object Number]",YW="[object Object]",QW="[object RegExp]",JW="[object Set]",ZW="[object String]",eq="[object WeakMap]",tq="[object ArrayBuffer]",rq="[object DataView]",aq="[object Float32Array]",nq="[object Float64Array]",sq="[object Int8Array]",iq="[object Int16Array]",oq="[object Int32Array]",lq="[object Uint8Array]",cq="[object Uint8ClampedArray]",uq="[object Uint16Array]",dq="[object Uint32Array]",ar={};ar[aq]=ar[nq]=ar[sq]=ar[iq]=ar[oq]=ar[lq]=ar[cq]=ar[uq]=ar[dq]=!0;ar[WW]=ar[qW]=ar[tq]=ar[KW]=ar[rq]=ar[VW]=ar[zW]=ar[HW]=ar[GW]=ar[XW]=ar[YW]=ar[QW]=ar[JW]=ar[ZW]=ar[eq]=!1;function fq(e){return UW(e)&&BW(e.length)&&!!ar[$W(e)]}var mq=fq;function hq(e){return function(t){return e(t)}}var x3=hq,Xm={exports:{}};Xm.exports;(function(e,t){var r=jE,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Xm,Xm.exports);var xq=Xm.exports,pq=mq,gq=x3,V2=xq,z2=V2&&V2.isTypedArray,yq=z2?gq(z2):pq,p3=yq,vq=NW,bq=aw,wq=Ga,Nq=h3,jq=nw,Sq=p3,kq=Object.prototype,Cq=kq.hasOwnProperty;function Oq(e,t){var r=wq(e),a=!r&&bq(e),s=!r&&!a&&Nq(e),i=!r&&!a&&!s&&Sq(e),o=r||a||s||i,l=o?vq(e.length,String):[],c=l.length;for(var u in e)(t||Cq.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jq(u,c)))&&l.push(u);return l}var _q=Oq,Tq=Object.prototype;function Eq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Tq;return e===r}var Aq=Eq;function Pq(e,t){return function(r){return e(t(r))}}var g3=Pq,Dq=g3,Iq=Dq(Object.keys,Object),Mq=Iq,Fq=Aq,Rq=Mq,Lq=Object.prototype,$q=Lq.hasOwnProperty;function Bq(e){if(!Fq(e))return Rq(e);var t=[];for(var r in Object(e))$q.call(e,r)&&r!="constructor"&&t.push(r);return t}var Uq=Bq,Wq=Bb,qq=sw;function Kq(e){return e!=null&&qq(e.length)&&!Wq(e)}var Ff=Kq,Vq=_q,zq=Uq,Hq=Ff;function Gq(e){return Hq(e)?Vq(e):zq(e)}var Fx=Gq,Xq=uW,Yq=bW,Qq=Fx;function Jq(e){return Xq(e,Qq,Yq)}var Zq=Jq,H2=Zq,eK=1,tK=Object.prototype,rK=tK.hasOwnProperty;function aK(e,t,r,a,s,i){var o=r&eK,l=H2(e),c=l.length,u=H2(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var m=l[f];if(!(o?m in t:rK.call(t,m)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var h=!0;i.set(e,t),i.set(t,e);for(var b=o;++f<c;){m=l[f];var N=e[m],S=t[m];if(a)var v=o?a(S,N,m,t,e,i):a(N,S,m,e,t,i);if(!(v===void 0?N===S||s(N,S,r,a,i):v)){h=!1;break}b||(b=m=="constructor")}if(h&&!b){var x=e.constructor,g=t.constructor;x!=g&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof g=="function"&&g instanceof g)&&(h=!1)}return i.delete(e),i.delete(t),h}var nK=aK,sK=tl,iK=ws,oK=sK(iK,"DataView"),lK=oK,cK=tl,uK=ws,dK=cK(uK,"Promise"),fK=dK,mK=tl,hK=ws,xK=mK(hK,"Set"),y3=xK,pK=tl,gK=ws,yK=pK(gK,"WeakMap"),vK=yK,cv=lK,uv=Wb,dv=fK,fv=y3,mv=vK,v3=Zs,Hc=kE,G2="[object Map]",bK="[object Object]",X2="[object Promise]",Y2="[object Set]",Q2="[object WeakMap]",J2="[object DataView]",wK=Hc(cv),NK=Hc(uv),jK=Hc(dv),SK=Hc(fv),kK=Hc(mv),mo=v3;(cv&&mo(new cv(new ArrayBuffer(1)))!=J2||uv&&mo(new uv)!=G2||dv&&mo(dv.resolve())!=X2||fv&&mo(new fv)!=Y2||mv&&mo(new mv)!=Q2)&&(mo=function(e){var t=v3(e),r=t==bK?e.constructor:void 0,a=r?Hc(r):"";if(a)switch(a){case wK:return J2;case NK:return G2;case jK:return X2;case SK:return Y2;case kK:return Q2}return t});var CK=mo,ng=o3,OK=d3,_K=sW,TK=nK,Z2=CK,eS=Ga,tS=h3,EK=p3,AK=1,rS="[object Arguments]",aS="[object Array]",N0="[object Object]",PK=Object.prototype,nS=PK.hasOwnProperty;function DK(e,t,r,a,s,i){var o=eS(e),l=eS(t),c=o?aS:Z2(e),u=l?aS:Z2(t);c=c==rS?N0:c,u=u==rS?N0:u;var d=c==N0,f=u==N0,m=c==u;if(m&&tS(e)){if(!tS(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new ng),o||EK(e)?OK(e,t,r,a,s,i):_K(e,t,c,r,a,s,i);if(!(r&AK)){var p=d&&nS.call(e,"__wrapped__"),y=f&&nS.call(t,"__wrapped__");if(p||y){var h=p?e.value():e,b=y?t.value():t;return i||(i=new ng),s(h,b,r,a,i)}}return m?(i||(i=new ng),TK(e,t,r,a,s,i)):!1}var IK=DK,MK=IK,sS=ei;function b3(e,t,r,a,s){return e===t?!0:e==null||t==null||!sS(e)&&!sS(t)?e!==e&&t!==t:MK(e,t,r,a,b3,s)}var iw=b3,FK=o3,RK=iw,LK=1,$K=2;function BK(e,t,r,a){var s=r.length,i=s,o=!a;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new FK;if(a)var m=a(u,d,c,e,t,f);if(!(m===void 0?RK(d,u,LK|$K,a,f):m))return!1}}return!0}var UK=BK,WK=Gi;function qK(e){return e===e&&!WK(e)}var w3=qK,KK=w3,VK=Fx;function zK(e){for(var t=VK(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,KK(s)]}return t}var HK=zK;function GK(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var N3=GK,XK=UK,YK=HK,QK=N3;function JK(e){var t=YK(e);return t.length==1&&t[0][2]?QK(t[0][0],t[0][1]):function(r){return r===e||XK(r,e,t)}}var ZK=JK;function eV(e,t){return e!=null&&t in Object(e)}var tV=eV,rV=EE,aV=aw,nV=Ga,sV=nw,iV=sw,oV=wx;function lV(e,t,r){t=rV(t,e);for(var a=-1,s=t.length,i=!1;++a<s;){var o=oV(t[a]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++a!=s?i:(s=e==null?0:e.length,!!s&&iV(s)&&sV(o,s)&&(nV(e)||aV(e)))}var cV=lV,uV=tV,dV=cV;function fV(e,t){return e!=null&&dV(e,t,uV)}var mV=fV,hV=iw,xV=AE,pV=mV,gV=$b,yV=w3,vV=N3,bV=wx,wV=1,NV=2;function jV(e,t){return gV(e)&&yV(t)?vV(bV(e),t):function(r){var a=xV(r,e);return a===void 0&&a===t?pV(r,e):hV(t,a,wV|NV)}}var SV=jV;function kV(e){return e}var Gc=kV;function CV(e){return function(t){return t==null?void 0:t[e]}}var OV=CV,_V=zb;function TV(e){return function(t){return _V(t,e)}}var EV=TV,AV=OV,PV=EV,DV=$b,IV=wx;function MV(e){return DV(e)?AV(IV(e)):PV(e)}var FV=MV,RV=ZK,LV=SV,$V=Gc,BV=Ga,UV=FV;function WV(e){return typeof e=="function"?e:e==null?$V:typeof e=="object"?BV(e)?LV(e[0],e[1]):RV(e):UV(e)}var Xi=WV;function qV(e,t,r,a){for(var s=e.length,i=r+(a?1:-1);a?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var j3=qV;function KV(e){return e!==e}var VV=KV;function zV(e,t,r){for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}var HV=zV,GV=j3,XV=VV,YV=HV;function QV(e,t,r){return t===t?YV(e,t,r):GV(e,XV,r)}var JV=QV,ZV=JV;function ez(e,t){var r=e==null?0:e.length;return!!r&&ZV(e,t,0)>-1}var tz=ez;function rz(e,t,r){for(var a=-1,s=e==null?0:e.length;++a<s;)if(r(t,e[a]))return!0;return!1}var az=rz;function nz(){}var sz=nz,sg=y3,iz=sz,oz=rw,lz=1/0,cz=sg&&1/oz(new sg([,-0]))[1]==lz?function(e){return new sg(e)}:iz,uz=cz,dz=l3,fz=tz,mz=az,hz=u3,xz=uz,pz=rw,gz=200;function yz(e,t,r){var a=-1,s=fz,i=e.length,o=!0,l=[],c=l;if(r)o=!1,s=mz;else if(i>=gz){var u=t?null:xz(e);if(u)return pz(u);o=!1,s=hz,c=new dz}else c=t?[]:l;e:for(;++a<i;){var d=e[a],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),l.push(d)}else s(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var vz=yz,bz=Xi,wz=vz;function Nz(e,t){return e&&e.length?wz(e,bz(t)):[]}var jz=Nz;const iS=Qt(jz);function S3(e,t,r){return t===!0?iS(e,r):xt(t)?iS(e,t):e}function mc(e){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(e)}var Sz=["ref"];function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(a){Rx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,C3(a.key),a)}}function Cz(e,t,r){return t&&lS(e.prototype,t),r&&lS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oz(e,t,r){return t=Ym(t),_z(e,k3()?Reflect.construct(t,r||[],Ym(e).constructor):t.apply(e,r))}function _z(e,t){if(t&&(mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tz(e)}function Tz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k3=function(){return!!e})()}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ym(e)}function Ez(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hv(e,t)}function hv(e,t){return hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},hv(e,t)}function Rx(e,t,r){return t=C3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C3(e){var t=Az(e,"string");return mc(t)=="symbol"?t:t+""}function Az(e,t){if(mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(mc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pz(e,t){if(e==null)return{};var r=Dz(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dz(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Iz(e){return e.value}function Mz(e,t){if(se.isValidElement(e))return se.cloneElement(e,t);if(typeof e=="function")return se.createElement(e,t);t.ref;var r=Pz(t,Sz);return se.createElement(tw,r)}var cS=1,Gl=function(e){function t(){var r;kz(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Oz(this,t,[].concat(s)),Rx(r,"lastBoundingBox",{width:-1,height:-1}),r}return Ez(t,e),Cz(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>cS||Math.abs(s.height-this.lastBoundingBox.height)>cS)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ks({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,f,m;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();m={top:((d||0)-y.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ks(ks({},f),m)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,f=ks(ks({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return se.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){a.wrapperNode=p}},Mz(i,ks(ks({},this.props),{},{payload:S3(d,u,Iz)})))}}],[{key:"getWithHeight",value:function(a,s){var i=ks(ks({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&Re(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])}(C.PureComponent);Rx(Gl,"displayName","Legend");Rx(Gl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uS=Df,Fz=aw,Rz=Ga,dS=uS?uS.isConcatSpreadable:void 0;function Lz(e){return Rz(e)||Fz(e)||!!(dS&&e&&e[dS])}var $z=Lz,Bz=f3,Uz=$z;function O3(e,t,r,a,s){var i=-1,o=e.length;for(r||(r=Uz),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?O3(l,t-1,r,a,s):Bz(s,l):a||(s[s.length]=l)}return s}var _3=O3;function Wz(e){return function(t,r,a){for(var s=-1,i=Object(t),o=a(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var qz=Wz,Kz=qz,Vz=Kz(),zz=Vz,Hz=zz,Gz=Fx;function Xz(e,t){return e&&Hz(e,t,Gz)}var T3=Xz,Yz=Ff;function Qz(e,t){return function(r,a){if(r==null)return r;if(!Yz(r))return e(r,a);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&a(o[i],i,o)!==!1;);return r}}var Jz=Qz,Zz=T3,eH=Jz,tH=eH(Zz),ow=tH,rH=ow,aH=Ff;function nH(e,t){var r=-1,a=aH(e)?Array(e.length):[];return rH(e,function(s,i,o){a[++r]=t(s,i,o)}),a}var E3=nH;function sH(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var iH=sH,fS=Uc;function oH(e,t){if(e!==t){var r=e!==void 0,a=e===null,s=e===e,i=fS(e),o=t!==void 0,l=t===null,c=t===t,u=fS(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||a&&o&&c||!r&&c||!s)return 1;if(!a&&!i&&!u&&e<t||u&&r&&s&&!a&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var lH=oH,cH=lH;function uH(e,t,r){for(var a=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++a<o;){var c=cH(s[a],i[a]);if(c){if(a>=l)return c;var u=r[a];return c*(u=="desc"?-1:1)}}return e.index-t.index}var dH=uH,ig=Vb,fH=zb,mH=Xi,hH=E3,xH=iH,pH=x3,gH=dH,yH=Gc,vH=Ga;function bH(e,t,r){t.length?t=ig(t,function(i){return vH(i)?function(o){return fH(o,i.length===1?i[0]:i)}:i}):t=[yH];var a=-1;t=ig(t,pH(mH));var s=hH(e,function(i,o,l){var c=ig(t,function(u){return u(i)});return{criteria:c,index:++a,value:i}});return xH(s,function(i,o){return gH(i,o,r)})}var wH=bH;function NH(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var jH=NH,SH=jH,mS=Math.max;function kH(e,t,r){return t=mS(t===void 0?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=mS(a.length-t,0),o=Array(i);++s<i;)o[s]=a[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=a[s];return l[t]=r(o),SH(e,this,l)}}var CH=kH;function OH(e){return function(){return e}}var _H=OH,TH=tl,EH=function(){try{var e=TH(Object,"defineProperty");return e({},"",{}),e}catch{}}(),A3=EH,AH=_H,hS=A3,PH=Gc,DH=hS?function(e,t){return hS(e,"toString",{configurable:!0,enumerable:!1,value:AH(t),writable:!0})}:PH,IH=DH,MH=800,FH=16,RH=Date.now;function LH(e){var t=0,r=0;return function(){var a=RH(),s=FH-(a-r);if(r=a,s>0){if(++t>=MH)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var $H=LH,BH=IH,UH=$H,WH=UH(BH),qH=WH,KH=Gc,VH=CH,zH=qH;function HH(e,t){return zH(VH(e,t,KH),e+"")}var GH=HH,XH=Ub,YH=Ff,QH=nw,JH=Gi;function ZH(e,t,r){if(!JH(r))return!1;var a=typeof t;return(a=="number"?YH(r)&&QH(t,r.length):a=="string"&&t in r)?XH(r[t],e):!1}var Lx=ZH,eG=_3,tG=wH,rG=GH,xS=Lx,aG=rG(function(e,t){if(e==null)return[];var r=t.length;return r>1&&xS(e,t[0],t[1])?t=[]:r>2&&xS(t[0],t[1],t[2])&&(t=[t[0]]),tG(e,eG(t,1),[])}),nG=aG;const lw=Qt(nG);function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xv.apply(this,arguments)}function sG(e,t){return cG(e)||lG(e,t)||oG(e,t)||iG()}function iG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oG(e,t){if(e){if(typeof e=="string")return pS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pS(e,t)}}function pS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function lG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function cG(e){if(Array.isArray(e))return e}function gS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function og(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(r),!0).forEach(function(a){uG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uG(e,t,r){return t=dG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dG(e){var t=fG(e,"string");return Td(t)=="symbol"?t:t+""}function fG(e,t){if(Td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Td(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mG(e){return Array.isArray(e)&&qr(e[0])&&qr(e[1])?e.join(" ~ "):e}var hG=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,m=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,h=t.label,b=t.labelFormatter,N=t.accessibilityLayer,S=N===void 0?!1:N,v=function(){if(d&&d.length){var k={padding:0,margin:0},A=(m?lw(d,m):d).map(function(P,M){if(P.type==="none")return null;var U=og({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},l),W=P.formatter||f||mG,Y=P.value,B=P.name,ae=Y,oe=B;if(W&&ae!=null&&oe!=null){var D=W(Y,B,P,M,d);if(Array.isArray(D)){var H=sG(D,2);ae=H[0],oe=H[1]}else ae=D}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:U},qr(oe)?se.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,qr(oe)?se.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,se.createElement("span",{className:"recharts-tooltip-item-value"},ae),se.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:k},A)}return null},x=og({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),g=og({margin:0},u),w=!vt(h),j=w?h:"",O=Pt("recharts-default-tooltip",p),_=Pt("recharts-tooltip-label",y);w&&b&&d!==void 0&&d!==null&&(j=b(h,d));var E=S?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",xv({className:O,style:x},E),se.createElement("p",{className:_,style:g},se.isValidElement(j)?j:"".concat(j)),v())};function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function j0(e,t,r){return t=xG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xG(e){var t=pG(e,"string");return Ed(t)=="symbol"?t:t+""}function pG(e,t){if(Ed(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ed(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gu="recharts-tooltip-wrapper",gG={visibility:"hidden"};function yG(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return Pt(gu,j0(j0(j0(j0({},"".concat(gu,"-right"),Re(r)&&t&&Re(t.x)&&r>=t.x),"".concat(gu,"-left"),Re(r)&&t&&Re(t.x)&&r<t.x),"".concat(gu,"-bottom"),Re(a)&&t&&Re(t.y)&&a>=t.y),"".concat(gu,"-top"),Re(a)&&t&&Re(t.y)&&a<t.y))}function yS(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Re(i[a]))return i[a];var d=r[a]-l-s,f=r[a]+s;if(t[a])return o[a]?d:f;if(o[a]){var m=d,p=c[a];return m<p?Math.max(f,c[a]):Math.max(d,c[a])}var y=f+l,h=c[a]+u;return y>h?Math.max(d,c[a]):Math.max(f,c[a])}function vG(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function bG(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=yS({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=yS({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=vG({translateX:d,translateY:f,useTranslate3d:l})):u=gG,{cssProperties:u,cssClasses:yG({translateX:d,translateY:f,coordinate:r})}}function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function vS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vS(Object(r),!0).forEach(function(a){gv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,D3(a.key),a)}}function NG(e,t,r){return t&&wS(e.prototype,t),r&&wS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jG(e,t,r){return t=Qm(t),SG(e,P3()?Reflect.construct(t,r||[],Qm(e).constructor):t.apply(e,r))}function SG(e,t){if(t&&(hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kG(e)}function kG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P3=function(){return!!e})()}function Qm(e){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qm(e)}function CG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pv(e,t)}function pv(e,t){return pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},pv(e,t)}function gv(e,t,r){return t=D3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D3(e){var t=OG(e,"string");return hc(t)=="symbol"?t:t+""}function OG(e,t){if(hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(hc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NS=1,_G=function(e){function t(){var r;wG(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=jG(this,t,[].concat(s)),gv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gv(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return CG(t,e),NG(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>NS||Math.abs(a.height-this.state.lastBoundingBox.height)>NS)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,f=s.hasPayload,m=s.isAnimationActive,p=s.offset,y=s.position,h=s.reverseDirection,b=s.useTranslate3d,N=s.viewBox,S=s.wrapperStyle,v=bG({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:y,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:N}),x=v.cssClasses,g=v.cssProperties,w=bS(bS({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},g),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},S);return se.createElement("div",{tabIndex:-1,className:x,style:w,ref:function(O){a.wrapperNode=O}},u)}}])}(C.PureComponent),TG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ls={isSsr:TG(),get:function(t){return Ls[t]},set:function(t,r){if(typeof t=="string")Ls[t]=r;else{var a=Object.keys(t);a&&a.length&&a.forEach(function(s){Ls[s]=t[s]})}}};function xc(e){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(e)}function jS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function SS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(r),!0).forEach(function(a){cw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function EG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,M3(a.key),a)}}function AG(e,t,r){return t&&kS(e.prototype,t),r&&kS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function PG(e,t,r){return t=Jm(t),DG(e,I3()?Reflect.construct(t,r||[],Jm(e).constructor):t.apply(e,r))}function DG(e,t){if(t&&(xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IG(e)}function IG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I3=function(){return!!e})()}function Jm(e){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jm(e)}function MG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yv(e,t)}function yv(e,t){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},yv(e,t)}function cw(e,t,r){return t=M3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M3(e){var t=FG(e,"string");return xc(t)=="symbol"?t:t+""}function FG(e,t){if(xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(xc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RG(e){return e.dataKey}function LG(e,t){return se.isValidElement(e)?se.cloneElement(e,t):typeof e=="function"?se.createElement(e,t):se.createElement(hG,t)}var jn=function(e){function t(){return EG(this,t),PG(this,t,arguments)}return MG(t,e),AG(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,f=s.filterNull,m=s.isAnimationActive,p=s.offset,y=s.payload,h=s.payloadUniqBy,b=s.position,N=s.reverseDirection,S=s.useTranslate3d,v=s.viewBox,x=s.wrapperStyle,g=y??[];f&&g.length&&(g=S3(y.filter(function(j){return j.value!=null&&(j.hide!==!0||a.props.includeHidden)}),h,RG));var w=g.length>0;return se.createElement(_G,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:w,offset:p,position:b,reverseDirection:N,useTranslate3d:S,viewBox:v,wrapperStyle:x},LG(u,SS(SS({},this.props),{},{payload:g})))}}])}(C.PureComponent);cw(jn,"displayName","Tooltip");cw(jn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ls.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $G=ws,BG=function(){return $G.Date.now()},UG=BG,WG=/\s/;function qG(e){for(var t=e.length;t--&&WG.test(e.charAt(t)););return t}var KG=qG,VG=KG,zG=/^\s+/;function HG(e){return e&&e.slice(0,VG(e)+1).replace(zG,"")}var GG=HG,XG=GG,CS=Gi,YG=Uc,OS=0/0,QG=/^[-+]0x[0-9a-f]+$/i,JG=/^0b[01]+$/i,ZG=/^0o[0-7]+$/i,eX=parseInt;function tX(e){if(typeof e=="number")return e;if(YG(e))return OS;if(CS(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=CS(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=XG(e);var r=JG.test(e);return r||ZG.test(e)?eX(e.slice(2),r?2:8):QG.test(e)?OS:+e}var F3=tX,rX=Gi,lg=UG,_S=F3,aX="Expected a function",nX=Math.max,sX=Math.min;function iX(e,t,r){var a,s,i,o,l,c,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(aX);t=_S(t)||0,rX(r)&&(d=!!r.leading,f="maxWait"in r,i=f?nX(_S(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function p(w){var j=a,O=s;return a=s=void 0,u=w,o=e.apply(O,j),o}function y(w){return u=w,l=setTimeout(N,t),d?p(w):o}function h(w){var j=w-c,O=w-u,_=t-j;return f?sX(_,i-O):_}function b(w){var j=w-c,O=w-u;return c===void 0||j>=t||j<0||f&&O>=i}function N(){var w=lg();if(b(w))return S(w);l=setTimeout(N,h(w))}function S(w){return l=void 0,m&&a?p(w):(a=s=void 0,o)}function v(){l!==void 0&&clearTimeout(l),u=0,a=c=s=l=void 0}function x(){return l===void 0?o:S(lg())}function g(){var w=lg(),j=b(w);if(a=arguments,s=this,c=w,j){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(N,t),p(c)}return l===void 0&&(l=setTimeout(N,t)),o}return g.cancel=v,g.flush=x,g}var oX=iX,lX=oX,cX=Gi,uX="Expected a function";function dX(e,t,r){var a=!0,s=!0;if(typeof e!="function")throw new TypeError(uX);return cX(r)&&(a="leading"in r?!!r.leading:a,s="trailing"in r?!!r.trailing:s),lX(e,t,{leading:a,maxWait:t,trailing:s})}var fX=dX;const R3=Qt(fX);function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function S0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(a){mX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mX(e,t,r){return t=hX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hX(e){var t=xX(e,"string");return Ad(t)=="symbol"?t:t+""}function xX(e,t){if(Ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ad(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pX(e,t){return bX(e)||vX(e,t)||yX(e,t)||gX()}function gX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yX(e,t){if(e){if(typeof e=="string")return ES(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ES(e,t)}}function ES(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function vX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function bX(e){if(Array.isArray(e))return e}var cg=C.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,m=e.maxHeight,p=e.children,y=e.debounce,h=y===void 0?0:y,b=e.id,N=e.className,S=e.onResize,v=e.style,x=v===void 0?{}:v,g=C.useRef(null),w=C.useRef();w.current=S,C.useImperativeHandle(t,function(){return Object.defineProperty(g.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),g.current},configurable:!0})});var j=C.useState({containerWidth:s.width,containerHeight:s.height}),O=pX(j,2),_=O[0],E=O[1],T=C.useCallback(function(A,P){E(function(M){var U=Math.round(A),W=Math.round(P);return M.containerWidth===U&&M.containerHeight===W?M:{containerWidth:U,containerHeight:W}})},[]);C.useEffect(function(){var A=function(B){var ae,oe=B[0].contentRect,D=oe.width,H=oe.height;T(D,H),(ae=w.current)===null||ae===void 0||ae.call(w,D,H)};h>0&&(A=R3(A,h,{trailing:!0,leading:!1}));var P=new ResizeObserver(A),M=g.current.getBoundingClientRect(),U=M.width,W=M.height;return T(U,W),P.observe(g.current),function(){P.disconnect()}},[T,h]);var k=C.useMemo(function(){var A=_.containerWidth,P=_.containerHeight;if(A<0||P<0)return null;Rs(vo(o)||vo(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Rs(!r||r>0,"The aspect(%s) must be greater than zero.",r);var M=vo(o)?A:o,U=vo(c)?P:c;r&&r>0&&(M?U=M/r:U&&(M=U*r),m&&U>m&&(U=m)),Rs(M>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,U,o,c,d,f,r);var W=!Array.isArray(p)&&Fs(p.type).endsWith("Chart");return se.Children.map(p,function(Y){return se.isValidElement(Y)?C.cloneElement(Y,S0({width:M,height:U},W?{style:S0({height:"100%",width:"100%",maxHeight:U,maxWidth:M},Y.props.style)}:{})):Y})},[r,p,c,m,f,d,_,o]);return se.createElement("div",{id:b?"".concat(b):void 0,className:Pt("recharts-responsive-container",N),style:S0(S0({},x),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:m}),ref:g},k)}),L3=function(t){return null};L3.displayName="Cell";function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function vv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(r),!0).forEach(function(a){wX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wX(e,t,r){return t=NX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NX(e){var t=jX(e,"string");return Pd(t)=="symbol"?t:t+""}function jX(e,t){if(Pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Pd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ml={widthCache:{},cacheCount:0},SX=2e3,kX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},PS="recharts_measurement_span";function CX(e){var t=vv({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var zu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ls.isSsr)return{width:0,height:0};var a=CX(r),s=JSON.stringify({text:t,copyStyle:a});if(ml.widthCache[s])return ml.widthCache[s];try{var i=document.getElementById(PS);i||(i=document.createElement("span"),i.setAttribute("id",PS),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=vv(vv({},kX),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ml.widthCache[s]=c,++ml.cacheCount>SX&&(ml.cacheCount=0,ml.widthCache={}),c}catch{return{width:0,height:0}}},OX=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function Zm(e,t){return AX(e)||EX(e,t)||TX(e,t)||_X()}function _X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TX(e,t){if(e){if(typeof e=="string")return DS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DS(e,t)}}function DS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function EX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function AX(e){if(Array.isArray(e))return e}function PX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IX(a.key),a)}}function DX(e,t,r){return t&&IS(e.prototype,t),r&&IS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IX(e){var t=MX(e,"string");return Dd(t)=="symbol"?t:t+""}function MX(e,t){if(Dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Dd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,RX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},LX=Object.keys($3),Fl="NaN";function $X(e,t){return e*$3[t]}var k0=function(){function e(t,r){PX(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!FX.test(r)&&(this.num=NaN,this.unit=""),LX.includes(r)&&(this.num=$X(t,r),this.unit="px")}return DX(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=RX.exec(r))!==null&&a!==void 0?a:[],i=Zm(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function B3(e){if(e.includes(Fl))return Fl;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=MS.exec(t))!==null&&r!==void 0?r:[],s=Zm(a,4),i=s[1],o=s[2],l=s[3],c=k0.parse(i??""),u=k0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Fl;t=t.replace(MS,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=FS.exec(t))!==null&&f!==void 0?f:[],p=Zm(m,4),y=p[1],h=p[2],b=p[3],N=k0.parse(y??""),S=k0.parse(b??""),v=h==="+"?N.add(S):N.subtract(S);if(v.isNaN())return Fl;t=t.replace(FS,v.toString())}return t}var RS=/\(([^()]*)\)/;function BX(e){for(var t=e;t.includes("(");){var r=RS.exec(t),a=Zm(r,2),s=a[1];t=t.replace(RS,B3(s))}return t}function UX(e){var t=e.replace(/\s+/g,"");return t=BX(t),t=B3(t),t}function WX(e){try{return UX(e)}catch{return Fl}}function ug(e){var t=WX(e.slice(5,-1));return t===Fl?"":t}var qX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],KX=["dx","dy","angle","className","breakAll"];function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bv.apply(this,arguments)}function LS(e,t){if(e==null)return{};var r=VX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function VX(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function $S(e,t){return XX(e)||GX(e,t)||HX(e,t)||zX()}function zX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HX(e,t){if(e){if(typeof e=="string")return BS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BS(e,t)}}function BS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function GX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function XX(e){if(Array.isArray(e))return e}var U3=/[ \f\n\r\t\v\u2028\u2029]+/,W3=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];vt(r)||(a?i=r.toString().split(""):i=r.toString().split(U3));var o=i.map(function(c){return{word:c,width:zu(c,s).width}}),l=a?0:zu("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},YX=function(t,r,a,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Re(o),f=l,m=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(U,W){var Y=W.word,B=W.width,ae=U[U.length-1];if(ae&&(s==null||i||ae.width+B+a<Number(s)))ae.words.push(Y),ae.width+=B+a;else{var oe={words:[Y],width:B};U.push(oe)}return U},[])},p=m(r),y=function(M){return M.reduce(function(U,W){return U.width>W.width?U:W})};if(!d)return p;for(var h="",b=function(M){var U=f.slice(0,M),W=W3({breakAll:u,style:c,children:U+h}).wordsWithComputedWidth,Y=m(W),B=Y.length>o||y(Y).width>Number(s);return[B,Y]},N=0,S=f.length-1,v=0,x;N<=S&&v<=f.length-1;){var g=Math.floor((N+S)/2),w=g-1,j=b(w),O=$S(j,2),_=O[0],E=O[1],T=b(g),k=$S(T,1),A=k[0];if(!_&&!A&&(N=g+1),_&&A&&(S=g-1),!_&&A){x=E;break}v++}return x||p},US=function(t){var r=vt(t)?[]:t.toString().split(U3);return[{words:r}]},QX=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!Ls.isSsr){var c,u,d=W3({breakAll:o,children:s,style:i});if(d){var f=d.wordsWithComputedWidth,m=d.spaceWidth;c=f,u=m}else return US(s);return YX({breakAll:o,children:s,maxLines:l,style:i},c,u,r,a)}return US(s)},WS="#808080",eh=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,m=t.textAnchor,p=m===void 0?"start":m,y=t.verticalAnchor,h=y===void 0?"end":y,b=t.fill,N=b===void 0?WS:b,S=LS(t,qX),v=C.useMemo(function(){return QX({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:f,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,f,S.style,S.width]),x=S.dx,g=S.dy,w=S.angle,j=S.className,O=S.breakAll,_=LS(S,KX);if(!qr(a)||!qr(i))return null;var E=a+(Re(x)?x:0),T=i+(Re(g)?g:0),k;switch(h){case"start":k=ug("calc(".concat(u,")"));break;case"middle":k=ug("calc(".concat((v.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:k=ug("calc(".concat(v.length-1," * -").concat(l,")"));break}var A=[];if(f){var P=v[0].width,M=S.width;A.push("scale(".concat((Re(M)?M/P:1)/P,")"))}return w&&A.push("rotate(".concat(w,", ").concat(E,", ").concat(T,")")),A.length&&(_.transform=A.join(" ")),se.createElement("text",bv({},St(_,!0),{x:E,y:T,className:Pt("recharts-text",j),textAnchor:p,fill:N.includes("url")?WS:N}),v.map(function(U,W){var Y=U.words.join(O?"":" ");return se.createElement("tspan",{x:E,dy:W===0?k:l,key:"".concat(Y,"-").concat(W)},Y)}))};function Pi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JX(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uw(e){let t,r,a;e.length!==2?(t=Pi,r=(l,c)=>Pi(e(l),c),a=(l,c)=>e(l)-c):(t=e===Pi||e===JX?e:ZX,r=e,a=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function ZX(){return 0}function q3(e){return e===null?NaN:+e}function*eY(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(yield a)}}const tY=uw(Pi),rY=tY.right;uw(q3).center;const Rf=rY;class qS extends Map{constructor(t,r=sY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(KS(this,t))}has(t){return super.has(KS(this,t))}set(t,r){return super.set(aY(this,t),r)}delete(t){return super.delete(nY(this,t))}}function KS({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function aY({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function nY({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function sY(e){return e!==null&&typeof e=="object"?e.valueOf():e}function iY(e=Pi){if(e===Pi)return K3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function K3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const oY=Math.sqrt(50),lY=Math.sqrt(10),cY=Math.sqrt(2);function th(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=oY?10:i>=lY?5:i>=cY?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?th(e,t,r*2):[l,c,u]}function wv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?th(t,e,r):th(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function Nv(e,t,r){return t=+t,e=+e,r=+r,th(e,t,r)[2]}function jv(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?Nv(t,e,r):Nv(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function VS(e,t){let r;if(t===void 0)for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function zS(e,t){let r;if(t===void 0)for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function V3(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?K3:iY(s);a>r;){if(a-r>600){const c=a-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+m)),y=Math.min(a,Math.floor(t+(c-u)*f/c+m));V3(e,t,p,y,s)}const i=e[t];let o=r,l=a;for(yu(e,r,t),s(e[a],i)>0&&yu(e,r,a);o<l;){for(yu(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?yu(e,r,l):(++l,yu(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function yu(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function uY(e,t,r){if(e=Float64Array.from(eY(e,r)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return zS(e);if(t>=1)return VS(e);var a,s=(a-1)*t,i=Math.floor(s),o=VS(V3(e,i).subarray(0,i+1)),l=zS(e.subarray(i+1));return o+(l-o)*(s-i)}}function dY(e,t,r=q3){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function fY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Ln(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ti(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Sv=Symbol("implicit");function dw(){var e=new qS,t=[],r=[],a=Sv;function s(i){let o=e.get(i);if(o===void 0){if(a!==Sv)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new qS;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return dw(t,r).unknown(a)},Ln.apply(s,arguments),s}function Id(){var e=dw().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,p=s<a,y=p?s:a,h=p?a:s;i=(h-y)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),y+=(h-y-i*(m-c))*d,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var b=fY(m).map(function(N){return y+i*N});return r(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([a,s]=m,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(m){return[a,s]=m,a=+a,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Id(t(),[a,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ln.apply(f(),arguments)}function z3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return z3(t())},e}function Hu(){return z3(Id.apply(null,arguments).paddingInner(1))}function fw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function H3(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Lf(){}var Md=.7,rh=1/Md,Xl="\\s*([+-]?\\d+)\\s*",Fd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mY=/^#([0-9a-f]{3,8})$/,hY=new RegExp(`^rgb\\(${Xl},${Xl},${Xl}\\)$`),xY=new RegExp(`^rgb\\(${xs},${xs},${xs}\\)$`),pY=new RegExp(`^rgba\\(${Xl},${Xl},${Xl},${Fd}\\)$`),gY=new RegExp(`^rgba\\(${xs},${xs},${xs},${Fd}\\)$`),yY=new RegExp(`^hsl\\(${Fd},${xs},${xs}\\)$`),vY=new RegExp(`^hsla\\(${Fd},${xs},${xs},${Fd}\\)$`),HS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fw(Lf,Rd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:GS,formatHex:GS,formatHex8:bY,formatHsl:wY,formatRgb:XS,toString:XS});function GS(){return this.rgb().formatHex()}function bY(){return this.rgb().formatHex8()}function wY(){return G3(this).formatHsl()}function XS(){return this.rgb().formatRgb()}function Rd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=mY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?YS(t):r===3?new Wa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?C0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?C0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hY.exec(e))?new Wa(t[1],t[2],t[3],1):(t=xY.exec(e))?new Wa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pY.exec(e))?C0(t[1],t[2],t[3],t[4]):(t=gY.exec(e))?C0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yY.exec(e))?ZS(t[1],t[2]/100,t[3]/100,1):(t=vY.exec(e))?ZS(t[1],t[2]/100,t[3]/100,t[4]):HS.hasOwnProperty(e)?YS(HS[e]):e==="transparent"?new Wa(NaN,NaN,NaN,0):null}function YS(e){return new Wa(e>>16&255,e>>8&255,e&255,1)}function C0(e,t,r,a){return a<=0&&(e=t=r=NaN),new Wa(e,t,r,a)}function NY(e){return e instanceof Lf||(e=Rd(e)),e?(e=e.rgb(),new Wa(e.r,e.g,e.b,e.opacity)):new Wa}function kv(e,t,r,a){return arguments.length===1?NY(e):new Wa(e,t,r,a??1)}function Wa(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}fw(Wa,kv,H3(Lf,{brighter(e){return e=e==null?rh:Math.pow(rh,e),new Wa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Md:Math.pow(Md,e),new Wa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wa(ko(this.r),ko(this.g),ko(this.b),ah(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QS,formatHex:QS,formatHex8:jY,formatRgb:JS,toString:JS}));function QS(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}`}function jY(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}${bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function JS(){const e=ah(this.opacity);return`${e===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${e===1?")":`, ${e})`}`}function ah(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bo(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function ZS(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Yn(e,t,r,a)}function G3(e){if(e instanceof Yn)return new Yn(e.h,e.s,e.l,e.opacity);if(e instanceof Lf||(e=Rd(e)),!e)return new Yn;if(e instanceof Yn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Yn(o,l,c,e.opacity)}function SY(e,t,r,a){return arguments.length===1?G3(e):new Yn(e,t,r,a??1)}function Yn(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}fw(Yn,SY,H3(Lf,{brighter(e){return e=e==null?rh:Math.pow(rh,e),new Yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Md:Math.pow(Md,e),new Yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Wa(dg(e>=240?e-240:e+120,s,a),dg(e,s,a),dg(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Yn(ek(this.h),O0(this.s),O0(this.l),ah(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ah(this.opacity);return`${e===1?"hsl(":"hsla("}${ek(this.h)}, ${O0(this.s)*100}%, ${O0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ek(e){return e=(e||0)%360,e<0?e+360:e}function O0(e){return Math.max(0,Math.min(1,e||0))}function dg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const mw=e=>()=>e;function kY(e,t){return function(r){return e+r*t}}function CY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function OY(e){return(e=+e)==1?X3:function(t,r){return r-t?CY(t,r,e):mw(isNaN(t)?r:t)}}function X3(e,t){var r=t-e;return r?kY(e,r):mw(isNaN(e)?t:e)}const tk=function e(t){var r=OY(t);function a(s,i){var o=r((s=kv(s)).r,(i=kv(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=X3(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return a.gamma=e,a}(1);function _Y(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function TY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EY(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=Xc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function AY(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function nh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function PY(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Xc(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var Cv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fg=new RegExp(Cv.source,"g");function DY(e){return function(){return e}}function IY(e){return function(t){return e(t)+""}}function MY(e,t){var r=Cv.lastIndex=fg.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=Cv.exec(e))&&(s=fg.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:nh(a,s)})),r=fg.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?IY(c[0].x):DY(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Xc(e,t){var r=typeof t,a;return t==null||r==="boolean"?mw(t):(r==="number"?nh:r==="string"?(a=Rd(t))?(t=a,tk):MY:t instanceof Rd?tk:t instanceof Date?AY:TY(t)?_Y:Array.isArray(t)?EY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?PY:nh)(e,t)}function hw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function FY(e,t){t===void 0&&(t=e,e=Xc);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function RY(e){return function(){return e}}function sh(e){return+e}var rk=[0,1];function Ia(e){return e}function Ov(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:RY(isNaN(t)?NaN:.5)}function LY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function $Y(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=Ov(s,a),i=r(o,i)):(a=Ov(a,s),i=r(i,o)),function(l){return i(a(l))}}function BY(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=Ov(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Rf(e,l,1,a)-1;return i[c](s[c](l))}}function $f(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $x(){var e=rk,t=rk,r=Xc,a,s,i,o=Ia,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==Ia&&(o=LY(e[0],e[m-1])),l=m>2?BY:$Y,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(a),t,r)))(a(o(m)))}return f.invert=function(m){return o(s((u||(u=l(t,e.map(a),nh)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,sh),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=hw,d()},f.clamp=function(m){return arguments.length?(o=m?!0:Ia,d()):o!==Ia},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,p){return a=m,s=p,d()}}function xw(){return $x()(Ia,Ia)}function UY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ih(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function pc(e){return e=ih(Math.abs(e)),e?e[1]:NaN}function WY(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function qY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var KY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ld(e){if(!(t=KY.exec(e)))throw new Error("invalid format: "+e);var t;return new pw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ld.prototype=pw.prototype;function pw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VY(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var Y3;function zY(e,t){var r=ih(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(Y3=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+ih(e,Math.max(0,t+i-1))[0]}function ak(e,t){var r=ih(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const nk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ak(e*100,t),r:ak,s:zY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sk(e){return e}var ik=Array.prototype.map,ok=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HY(e){var t=e.grouping===void 0||e.thousands===void 0?sk:WY(ik.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?sk:qY(ik.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ld(f);var m=f.fill,p=f.align,y=f.sign,h=f.symbol,b=f.zero,N=f.width,S=f.comma,v=f.precision,x=f.trim,g=f.type;g==="n"?(S=!0,g="g"):nk[g]||(v===void 0&&(v=12),x=!0,g="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var w=h==="$"?r:h==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",j=h==="$"?a:/[%p]/.test(g)?o:"",O=nk[g],_=/[defgprs%]/.test(g);v=v===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function E(T){var k=w,A=j,P,M,U;if(g==="c")A=O(T)+A,T="";else{T=+T;var W=T<0||1/T<0;if(T=isNaN(T)?c:O(Math.abs(T),v),x&&(T=VY(T)),W&&+T==0&&y!=="+"&&(W=!1),k=(W?y==="("?y:l:y==="-"||y==="("?"":y)+k,A=(g==="s"?ok[8+Y3/3]:"")+A+(W&&y==="("?")":""),_){for(P=-1,M=T.length;++P<M;)if(U=T.charCodeAt(P),48>U||U>57){A=(U===46?s+T.slice(P+1):T.slice(P))+A,T=T.slice(0,P);break}}}S&&!b&&(T=t(T,1/0));var Y=k.length+T.length+A.length,B=Y<N?new Array(N-Y+1).join(m):"";switch(S&&b&&(T=t(B+T,B.length?N-A.length:1/0),B=""),p){case"<":T=k+T+A+B;break;case"=":T=k+B+T+A;break;case"^":T=B.slice(0,Y=B.length>>1)+k+T+A+B.slice(Y);break;default:T=B+k+T+A;break}return i(T)}return E.toString=function(){return f+""},E}function d(f,m){var p=u((f=Ld(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(pc(m)/3)))*3,h=Math.pow(10,-y),b=ok[8+y/3];return function(N){return p(h*N)+b}}return{format:u,formatPrefix:d}}var _0,gw,Q3;GY({thousands:",",grouping:[3],currency:["$",""]});function GY(e){return _0=HY(e),gw=_0.format,Q3=_0.formatPrefix,_0}function XY(e){return Math.max(0,-pc(Math.abs(e)))}function YY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pc(t)/3)))*3-pc(Math.abs(e)))}function QY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pc(t)-pc(e))+1}function J3(e,t,r,a){var s=jv(e,t,r),i;switch(a=Ld(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=YY(s,o))&&(a.precision=i),Q3(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=QY(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=XY(s))&&(a.precision=i-(a.type==="%")*2);break}}return gw(a)}function Yi(e){var t=e.domain;return e.ticks=function(r){var a=t();return wv(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return J3(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=Nv(o,l,r),u===c)return a[s]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function oh(){var e=xw();return e.copy=function(){return $f(e,oh())},Ln.apply(e,arguments),Yi(e)}function Z3(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,sh),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return Z3(e).unknown(t)},e=arguments.length?Array.from(e,sh):[0,1],Yi(r)}function eA(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function lk(e){return Math.log(e)}function ck(e){return Math.exp(e)}function JY(e){return-Math.log(-e)}function ZY(e){return-Math.exp(-e)}function eQ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tQ(e){return e===10?eQ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rQ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function uk(e){return(t,r)=>-e(-t,r)}function yw(e){const t=e(lk,ck),r=t.domain;let a=10,s,i;function o(){return s=rQ(a),i=tQ(a),r()[0]<0?(s=uk(s),i=uk(i),e(JY,ZY)):e(lk,ck),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),p=s(d),y,h;const b=l==null?10:+l;let N=[];if(!(a%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(y=1;y<a;++y)if(h=m<0?y/i(-m):y*i(m),!(h<u)){if(h>d)break;N.push(h)}}else for(;m<=p;++m)for(y=a-1;y>=1;--y)if(h=m>0?y/i(-m):y*i(m),!(h<u)){if(h>d)break;N.push(h)}N.length*2<b&&(N=wv(u,d,b))}else N=wv(m,p,Math.min(p-m,b)).map(i);return f?N.reverse():N},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Ld(c)).precision==null&&(c.trim=!0),c=gw(c)),l===1/0)return c;const u=Math.max(1,a*l/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*a<a-.5&&(f*=a),f<=u?c(d):""}},t.nice=()=>r(eA(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function tA(){const e=yw($x()).domain([1,10]);return e.copy=()=>$f(e,tA()).base(e.base()),Ln.apply(e,arguments),e}function dk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function fk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vw(e){var t=1,r=e(dk(t),fk(t));return r.constant=function(a){return arguments.length?e(dk(t=+a),fk(t)):t},Yi(r)}function rA(){var e=vw($x());return e.copy=function(){return $f(e,rA()).constant(e.constant())},Ln.apply(e,arguments)}function mk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function aQ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nQ(e){return e<0?-e*e:e*e}function bw(e){var t=e(Ia,Ia),r=1;function a(){return r===1?e(Ia,Ia):r===.5?e(aQ,nQ):e(mk(r),mk(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},Yi(t)}function ww(){var e=bw($x());return e.copy=function(){return $f(e,ww()).exponent(e.exponent())},Ln.apply(e,arguments),e}function sQ(){return ww.apply(null,arguments).exponent(.5)}function hk(e){return Math.sign(e)*e*e}function iQ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function aA(){var e=xw(),t=[0,1],r=!1,a;function s(i){var o=iQ(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(hk(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,sh)).map(hk)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return aA(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Ln.apply(s,arguments),Yi(s)}function nA(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=dY(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[Rf(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Pi),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return nA().domain(e).range(t).unknown(a)},Ln.apply(i,arguments)}function sA(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Rf(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return sA().domain([e,t]).range(s).unknown(i)},Ln.apply(Yi(o),arguments)}function iA(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[Rf(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return iA().domain(e).range(t).unknown(r)},Ln.apply(s,arguments)}const mg=new Date,hg=new Date;function Vr(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Vr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(mg.setTime(+i),hg.setTime(+o),e(mg),e(hg),Math.floor(r(mg,hg))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const lh=Vr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):lh);lh.range;const Es=1e3,On=Es*60,As=On*60,Hs=As*24,Nw=Hs*7,xk=Hs*30,xg=Hs*365,wo=Vr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Es)},(e,t)=>(t-e)/Es,e=>e.getUTCSeconds());wo.range;const jw=Vr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Es)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getMinutes());jw.range;const Sw=Vr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getUTCMinutes());Sw.range;const kw=Vr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Es-e.getMinutes()*On)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getHours());kw.range;const Cw=Vr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getUTCHours());Cw.range;const Bf=Vr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*On)/Hs,e=>e.getDate()-1);Bf.range;const Bx=Vr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hs,e=>e.getUTCDate()-1);Bx.range;const oA=Vr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hs,e=>Math.floor(e/Hs));oA.range;function rl(e){return Vr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*On)/Nw)}const Ux=rl(0),ch=rl(1),oQ=rl(2),lQ=rl(3),gc=rl(4),cQ=rl(5),uQ=rl(6);Ux.range;ch.range;oQ.range;lQ.range;gc.range;cQ.range;uQ.range;function al(e){return Vr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Nw)}const Wx=al(0),uh=al(1),dQ=al(2),fQ=al(3),yc=al(4),mQ=al(5),hQ=al(6);Wx.range;uh.range;dQ.range;fQ.range;yc.range;mQ.range;hQ.range;const Ow=Vr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ow.range;const _w=Vr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_w.range;const Gs=Vr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Gs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Gs.range;const Xs=Vr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Xs.range;function lA(e,t,r,a,s,i){const o=[[wo,1,Es],[wo,5,5*Es],[wo,15,15*Es],[wo,30,30*Es],[i,1,On],[i,5,5*On],[i,15,15*On],[i,30,30*On],[s,1,As],[s,3,3*As],[s,6,6*As],[s,12,12*As],[a,1,Hs],[a,2,2*Hs],[r,1,Nw],[t,1,xk],[t,3,3*xk],[e,1,xg]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),y=p?p.range(u,+d+1):[];return m?y.reverse():y}function c(u,d,f){const m=Math.abs(d-u)/f,p=uw(([,,b])=>b).right(o,m);if(p===o.length)return e.every(jv(u/xg,d/xg,f));if(p===0)return lh.every(Math.max(jv(u,d,f),1));const[y,h]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return y.every(h)}return[l,c]}const[xQ,pQ]=lA(Xs,_w,Wx,oA,Cw,Sw),[gQ,yQ]=lA(Gs,Ow,Ux,Bf,kw,jw);function pg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function vQ(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=bu(s),d=wu(s),f=bu(i),m=wu(i),p=bu(o),y=wu(o),h=bu(l),b=wu(l),N=bu(c),S=wu(c),v={a:W,A:Y,b:B,B:ae,c:null,d:wk,e:wk,f:WQ,g:JQ,G:eJ,H:$Q,I:BQ,j:UQ,L:cA,m:qQ,M:KQ,p:oe,q:D,Q:Sk,s:kk,S:VQ,u:zQ,U:HQ,V:GQ,w:XQ,W:YQ,x:null,X:null,y:QQ,Y:ZQ,Z:tJ,"%":jk},x={a:H,A:G,b:Z,B:X,c:null,d:Nk,e:Nk,f:sJ,g:xJ,G:gJ,H:rJ,I:aJ,j:nJ,L:dA,m:iJ,M:oJ,p:ie,q:pe,Q:Sk,s:kk,S:lJ,u:cJ,U:uJ,V:dJ,w:fJ,W:mJ,x:null,X:null,y:hJ,Y:pJ,Z:yJ,"%":jk},g={a:E,A:T,b:k,B:A,c:P,d:vk,e:vk,f:MQ,g:yk,G:gk,H:bk,I:bk,j:AQ,L:IQ,m:EQ,M:PQ,p:_,q:TQ,Q:RQ,s:LQ,S:DQ,u:SQ,U:kQ,V:CQ,w:jQ,W:OQ,x:M,X:U,y:yk,Y:gk,Z:_Q,"%":FQ};v.x=w(r,v),v.X=w(a,v),v.c=w(t,v),x.x=w(r,x),x.X=w(a,x),x.c=w(t,x);function w(ne,ee){return function(we){var F=[],Ue=-1,R=0,ve=ne.length,xe,de,Ve;for(we instanceof Date||(we=new Date(+we));++Ue<ve;)ne.charCodeAt(Ue)===37&&(F.push(ne.slice(R,Ue)),(de=pk[xe=ne.charAt(++Ue)])!=null?xe=ne.charAt(++Ue):de=xe==="e"?" ":"0",(Ve=ee[xe])&&(xe=Ve(we,de)),F.push(xe),R=Ue+1);return F.push(ne.slice(R,Ue)),F.join("")}}function j(ne,ee){return function(we){var F=vu(1900,void 0,1),Ue=O(F,ne,we+="",0),R,ve;if(Ue!=we.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(ee&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(R=gg(vu(F.y,0,1)),ve=R.getUTCDay(),R=ve>4||ve===0?uh.ceil(R):uh(R),R=Bx.offset(R,(F.V-1)*7),F.y=R.getUTCFullYear(),F.m=R.getUTCMonth(),F.d=R.getUTCDate()+(F.w+6)%7):(R=pg(vu(F.y,0,1)),ve=R.getDay(),R=ve>4||ve===0?ch.ceil(R):ch(R),R=Bf.offset(R,(F.V-1)*7),F.y=R.getFullYear(),F.m=R.getMonth(),F.d=R.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),ve="Z"in F?gg(vu(F.y,0,1)).getUTCDay():pg(vu(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(ve+5)%7:F.w+F.U*7-(ve+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,gg(F)):pg(F)}}function O(ne,ee,we,F){for(var Ue=0,R=ee.length,ve=we.length,xe,de;Ue<R;){if(F>=ve)return-1;if(xe=ee.charCodeAt(Ue++),xe===37){if(xe=ee.charAt(Ue++),de=g[xe in pk?ee.charAt(Ue++):xe],!de||(F=de(ne,we,F))<0)return-1}else if(xe!=we.charCodeAt(F++))return-1}return F}function _(ne,ee,we){var F=u.exec(ee.slice(we));return F?(ne.p=d.get(F[0].toLowerCase()),we+F[0].length):-1}function E(ne,ee,we){var F=p.exec(ee.slice(we));return F?(ne.w=y.get(F[0].toLowerCase()),we+F[0].length):-1}function T(ne,ee,we){var F=f.exec(ee.slice(we));return F?(ne.w=m.get(F[0].toLowerCase()),we+F[0].length):-1}function k(ne,ee,we){var F=N.exec(ee.slice(we));return F?(ne.m=S.get(F[0].toLowerCase()),we+F[0].length):-1}function A(ne,ee,we){var F=h.exec(ee.slice(we));return F?(ne.m=b.get(F[0].toLowerCase()),we+F[0].length):-1}function P(ne,ee,we){return O(ne,t,ee,we)}function M(ne,ee,we){return O(ne,r,ee,we)}function U(ne,ee,we){return O(ne,a,ee,we)}function W(ne){return o[ne.getDay()]}function Y(ne){return i[ne.getDay()]}function B(ne){return c[ne.getMonth()]}function ae(ne){return l[ne.getMonth()]}function oe(ne){return s[+(ne.getHours()>=12)]}function D(ne){return 1+~~(ne.getMonth()/3)}function H(ne){return o[ne.getUTCDay()]}function G(ne){return i[ne.getUTCDay()]}function Z(ne){return c[ne.getUTCMonth()]}function X(ne){return l[ne.getUTCMonth()]}function ie(ne){return s[+(ne.getUTCHours()>=12)]}function pe(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ee=w(ne+="",v);return ee.toString=function(){return ne},ee},parse:function(ne){var ee=j(ne+="",!1);return ee.toString=function(){return ne},ee},utcFormat:function(ne){var ee=w(ne+="",x);return ee.toString=function(){return ne},ee},utcParse:function(ne){var ee=j(ne+="",!0);return ee.toString=function(){return ne},ee}}}var pk={"-":"",_:" ",0:"0"},ra=/^\s*\d+/,bQ=/^%/,wQ=/[\\^$*+?|[\]().{}]/g;function Ft(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function NQ(e){return e.replace(wQ,"\\$&")}function bu(e){return new RegExp("^(?:"+e.map(NQ).join("|")+")","i")}function wu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function jQ(e,t,r){var a=ra.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function SQ(e,t,r){var a=ra.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function kQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function CQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function OQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function gk(e,t,r){var a=ra.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function yk(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function _Q(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function TQ(e,t,r){var a=ra.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function EQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function vk(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function AQ(e,t,r){var a=ra.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function bk(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function PQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function DQ(e,t,r){var a=ra.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function IQ(e,t,r){var a=ra.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function MQ(e,t,r){var a=ra.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function FQ(e,t,r){var a=bQ.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function RQ(e,t,r){var a=ra.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function LQ(e,t,r){var a=ra.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function wk(e,t){return Ft(e.getDate(),t,2)}function $Q(e,t){return Ft(e.getHours(),t,2)}function BQ(e,t){return Ft(e.getHours()%12||12,t,2)}function UQ(e,t){return Ft(1+Bf.count(Gs(e),e),t,3)}function cA(e,t){return Ft(e.getMilliseconds(),t,3)}function WQ(e,t){return cA(e,t)+"000"}function qQ(e,t){return Ft(e.getMonth()+1,t,2)}function KQ(e,t){return Ft(e.getMinutes(),t,2)}function VQ(e,t){return Ft(e.getSeconds(),t,2)}function zQ(e){var t=e.getDay();return t===0?7:t}function HQ(e,t){return Ft(Ux.count(Gs(e)-1,e),t,2)}function uA(e){var t=e.getDay();return t>=4||t===0?gc(e):gc.ceil(e)}function GQ(e,t){return e=uA(e),Ft(gc.count(Gs(e),e)+(Gs(e).getDay()===4),t,2)}function XQ(e){return e.getDay()}function YQ(e,t){return Ft(ch.count(Gs(e)-1,e),t,2)}function QQ(e,t){return Ft(e.getFullYear()%100,t,2)}function JQ(e,t){return e=uA(e),Ft(e.getFullYear()%100,t,2)}function ZQ(e,t){return Ft(e.getFullYear()%1e4,t,4)}function eJ(e,t){var r=e.getDay();return e=r>=4||r===0?gc(e):gc.ceil(e),Ft(e.getFullYear()%1e4,t,4)}function tJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ft(t/60|0,"0",2)+Ft(t%60,"0",2)}function Nk(e,t){return Ft(e.getUTCDate(),t,2)}function rJ(e,t){return Ft(e.getUTCHours(),t,2)}function aJ(e,t){return Ft(e.getUTCHours()%12||12,t,2)}function nJ(e,t){return Ft(1+Bx.count(Xs(e),e),t,3)}function dA(e,t){return Ft(e.getUTCMilliseconds(),t,3)}function sJ(e,t){return dA(e,t)+"000"}function iJ(e,t){return Ft(e.getUTCMonth()+1,t,2)}function oJ(e,t){return Ft(e.getUTCMinutes(),t,2)}function lJ(e,t){return Ft(e.getUTCSeconds(),t,2)}function cJ(e){var t=e.getUTCDay();return t===0?7:t}function uJ(e,t){return Ft(Wx.count(Xs(e)-1,e),t,2)}function fA(e){var t=e.getUTCDay();return t>=4||t===0?yc(e):yc.ceil(e)}function dJ(e,t){return e=fA(e),Ft(yc.count(Xs(e),e)+(Xs(e).getUTCDay()===4),t,2)}function fJ(e){return e.getUTCDay()}function mJ(e,t){return Ft(uh.count(Xs(e)-1,e),t,2)}function hJ(e,t){return Ft(e.getUTCFullYear()%100,t,2)}function xJ(e,t){return e=fA(e),Ft(e.getUTCFullYear()%100,t,2)}function pJ(e,t){return Ft(e.getUTCFullYear()%1e4,t,4)}function gJ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?yc(e):yc.ceil(e),Ft(e.getUTCFullYear()%1e4,t,4)}function yJ(){return"+0000"}function jk(){return"%"}function Sk(e){return+e}function kk(e){return Math.floor(+e/1e3)}var hl,mA,hA;vJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vJ(e){return hl=vQ(e),mA=hl.format,hl.parse,hA=hl.utcFormat,hl.utcParse,hl}function bJ(e){return new Date(e)}function wJ(e){return e instanceof Date?+e:+new Date(+e)}function Tw(e,t,r,a,s,i,o,l,c,u){var d=xw(),f=d.invert,m=d.domain,p=u(".%L"),y=u(":%S"),h=u("%I:%M"),b=u("%I %p"),N=u("%a %d"),S=u("%b %d"),v=u("%B"),x=u("%Y");function g(w){return(c(w)<w?p:l(w)<w?y:o(w)<w?h:i(w)<w?b:a(w)<w?s(w)<w?N:S:r(w)<w?v:x)(w)}return d.invert=function(w){return new Date(f(w))},d.domain=function(w){return arguments.length?m(Array.from(w,wJ)):m().map(bJ)},d.ticks=function(w){var j=m();return e(j[0],j[j.length-1],w??10)},d.tickFormat=function(w,j){return j==null?g:u(j)},d.nice=function(w){var j=m();return(!w||typeof w.range!="function")&&(w=t(j[0],j[j.length-1],w??10)),w?m(eA(j,w)):d},d.copy=function(){return $f(d,Tw(e,t,r,a,s,i,o,l,c,u))},d}function NJ(){return Ln.apply(Tw(gQ,yQ,Gs,Ow,Ux,Bf,kw,jw,wo,mA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jJ(){return Ln.apply(Tw(xQ,pQ,Xs,_w,Wx,Bx,Cw,Sw,wo,hA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qx(){var e=0,t=1,r,a,s,i,o=Ia,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var p,y;return arguments.length?([p,y]=m,o=f(p,y),u):[o(0),o(1)]}}return u.range=d(Xc),u.rangeRound=d(hw),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),a=f(t),s=r===a?0:1/(a-r),u}}function Qi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function xA(){var e=Yi(qx()(Ia));return e.copy=function(){return Qi(e,xA())},ti.apply(e,arguments)}function pA(){var e=yw(qx()).domain([1,10]);return e.copy=function(){return Qi(e,pA()).base(e.base())},ti.apply(e,arguments)}function gA(){var e=vw(qx());return e.copy=function(){return Qi(e,gA()).constant(e.constant())},ti.apply(e,arguments)}function Ew(){var e=bw(qx());return e.copy=function(){return Qi(e,Ew()).exponent(e.exponent())},ti.apply(e,arguments)}function SJ(){return Ew.apply(null,arguments).exponent(.5)}function yA(){var e=[],t=Ia;function r(a){if(a!=null&&!isNaN(a=+a))return t((Rf(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Pi),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>uY(e,i/a))},r.copy=function(){return yA(t).domain(e)},ti.apply(r,arguments)}function Kx(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,u=Ia,d,f=!1,m;function p(h){return isNaN(h=+h)?m:(h=.5+((h=+d(h))-i)*(a*h<a*i?l:c),u(f?Math.max(0,Math.min(1,h)):h))}p.domain=function(h){return arguments.length?([e,t,r]=h,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p):[e,t,r]},p.clamp=function(h){return arguments.length?(f=!!h,p):f},p.interpolator=function(h){return arguments.length?(u=h,p):u};function y(h){return function(b){var N,S,v;return arguments.length?([N,S,v]=b,u=FY(h,[N,S,v]),p):[u(0),u(.5),u(1)]}}return p.range=y(Xc),p.rangeRound=y(hw),p.unknown=function(h){return arguments.length?(m=h,p):m},function(h){return d=h,s=h(e),i=h(t),o=h(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,p}}function vA(){var e=Yi(Kx()(Ia));return e.copy=function(){return Qi(e,vA())},ti.apply(e,arguments)}function bA(){var e=yw(Kx()).domain([.1,1,10]);return e.copy=function(){return Qi(e,bA()).base(e.base())},ti.apply(e,arguments)}function wA(){var e=vw(Kx());return e.copy=function(){return Qi(e,wA()).constant(e.constant())},ti.apply(e,arguments)}function Aw(){var e=bw(Kx());return e.copy=function(){return Qi(e,Aw()).exponent(e.exponent())},ti.apply(e,arguments)}function kJ(){return Aw.apply(null,arguments).exponent(.5)}const Ck=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Id,scaleDiverging:vA,scaleDivergingLog:bA,scaleDivergingPow:Aw,scaleDivergingSqrt:kJ,scaleDivergingSymlog:wA,scaleIdentity:Z3,scaleImplicit:Sv,scaleLinear:oh,scaleLog:tA,scaleOrdinal:dw,scalePoint:Hu,scalePow:ww,scaleQuantile:nA,scaleQuantize:sA,scaleRadial:aA,scaleSequential:xA,scaleSequentialLog:pA,scaleSequentialPow:Ew,scaleSequentialQuantile:yA,scaleSequentialSqrt:SJ,scaleSequentialSymlog:gA,scaleSqrt:sQ,scaleSymlog:rA,scaleThreshold:iA,scaleTime:NJ,scaleUtc:jJ,tickFormat:J3},Symbol.toStringTag,{value:"Module"}));var CJ=Uc;function OJ(e,t,r){for(var a=-1,s=e.length;++a<s;){var i=e[a],o=t(i);if(o!=null&&(l===void 0?o===o&&!CJ(o):r(o,l)))var l=o,c=i}return c}var NA=OJ;function _J(e,t){return e>t}var TJ=_J,EJ=NA,AJ=TJ,PJ=Gc;function DJ(e){return e&&e.length?EJ(e,PJ,AJ):void 0}var IJ=DJ;const Vx=Qt(IJ);function MJ(e,t){return e<t}var FJ=MJ,RJ=NA,LJ=FJ,$J=Gc;function BJ(e){return e&&e.length?RJ(e,$J,LJ):void 0}var UJ=BJ;const zx=Qt(UJ);var WJ=Vb,qJ=Xi,KJ=E3,VJ=Ga;function zJ(e,t){var r=VJ(e)?WJ:KJ;return r(e,qJ(t))}var HJ=zJ,GJ=_3,XJ=HJ;function YJ(e,t){return GJ(XJ(e,t),1)}var QJ=YJ;const JJ=Qt(QJ);var ZJ=iw;function eZ(e,t){return ZJ(e,t)}var tZ=eZ;const Hx=Qt(tZ);var Yc=1e9,rZ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Dw,ur=!0,Fn="[DecimalError] ",Co=Fn+"Invalid argument: ",Pw=Fn+"Exponent out of range: ",Qc=Math.floor,ho=Math.pow,aZ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,en,Hr=1e7,nr=7,jA=9007199254740991,dh=Qc(jA/nr),Ke={};Ke.absoluteValue=Ke.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ke.comparedTo=Ke.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Ke.decimalPlaces=Ke.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*nr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ke.dividedBy=Ke.div=function(e){return $s(this,new this.constructor(e))};Ke.dividedToIntegerBy=Ke.idiv=function(e){var t=this,r=t.constructor;return Xt($s(t,new r(e),0,1),r.precision)};Ke.equals=Ke.eq=function(e){return!this.cmp(e)};Ke.exponent=function(){return Rr(this)};Ke.greaterThan=Ke.gt=function(e){return this.cmp(e)>0};Ke.greaterThanOrEqualTo=Ke.gte=function(e){return this.cmp(e)>=0};Ke.isInteger=Ke.isint=function(){return this.e>this.d.length-2};Ke.isNegative=Ke.isneg=function(){return this.s<0};Ke.isPositive=Ke.ispos=function(){return this.s>0};Ke.isZero=function(){return this.s===0};Ke.lessThan=Ke.lt=function(e){return this.cmp(e)<0};Ke.lessThanOrEqualTo=Ke.lte=function(e){return this.cmp(e)<1};Ke.logarithm=Ke.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(en))throw Error(Fn+"NaN");if(r.s<1)throw Error(Fn+(r.s?"NaN":"-Infinity"));return r.eq(en)?new a(0):(ur=!1,t=$s($d(r,i),$d(e,i),i),ur=!0,Xt(t,s))};Ke.minus=Ke.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?CA(t,e):SA(t,(e.s=-e.s,e))};Ke.modulo=Ke.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Fn+"NaN");return r.s?(ur=!1,t=$s(r,e,0,1).times(e),ur=!0,r.minus(t)):Xt(new a(r),s)};Ke.naturalExponential=Ke.exp=function(){return kA(this)};Ke.naturalLogarithm=Ke.ln=function(){return $d(this)};Ke.negated=Ke.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ke.plus=Ke.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?SA(t,e):CA(t,(e.s=-e.s,e))};Ke.precision=Ke.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Co+e);if(t=Rr(s)+1,a=s.d.length-1,r=a*nr+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Ke.squareRoot=Ke.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Fn+"NaN")}for(e=Rr(l),ur=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=ds(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Qc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus($s(l,i,o+2)).times(.5),ds(i.d).slice(0,o)===(t=ds(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Xt(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return ur=!0,Xt(a,r)};Ke.times=Ke.mul=function(e){var t,r,a,s,i,o,l,c,u,d=this,f=d.constructor,m=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,o=c,c=u,u=o),i=[],o=c+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+p[a]*m[s-a-1]+t,i[s--]=l%Hr|0,t=l/Hr|0;i[s]=(i[s]+t)%Hr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ur?Xt(e,f.precision):e};Ke.toDecimalPlaces=Ke.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(vs(e,0,Yc),t===void 0?t=a.rounding:vs(t,0,8),Xt(r,e+Rr(r)+1,t))};Ke.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Wo(a,!0):(vs(e,0,Yc),t===void 0?t=s.rounding:vs(t,0,8),a=Xt(new s(a),e+1,t),r=Wo(a,!0,e+1)),r};Ke.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Wo(s):(vs(e,0,Yc),t===void 0?t=i.rounding:vs(t,0,8),a=Xt(new i(s),e+Rr(s)+1,t),r=Wo(a.abs(),!1,e+Rr(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ke.toInteger=Ke.toint=function(){var e=this,t=e.constructor;return Xt(new t(e),Rr(e)+1,t.rounding)};Ke.toNumber=function(){return+this};Ke.toPower=Ke.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(en);if(l=new c(l),!l.s){if(e.s<1)throw Error(Fn+"Infinity");return l}if(l.eq(en))return l;if(a=c.precision,e.eq(en))return Xt(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=jA){for(s=new c(en),t=Math.ceil(a/nr+4),ur=!1;r%2&&(s=s.times(l),_k(s.d,t)),r=Qc(r/2),r!==0;)l=l.times(l),_k(l.d,t);return ur=!0,e.s<0?new c(en).div(s):Xt(s,a)}}else if(i<0)throw Error(Fn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ur=!1,s=e.times($d(l,a+u)),ur=!0,s=kA(s),s.s=i,s};Ke.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=Rr(s),a=Wo(s,r<=i.toExpNeg||r>=i.toExpPos)):(vs(e,1,Yc),t===void 0?t=i.rounding:vs(t,0,8),s=Xt(new i(s),e,t),r=Rr(s),a=Wo(s,e<=r||r<=i.toExpNeg,e)),a};Ke.toSignificantDigits=Ke.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(vs(e,1,Yc),t===void 0?t=a.rounding:vs(t,0,8)),Xt(new a(r),e,t)};Ke.toString=Ke.valueOf=Ke.val=Ke.toJSON=Ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Rr(e),r=e.constructor;return Wo(e,t<=r.toExpNeg||t>=r.toExpPos)};function SA(e,t){var r,a,s,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ur?Xt(t,f):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=u.length):(a=u,s=o,l=c.length),o=Math.ceil(f/nr),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,a=u,u=c,c=a),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Hr|0,c[i]%=Hr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,ur?Xt(t,f):t}function vs(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Co+e)}function ds(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=nr-a.length,r&&(i+=di(r)),i+=a;o=e[t],a=o+"",r=nr-a.length,r&&(i+=di(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var $s=function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%Hr|0,o=i/Hr|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*Hr+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,u,d,f,m,p,y,h,b,N,S,v,x,g,w,j,O,_=a.constructor,E=a.s==s.s?1:-1,T=a.d,k=s.d;if(!a.s)return new _(a);if(!s.s)throw Error(Fn+"Division by zero");for(c=a.e-s.e,j=k.length,g=T.length,p=new _(E),y=p.d=[],u=0;k[u]==(T[u]||0);)++u;if(k[u]>(T[u]||0)&&--c,i==null?S=i=_.precision:o?S=i+(Rr(a)-Rr(s))+1:S=i,S<0)return new _(0);if(S=S/nr+2|0,u=0,j==1)for(d=0,k=k[0],S++;(u<g||d)&&S--;u++)v=d*Hr+(T[u]||0),y[u]=v/k|0,d=v%k|0;else{for(d=Hr/(k[0]+1)|0,d>1&&(k=e(k,d),T=e(T,d),j=k.length,g=T.length),x=j,h=T.slice(0,j),b=h.length;b<j;)h[b++]=0;O=k.slice(),O.unshift(0),w=k[0],k[1]>=Hr/2&&++w;do d=0,l=t(k,h,j,b),l<0?(N=h[0],j!=b&&(N=N*Hr+(h[1]||0)),d=N/w|0,d>1?(d>=Hr&&(d=Hr-1),f=e(k,d),m=f.length,b=h.length,l=t(f,h,m,b),l==1&&(d--,r(f,j<m?O:k,m))):(d==0&&(l=d=1),f=k.slice()),m=f.length,m<b&&f.unshift(0),r(h,f,b),l==-1&&(b=h.length,l=t(k,h,j,b),l<1&&(d++,r(h,j<b?O:k,b))),b=h.length):l===0&&(d++,h=[0]),y[u++]=d,l&&h[0]?h[b++]=T[x]||0:(h=[T[x]],b=1);while((x++<g||h[0]!==void 0)&&S--)}return y[0]||y.shift(),p.e=c,Xt(p,o?i+Rr(p)+1:i)}}();function kA(e,t){var r,a,s,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Rr(e)>16)throw Error(Pw+Rr(e));if(!e.s)return new d(en);for(t==null?(ur=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(ho(2,u))/Math.LN10*2+5|0,l+=a,r=s=i=new d(en),d.precision=l;;){if(s=Xt(s.times(e),l),r=r.times(++c),o=i.plus($s(s,r,l)),ds(o.d).slice(0,l)===ds(i.d).slice(0,l)){for(;u--;)i=Xt(i.times(i),l);return d.precision=f,t==null?(ur=!0,Xt(i,f)):i}i=o}}function Rr(e){for(var t=e.e*nr,r=e.d[0];r>=10;r/=10)t++;return t}function yg(e,t,r){if(t>e.LN10.sd())throw ur=!0,r&&(e.precision=r),Error(Fn+"LN10 precision limit exceeded");return Xt(new e(e.LN10),t)}function di(e){for(var t="";e--;)t+="0";return t}function $d(e,t){var r,a,s,i,o,l,c,u,d,f=1,m=10,p=e,y=p.d,h=p.constructor,b=h.precision;if(p.s<1)throw Error(Fn+(p.s?"NaN":"-Infinity"));if(p.eq(en))return new h(0);if(t==null?(ur=!1,u=b):u=t,p.eq(10))return t==null&&(ur=!0),yg(h,u);if(u+=m,h.precision=u,r=ds(y),a=r.charAt(0),i=Rr(p),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)p=p.times(e),r=ds(p.d),a=r.charAt(0),f++;i=Rr(p),a>1?(p=new h("0."+r),i++):p=new h(a+"."+r.slice(1))}else return c=yg(h,u+2,b).times(i+""),p=$d(new h(a+"."+r.slice(1)),u-m).plus(c),h.precision=b,t==null?(ur=!0,Xt(p,b)):p;for(l=o=p=$s(p.minus(en),p.plus(en),u),d=Xt(p.times(p),u),s=3;;){if(o=Xt(o.times(d),u),c=l.plus($s(o,new h(s),u)),ds(c.d).slice(0,u)===ds(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(yg(h,u+2,b).times(i+""))),l=$s(l,new h(f),u),h.precision=b,t==null?(ur=!0,Xt(l,b)):l;l=c,s+=2}}function Ok(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=Qc(r/nr),e.d=[],a=(r+1)%nr,r<0&&(a+=nr),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=nr;a<s;)e.d.push(+t.slice(a,a+=nr));t=t.slice(a),a=nr-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),ur&&(e.e>dh||e.e<-dh))throw Error(Pw+r)}else e.s=0,e.e=0,e.d=[0];return e}function Xt(e,t,r){var a,s,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=nr,s=t,u=f[d=0];else{if(d=Math.ceil((a+1)/nr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;a%=nr,s=a-nr+o}if(r!==void 0&&(i=ho(10,o-s-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?u/ho(10,o-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Rr(e),f.length=1,t=t-i-1,f[0]=ho(10,(nr-t%nr)%nr),e.e=Qc(-t/nr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=d,i=1,d--):(f.length=d+1,i=ho(10,nr-a),f[d]=s>0?(u/ho(10,o-s)%ho(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Hr&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Hr)break;f[d--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(ur&&(e.e>dh||e.e<-dh))throw Error(Pw+Rr(e));return e}function CA(e,t){var r,a,s,i,o,l,c,u,d,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),ur?Xt(t,p):t;if(c=e.d,f=t.d,a=t.e,u=e.e,c=c.slice(),o=u-a,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,a=u,l=c.length),s=Math.max(Math.ceil(p/nr),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=Hr-1;--c[i],c[s]+=Hr}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,ur?Xt(t,p):t):new m(0)}function Wo(e,t,r){var a,s=Rr(e),i=ds(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+di(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+di(-s-1)+i,r&&(a=r-o)>0&&(i+=di(a))):s>=o?(i+=di(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+di(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=di(a))),e.s<0?"-"+i:i}function _k(e,t){if(e.length>t)return e.length=t,!0}function OA(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Co+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Ok(o,i.toString())}else if(typeof i!="string")throw Error(Co+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,aZ.test(i))Ok(o,i);else throw Error(Co+i)}if(s.prototype=Ke,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=OA,s.config=s.set=nZ,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function nZ(e){if(!e||typeof e!="object")throw Error(Fn+"Object expected");var t,r,a,s=["precision",1,Yc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(Qc(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(Co+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Co+r+": "+a);return this}var Dw=OA(rZ);en=new Dw(1);const zt=Dw;function sZ(e){return cZ(e)||lZ(e)||oZ(e)||iZ()}function iZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oZ(e,t){if(e){if(typeof e=="string")return _v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _v(e,t)}}function lZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function cZ(e){if(Array.isArray(e))return _v(e)}function _v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var uZ=function(t){return t},_A={"@@functional/placeholder":!0},TA=function(t){return t===_A},Tk=function(t){return function r(){return arguments.length===0||arguments.length===1&&TA(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},dZ=function e(t,r){return t===1?r:Tk(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==_A}).length;return o>=t?r.apply(void 0,s):e(t-o,Tk(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(f){return TA(f)?c.shift():f});return r.apply(void 0,sZ(d).concat(c))}))})},Gx=function(t){return dZ(t.length,t)},Tv=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},fZ=Gx(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),mZ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return uZ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Ev=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},EA=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,a=t.apply(void 0,i)),a}};function hZ(e){var t;return e===0?t=1:t=Math.floor(new zt(e).abs().log(10).toNumber())+1,t}function xZ(e,t,r){for(var a=new zt(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var pZ=Gx(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),gZ=Gx(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),yZ=Gx(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Xx={rangeStep:xZ,getDigitCount:hZ,interpolateNumber:pZ,uninterpolateNumber:gZ,uninterpolateTruncation:yZ};function Av(e){return wZ(e)||bZ(e)||AA(e)||vZ()}function vZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function wZ(e){if(Array.isArray(e))return Pv(e)}function Bd(e,t){return SZ(e)||jZ(e,t)||AA(e,t)||NZ()}function NZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AA(e,t){if(e){if(typeof e=="string")return Pv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pv(e,t)}}function Pv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function jZ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function SZ(e){if(Array.isArray(e))return e}function PA(e){var t=Bd(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function DA(e,t,r){if(e.lte(0))return new zt(0);var a=Xx.getDigitCount(e.toNumber()),s=new zt(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new zt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new zt(Math.ceil(c))}function kZ(e,t,r){var a=1,s=new zt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new zt(10).pow(Xx.getDigitCount(e)-1),s=new zt(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new zt(Math.floor(e)))}else e===0?s=new zt(Math.floor((t-1)/2)):r||(s=new zt(Math.floor(e)));var o=Math.floor((t-1)/2),l=mZ(fZ(function(c){return s.add(new zt(c-o).mul(a)).toNumber()}),Tv);return l(0,t)}function IA(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new zt(0),tickMin:new zt(0),tickMax:new zt(0)};var i=DA(new zt(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new zt(0):(o=new zt(e).add(t).div(2),o=o.sub(new zt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new zt(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?IA(e,t,r,a,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new zt(l).mul(i)),tickMax:o.add(new zt(c).mul(i))})}function CZ(e){var t=Bd(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=PA([r,a]),c=Bd(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Av(Tv(0,s-1).map(function(){return 1/0}))):[].concat(Av(Tv(0,s-1).map(function(){return-1/0})),[d]);return r>a?Ev(f):f}if(u===d)return kZ(u,s,i);var m=IA(u,d,o,i),p=m.step,y=m.tickMin,h=m.tickMax,b=Xx.rangeStep(y,h.add(new zt(.1).mul(p)),p);return r>a?Ev(b):b}function OZ(e,t){var r=Bd(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=PA([a,s]),l=Bd(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[a,s];if(c===u)return[c];var d=Math.max(t,2),f=DA(new zt(u).sub(c).div(d-1),i,0),m=[].concat(Av(Xx.rangeStep(new zt(c),new zt(u).sub(new zt(.99).mul(f)),f)),[u]);return a>s?Ev(m):m}var _Z=EA(CZ),TZ=EA(OZ),EZ=!0,vg="Invariant failed";function qo(e,t){if(!e){if(EZ)throw new Error(vg);var r=typeof t=="function"?t():t,a=r?"".concat(vg,": ").concat(r):vg;throw new Error(a)}}var AZ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fh.apply(this,arguments)}function PZ(e,t){return FZ(e)||MZ(e,t)||IZ(e,t)||DZ()}function DZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IZ(e,t){if(e){if(typeof e=="string")return Ek(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ek(e,t)}}function Ek(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function MZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function FZ(e){if(Array.isArray(e))return e}function RZ(e,t){if(e==null)return{};var r=LZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function $Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ak(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RA(a.key),a)}}function BZ(e,t,r){return t&&Ak(e.prototype,t),r&&Ak(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UZ(e,t,r){return t=mh(t),WZ(e,MA()?Reflect.construct(t,r||[],mh(e).constructor):t.apply(e,r))}function WZ(e,t){if(t&&(vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qZ(e)}function qZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MA=function(){return!!e})()}function mh(e){return mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mh(e)}function KZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dv(e,t)}function Dv(e,t){return Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Dv(e,t)}function FA(e,t,r){return t=RA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RA(e){var t=VZ(e,"string");return vc(t)=="symbol"?t:t+""}function VZ(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(vc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uf=function(e){function t(){return $Z(this,t),UZ(this,t,arguments)}return KZ(t,e),BZ(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,u=a.dataPointFormatter,d=a.xAxis,f=a.yAxis,m=RZ(a,AZ),p=St(m,!1);this.props.direction==="x"&&d.type!=="number"&&qo(!1);var y=c.map(function(h){var b=u(h,l),N=b.x,S=b.y,v=b.value,x=b.errorVal;if(!x)return null;var g=[],w,j;if(Array.isArray(x)){var O=PZ(x,2);w=O[0],j=O[1]}else w=j=x;if(i==="vertical"){var _=d.scale,E=S+s,T=E+o,k=E-o,A=_(v-w),P=_(v+j);g.push({x1:P,y1:T,x2:P,y2:k}),g.push({x1:A,y1:E,x2:P,y2:E}),g.push({x1:A,y1:T,x2:A,y2:k})}else if(i==="horizontal"){var M=f.scale,U=N+s,W=U-o,Y=U+o,B=M(v-w),ae=M(v+j);g.push({x1:W,y1:ae,x2:Y,y2:ae}),g.push({x1:U,y1:B,x2:U,y2:ae}),g.push({x1:W,y1:B,x2:Y,y2:B})}return se.createElement(_r,fh({className:"recharts-errorBar",key:"bar-".concat(g.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},p),g.map(function(oe){return se.createElement("line",fh({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return se.createElement(_r,{className:"recharts-errorBars"},y)}}])}(se.Component);FA(Uf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});FA(Uf,"displayName","ErrorBar");function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function Pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(r),!0).forEach(function(a){zZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zZ(e,t,r){return t=HZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HZ(e){var t=GZ(e,"string");return Ud(t)=="symbol"?t:t+""}function GZ(e,t){if(Ud(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ud(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LA=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Ja(r,Gl);if(!o)return null;var l=Gl.defaultProps,c=l!==void 0?so(so({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(a||[]).reduce(function(d,f){var m=f.item,p=f.props,y=p.sectors||p.data||[];return d.concat(y.map(function(h){return{type:o.props.iconType||m.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):u=(a||[]).map(function(d){var f=d.item,m=f.type.defaultProps,p=m!==void 0?so(so({},m),f.props):{},y=p.dataKey,h=p.name,b=p.legendType,N=p.hide;return{inactive:N,dataKey:y,type:c.iconType||b||"square",color:Iw(f),value:h||y,payload:p}}),so(so(so({},c),Gl.getWithHeight(o,s)),{},{payload:u,item:o})};function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function Dk(e){return JZ(e)||QZ(e)||YZ(e)||XZ()}function XZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YZ(e,t){if(e){if(typeof e=="string")return Iv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iv(e,t)}}function QZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JZ(e){if(Array.isArray(e))return Iv(e)}function Iv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ik(Object(r),!0).forEach(function(a){Yl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ik(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yl(e,t,r){return t=ZZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZZ(e){var t=eee(e,"string");return Wd(t)=="symbol"?t:t+""}function eee(e,t){if(Wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Wd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cn(e,t,r){return vt(e)||vt(t)?r:qr(t)?An(e,t,r):xt(t)?t(e):r}function Gu(e,t,r,a){var s=JJ(e,function(l){return cn(l,t)});if(r==="number"){var i=s.filter(function(l){return Re(l)||parseFloat(l)});return i.length?[zx(i),Vx(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!vt(l)}):s;return o.map(function(l){return qr(l)||l instanceof Date?l:""})}var tee=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a==null?void 0:a.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,f=s[u].coordinate,m=u>=l-1?s[0].coordinate:s[u+1].coordinate,p=void 0;if(Qn(f-d)!==Qn(m-f)){var y=[];if(Qn(m-f)===Qn(c[1]-c[0])){p=m;var h=f+c[1]-c[0];y[0]=Math.min(h,(h+d)/2),y[1]=Math.max(h,(h+d)/2)}else{p=d;var b=m+c[1]-c[0];y[0]=Math.min(f,(b+f)/2),y[1]=Math.max(f,(b+f)/2)}var N=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>N[0]&&t<=N[1]||t>=y[0]&&t<=y[1]){o=s[u].index;break}}else{var S=Math.min(d,m),v=Math.max(d,m);if(t>(S+f)/2&&t<=(v+f)/2){o=s[u].index;break}}}else for(var x=0;x<l;x++)if(x===0&&t<=(a[x].coordinate+a[x+1].coordinate)/2||x>0&&x<l-1&&t>(a[x].coordinate+a[x-1].coordinate)/2&&t<=(a[x].coordinate+a[x+1].coordinate)/2||x===l-1&&t>(a[x].coordinate+a[x-1].coordinate)/2){o=a[x].index;break}return o},Iw=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?br(br({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},ree=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),m=0,p=f.length;m<p;m++){var y=d[f[m]],h=y.items,b=y.cateAxisId,N=h.filter(function(j){return Fs(j.type).indexOf("Bar")>=0});if(N&&N.length){var S=N[0].type.defaultProps,v=S!==void 0?br(br({},S),N[0].props):N[0].props,x=v.barSize,g=v[b];o[g]||(o[g]=[]);var w=vt(x)?r:x;o[g].push({item:N[0],stackList:N.slice(1),barSize:vt(w)?void 0:Uo(w,a,0)})}}return o},aee=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Uo(r,s,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=s/c,y=o.reduce(function(x,g){return x+g.barSize||0},0);y+=(c-1)*u,y>=s&&(y-=(c-1)*u,u=0),y>=s&&p>0&&(m=!0,p*=.9,y=c*p);var h=(s-y)/2>>0,b={offset:h-u,size:0};d=o.reduce(function(x,g){var w={item:g.item,position:{offset:b.offset+b.size+u,size:m?p:g.barSize}},j=[].concat(Dk(x),[w]);return b=j[j.length-1].position,g.stackList&&g.stackList.length&&g.stackList.forEach(function(O){j.push({item:O,position:b})}),j},f)}else{var N=Uo(a,s,0,!0);s-2*N-(c-1)*u<=0&&(u=0);var S=(s-2*N-(c-1)*u)/c;S>1&&(S>>=0);var v=l===+l?Math.min(S,l):S;d=o.reduce(function(x,g,w){var j=[].concat(Dk(x),[{item:g.item,position:{offset:N+(S+u)*w+(S-v)/2,size:v}}]);return g.stackList&&g.stackList.length&&g.stackList.forEach(function(O){j.push({item:O,position:j[j.length-1].position})}),j},f)}return d},nee=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),u=LA({children:i,legendWidth:c});if(u){var d=s||{},f=d.width,m=d.height,p=u.align,y=u.verticalAlign,h=u.layout;if((h==="vertical"||h==="horizontal"&&y==="middle")&&p!=="center"&&Re(t[p]))return br(br({},t),{},Yl({},p,t[p]+(f||0)));if((h==="horizontal"||h==="vertical"&&p==="center")&&y!=="middle"&&Re(t[y]))return br(br({},t),{},Yl({},y,t[y]+(m||0)))}return t},see=function(t,r,a){return vt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},$A=function(t,r,a,s,i){var o=r.props.children,l=Pn(o,Uf).filter(function(u){return see(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=cn(d,a);if(vt(f))return u;var m=Array.isArray(f)?[zx(f),Vx(f)]:[f,f],p=c.reduce(function(y,h){var b=cn(d,h,0),N=m[0]-Math.abs(Array.isArray(b)?b[0]:b),S=m[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(N,y[0]),Math.max(S,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},iee=function(t,r,a,s,i){var o=r.map(function(l){return $A(t,l,a,i,s)}).filter(function(l){return!vt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},BA=function(t,r,a,s,i){var o=r.map(function(c){var u=c.props.dataKey;return a==="number"&&u&&$A(t,c,u,s)||Gu(t,u,a,i)});if(a==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},UA=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},WA=function(t,r,a,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===a&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(a),l},Ps=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Qn(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var m=i?i.indexOf(f):f;return{coordinate:s(m)+u,value:f,offset:u}});return d.filter(function(f){return!If(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:s(f)+u,value:f,index:m,offset:u}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+u,value:f,offset:u}}):s.domain().map(function(f,m){return{coordinate:s(f)+u,value:i?i[f]:f,index:m,offset:u}})},bg=new WeakMap,T0=function(t,r){if(typeof r!="function")return t;bg.has(t)||bg.set(t,new WeakMap);var a=bg.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},oee=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Id(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:oh(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:Hu(),realScaleType:"point"}:i==="category"?{scale:Id(),realScaleType:"band"}:{scale:oh(),realScaleType:"linear"};if(Bo(s)){var c="scale".concat(Px(s));return{scale:(Ck[c]||Hu)(),realScaleType:Ck[c]?c:"point"}}return xt(s)?{scale:s}:{scale:Hu(),realScaleType:"point"}},Mk=1e-4,lee=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-Mk,o=Math.max(s[0],s[1])+Mk,l=t(r[0]),c=t(r[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[a-1]])}},cee=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},uee=function(t,r){if(!r||r.length!==2||!Re(r[0])||!Re(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Re(t[0])||t[0]<a)&&(i[0]=a),(!Re(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},dee=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var c=If(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},fee=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=If(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},mee={sign:dee,expand:A9,none:dc,silhouette:P9,wiggle:D9,positive:fee},hee=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=mee[a],o=E9().keys(s).value(function(l,c){return+cn(l,c,0)}).order(sv).offset(i);return o(t)},xee=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,m){var p,y=(p=m.type)!==null&&p!==void 0&&p.defaultProps?br(br({},m.type.defaultProps),m.props):m.props,h=y.stackId,b=y.hide;if(b)return f;var N=y[a],S=f[N]||{hasStack:!1,stackGroups:{}};if(qr(h)){var v=S.stackGroups[h]||{numericAxisId:a,cateAxisId:s,items:[]};v.items.push(m),S.hasStack=!0,S.stackGroups[h]=v}else S.stackGroups[Mf("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[m]};return br(br({},f),{},Yl({},N,S))},c),d={};return Object.keys(u).reduce(function(f,m){var p=u[m];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(h,b){var N=p.stackGroups[b];return br(br({},h),{},Yl({},b,{numericAxisId:a,cateAxisId:s,items:N.items,stackedData:hee(t,N.items,i)}))},y)}return br(br({},f),{},Yl({},m,p))},d)},pee=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=a||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=_Z(u,i,l);return t.domain([zx(d),Vx(d)]),{niceTicks:d}}if(i&&s==="number"){var f=t.domain(),m=TZ(f,i,l);return{niceTicks:m}}return null};function Fk(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!vt(s[t.dataKey])){var l=Lm(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=cn(s,vt(o)?t.dataKey:o);return vt(c)?null:t.scale(c)}var Rk=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var c=cn(o,r.dataKey,r.domain[l]);return vt(c)?null:r.scale(c)-i/2+s},gee=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},yee=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?br(br({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(qr(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},vee=function(t){return t.reduce(function(r,a){return[zx(a.concat([r[0]]).filter(Re)),Vx(a.concat([r[1]]).filter(Re))]},[1/0,-1/0])},qA=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=vee(d.slice(r,a+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},Lk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$k=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mv=function(t,r,a){if(xt(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(Re(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(Lk.test(t[0])){var i=+Lk.exec(t[0])[1];s[0]=r[0]-i}else xt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Re(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if($k.test(t[1])){var o=+$k.exec(t[1])[1];s[1]=r[1]+o}else xt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},hh=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=lw(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},Bk=function(t,r,a){return!t||!t.length||Hx(t,An(a,"type.defaultProps.domain"))?r:t},KA=function(t,r){var a=t.type.defaultProps?br(br({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,u=a.chartType,d=a.hide;return br(br({},St(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Iw(t),value:cn(r,s),type:c,payload:r,chartType:u,hide:d})};function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function Uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Wk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(r),!0).forEach(function(a){bee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bee(e,t,r){return t=wee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wee(e){var t=Nee(e,"string");return qd(t)=="symbol"?t:t+""}function Nee(e,t){if(qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(qd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xh=Math.PI/180,jee=function(t){return t*180/Math.PI},ca=function(t,r,a,s){return{x:t+Math.cos(-xh*s)*a,y:r+Math.sin(-xh*s)*a}},See=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},kee=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=See({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:jee(u),angleInRadian:u}},Cee=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},Oee=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},qk=function(t,r){var a=t.x,s=t.y,i=kee({x:a,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Cee(r),f=d.startAngle,m=d.endAngle,p=l,y;if(f<=m){for(;p>m;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=m}else{for(;p>f;)p-=360;for(;p<m;)p+=360;y=p>=m&&p<=f}return y?Wk(Wk({},r),{},{radius:o,angle:Oee(p,r)}):null};function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}var _ee=["offset"];function Tee(e){return Dee(e)||Pee(e)||Aee(e)||Eee()}function Eee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aee(e,t){if(e){if(typeof e=="string")return Fv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fv(e,t)}}function Pee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dee(e){if(Array.isArray(e))return Fv(e)}function Fv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Iee(e,t){if(e==null)return{};var r=Mee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Mee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kk(Object(r),!0).forEach(function(a){Fee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fee(e,t,r){return t=Ree(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ree(e){var t=Lee(e,"string");return Kd(t)=="symbol"?t:t+""}function Lee(e,t){if(Kd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Kd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vd.apply(this,arguments)}var $ee=function(t){var r=t.value,a=t.formatter,s=vt(t.children)?r:t.children;return xt(a)?a(s):s},Bee=function(t,r){var a=Qn(r-t),s=Math.min(Math.abs(r-t),360);return a*s},Uee=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,m=c.outerRadius,p=c.startAngle,y=c.endAngle,h=c.clockWise,b=(f+m)/2,N=Bee(p,y),S=N>=0?1:-1,v,x;s==="insideStart"?(v=p+S*o,x=h):s==="insideEnd"?(v=y-S*o,x=!h):s==="end"&&(v=y+S*o,x=h),x=N<=0?x:!x;var g=ca(u,d,b,v),w=ca(u,d,b,v+(x?1:-1)*359),j="M".concat(g.x,",").concat(g.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(x?0:1,`,
    `).concat(w.x,",").concat(w.y),O=vt(t.id)?Mf("recharts-radial-line-"):t.id;return se.createElement("text",Vd({},a,{dominantBaseline:"central",className:Pt("recharts-radial-bar-label",l)}),se.createElement("defs",null,se.createElement("path",{id:O,d:j})),se.createElement("textPath",{xlinkHref:"#".concat(O)},r))},Wee=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,m=(d+f)/2;if(s==="outside"){var p=ca(o,l,u+a,m),y=p.x,h=p.y;return{x:y,y:h,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,N=ca(o,l,b,m),S=N.x,v=N.y;return{x:S,y:v,textAnchor:"middle",verticalAnchor:"middle"}},qee=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,m=f*s,p=f>0?"end":"start",y=f>0?"start":"end",h=u>=0?1:-1,b=h*s,N=h>0?"end":"start",S=h>0?"start":"end";if(i==="top"){var v={x:l+u/2,y:c-f*s,textAnchor:"middle",verticalAnchor:p};return $r($r({},v),a?{height:Math.max(c-a.y,0),width:u}:{})}if(i==="bottom"){var x={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:y};return $r($r({},x),a?{height:Math.max(a.y+a.height-(c+d),0),width:u}:{})}if(i==="left"){var g={x:l-b,y:c+d/2,textAnchor:N,verticalAnchor:"middle"};return $r($r({},g),a?{width:Math.max(g.x-a.x,0),height:d}:{})}if(i==="right"){var w={x:l+u+b,y:c+d/2,textAnchor:S,verticalAnchor:"middle"};return $r($r({},w),a?{width:Math.max(a.x+a.width-w.x,0),height:d}:{})}var j=a?{width:u,height:d}:{};return i==="insideLeft"?$r({x:l+b,y:c+d/2,textAnchor:S,verticalAnchor:"middle"},j):i==="insideRight"?$r({x:l+u-b,y:c+d/2,textAnchor:N,verticalAnchor:"middle"},j):i==="insideTop"?$r({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:y},j):i==="insideBottom"?$r({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:p},j):i==="insideTopLeft"?$r({x:l+b,y:c+m,textAnchor:S,verticalAnchor:y},j):i==="insideTopRight"?$r({x:l+u-b,y:c+m,textAnchor:N,verticalAnchor:y},j):i==="insideBottomLeft"?$r({x:l+b,y:c+d-m,textAnchor:S,verticalAnchor:p},j):i==="insideBottomRight"?$r({x:l+u-b,y:c+d-m,textAnchor:N,verticalAnchor:p},j):Wc(i)&&(Re(i.x)||vo(i.x))&&(Re(i.y)||vo(i.y))?$r({x:l+Uo(i.x,u),y:c+Uo(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):$r({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},Kee=function(t){return"cx"in t&&Re(t.cx)};function ba(e){var t=e.offset,r=t===void 0?5:t,a=Iee(e,_ee),s=$r({offset:r},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,f=d===void 0?"":d,m=s.textBreakAll;if(!i||vt(l)&&vt(c)&&!C.isValidElement(u)&&!xt(u))return null;if(C.isValidElement(u))return C.cloneElement(u,s);var p;if(xt(u)){if(p=C.createElement(u,s),C.isValidElement(p))return p}else p=$ee(s);var y=Kee(i),h=St(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Uee(s,p,h);var b=y?Wee(s):qee(s);return se.createElement(eh,Vd({className:Pt("recharts-label",f)},h,b,{breakAll:m}),p)}ba.displayName="Label";var VA=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,m=t.y,p=t.top,y=t.left,h=t.width,b=t.height,N=t.clockWise,S=t.labelViewBox;if(S)return S;if(Re(h)&&Re(b)){if(Re(f)&&Re(m))return{x:f,y:m,width:h,height:b};if(Re(p)&&Re(y))return{x:p,y,width:h,height:b}}return Re(f)&&Re(m)?{x:f,y:m,width:0,height:0}:Re(r)&&Re(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:N}:t.viewBox?t.viewBox:{}},Vee=function(t,r){return t?t===!0?se.createElement(ba,{key:"label-implicit",viewBox:r}):qr(t)?se.createElement(ba,{key:"label-implicit",viewBox:r,value:t}):C.isValidElement(t)?t.type===ba?C.cloneElement(t,{key:"label-implicit",viewBox:r}):se.createElement(ba,{key:"label-implicit",content:t,viewBox:r}):xt(t)?se.createElement(ba,{key:"label-implicit",content:t,viewBox:r}):Wc(t)?se.createElement(ba,Vd({viewBox:r},t,{key:"label-implicit"})):null:null},zee=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=VA(t),o=Pn(s,ba).map(function(c,u){return C.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!a)return o;var l=Vee(t.label,r||i);return[l].concat(Tee(o))};ba.parseViewBox=VA;ba.renderCallByParent=zee;function Hee(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Gee=Hee;const Xee=Qt(Gee);function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}var Yee=["valueAccessor"],Qee=["data","dataKey","clockWise","id","textBreakAll"];function Jee(e){return rte(e)||tte(e)||ete(e)||Zee()}function Zee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ete(e,t){if(e){if(typeof e=="string")return Rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rv(e,t)}}function tte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rte(e){if(Array.isArray(e))return Rv(e)}function Rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ph.apply(this,arguments)}function Vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vk(Object(r),!0).forEach(function(a){ate(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ate(e,t,r){return t=nte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nte(e){var t=ste(e,"string");return zd(t)=="symbol"?t:t+""}function ste(e,t){if(zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(zd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hk(e,t){if(e==null)return{};var r=ite(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ite(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var ote=function(t){return Array.isArray(t.value)?Xee(t.value):t.value};function Di(e){var t=e.valueAccessor,r=t===void 0?ote:t,a=Hk(e,Yee),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,u=Hk(a,Qee);return!s||!s.length?null:se.createElement(_r,{className:"recharts-label-list"},s.map(function(d,f){var m=vt(i)?r(d,f):cn(d&&d.payload,i),p=vt(l)?{}:{id:"".concat(l,"-").concat(f)};return se.createElement(ba,ph({},St(d,!0),u,p,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:ba.parseViewBox(vt(o)?d:zk(zk({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Di.displayName="LabelList";function lte(e,t){return e?e===!0?se.createElement(Di,{key:"labelList-implicit",data:t}):se.isValidElement(e)||xt(e)?se.createElement(Di,{key:"labelList-implicit",data:t,content:e}):Wc(e)?se.createElement(Di,ph({data:t},e,{key:"labelList-implicit"})):null:null}function cte(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Pn(a,Di).map(function(o,l){return C.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=lte(e.label,t);return[i].concat(Jee(s))}Di.renderCallByParent=cte;function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lv.apply(this,arguments)}function Gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Xk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(r),!0).forEach(function(a){ute(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ute(e,t,r){return t=dte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dte(e){var t=fte(e,"string");return Hd(t)=="symbol"?t:t+""}function fte(e,t){if(Hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Hd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mte=function(t,r){var a=Qn(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},E0=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+s,f=Math.asin(c/d)/xh,m=u?i:i+o*f,p=ca(r,a,d,m),y=ca(r,a,s,m),h=u?i-o*f:i,b=ca(r,a,d*Math.cos(f*xh),h);return{center:p,circleTangency:y,lineTangency:b,theta:f}},zA=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=mte(o,l),u=o+c,d=ca(r,a,i,o),f=ca(r,a,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var p=ca(r,a,s,o),y=ca(r,a,s,u);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(a," Z");return m},hte=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Qn(d-u),m=E0({cx:r,cy:a,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,y=m.lineTangency,h=m.theta,b=E0({cx:r,cy:a,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),N=b.circleTangency,S=b.lineTangency,v=b.theta,x=c?Math.abs(u-d):Math.abs(u-d)-h-v;if(x<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):zA({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d});var g="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,`
  `);if(s>0){var w=E0({cx:r,cy:a,radius:s,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=w.circleTangency,O=w.lineTangency,_=w.theta,E=E0({cx:r,cy:a,radius:s,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=E.circleTangency,k=E.lineTangency,A=E.theta,P=c?Math.abs(u-d):Math.abs(u-d)-_-A;if(P<0&&o===0)return"".concat(g,"L").concat(r,",").concat(a,"Z");g+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else g+="L".concat(r,",").concat(a,"Z");return g},xte={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},HA=function(t){var r=Xk(Xk({},xte),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,m=r.className;if(o<i||d===f)return null;var p=Pt("recharts-sector",m),y=o-i,h=Uo(l,y,0,!0),b;return h>0&&Math.abs(d-f)<360?b=hte({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(h,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):b=zA({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),se.createElement("path",Lv({},St(r,!0),{className:p,d:b,role:"img"}))};function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$v.apply(this,arguments)}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yk(Object(r),!0).forEach(function(a){pte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pte(e,t,r){return t=gte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gte(e){var t=yte(e,"string");return Gd(t)=="symbol"?t:t+""}function yte(e,t){if(Gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Gd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jk={curveBasisClosed:v9,curveBasisOpen:b9,curveBasis:y9,curveBumpX:n9,curveBumpY:s9,curveLinearClosed:w9,curveLinear:Ix,curveMonotoneX:N9,curveMonotoneY:j9,curveNatural:S9,curveStep:k9,curveStepAfter:O9,curveStepBefore:C9},A0=function(t){return t.x===+t.x&&t.y===+t.y},Nu=function(t){return t.x},ju=function(t){return t.y},vte=function(t,r){if(xt(t))return t;var a="curve".concat(Px(t));return(a==="curveMonotone"||a==="curveBump")&&r?Jk["".concat(a).concat(r==="vertical"?"Y":"X")]:Jk[a]||Ix},bte=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=vte(a,l),f=u?i.filter(function(h){return A0(h)}):i,m;if(Array.isArray(o)){var p=u?o.filter(function(h){return A0(h)}):o,y=f.map(function(h,b){return Qk(Qk({},h),{},{base:p[b]})});return l==="vertical"?m=w0().y(ju).x1(Nu).x0(function(h){return h.base.x}):m=w0().x(Nu).y1(ju).y0(function(h){return h.base.y}),m.defined(A0).curve(d),m(y)}return l==="vertical"&&Re(o)?m=w0().y(ju).x1(Nu).x0(o):Re(o)?m=w0().x(Nu).y1(ju).y0(o):m=HE().x(Nu).y(ju),m.defined(A0).curve(d),m(f)},Bv=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?bte(t):s;return C.createElement("path",$v({},St(t,!1),$m(t),{className:Pt("recharts-curve",r),d:o,ref:i}))},GA={exports:{}},wte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Nte=wte,jte=Nte;function XA(){}function YA(){}YA.resetWarningCache=XA;var Ste=function(){function e(a,s,i,o,l,c){if(c!==jte){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YA,resetWarningCache:XA};return r.PropTypes=r,r};GA.exports=Ste();var kte=GA.exports;const Lt=Qt(kte);var Cte=Object.getOwnPropertyNames,Ote=Object.getOwnPropertySymbols,_te=Object.prototype.hasOwnProperty;function Zk(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function P0(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);var i=s.cache,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);var c=e(r,a,s);return i.delete(r),i.delete(a),c}}function eC(e){return Cte(e).concat(Ote(e))}var Tte=Object.hasOwn||function(e,t){return _te.call(e,t)};function nl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Ete="__v",Ate="__o",Pte="_owner",tC=Object.getOwnPropertyDescriptor,rC=Object.keys;function Dte(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Ite(e,t){return nl(e.getTime(),t.getTime())}function Mte(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Fte(e,t){return e===t}function aC(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(s[f]){f++;continue}var m=o.value,p=l.value;if(r.equals(m[0],p[0],c,f,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1;c++}return!0}var Rte=nl;function Lte(e,t,r){var a=rC(e),s=a.length;if(rC(t).length!==s)return!1;for(;s-- >0;)if(!QA(e,t,r,a[s]))return!1;return!0}function Su(e,t,r){var a=eC(e),s=a.length;if(eC(t).length!==s)return!1;for(var i,o,l;s-- >0;)if(i=a[s],!QA(e,t,r,i)||(o=tC(e,i),l=tC(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function $te(e,t){return nl(e.valueOf(),t.valueOf())}function Bte(e,t){return e.source===t.source&&e.flags===t.flags}function nC(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!s[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function Ute(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Wte(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function QA(e,t,r,a){return(a===Pte||a===Ate||a===Ete)&&(e.$$typeof||t.$$typeof)?!0:Tte(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}var qte="[object Arguments]",Kte="[object Boolean]",Vte="[object Date]",zte="[object Error]",Hte="[object Map]",Gte="[object Number]",Xte="[object Object]",Yte="[object RegExp]",Qte="[object Set]",Jte="[object String]",Zte="[object URL]",ere=Array.isArray,sC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,iC=Object.assign,tre=Object.prototype.toString.call.bind(Object.prototype.toString);function rre(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(y,h,b){if(y===h)return!0;if(y==null||h==null)return!1;var N=typeof y;if(N!==typeof h)return!1;if(N!=="object")return N==="number"?o(y,h,b):N==="function"?s(y,h,b):!1;var S=y.constructor;if(S!==h.constructor)return!1;if(S===Object)return l(y,h,b);if(ere(y))return t(y,h,b);if(sC!=null&&sC(y))return f(y,h,b);if(S===Date)return r(y,h,b);if(S===RegExp)return u(y,h,b);if(S===Map)return i(y,h,b);if(S===Set)return d(y,h,b);var v=tre(y);return v===Vte?r(y,h,b):v===Yte?u(y,h,b):v===Hte?i(y,h,b):v===Qte?d(y,h,b):v===Xte?typeof y.then!="function"&&typeof h.then!="function"&&l(y,h,b):v===Zte?m(y,h,b):v===zte?a(y,h,b):v===qte?l(y,h,b):v===Kte||v===Gte||v===Jte?c(y,h,b):!1}}function are(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?Su:Dte,areDatesEqual:Ite,areErrorsEqual:Mte,areFunctionsEqual:Fte,areMapsEqual:a?Zk(aC,Su):aC,areNumbersEqual:Rte,areObjectsEqual:a?Su:Lte,arePrimitiveWrappersEqual:$te,areRegExpsEqual:Bte,areSetsEqual:a?Zk(nC,Su):nC,areTypedArraysEqual:a?Su:Ute,areUrlsEqual:Wte};if(r&&(s=iC({},s,r(s))),t){var i=P0(s.areArraysEqual),o=P0(s.areMapsEqual),l=P0(s.areObjectsEqual),c=P0(s.areSetsEqual);s=iC({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function nre(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function sre(e){var t=e.circular,r=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(c,u){var d=a(),f=d.cache,m=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return r(c,u,{cache:m,equals:s,meta:p,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var ire=Ji();Ji({strict:!0});Ji({circular:!0});Ji({circular:!0,strict:!0});Ji({createInternalComparator:function(){return nl}});Ji({strict:!0,createInternalComparator:function(){return nl}});Ji({circular:!0,createInternalComparator:function(){return nl}});Ji({circular:!0,createInternalComparator:function(){return nl},strict:!0});function Ji(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,s=e.createState,i=e.strict,o=i===void 0?!1:i,l=are(e),c=rre(l),u=a?a(c):nre(c);return sre({circular:r,comparator:c,createState:s,equals:u,strict:o})}function ore(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function oC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):ore(s)};requestAnimationFrame(a)}function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}function lre(e){return fre(e)||dre(e)||ure(e)||cre()}function cre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ure(e,t){if(e){if(typeof e=="string")return lC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lC(e,t)}}function lC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function dre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fre(e){if(Array.isArray(e))return e}function mre(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=lre(o),c=l[0],u=l.slice(1);if(typeof c=="number"){oC(s.bind(null,u),c);return}s(c),oC(s.bind(null,u));return}Uv(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function uC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(a){JA(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JA(e,t,r){return t=hre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hre(e){var t=xre(e,"string");return Xd(t)==="symbol"?t:String(t)}function xre(e,t){if(Xd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Xd(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pre=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},gre=function(t){return t},yre=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Xu=function(t,r){return Object.keys(r).reduce(function(a,s){return uC(uC({},a),{},JA({},s,t(s,r[s])))},{})},dC=function(t,r,a){return t.map(function(s){return"".concat(yre(s)," ").concat(r,"ms ").concat(a)}).join(",")};function vre(e,t){return Nre(e)||wre(e,t)||ZA(e,t)||bre()}function bre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Nre(e){if(Array.isArray(e))return e}function jre(e){return Cre(e)||kre(e)||ZA(e)||Sre()}function Sre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZA(e,t){if(e){if(typeof e=="string")return Wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wv(e,t)}}function kre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cre(e){if(Array.isArray(e))return Wv(e)}function Wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var gh=1e-4,eP=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},tP=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},fC=function(t,r){return function(a){var s=eP(t,r);return tP(s,a)}},Ore=function(t,r){return function(a){var s=eP(t,r),i=[].concat(jre(s.map(function(o,l){return o*l}).slice(1)),[0]);return tP(i,a)}},mC=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=vre(u,4);s=d[0],i=d[1],o=d[2],l=d[3]}}}var f=fC(s,o),m=fC(i,l),p=Ore(s,o),y=function(N){return N>1?1:N<0?0:N},h=function(N){for(var S=N>1?1:N,v=S,x=0;x<8;++x){var g=f(v)-S,w=p(v);if(Math.abs(g-S)<gh||w<gh)return m(v);v=y(v-g/w)}return m(v)};return h.isStepper=!1,h},_re=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(d,f,m){var p=-(d-f)*a,y=m*i,h=m+(p-y)*l/1e3,b=m*l/1e3+d;return Math.abs(b-f)<gh&&Math.abs(h)<gh?[f,0]:[b,h]};return c.isStepper=!0,c.dt=l,c},Tre=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mC(s);case"spring":return _re();default:if(s.split("(")[0]==="cubic-bezier")return mC(s)}return typeof s=="function"?s:null};function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function hC(e){return Pre(e)||Are(e)||rP(e)||Ere()}function Ere(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Are(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pre(e){if(Array.isArray(e))return Kv(e)}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(a){qv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qv(e,t,r){return t=Dre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dre(e){var t=Ire(e,"string");return Yd(t)==="symbol"?t:String(t)}function Ire(e,t){if(Yd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Yd(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mre(e,t){return Lre(e)||Rre(e,t)||rP(e,t)||Fre()}function Fre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rP(e,t){if(e){if(typeof e=="string")return Kv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kv(e,t)}}function Kv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Rre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Lre(e){if(Array.isArray(e))return e}var yh=function(t,r,a){return t+(r-t)*a},Vv=function(t){var r=t.from,a=t.to;return r!==a},$re=function e(t,r,a){var s=Xu(function(i,o){if(Vv(o)){var l=t(o.from,o.to,o.velocity),c=Mre(l,2),u=c[0],d=c[1];return sa(sa({},o),{},{from:u,velocity:d})}return o},r);return a<1?Xu(function(i,o){return Vv(o)?sa(sa({},o),{},{velocity:yh(o.velocity,s[i].velocity,a),from:yh(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const Bre=function(e,t,r,a,s){var i=pre(e,t),o=i.reduce(function(b,N){return sa(sa({},b),{},qv({},N,[e[N],t[N]]))},{}),l=i.reduce(function(b,N){return sa(sa({},b),{},qv({},N,{from:e[N],velocity:0,to:t[N]}))},{}),c=-1,u,d,f=function(){return null},m=function(){return Xu(function(N,S){return S.from},l)},p=function(){return!Object.values(l).filter(Vv).length},y=function(N){u||(u=N);var S=N-u,v=S/r.dt;l=$re(r,l,v),s(sa(sa(sa({},e),t),m())),u=N,p()||(c=requestAnimationFrame(f))},h=function(N){d||(d=N);var S=(N-d)/a,v=Xu(function(g,w){return yh.apply(void 0,hC(w).concat([r(S)]))},o);if(s(sa(sa(sa({},e),t),v)),S<1)c=requestAnimationFrame(f);else{var x=Xu(function(g,w){return yh.apply(void 0,hC(w).concat([r(1)]))},o);s(sa(sa(sa({},e),t),x))}};return f=r.isStepper?y:h,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function bc(e){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}var Ure=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Wre(e,t){if(e==null)return{};var r=qre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function qre(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function wg(e){return Hre(e)||zre(e)||Vre(e)||Kre()}function Kre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vre(e,t){if(e){if(typeof e=="string")return zv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zv(e,t)}}function zre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hre(e){if(Array.isArray(e))return zv(e)}function zv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(a){Du(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Du(e,t,r){return t=aP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,aP(a.key),a)}}function Xre(e,t,r){return t&&gC(e.prototype,t),r&&gC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aP(e){var t=Yre(e,"string");return bc(t)==="symbol"?t:String(t)}function Yre(e,t){if(bc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(bc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hv(e,t)}function Hv(e,t){return Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Hv(e,t)}function Jre(e){var t=Zre();return function(){var a=vh(e),s;if(t){var i=vh(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return Gv(this,s)}}function Gv(e,t){if(t&&(bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xv(e)}function Xv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vh(e){return vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vh(e)}var Yx=function(e){Qre(r,e);var t=Jre(r);function r(a,s){var i;Gre(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Xv(i)),i.changeStyle=i.changeStyle.bind(Xv(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),Gv(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof m=="function")return i.state={style:u},Gv(i);i.state={style:c?Du({},c,u):u}}else i.state={style:{}};return i}return Xre(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,m=this.state.style;if(l){if(!o){var p={style:c?Du({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(p);return}if(!(ire(s.to,d)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=y||u?f:s.to;if(this.state&&m){var b={style:c?Du({},c,h):h};(c&&m[c]!==h||!c&&m!==h)&&this.setState(b)}this.runAnimation(Un(Un({},this.props),{},{from:h,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,f=s.onAnimationEnd,m=s.onAnimationStart,p=Bre(o,l,Tre(u),c,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([m,d,y,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,f=u.duration,m=f===void 0?0:f,p=function(h,b,N){if(N===0)return h;var S=b.duration,v=b.easing,x=v===void 0?"ease":v,g=b.style,w=b.properties,j=b.onAnimationEnd,O=N>0?o[N-1]:b,_=w||Object.keys(g);if(typeof x=="function"||x==="spring")return[].concat(wg(h),[i.runJSAnimation.bind(i,{from:O.style,to:g,duration:S,easing:x}),S]);var E=dC(_,S,x),T=Un(Un(Un({},O.style),g),{},{transition:E});return[].concat(wg(h),[T,S,j]).filter(gre)};return this.manager.start([c].concat(wg(o.reduce(p,[d,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=mre());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,f=s.onAnimationEnd,m=s.steps,p=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var h=l?Du({},l,c):c,b=dC(Object.keys(h),o,u);y.start([d,i,Un(Un({},h),{},{transition:b}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Wre(s,Ure),u=C.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(p){var y=p.props,h=y.style,b=h===void 0?{}:h,N=y.className,S=C.cloneElement(p,Un(Un({},c),{},{style:Un(Un({},b),d),className:N}));return S};return u===1?f(C.Children.only(i)):se.createElement("div",null,C.Children.map(i,function(m){return f(m)}))}}]),r}(C.PureComponent);Yx.displayName="Animate";Yx.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Yx.propTypes={from:Lt.oneOfType([Lt.object,Lt.string]),to:Lt.oneOfType([Lt.object,Lt.string]),attributeName:Lt.string,duration:Lt.number,begin:Lt.number,easing:Lt.oneOfType([Lt.string,Lt.func]),steps:Lt.arrayOf(Lt.shape({duration:Lt.number.isRequired,style:Lt.object.isRequired,easing:Lt.oneOfType([Lt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Lt.func]),properties:Lt.arrayOf("string"),onAnimationEnd:Lt.func})),children:Lt.oneOfType([Lt.node,Lt.func]),isActive:Lt.bool,canBegin:Lt.bool,onAnimationEnd:Lt.func,shouldReAnimate:Lt.bool,onAnimationStart:Lt.func,onAnimationReStart:Lt.func};const wc=Yx;function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function bh(){return bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bh.apply(this,arguments)}function eae(e,t){return nae(e)||aae(e,t)||rae(e,t)||tae()}function tae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rae(e,t){if(e){if(typeof e=="string")return yC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yC(e,t)}}function yC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function aae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function nae(e){if(Array.isArray(e))return e}function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(a){sae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sae(e,t,r){return t=iae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iae(e){var t=oae(e,"string");return Qd(t)=="symbol"?t:t+""}function oae(e,t){if(Qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Qd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wC=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,p=4;m<p;m++)f[m]=i[m]>o?o:i[m];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+a-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+a,",").concat(r+l*f[1])),d+="L ".concat(t+a,",").concat(r+s-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+a-c*f[2],",").concat(r+s)),d+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);d="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+a-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+a,",").concat(r+l*y,`
            L `).concat(t+a,",").concat(r+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+a-c*y,",").concat(r+s,`
            L `).concat(t+c*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*y," Z")}else d="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return d},lae=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return a>=u&&a<=d&&s>=f&&s<=m}return!1},cae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Mw=function(t){var r=bC(bC({},cae),t),a=C.useRef(),s=C.useState(-1),i=eae(s,2),o=i[0],l=i[1];C.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var x=a.current.getTotalLength();x&&l(x)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,m=r.radius,p=r.className,y=r.animationEasing,h=r.animationDuration,b=r.animationBegin,N=r.isAnimationActive,S=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var v=Pt("recharts-rectangle",p);return S?se.createElement(wc,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:h,animationEasing:y,isActive:S},function(x){var g=x.width,w=x.height,j=x.x,O=x.y;return se.createElement(wc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:h,isActive:N,easing:y},se.createElement("path",bh({},St(r,!0),{className:v,d:wC(j,O,g,w,m),ref:a})))}):se.createElement("path",bh({},St(r,!0),{className:v,d:wC(c,u,d,f,m)}))};function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yv.apply(this,arguments)}var Fw=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=Pt("recharts-dot",i);return r===+r&&a===+a&&s===+s?C.createElement("circle",Yv({},St(t,!1),$m(t),{className:o,cx:r,cy:a,r:s})):null};function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}var uae=["x","y","top","left","width","height","className"];function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qv.apply(this,arguments)}function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function dae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(a){fae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fae(e,t,r){return t=mae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mae(e){var t=hae(e,"string");return Jd(t)=="symbol"?t:t+""}function hae(e,t){if(Jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Jd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xae(e,t){if(e==null)return{};var r=pae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function pae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var gae=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},yae=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,m=t.height,p=m===void 0?0:m,y=t.className,h=xae(t,uae),b=dae({x:a,y:i,top:l,left:u,width:f,height:p},h);return!Re(a)||!Re(i)||!Re(f)||!Re(p)||!Re(l)||!Re(u)?null:se.createElement("path",Qv({},St(b,!0),{className:Pt("recharts-cross",y),d:gae(a,i,f,p,l,u)}))},vae=g3,bae=vae(Object.getPrototypeOf,Object),wae=bae,Nae=Zs,jae=wae,Sae=ei,kae="[object Object]",Cae=Function.prototype,Oae=Object.prototype,nP=Cae.toString,_ae=Oae.hasOwnProperty,Tae=nP.call(Object);function Eae(e){if(!Sae(e)||Nae(e)!=kae)return!1;var t=jae(e);if(t===null)return!0;var r=_ae.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&nP.call(r)==Tae}var Aae=Eae;const Pae=Qt(Aae);var Dae=Zs,Iae=ei,Mae="[object Boolean]";function Fae(e){return e===!0||e===!1||Iae(e)&&Dae(e)==Mae}var Rae=Fae;const Lae=Qt(Rae);function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},wh.apply(this,arguments)}function $ae(e,t){return qae(e)||Wae(e,t)||Uae(e,t)||Bae()}function Bae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uae(e,t){if(e){if(typeof e=="string")return jC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jC(e,t)}}function jC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Wae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function qae(e){if(Array.isArray(e))return e}function SC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function kC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(r),!0).forEach(function(a){Kae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kae(e,t,r){return t=Vae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vae(e){var t=zae(e,"string");return Zd(t)=="symbol"?t:t+""}function zae(e,t){if(Zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Zd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CC=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Hae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Gae=function(t){var r=kC(kC({},Hae),t),a=C.useRef(),s=C.useState(-1),i=$ae(s,2),o=i[0],l=i[1];C.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var v=a.current.getTotalLength();v&&l(v)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,m=r.height,p=r.className,y=r.animationEasing,h=r.animationDuration,b=r.animationBegin,N=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var S=Pt("recharts-trapezoid",p);return N?se.createElement(wc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:m,x:c,y:u},duration:h,animationEasing:y,isActive:N},function(v){var x=v.upperWidth,g=v.lowerWidth,w=v.height,j=v.x,O=v.y;return se.createElement(wc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:h,easing:y},se.createElement("path",wh({},St(r,!0),{className:S,d:CC(j,O,x,g,w),ref:a})))}):se.createElement("g",null,se.createElement("path",wh({},St(r,!0),{className:S,d:CC(c,u,d,f,m)})))},Xae=["option","shapeType","propTransformer","activeClassName","isActive"];function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function Yae(e,t){if(e==null)return{};var r=Qae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Qae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function OC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(r),!0).forEach(function(a){Jae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jae(e,t,r){return t=Zae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zae(e){var t=ene(e,"string");return ef(t)=="symbol"?t:t+""}function ene(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(ef(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tne(e,t){return Nh(Nh({},t),e)}function rne(e,t){return e==="symbols"}function _C(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return se.createElement(Mw,r);case"trapezoid":return se.createElement(Gae,r);case"sector":return se.createElement(HA,r);case"symbols":if(rne(t))return se.createElement(ew,r);break;default:return null}}function ane(e){return C.isValidElement(e)?e.props:e}function nne(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?tne:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=Yae(e,Xae),u;if(C.isValidElement(t))u=C.cloneElement(t,Nh(Nh({},c),ane(t)));else if(xt(t))u=t(c);else if(Pae(t)&&!Lae(t)){var d=s(t,c);u=se.createElement(_C,{shapeType:r,elementProps:d})}else{var f=c;u=se.createElement(_C,{shapeType:r,elementProps:f})}return l?se.createElement(_r,{className:o},u):u}function Qx(e,t){return t!=null&&"trapezoids"in e.props}function Jx(e,t){return t!=null&&"sectors"in e.props}function tf(e,t){return t!=null&&"points"in e.props}function sne(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function ine(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function one(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function lne(e,t){var r;return Qx(e,t)?r=sne:Jx(e,t)?r=ine:tf(e,t)&&(r=one),r}function cne(e,t){var r;return Qx(e,t)?r="trapezoids":Jx(e,t)?r="sectors":tf(e,t)&&(r="points"),r}function une(e,t){if(Qx(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Jx(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return tf(e,t)?t.payload:{}}function dne(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=cne(r,t),i=une(r,t),o=a.filter(function(c,u){var d=Hx(i,c),f=r.props[s].filter(function(y){var h=lne(r,t);return h(y,t)}),m=r.props[s].indexOf(f[f.length-1]),p=u===m;return d&&p}),l=a.indexOf(o[o.length-1]);return l}var fne=Math.ceil,mne=Math.max;function hne(e,t,r,a){for(var s=-1,i=mne(fne((t-e)/(r||1)),0),o=Array(i);i--;)o[a?i:++s]=e,e+=r;return o}var xne=hne,pne=F3,TC=1/0,gne=17976931348623157e292;function yne(e){if(!e)return e===0?e:0;if(e=pne(e),e===TC||e===-TC){var t=e<0?-1:1;return t*gne}return e===e?e:0}var sP=yne,vne=xne,bne=Lx,Ng=sP;function wne(e){return function(t,r,a){return a&&typeof a!="number"&&bne(t,r,a)&&(r=a=void 0),t=Ng(t),r===void 0?(r=t,t=0):r=Ng(r),a=a===void 0?t<r?1:-1:Ng(a),vne(t,r,a,e)}}var Nne=wne,jne=Nne,Sne=jne(),kne=Sne;const jh=Qt(kne);function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function AC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(a){iP(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iP(e,t,r){return t=Cne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cne(e){var t=One(e,"string");return rf(t)=="symbol"?t:t+""}function One(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(rf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _ne=["Webkit","Moz","O","ms"],Tne=function(t,r){if(!t)return null;var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=_ne.reduce(function(i,o){return AC(AC({},i),{},iP({},o+a,r))},{});return s[t]=r,s};function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sh.apply(this,arguments)}function PC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(r),!0).forEach(function(a){Ya(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ene(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lP(a.key),a)}}function Ane(e,t,r){return t&&DC(e.prototype,t),r&&DC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pne(e,t,r){return t=kh(t),Dne(e,oP()?Reflect.construct(t,r||[],kh(e).constructor):t.apply(e,r))}function Dne(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ine(e)}function Ine(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oP=function(){return!!e})()}function kh(e){return kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kh(e)}function Mne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jv(e,t)}function Jv(e,t){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Jv(e,t)}function Ya(e,t,r){return t=lP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lP(e){var t=Fne(e,"string");return Nc(t)=="symbol"?t:t+""}function Fne(e,t){if(Nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Nc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rne=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Hu().domain(jh(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(s),scale:u,scaleValues:d}},IC=function(t){return t.changedTouches&&!!t.changedTouches.length},jc=function(e){function t(r){var a;return Ene(this,t),a=Pne(this,t,[r]),Ya(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),Ya(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),Ya(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),Ya(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ya(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ya(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ya(a,"handleSlideDragStart",function(s){var i=IC(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return Mne(t,e),Ane(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(s,i),m=Math.max(s,i),p=t.getIndexInRange(o,f),y=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=cn(i[a],l,a);return xt(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,m=c.startIndex,p=c.endIndex,y=c.onChange,h=a.pageX-i;h>0?h=Math.min(h,u+d-f-l,u+d-f-o):h<0&&(h=Math.max(h,u-o,u-l));var b=this.getIndex({startX:o+h,endX:l+h});(b.startIndex!==m||b.endIndex!==p)&&y&&y(b),this.setState({startX:o+h,endX:l+h,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=IC(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,f=d.x,m=d.width,p=d.travellerWidth,y=d.onChange,h=d.gap,b=d.data,N={startX:this.state.startX,endX:this.state.endX},S=a.pageX-i;S>0?S=Math.min(S,f+m-p-u):S<0&&(S=Math.max(S,f-u)),N[o]=u+S;var v=this.getIndex(N),x=v.startIndex,g=v.endIndex,w=function(){var O=b.length-1;return o==="startX"&&(l>c?x%h===0:g%h===0)||l<c&&g===O||o==="endX"&&(l>c?g%h===0:x%h===0)||l>c&&g===O};this.setState(Ya(Ya({},o,u+S),"brushMoveStartX",a.pageX),function(){y&&w()&&y(v)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],f=l.indexOf(d);if(f!==-1){var m=f+a;if(!(m===-1||m>=l.length)){var p=l[m];s==="startX"&&p>=u||s==="endX"&&p<=c||this.setState(Ya({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,u=a.stroke;return se.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,u=a.children,d=a.padding,f=C.Children.only(u);return f?se.cloneElement(f,{x:s,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,m=c.traveller,p=c.ariaLabel,y=c.data,h=c.startIndex,b=c.endIndex,N=Math.max(a,this.props.x),S=jg(jg({},St(this.props,!1)),{},{x:N,y:u,width:d,height:f}),v=p||"Min value: ".concat((i=y[h])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[b])===null||o===void 0?void 0:o.name);return se.createElement(_r,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(g){["ArrowLeft","ArrowRight"].includes(g.key)&&(g.preventDefault(),g.stopPropagation(),l.handleTravellerMoveKeyboard(g.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,S))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(a,s)+u,f=Math.max(Math.abs(s-a)-u,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,u=a.stroke,d=this.state,f=d.startX,m=d.endX,p=5,y={pointerEvents:"none",fill:u};return se.createElement(_r,{className:"recharts-brush-texts"},se.createElement(eh,Sh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-p,y:o+l/2},y),this.getTextOfTick(s)),se.createElement(eh,Sh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+p,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,u=a.width,d=a.height,f=a.alwaysShowText,m=this.state,p=m.startX,y=m.endX,h=m.isTextActive,b=m.isSlideMoving,N=m.isTravellerMoving,S=m.isTravellerFocused;if(!s||!s.length||!Re(l)||!Re(c)||!Re(u)||!Re(d)||u<=0||d<=0)return null;var v=Pt("recharts-brush",i),x=se.Children.count(o)===1,g=Tne("userSelect","none");return se.createElement(_r,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:g},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(h||b||N||S||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,u=Math.floor(i+l/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),se.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return se.isValidElement(a)?i=se.cloneElement(a,s):xt(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,u=a.updateId,d=a.startIndex,f=a.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return jg({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Rne({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])}(C.PureComponent);Ya(jc,"displayName","Brush");Ya(jc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Lne=ow;function $ne(e,t){var r;return Lne(e,function(a,s,i){return r=t(a,s,i),!r}),!!r}var Bne=$ne,Une=c3,Wne=Xi,qne=Bne,Kne=Ga,Vne=Lx;function zne(e,t,r){var a=Kne(e)?Une:qne;return r&&Vne(e,t,r)&&(t=void 0),a(e,Wne(t))}var Hne=zne;const Gne=Qt(Hne);var ps=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},MC=A3;function Xne(e,t,r){t=="__proto__"&&MC?MC(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Yne=Xne,Qne=Yne,Jne=T3,Zne=Xi;function ese(e,t){var r={};return t=Zne(t),Jne(e,function(a,s,i){Qne(r,s,t(a,s,i))}),r}var tse=ese;const rse=Qt(tse);function ase(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(!t(e[r],r,e))return!1;return!0}var nse=ase,sse=ow;function ise(e,t){var r=!0;return sse(e,function(a,s,i){return r=!!t(a,s,i),r}),r}var ose=ise,lse=nse,cse=ose,use=Xi,dse=Ga,fse=Lx;function mse(e,t,r){var a=dse(e)?lse:cse;return r&&fse(e,t,r)&&(t=void 0),a(e,use(t))}var hse=mse;const cP=Qt(hse);var xse=["x","y"];function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zv.apply(this,arguments)}function FC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ku(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(r),!0).forEach(function(a){pse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pse(e,t,r){return t=gse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gse(e){var t=yse(e,"string");return af(t)=="symbol"?t:t+""}function yse(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(af(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vse(e,t){if(e==null)return{};var r=bse(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bse(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function wse(e,t){var r=e.x,a=e.y,s=vse(e,xse),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),m=parseInt(f,10);return ku(ku(ku(ku(ku({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function RC(e){return se.createElement(nne,Zv({shapeType:"rectangle",propTransformer:wse,activeClassName:"recharts-active-bar"},e))}var Nse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=Re(a)||q7(a);return i?t(a,s):(i||qo(!1),r)}},jse=["value","background"],uP;function Sc(e){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(e)}function Sse(e,t){if(e==null)return{};var r=kse(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kse(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ch.apply(this,arguments)}function LC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(r),!0).forEach(function(a){yi(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $C(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,fP(a.key),a)}}function Ose(e,t,r){return t&&$C(e.prototype,t),r&&$C(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _se(e,t,r){return t=Oh(t),Tse(e,dP()?Reflect.construct(t,r||[],Oh(e).constructor):t.apply(e,r))}function Tse(e,t){if(t&&(Sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ese(e)}function Ese(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dP=function(){return!!e})()}function Oh(e){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oh(e)}function Ase(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e1(e,t)}function e1(e,t){return e1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e1(e,t)}function yi(e,t,r){return t=fP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fP(e){var t=Pse(e,"string");return Sc(t)=="symbol"?t:t+""}function Pse(e,t){if(Sc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Sc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wf=function(e){function t(){var r;Cse(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=_se(this,t,[].concat(s)),yi(r,"state",{isAnimationFinished:!1}),yi(r,"id",Mf("recharts-bar-")),yi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),yi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Ase(t,e),Ose(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=St(this.props,!1);return a&&a.map(function(f,m){var p=m===c,y=p?u:o,h=Pr(Pr(Pr({},d),f),{},{isActive:p,option:y,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return se.createElement(_r,Ch({className:"recharts-bar-rectangle"},Bm(s.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),se.createElement(RC,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,m=this.state.prevData;return se.createElement(wc,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,h=i.map(function(b,N){var S=m&&m[N];if(S){var v=Gn(S.x,b.x),x=Gn(S.y,b.y),g=Gn(S.width,b.width),w=Gn(S.height,b.height);return Pr(Pr({},b),{},{x:v(y),y:x(y),width:g(y),height:w(y)})}if(o==="horizontal"){var j=Gn(0,b.height),O=j(y);return Pr(Pr({},b),{},{y:b.y+b.height-O,height:O})}var _=Gn(0,b.width),E=_(y);return Pr(Pr({},b),{},{width:E})});return se.createElement(_r,null,a.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Hx(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=St(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,m=Sse(u,jse);if(!f)return null;var p=Pr(Pr(Pr(Pr(Pr({},m),{},{fill:"#eee"},f),c),Bm(a.props,u,d)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return se.createElement(RC,Ch({key:"background-bar-".concat(d),option:a.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Pn(d,Uf);if(!f)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(b,N){var S=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:S,errorVal:cn(b,N)}},y={clipPath:a?"url(#clipPath-".concat(s,")"):null};return se.createElement(_r,y,f.map(function(h){return se.cloneElement(h,{key:"error-bar-".concat(s,"-").concat(h.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,u=a.left,d=a.top,f=a.width,m=a.height,p=a.isAnimationActive,y=a.background,h=a.id;if(s||!i||!i.length)return null;var b=this.state.isAnimationFinished,N=Pt("recharts-bar",o),S=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,x=S||v,g=vt(h)?this.id:h;return se.createElement(_r,{className:N},S||v?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(g)},se.createElement("rect",{x:S?u:u-f/2,y:v?d:d-m/2,width:S?f:f*2,height:v?m:m*2}))):null,se.createElement(_r,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(g,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,g),(!p||b)&&Di.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])}(C.PureComponent);uP=Wf;yi(Wf,"displayName","Bar");yi(Wf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ls.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});yi(Wf,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,p=cee(a,r);if(!p)return null;var y=t.layout,h=r.type.defaultProps,b=h!==void 0?Pr(Pr({},h),r.props):r.props,N=b.dataKey,S=b.children,v=b.minPointSize,x=y==="horizontal"?o:i,g=u?x.scale.domain():null,w=gee({numericAxis:x}),j=Pn(S,L3),O=f.map(function(_,E){var T,k,A,P,M,U;u?T=uee(u[d+E],g):(T=cn(_,N),Array.isArray(T)||(T=[w,T]));var W=Nse(v,uP.defaultProps.minPointSize)(T[1],E);if(y==="horizontal"){var Y,B=[o.scale(T[0]),o.scale(T[1])],ae=B[0],oe=B[1];k=Rk({axis:i,ticks:l,bandSize:s,offset:p.offset,entry:_,index:E}),A=(Y=oe??ae)!==null&&Y!==void 0?Y:void 0,P=p.size;var D=ae-oe;if(M=Number.isNaN(D)?0:D,U={x:k,y:o.y,width:P,height:o.height},Math.abs(W)>0&&Math.abs(M)<Math.abs(W)){var H=Qn(M||W)*(Math.abs(W)-Math.abs(M));A-=H,M+=H}}else{var G=[i.scale(T[0]),i.scale(T[1])],Z=G[0],X=G[1];if(k=Z,A=Rk({axis:o,ticks:c,bandSize:s,offset:p.offset,entry:_,index:E}),P=X-Z,M=p.size,U={x:i.x,y:A,width:i.width,height:M},Math.abs(W)>0&&Math.abs(P)<Math.abs(W)){var ie=Qn(P||W)*(Math.abs(W)-Math.abs(P));P+=ie}}return Pr(Pr(Pr({},_),{},{x:k,y:A,width:P,height:M,value:u?T:T[1],payload:_,background:U},j&&j[E]&&j[E].props),{},{tooltipPayload:[KA(r,_)],tooltipPosition:{x:k+P/2,y:A+M/2}})});return Pr({data:O,layout:y},m)});function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function Dse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mP(a.key),a)}}function Ise(e,t,r){return t&&BC(e.prototype,t),r&&BC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(a){Zx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zx(e,t,r){return t=mP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mP(e){var t=Mse(e,"string");return nf(t)=="symbol"?t:t+""}function Mse(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(nf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fse=function(t,r,a,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},m=!!Ja(u,Wf);return d.reduce(function(p,y){var h=r[y],b=h.orientation,N=h.domain,S=h.padding,v=S===void 0?{}:S,x=h.mirror,g=h.reversed,w="".concat(b).concat(x?"Mirror":""),j,O,_,E,T;if(h.type==="number"&&(h.padding==="gap"||h.padding==="no-gap")){var k=N[1]-N[0],A=1/0,P=h.categoricalDomain.sort(z7);if(P.forEach(function(G,Z){Z>0&&(A=Math.min((G||0)-(P[Z-1]||0),A))}),Number.isFinite(A)){var M=A/k,U=h.layout==="vertical"?a.height:a.width;if(h.padding==="gap"&&(j=M*U/2),h.padding==="no-gap"){var W=Uo(t.barCategoryGap,M*U),Y=M*U/2;j=Y-W-(Y-W)/U*W}}}s==="xAxis"?O=[a.left+(v.left||0)+(j||0),a.left+a.width-(v.right||0)-(j||0)]:s==="yAxis"?O=c==="horizontal"?[a.top+a.height-(v.bottom||0),a.top+(v.top||0)]:[a.top+(v.top||0)+(j||0),a.top+a.height-(v.bottom||0)-(j||0)]:O=h.range,g&&(O=[O[1],O[0]]);var B=oee(h,i,m),ae=B.scale,oe=B.realScaleType;ae.domain(N).range(O),lee(ae);var D=pee(ae,Vn(Vn({},h),{},{realScaleType:oe}));s==="xAxis"?(T=b==="top"&&!x||b==="bottom"&&x,_=a.left,E=f[w]-T*h.height):s==="yAxis"&&(T=b==="left"&&!x||b==="right"&&x,_=f[w]-T*h.width,E=a.top);var H=Vn(Vn(Vn({},h),D),{},{realScaleType:oe,x:_,y:E,scale:ae,width:s==="xAxis"?a.width:h.width,height:s==="yAxis"?a.height:h.height});return H.bandSize=hh(H,D),!h.hide&&s==="xAxis"?f[w]+=(T?-1:1)*H.height:h.hide||(f[w]+=(T?-1:1)*H.width),Vn(Vn({},p),{},Zx({},y,H))},{})},hP=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},Rse=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return hP({x:r,y:a},{x:s,y:i})},xP=function(){function e(t){Dse(this,e),this.scale=t}return Ise(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();Zx(xP,"EPS",1e-4);var Rw=function(t){var r=Object.keys(t).reduce(function(a,s){return Vn(Vn({},a),{},Zx({},s,xP.create(t[s])))},{});return Vn(Vn({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return rse(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return cP(s,function(i,o){return r[o].isInRange(i)})}})};function Lse(e){return(e%180+180)%180}var $se=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Lse(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Bse=Xi,Use=Ff,Wse=Fx;function qse(e){return function(t,r,a){var s=Object(t);if(!Use(t)){var i=Bse(r);t=Wse(t),r=function(l){return i(s[l],l,s)}}var o=e(t,r,a);return o>-1?s[i?t[o]:o]:void 0}}var Kse=qse,Vse=sP;function zse(e){var t=Vse(e),r=t%1;return t===t?r?t-r:t:0}var Hse=zse,Gse=j3,Xse=Xi,Yse=Hse,Qse=Math.max;function Jse(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var s=r==null?0:Yse(r);return s<0&&(s=Qse(a+s,0)),Gse(e,Xse(t),s)}var Zse=Jse,eie=Kse,tie=Zse,rie=eie(tie),aie=rie;const nie=Qt(aie);var sie=H$(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Lw=C.createContext(void 0),$w=C.createContext(void 0),pP=C.createContext(void 0),gP=C.createContext({}),yP=C.createContext(void 0),vP=C.createContext(0),bP=C.createContext(0),WC=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=sie(i);return se.createElement(Lw.Provider,{value:a},se.createElement($w.Provider,{value:s},se.createElement(gP.Provider,{value:i},se.createElement(pP.Provider,{value:d},se.createElement(yP.Provider,{value:o},se.createElement(vP.Provider,{value:u},se.createElement(bP.Provider,{value:c},l)))))))},iie=function(){return C.useContext(yP)},wP=function(t){var r=C.useContext(Lw);r==null&&qo(!1);var a=r[t];return a==null&&qo(!1),a},oie=function(){var t=C.useContext(Lw);return hi(t)},lie=function(){var t=C.useContext($w),r=nie(t,function(a){return cP(a.domain,Number.isFinite)});return r||hi(t)},NP=function(t){var r=C.useContext($w);r==null&&qo(!1);var a=r[t];return a==null&&qo(!1),a},cie=function(){var t=C.useContext(pP);return t},uie=function(){return C.useContext(gP)},Bw=function(){return C.useContext(bP)},Uw=function(){return C.useContext(vP)};function kc(e){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(e)}function die(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,SP(a.key),a)}}function fie(e,t,r){return t&&qC(e.prototype,t),r&&qC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mie(e,t,r){return t=_h(t),hie(e,jP()?Reflect.construct(t,r||[],_h(e).constructor):t.apply(e,r))}function hie(e,t){if(t&&(kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xie(e)}function xie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jP=function(){return!!e})()}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_h(e)}function pie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t1(e,t)}function t1(e,t){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},t1(e,t)}function KC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function VC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(r),!0).forEach(function(a){Ww(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ww(e,t,r){return t=SP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SP(e){var t=gie(e,"string");return kc(t)=="symbol"?t:t+""}function gie(e,t){if(kc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(kc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yie(e,t){return Nie(e)||wie(e,t)||bie(e,t)||vie()}function vie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bie(e,t){if(e){if(typeof e=="string")return zC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zC(e,t)}}function zC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function wie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Nie(e){if(Array.isArray(e))return e}function r1(){return r1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},r1.apply(this,arguments)}var jie=function(t,r){var a;return se.isValidElement(t)?a=se.cloneElement(t,r):xt(t)?a=t(r):a=se.createElement("line",r1({},r,{className:"recharts-reference-line-line"})),a},Sie=function(t,r,a,s,i,o,l,c,u){var d=i.x,f=i.y,m=i.width,p=i.height;if(a){var y=u.y,h=t.y.apply(y,{position:o});if(ps(u,"discard")&&!t.y.isInRange(h))return null;var b=[{x:d+m,y:h},{x:d,y:h}];return c==="left"?b.reverse():b}if(r){var N=u.x,S=t.x.apply(N,{position:o});if(ps(u,"discard")&&!t.x.isInRange(S))return null;var v=[{x:S,y:f+p},{x:S,y:f}];return l==="top"?v.reverse():v}if(s){var x=u.segment,g=x.map(function(w){return t.apply(w,{position:o})});return ps(u,"discard")&&Gne(g,function(w){return!t.isInRange(w)})?null:g}return null};function kie(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=iie(),d=wP(s),f=NP(i),m=cie();if(!u||!m)return null;Rs(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Rw({x:d.scale,y:f.scale}),y=qr(t),h=qr(r),b=a&&a.length===2,N=Sie(p,y,h,b,m,e.position,d.orientation,f.orientation,e);if(!N)return null;var S=yie(N,2),v=S[0],x=v.x,g=v.y,w=S[1],j=w.x,O=w.y,_=ps(e,"hidden")?"url(#".concat(u,")"):void 0,E=VC(VC({clipPath:_},St(e,!0)),{},{x1:x,y1:g,x2:j,y2:O});return se.createElement(_r,{className:Pt("recharts-reference-line",l)},jie(o,E),ba.renderCallByParent(e,Rse({x1:x,y1:g,x2:j,y2:O})))}var qw=function(e){function t(){return die(this,t),mie(this,t,arguments)}return pie(t,e),fie(t,[{key:"render",value:function(){return se.createElement(kie,this.props)}}])}(se.Component);Ww(qw,"displayName","ReferenceLine");Ww(qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},a1.apply(this,arguments)}function Cc(e){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cc(e)}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function GC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(a){ep(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Cie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,CP(a.key),a)}}function Oie(e,t,r){return t&&XC(e.prototype,t),r&&XC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ie(e,t,r){return t=Th(t),Tie(e,kP()?Reflect.construct(t,r||[],Th(e).constructor):t.apply(e,r))}function Tie(e,t){if(t&&(Cc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eie(e)}function Eie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kP=function(){return!!e})()}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Th(e)}function Aie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n1(e,t)}function n1(e,t){return n1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},n1(e,t)}function ep(e,t,r){return t=CP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CP(e){var t=Pie(e,"string");return Cc(t)=="symbol"?t:t+""}function Pie(e,t){if(Cc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Cc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Die=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=Rw({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return ps(t,"discard")&&!o.isInRange(l)?null:l},tp=function(e){function t(){return Cie(this,t),_ie(this,t,arguments)}return Aie(t,e),Oie(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,u=qr(s),d=qr(i);if(Rs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=Die(this.props);if(!f)return null;var m=f.x,p=f.y,y=this.props,h=y.shape,b=y.className,N=ps(this.props,"hidden")?"url(#".concat(c,")"):void 0,S=GC(GC({clipPath:N},St(this.props,!0)),{},{cx:m,cy:p});return se.createElement(_r,{className:Pt("recharts-reference-dot",b)},t.renderDot(h,S),ba.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])}(se.Component);ep(tp,"displayName","ReferenceDot");ep(tp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ep(tp,"renderDot",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):xt(e)?r=e(t):r=se.createElement(Fw,a1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s1.apply(this,arguments)}function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function YC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function QC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(r),!0).forEach(function(a){rp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Iie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_P(a.key),a)}}function Mie(e,t,r){return t&&JC(e.prototype,t),r&&JC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fie(e,t,r){return t=Eh(t),Rie(e,OP()?Reflect.construct(t,r||[],Eh(e).constructor):t.apply(e,r))}function Rie(e,t){if(t&&(Oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lie(e)}function Lie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OP=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eh(e)}function $ie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i1(e,t)}function i1(e,t){return i1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},i1(e,t)}function rp(e,t,r){return t=_P(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _P(e){var t=Bie(e,"string");return Oc(t)=="symbol"?t:t+""}function Bie(e,t){if(Oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Oc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uie=function(t,r,a,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var m=Rw({x:d.scale,y:f.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:a?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return ps(i,"discard")&&(!m.isInRange(p)||!m.isInRange(y))?null:hP(p,y)},ap=function(e){function t(){return Iie(this,t),Fie(this,t,arguments)}return $ie(t,e),Mie(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,u=a.alwaysShow,d=a.clipPathId;Rs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=qr(s),m=qr(i),p=qr(o),y=qr(l),h=this.props.shape;if(!f&&!m&&!p&&!y&&!h)return null;var b=Uie(f,m,p,y,this.props);if(!b&&!h)return null;var N=ps(this.props,"hidden")?"url(#".concat(d,")"):void 0;return se.createElement(_r,{className:Pt("recharts-reference-area",c)},t.renderRect(h,QC(QC({clipPath:N},St(this.props,!0)),b)),ba.renderCallByParent(this.props,b))}}])}(se.Component);rp(ap,"displayName","ReferenceArea");rp(ap,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});rp(ap,"renderRect",function(e,t){var r;return se.isValidElement(e)?r=se.cloneElement(e,t):xt(e)?r=e(t):r=se.createElement(Mw,s1({},t,{className:"recharts-reference-area-rect"})),r});function TP(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)if(r===void 0||r(e[s])===!0)a.push(e[s]);else return;return a}function Wie(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return $se(a,r)}function qie(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function Ah(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function Kie(e,t){return TP(e,t+1)}function Vie(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var y=a==null?void 0:a[c];if(y===void 0)return{v:TP(a,u)};var h=c,b,N=function(){return b===void 0&&(b=r(y,h)),b},S=y.coordinate,v=c===0||Ah(e,S,N,d,l);v||(c=0,d=o,u+=1),v&&(d=S+e*(N()/2+s),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function ZC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(r),!0).forEach(function(a){zie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zie(e,t,r){return t=Hie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hie(e){var t=Gie(e,"string");return sf(t)=="symbol"?t:t+""}function Gie(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(sf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xie(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var p=i[m],y,h=function(){return y===void 0&&(y=r(p,m)),y};if(m===o-1){var b=e*(p.coordinate+e*h()/2-c);i[m]=p=pa(pa({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[m]=p=pa(pa({},p),{},{tickCoord:p.coordinate});var N=Ah(e,p.tickCoord,h,l,c);N&&(c=p.tickCoord-e*(h()/2+s),i[m]=pa(pa({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function Yie(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=a[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=pa(pa({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=Ah(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+s),o[l-1]=pa(pa({},d),{},{isShow:!0}))}for(var y=i?l-1:l,h=function(S){var v=o[S],x,g=function(){return x===void 0&&(x=r(v,S)),x};if(S===0){var w=e*(v.coordinate-e*g()/2-c);o[S]=v=pa(pa({},v),{},{tickCoord:w<0?v.coordinate-w*e:v.coordinate})}else o[S]=v=pa(pa({},v),{},{tickCoord:v.coordinate});var j=Ah(e,v.tickCoord,g,c,u);j&&(c=v.tickCoord+e*(g()/2+s),o[S]=pa(pa({},v),{},{isShow:!0}))},b=0;b<y;b++)h(b);return o}function Kw(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(Re(c)||Ls.isSsr)return Kie(s,typeof c=="number"&&Re(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",y=d&&p==="width"?zu(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},h=function(v,x){var g=xt(u)?u(v.value,x):v.value;return p==="width"?Wie(zu(g,{fontSize:t,letterSpacing:r}),y,f):zu(g,{fontSize:t,letterSpacing:r})[p]},b=s.length>=2?Qn(s[1].coordinate-s[0].coordinate):1,N=qie(i,b,p);return c==="equidistantPreserveStart"?Vie(b,N,h,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=Yie(b,N,h,s,o,c==="preserveStartEnd"):m=Xie(b,N,h,s,o),m.filter(function(S){return S.isShow}))}var Qie=["viewBox"],Jie=["viewBox"],Zie=["ticks"];function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Rl.apply(this,arguments)}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(a){Vw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Sg(e,t){if(e==null)return{};var r=eoe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function eoe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function toe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,AP(a.key),a)}}function roe(e,t,r){return t&&tO(e.prototype,t),r&&tO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aoe(e,t,r){return t=Ph(t),noe(e,EP()?Reflect.construct(t,r||[],Ph(e).constructor):t.apply(e,r))}function noe(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return soe(e)}function soe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EP=function(){return!!e})()}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ph(e)}function ioe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o1(e,t)}function o1(e,t){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},o1(e,t)}function Vw(e,t,r){return t=AP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AP(e){var t=ooe(e,"string");return _c(t)=="symbol"?t:t+""}function ooe(e,t){if(_c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(_c(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jc=function(e){function t(r){var a;return toe(this,t),a=aoe(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return ioe(t,e),roe(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=Sg(a,Qie),l=this.props,c=l.viewBox,u=Sg(l,Jie);return!Hl(i,c)||!Hl(o,u)||!Hl(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,f=s.mirror,m=s.tickMargin,p,y,h,b,N,S,v=f?-1:1,x=a.tickSize||d,g=Re(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":p=y=a.coordinate,b=o+ +!f*c,h=b-v*x,S=h-v*m,N=g;break;case"left":h=b=a.coordinate,y=i+ +!f*l,p=y-v*x,N=p-v*m,S=g;break;case"right":h=b=a.coordinate,y=i+ +f*l,p=y+v*x,N=p+v*m,S=g;break;default:p=y=a.coordinate,b=o+ +f*c,h=b+v*x,S=h+v*m,N=g;break}return{line:{x1:p,y1:h,x2:y,y2:b},tick:{x:N,y:S}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,u=a.mirror,d=a.axisLine,f=Lr(Lr(Lr({},St(this.props,!1)),St(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);f=Lr(Lr({},f),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=Lr(Lr({},f),{},{x1:s+p*o,y1:i,x2:s+p*o,y2:i+l})}return se.createElement("line",Rl({},f,{className:Pt("recharts-cartesian-axis-line",An(d,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,m=l.unit,p=Kw(Lr(Lr({},this.props),{},{ticks:a}),s,i),y=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),b=St(this.props,!1),N=St(d,!1),S=Lr(Lr({},b),{},{fill:"none"},St(c,!1)),v=p.map(function(x,g){var w=o.getTickLineCoord(x),j=w.line,O=w.tick,_=Lr(Lr(Lr(Lr({textAnchor:y,verticalAnchor:h},b),{},{stroke:"none",fill:u},N),O),{},{index:g,payload:x,visibleTicksCount:p.length,tickFormatter:f});return se.createElement(_r,Rl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},Bm(o.props,x,g)),c&&se.createElement("line",Rl({},S,j,{className:Pt("recharts-cartesian-axis-tick-line",An(c,"className"))})),d&&t.renderTickItem(d,_,"".concat(xt(f)?f(x.value,g):x.value).concat(m||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var f=this.props,m=f.ticks,p=Sg(f,Zie),y=m;return xt(c)&&(y=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!y||!y.length?null:se.createElement(_r,{className:Pt("recharts-cartesian-axis",u),ref:function(b){a.layerReference=b}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),ba.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=Pt(s.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(a)?o=se.cloneElement(a,Lr(Lr({},s),{},{className:l})):xt(a)?o=a(Lr(Lr({},s),{},{className:l})):o=se.createElement(eh,Rl({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(C.Component);Vw(Jc,"displayName","CartesianAxis");Vw(Jc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var loe=["x1","y1","x2","y2","key"],coe=["offset"];function Ko(e){"@babel/helpers - typeof";return Ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ko(e)}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(a){uoe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uoe(e,t,r){return t=doe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function doe(e){var t=foe(e,"string");return Ko(t)=="symbol"?t:t+""}function foe(e,t){if(Ko(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ko(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},No.apply(this,arguments)}function aO(e,t){if(e==null)return{};var r=moe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function moe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var hoe=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return se.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function PP(e,t){var r;if(se.isValidElement(e))r=se.cloneElement(e,t);else if(xt(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=aO(t,loe),u=St(c,!1);u.offset;var d=aO(u,coe);r=se.createElement("line",No({},d,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function xoe(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=wa(wa({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return PP(s,u)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function poe(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=wa(wa({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return PP(s,u)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function goe(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,p){return m-p});s!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var y=!d[p+1],h=y?s+o-m:d[p+1]-m;if(h<=0)return null;var b=p%t.length;return se.createElement("rect",{key:"react-".concat(p),y:m,x:a,height:h,width:i,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function yoe(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var y=!d[p+1],h=y?i+l-m:d[p+1]-m;if(h<=0)return null;var b=p%a.length;return se.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:h,height:c,stroke:"none",fill:a[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var voe=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return WA(Kw(wa(wa(wa({},Jc.defaultProps),a),{},{ticks:Ps(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},boe=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return WA(Kw(wa(wa(wa({},Jc.defaultProps),a),{},{ticks:Ps(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},xl={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function am(e){var t,r,a,s,i,o,l=Bw(),c=Uw(),u=uie(),d=wa(wa({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:xl.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:xl.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:xl.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:xl.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:xl.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:xl.verticalFill,x:Re(e.x)?e.x:u.left,y:Re(e.y)?e.y:u.top,width:Re(e.width)?e.width:u.width,height:Re(e.height)?e.height:u.height}),f=d.x,m=d.y,p=d.width,y=d.height,h=d.syncWithTicks,b=d.horizontalValues,N=d.verticalValues,S=oie(),v=lie();if(!Re(p)||p<=0||!Re(y)||y<=0||!Re(f)||f!==+f||!Re(m)||m!==+m)return null;var x=d.verticalCoordinatesGenerator||voe,g=d.horizontalCoordinatesGenerator||boe,w=d.horizontalPoints,j=d.verticalPoints;if((!w||!w.length)&&xt(g)){var O=b&&b.length,_=g({yAxis:v?wa(wa({},v),{},{ticks:O?b:v.ticks}):void 0,width:l,height:c,offset:u},O?!0:h);Rs(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ko(_),"]")),Array.isArray(_)&&(w=_)}if((!j||!j.length)&&xt(x)){var E=N&&N.length,T=x({xAxis:S?wa(wa({},S),{},{ticks:E?N:S.ticks}):void 0,width:l,height:c,offset:u},E?!0:h);Rs(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ko(T),"]")),Array.isArray(T)&&(j=T)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(hoe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),se.createElement(xoe,No({},d,{offset:u,horizontalPoints:w,xAxis:S,yAxis:v})),se.createElement(poe,No({},d,{offset:u,verticalPoints:j,xAxis:S,yAxis:v})),se.createElement(goe,No({},d,{horizontalPoints:w})),se.createElement(yoe,No({},d,{verticalPoints:j})))}am.displayName="CartesianGrid";var woe=["type","layout","connectNulls","ref"],Noe=["key"];function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function nO(e,t){if(e==null)return{};var r=joe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function joe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yu.apply(this,arguments)}function sO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(r),!0).forEach(function(a){zn(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pl(e){return Ooe(e)||Coe(e)||koe(e)||Soe()}function Soe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function koe(e,t){if(e){if(typeof e=="string")return l1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l1(e,t)}}function Coe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ooe(e){if(Array.isArray(e))return l1(e)}function l1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IP(a.key),a)}}function Toe(e,t,r){return t&&iO(e.prototype,t),r&&iO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eoe(e,t,r){return t=Dh(t),Aoe(e,DP()?Reflect.construct(t,r||[],Dh(e).constructor):t.apply(e,r))}function Aoe(e,t){if(t&&(Tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Poe(e)}function Poe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DP=function(){return!!e})()}function Dh(e){return Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dh(e)}function Doe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c1(e,t)}function c1(e,t){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},c1(e,t)}function zn(e,t,r){return t=IP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IP(e){var t=Ioe(e,"string");return Tc(t)=="symbol"?t:t+""}function Ioe(e,t){if(Tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Tc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oo=function(e){function t(){var r;_oe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Eoe(this,t,[].concat(s)),zn(r,"state",{isAnimationFinished:!0,totalLength:0}),zn(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),zn(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(N,S){return N+S});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,m=l-o,p=[],y=0,h=0;y<c.length;h+=c[y],++y)if(h+c[y]>f){p=[].concat(pl(c.slice(0,y)),[f-h]);break}var b=p.length%2===0?[0,m]:[m];return[].concat(pl(t.repeat(c,d)),pl(p),b).map(function(N){return"".concat(N,"px")}).join(", ")}),zn(r,"id",Mf("recharts-line-")),zn(r,"pathRef",function(o){r.mainCurve=o}),zn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),zn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Doe(t,e),Toe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Pn(d,Uf);if(!f)return null;var m=function(h,b){return{x:h.x,y:h.y,value:h.value,errorVal:cn(h.payload,b)}},p={clipPath:a?"url(#clipPath-".concat(s,")"):null};return se.createElement(_r,p,f.map(function(y){return se.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=St(this.props,!1),m=St(c,!0),p=u.map(function(h,b){var N=Xa(Xa(Xa({key:"dot-".concat(b),r:3},f),m),{},{index:b,cx:h.x,cy:h.y,value:h.value,dataKey:d,payload:h.payload,points:u});return t.renderDotItem(c,N)}),y={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return se.createElement(_r,Yu({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(a,s,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=nO(l,woe),m=Xa(Xa(Xa({},St(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},o),{},{type:c,layout:u,connectNulls:d});return se.createElement(Bv,Yu({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,m=o.animationEasing,p=o.animationId,y=o.animateNewValues,h=o.width,b=o.height,N=this.state,S=N.prevPoints,v=N.totalLength;return se.createElement(wc,{begin:d,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t;if(S){var w=S.length/l.length,j=l.map(function(k,A){var P=Math.floor(A*w);if(S[P]){var M=S[P],U=Gn(M.x,k.x),W=Gn(M.y,k.y);return Xa(Xa({},k),{},{x:U(g),y:W(g)})}if(y){var Y=Gn(h*2,k.x),B=Gn(b/2,k.y);return Xa(Xa({},k),{},{x:Y(g),y:B(g)})}return Xa(Xa({},k),{},{x:k.x,y:k.y})});return i.renderCurveStatically(j,a,s)}var O=Gn(0,v),_=O(g),E;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});E=i.getStrokeDasharray(_,v,T)}else E=i.generateSimpleStrokeDasharray(v,_);return i.renderCurveStatically(l,a,s,{strokeDasharray:E})})}},{key:"renderCurve",value:function(a,s){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Hx(u,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.xAxis,d=s.yAxis,f=s.top,m=s.left,p=s.width,y=s.height,h=s.isAnimationActive,b=s.id;if(i||!l||!l.length)return null;var N=this.state.isAnimationFinished,S=l.length===1,v=Pt("recharts-line",c),x=u&&u.allowDataOverflow,g=d&&d.allowDataOverflow,w=x||g,j=vt(b)?this.id:b,O=(a=St(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},_=O.r,E=_===void 0?3:_,T=O.strokeWidth,k=T===void 0?2:T,A=tB(o)?o:{},P=A.clipDot,M=P===void 0?!0:P,U=E*2+k;return se.createElement(_r,{className:v},x||g?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(j)},se.createElement("rect",{x:x?m:m-p/2,y:g?f:f-y/2,width:x?p:p*2,height:g?y:y*2})),!M&&se.createElement("clipPath",{id:"clipPath-dots-".concat(j)},se.createElement("rect",{x:m-U/2,y:f-U/2,width:p+U,height:y+U}))):null,!S&&this.renderCurve(w,j),this.renderErrorBar(w,j),(S||o)&&this.renderDots(w,M,j),(!h||N)&&Di.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(pl(a),[0]):a,o=[],l=0;l<s;++l)o=[].concat(pl(o),pl(i));return o}},{key:"renderDotItem",value:function(a,s){var i;if(se.isValidElement(a))i=se.cloneElement(a,s);else if(xt(a))i=a(s);else{var o=s.key,l=nO(s,Noe),c=Pt("recharts-line-dot",typeof a!="boolean"?a.className:"");i=se.createElement(Fw,Yu({key:o},l,{className:c}))}return i}}])}(C.PureComponent);zn(Oo,"displayName","Line");zn(Oo,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ls.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});zn(Oo,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(m,p){var y=cn(m,o);return d==="horizontal"?{x:Fk({axis:r,ticks:s,bandSize:l,entry:m,index:p}),y:vt(y)?null:a.scale(y),value:y,payload:m}:{x:vt(y)?null:r.scale(y),y:Fk({axis:a,ticks:i,bandSize:l,entry:m,index:p}),value:y,payload:m}});return Xa({points:f,layout:d},u)});function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}function Moe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RP(a.key),a)}}function Foe(e,t,r){return t&&oO(e.prototype,t),r&&oO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Roe(e,t,r){return t=Ih(t),Loe(e,MP()?Reflect.construct(t,r||[],Ih(e).constructor):t.apply(e,r))}function Loe(e,t){if(t&&(Ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $oe(e)}function $oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MP=function(){return!!e})()}function Ih(e){return Ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ih(e)}function Boe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u1(e,t)}function u1(e,t){return u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},u1(e,t)}function FP(e,t,r){return t=RP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RP(e){var t=Uoe(e,"string");return Ec(t)=="symbol"?t:t+""}function Uoe(e,t){if(Ec(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ec(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d1.apply(this,arguments)}function Woe(e){var t=e.xAxisId,r=Bw(),a=Uw(),s=wP(t);return s==null?null:C.createElement(Jc,d1({},s,{className:Pt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return Ps(o,!0)}}))}var Ql=function(e){function t(){return Moe(this,t),Roe(this,t,arguments)}return Boe(t,e),Foe(t,[{key:"render",value:function(){return C.createElement(Woe,this.props)}}])}(C.Component);FP(Ql,"displayName","XAxis");FP(Ql,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function qoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BP(a.key),a)}}function Koe(e,t,r){return t&&lO(e.prototype,t),r&&lO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Voe(e,t,r){return t=Mh(t),zoe(e,LP()?Reflect.construct(t,r||[],Mh(e).constructor):t.apply(e,r))}function zoe(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hoe(e)}function Hoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LP=function(){return!!e})()}function Mh(e){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mh(e)}function Goe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f1(e,t)}function f1(e,t){return f1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},f1(e,t)}function $P(e,t,r){return t=BP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BP(e){var t=Xoe(e,"string");return Ac(t)=="symbol"?t:t+""}function Xoe(e,t){if(Ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ac(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},m1.apply(this,arguments)}var Yoe=function(t){var r=t.yAxisId,a=Bw(),s=Uw(),i=NP(r);return i==null?null:C.createElement(Jc,m1({},i,{className:Pt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return Ps(l,!0)}}))},Jl=function(e){function t(){return qoe(this,t),Voe(this,t,arguments)}return Goe(t,e),Koe(t,[{key:"render",value:function(){return C.createElement(Yoe,this.props)}}])}(C.Component);$P(Jl,"displayName","YAxis");$P(Jl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function cO(e){return ele(e)||Zoe(e)||Joe(e)||Qoe()}function Qoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Joe(e,t){if(e){if(typeof e=="string")return h1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h1(e,t)}}function Zoe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ele(e){if(Array.isArray(e))return h1(e)}function h1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var x1=function(t,r,a,s,i){var o=Pn(t,qw),l=Pn(t,tp),c=[].concat(cO(o),cO(l)),u=Pn(t,ap),d="".concat(s,"Id"),f=s[0],m=r;if(c.length&&(m=c.reduce(function(h,b){if(b.props[d]===a&&ps(b.props,"extendDomain")&&Re(b.props[f])){var N=b.props[f];return[Math.min(h[0],N),Math.max(h[1],N)]}return h},m)),u.length){var p="".concat(f,"1"),y="".concat(f,"2");m=u.reduce(function(h,b){if(b.props[d]===a&&ps(b.props,"extendDomain")&&Re(b.props[p])&&Re(b.props[y])){var N=b.props[p],S=b.props[y];return[Math.min(h[0],N,S),Math.max(h[1],N,S)]}return h},m)}return i&&i.length&&(m=i.reduce(function(h,b){return Re(b)?[Math.min(h[0],b),Math.max(h[1],b)]:h},m)),m},UP={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,f||c,m),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,y=new Array(p);m<p;m++)y[m]=f[m].fn;return y},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,p,y){var h=r?r+u:u;if(!this._events[h])return!1;var b=this._events[h],N=arguments.length,S,v;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,m),!0;case 5:return b.fn.call(b.context,d,f,m,p),!0;case 6:return b.fn.call(b.context,d,f,m,p,y),!0}for(v=1,S=new Array(N-1);v<N;v++)S[v-1]=arguments[v];b.fn.apply(b.context,S)}else{var x=b.length,g;for(v=0;v<x;v++)switch(b[v].once&&this.removeListener(u,b[v].fn,void 0,!0),N){case 1:b[v].fn.call(b[v].context);break;case 2:b[v].fn.call(b[v].context,d);break;case 3:b[v].fn.call(b[v].context,d,f);break;case 4:b[v].fn.call(b[v].context,d,f,m);break;default:if(!S)for(g=1,S=new Array(N-1);g<N;g++)S[g-1]=arguments[g];b[v].fn.apply(b[v].context,S)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===d&&(!m||y.once)&&(!f||y.context===f)&&o(this,p);else{for(var h=0,b=[],N=y.length;h<N;h++)(y[h].fn!==d||m&&!y[h].once||f&&y[h].context!==f)&&b.push(y[h]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(UP);var tle=UP.exports;const rle=Qt(tle);var kg=new rle,Cg="recharts.syncMouseEvents";function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function ale(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,WP(a.key),a)}}function nle(e,t,r){return t&&uO(e.prototype,t),r&&uO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Og(e,t,r){return t=WP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WP(e){var t=sle(e,"string");return of(t)=="symbol"?t:t+""}function sle(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(of(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ile=function(){function e(){ale(this,e),Og(this,"activeIndex",0),Og(this,"coordinateList",[]),Og(this,"layout","horizontal")}return nle(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((a=window)===null||a===void 0?void 0:a.scrollY)||0,f=i+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function ole(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&Re(a)&&Re(s))return!0}return!1}function lle(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function qP(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=ca(t,r,a,s),l=ca(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function cle(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,m=ca(l,c,u,f),p=ca(l,c,d,f);a=m.x,s=m.y,i=p.x,o=p.y}else return qP(t);return[{x:a,y:s},{x:i,y:o}]}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function D0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(a){ule(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ule(e,t,r){return t=dle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dle(e){var t=fle(e,"string");return lf(t)=="symbol"?t:t+""}function fle(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(lf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mle(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!p||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var y,h=Bv;if(m==="ScatterChart")y=o,h=yae;else if(m==="BarChart")y=lle(f,o,c,d),h=Mw;else if(f==="radial"){var b=qP(o),N=b.cx,S=b.cy,v=b.radius,x=b.startAngle,g=b.endAngle;y={cx:N,cy:S,startAngle:x,endAngle:g,innerRadius:v,outerRadius:v},h=HA}else y={points:cle(f,o,c)},h=Bv;var w=D0(D0(D0(D0({stroke:"#ccc",pointerEvents:"none"},c),y),St(p,!1)),{},{payload:l,payloadIndex:u,className:Pt("recharts-tooltip-cursor",p.className)});return C.isValidElement(p)?C.cloneElement(p,w):C.createElement(h,w)}var hle=["item"],xle=["children","className","width","height","style","compact","title","desc"];function Pc(e){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(e)}function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ll.apply(this,arguments)}function fO(e,t){return yle(e)||gle(e,t)||VP(e,t)||ple()}function ple(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gle(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function yle(e){if(Array.isArray(e))return e}function mO(e,t){if(e==null)return{};var r=vle(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function vle(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ble(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,zP(a.key),a)}}function wle(e,t,r){return t&&hO(e.prototype,t),r&&hO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nle(e,t,r){return t=Fh(t),jle(e,KP()?Reflect.construct(t,r||[],Fh(e).constructor):t.apply(e,r))}function jle(e,t){if(t&&(Pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sle(e)}function Sle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KP=function(){return!!e})()}function Fh(e){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fh(e)}function kle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p1(e,t)}function p1(e,t){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},p1(e,t)}function Dc(e){return _le(e)||Ole(e)||VP(e)||Cle()}function Cle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VP(e,t){if(e){if(typeof e=="string")return g1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g1(e,t)}}function Ole(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _le(e){if(Array.isArray(e))return g1(e)}function g1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function xO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(r),!0).forEach(function(a){at(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function at(e,t,r){return t=zP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zP(e){var t=Tle(e,"string");return Pc(t)=="symbol"?t:t+""}function Tle(e,t){if(Pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Pc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ele={xAxis:["bottom","top"],yAxis:["left","right"]},Ale={width:"100%",height:"100%"},HP={x:0,y:0};function I0(e){return e}var Ple=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Dle=function(t,r,a,s){var i=r.find(function(d){return d&&d.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Se(Se(Se({},s),ca(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return Se(Se(Se({},s),ca(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return HP},np=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Dc(l),Dc(u)):l},[]);return o.length>0?o:t&&t.length&&Re(s)&&Re(i)?t.slice(s,i+1):[]};function GP(e){return e==="number"?[0,"auto"]:void 0}var y1=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=np(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;m=Lm(p,o.dataKey,s)}else m=f&&f[a]||l[a];return m?[].concat(Dc(c),[KA(u,m)]):c},[])},pO=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=Ple(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=tee(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,m=y1(t,r,d,f),p=Dle(a,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:m,activeCoordinate:p}}return null},Ile=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=t.stackOffset,p=UA(d,i);return a.reduce(function(y,h){var b,N=h.type.defaultProps!==void 0?Se(Se({},h.type.defaultProps),h.props):h.props,S=N.type,v=N.dataKey,x=N.allowDataOverflow,g=N.allowDuplicatedCategory,w=N.scale,j=N.ticks,O=N.includeHidden,_=N[o];if(y[_])return y;var E=np(t.data,{graphicalItems:s.filter(function(D){var H,G=o in D.props?D.props[o]:(H=D.type.defaultProps)===null||H===void 0?void 0:H[o];return G===_}),dataStartIndex:c,dataEndIndex:u}),T=E.length,k,A,P;ole(N.domain,x,S)&&(k=Mv(N.domain,null,x),p&&(S==="number"||w!=="auto")&&(P=Gu(E,v,"category")));var M=GP(S);if(!k||k.length===0){var U,W=(U=N.domain)!==null&&U!==void 0?U:M;if(v){if(k=Gu(E,v,S),S==="category"&&p){var Y=V7(k);g&&Y?(A=k,k=jh(0,T)):g||(k=Bk(W,k,h).reduce(function(D,H){return D.indexOf(H)>=0?D:[].concat(Dc(D),[H])},[]))}else if(S==="category")g?k=k.filter(function(D){return D!==""&&!vt(D)}):k=Bk(W,k,h).reduce(function(D,H){return D.indexOf(H)>=0||H===""||vt(H)?D:[].concat(Dc(D),[H])},[]);else if(S==="number"){var B=iee(E,s.filter(function(D){var H,G,Z=o in D.props?D.props[o]:(H=D.type.defaultProps)===null||H===void 0?void 0:H[o],X="hide"in D.props?D.props.hide:(G=D.type.defaultProps)===null||G===void 0?void 0:G.hide;return Z===_&&(O||!X)}),v,i,d);B&&(k=B)}p&&(S==="number"||w!=="auto")&&(P=Gu(E,v,"category"))}else p?k=jh(0,T):l&&l[_]&&l[_].hasStack&&S==="number"?k=m==="expand"?[0,1]:qA(l[_].stackGroups,c,u):k=BA(E,s.filter(function(D){var H=o in D.props?D.props[o]:D.type.defaultProps[o],G="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return H===_&&(O||!G)}),S,d,!0);if(S==="number")k=x1(f,k,_,i,j),W&&(k=Mv(W,k,x));else if(S==="category"&&W){var ae=W,oe=k.every(function(D){return ae.indexOf(D)>=0});oe&&(k=ae)}}return Se(Se({},y),{},at({},_,Se(Se({},N),{},{axisType:i,domain:k,categoricalDomain:P,duplicateDomain:A,originalDomain:(b=N.domain)!==null&&b!==void 0?b:M,isCategorical:p,layout:d})))},{})},Mle=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=np(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:u}),p=m.length,y=UA(d,i),h=-1;return a.reduce(function(b,N){var S=N.type.defaultProps!==void 0?Se(Se({},N.type.defaultProps),N.props):N.props,v=S[o],x=GP("number");if(!b[v]){h++;var g;return y?g=jh(0,p):l&&l[v]&&l[v].hasStack?(g=qA(l[v].stackGroups,c,u),g=x1(f,g,v,i)):(g=Mv(x,BA(m,a.filter(function(w){var j,O,_=o in w.props?w.props[o]:(j=w.type.defaultProps)===null||j===void 0?void 0:j[o],E="hide"in w.props?w.props.hide:(O=w.type.defaultProps)===null||O===void 0?void 0:O.hide;return _===v&&!E}),"number",d),s.defaultProps.allowDataOverflow),g=x1(f,g,v,i)),Se(Se({},b),{},at({},v,Se(Se({axisType:i},s.defaultProps),{},{hide:!0,orientation:An(Ele,"".concat(i,".").concat(h%2),null),domain:g,originalDomain:x,isCategorical:y,layout:d})))}return b},{})},Fle=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(s,"Id"),m=Pn(d,i),p={};return m&&m.length?p=Ile(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=Mle(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},Rle=function(t){var r=hi(t),a=Ps(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:lw(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:hh(r,a)}},gO=function(t){var r=t.children,a=t.defaultShowTooltip,s=Ja(r,jc),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},Lle=function(t){return!t||!t.length?!1:t.some(function(r){var a=Fs(r&&r.type);return a&&a.indexOf("Bar")>=0})},yO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$le=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=a.width,d=a.height,f=a.children,m=a.margin||{},p=Ja(f,jc),y=Ja(f,Gl),h=Object.keys(c).reduce(function(g,w){var j=c[w],O=j.orientation;return!j.mirror&&!j.hide?Se(Se({},g),{},at({},O,g[O]+j.width)):g},{left:m.left||0,right:m.right||0}),b=Object.keys(o).reduce(function(g,w){var j=o[w],O=j.orientation;return!j.mirror&&!j.hide?Se(Se({},g),{},at({},O,An(g,"".concat(O))+j.height)):g},{top:m.top||0,bottom:m.bottom||0}),N=Se(Se({},b),h),S=N.bottom;p&&(N.bottom+=p.props.height||jc.defaultProps.height),y&&r&&(N=nee(N,s,a,r));var v=u-N.left-N.right,x=d-N.top-N.bottom;return Se(Se({brushBottom:S},N),{},{width:Math.max(v,0),height:Math.max(x,0)})},Ble=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Ule=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,m=function(N,S){var v=S.graphicalItems,x=S.stackGroups,g=S.offset,w=S.updateId,j=S.dataStartIndex,O=S.dataEndIndex,_=N.barSize,E=N.layout,T=N.barGap,k=N.barCategoryGap,A=N.maxBarSize,P=yO(E),M=P.numericAxisName,U=P.cateAxisName,W=Lle(v),Y=[];return v.forEach(function(B,ae){var oe=np(N.data,{graphicalItems:[B],dataStartIndex:j,dataEndIndex:O}),D=B.type.defaultProps!==void 0?Se(Se({},B.type.defaultProps),B.props):B.props,H=D.dataKey,G=D.maxBarSize,Z=D["".concat(M,"Id")],X=D["".concat(U,"Id")],ie={},pe=c.reduce(function(mt,ht){var He=S["".concat(ht.axisType,"Map")],gt=D["".concat(ht.axisType,"Id")];He&&He[gt]||ht.axisType==="zAxis"||qo(!1);var Rt=He[gt];return Se(Se({},mt),{},at(at({},ht.axisType,Rt),"".concat(ht.axisType,"Ticks"),Ps(Rt)))},ie),ne=pe[U],ee=pe["".concat(U,"Ticks")],we=x&&x[Z]&&x[Z].hasStack&&yee(B,x[Z].stackGroups),F=Fs(B.type).indexOf("Bar")>=0,Ue=hh(ne,ee),R=[],ve=W&&ree({barSize:_,stackGroups:x,totalSize:Ble(pe,U)});if(F){var xe,de,Ve=vt(G)?A:G,ft=(xe=(de=hh(ne,ee,!0))!==null&&de!==void 0?de:Ve)!==null&&xe!==void 0?xe:0;R=aee({barGap:T,barCategoryGap:k,bandSize:ft!==Ue?ft:Ue,sizeList:ve[X],maxBarSize:Ve}),ft!==Ue&&(R=R.map(function(mt){return Se(Se({},mt),{},{position:Se(Se({},mt.position),{},{offset:mt.position.offset-ft/2})})}))}var it=B&&B.type&&B.type.getComposedData;it&&Y.push({props:Se(Se({},it(Se(Se({},pe),{},{displayedData:oe,props:N,dataKey:H,item:B,bandSize:Ue,barPosition:R,offset:g,stackedData:we,layout:E,dataStartIndex:j,dataEndIndex:O}))),{},at(at(at({key:B.key||"item-".concat(ae)},M,pe[M]),U,pe[U]),"animationId",w)),childIndex:nB(B,N.children),item:B})}),Y},p=function(N,S){var v=N.props,x=N.dataStartIndex,g=N.dataEndIndex,w=N.updateId;if(!T2({props:v}))return null;var j=v.children,O=v.layout,_=v.stackOffset,E=v.data,T=v.reverseStackOrder,k=yO(O),A=k.numericAxisName,P=k.cateAxisName,M=Pn(j,a),U=xee(E,M,"".concat(A,"Id"),"".concat(P,"Id"),_,T),W=c.reduce(function(D,H){var G="".concat(H.axisType,"Map");return Se(Se({},D),{},at({},G,Fle(v,Se(Se({},H),{},{graphicalItems:M,stackGroups:H.axisType===A&&U,dataStartIndex:x,dataEndIndex:g}))))},{}),Y=$le(Se(Se({},W),{},{props:v,graphicalItems:M}),S==null?void 0:S.legendBBox);Object.keys(W).forEach(function(D){W[D]=d(v,W[D],Y,D.replace("Map",""),r)});var B=W["".concat(P,"Map")],ae=Rle(B),oe=m(v,Se(Se({},W),{},{dataStartIndex:x,dataEndIndex:g,updateId:w,graphicalItems:M,stackGroups:U,offset:Y}));return Se(Se({formattedGraphicalItems:oe,graphicalItems:M,offset:Y,stackGroups:U},ae),W)},y=function(b){function N(S){var v,x,g;return ble(this,N),g=Nle(this,N,[S]),at(g,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),at(g,"accessibilityManager",new ile),at(g,"handleLegendBBoxUpdate",function(w){if(w){var j=g.state,O=j.dataStartIndex,_=j.dataEndIndex,E=j.updateId;g.setState(Se({legendBBox:w},p({props:g.props,dataStartIndex:O,dataEndIndex:_,updateId:E},Se(Se({},g.state),{},{legendBBox:w}))))}}),at(g,"handleReceiveSyncEvent",function(w,j,O){if(g.props.syncId===w){if(O===g.eventEmitterSymbol&&typeof g.props.syncMethod!="function")return;g.applySyncEvent(j)}}),at(g,"handleBrushChange",function(w){var j=w.startIndex,O=w.endIndex;if(j!==g.state.dataStartIndex||O!==g.state.dataEndIndex){var _=g.state.updateId;g.setState(function(){return Se({dataStartIndex:j,dataEndIndex:O},p({props:g.props,dataStartIndex:j,dataEndIndex:O,updateId:_},g.state))}),g.triggerSyncEvent({dataStartIndex:j,dataEndIndex:O})}}),at(g,"handleMouseEnter",function(w){var j=g.getMouseInfo(w);if(j){var O=Se(Se({},j),{},{isTooltipActive:!0});g.setState(O),g.triggerSyncEvent(O);var _=g.props.onMouseEnter;xt(_)&&_(O,w)}}),at(g,"triggeredAfterMouseMove",function(w){var j=g.getMouseInfo(w),O=j?Se(Se({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};g.setState(O),g.triggerSyncEvent(O);var _=g.props.onMouseMove;xt(_)&&_(O,w)}),at(g,"handleItemMouseEnter",function(w){g.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),at(g,"handleItemMouseLeave",function(){g.setState(function(){return{isTooltipActive:!1}})}),at(g,"handleMouseMove",function(w){w.persist(),g.throttleTriggeredAfterMouseMove(w)}),at(g,"handleMouseLeave",function(w){g.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};g.setState(j),g.triggerSyncEvent(j);var O=g.props.onMouseLeave;xt(O)&&O(j,w)}),at(g,"handleOuterEvent",function(w){var j=aB(w),O=An(g.props,"".concat(j));if(j&&xt(O)){var _,E;/.*touch.*/i.test(j)?E=g.getMouseInfo(w.changedTouches[0]):E=g.getMouseInfo(w),O((_=E)!==null&&_!==void 0?_:{},w)}}),at(g,"handleClick",function(w){var j=g.getMouseInfo(w);if(j){var O=Se(Se({},j),{},{isTooltipActive:!0});g.setState(O),g.triggerSyncEvent(O);var _=g.props.onClick;xt(_)&&_(O,w)}}),at(g,"handleMouseDown",function(w){var j=g.props.onMouseDown;if(xt(j)){var O=g.getMouseInfo(w);j(O,w)}}),at(g,"handleMouseUp",function(w){var j=g.props.onMouseUp;if(xt(j)){var O=g.getMouseInfo(w);j(O,w)}}),at(g,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&g.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),at(g,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&g.handleMouseDown(w.changedTouches[0])}),at(g,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&g.handleMouseUp(w.changedTouches[0])}),at(g,"handleDoubleClick",function(w){var j=g.props.onDoubleClick;if(xt(j)){var O=g.getMouseInfo(w);j(O,w)}}),at(g,"handleContextMenu",function(w){var j=g.props.onContextMenu;if(xt(j)){var O=g.getMouseInfo(w);j(O,w)}}),at(g,"triggerSyncEvent",function(w){g.props.syncId!==void 0&&kg.emit(Cg,g.props.syncId,w,g.eventEmitterSymbol)}),at(g,"applySyncEvent",function(w){var j=g.props,O=j.layout,_=j.syncMethod,E=g.state.updateId,T=w.dataStartIndex,k=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)g.setState(Se({dataStartIndex:T,dataEndIndex:k},p({props:g.props,dataStartIndex:T,dataEndIndex:k,updateId:E},g.state)));else if(w.activeTooltipIndex!==void 0){var A=w.chartX,P=w.chartY,M=w.activeTooltipIndex,U=g.state,W=U.offset,Y=U.tooltipTicks;if(!W)return;if(typeof _=="function")M=_(Y,w);else if(_==="value"){M=-1;for(var B=0;B<Y.length;B++)if(Y[B].value===w.activeLabel){M=B;break}}var ae=Se(Se({},W),{},{x:W.left,y:W.top}),oe=Math.min(A,ae.x+ae.width),D=Math.min(P,ae.y+ae.height),H=Y[M]&&Y[M].value,G=y1(g.state,g.props.data,M),Z=Y[M]?{x:O==="horizontal"?Y[M].coordinate:oe,y:O==="horizontal"?D:Y[M].coordinate}:HP;g.setState(Se(Se({},w),{},{activeLabel:H,activeCoordinate:Z,activePayload:G,activeTooltipIndex:M}))}else g.setState(w)}),at(g,"renderCursor",function(w){var j,O=g.state,_=O.isTooltipActive,E=O.activeCoordinate,T=O.activePayload,k=O.offset,A=O.activeTooltipIndex,P=O.tooltipAxisBandSize,M=g.getTooltipEventType(),U=(j=w.props.active)!==null&&j!==void 0?j:_,W=g.props.layout,Y=w.key||"_recharts-cursor";return se.createElement(mle,{key:Y,activeCoordinate:E,activePayload:T,activeTooltipIndex:A,chartName:r,element:w,isActive:U,layout:W,offset:k,tooltipAxisBandSize:P,tooltipEventType:M})}),at(g,"renderPolarAxis",function(w,j,O){var _=An(w,"type.axisType"),E=An(g.state,"".concat(_,"Map")),T=w.type.defaultProps,k=T!==void 0?Se(Se({},T),w.props):w.props,A=E&&E[k["".concat(_,"Id")]];return C.cloneElement(w,Se(Se({},A),{},{className:Pt(_,A.className),key:w.key||"".concat(j,"-").concat(O),ticks:Ps(A,!0)}))}),at(g,"renderPolarGrid",function(w){var j=w.props,O=j.radialLines,_=j.polarAngles,E=j.polarRadius,T=g.state,k=T.radiusAxisMap,A=T.angleAxisMap,P=hi(k),M=hi(A),U=M.cx,W=M.cy,Y=M.innerRadius,B=M.outerRadius;return C.cloneElement(w,{polarAngles:Array.isArray(_)?_:Ps(M,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(E)?E:Ps(P,!0).map(function(ae){return ae.coordinate}),cx:U,cy:W,innerRadius:Y,outerRadius:B,key:w.key||"polar-grid",radialLines:O})}),at(g,"renderLegend",function(){var w=g.state.formattedGraphicalItems,j=g.props,O=j.children,_=j.width,E=j.height,T=g.props.margin||{},k=_-(T.left||0)-(T.right||0),A=LA({children:O,formattedGraphicalItems:w,legendWidth:k,legendContent:u});if(!A)return null;var P=A.item,M=mO(A,hle);return C.cloneElement(P,Se(Se({},M),{},{chartWidth:_,chartHeight:E,margin:T,onBBoxUpdate:g.handleLegendBBoxUpdate}))}),at(g,"renderTooltip",function(){var w,j=g.props,O=j.children,_=j.accessibilityLayer,E=Ja(O,jn);if(!E)return null;var T=g.state,k=T.isTooltipActive,A=T.activeCoordinate,P=T.activePayload,M=T.activeLabel,U=T.offset,W=(w=E.props.active)!==null&&w!==void 0?w:k;return C.cloneElement(E,{viewBox:Se(Se({},U),{},{x:U.left,y:U.top}),active:W,label:M,payload:W?P:[],coordinate:A,accessibilityLayer:_})}),at(g,"renderBrush",function(w){var j=g.props,O=j.margin,_=j.data,E=g.state,T=E.offset,k=E.dataStartIndex,A=E.dataEndIndex,P=E.updateId;return C.cloneElement(w,{key:w.key||"_recharts-brush",onChange:T0(g.handleBrushChange,w.props.onChange),data:_,x:Re(w.props.x)?w.props.x:T.left,y:Re(w.props.y)?w.props.y:T.top+T.height+T.brushBottom-(O.bottom||0),width:Re(w.props.width)?w.props.width:T.width,startIndex:k,endIndex:A,updateId:"brush-".concat(P)})}),at(g,"renderReferenceElement",function(w,j,O){if(!w)return null;var _=g,E=_.clipPathId,T=g.state,k=T.xAxisMap,A=T.yAxisMap,P=T.offset,M=w.type.defaultProps||{},U=w.props,W=U.xAxisId,Y=W===void 0?M.xAxisId:W,B=U.yAxisId,ae=B===void 0?M.yAxisId:B;return C.cloneElement(w,{key:w.key||"".concat(j,"-").concat(O),xAxis:k[Y],yAxis:A[ae],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:E})}),at(g,"renderActivePoints",function(w){var j=w.item,O=w.activePoint,_=w.basePoint,E=w.childIndex,T=w.isRange,k=[],A=j.props.key,P=j.item.type.defaultProps!==void 0?Se(Se({},j.item.type.defaultProps),j.item.props):j.item.props,M=P.activeDot,U=P.dataKey,W=Se(Se({index:E,dataKey:U,cx:O.x,cy:O.y,r:4,fill:Iw(j.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},St(M,!1)),$m(M));return k.push(N.renderActiveDot(M,W,"".concat(A,"-activePoint-").concat(E))),_?k.push(N.renderActiveDot(M,Se(Se({},W),{},{cx:_.x,cy:_.y}),"".concat(A,"-basePoint-").concat(E))):T&&k.push(null),k}),at(g,"renderGraphicChild",function(w,j,O){var _=g.filterFormatItem(w,j,O);if(!_)return null;var E=g.getTooltipEventType(),T=g.state,k=T.isTooltipActive,A=T.tooltipAxis,P=T.activeTooltipIndex,M=T.activeLabel,U=g.props.children,W=Ja(U,jn),Y=_.props,B=Y.points,ae=Y.isRange,oe=Y.baseLine,D=_.item.type.defaultProps!==void 0?Se(Se({},_.item.type.defaultProps),_.item.props):_.item.props,H=D.activeDot,G=D.hide,Z=D.activeBar,X=D.activeShape,ie=!!(!G&&k&&W&&(H||Z||X)),pe={};E!=="axis"&&W&&W.props.trigger==="click"?pe={onClick:T0(g.handleItemMouseEnter,w.props.onClick)}:E!=="axis"&&(pe={onMouseLeave:T0(g.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:T0(g.handleItemMouseEnter,w.props.onMouseEnter)});var ne=C.cloneElement(w,Se(Se({},_.props),pe));function ee(ht){return typeof A.dataKey=="function"?A.dataKey(ht.payload):null}if(ie)if(P>=0){var we,F;if(A.dataKey&&!A.allowDuplicatedCategory){var Ue=typeof A.dataKey=="function"?ee:"payload.".concat(A.dataKey.toString());we=Lm(B,Ue,M),F=ae&&oe&&Lm(oe,Ue,M)}else we=B==null?void 0:B[P],F=ae&&oe&&oe[P];if(X||Z){var R=w.props.activeIndex!==void 0?w.props.activeIndex:P;return[C.cloneElement(w,Se(Se(Se({},_.props),pe),{},{activeIndex:R})),null,null]}if(!vt(we))return[ne].concat(Dc(g.renderActivePoints({item:_,activePoint:we,basePoint:F,childIndex:P,isRange:ae})))}else{var ve,xe=(ve=g.getItemByXY(g.state.activeCoordinate))!==null&&ve!==void 0?ve:{graphicalItem:ne},de=xe.graphicalItem,Ve=de.item,ft=Ve===void 0?w:Ve,it=de.childIndex,mt=Se(Se(Se({},_.props),pe),{},{activeIndex:it});return[C.cloneElement(ft,mt),null,null]}return ae?[ne,null,null]:[ne,null]}),at(g,"renderCustomized",function(w,j,O){return C.cloneElement(w,Se(Se({key:"recharts-customized-".concat(O)},g.props),g.state))}),at(g,"renderMap",{CartesianGrid:{handler:I0,once:!0},ReferenceArea:{handler:g.renderReferenceElement},ReferenceLine:{handler:I0},ReferenceDot:{handler:g.renderReferenceElement},XAxis:{handler:I0},YAxis:{handler:I0},Brush:{handler:g.renderBrush,once:!0},Bar:{handler:g.renderGraphicChild},Line:{handler:g.renderGraphicChild},Area:{handler:g.renderGraphicChild},Radar:{handler:g.renderGraphicChild},RadialBar:{handler:g.renderGraphicChild},Scatter:{handler:g.renderGraphicChild},Pie:{handler:g.renderGraphicChild},Funnel:{handler:g.renderGraphicChild},Tooltip:{handler:g.renderCursor,once:!0},PolarGrid:{handler:g.renderPolarGrid,once:!0},PolarAngleAxis:{handler:g.renderPolarAxis},PolarRadiusAxis:{handler:g.renderPolarAxis},Customized:{handler:g.renderCustomized}}),g.clipPathId="".concat((v=S.id)!==null&&v!==void 0?v:Mf("recharts"),"-clip"),g.throttleTriggeredAfterMouseMove=R3(g.triggeredAfterMouseMove,(x=S.throttleDelay)!==null&&x!==void 0?x:1e3/60),g.state={},g}return kle(N,b),wle(N,[{key:"componentDidMount",value:function(){var v,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,x=v.children,g=v.data,w=v.height,j=v.layout,O=Ja(x,jn);if(O){var _=O.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,T=y1(this.state,g,_,E),k=this.state.tooltipTicks[_].coordinate,A=(this.state.offset.top+w)/2,P=j==="horizontal",M=P?{x:k,y:A}:{y:k,x:A},U=this.state.formattedGraphicalItems.find(function(Y){var B=Y.item;return B.type.name==="Scatter"});U&&(M=Se(Se({},M),U.props.points[_].tooltipPosition),T=U.props.points[_].tooltipPayload);var W={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:E,activePayload:T,activeCoordinate:M};this.setState(W),this.renderCursor(O),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var g,w;this.accessibilityManager.setDetails({offset:{left:(g=this.props.margin.left)!==null&&g!==void 0?g:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(v){Yy([Ja(v.children,jn)],[Ja(this.props.children,jn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=Ja(this.props.children,jn);if(v&&typeof v.props.shared=="boolean"){var x=v.props.shared?"axis":"item";return l.indexOf(x)>=0?x:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var x=this.container,g=x.getBoundingClientRect(),w=OX(g),j={chartX:Math.round(v.pageX-w.left),chartY:Math.round(v.pageY-w.top)},O=g.width/x.offsetWidth||1,_=this.inRange(j.chartX,j.chartY,O);if(!_)return null;var E=this.state,T=E.xAxisMap,k=E.yAxisMap,A=this.getTooltipEventType(),P=pO(this.state,this.props.data,this.props.layout,_);if(A!=="axis"&&T&&k){var M=hi(T).scale,U=hi(k).scale,W=M&&M.invert?M.invert(j.chartX):null,Y=U&&U.invert?U.invert(j.chartY):null;return Se(Se({},j),{},{xValue:W,yValue:Y},P)}return P?Se(Se({},j),P):null}},{key:"inRange",value:function(v,x){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,j=v/g,O=x/g;if(w==="horizontal"||w==="vertical"){var _=this.state.offset,E=j>=_.left&&j<=_.left+_.width&&O>=_.top&&O<=_.top+_.height;return E?{x:j,y:O}:null}var T=this.state,k=T.angleAxisMap,A=T.radiusAxisMap;if(k&&A){var P=hi(k);return qk({x:j,y:O},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,x=this.getTooltipEventType(),g=Ja(v,jn),w={};g&&x==="axis"&&(g.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=$m(this.props,this.handleOuterEvent);return Se(Se({},j),w)}},{key:"addListener",value:function(){kg.on(Cg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kg.removeListener(Cg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,x,g){for(var w=this.state.formattedGraphicalItems,j=0,O=w.length;j<O;j++){var _=w[j];if(_.item===v||_.props.key===v.key||x===Fs(_.item.type)&&g===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,x=this.state.offset,g=x.left,w=x.top,j=x.height,O=x.width;return se.createElement("defs",null,se.createElement("clipPath",{id:v},se.createElement("rect",{x:g,y:w,height:j,width:O})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(x,g){var w=fO(g,2),j=w[0],O=w[1];return Se(Se({},x),{},at({},j,O.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(x,g){var w=fO(g,2),j=w[0],O=w[1];return Se(Se({},x),{},at({},j,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[v])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(v){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[v])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(v){var x=this.state,g=x.formattedGraphicalItems,w=x.activeItem;if(g&&g.length)for(var j=0,O=g.length;j<O;j++){var _=g[j],E=_.props,T=_.item,k=T.type.defaultProps!==void 0?Se(Se({},T.type.defaultProps),T.props):T.props,A=Fs(T.type);if(A==="Bar"){var P=(E.data||[]).find(function(Y){return lae(v,Y)});if(P)return{graphicalItem:_,payload:P}}else if(A==="RadialBar"){var M=(E.data||[]).find(function(Y){return qk(v,Y)});if(M)return{graphicalItem:_,payload:M}}else if(Qx(_,w)||Jx(_,w)||tf(_,w)){var U=dne({graphicalItem:_,activeTooltipItem:w,itemData:k.data}),W=k.activeIndex===void 0?U:k.activeIndex;return{graphicalItem:Se(Se({},_),{},{childIndex:W}),payload:tf(_,w)?k.data[U]:_.props.data[U]}}}return null}},{key:"render",value:function(){var v=this;if(!T2(this))return null;var x=this.props,g=x.children,w=x.className,j=x.width,O=x.height,_=x.style,E=x.compact,T=x.title,k=x.desc,A=mO(x,xle),P=St(A,!1);if(E)return se.createElement(WC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(Jy,Ll({},P,{width:j,height:O,title:T,desc:k}),this.renderClipPath(),A2(g,this.renderMap)));if(this.props.accessibilityLayer){var M,U;P.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,P.role=(U=this.props.role)!==null&&U!==void 0?U:"application",P.onKeyDown=function(Y){v.accessibilityManager.keyboardEvent(Y)},P.onFocus=function(){v.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return se.createElement(WC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",Ll({className:Pt("recharts-wrapper",w),style:Se({position:"relative",cursor:"default",width:j,height:O},_)},W,{ref:function(B){v.container=B}}),se.createElement(Jy,Ll({},P,{width:j,height:O,title:T,desc:k,style:Ale}),this.renderClipPath(),A2(g,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(C.Component);at(y,"displayName",r),at(y,"defaultProps",Se({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),at(y,"getDerivedStateFromProps",function(b,N){var S=b.dataKey,v=b.data,x=b.children,g=b.width,w=b.height,j=b.layout,O=b.stackOffset,_=b.margin,E=N.dataStartIndex,T=N.dataEndIndex;if(N.updateId===void 0){var k=gO(b);return Se(Se(Se({},k),{},{updateId:0},p(Se(Se({props:b},k),{},{updateId:0}),N)),{},{prevDataKey:S,prevData:v,prevWidth:g,prevHeight:w,prevLayout:j,prevStackOffset:O,prevMargin:_,prevChildren:x})}if(S!==N.prevDataKey||v!==N.prevData||g!==N.prevWidth||w!==N.prevHeight||j!==N.prevLayout||O!==N.prevStackOffset||!Hl(_,N.prevMargin)){var A=gO(b),P={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},M=Se(Se({},pO(N,v,j)),{},{updateId:N.updateId+1}),U=Se(Se(Se({},A),P),M);return Se(Se(Se({},U),p(Se({props:b},U),N)),{},{prevDataKey:S,prevData:v,prevWidth:g,prevHeight:w,prevLayout:j,prevStackOffset:O,prevMargin:_,prevChildren:x})}if(!Yy(x,N.prevChildren)){var W,Y,B,ae,oe=Ja(x,jc),D=oe&&(W=(Y=oe.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&W!==void 0?W:E,H=oe&&(B=(ae=oe.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&B!==void 0?B:T,G=D!==E||H!==T,Z=!vt(v),X=Z&&!G?N.updateId:N.updateId+1;return Se(Se({updateId:X},p(Se(Se({props:b},N),{},{updateId:X,dataStartIndex:D,dataEndIndex:H}),N)),{},{prevChildren:x,dataStartIndex:D,dataEndIndex:H})}return null}),at(y,"renderActiveDot",function(b,N,S){var v;return C.isValidElement(b)?v=C.cloneElement(b,N):xt(b)?v=b(N):v=se.createElement(Fw,N),se.createElement(_r,{className:"recharts-active-dot",key:S},v)});var h=C.forwardRef(function(N,S){return se.createElement(y,Ll({},N,{ref:S}))});return h.displayName=y.displayName,h},_g=Ule({chartName:"LineChart",GraphicalChild:Oo,axisComponents:[{axisType:"xAxis",AxisComp:Ql},{axisType:"yAxis",AxisComp:Jl}],formatAxisMap:Fse});const Zi=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onClearAll:a,onViewTransferOrder:s,onRefresh:i})=>{const[o,l]=C.useState(!1),c=C.useRef(null);C.useEffect(()=>{console.log(" NotificationDropdown: Received notifications:",e),console.log(" NotificationDropdown: Number of notifications:",e.length)},[e]),C.useEffect(()=>{const m=p=>{c.current&&!c.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const u=e.filter(m=>!m.read).length,d=m=>{switch(m){case"warning":return n.jsx($o,{className:"h-4 w-4 text-yellow-500"});case"success":return n.jsx(Ib,{className:"h-4 w-4 text-green-500"});case"error":return n.jsx($o,{className:"h-4 w-4 text-red-500"});default:return n.jsx(hE,{className:"h-4 w-4 text-blue-500"})}},f=m=>{const y=new Date().getTime()-m.getTime(),h=Math.floor(y/6e4),b=Math.floor(y/36e5),N=Math.floor(y/864e5);return h<1?"Just now":h<60?`${h}m ago`:b<24?`${b}h ago`:`${N}d ago`};return n.jsxs("div",{className:"relative",ref:c,children:[n.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Notifications",children:[n.jsx(h2,{className:"h-6 w-6"}),u>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:u>9?"9+":u})]}),o&&n.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[i&&n.jsx("button",{onClick:i,className:"text-sm text-gray-600 hover:text-gray-800 p-1 rounded",title:"Refresh notifications",children:n.jsx(ea,{className:"h-4 w-4"})}),u>0&&n.jsx("button",{onClick:r,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all read"}),n.jsx("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-800",children:"Clear all"}),n.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.length===0?n.jsxs("div",{className:"p-4 text-center text-gray-500",children:[n.jsx(h2,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),n.jsx("p",{children:"No notifications"})]}):e.map(m=>{var y;const p=m.read&&((y=m.title)==null?void 0:y.includes("Transfer Request from"));return n.jsx("div",{className:`p-4 border-b border-gray-100 ${m.read?"bg-gray-50":"bg-blue-50"} ${p?"opacity-70 cursor-pointer":m.isTransferOrder&&m.transferOrderId&&s?"cursor-pointer hover:bg-blue-100 transition-colors":"hover:bg-gray-50"}`,onClick:h=>{h.preventDefault(),h.stopPropagation(),console.log(" NotificationDropdown: Notification clicked!"),console.log(" NotificationDropdown: notification =",m),console.log(" NotificationDropdown: isDisabled =",p),console.log(" NotificationDropdown: isTransferOrder =",m.isTransferOrder),console.log(" NotificationDropdown: transferOrderId =",m.transferOrderId),console.log(" NotificationDropdown: onViewTransferOrder =",!!s),m.isTransferOrder&&m.transferOrderId&&s?(console.log(" NotificationDropdown: All conditions met, calling onViewTransferOrder"),l(!1),s(m.transferOrderId)):(console.log(" NotificationDropdown: Conditions not met for transfer order"),console.log(" NotificationDropdown: isTransferOrder =",m.isTransferOrder),console.log(" NotificationDropdown: transferOrderId =",m.transferOrderId),console.log(" NotificationDropdown: onViewTransferOrder exists =",!!s))},children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:d(m.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:`text-sm font-medium ${m.read?"text-gray-700":"text-gray-900"}`,children:m.title}),n.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[n.jsx(px,{className:"h-3 w-3"}),n.jsx("span",{children:f(m.timestamp)})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.message}),m.outlet&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.outlet}),m.isTransferOrder&&m.transferOrderId&&s&&n.jsx("p",{className:`text-xs mt-1 font-medium ${p?"text-gray-400":"text-blue-600"}`,children:p?" Processed (view only)":"Click to view transfer details "})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[m.isTransferOrder&&m.transferOrderId&&s&&n.jsx("button",{onClick:h=>{h.stopPropagation(),console.log("NotificationDropdown: Clicking View button"),console.log("NotificationDropdown: notification.transferOrderId =",m.transferOrderId),l(!1),s(m.transferOrderId)},className:`p-1 rounded transition-colors ${p?"text-gray-400 hover:text-gray-600 hover:bg-gray-100":"text-blue-600 hover:text-blue-800 hover:bg-blue-100"}`,title:p?"View Transfer Order (Read-only)":"View Transfer Order",children:n.jsx(zi,{className:"h-4 w-4"})}),p&&n.jsx("span",{className:"text-xs text-gray-400 px-2 py-1 bg-gray-100 rounded",title:"This transfer order has been processed",children:" Processed"}),n.jsx("button",{onClick:()=>t(m.id),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Mark as read",children:n.jsx("div",{className:`w-2 h-2 rounded-full ${m.read?"bg-gray-300":"bg-blue-500"}`})})]})]})},m.id)})}),e.length>0&&n.jsx("div",{className:"p-4 border-t border-gray-200",children:n.jsx("button",{onClick:a,className:"w-full text-sm text-gray-600 hover:text-gray-800 text-center",children:"Clear all notifications"})})]})]})},vO=()=>{const e=C.useMemo(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}},[]),t=!!(e!=null&&e.isAdmin),r=String((e==null?void 0:e.assignedOutletCode)||""),[a,s]=C.useState(()=>{if(!t){if(r==="KUWAIT_CITY")return"kuwait-city";if(r==="MALL_360")return"360-mall";if(r==="VIBE_COMPLEX")return"vibes-complex";if(r==="TAIBA_HOSPITAL")return"taiba-hospital"}return"overall"}),[i,o]=C.useState("all"),[l,c]=C.useState({}),[u,d]=C.useState(null),[f,m]=C.useState(!1),{notifications:p,markAsRead:y,markAllAsRead:h,clearAll:b}=Js("System"),N=C.useMemo(()=>{const j=[{id:"overall",name:"Overall Sales",icon:v0,color:"text-indigo-600"},{id:"kuwait-city",name:"Kuwait City",icon:En,color:"text-blue-600"},{id:"360-mall",name:"360 Mall",icon:Fm,color:"text-green-600"},{id:"vibes-complex",name:"Vibes Complex",icon:Rm,color:"text-orange-600"},{id:"taiba-hospital",name:"Taiba Hospital",icon:Mm,color:"text-purple-600"}];if(t)return j;const O=r==="KUWAIT_CITY"?"kuwait-city":r==="MALL_360"?"360-mall":r==="VIBE_COMPLEX"?"vibes-complex":r==="TAIBA_HOSPITAL"?"taiba-hospital":"kuwait-city";return j.filter(_=>_.id===O)},[t,r]),S={"kuwait-city":{name:"Kuwait City",totalSales:125e3,totalOrders:156,avgOrderValue:801,topProducts:[{name:"Caesar Salad",sales:12500,orders:45,category:"Recipe"},{name:"Grilled Chicken",sales:9800,orders:38,category:"Recipe"},{name:"Pasta Carbonara",sales:8700,orders:32,category:"Recipe"},{name:"Heartbeet",sales:11250,orders:40,category:"Finished Good"}],dailySales:[{day:"Mon",sales:8500},{day:"Tue",sales:9200},{day:"Wed",sales:7800},{day:"Thu",sales:10500},{day:"Fri",sales:12800},{day:"Sat",sales:15200},{day:"Sun",sales:11800}],dailySalesFinished:[{day:"Mon",sales:4200},{day:"Tue",sales:5100},{day:"Wed",sales:3600},{day:"Thu",sales:5600},{day:"Fri",sales:6900},{day:"Sat",sales:7800},{day:"Sun",sales:6e3}],dailySalesRecipe:[{day:"Mon",sales:4300},{day:"Tue",sales:4100},{day:"Wed",sales:4200},{day:"Thu",sales:4900},{day:"Fri",sales:5900},{day:"Sat",sales:7400},{day:"Sun",sales:5800}]},"360-mall":{name:"360 Mall",totalSales:89e3,totalOrders:134,avgOrderValue:664,topProducts:[{name:"Cappuccino",sales:9800,orders:65,category:"Recipe"},{name:"Latte",sales:7200,orders:48,category:"Recipe"},{name:"Croissant",sales:5400,orders:36,category:"Finished Good"}],dailySales:[{day:"Mon",sales:6200},{day:"Tue",sales:6800},{day:"Wed",sales:5900},{day:"Thu",sales:7500},{day:"Fri",sales:9200},{day:"Sat",sales:10800},{day:"Sun",sales:8200}],dailySalesFinished:[{day:"Mon",sales:2e3},{day:"Tue",sales:2100},{day:"Wed",sales:1800},{day:"Thu",sales:2400},{day:"Fri",sales:3e3},{day:"Sat",sales:3500},{day:"Sun",sales:2900}],dailySalesRecipe:[{day:"Mon",sales:4200},{day:"Tue",sales:4700},{day:"Wed",sales:4100},{day:"Thu",sales:5100},{day:"Fri",sales:6200},{day:"Sat",sales:7300},{day:"Sun",sales:5300}]},"vibes-complex":{name:"Vibes Complex",totalSales:67e3,totalOrders:98,avgOrderValue:684,topProducts:[{name:"Burger Deluxe",sales:8200,orders:28,category:"Finished Good"},{name:"Chicken Wrap",sales:6500,orders:25,category:"Finished Good"},{name:"French Fries",sales:4800,orders:32,category:"Finished Good"}],dailySales:[{day:"Mon",sales:4800},{day:"Tue",sales:5200},{day:"Wed",sales:4500},{day:"Thu",sales:5800},{day:"Fri",sales:7200},{day:"Sat",sales:8500},{day:"Sun",sales:6200}],dailySalesFinished:[{day:"Mon",sales:4800},{day:"Tue",sales:5200},{day:"Wed",sales:4500},{day:"Thu",sales:5800},{day:"Fri",sales:7200},{day:"Sat",sales:8500},{day:"Sun",sales:6200}],dailySalesRecipe:[{day:"Mon",sales:0},{day:"Tue",sales:0},{day:"Wed",sales:0},{day:"Thu",sales:0},{day:"Fri",sales:0},{day:"Sat",sales:0},{day:"Sun",sales:0}]},"taiba-hospital":{name:"Taiba Hospital",totalSales:45e3,totalOrders:67,avgOrderValue:672,topProducts:[{name:"Quick Sandwich",sales:6800,orders:22,category:"Finished Good"},{name:"Coffee",sales:4200,orders:35,category:"Recipe"},{name:"Energy Bar",sales:3200,orders:18,category:"Finished Good"}],dailySales:[{day:"Mon",sales:3200},{day:"Tue",sales:3500},{day:"Wed",sales:2800},{day:"Thu",sales:4200},{day:"Fri",sales:4800},{day:"Sat",sales:5200},{day:"Sun",sales:3800}],dailySalesFinished:[{day:"Mon",sales:1800},{day:"Tue",sales:1900},{day:"Wed",sales:1500},{day:"Thu",sales:2200},{day:"Fri",sales:2600},{day:"Sat",sales:2800},{day:"Sun",sales:2e3}],dailySalesRecipe:[{day:"Mon",sales:1400},{day:"Tue",sales:1600},{day:"Wed",sales:1300},{day:"Thu",sales:2e3},{day:"Fri",sales:2200},{day:"Sat",sales:2400},{day:"Sun",sales:1800}]}};C.useEffect(()=>{(async()=>{var O;if(a!=="overall")try{m(!0);const E={"kuwait-city":"Kuwait City","360-mall":"360 Mall","vibes-complex":"Vibes Complex","taiba-hospital":"Taiba Hospital"}[a]||"Kuwait City",T=new Date,k=new Date;k.setDate(T.getDate()-30);const A=await ce.getSalesOrders({outletName:E,limit:1e3,sortBy:"orderTiming.orderDate",sortOrder:"desc",startDate:k.toISOString(),endDate:T.toISOString()});if(!A.success||!Array.isArray(A.data)){c(X=>({...X,[a]:null})),m(!1);return}const P=A.data,M=P.reduce((X,ie)=>{var pe;return X+Number(((pe=ie==null?void 0:ie.orderSummary)==null?void 0:pe.totalAmount)||0)},0),U=P.length,W=U>0?Math.round(M/U):0,Y={};for(const X of P)for(const ie of X.orderItems||[]){const pe=ie.productName||ie.productCode,ne=`${pe}__${ie.category||"Finished Good"}`,ee=ie.category==="Recipe"?"Recipe":"Finished Good",we=Number(ie.totalPrice||Number(ie.unitPrice||0)*Number(ie.quantity||0)),F=Number(ie.quantity||1);Y[ne]||(Y[ne]={name:pe,sales:0,orders:0,category:ee}),Y[ne].sales+=we,Y[ne].orders+=F}const B=Object.values(Y).sort((X,ie)=>ie.sales-X.sales).slice(0,10),ae=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],oe={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6},D=X=>{const ie=new Date(X);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][ie.getDay()]},H=Array.from({length:7},(X,ie)=>({day:ae[ie],sales:0})),G=Array.from({length:7},(X,ie)=>({day:ae[ie],sales:0})),Z=Array.from({length:7},(X,ie)=>({day:ae[ie],sales:0}));for(const X of P){const ie=D(((O=X==null?void 0:X.orderTiming)==null?void 0:O.orderDate)||(X==null?void 0:X.createdAt)||new Date().toISOString()),pe=oe[ie==="Sun"?"Sun":ie],ne=Array.isArray(X.orderItems)?X.orderItems:[];let ee=0,we=0;for(const F of ne){const Ue=Number(F.totalPrice||Number(F.unitPrice||0)*Number(F.quantity||0));F.category==="Recipe"?we+=Ue:ee+=Ue}H[pe].sales+=ee+we,G[pe].sales+=ee,Z[pe].sales+=we}c(X=>({...X,[a]:{name:E,totalSales:M,totalOrders:U,avgOrderValue:W,topProducts:B,dailySales:H,dailySalesFinished:G,dailySalesRecipe:Z}}))}catch{c(E=>({...E,[a]:null}))}finally{m(!1)}})()},[a]),C.useEffect(()=>{(async()=>{var O,_,E;try{const T=new Date,k=new Date;k.setDate(T.getDate()-30);const A=await ce.getSalesOrders({limit:3e3,sortBy:"orderTiming.orderDate",sortOrder:"desc",startDate:k.toISOString(),endDate:T.toISOString()});if(!A.success||!Array.isArray(A.data)){d(null);return}const P=A.data,M=P.reduce((X,ie)=>{var pe;return X+Number(((pe=ie==null?void 0:ie.orderSummary)==null?void 0:pe.totalAmount)||0)},0),U=P.length,W=U>0?Math.round(M/U):0,Y={"Kuwait City":{name:"Kuwait City",sales:0,orders:0},"360 Mall":{name:"360 Mall",sales:0,orders:0},"Vibes Complex":{name:"Vibes Complex",sales:0,orders:0},"Taiba Hospital":{name:"Taiba Hospital",sales:0,orders:0}};for(const X of P){const ie=(X==null?void 0:X.outletName)||"Unknown";Y[ie]||(Y[ie]={name:ie,sales:0,orders:0}),Y[ie].sales+=Number(((O=X==null?void 0:X.orderSummary)==null?void 0:O.totalAmount)||0),Y[ie].orders+=1}const B=Object.values(Y);B.forEach(X=>{X.percentage=M>0?Math.round(X.sales/M*100):0});const ae={};for(const X of P)for(const ie of X.orderItems||[]){const pe=ie.productName||ie.productCode,ne=`${pe}__${X.outletName||"Unknown"}`,ee=X.outletName||"Unknown",we=Number(ie.totalPrice||Number(ie.unitPrice||0)*Number(ie.quantity||0)),F=Number(ie.quantity||1);ae[ne]||(ae[ne]={name:pe,sales:0,orders:0,outlet:ee}),ae[ne].sales+=we,ae[ne].orders+=F}const oe=Object.values(ae).sort((X,ie)=>ie.sales-X.sales).slice(0,10),D=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],H=X=>{const ie=new Date(X);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][ie.getDay()]},G={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6},Z=Array.from({length:7},(X,ie)=>({day:D[ie],sales:0}));for(const X of P){const ie=H(((_=X==null?void 0:X.orderTiming)==null?void 0:_.orderDate)||(X==null?void 0:X.createdAt)||new Date().toISOString()),pe=G[ie==="Sun"?"Sun":ie];Z[pe].sales+=Number(((E=X==null?void 0:X.orderSummary)==null?void 0:E.totalAmount)||0)}d({totalSales:M,totalOrders:U,avgOrderValue:W,outletBreakdown:B,overallTrend:Z,topProductsOverall:oe})}catch{d(null)}})()},[]);const v={totalSales:Object.values(S).reduce((j,O)=>j+O.totalSales,0),totalOrders:Object.values(S).reduce((j,O)=>j+O.totalOrders,0),avgOrderValue:0,outletBreakdown:Object.entries(S).map(([,j])=>({name:j.name,sales:j.totalSales,orders:j.totalOrders,percentage:0}))};v.avgOrderValue=Math.round(v.totalSales/v.totalOrders),v.outletBreakdown.forEach(j=>{j.percentage=Math.round(j.sales/v.totalSales*100)});const x=j=>{if(i==="all")return j;const O=i==="finished"?"Finished Good":"Recipe";return j.filter(_=>(_.category||"").toLowerCase()===O.toLowerCase())},g=j=>i==="finished"?j.dailySalesFinished||j.dailySales:i==="recipe"&&j.dailySalesRecipe||j.dailySales,w=j=>{if(j==="overall")return u?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-indigo-500",children:n.jsx(v0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",u.totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:u.totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Pu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",u.avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Sales by Outlet"}),n.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:u.outletBreakdown.map((_,E)=>n.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-50 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[n.jsx("div",{className:`p-4 rounded-full mb-4 ${E%2===0?"bg-blue-100":"bg-green-100"}`,children:n.jsx(En,{className:`${E%2===0?"text-blue-600":"text-green-600"} h-8 w-8`})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:_.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.orders," orders"]}),n.jsxs("p",{className:"font-bold text-gray-900",children:["KWD ",_.sales.toLocaleString()]}),n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[_.percentage,"% of total"]})]})]},_.name))})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Overall Sales Trend"}),n.jsx(cg,{width:"100%",height:300,children:n.jsxs(_g,{data:u.overallTrend,children:[n.jsx(am,{strokeDasharray:"3 3"}),n.jsx(Ql,{dataKey:"day"}),n.jsx(Jl,{}),n.jsx(jn,{formatter:_=>[`KWD ${_}`,"Sales"]}),n.jsx(Oo,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:3})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products Overall"}),n.jsx("div",{className:"space-y-4",children:u.topProductsOverall.map((_,E)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:E+1})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:_.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.outlet,"  ",_.orders," orders"]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",_.sales.toLocaleString()]})})]},`${_.name}-${_.outlet}`))})]})]})]}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading overall sales data..."})]})});const O=S[j];return O?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(v0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",O.totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:O.totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Pu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",O.avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsx("div",{className:"col-span-1 lg:col-span-2",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:()=>o("all"),className:`px-3 py-1 text-sm rounded border ${i==="all"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"ALL"}),n.jsx("button",{onClick:()=>o("finished"),className:`px-3 py-1 text-sm rounded border ${i==="finished"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>o("recipe"),className:`px-3 py-1 text-sm rounded border ${i==="recipe"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipe Master"})]})}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Daily Sales Trend"}),n.jsx(cg,{width:"100%",height:300,children:n.jsxs(_g,{data:g(O),children:[n.jsx(am,{strokeDasharray:"3 3"}),n.jsx(Ql,{dataKey:"day"}),n.jsx(Jl,{}),n.jsx(jn,{formatter:_=>[`KWD ${_}`,"Sales"]}),n.jsx(Oo,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:2})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products"}),n.jsx("div",{className:"space-y-4",children:x(O.topProducts).map(_=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:_.name}),n.jsx("p",{className:"text-xs text-gray-500",children:_.category||"Unknown"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.orders," orders"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",_.sales.toLocaleString()]})})]},_.name))})]})]})]}):null};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Monitor sales performance across all outlets"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[n.jsx(Pu,{className:"h-4 w-4"}),n.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]})]}),n.jsx(Zi,{notifications:p,onMarkAsRead:y,onMarkAllAsRead:h,onClearAll:b})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:N.map(j=>{const O=j.icon;return n.jsxs("button",{onClick:()=>s(j.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${a===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(O,{className:`h-4 w-4 ${a===j.id?j.color:""}`}),n.jsx("span",{children:j.name})]},j.id)})})}),a!=="overall"&&l[a]?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-indigo-500",children:n.jsx(v0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",l[a].totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l[a].totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Pu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",l[a].avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o("all"),className:`px-3 py-1 text-sm rounded border ${i==="all"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"ALL"}),n.jsx("button",{onClick:()=>o("finished"),className:`px-3 py-1 text-sm rounded border ${i==="finished"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>o("recipe"),className:`px-3 py-1 text-sm rounded border ${i==="recipe"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipe Master"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Daily Sales Trend"}),n.jsx(cg,{width:"100%",height:300,children:n.jsxs(_g,{data:g(l[a]),children:[n.jsx(am,{strokeDasharray:"3 3"}),n.jsx(Ql,{dataKey:"day"}),n.jsx(Jl,{}),n.jsx(jn,{formatter:j=>[`KWD ${j}`,"Sales"]}),n.jsx(Oo,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:2})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products"}),n.jsx("div",{className:"space-y-4",children:x(l[a].topProducts).map(j=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:j.name}),n.jsx("p",{className:"text-xs text-gray-500",children:j.category}),n.jsxs("p",{className:"text-sm text-gray-600",children:[j.orders," orders"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",j.sales.toLocaleString()]})})]},`${j.name}-${j.category}`))})]})]})]}):w(a)]})},bO=()=>{const e=lt(),t=Ta(),[r,a]=C.useState(""),[s,i]=C.useState(""),[o,l]=C.useState(!1),[c,u]=C.useState(!1),[d,f]=C.useState(null),m=async p=>{var y,h;p.preventDefault(),f(null),u(!0);try{const b=await ce.login({email:r,password:s});if(b!=null&&b.success&&((y=b.data)!=null&&y.token)){const{token:N,user:S}=b.data;localStorage.setItem("auth_token",N),localStorage.setItem("auth_user",JSON.stringify(S));const v=((h=t.state)==null?void 0:h.from)||"/dashboard";e(v)}else f((b==null?void 0:b.message)||"Invalid credentials")}catch{f("Login failed. Please check your credentials and try again.")}finally{u(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg p-8",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 text-indigo-600 mb-3",children:n.jsx("span",{className:"font-bold",children:"LB"})}),n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Sign in to your account"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Use your work email to continue"})]}),n.jsxs("form",{onSubmit:m,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:"@"}),n.jsx("input",{type:"email",autoComplete:"email",required:!0,className:"input-field pl-9",placeholder:"you@company.com",value:r,onChange:p=>a(p.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:"*"}),n.jsx("input",{type:o?"text":"password",autoComplete:"current-password",required:!0,className:"input-field pl-9 pr-24",placeholder:"",value:s,onChange:p=>i(p.target.value)}),n.jsx("button",{type:"button",onClick:()=>l(p=>!p),className:"absolute inset-y-0 right-0 px-3 text-sm text-gray-500 hover:text-gray-700",children:o?"Hide":"Show"})]})]}),d&&n.jsx("div",{className:"text-sm text-red-600",children:d}),n.jsx("button",{type:"submit",disabled:c,className:"btn-primary w-full inline-flex items-center justify-center",children:c?"Signing in...":"Sign In"})]})]}),n.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"By continuing, you agree to our Terms and acknowledge our Privacy Policy."})]})})},zw=()=>{const[e,t]=C.useState({isOpen:!1,title:"",message:"",type:"info",confirmText:"OK",cancelText:"Cancel",showCancel:!1}),r=C.useCallback(async(u,d,f="info")=>new Promise(m=>{t({isOpen:!0,title:u,message:d,type:f,confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(p=>({...p,isOpen:!1})),m(void 0)}})}),[]),a=C.useCallback(async(u,d,f="warning")=>new Promise(m=>{t({isOpen:!0,title:u,message:d,type:f,confirmText:"Confirm",cancelText:"Cancel",showCancel:!0,onConfirm:()=>{t(p=>({...p,isOpen:!1})),m(!0)},onCancel:()=>{t(p=>({...p,isOpen:!1})),m(!1)}})}),[]),s=C.useCallback(async u=>new Promise(d=>{t({isOpen:!0,title:"Confirm Delete",message:`Are you sure you want to delete "${u}"? This action cannot be undone.`,type:"error",confirmText:"Delete",cancelText:"Cancel",showCancel:!0,onConfirm:()=>{t(f=>({...f,isOpen:!1})),d(!0)},onCancel:()=>{t(f=>({...f,isOpen:!1})),d(!1)}})}),[]),i=C.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"success",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),o=C.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"error",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),l=C.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"warning",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),c=C.useCallback(()=>{t(u=>({...u,isOpen:!1}))},[]);return{confirmation:e,showAlert:r,showConfirm:a,showDeleteConfirm:s,showSuccess:i,showError:o,showWarning:l,closeConfirmation:c}},Wle=()=>{const e=lt();C.useRef(null);const{showAlert:t}=zw(),[r,a]=C.useState([]),[s,i]=C.useState(!0),[o,l]=C.useState(!1);C.useState(!1);const[c,u]=C.useState(!1),[d,f]=C.useState(""),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState("");C.useEffect(()=>{S()},[]),C.useEffect(()=>{},[d,m,y]);const S=async()=>{try{i(!0),console.log(" Loading Ingredient Master from main database");const T=await ce.getRawMaterials({limit:1e3});if(T.success&&T.data){const k=Array.isArray(T.data)?T.data:T.data.data||[];console.log(" Loaded Ingredient Master:",k.length,"items"),a(k)}else console.log("  No materials found"),a([])}catch(T){console.error(" Error loading materials:",T),t("Error",`Failed to load materials: ${T instanceof Error?T.message:"Unknown error"}`,"error")}finally{i(!1)}},v=async()=>{console.log(" Create Transfer button clicked!"),console.log(" Current materials count:",r.length);try{u(!0),console.log(" Transfer process started...");const T=[];if(console.log(" Processing materials for distribution..."),r.forEach((W,Y)=>{console.log(`  ${Y+1}. ${W.materialName} (${W.materialCode})`),W.locationStocks?(console.log("     Location stocks:",W.locationStocks),Object.entries(W.locationStocks).forEach(([B,ae])=>{const oe=ae;if(console.log(`     ${B}: ${oe}`),oe>0){const D=x(B);console.log(`      Mapping ${B} to ${D}`),D&&(T.push({itemCode:W.materialCode,itemName:W.materialName,itemType:"Raw Material",category:W.parentCategory,subCategory:W.subCategory,unitOfMeasure:W.unitOfMeasure,quantity:oe,unitPrice:W.unitPrice,totalValue:oe*W.unitPrice,notes:`Auto-distributed from Ingredient Master to ${D}`}),console.log(`      Added to distribution: ${oe} ${W.unitOfMeasure}  ${D}`))}})):console.log("     No location stocks found")}),console.log(` Total items to distribute: ${T.length}`),T.length===0){console.log("  No items found with stock in any location"),t("No Items to Transfer","No items found with stock in any location.","warning");return}console.log(" Starting direct auto-distribution transfer from Ingredient Master"),console.log(` Processing ${T.length} items`);const k={};T.forEach(W=>{var ae;const Y=(ae=W.notes)==null?void 0:ae.match(/to (\w+(?:\s+\w+)*)$/),B=Y?Y[1]:"Central Kitchen";k[B]||(k[B]=[]),k[B].push(W)}),console.log(` Distributing to ${Object.keys(k).length} outlets:`,Object.keys(k));const A=Object.entries(k).map(async([W,Y])=>{const B={fromOutlet:"Ingredient Master",toOutlet:W,transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:`Auto-distribution from Ingredient Master to ${W}`,items:Y};console.log(` Creating transfer to ${W}:`,Y.length,"items");try{const ae=await ce.createIngredientMasterTransfer(B);return ae.success?(console.log(` Transfer to ${W} created successfully:`,ae.data),{outlet:W,success:!0,transferId:ae.data._id||ae.data.id||ae.data.transferOrderId}):(console.error(` Transfer to ${W} failed:`,ae.message),{outlet:W,success:!1,error:ae.message})}catch(ae){return console.error(` Error creating transfer to ${W}:`,ae),{outlet:W,success:!1,error:ae instanceof Error?ae.message:"Unknown error"}}}),P=await Promise.all(A),M=P.filter(W=>W.success),U=P.filter(W=>!W.success);if(console.log(` Transfer Results: ${M.length} successful, ${U.length} failed`),M.length>0){let W=` Auto-distribution completed!

`;W+=` Successfully transferred to ${M.length} outlets:
`,M.forEach(Y=>{W+=` ${Y.outlet}
`}),U.length>0&&(W+=`
 Failed transfers:
`,U.forEach(Y=>{W+=` ${Y.outlet}: ${Y.error}
`})),t("Transfer Completed",W,"success"),await S()}else t("Transfer Failed","All transfers failed. Please check the console for details.","error")}catch(T){console.error("Error in direct transfer:",T),t("Transfer Error",`Error during transfer: ${T instanceof Error?T.message:"Unknown error"}`,"error")}finally{u(!1)}},x=T=>({centralKitchen:"Central Kitchen",kuwaitCity:"Kuwait City",mall360:"360 Mall",vibesComplex:"Vibe Complex",taibaKitchen:"Taiba Hospital"})[T]||null,g=async()=>{l(!0);try{console.log(" Starting Zoho Inventory Sync...");const T=await ce.syncWithZohoRawMaterials();console.log(" ZOHO SYNC API RESPONSE:"),console.log("=".repeat(60)),console.log("Full Response:",T),console.log("=".repeat(60)),console.log("Success:",T.success),console.log("Message:",T.message),console.log("Data:",T.data),console.log("=".repeat(60)),T.success?(console.log(" Sync Details:"),console.log("    Total items processed:",T.data.totalItems),console.log("    Items with SKU:",T.data.itemsWithSKU),console.log("    Items without SKU (skipped):",T.data.itemsWithoutSKU),console.log("    New items added:",T.data.addedItems),console.log("    Items updated:",T.data.updatedItems),console.log("    Errors:",T.data.errorItems),console.log("    Sync timestamp:",T.data.syncTimestamp),console.log("=".repeat(60)),t("Sync Completed Successfully!",` Sync Results:
 Total items processed: ${T.data.totalItems}
 Items with SKU: ${T.data.itemsWithSKU}
 Items without SKU (skipped): ${T.data.itemsWithoutSKU}
 New items added: ${T.data.addedItems}
 Items updated: ${T.data.updatedItems}
 Errors: ${T.data.errorItems}

 Sync completed at: ${new Date(T.data.syncTimestamp).toLocaleString()}`,"success"),await S()):(console.error(" Sync failed:",T.message),t("Sync Failed",T.message||"Unknown error occurred during sync","error"))}catch(T){console.error(" Sync Error:",T),t("Sync Failed",`Failed to sync with Zoho: ${T instanceof Error?T.message:"Unknown error"}`,"error")}finally{l(!1),console.log(" Sync process completed")}},w=(T,k)=>T<=k?{status:"Low",color:"text-red-600 bg-red-100"}:T<=k*1.5?{status:"Medium",color:"text-yellow-600 bg-yellow-100"}:{status:"Good",color:"text-green-600 bg-green-100"},j=r.filter(T=>{const k=T.materialName.toLowerCase().includes(d.toLowerCase())||T.materialCode.toLowerCase().includes(d.toLowerCase())||T.description&&T.description.toLowerCase().includes(d.toLowerCase()),A=m===""||T.subCategory===m,P=y===""||y==="active"&&T.isActive||y==="inactive"&&!T.isActive,M=w(T.currentStock,T.minimumStock),U=b===""||M.status.toLowerCase()===b.toLowerCase();return k&&A&&P&&U}),O=[...new Set(r.map(T=>T.subCategory))],_=async T=>{if(window.confirm("Are you sure you want to delete this material?"))try{(await ce.deleteRawMaterial(T)).success?(t("Success","Material deleted successfully","success"),await S()):t("Error","Failed to delete material","error")}catch(k){t("Error",`Error deleting material: ${k instanceof Error?k.message:"Unknown error"}`,"error"),console.error("Error deleting material:",k)}},E=()=>{try{const T=j.map(U=>{var W;return{SKU:U.materialCode,"Item Name":U.materialName,"Parent Category":U.parentCategory||"Raw Materials","SubCategory Name":U.subCategory,Unit:U.unitOfMeasure,"Unit Price (KWD)":((W=U.unitPrice)==null?void 0:W.toFixed(3))||"0.000","Current Stock":U.currentStock,"Minimum Stock":U.minimumStock,Status:U.status,Supplier:U.supplierName||"","Last Synced":U.lastSyncedAt?new Date(U.lastSyncedAt).toLocaleString():"Never"}}),k=Object.keys(T[0]||{}),A=[k.join(","),...T.map(U=>k.map(W=>{const Y=U[W];return typeof Y=="string"&&(Y.includes(",")||Y.includes('"'))?`"${Y.replace(/"/g,'""')}"`:Y}).join(","))].join(`
`),P=new Blob([A],{type:"text/csv;charset=utf-8;"}),M=document.createElement("a");M.href=URL.createObjectURL(P),M.download=`ingredient-master-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(M),M.click(),document.body.removeChild(M),t("Success",`Exported ${j.length} materials to CSV`,"success")}catch(T){t("Error",`Failed to export: ${T instanceof Error?T.message:"Unknown error"}`,"error"),console.error("Export failed:",T)}};return s?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading ingredients..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ingredient Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant ingredients and raw material inventory"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:g,disabled:o,className:`flex items-center ${o?"btn-disabled":"btn-primary"}`,title:"Sync inventory with Zoho",children:[n.jsx(x2,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),o?"Syncing...":"Sync Inventory"]}),n.jsxs("button",{onClick:v,disabled:c,className:`flex items-center ${c?"btn-disabled":"btn-secondary"}`,title:"Auto-distribute all items to outlets",children:[n.jsx(ta,{className:`h-4 w-4 mr-2 ${c?"animate-pulse":""}`}),c?"Transferring...":"Create Transfer"]}),n.jsxs("button",{onClick:()=>e("/raw-materials/add"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Ingredient"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search materials by name, code, or description...",className:"input-field pl-10",value:d,onChange:T=>f(T.target.value)})]})}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("button",{onClick:E,disabled:j.length===0,className:j.length===0?"btn-disabled flex items-center":"btn-secondary flex items-center",title:"Export to CSV",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:m,onChange:T=>p(T.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),O.map(T=>n.jsx("option",{value:T,children:T},T))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:y,onChange:T=>h(T.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Status"}),n.jsxs("select",{className:"input-field",value:b,onChange:T=>N(T.target.value),children:[n.jsx("option",{value:"",children:"All Stock Levels"}),n.jsx("option",{value:"low",children:"Low Stock"}),n.jsx("option",{value:"medium",children:"Medium Stock"}),n.jsx("option",{value:"good",children:"Good Stock"})]})]})]}),n.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600",children:n.jsxs("span",{children:["Showing ",j.length," of ",r.length," materials",(d||m||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]})})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-purple-50",children:"Central Kitchen"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:"Kuwait City"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-green-50",children:"360 Mall"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-orange-50",children:"Vibes Complex"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-pink-50",children:"Taiba Kitchen"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Stock"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:14,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[n.jsx("div",{className:"text-gray-400",children:n.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No ingredients found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:r.length===0?"Get started by syncing with Zoho Inventory or adding ingredients manually.":"Try adjusting your filters or search criteria."}),r.length===0&&n.jsxs("button",{onClick:g,disabled:o,className:`${o?"btn-disabled":"btn-primary"} inline-flex items-center`,children:[n.jsx(x2,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),o?"Syncing...":"Sync Inventory"]})]})]})})}):j.map(T=>{var A,P,M,U,W;const k=w(T.currentStock,T.minimumStock);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.materialCode}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:T.materialName}),T.description&&n.jsx("div",{className:"text-xs text-gray-500",children:T.description})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:T.subCategory})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:T.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",T.unitPrice?Number(T.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-purple-900 bg-purple-50",children:((A=T.locationStocks)==null?void 0:A.centralKitchen)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-blue-900 bg-blue-50",children:((P=T.locationStocks)==null?void 0:P.kuwaitCity)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-green-900 bg-green-50",children:((M=T.locationStocks)==null?void 0:M.mall360)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-orange-900 bg-orange-50",children:((U=T.locationStocks)==null?void 0:U.vibesComplex)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-pink-900 bg-pink-50",children:((W=T.locationStocks)==null?void 0:W.taibaKitchen)||0}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-bold",children:T.currentStock}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.color}`,children:k.status})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:T.status})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>e(`/raw-materials/edit/${T._id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_(T._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},T._id)})})]})})})]})},qle=()=>{const e=lt(),[t,r]=C.useState({materialCode:"",materialName:"",description:"",category:"",unitOfMeasure:"",unitPrice:"",minimumStock:"",maximumStock:"",currentStock:"",supplierId:"",isActive:!0}),[a,s]=C.useState({}),i=["Fresh Produce","Pantry","Dairy Alternatives","Sweeteners","Beverages","Supplements","Superfoods","Dairy","Bakery","Spices","Other"],o=["PC","TBSP","CUP","TSP","PINCH","SCOOP","HANDFUL","SLICE","OZ","LB","KG","LTR","Other"],l=()=>{const d={};return t.materialCode.trim()||(d.materialCode="Material code is required"),t.materialName.trim()||(d.materialName="Material name is required"),t.category||(d.category="Category is required"),t.unitOfMeasure||(d.unitOfMeasure="Unit of measure is required"),(!t.unitPrice||parseFloat(t.unitPrice)<0)&&(d.unitPrice="Valid unit price is required"),(!t.minimumStock||parseInt(t.minimumStock)<0)&&(d.minimumStock="Valid minimum stock is required"),(!t.maximumStock||parseInt(t.maximumStock)<0)&&(d.maximumStock="Valid maximum stock is required"),(!t.currentStock||parseInt(t.currentStock)<0)&&(d.currentStock="Valid current stock is required"),s(d),Object.keys(d).length===0},c=async d=>{if(d.preventDefault(),!!l())try{const f=await ce.createRawMaterial(t);f.success?e("/raw-materials"):alert("Failed to create material: "+f.message)}catch(f){alert("Error creating material: "+(f instanceof Error?f.message:"Unknown error")),console.error("Error creating material:",f)}},u=(d,f)=>{r(m=>({...m,[d]:f})),a[d]&&s(m=>({...m,[d]:""}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Material"}),n.jsx("p",{className:"text-gray-600",children:"Create a new raw material entry"})]}),n.jsxs("button",{onClick:()=>e("/raw-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Raw Materials"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:c,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.materialCode?"border-red-500":""}`,value:t.materialCode,onChange:d=>u("materialCode",d.target.value),placeholder:"RM-001"}),a.materialCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.materialCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.materialName?"border-red-500":""}`,value:t.materialName,onChange:d=>u("materialName",d.target.value),placeholder:"Steel Rod 12mm"}),a.materialName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.materialName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.description,onChange:d=>u("description",d.target.value),placeholder:"Material description"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),n.jsxs("select",{className:`input-field ${a.category?"border-red-500":""}`,value:t.category,onChange:d=>u("category",d.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),i.map(d=>n.jsx("option",{value:d,children:d},d))]}),a.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit of Measure *"}),n.jsxs("select",{className:`input-field ${a.unitOfMeasure?"border-red-500":""}`,value:t.unitOfMeasure,onChange:d=>u("unitOfMeasure",d.target.value),children:[n.jsx("option",{value:"",children:"Select Unit"}),o.map(d=>n.jsx("option",{value:d,children:d},d))]}),a.unitOfMeasure&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unitOfMeasure})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing & Stock Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),n.jsx("input",{type:"number",step:"0.01",className:`input-field pl-8 ${a.unitPrice?"border-red-500":""}`,value:t.unitPrice,onChange:d=>u("unitPrice",d.target.value),placeholder:"0.00"})]}),a.unitPrice&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unitPrice})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.currentStock?"border-red-500":""}`,value:t.currentStock,onChange:d=>u("currentStock",d.target.value),placeholder:"0"}),a.currentStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.currentStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.minimumStock?"border-red-500":""}`,value:t.minimumStock,onChange:d=>u("minimumStock",d.target.value),placeholder:"0"}),a.minimumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.minimumStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.maximumStock?"border-red-500":""}`,value:t.maximumStock,onChange:d=>u("maximumStock",d.target.value),placeholder:"0"}),a.maximumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.maximumStock})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier ID"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierId,onChange:d=>u("supplierId",d.target.value),placeholder:"SUP-001"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:t.isActive,onChange:d=>u("isActive",d.target.checked)}),n.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active Material"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Save Material"]})]})]})})]})},Kle=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({materialCode:"",materialName:"",description:"",category:"",unitOfMeasure:"",unitPrice:"",minimumStock:"",maximumStock:"",currentStock:"",supplierId:"",isActive:!0}),[s,i]=C.useState({}),[o,l]=C.useState(!0),c=["Fresh Produce","Pantry","Dairy Alternatives","Sweeteners","Beverages","Supplements","Superfoods","Dairy","Bakery","Spices","Other"],u=["PC","TBSP","CUP","TSP","PINCH","SCOOP","HANDFUL","SLICE","OZ","LB","KG","LTR","Other"];C.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{l(!0);const y=await ce.getRawMaterial(t);if(y.success){const h=y.data;a({materialCode:h.materialCode,materialName:h.materialName,description:h.description,category:h.category,unitOfMeasure:h.unitOfMeasure,unitPrice:h.unitPrice.toString(),minimumStock:h.minimumStock.toString(),maximumStock:h.maximumStock.toString(),currentStock:h.currentStock.toString(),supplierId:h.supplierId||"",isActive:h.isActive})}else alert("Failed to load material"),e("/raw-materials")}catch(y){alert("Error loading material: "+(y instanceof Error?y.message:"Unknown error")),e("/raw-materials")}finally{l(!1)}},f=()=>{const y={};return r.materialCode.trim()||(y.materialCode="Material code is required"),r.materialName.trim()||(y.materialName="Material name is required"),r.category||(y.category="Category is required"),r.unitOfMeasure||(y.unitOfMeasure="Unit of measure is required"),(!r.unitPrice||parseFloat(r.unitPrice)<0)&&(y.unitPrice="Valid unit price is required"),(!r.minimumStock||parseInt(r.minimumStock)<0)&&(y.minimumStock="Valid minimum stock is required"),(!r.maximumStock||parseInt(r.maximumStock)<0)&&(y.maximumStock="Valid maximum stock is required"),(!r.currentStock||parseInt(r.currentStock)<0)&&(y.currentStock="Valid current stock is required"),i(y),Object.keys(y).length===0},m=async y=>{if(y.preventDefault(),!!f())try{const h=await ce.updateRawMaterial(t,r);h.success?e("/raw-materials"):alert("Failed to update material: "+h.message)}catch(h){alert("Error updating material: "+(h instanceof Error?h.message:"Unknown error")),console.error("Error updating material:",h)}},p=(y,h)=>{a(b=>({...b,[y]:h})),s[y]&&i(b=>({...b,[y]:""}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading material data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Material"}),n.jsx("p",{className:"text-gray-600",children:"Update material information"})]}),n.jsxs("button",{onClick:()=>e("/raw-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Raw Materials"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:m,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.materialCode?"border-red-500":""}`,value:r.materialCode,onChange:y=>p("materialCode",y.target.value),placeholder:"RM-001"}),s.materialCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.materialCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.materialName?"border-red-500":""}`,value:r.materialName,onChange:y=>p("materialName",y.target.value),placeholder:"Steel Rod 12mm"}),s.materialName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.materialName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.description,onChange:y=>p("description",y.target.value),placeholder:"Material description"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),n.jsxs("select",{className:`input-field ${s.category?"border-red-500":""}`,value:r.category,onChange:y=>p("category",y.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),c.map(y=>n.jsx("option",{value:y,children:y},y))]}),s.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit of Measure *"}),n.jsxs("select",{className:`input-field ${s.unitOfMeasure?"border-red-500":""}`,value:r.unitOfMeasure,onChange:y=>p("unitOfMeasure",y.target.value),children:[n.jsx("option",{value:"",children:"Select Unit"}),u.map(y=>n.jsx("option",{value:y,children:y},y))]}),s.unitOfMeasure&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.unitOfMeasure})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing & Stock Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),n.jsx("input",{type:"number",step:"0.01",className:`input-field pl-8 ${s.unitPrice?"border-red-500":""}`,value:r.unitPrice,onChange:y=>p("unitPrice",y.target.value),placeholder:"0.00"})]}),s.unitPrice&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.unitPrice})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.currentStock?"border-red-500":""}`,value:r.currentStock,onChange:y=>p("currentStock",y.target.value),placeholder:"0"}),s.currentStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.currentStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.minimumStock?"border-red-500":""}`,value:r.minimumStock,onChange:y=>p("minimumStock",y.target.value),placeholder:"0"}),s.minimumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.minimumStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.maximumStock?"border-red-500":""}`,value:r.maximumStock,onChange:y=>p("maximumStock",y.target.value),placeholder:"0"}),s.maximumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.maximumStock})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier ID"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierId,onChange:y=>p("supplierId",y.target.value),placeholder:"SUP-001"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:r.isActive,onChange:y=>p("isActive",y.target.checked)}),n.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active Material"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update Material"]})]})]})})]})},Vle=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState(!0),[i,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(!1),[f,m]=C.useState(""),[p,y]=C.useState(""),[h,b]=C.useState("createdAt"),[N,S]=C.useState("desc"),[v,x]=C.useState(!1),g=C.useRef(null);C.useEffect(()=>{w()},[]);const w=async()=>{try{s(!0),o(null);const M=await ce.getBillOfMaterials({limit:1e3,search:f,status:p,sortBy:h,sortOrder:N});M.success?(console.log("Loaded BOMs:",M.data),r(M.data)):o("Failed to load BOMs")}catch(M){o(M instanceof Error?M.message:"Failed to load BOMs"),console.error("Error loading BOMs:",M)}finally{s(!1)}};C.useEffect(()=>{a||w()},[f,p,h,N]);const j=t.filter(M=>{const U=M.productName.toLowerCase().includes(f.toLowerCase())||M.bomCode.toLowerCase().includes(f.toLowerCase())||M.productDescription.toLowerCase().includes(f.toLowerCase()),W=p===""||M.status===p;return U&&W}),O=()=>{m(""),y(""),b("createdAt"),S("desc")},_=M=>{c(M),d(!0)},E=async M=>{if(console.log("Deleting BOM with ID:",M),!M){alert("Error: BOM ID is missing");return}if(window.confirm("Are you sure you want to delete this BOM?"))try{(await ce.deleteBillOfMaterial(M)).success?await w():alert("Failed to delete BOM")}catch(U){alert("Error deleting BOM: "+(U instanceof Error?U.message:"Unknown error")),console.error("Error deleting BOM:",U)}},T=()=>{if(j.length===0){alert("No BOMs to export");return}const M=[["BOM Code","Product Name","Product Description","Status","Version","Created At","Updated At","Notes"].join(","),...j.map(B=>[B.bomCode,B.productName,B.productDescription,B.status,B.version,new Date(B.createdAt).toLocaleDateString(),new Date(B.updatedAt).toLocaleDateString(),""].map(ae=>`"${ae}"`).join(","))].join(`
`),U=new Blob([M],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a"),Y=URL.createObjectURL(U);W.setAttribute("href",Y),W.setAttribute("download",`bom-recipes-${new Date().toISOString().split("T")[0]}.csv`),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W)},k=()=>{var M;(M=g.current)==null||M.click()},A=async M=>{var W;const U=(W=M.target.files)==null?void 0:W[0];if(U){if(!U.name.toLowerCase().endsWith(".csv")){alert("Please select a CSV file");return}try{x(!0);const B=(await U.text()).split(`
`).filter(H=>H.trim());if(B.length<2){alert("CSV file must contain at least a header row and one data row");return}const ae=B.slice(1);let oe=0,D=0;for(const H of ae)try{const G=H.split(",").map(ie=>ie.replace(/"/g,"").trim()),Z={bomCode:G[0]||"",productName:G[1]||"",productDescription:G[2]||"",status:G[3]||"Draft",version:G[4]||"1.0",notes:G[7]||""};(await ce.createBillOfMaterial(Z)).success?oe++:D++}catch{D++}alert(`Import completed!

Successfully imported: ${oe} BOMs
Errors: ${D}`),await w()}catch(Y){alert("Error importing file: "+(Y instanceof Error?Y.message:"Unknown error"))}finally{x(!1),g.current&&(g.current.value="")}}},P=()=>{const U=[["BOM Code","Product Name","Product Description","Status","Version","Created At","Updated At","Notes"],["BOM-001","Fresh Green Smoothie","Healthy smoothie with spinach and fruits","Active","1.0","2024-01-15","2024-01-15","Popular breakfast item"],["BOM-002","Protein Power Bowl","High protein meal bowl","Active","1.0","2024-01-15","2024-01-15","Post-workout meal"]].map(ae=>ae.map(oe=>`"${oe}"`).join(",")).join(`
`),W=new Blob([U],{type:"text/csv;charset=utf-8;"}),Y=document.createElement("a"),B=URL.createObjectURL(W);Y.setAttribute("href",B),Y.setAttribute("download","bom-sample-template.csv"),Y.style.visibility="hidden",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading BOMs..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:w,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recipes (BOM)"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant recipes and product formulations"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials/add"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Create Recipe"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search recipes by name, code, or description...",className:"input-field pl-10",value:f,onChange:M=>m(M.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:O,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{onClick:T,className:"btn-secondary flex items-center",title:"Export BOMs to CSV",disabled:j.length===0,children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs("button",{onClick:k,className:"btn-secondary flex items-center",title:"Import BOMs from CSV",disabled:v,children:[n.jsx(Ha,{className:"h-4 w-4 mr-2"}),v?"Importing...":"Import"]}),n.jsxs("button",{onClick:P,className:"btn-secondary flex items-center",title:"Download sample CSV template",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Sample CSV"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:M=>y(M.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Obsolete",children:"Obsolete"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:h,onChange:M=>b(M.target.value),children:[n.jsx("option",{value:"bomCode",children:"BOM Code"}),n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"totalCost",children:"Total Cost"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"createdAt",children:"Date Created"})]}),n.jsx("button",{onClick:()=>S(N==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${N==="asc"?"Descending":"Ascending"}`,children:N==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",j.length," of ",t.length," recipes",(f||p)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),j.length!==t.length&&n.jsx("button",{onClick:O,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"BOM Code"}),n.jsx("th",{className:"table-header",children:"Product Name"}),n.jsx("th",{className:"table-header",children:"Description"}),n.jsx("th",{className:"table-header",children:"Version"}),n.jsx("th",{className:"table-header",children:"Total Cost"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Items"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(M=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:M.bomCode}),n.jsx("td",{className:"table-cell",children:n.jsx("div",{className:"text-gray-900",children:M.productName})}),n.jsx("td",{className:"table-cell",children:n.jsx("div",{className:"text-gray-600 text-sm max-w-xs truncate",children:M.productDescription})}),n.jsx("td",{className:"table-cell",children:M.version}),n.jsxs("td",{className:"table-cell",children:[M.totalCost.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${M.status==="Active"?"bg-green-100 text-green-800":M.status==="Draft"?"bg-yellow-100 text-yellow-800":M.status==="Obsolete"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:M.status})}),n.jsx("td",{className:"table-cell",children:n.jsxs("span",{className:"text-sm text-gray-600",children:[M.items.length," ingredients"]})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>_(M),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(zi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/bill-of-materials/edit/${M.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>E(M.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},M.id))})]})})}),n.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Total Recipes: ",n.jsx("span",{className:"font-semibold text-blue-600",children:t.length})]}),u&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"BOM Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BOM Code"}),n.jsx("p",{className:"text-gray-900 font-mono",children:l.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("p",{className:"text-gray-900",children:l.productName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version"}),n.jsx("p",{className:"text-gray-900",children:l.version})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${l.status==="Active"?"bg-green-100 text-green-800":l.status==="Draft"?"bg-yellow-100 text-yellow-800":l.status==="Obsolete"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:l.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[l.totalCost.toFixed(2)," KWD"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effective Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.effectiveDate).toLocaleDateString()})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:l.productDescription})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Ingredients (",l.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.items.map((M,U)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:M.materialCode}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M.materialName}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M.quantity}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:M.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[M.unitCost.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[M.totalCost.toFixed(2)," KWD"]})]},U))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:l.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:l.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/bill-of-materials/edit/${l.id}`)},className:"btn-primary",children:"Edit BOM"})]})]})}),n.jsx("input",{type:"file",ref:g,onChange:A,accept:".csv",style:{display:"none"}})]})},io=["km (Kilometers)","lb (Pounds)","mg (Milli Grams)","ml (Milli Litre)","m (Meter)","pcs (Pieces)","pcs 6 (Pieces 6)","pcs 12 (Pieces 12)","No.s (Number)","ltr (Liter)","kg 2 (Kilograms2)","kg 5 (Kilograms 5)","kg 10 (Kilograms 10)","Pr (Portion)","kg (Kilograms)"],zle=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Hle=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({bomCode:"",productName:"",productDescription:"",version:"1.0",effectiveDate:new Date().toISOString().split("T")[0],status:"Draft",items:[]}),[i,o]=C.useState({}),[l,c]=C.useState(!1),u=["Draft","Active","Obsolete"];C.useEffect(()=>{(async()=>{var v,x,g;try{const w=[];let j=1;for(;;){const _=await ce.getCentralKitchenRawMaterials({page:j,limit:1e3});if(_!=null&&_.success&&Array.isArray(_.data)&&w.push(..._.data),!(((v=_==null?void 0:_.pagination)==null?void 0:v.hasNext)||(((x=_==null?void 0:_.pagination)==null?void 0:x.currentPage)||j)<(((g=_==null?void 0:_.pagination)==null?void 0:g.totalPages)||j))||(j+=1,j>20))break}r(w);const O=Array.from(new Set(w.map(_=>(_.unitOfMeasure||"").toString().trim()).filter(_=>_&&_.length>0)))}catch(w){console.error("Failed to load central kitchen raw materials",w)}})()},[]),C.useEffect(()=>{(async()=>{var v;if(!(a.bomCode&&a.bomCode.trim().length>0))try{const x=await ce.getBillOfMaterials({limit:1,page:1,sortBy:"createdAt",sortOrder:"desc"});let g="";const w=(v=x==null?void 0:x.data)==null?void 0:v[0],j=w==null?void 0:w.bomCode;if(j){const O=j.match(/^(.*?)(\d+)$/);if(O){const _=O[1],E=parseInt(O[2],10),T=O[2].length;g=`${_}${String(E+1).padStart(T,"0")}`}}if(!g){const O=new Date,_=O.getFullYear(),E=String(O.getMonth()+1).padStart(2,"0"),T=String(O.getDate()).padStart(2,"0"),k=String(O.getHours()).padStart(2,"0"),A=String(O.getMinutes()).padStart(2,"0");g=`BOM-${_}${E}${T}-${k}${A}`}s(O=>({...O,bomCode:g}))}catch{const g=new Date,w=g.getFullYear(),j=String(g.getMonth()+1).padStart(2,"0"),O=String(g.getDate()).padStart(2,"0"),_=String(g.getHours()).padStart(2,"0"),E=String(g.getMinutes()).padStart(2,"0"),T=`BOM-${w}${j}${O}-${_}${E}`;s(k=>({...k,bomCode:T}))}})()},[]);const d=v=>t.find(x=>x.materialCode===v||x.id&&x.id===v),f=v=>{if(!v)return io[0]||"";const x=v.toLowerCase().trim(),g=io.find(_=>_.toLowerCase().trim()===x);if(g)return g;const w=x,j=io.filter(_=>_.split(" ")[0].toLowerCase().trim()===w);if(j.length>0){const _=j.find(E=>{const T=E.split(" "),k=T[0].toLowerCase().trim();if(k===w&&T.length>1){const A=T[1].toLowerCase().trim();if(/^\d/.test(A))return!1}return k===w});return _||j[0]}const O=io.find(_=>_.toLowerCase().includes(x)||x.includes(_.split(" ")[0].toLowerCase()));return O||io[0]||v},m=(v,x)=>{if(!v)return 0;const g=Number(v.unitPrice||0);if(g<=0)return 0;const w=(v.unitOfMeasure||"").toString().trim().toLowerCase(),j=(x||"").toString().trim().toLowerCase(),O=j.split(" ")[0].split("(")[0].trim();if(w===O||w===j)return g;const _={kg:["kilogram","kilograms","kg"],pcs:["piece","pieces","pcs"],g:["gram","grams","g"],ltr:["liter","litre","liters","litres","ltr","l"],ml:["milliliter","millilitre","milliliters","millilitres","ml"],m:["meter","metre","meters","metres","m"],cm:["centimeter","centimetre","centimeters","centimetres","cm"],in:["inch","inches","in"],ft:["foot","feet","ft"],box:["box","boxes"],dz:["dozen","dz"],pr:["portion","portions","pr"]};for(const[E,T]of Object.entries(_)){const k=T.some(P=>P.toLowerCase()===w),A=T.some(P=>P.toLowerCase()===O);if(k&&A)return g}return w==="kg"&&O==="g"?g/1e3:w==="g"&&O==="kg"?g*1e3:w==="kg"&&O==="grams"?g/1e3:w==="grams"&&O==="kg"?g*1e3:w==="ltr"&&O==="ml"?g/1e3:w==="ml"&&O==="ltr"?g*1e3:w==="liter"&&O==="ml"?g/1e3:w==="ml"&&O==="liter"?g*1e3:g},p=()=>{const v={};if(a.bomCode.trim()?a.bomCode.trim().length<3&&(v.bomCode="BOM code must be at least 3 characters"):v.bomCode="BOM code is required",a.productName.trim()||(v.productName="Product name is required"),a.version.trim()?/^\d+\.\d+$/.test(a.version.trim())||(v.version="Version must be in format X.X (e.g., 1.0)"):v.version="Version is required",!a.effectiveDate)v.effectiveDate="Effective date is required";else{const x=new Date(a.effectiveDate);(isNaN(x.getTime())||x<new Date("2020-01-01"))&&(v.effectiveDate="Please select a valid date after 2020")}return a.items.length===0?v.items="At least one BOM item is required":a.items.forEach((x,g)=>{!x.materialCode.trim()&&!x.materialId&&(v[`item_${g}_code`]="Material is required"),(!x.quantity||x.quantity<=0)&&(v[`item_${g}_quantity`]="Quantity must be greater than 0"),x.unitOfMeasure.trim()||(v[`item_${g}_unit`]="Unit of measure is required")}),o(v),Object.keys(v).length===0},y=async v=>{if(v.preventDefault(),!!p())try{c(!0);const x=a.items.map(O=>{const _=d(O.materialCode||O.materialId),E=O.unitOfMeasure||"grams",T=m(_,E),k=Math.round(T*(O.quantity||0)*100)/100,A=(O.materialCode||(_==null?void 0:_.materialCode)||"").toString().trim().toUpperCase(),P=(O.materialName||(_==null?void 0:_.materialName)||"").toString().trim();return{...O,materialCode:A,materialName:P,unitOfMeasure:E,unitCost:T,totalCost:k}}),g=x.reduce((O,_)=>O+(_.totalCost||0),0),w={bomCode:a.bomCode.trim().toUpperCase().replace(/\s+/g,"-"),productName:a.productName.trim(),productDescription:a.productDescription.trim(),version:a.version.trim(),effectiveDate:a.effectiveDate,status:a.status,totalCost:Math.round(g*100)/100,items:x.map(O=>({materialId:O.materialId||`MAT-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,materialCode:(O.materialCode||"").toString().trim().toUpperCase(),materialName:(O.materialName||"").toString().trim(),quantity:parseFloat(O.quantity.toString()),unitOfMeasure:(O.unitOfMeasure||"").toString().trim(),unitCost:Number(O.unitCost||0),totalCost:Number(O.totalCost||0)})),createdBy:"admin",updatedBy:"admin"};console.log("Creating BOM:",w);const j=await ce.createBillOfMaterial(w);j.success?(console.log("BOM created successfully:",j.data),e("/bill-of-materials")):alert("Failed to create BOM: "+j.message)}catch(x){console.error("Error creating BOM:",x),alert("Error creating BOM: "+(x instanceof Error?x.message:"Unknown error"))}finally{c(!1)}},h=(v,x)=>{s(g=>({...g,[v]:x})),i[v]&&o(g=>({...g,[v]:""}))},b=()=>{const v={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:io[0]||"",unitCost:0,totalCost:0};s(x=>({...x,items:[...x.items,v]}))},N=(v,x,g)=>{s(w=>({...w,items:w.items.map((j,O)=>{if(O===v){const _={...j,[x]:g},E=_.materialCode||_.materialId||"",T=d(E),k=_.unitOfMeasure||"";let A=0;return T&&k&&(A=m(T,k),A===0&&T.unitPrice&&T.unitPrice>0&&console.log("Unit cost calculation debug:",{materialCode:T.materialCode,materialUnit:T.unitOfMeasure,selectedUnit:k,materialPrice:T.unitPrice})),_.unitCost=A,_.totalCost=Math.round((_.quantity||0)*A*100)/100,_}return j})}))},S=v=>{s(x=>({...x,items:x.items.filter((g,w)=>w!==v)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Recipe"}),n.jsx("p",{className:"text-gray-600",children:"Create a new bill of materials"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Recipes"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BOM Code *"}),n.jsx("input",{type:"text",className:`input-field ${i.bomCode?"border-red-500":""}`,value:a.bomCode,onChange:v=>h("bomCode",v.target.value),placeholder:"SANDWICH-001"}),i.bomCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version *"}),n.jsx("input",{type:"text",className:`input-field ${i.version?"border-red-500":""}`,value:a.version,onChange:v=>h("version",v.target.value),placeholder:"1.0"}),i.version&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.version})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),n.jsx("input",{type:"text",className:`input-field ${i.productName?"border-red-500":""}`,value:a.productName,onChange:v=>h("productName",v.target.value),placeholder:"Chicken Club Sandwich"}),i.productName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.productName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.productDescription,onChange:v=>h("productDescription",v.target.value),placeholder:"Delicious sandwich with grilled chicken, bacon, lettuce, tomato, and mayo on toasted bread"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.effectiveDate?"border-red-500":""}`,value:a.effectiveDate,onChange:v=>h("effectiveDate",v.target.value)}),i.effectiveDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.effectiveDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:v=>h("status",v.target.value),children:u.map(v=>n.jsx("option",{value:v,children:v},v))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recipe Items"}),n.jsxs("button",{type:"button",onClick:b,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),i.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:i.items}),n.jsx("div",{className:"space-y-4",children:a.items.map((v,x)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material code"}),n.jsx(zle,{value:v.materialCode,onChange:g=>{const w=d(g);if(w){const j=(w.unitOfMeasure||"").toString(),O=f(j);N(x,"materialCode",g),N(x,"materialName",w.materialName||""),N(x,"materialId",w.id||""),N(x,"unitOfMeasure",O)}else N(x,"materialCode",g),N(x,"materialName",""),N(x,"materialId","")},placeholder:"Select material",options:t.map(g=>({value:g.materialCode,label:`${g.materialCode} - ${g.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:v.materialName,readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.quantity,onChange:g=>N(x,"quantity",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("select",{className:"input-field text-sm",value:v.unitOfMeasure,onChange:g=>N(x,"unitOfMeasure",g.target.value),children:io.map(g=>n.jsx("option",{value:g,children:g},g))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost"}),n.jsx("input",{type:"number",step:"0.0001",className:"input-field text-sm bg-gray-100",value:Number(v.unitCost||0).toFixed(4),readOnly:!0})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Cost: ",v.totalCost.toFixed(2)," KWD"]})})]},x))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total BOM Cost: ",a.items.reduce((v,x)=>v+x.totalCost,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/bill-of-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:`btn-primary flex items-center ${l?"opacity-60 cursor-not-allowed":""}`,disabled:l,children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),l?"Creating...":"Create BOM"]})]})]})})]})},Gle=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({bomCode:"",productName:"",productDescription:"",version:"",effectiveDate:"",status:"Draft",items:[]}),[s,i]=C.useState({}),[o,l]=C.useState(!0),c=["Draft","Active","Obsolete"],u={id:"1",bomCode:"BOM-001",productName:"Steel Frame Assembly",productDescription:"Complete steel frame for construction",version:"1.0",effectiveDate:new Date("2024-01-01").toISOString(),status:"Active",totalCost:1250.75,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:10,unitOfMeasure:"KG",unitCost:45.5,totalCost:455},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:5,unitOfMeasure:"SQM",unitCost:125,totalCost:625}],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-15").toISOString(),createdBy:"admin",updatedBy:"admin"};C.useEffect(()=>{setTimeout(()=>{a({bomCode:u.bomCode,productName:u.productName,productDescription:u.productDescription,version:u.version,effectiveDate:u.effectiveDate.split("T")[0],status:u.status,items:u.items}),l(!1)},500)},[t]);const d=()=>{const b={};return r.bomCode.trim()||(b.bomCode="BOM code is required"),r.productName.trim()||(b.productName="Product name is required"),r.version.trim()||(b.version="Version is required"),r.effectiveDate||(b.effectiveDate="Effective date is required"),r.items.length===0&&(b.items="At least one BOM item is required"),i(b),Object.keys(b).length===0},f=b=>{if(b.preventDefault(),!d())return;const N=r.items.reduce((v,x)=>v+x.totalCost,0),S={...u,bomCode:r.bomCode,productName:r.productName,productDescription:r.productDescription,version:r.version,effectiveDate:new Date(r.effectiveDate).toISOString(),status:r.status,totalCost:N,items:r.items,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating BOM:",S),e("/bill-of-materials")},m=(b,N)=>{a(S=>({...S,[b]:N})),s[b]&&i(S=>({...S,[b]:""}))},p=()=>{const b={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:"",unitCost:0,totalCost:0};a(N=>({...N,items:[...N.items,b]}))},y=(b,N,S)=>{a(v=>({...v,items:v.items.map((x,g)=>{if(g===b){const w={...x,[N]:S};return(N==="quantity"||N==="unitCost")&&(w.totalCost=w.quantity*w.unitCost),w}return x})}))},h=b=>{a(N=>({...N,items:N.items.filter((S,v)=>v!==b)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading BOM data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Recipe"}),n.jsx("p",{className:"text-gray-600",children:"Update bill of materials information"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Recipes"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:f,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BOM Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.bomCode?"border-red-500":""}`,value:r.bomCode,onChange:b=>m("bomCode",b.target.value),placeholder:"SANDWICH-001"}),s.bomCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version *"}),n.jsx("input",{type:"text",className:`input-field ${s.version?"border-red-500":""}`,value:r.version,onChange:b=>m("version",b.target.value),placeholder:"1.0"}),s.version&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.version})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.productName?"border-red-500":""}`,value:r.productName,onChange:b=>m("productName",b.target.value),placeholder:"Chicken Club Sandwich"}),s.productName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.productName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.productDescription,onChange:b=>m("productDescription",b.target.value),placeholder:"Delicious sandwich with grilled chicken, bacon, lettuce, tomato, and mayo on toasted bread"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.effectiveDate?"border-red-500":""}`,value:r.effectiveDate,onChange:b=>m("effectiveDate",b.target.value)}),s.effectiveDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.effectiveDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:b=>m("status",b.target.value),children:c.map(b=>n.jsx("option",{value:b,children:b},b))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recipe Items"}),n.jsxs("button",{type:"button",onClick:p,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((b,N)=>n.jsxs("div",{className:"grid grid-cols-6 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.materialCode,onChange:S=>y(N,"materialCode",S.target.value),placeholder:"CHICKEN-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.materialName,onChange:S=>y(N,"materialName",S.target.value),placeholder:"Chicken Breast"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.quantity,onChange:S=>y(N,"quantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.unitOfMeasure,onChange:S=>y(N,"unitOfMeasure",S.target.value),placeholder:"grams"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:b.unitCost,onChange:S=>y(N,"unitCost",parseFloat(S.target.value)||0),placeholder:"0.00"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>h(N),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-6",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Cost: ",b.totalCost.toFixed(2)," KWD"]})})]},N))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total BOM Cost: ",r.items.reduce((b,N)=>b+N.totalCost,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/bill-of-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update BOM"]})]})]})})]})},Xle=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState(!0),[i,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(!1),[f,m]=C.useState(""),[p,y]=C.useState(""),[h,b]=C.useState(""),[N,S]=C.useState("createdAt"),[v,x]=C.useState("desc");C.useEffect(()=>{g()},[]);const g=async()=>{try{s(!0),o(null);const E=await ce.getJobOrders({limit:1e3,search:f,status:p,priority:h,sortBy:N,sortOrder:v});E.success?(console.log("Loaded Job Orders:",E.data),r(E.data)):o("Failed to load job orders")}catch(E){o(E instanceof Error?E.message:"Failed to load job orders"),console.error("Error loading job orders:",E)}finally{s(!1)}},w=()=>{m(""),y(""),b(""),S("createdAt"),x("desc")},j=E=>{c(E),d(!0)},O=async E=>{if(console.log("Deleting Job Order with ID:",E),!E){alert("Error: Job Order ID is missing");return}if(window.confirm("Are you sure you want to delete this job order?"))try{(await ce.deleteJobOrder(E)).success?await g():alert("Failed to delete job order")}catch(T){alert("Error deleting job order: "+(T instanceof Error?T.message:"Unknown error")),console.error("Error deleting job order:",T)}},_=t.filter(E=>{const T=E.jobOrderNumber.toLowerCase().includes(f.toLowerCase())||E.customerName.toLowerCase().includes(f.toLowerCase())||E.customerId.toLowerCase().includes(f.toLowerCase()),k=p===""||E.status.toLowerCase()===p.toLowerCase(),A=h===""||E.priority.toLowerCase()===h.toLowerCase();return T&&k&&A}).sort((E,T)=>{let k,A;switch(N){case"jobOrderNumber":k=E.jobOrderNumber,A=T.jobOrderNumber;break;case"customerName":k=E.customerName,A=T.customerName;break;case"totalAmount":k=E.totalAmount,A=T.totalAmount;break;case"orderDate":k=new Date(E.orderDate).getTime(),A=new Date(T.orderDate).getTime();break;case"createdAt":k=new Date(E.createdAt).getTime(),A=new Date(T.createdAt).getTime();break;default:k=new Date(E.createdAt).getTime(),A=new Date(T.createdAt).getTime()}return v==="asc"?k>A?1:-1:k<A?1:-1});return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading recipe orders..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:g,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recipe Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant's recipe orders and customer requests"})]}),n.jsxs("button",{onClick:()=>e("/job-orders/add"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Create Recipe Order"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search orders by number, customer name, or email...",className:"input-field pl-10",value:f,onChange:E=>m(E.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:w,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:E=>y(E.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsxs("select",{className:"input-field",value:h,onChange:E=>b(E.target.value),children:[n.jsx("option",{value:"",children:"All Priority"}),n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"}),n.jsx("option",{value:"Urgent",children:"Urgent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:N,onChange:E=>S(E.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"jobOrderNumber",children:"Order Number"}),n.jsx("option",{value:"customerName",children:"Customer Name"}),n.jsx("option",{value:"totalAmount",children:"Total Amount"}),n.jsx("option",{value:"orderDate",children:"Order Date"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",_.length," of ",t.length," recipe orders",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),_.length!==t.length&&n.jsx("button",{onClick:w,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Recipe Order #"}),n.jsx("th",{className:"table-header",children:"Customer"}),n.jsx("th",{className:"table-header",children:"Order Date"}),n.jsx("th",{className:"table-header",children:"Delivery Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Priority"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:E.jobOrderNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:E.customerName}),n.jsx("div",{className:"text-gray-500 text-sm",children:E.customerId})]})}),n.jsx("td",{className:"table-cell",children:new Date(E.orderDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:new Date(E.deliveryDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.status==="Completed"?"bg-green-100 text-green-800":E.status==="In Progress"?"bg-blue-100 text-blue-800":E.status==="Pending"?"bg-purple-100 text-purple-800":E.status==="Cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:E.status})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.priority==="Urgent"?"bg-red-100 text-red-800":E.priority==="High"?"bg-orange-100 text-orange-800":E.priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:E.priority})}),n.jsxs("td",{className:"table-cell",children:[E.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>j(E),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(zi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/job-orders/edit/${E.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>O(E.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},E.id))})]})})}),n.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Total Recipe Orders: ",n.jsx("span",{className:"font-semibold text-blue-600",children:t.length})]}),u&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recipe Order Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Number"}),n.jsx("p",{className:"text-gray-900 font-mono",children:l.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),n.jsx("p",{className:"text-gray-900",children:l.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),n.jsx("p",{className:"text-gray-900",children:l.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Contact"}),n.jsx("p",{className:"text-gray-900",children:l.customerId||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.orderDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.deliveryDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${l.status==="Completed"?"bg-green-100 text-green-800":l.status==="In Progress"?"bg-blue-100 text-blue-800":l.status==="Pending"?"bg-purple-100 text-purple-800":l.status==="Cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:l.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${l.priority==="Urgent"?"bg-red-100 text-red-800":l.priority==="High"?"bg-orange-100 text-orange-800":l.priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:l.priority})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[l.totalAmount.toFixed(2)," KWD"]})]})]}),l.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("p",{className:"text-gray-900",children:l.notes})]}),l.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Instructions"}),n.jsx("p",{className:"text-gray-900",children:l.notes})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Recipe Items (",l.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet A"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet B"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet C"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.items.map((E,T)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.product}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.outletA}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.outletB}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:E.outletC}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:E.totalQuantity}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[E.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[E.totalPrice.toFixed(2)," KWD"]})]},T))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:l.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:l.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/job-orders/edit/${l.id}`)},className:"btn-primary",children:"Edit Order"})]})]})})]})},Yle=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Qle=()=>{const e=lt(),[t,r]=C.useState({jobOrderNumber:"",customerName:"",customerContact:"",customerEmail:"",orderDate:"",deliveryDate:"",priority:"Medium",status:"Draft",totalAmount:0,items:[],notes:"",specialInstructions:""}),[a,s]=C.useState({}),[i,o]=C.useState([]),[l,c]=C.useState(!1),u=["Low","Medium","High","Urgent"],d=["Draft","Approved","In Progress","Completed","Cancelled"];C.useEffect(()=>{f()},[]);const f=async()=>{try{c(!0);const v=await ce.getBillOfMaterials({limit:1e3,status:"Active"});v.success&&o(v.data)}catch(v){console.error("Error loading BOMs:",v)}finally{c(!1)}},m=()=>{const v={};return t.jobOrderNumber.trim()||(v.jobOrderNumber="Job order number is required"),t.customerName.trim()||(v.customerName="Customer name is required"),t.customerEmail.trim()||(v.customerEmail="Customer email is required"),t.orderDate||(v.orderDate="Order date is required"),t.deliveryDate||(v.deliveryDate="Delivery date is required"),t.items.length===0&&(v.items="At least one job order item is required"),s(v),Object.keys(v).length===0},p=async v=>{if(v.preventDefault(),!!m())try{const x=t.items.reduce((j,O)=>j+O.totalPrice,0),g={jobOrderNumber:t.jobOrderNumber.trim().toUpperCase(),customerId:`CUST-${Date.now()}`,customerName:t.customerName.trim(),customerContact:t.customerContact.trim(),customerEmail:t.customerEmail.trim(),orderDate:t.orderDate,deliveryDate:t.deliveryDate,priority:t.priority,status:t.status,totalAmount:x,items:t.items.map(j=>({bomId:j.bomId,bomCode:j.bomCode,product:j.product.trim(),outletA:parseFloat(j.outletA.toString())||0,outletB:parseFloat(j.outletB.toString())||0,outletC:parseFloat(j.outletC.toString())||0,totalQuantity:j.totalQuantity,unitPrice:parseFloat(j.unitPrice.toString()),totalPrice:j.totalPrice})),notes:t.notes.trim(),specialInstructions:t.specialInstructions.trim(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Job Order:",g);const w=await ce.createJobOrder(g);w.success?(console.log("Job Order created successfully:",w.data),e("/job-orders")):alert("Failed to create Job Order: "+w.message)}catch(x){console.error("Error creating Job Order:",x),alert("Error creating Job Order: "+(x instanceof Error?x.message:"Unknown error"))}},y=(v,x)=>{r(g=>({...g,[v]:x})),a[v]&&s(g=>({...g,[v]:""}))},h=()=>{const v={bomId:"",bomCode:"",product:"",outletA:0,outletB:0,outletC:0,totalQuantity:0,unitPrice:0,totalPrice:0};r(x=>({...x,items:[...x.items,v]}))},b=(v,x)=>{const g=i.find(w=>w.id===x);g&&r(w=>({...w,items:w.items.map((j,O)=>{if(O===v){const _={...j,bomId:g.id,bomCode:g.bomCode,product:g.productName,unitPrice:parseFloat((g.totalCost/g.items.length).toFixed(2))};return _.totalQuantity=_.outletA+_.outletB+_.outletC,_.totalPrice=parseFloat((_.totalQuantity*_.unitPrice).toFixed(2)),_}return j})}))},N=(v,x,g)=>{r(w=>({...w,items:w.items.map((j,O)=>{if(O===v){const _={...j,[x]:g};return(x==="outletA"||x==="outletB"||x==="outletC")&&(_.totalQuantity=_.outletA+_.outletB+_.outletC),(x==="totalQuantity"||x==="unitPrice"||x==="outletA"||x==="outletB"||x==="outletC")&&(_.totalPrice=parseFloat((_.totalQuantity*_.unitPrice).toFixed(2))),_}return j})}))},S=v=>{r(x=>({...x,items:x.items.filter((g,w)=>w!==v)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Job Order"}),n.jsx("p",{className:"text-gray-600",children:"Create a new job order for production"})]}),n.jsxs("button",{onClick:()=>e("/job-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Job Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:p,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.jobOrderNumber?"border-red-500":""}`,value:t.jobOrderNumber,onChange:v=>y("jobOrderNumber",v.target.value),placeholder:"JO-2024-001"}),a.jobOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.customerName?"border-red-500":""}`,value:t.customerName,onChange:v=>y("customerName",v.target.value),placeholder:"ABC Manufacturing Ltd."}),a.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.customerContact,onChange:v=>y("customerContact",v.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.customerEmail?"border-red-500":""}`,value:t.customerEmail,onChange:v=>y("customerEmail",v.target.value),placeholder:"john@abcmfg.com"}),a.customerEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.orderDate?"border-red-500":""}`,value:t.orderDate,onChange:v=>y("orderDate",v.target.value)}),a.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.deliveryDate?"border-red-500":""}`,value:t.deliveryDate,onChange:v=>y("deliveryDate",v.target.value)}),a.deliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.deliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:t.priority,onChange:v=>y("priority",v.target.value),children:u.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:v=>y("status",v.target.value),children:d.map(v=>n.jsx("option",{value:v,children:v},v))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Job Order Items"}),n.jsxs("button",{type:"button",onClick:h,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((v,x)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Recipe (BOM)"}),n.jsx(Yle,{value:v.bomId||"",onChange:g=>b(x,g),placeholder:"Select Recipe",disabled:l,options:l?[]:i.map(g=>({value:g.id,label:`${g.bomCode} - ${g.productName}`}))}),l&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading recipes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:v.product,readOnly:!0,placeholder:"Auto-filled from BOM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:v.unitPrice,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet A"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.outletA,onChange:g=>N(x,"outletA",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet B"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.outletB,onChange:g=>N(x,"outletB",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet C"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.outletC,onChange:g=>N(x,"outletC",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm bg-gray-100",value:v.totalQuantity,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",v.totalPrice.toFixed(2)," KWD"]})})]},x))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",t.items.reduce((v,x)=>v+x.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:v=>y("notes",v.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialInstructions,onChange:v=>y("specialInstructions",v.target.value),placeholder:"Special manufacturing instructions or requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/job-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Job Order"]})]})]})})]})},Jle=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Zle=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({jobOrderNumber:"",customerName:"",customerContact:"",customerEmail:"",orderDate:"",deliveryDate:"",priority:"Medium",status:"Draft",totalAmount:0,items:[],notes:"",specialInstructions:""}),[s,i]=C.useState({}),[o,l]=C.useState(!0),[c,u]=C.useState([]),[d,f]=C.useState(!1),m=["Low","Medium","High","Urgent"],p=["Draft","Approved","In Progress","Completed","Cancelled"];C.useEffect(()=>{(async()=>{try{f(!0);const w=await ce.getBillOfMaterials({limit:1e3,status:"Active"});w.success&&u(w.data)}catch(w){console.error("Error loading BOMs:",w)}finally{f(!1)}if(!t){l(!1);return}try{l(!0);const w=await ce.getJobOrder(t);if(w.success){const j=w.data;a({jobOrderNumber:j.jobOrderNumber,customerName:j.customerName,customerContact:j.customerContact||"",customerEmail:j.customerEmail,orderDate:new Date(j.orderDate).toISOString().split("T")[0],deliveryDate:new Date(j.deliveryDate).toISOString().split("T")[0],priority:j.priority,status:j.status,totalAmount:j.totalAmount,items:j.items.map(O=>({bomId:O.bomId,bomCode:O.bomCode,product:O.product,outletA:O.outletA,outletB:O.outletB,outletC:O.outletC,totalQuantity:O.totalQuantity,unitPrice:O.unitPrice,totalPrice:O.totalPrice})),notes:j.notes||"",specialInstructions:j.specialInstructions||""})}else console.error("Failed to load job order:","API Error"),alert("Failed to load job order: API Error")}catch(w){console.error("Error loading job order:",w),alert("Error loading job order: "+(w instanceof Error?w.message:"Unknown error"))}finally{l(!1)}})()},[t]);const y=()=>{const g={};return r.jobOrderNumber.trim()||(g.jobOrderNumber="Job order number is required"),r.customerName.trim()||(g.customerName="Customer name is required"),r.customerEmail.trim()||(g.customerEmail="Customer email is required"),r.orderDate||(g.orderDate="Order date is required"),r.deliveryDate||(g.deliveryDate="Delivery date is required"),r.items.length===0&&(g.items="At least one job order item is required"),i(g),Object.keys(g).length===0},h=async g=>{if(g.preventDefault(),!!y()){if(!t){alert("Job Order ID is missing");return}try{const w=r.items.reduce((_,E)=>_+E.totalPrice,0),j={jobOrderNumber:r.jobOrderNumber.trim().toUpperCase(),customerId:`CUST-${Date.now()}`,customerName:r.customerName.trim(),customerContact:r.customerContact.trim(),customerEmail:r.customerEmail.trim(),orderDate:r.orderDate,deliveryDate:r.deliveryDate,priority:r.priority,status:r.status,totalAmount:w,items:r.items.map(_=>({bomId:_.bomId,bomCode:_.bomCode,product:_.product.trim(),outletA:parseFloat(_.outletA.toString())||0,outletB:parseFloat(_.outletB.toString())||0,outletC:parseFloat(_.outletC.toString())||0,totalQuantity:_.totalQuantity,unitPrice:parseFloat(_.unitPrice.toString()),totalPrice:_.totalPrice})),notes:r.notes.trim(),specialInstructions:r.specialInstructions.trim(),updatedBy:"admin"};console.log("Updating Job Order:",j);const O=await ce.updateJobOrder(t,j);O.success?(console.log("Job Order updated successfully:",O.data),e("/job-orders")):alert("Failed to update Job Order: "+O.message)}catch(w){console.error("Error updating Job Order:",w),alert("Error updating Job Order: "+(w instanceof Error?w.message:"Unknown error"))}}},b=(g,w)=>{a(j=>({...j,[g]:w})),s[g]&&i(j=>({...j,[g]:""}))},N=()=>{const g={bomId:"",bomCode:"",product:"",outletA:0,outletB:0,outletC:0,totalQuantity:0,unitPrice:0,totalPrice:0};a(w=>({...w,items:[...w.items,g]}))},S=(g,w)=>{const j=c.find(O=>O.id===w);j&&a(O=>({...O,items:O.items.map((_,E)=>{if(E===g){const T={..._,bomId:j.id,bomCode:j.bomCode,product:j.productName,unitPrice:parseFloat((j.totalCost/j.items.length).toFixed(2))};return T.totalQuantity=T.outletA+T.outletB+T.outletC,T.totalPrice=parseFloat((T.totalQuantity*T.unitPrice).toFixed(2)),T}return _})}))},v=(g,w,j)=>{a(O=>({...O,items:O.items.map((_,E)=>{if(E===g){const T={..._,[w]:j};return(w==="outletA"||w==="outletB"||w==="outletC")&&(T.totalQuantity=T.outletA+T.outletB+T.outletC),(w==="totalQuantity"||w==="unitPrice"||w==="outletA"||w==="outletB"||w==="outletC")&&(T.totalPrice=parseFloat((T.totalQuantity*T.unitPrice).toFixed(2))),T}return _})}))},x=g=>{a(w=>({...w,items:w.items.filter((j,O)=>O!==g)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading job order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Job Order"}),n.jsx("p",{className:"text-gray-600",children:"Update job order information"})]}),n.jsxs("button",{onClick:()=>e("/job-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Job Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:h,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.jobOrderNumber?"border-red-500":""}`,value:r.jobOrderNumber,onChange:g=>b("jobOrderNumber",g.target.value),placeholder:"JO-2024-001"}),s.jobOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.customerName?"border-red-500":""}`,value:r.customerName,onChange:g=>b("customerName",g.target.value),placeholder:"ABC Manufacturing Ltd."}),s.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.customerContact,onChange:g=>b("customerContact",g.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.customerEmail?"border-red-500":""}`,value:r.customerEmail,onChange:g=>b("customerEmail",g.target.value),placeholder:"john@abcmfg.com"}),s.customerEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.customerEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.orderDate?"border-red-500":""}`,value:r.orderDate,onChange:g=>b("orderDate",g.target.value)}),s.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.deliveryDate?"border-red-500":""}`,value:r.deliveryDate,onChange:g=>b("deliveryDate",g.target.value)}),s.deliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:g=>b("priority",g.target.value),children:m.map(g=>n.jsx("option",{value:g,children:g},g))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:g=>b("status",g.target.value),children:p.map(g=>n.jsx("option",{value:g,children:g},g))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Job Order Items"}),n.jsxs("button",{type:"button",onClick:N,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((g,w)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Recipe (BOM)"}),n.jsx(Jle,{value:g.bomId||"",onChange:j=>S(w,j),placeholder:"Select Recipe",disabled:d,options:d?[]:c.map(j=>({value:j.id,label:`${j.bomCode} - ${j.productName}`}))}),d&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading recipes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:g.product,readOnly:!0,placeholder:"Auto-filled from BOM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:g.unitPrice,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet A"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:g.outletA,onChange:j=>v(w,"outletA",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet B"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:g.outletB,onChange:j=>v(w,"outletB",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet C"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:g.outletC,onChange:j=>v(w,"outletC",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm bg-gray-100",value:g.totalQuantity,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>x(w),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",g.totalPrice.toFixed(2)," KWD"]})})]},w))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",r.items.reduce((g,w)=>g+w.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:g=>b("notes",g.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialInstructions,onChange:g=>b("specialInstructions",g.target.value),placeholder:"Special manufacturing instructions or requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/job-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update Job Order"]})]})]})})]})},ece=()=>{var A;const[e,t]=C.useState([]),[r,a]=C.useState(!0),[s,i]=C.useState(!1),[o,l]=C.useState(null),[c,u]=C.useState(""),[d,f]=C.useState(""),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState("createdAt"),[S,v]=C.useState("desc");C.useEffect(()=>{x()},[]),C.useEffect(()=>{r||x()},[c,d,m,y,b,S]);const x=async()=>{try{a(!0),l(null);const P=await ce.getPurchaseOrders({limit:1e3,search:c,status:d,sortBy:b,sortOrder:S});if(P.success){console.log("Loaded Purchase Orders:",P.data);const M=P.data||[];t(M)}else l("Failed to load purchase orders")}catch(P){l(P instanceof Error?P.message:"Failed to load purchase orders"),console.error("Error loading purchase orders:",P)}finally{a(!1)}},g=async()=>{if(window.confirm("This will fetch all bills from Zoho Inventory and sync them to Purchase Orders. Continue?"))try{i(!0),console.log(" Starting Zoho Bills sync...");const P=await ce.syncZohoBillsToPurchaseOrders();if(P.success){const M=P.data,U=(M==null?void 0:M.totalBills)??0,W=(M==null?void 0:M.addedOrders)??0,Y=(M==null?void 0:M.updatedOrders)??0,B=(M==null?void 0:M.errorCount)??0,ae=M==null?void 0:M.processingResult;let oe=` Sync Completed Successfully!

 Total Bills: ${U}
 Added: ${W}
 Updated: ${Y}
 Errors: ${B}

`;ae&&(oe+=` Inventory Processing:
 Processed: ${ae.processedBills}/${ae.totalProcessedBills} bills
 ${ae.processingMessage}

`),oe+="Refreshing purchase orders...",alert(oe),await x()}else alert(` Sync Failed: ${P.message}`)}catch(P){console.error("Sync error:",P),alert(`Error syncing with Zoho: ${P instanceof Error?P.message:"Unknown error"}`)}finally{i(!1)}},w=P=>{switch(P){case"syncing":return"bg-blue-100 text-blue-800 border-blue-200";case"synced":return"bg-green-100 text-green-800 border-green-200";case"not_synced":return"bg-gray-100 text-gray-800 border-gray-200";case"sync_failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=P=>{switch(P){case"syncing":return"Syncing";case"synced":return"Synced";case"not_synced":return"Not Synced";case"sync_failed":return"Sync Failed";default:return"Unknown"}},O=P=>{switch(P){case"processing":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"processed":return"bg-green-100 text-green-800 border-green-200";case"not_processed":return"bg-gray-100 text-gray-800 border-gray-200";case"failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=P=>{switch(P){case"processing":return"Processing";case"processed":return"Processed";case"not_processed":return"Not Processed";case"failed":return"Failed";default:return"Unknown"}},E=()=>{u(""),f(""),p(""),h(""),N("createdAt"),v("desc")},T=()=>{if(e.length===0){alert("No purchase orders to export");return}const P=[["Bill ID","Vendor ID","Vendor Name","Total Amount","Location","PO Number","Status","Order Date","Expected Delivery","Last Synced"].join(","),...e.map(Y=>{var B;return[Y.zohoBillId||"-",Y.supplierId||"-",Y.supplierName||"-",((B=Y.totalAmount)==null?void 0:B.toFixed(2))||"0.00",Y.zohoLocationName||"-",Y.poNumber||"-",Y.status||"-",Y.orderDate?new Date(Y.orderDate).toLocaleDateString():"-",Y.expectedDeliveryDate?new Date(Y.expectedDeliveryDate).toLocaleDateString():"-",Y.lastSyncedAt?new Date(Y.lastSyncedAt).toLocaleString():"-"].map(ae=>`"${ae}"`).join(",")})].join(`
`),M=new Blob([P],{type:"text/csv;charset=utf-8;"}),U=document.createElement("a"),W=URL.createObjectURL(M);U.setAttribute("href",W),U.setAttribute("download",`purchase-orders-${new Date().toISOString().split("T")[0]}.csv`),U.style.visibility="hidden",document.body.appendChild(U),U.click(),document.body.removeChild(U)},k=e.filter(P=>{const M=!c||P.poNumber.toLowerCase().includes(c.toLowerCase())||P.supplierName.toLowerCase().includes(c.toLowerCase())||P.zohoBillId&&P.zohoBillId.toLowerCase().includes(c.toLowerCase()),U=!d||P.status===d,W=!m||(P.syncStatus||"not_synced")===m,Y=!y||(P.processingStatus||"not_processed")===y;return M&&U&&W&&Y});return r?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading purchase orders..."})]})}):o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:o}),n.jsx("button",{onClick:x,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Orders"}),n.jsx("p",{className:"text-gray-600",children:"Bills synced from Zoho Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:x,className:"btn-secondary flex items-center",title:"Refresh purchase orders",disabled:r||s,children:[n.jsx(ea,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]}),n.jsx("button",{onClick:g,className:"btn-primary flex items-center",disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx(ea,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tt,{className:"h-4 w-4 mr-2"}),"Sync from Zoho"]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by PO number, vendor, or bill ID...",className:"input-field pl-10",value:c,onChange:P=>u(P.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{className:"input-field",value:d,onChange:P=>f(P.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Sent",children:"Sent"}),n.jsx("option",{value:"Confirmed",children:"Confirmed"}),n.jsx("option",{value:"Partial",children:"Partial"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),n.jsxs("select",{className:"input-field",value:m,onChange:P=>p(P.target.value),children:[n.jsx("option",{value:"",children:"All Sync Status"}),n.jsx("option",{value:"syncing",children:"Syncing"}),n.jsx("option",{value:"synced",children:"Synced"}),n.jsx("option",{value:"not_synced",children:"Not Synced"}),n.jsx("option",{value:"sync_failed",children:"Sync Failed"})]}),n.jsxs("select",{className:"input-field",value:y,onChange:P=>h(P.target.value),children:[n.jsx("option",{value:"",children:"All Processing Status"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"processed",children:"Processed"}),n.jsx("option",{value:"not_processed",children:"Not Processed"}),n.jsx("option",{value:"failed",children:"Failed"})]}),n.jsxs("button",{onClick:E,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear"]}),n.jsxs("button",{onClick:T,className:"btn-secondary flex items-center",title:"Export to CSV",disabled:e.length===0,children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-4",children:[n.jsxs("span",{children:["Showing ",k.length," purchase order",k.length!==1?"s":"",(c||d||m||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(c||d||m||y)&&n.jsx("button",{onClick:E,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]}),k.length===0?n.jsx("div",{className:"card p-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(tt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Purchase Orders Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:c||d?"Try adjusting your search or filters":'Click "Sync from Zoho" to fetch bills from Zoho Inventory'}),!c&&!d&&n.jsxs("button",{onClick:g,className:"btn-primary inline-flex items-center",disabled:s,children:[n.jsx(tt,{className:"h-4 w-4 mr-2"}),"Sync from Zoho"]})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:k.map(P=>{var M;return n.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow duration-200 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex justify-end gap-2 mb-3",children:[n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${w(P.syncStatus||"not_synced")}`,children:j(P.syncStatus||"not_synced")}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${O(P.processingStatus||"not_processed")}`,children:_(P.processingStatus||"not_processed")})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(r8,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Bill ID"})]}),n.jsx("p",{className:"text-sm font-semibold text-gray-900 ml-4",children:P.zohoBillId||"N/A"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Fi,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Vendor ID"})]}),n.jsx("p",{className:"text-xs text-gray-900 ml-4",children:P.supplierId||"N/A"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Fi,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Vendor Name"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 ml-4",children:P.supplierName||"Unknown Vendor"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(e8,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Total"})]}),n.jsxs("p",{className:"text-lg font-bold text-green-600 ml-4",children:[((M=P.totalAmount)==null?void 0:M.toFixed(3))||"0.000"," KWD"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Cd,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Location"})]}),n.jsx("p",{className:"text-xs text-gray-900 ml-4",children:P.zohoLocationName||"Not specified"})]}),n.jsx("div",{className:"border-t border-gray-200 my-4"}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center text-xs",children:[n.jsx(Hy,{className:"h-2 w-2 mr-1"}),"Order Date"]}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.orderDate?new Date(P.orderDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center text-xs",children:[n.jsx(Hy,{className:"h-2 w-2 mr-1"}),"Expected Delivery"]}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.expectedDeliveryDate?new Date(P.expectedDeliveryDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs",children:"PO Number"}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.poNumber})]}),P.items&&P.items.length>0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs",children:"Line Items"}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.items.length})]})]})]},P.id)})}),e.length>0&&n.jsx("div",{className:"card p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Db,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Synced from Zoho Inventory"}),n.jsxs("p",{className:"text-sm text-blue-700",children:['These purchase orders are automatically synced from Zoho Inventory bills. Click "Sync from Zoho" to fetch the latest bills.',((A=e[0])==null?void 0:A.lastSyncedAt)&&n.jsxs("span",{className:"ml-2 font-medium",children:["Last synced: ",new Date(e[0].lastSyncedAt).toLocaleString()]})]})]})]})})]})},tce=()=>{const e=lt(),[t,r]=C.useState({purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",supplierAddress:"",orderDate:"",expectedDeliveryDate:"",priority:"Medium",status:"Draft",paymentTerms:"Net 30",shippingMethod:"Standard",totalAmount:0,items:[],notes:"",specialInstructions:""}),[a,s]=C.useState({}),i=["Low","Medium","High","Urgent"],o=["Draft","Approved","Sent","Received","Cancelled"],l=["Net 15","Net 30","Net 45","Net 60","COD","Prepaid"],c=["Standard","Express","Overnight","Pickup"],u=()=>{const h={};return t.purchaseOrderNumber.trim()||(h.purchaseOrderNumber="Purchase order number is required"),t.supplierName.trim()||(h.supplierName="Supplier name is required"),t.supplierEmail.trim()||(h.supplierEmail="Supplier email is required"),t.orderDate||(h.orderDate="Order date is required"),t.expectedDeliveryDate||(h.expectedDeliveryDate="Expected delivery date is required"),t.items.length===0&&(h.items="At least one purchase order item is required"),s(h),Object.keys(h).length===0},d=h=>{if(h.preventDefault(),!u())return;const b=t.items.reduce((S,v)=>S+(v.totalPrice||0),0),N={id:Date.now().toString(),poNumber:t.purchaseOrderNumber,supplierId:"SUP-001",supplierName:t.supplierName,orderDate:new Date(t.orderDate).toISOString(),expectedDeliveryDate:new Date(t.expectedDeliveryDate).toISOString(),status:t.status,totalAmount:b,items:t.items.map(S=>({materialId:S.materialId,materialCode:S.materialCode,materialName:S.materialName,quantity:S.quantity,unitPrice:S.unitPrice,totalPrice:S.totalPrice})),terms:t.paymentTerms,notes:t.notes,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Purchase Order:",N),e("/purchase-orders")},f=(h,b)=>{r(N=>({...N,[h]:b})),a[h]&&s(N=>({...N,[h]:""}))},m=()=>{const h={materialId:"",materialCode:"",materialName:"",quantity:0,unitPrice:0,totalPrice:0};r(b=>({...b,items:[...b.items,h]}))},p=(h,b,N)=>{r(S=>({...S,items:S.items.map((v,x)=>{if(x===h){const g={...v,[b]:N};return(b==="quantity"||b==="unitPrice")&&(g.totalPrice=g.quantity*g.unitPrice),g}return v})}))},y=h=>{r(b=>({...b,items:b.items.filter((N,S)=>S!==h)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Purchase Order"}),n.jsx("p",{className:"text-gray-600",children:"Create a new purchase order for materials"})]}),n.jsxs("button",{onClick:()=>e("/purchase-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Purchase Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:d,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supplier Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.purchaseOrderNumber?"border-red-500":""}`,value:t.purchaseOrderNumber,onChange:h=>f("purchaseOrderNumber",h.target.value),placeholder:"PO-2024-001"}),a.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.supplierName?"border-red-500":""}`,value:t.supplierName,onChange:h=>f("supplierName",h.target.value),placeholder:"ABC Steel Suppliers"}),a.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierContact,onChange:h=>f("supplierContact",h.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.supplierEmail?"border-red-500":""}`,value:t.supplierEmail,onChange:h=>f("supplierEmail",h.target.value),placeholder:"john@abcsteel.com"}),a.supplierEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierEmail})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Address"}),n.jsx("textarea",{className:"input-field",rows:2,value:t.supplierAddress,onChange:h=>f("supplierAddress",h.target.value),placeholder:"123 Industrial Street, Manufacturing District, City, State 12345"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.orderDate?"border-red-500":""}`,value:t.orderDate,onChange:h=>f("orderDate",h.target.value)}),a.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.expectedDeliveryDate?"border-red-500":""}`,value:t.expectedDeliveryDate,onChange:h=>f("expectedDeliveryDate",h.target.value)}),a.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.expectedDeliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:t.priority,onChange:h=>f("priority",h.target.value),children:i.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:h=>f("status",h.target.value),children:o.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),n.jsx("select",{className:"input-field",value:t.paymentTerms,onChange:h=>f("paymentTerms",h.target.value),children:l.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Method"}),n.jsx("select",{className:"input-field",value:t.shippingMethod,onChange:h=>f("shippingMethod",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Purchase Order Items"}),n.jsxs("button",{type:"button",onClick:m,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((h,b)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:h.materialCode,onChange:N=>p(b,"materialCode",N.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:h.materialName,onChange:N=>p(b,"materialName",N.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:h.quantity,onChange:N=>p(b,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:h.unitPrice,onChange:N=>p(b,"unitPrice",parseFloat(N.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:"",onChange:N=>p(b,"deliveryDate",N.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:"",onChange:N=>p(b,"specifications",N.target.value),placeholder:"Grade A, 12mm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>y(b),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",(h.totalPrice||0).toFixed(2)," KWD"]})})]},b))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",t.items.reduce((h,b)=>h+(b.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:h=>f("notes",h.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialInstructions,onChange:h=>f("specialInstructions",h.target.value),placeholder:"Special delivery instructions or quality requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/purchase-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Purchase Order"]})]})]})})]})},rce=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",supplierAddress:"",orderDate:"",expectedDeliveryDate:"",priority:"Medium",status:"Draft",shippingMethod:"Standard",totalAmount:0,items:[],notes:"",specialInstructions:""}),[s,i]=C.useState({}),[o,l]=C.useState(!0),c=["Low","Medium","High","Urgent"],u=["Draft","Approved","Sent","Received","Cancelled"],d=["Net 15","Net 30","Net 45","Net 60","COD","Prepaid"],f=["Standard","Express","Overnight","Pickup"],m={id:"1",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"ABC Steel Suppliers",orderDate:new Date("2024-01-15").toISOString(),expectedDeliveryDate:new Date("2024-02-15").toISOString(),status:"Confirmed",totalAmount:15750,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:100,unitPrice:45.5,totalPrice:4550},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:50,unitPrice:125,totalPrice:6250},{materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",quantity:200,unitPrice:23.75,totalPrice:4750}],notes:"Supplier requires advance payment for expedited delivery.",createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"};C.useEffect(()=>{setTimeout(()=>{a({purchaseOrderNumber:m.poNumber,supplierName:m.supplierName,supplierContact:"John Smith",supplierEmail:"john@abcsteel.com",supplierAddress:"123 Industrial Street",orderDate:m.orderDate.split("T")[0],expectedDeliveryDate:m.expectedDeliveryDate.split("T")[0],priority:"High",status:"Approved",shippingMethod:"Express",totalAmount:m.totalAmount,items:m.items.map(v=>({...v,totalAmount:v.totalPrice})),notes:m.notes,specialInstructions:"Special handling required"}),l(!1)},500)},[t]);const p=()=>{const v={};return r.purchaseOrderNumber.trim()||(v.purchaseOrderNumber="Purchase order number is required"),r.supplierName.trim()||(v.supplierName="Supplier name is required"),r.supplierEmail.trim()||(v.supplierEmail="Supplier email is required"),r.orderDate||(v.orderDate="Order date is required"),r.expectedDeliveryDate||(v.expectedDeliveryDate="Expected delivery date is required"),r.items.length===0&&(v.items="At least one purchase order item is required"),i(v),Object.keys(v).length===0},y=v=>{if(v.preventDefault(),!p())return;const x=r.items.reduce((w,j)=>w+(j.totalPrice||0),0),g={...m,poNumber:r.purchaseOrderNumber,supplierName:r.supplierName,orderDate:new Date(r.orderDate).toISOString(),expectedDeliveryDate:new Date(r.expectedDeliveryDate).toISOString(),status:r.status,totalAmount:x,items:r.items,notes:r.notes,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Purchase Order:",g),e("/purchase-orders")},h=(v,x)=>{a(g=>({...g,[v]:x})),s[v]&&i(g=>({...g,[v]:""}))},b=()=>{const v={materialId:"",materialCode:"",materialName:"",quantity:0,unitPrice:0,totalPrice:0,totalAmount:0};a(x=>({...x,items:[...x.items,v]}))},N=(v,x,g)=>{a(w=>({...w,items:w.items.map((j,O)=>{if(O===v){const _={...j,[x]:g};return(x==="quantity"||x==="unitPrice")&&(_.totalPrice=_.quantity*_.unitPrice),_}return j})}))},S=v=>{a(x=>({...x,items:x.items.filter((g,w)=>w!==v)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading purchase order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Purchase Order"}),n.jsx("p",{className:"text-gray-600",children:"Update purchase order information"})]}),n.jsxs("button",{onClick:()=>e("/purchase-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Purchase Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supplier Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.purchaseOrderNumber?"border-red-500":""}`,value:r.purchaseOrderNumber,onChange:v=>h("purchaseOrderNumber",v.target.value),placeholder:"PO-2024-001"}),s.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.supplierName?"border-red-500":""}`,value:r.supplierName,onChange:v=>h("supplierName",v.target.value),placeholder:"ABC Steel Suppliers"}),s.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierContact,onChange:v=>h("supplierContact",v.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.supplierEmail?"border-red-500":""}`,value:r.supplierEmail,onChange:v=>h("supplierEmail",v.target.value),placeholder:"john@abcsteel.com"}),s.supplierEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierEmail})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Address"}),n.jsx("textarea",{className:"input-field",rows:2,value:r.supplierAddress,onChange:v=>h("supplierAddress",v.target.value),placeholder:"123 Industrial Street, Manufacturing District, City, State 12345"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.orderDate?"border-red-500":""}`,value:r.orderDate,onChange:v=>h("orderDate",v.target.value)}),s.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.expectedDeliveryDate?"border-red-500":""}`,value:r.expectedDeliveryDate,onChange:v=>h("expectedDeliveryDate",v.target.value)}),s.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.expectedDeliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:v=>h("priority",v.target.value),children:c.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:v=>h("status",v.target.value),children:u.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),n.jsx("select",{className:"input-field",value:"",onChange:v=>h("paymentTerms",v.target.value),children:d.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Method"}),n.jsx("select",{className:"input-field",value:r.shippingMethod,onChange:v=>h("shippingMethod",v.target.value),children:f.map(v=>n.jsx("option",{value:v,children:v},v))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Purchase Order Items"}),n.jsxs("button",{type:"button",onClick:b,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((v,x)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialCode,onChange:g=>N(x,"materialCode",g.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialName,onChange:g=>N(x,"materialName",g.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.quantity,onChange:g=>N(x,"quantity",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:v.unitPrice,onChange:g=>N(x,"unitPrice",parseFloat(g.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:"",onChange:g=>N(x,"deliveryDate",g.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:"",onChange:g=>N(x,"specifications",g.target.value),placeholder:"Grade A, 12mm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",(v.totalPrice||0).toFixed(2)," KWD"]})})]},x))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",r.items.reduce((v,x)=>v+(x.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:v=>h("notes",v.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialInstructions,onChange:v=>h("specialInstructions",v.target.value),placeholder:"Special delivery instructions or quality requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/purchase-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update Purchase Order"]})]})]})})]})},ace=()=>{const e=lt(),[t,r]=C.useState([{id:"1",grnNumber:"GRN-2024-001",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"Steel Suppliers Ltd.",receiptDate:new Date("2024-01-20"),status:"Approved",totalAmount:4550,items:[{poItemId:"PO-ITEM-001",materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",orderedQuantity:100,receivedQuantity:100,unitPrice:45.5,totalPrice:4550,qualityStatus:"Accepted",remarks:"Good quality"}],warehouseId:"WH-001",warehouseName:"Main Warehouse",receivedBy:"John Doe",notes:"All items received in good condition",createdAt:new Date("2024-01-20").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"}]),[a,s]=C.useState(""),[i,o]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState(!1),f=C.useRef(null),m=t.filter(v=>v.grnNumber.toLowerCase().includes(a.toLowerCase())||v.supplierName.toLowerCase().includes(a.toLowerCase())),p=v=>{switch(v){case"Approved":return"bg-green-100 text-green-800";case"Draft":return"bg-gray-100 text-gray-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=v=>{window.confirm("Are you sure you want to delete this GRN?")&&r(t.filter(x=>x.id!==v))},h=()=>{if(m.length===0){alert("No GRNs to export");return}const v=[["GRN Number","PO Number","Supplier Name","Receipt Date","Status","Total Amount","Created By","Updated By"].join(","),...m.map(j=>[j.grnNumber,j.poNumber,j.supplierName,j.receiptDate.toLocaleDateString(),j.status,j.totalAmount.toFixed(2),j.createdBy,j.updatedBy].map(O=>`"${O}"`).join(","))].join(`
`),x=new Blob([v],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),w=URL.createObjectURL(x);g.setAttribute("href",w),g.setAttribute("download",`grn-receipts-${new Date().toISOString().split("T")[0]}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)},b=()=>{var v;(v=f.current)==null||v.click()},N=async v=>{var g;const x=(g=v.target.files)==null?void 0:g[0];if(x){if(!x.name.toLowerCase().endsWith(".csv")){alert("Please select a CSV file");return}try{d(!0);const j=(await x.text()).split(`
`).filter(T=>T.trim());if(j.length<2){alert("CSV file must contain at least a header row and one data row");return}const O=j.slice(1);let _=0,E=0;for(const T of O)try{const k=T.split(",").map(P=>P.replace(/"/g,"").trim()),A={id:`grn-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,grnNumber:k[0]||"",poNumber:k[1]||"",supplierId:"SUP-001",supplierName:k[2]||"",warehouseId:"WH-001",warehouseName:"Main Warehouse",receiptDate:new Date(k[3]||new Date().toISOString().split("T")[0]),status:k[4]||"Draft",totalAmount:parseFloat(k[5])||0,items:[],receivedBy:k[6]||"admin",createdBy:k[6]||"admin",updatedBy:k[7]||"admin",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r(P=>[...P,A]),_++}catch{E++}alert(`Import completed!

Successfully imported: ${_} GRNs
Errors: ${E}`)}catch(w){alert("Error importing file: "+(w instanceof Error?w.message:"Unknown error"))}finally{d(!1),f.current&&(f.current.value="")}}},S=()=>{const x=[["GRN Number","PO Number","Supplier Name","Receipt Date","Status","Total Amount","Created By","Updated By"],["GRN-2024-003","PO-2024-003","Fresh Foods Ltd","2024-01-22","Approved","1200.00","admin","admin"],["GRN-2024-004","PO-2024-004","Kitchen Supplies Co","2024-01-23","Draft","850.00","admin","admin"]].map(O=>O.map(_=>`"${_}"`).join(",")).join(`
`),g=new Blob([x],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a"),j=URL.createObjectURL(g);w.setAttribute("href",j),w.setAttribute("download","grn-sample-template.csv"),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Good Receipt Notes"}),n.jsx("p",{className:"text-gray-600",children:"Manage incoming material receipts"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes/add"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Create GRN"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search GRNs...",className:"input-field pl-10",value:a,onChange:v=>s(v.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{onClick:h,className:"btn-secondary flex items-center",title:"Export GRNs to CSV",disabled:m.length===0,children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs("button",{onClick:b,className:"btn-secondary flex items-center",title:"Import GRNs from CSV",disabled:u,children:[n.jsx(Ha,{className:"h-4 w-4 mr-2"}),u?"Importing...":"Import"]}),n.jsxs("button",{onClick:S,className:"btn-secondary flex items-center",title:"Download sample CSV template",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Sample CSV"]})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"GRN Number"}),n.jsx("th",{className:"table-header",children:"PO Number"}),n.jsx("th",{className:"table-header",children:"Supplier"}),n.jsx("th",{className:"table-header",children:"Receipt Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Warehouse"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(v=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:v.grnNumber}),n.jsx("td",{className:"table-cell",children:v.poNumber}),n.jsx("td",{className:"table-cell",children:v.supplierName}),n.jsx("td",{className:"table-cell",children:v.receiptDate.toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(v.status)}`,children:v.status})}),n.jsx("td",{className:"table-cell",children:v.warehouseName}),n.jsxs("td",{className:"table-cell font-medium",children:[v.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{o(v),c(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:n.jsx(zi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/good-receipt-notes/edit/${v.id}`),className:"text-green-600 hover:text-green-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>y(v.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},v.id))})]})})}),n.jsx("input",{type:"file",ref:f,onChange:N,accept:".csv",style:{display:"none"}})]})},nce=()=>{const e=lt(),[t,r]=C.useState({grnNumber:"",purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",receiptDate:"",receivedBy:"",inspectedBy:"",status:"Draft",warehouseLocation:"",totalAmount:0,items:[],notes:"",qualityRemarks:"",deliveryChallanNumber:"",transporterName:"",vehicleNumber:""}),[a,s]=C.useState({}),i=["Draft","Approved","Rejected"],o=()=>{const m={};return t.grnNumber.trim()||(m.grnNumber="GRN number is required"),t.purchaseOrderNumber.trim()||(m.purchaseOrderNumber="Purchase order number is required"),t.supplierName.trim()||(m.supplierName="Supplier name is required"),t.receiptDate||(m.receiptDate="Receipt date is required"),t.receivedBy.trim()||(m.receivedBy="Received by is required"),t.items.length===0&&(m.items="At least one GRN item is required"),s(m),Object.keys(m).length===0},l=m=>{if(m.preventDefault(),!o())return;const p=t.items.reduce((h,b)=>h+(b.totalPrice||0),0),y={id:Date.now().toString(),grnNumber:t.grnNumber,poNumber:t.purchaseOrderNumber,supplierId:"SUP-001",supplierName:t.supplierName,receiptDate:new Date(t.receiptDate),status:t.status,totalAmount:p,items:t.items.map(h=>({poItemId:h.poItemId,materialId:h.materialId,materialCode:h.materialCode,materialName:h.materialName,orderedQuantity:h.orderedQuantity,receivedQuantity:h.receivedQuantity,unitPrice:h.unitPrice,totalPrice:h.totalPrice,qualityStatus:h.qualityStatus,remarks:h.remarks})),warehouseId:"WH-001",warehouseName:t.warehouseLocation,receivedBy:t.receivedBy,notes:t.notes,createdAt:new Date,updatedAt:new Date,createdBy:"admin",updatedBy:"admin"};console.log("Creating GRN:",y),e("/good-receipt-notes")},c=(m,p)=>{r(y=>({...y,[m]:p})),a[m]&&s(y=>({...y,[m]:""}))},u=()=>{const m={poItemId:"",materialId:"",materialCode:"",materialName:"",orderedQuantity:0,receivedQuantity:0,unitPrice:0,totalPrice:0,qualityStatus:"Accepted",remarks:"",acceptedQuantity:0,rejectedQuantity:0,totalAmount:0,specifications:"",batchNumber:"",expiryDate:""};r(p=>({...p,items:[...p.items,m]}))},d=(m,p,y)=>{r(h=>({...h,items:h.items.map((b,N)=>{if(N===m){const S={...b,[p]:y};return(p==="receivedQuantity"||p==="unitPrice")&&(S.totalPrice=S.receivedQuantity*S.unitPrice),S}return b})}))},f=m=>{r(p=>({...p,items:p.items.filter((y,h)=>h!==m)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New GRN"}),n.jsx("p",{className:"text-gray-600",children:"Create a new good receipt note"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to GRNs"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:l,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GRN Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.grnNumber?"border-red-500":""}`,value:t.grnNumber,onChange:m=>c("grnNumber",m.target.value),placeholder:"GRN-2024-001"}),a.grnNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.grnNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.purchaseOrderNumber?"border-red-500":""}`,value:t.purchaseOrderNumber,onChange:m=>c("purchaseOrderNumber",m.target.value),placeholder:"PO-2024-001"}),a.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.supplierName?"border-red-500":""}`,value:t.supplierName,onChange:m=>c("supplierName",m.target.value),placeholder:"ABC Steel Suppliers"}),a.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierContact,onChange:m=>c("supplierContact",m.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email"}),n.jsx("input",{type:"email",className:"input-field",value:t.supplierEmail,onChange:m=>c("supplierEmail",m.target.value),placeholder:"john@abcsteel.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.receiptDate?"border-red-500":""}`,value:t.receiptDate,onChange:m=>c("receiptDate",m.target.value)}),a.receiptDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.receiptDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receipt Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By *"}),n.jsx("input",{type:"text",className:`input-field ${a.receivedBy?"border-red-500":""}`,value:t.receivedBy,onChange:m=>c("receivedBy",m.target.value),placeholder:"Warehouse Manager"}),a.receivedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.receivedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inspected By"}),n.jsx("input",{type:"text",className:"input-field",value:t.inspectedBy,onChange:m=>c("inspectedBy",m.target.value),placeholder:"Quality Inspector"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:m=>c("status",m.target.value),children:i.map(m=>n.jsx("option",{value:m,children:m},m))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Location"}),n.jsx("input",{type:"text",className:"input-field",value:t.warehouseLocation,onChange:m=>c("warehouseLocation",m.target.value),placeholder:"Main Warehouse - Zone A"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Challan Number"}),n.jsx("input",{type:"text",className:"input-field",value:t.deliveryChallanNumber,onChange:m=>c("deliveryChallanNumber",m.target.value),placeholder:"DC-2024-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transporter Name"}),n.jsx("input",{type:"text",className:"input-field",value:t.transporterName,onChange:m=>c("transporterName",m.target.value),placeholder:"ABC Logistics"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Number"}),n.jsx("input",{type:"text",className:"input-field",value:t.vehicleNumber,onChange:m=>c("vehicleNumber",m.target.value),placeholder:"MH-12-AB-1234"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"GRN Items"}),n.jsxs("button",{type:"button",onClick:u,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((m,p)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.materialCode,onChange:y=>d(p,"materialCode",y.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.materialName,onChange:y=>d(p,"materialName",y.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ordered Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.orderedQuantity,onChange:y=>d(p,"orderedQuantity",parseFloat(y.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Received Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.receivedQuantity,onChange:y=>d(p,"receivedQuantity",parseFloat(y.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Accepted Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.receivedQuantity,onChange:y=>d(p,"receivedQuantity",parseFloat(y.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:m.unitPrice,onChange:y=>d(p,"unitPrice",parseFloat(y.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Batch Number"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.batchNumber||"",onChange:y=>d(p,"batchNumber",y.target.value),placeholder:"B001"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>f(p),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"col-span-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.specifications||"",onChange:y=>d(p,"specifications",y.target.value),placeholder:"Grade A, 12mm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:m.expiryDate||"",onChange:y=>d(p,"expiryDate",y.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{className:"input-field text-sm",value:m.qualityStatus,onChange:y=>d(p,"qualityStatus",y.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Total Amount: ",(m.totalPrice||0).toFixed(2)," KWD"]})]})]},p))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total GRN Amount: ",t.items.reduce((m,p)=>m+(p.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:m=>c("notes",m.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Remarks"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.qualityRemarks,onChange:m=>c("qualityRemarks",m.target.value),placeholder:"Quality inspection remarks and observations"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/good-receipt-notes"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create GRN"]})]})]})})]})},sce=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({grnNumber:"",purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",receiptDate:"",receivedBy:"",inspectedBy:"",status:"Draft",warehouseLocation:"",totalAmount:0,items:[],notes:"",qualityRemarks:"",deliveryChallanNumber:"",transporterName:"",vehicleNumber:""}),[s,i]=C.useState({}),[o,l]=C.useState(!0),c=["Draft","Approved","Rejected"],u={id:"1",grnNumber:"GRN-2024-001",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"ABC Steel Suppliers",receiptDate:new Date("2024-01-20"),status:"Approved",totalAmount:15750,items:[{poItemId:"POI-001",materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",orderedQuantity:100,receivedQuantity:100,unitPrice:45.5,totalPrice:4550,qualityStatus:"Accepted",remarks:"Good quality"},{poItemId:"POI-002",materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",orderedQuantity:50,receivedQuantity:50,unitPrice:125,totalPrice:6250,qualityStatus:"Accepted",remarks:"Excellent quality"},{poItemId:"POI-003",materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",orderedQuantity:200,receivedQuantity:200,unitPrice:23.75,totalPrice:4750,qualityStatus:"Accepted",remarks:"Good quality"}],warehouseId:"WH-001",warehouseName:"Main Warehouse",receivedBy:"Warehouse Manager",notes:"All materials received in good condition.",createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-21"),createdBy:"admin",updatedBy:"admin"};C.useEffect(()=>{setTimeout(()=>{a({grnNumber:u.grnNumber,purchaseOrderNumber:u.poNumber,supplierName:u.supplierName,supplierContact:"John Smith",supplierEmail:"john@abcsteel.com",receiptDate:u.receiptDate.toISOString().split("T")[0],receivedBy:u.receivedBy,inspectedBy:"Quality Inspector",status:u.status,warehouseLocation:u.warehouseName,totalAmount:u.totalAmount,items:u.items.map(b=>({...b,acceptedQuantity:b.receivedQuantity,rejectedQuantity:0,totalAmount:b.totalPrice,specifications:"Standard specifications",batchNumber:"BATCH-001",expiryDate:"2025-12-31"})),notes:u.notes,qualityRemarks:"Quality inspection completed",deliveryChallanNumber:"DC-2024-001",transporterName:"ABC Logistics",vehicleNumber:"MH-12-AB-1234"}),l(!1)},500)},[t]);const d=()=>{const b={};return r.grnNumber.trim()||(b.grnNumber="GRN number is required"),r.purchaseOrderNumber.trim()||(b.purchaseOrderNumber="Purchase order number is required"),r.supplierName.trim()||(b.supplierName="Supplier name is required"),r.receiptDate||(b.receiptDate="Receipt date is required"),r.receivedBy.trim()||(b.receivedBy="Received by is required"),r.items.length===0&&(b.items="At least one GRN item is required"),i(b),Object.keys(b).length===0},f=b=>{if(b.preventDefault(),!d())return;const N=r.items.reduce((v,x)=>v+x.totalAmount,0),S={...u,grnNumber:r.grnNumber,poNumber:r.purchaseOrderNumber,supplierName:r.supplierName,receiptDate:new Date(r.receiptDate),receivedBy:r.receivedBy,status:r.status,warehouseName:r.warehouseLocation,totalAmount:N,items:r.items.map(v=>({poItemId:v.poItemId,materialId:v.materialId,materialCode:v.materialCode,materialName:v.materialName,orderedQuantity:v.orderedQuantity,receivedQuantity:v.receivedQuantity,unitPrice:v.unitPrice,totalPrice:v.totalAmount,qualityStatus:v.qualityStatus,remarks:v.remarks})),notes:r.notes,updatedAt:new Date,updatedBy:"admin"};console.log("Updating GRN:",S),e("/good-receipt-notes")},m=(b,N)=>{a(S=>({...S,[b]:N})),s[b]&&i(S=>({...S,[b]:""}))},p=()=>{const b={poItemId:"",materialId:"",materialCode:"",materialName:"",orderedQuantity:0,receivedQuantity:0,unitPrice:0,totalPrice:0,qualityStatus:"Accepted",remarks:"",acceptedQuantity:0,rejectedQuantity:0,totalAmount:0,specifications:"",batchNumber:"",expiryDate:""};a(N=>({...N,items:[...N.items,b]}))},y=(b,N,S)=>{a(v=>({...v,items:v.items.map((x,g)=>{if(g===b){const w={...x,[N]:S};return(N==="acceptedQuantity"||N==="unitPrice")&&(w.totalAmount=w.acceptedQuantity*w.unitPrice),w}return x})}))},h=b=>{a(N=>({...N,items:N.items.filter((S,v)=>v!==b)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading GRN data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit GRN"}),n.jsx("p",{className:"text-gray-600",children:"Update good receipt note information"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to GRNs"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:f,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GRN Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.grnNumber?"border-red-500":""}`,value:r.grnNumber,onChange:b=>m("grnNumber",b.target.value),placeholder:"GRN-2024-001"}),s.grnNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.grnNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.purchaseOrderNumber?"border-red-500":""}`,value:r.purchaseOrderNumber,onChange:b=>m("purchaseOrderNumber",b.target.value),placeholder:"PO-2024-001"}),s.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.supplierName?"border-red-500":""}`,value:r.supplierName,onChange:b=>m("supplierName",b.target.value),placeholder:"ABC Steel Suppliers"}),s.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierContact,onChange:b=>m("supplierContact",b.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email"}),n.jsx("input",{type:"email",className:"input-field",value:r.supplierEmail,onChange:b=>m("supplierEmail",b.target.value),placeholder:"john@abcsteel.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.receiptDate?"border-red-500":""}`,value:r.receiptDate,onChange:b=>m("receiptDate",b.target.value)}),s.receiptDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.receiptDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receipt Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By *"}),n.jsx("input",{type:"text",className:`input-field ${s.receivedBy?"border-red-500":""}`,value:r.receivedBy,onChange:b=>m("receivedBy",b.target.value),placeholder:"Warehouse Manager"}),s.receivedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.receivedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inspected By"}),n.jsx("input",{type:"text",className:"input-field",value:r.inspectedBy,onChange:b=>m("inspectedBy",b.target.value),placeholder:"Quality Inspector"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:b=>m("status",b.target.value),children:c.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Location"}),n.jsx("input",{type:"text",className:"input-field",value:r.warehouseLocation,onChange:b=>m("warehouseLocation",b.target.value),placeholder:"Main Warehouse - Zone A"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Challan Number"}),n.jsx("input",{type:"text",className:"input-field",value:r.deliveryChallanNumber,onChange:b=>m("deliveryChallanNumber",b.target.value),placeholder:"DC-2024-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transporter Name"}),n.jsx("input",{type:"text",className:"input-field",value:r.transporterName,onChange:b=>m("transporterName",b.target.value),placeholder:"ABC Logistics"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Number"}),n.jsx("input",{type:"text",className:"input-field",value:r.vehicleNumber,onChange:b=>m("vehicleNumber",b.target.value),placeholder:"MH-12-AB-1234"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"GRN Items"}),n.jsxs("button",{type:"button",onClick:p,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((b,N)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.materialCode,onChange:S=>y(N,"materialCode",S.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.materialName,onChange:S=>y(N,"materialName",S.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ordered Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.orderedQuantity,onChange:S=>y(N,"orderedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Received Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.receivedQuantity,onChange:S=>y(N,"receivedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Accepted Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.acceptedQuantity,onChange:S=>y(N,"acceptedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:b.unitPrice,onChange:S=>y(N,"unitPrice",parseFloat(S.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Batch Number"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.batchNumber,onChange:S=>y(N,"batchNumber",S.target.value),placeholder:"B001"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>h(N),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"col-span-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.specifications,onChange:S=>y(N,"specifications",S.target.value),placeholder:"Grade A, 12mm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:b.expiryDate,onChange:S=>y(N,"expiryDate",S.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{className:"input-field text-sm",value:b.qualityStatus,onChange:S=>y(N,"qualityStatus",S.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Total Amount: ",b.totalAmount.toFixed(2)," KWD"]})]})]},N))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total GRN Amount: ",r.items.reduce((b,N)=>b+N.totalAmount,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:b=>m("notes",b.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Remarks"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.qualityRemarks,onChange:b=>m("qualityRemarks",b.target.value),placeholder:"Quality inspection remarks and observations"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/good-receipt-notes"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update GRN"]})]})]})})]})},ice=()=>{const e=lt(),[t,r]=C.useState([{id:"1",warehouseCode:"WH-001",warehouseName:"Main Warehouse",description:"Primary storage facility",address:{street:"123 Industrial Ave",city:"Industrial City",state:"State",zipCode:"12345",country:"Country"},capacity:1e4,currentCapacity:7500,managerId:"MGR-001",managerName:"John Smith",isActive:!0,storageTypes:["Dry Storage","Cold Storage"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-15").toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"2",warehouseCode:"WH-002",warehouseName:"Secondary Warehouse",description:"Secondary storage facility",address:{street:"456 Storage St",city:"Storage City",state:"State",zipCode:"67890",country:"Country"},capacity:5e3,currentCapacity:2e3,managerId:"MGR-002",managerName:"Jane Doe",isActive:!0,storageTypes:["Dry Storage"],createdAt:new Date("2024-01-16").toISOString(),updatedAt:new Date("2024-01-16").toISOString(),createdBy:"admin",updatedBy:"admin"}]),[a,s]=C.useState(""),i=t.filter(u=>u.warehouseName.toLowerCase().includes(a.toLowerCase())||u.warehouseCode.toLowerCase().includes(a.toLowerCase())),o=(u,d)=>u/d*100,l=u=>u>=90?"bg-red-500":u>=75?"bg-yellow-500":"bg-green-500",c=u=>{window.confirm("Are you sure you want to delete this warehouse?")&&r(t.filter(d=>d.id!==u))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Warehouse Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage warehouse locations and capacity"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master/add"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Warehouse"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search warehouses...",className:"input-field pl-10",value:a,onChange:u=>s(u.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(u=>{const d=o(u.currentCapacity,u.capacity);return n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u.warehouseName}),n.jsx("p",{className:"text-sm text-gray-600",children:u.warehouseCode})]}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Cd,{className:"h-4 w-4 mr-2"}),n.jsxs("span",{children:[u.address.city,", ",u.address.state]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Fi,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:u.managerName})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Capacity Usage"}),n.jsxs("span",{children:[d.toFixed(1),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${l(d)}`,style:{width:`${d}%`}})}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[u.currentCapacity.toLocaleString()," / ",u.capacity.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Storage Types:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:u.storageTypes.map((f,m)=>n.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:f},m))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t",children:[n.jsx("button",{onClick:()=>e(`/warehouse-master/edit/${u.id}`),className:"text-green-600 hover:text-green-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>c(u.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})]},u.id)})})]})},oce=()=>{const e=lt(),[t,r]=C.useState({warehouseCode:"",warehouseName:"",warehouseType:"Main",location:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactPhone:"",contactEmail:"",capacity:"",capacityUnit:"SQM",status:"Active",operatingHours:"",timezone:"",notes:"",specialRequirements:""}),[a,s]=C.useState({}),i=["Main","Sub","Transit","Cold Storage","Hazardous"],o=["Active","Inactive","Maintenance","Closed"],l=["SQM","CBM","KG","TON"],c=()=>{const f={};return t.warehouseCode.trim()||(f.warehouseCode="Warehouse code is required"),t.warehouseName.trim()||(f.warehouseName="Warehouse name is required"),t.location.trim()||(f.location="Location is required"),t.address.trim()||(f.address="Address is required"),t.city.trim()||(f.city="City is required"),t.state.trim()||(f.state="State is required"),t.country.trim()||(f.country="Country is required"),t.contactPerson.trim()||(f.contactPerson="Contact person is required"),t.contactPhone.trim()||(f.contactPhone="Contact phone is required"),t.contactEmail.trim()||(f.contactEmail="Contact email is required"),s(f),Object.keys(f).length===0},u=f=>{if(f.preventDefault(),!c())return;const m={id:Date.now().toString(),warehouseCode:t.warehouseCode,warehouseName:t.warehouseName,description:t.notes,address:{street:t.address,city:t.city,state:t.state,country:t.country,zipCode:t.postalCode},capacity:parseFloat(t.capacity)||0,currentCapacity:0,managerId:"MGR-001",managerName:t.contactPerson,isActive:t.status==="Active",storageTypes:["Dry Storage"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Warehouse:",m),e("/warehouse-master")},d=(f,m)=>{r(p=>({...p,[f]:m})),a[f]&&s(p=>({...p,[f]:""}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Warehouse"}),n.jsx("p",{className:"text-gray-600",children:"Create a new warehouse location"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Warehouses"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:u,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.warehouseCode?"border-red-500":""}`,value:t.warehouseCode,onChange:f=>d("warehouseCode",f.target.value),placeholder:"WH-001"}),a.warehouseCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.warehouseCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.warehouseName?"border-red-500":""}`,value:t.warehouseName,onChange:f=>d("warehouseName",f.target.value),placeholder:"Main Warehouse"}),a.warehouseName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.warehouseName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Type"}),n.jsx("select",{className:"input-field",value:t.warehouseType,onChange:f=>d("warehouseType",f.target.value),children:i.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),n.jsx("input",{type:"text",className:`input-field ${a.location?"border-red-500":""}`,value:t.location,onChange:f=>d("location",f.target.value),placeholder:"Industrial Zone A"}),a.location&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:f=>d("status",f.target.value),children:o.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"input-field flex-1",value:t.capacity,onChange:f=>d("capacity",f.target.value),placeholder:"1000"}),n.jsx("select",{className:"input-field w-24",value:t.capacityUnit,onChange:f=>d("capacityUnit",f.target.value),children:l.map(f=>n.jsx("option",{value:f,children:f},f))})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),n.jsx("textarea",{className:`input-field ${a.address?"border-red-500":""}`,rows:3,value:t.address,onChange:f=>d("address",f.target.value),placeholder:"123 Industrial Street, Manufacturing District"}),a.address&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.address})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${a.city?"border-red-500":""}`,value:t.city,onChange:f=>d("city",f.target.value),placeholder:"Mumbai"}),a.city&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),n.jsx("input",{type:"text",className:`input-field ${a.state?"border-red-500":""}`,value:t.state,onChange:f=>d("state",f.target.value),placeholder:"Maharashtra"}),a.state&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),n.jsx("input",{type:"text",className:`input-field ${a.country?"border-red-500":""}`,value:t.country,onChange:f=>d("country",f.target.value),placeholder:"India"}),a.country&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),n.jsx("input",{type:"text",className:"input-field",value:t.postalCode,onChange:f=>d("postalCode",f.target.value),placeholder:"400001"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),n.jsx("input",{type:"text",className:`input-field ${a.contactPerson?"border-red-500":""}`,value:t.contactPerson,onChange:f=>d("contactPerson",f.target.value),placeholder:"John Smith"}),a.contactPerson&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactPerson})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${a.contactPhone?"border-red-500":""}`,value:t.contactPhone,onChange:f=>d("contactPhone",f.target.value),placeholder:"+91 98765 43210"}),a.contactPhone&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactPhone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.contactEmail?"border-red-500":""}`,value:t.contactEmail,onChange:f=>d("contactEmail",f.target.value),placeholder:"john@company.com"}),a.contactEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactEmail})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),n.jsx("input",{type:"text",className:"input-field",value:t.operatingHours,onChange:f=>d("operatingHours",f.target.value),placeholder:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:t.timezone,onChange:f=>d("timezone",f.target.value),placeholder:"IST (UTC+5:30)"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:f=>d("notes",f.target.value),placeholder:"Additional notes or comments about the warehouse"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requirements"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialRequirements,onChange:f=>d("specialRequirements",f.target.value),placeholder:"Special storage requirements, security measures, or operational notes"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/warehouse-master"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Warehouse"]})]})]})})]})},lce=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({warehouseCode:"",warehouseName:"",warehouseType:"Main",location:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactPhone:"",contactEmail:"",capacity:"",capacityUnit:"SQM",status:"Active",operatingHours:"",timezone:"",notes:"",specialRequirements:""}),[s,i]=C.useState({}),[o,l]=C.useState(!0),c=["Main","Sub","Transit","Cold Storage","Hazardous"],u=["Active","Inactive","Maintenance","Closed"],d=["SQM","CBM","KG","TON"],f={id:"1",warehouseCode:"WH-001",warehouseName:"Main Warehouse",description:"Primary warehouse for finished goods storage",address:{street:"123 Industrial Street",city:"Mumbai",state:"Maharashtra",zipCode:"400001",country:"India"},capacity:5e3,currentCapacity:3e3,managerId:"MGR-001",managerName:"John Smith",isActive:!0,storageTypes:["Dry Storage","Cold Storage"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"};C.useEffect(()=>{setTimeout(()=>{a({warehouseCode:f.warehouseCode,warehouseName:f.warehouseName,warehouseType:"Main",location:"Industrial Zone A",address:f.address.street,city:f.address.city,state:f.address.state,country:f.address.country,postalCode:f.address.zipCode,contactPerson:f.managerName,contactPhone:"+91 98765 43210",contactEmail:"john@company.com",capacity:f.capacity.toString(),capacityUnit:"SQM",status:"Active",operatingHours:"8:00 AM - 6:00 PM",timezone:"IST (UTC+5:30)",notes:f.description,specialRequirements:"Temperature controlled environment required"}),l(!1)},500)},[t]);const m=()=>{const h={};return r.warehouseCode.trim()||(h.warehouseCode="Warehouse code is required"),r.warehouseName.trim()||(h.warehouseName="Warehouse name is required"),r.location.trim()||(h.location="Location is required"),r.address.trim()||(h.address="Address is required"),r.city.trim()||(h.city="City is required"),r.state.trim()||(h.state="State is required"),r.country.trim()||(h.country="Country is required"),r.contactPerson.trim()||(h.contactPerson="Contact person is required"),r.contactPhone.trim()||(h.contactPhone="Contact phone is required"),r.contactEmail.trim()||(h.contactEmail="Contact email is required"),i(h),Object.keys(h).length===0},p=h=>{if(h.preventDefault(),!m())return;const b={...f,warehouseCode:r.warehouseCode,warehouseName:r.warehouseName,description:r.notes,address:{street:r.address,city:r.city,state:r.state,zipCode:r.postalCode,country:r.country},capacity:parseFloat(r.capacity)||0,currentCapacity:parseFloat(r.capacity)||0,managerId:"MGR-001",managerName:r.contactPerson,isActive:r.status==="Active",storageTypes:["Dry Storage","Cold Storage"],updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Warehouse:",b),e("/warehouse-master")},y=(h,b)=>{a(N=>({...N,[h]:b})),s[h]&&i(N=>({...N,[h]:""}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading warehouse data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Warehouse"}),n.jsx("p",{className:"text-gray-600",children:"Update warehouse information"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Warehouses"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:p,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.warehouseCode?"border-red-500":""}`,value:r.warehouseCode,onChange:h=>y("warehouseCode",h.target.value),placeholder:"WH-001"}),s.warehouseCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.warehouseCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.warehouseName?"border-red-500":""}`,value:r.warehouseName,onChange:h=>y("warehouseName",h.target.value),placeholder:"Main Warehouse"}),s.warehouseName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.warehouseName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Type"}),n.jsx("select",{className:"input-field",value:r.warehouseType,onChange:h=>y("warehouseType",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),n.jsx("input",{type:"text",className:`input-field ${s.location?"border-red-500":""}`,value:r.location,onChange:h=>y("location",h.target.value),placeholder:"Industrial Zone A"}),s.location&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:h=>y("status",h.target.value),children:u.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"input-field flex-1",value:r.capacity,onChange:h=>y("capacity",h.target.value),placeholder:"1000"}),n.jsx("select",{className:"input-field w-24",value:r.capacityUnit,onChange:h=>y("capacityUnit",h.target.value),children:d.map(h=>n.jsx("option",{value:h,children:h},h))})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),n.jsx("textarea",{className:`input-field ${s.address?"border-red-500":""}`,rows:3,value:r.address,onChange:h=>y("address",h.target.value),placeholder:"123 Industrial Street, Manufacturing District"}),s.address&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.address})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${s.city?"border-red-500":""}`,value:r.city,onChange:h=>y("city",h.target.value),placeholder:"Mumbai"}),s.city&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),n.jsx("input",{type:"text",className:`input-field ${s.state?"border-red-500":""}`,value:r.state,onChange:h=>y("state",h.target.value),placeholder:"Maharashtra"}),s.state&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),n.jsx("input",{type:"text",className:`input-field ${s.country?"border-red-500":""}`,value:r.country,onChange:h=>y("country",h.target.value),placeholder:"India"}),s.country&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),n.jsx("input",{type:"text",className:"input-field",value:r.postalCode,onChange:h=>y("postalCode",h.target.value),placeholder:"400001"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),n.jsx("input",{type:"text",className:`input-field ${s.contactPerson?"border-red-500":""}`,value:r.contactPerson,onChange:h=>y("contactPerson",h.target.value),placeholder:"John Smith"}),s.contactPerson&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactPerson})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${s.contactPhone?"border-red-500":""}`,value:r.contactPhone,onChange:h=>y("contactPhone",h.target.value),placeholder:"+91 98765 43210"}),s.contactPhone&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactPhone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.contactEmail?"border-red-500":""}`,value:r.contactEmail,onChange:h=>y("contactEmail",h.target.value),placeholder:"john@company.com"}),s.contactEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactEmail})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),n.jsx("input",{type:"text",className:"input-field",value:r.operatingHours,onChange:h=>y("operatingHours",h.target.value),placeholder:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:r.timezone,onChange:h=>y("timezone",h.target.value),placeholder:"IST (UTC+5:30)"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:h=>y("notes",h.target.value),placeholder:"Additional notes or comments about the warehouse"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requirements"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialRequirements,onChange:h=>y("specialRequirements",h.target.value),placeholder:"Special storage requirements, security measures, or operational notes"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/warehouse-master"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update Warehouse"]})]})]})})]})},cce=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState(!0),[i,o]=C.useState({page:1,limit:10,total:0,pages:0}),[l,c]=C.useState(""),[u,d]=C.useState(null),[f,m]=C.useState(!1),[p,y]=C.useState(""),h=async()=>{try{s(!0);const g=await ce.getTransferOrders({page:i.page,limit:i.limit,search:l||void 0,status:p||void 0,sortBy:"transferDate",sortOrder:"desc"});g.success&&(r(g.data),o(g.pagination))}catch(g){console.error("Error loading transfer orders:",g)}finally{s(!1)}};C.useEffect(()=>{h()},[i.page,l,p]),C.useEffect(()=>{const g=setInterval(()=>{h()},3e4);return()=>clearInterval(g)},[]);const b=t,N=g=>{switch(g){case"Completed":return"bg-green-100 text-green-800";case"In Transit":return"bg-blue-100 text-blue-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Failed":return"bg-red-100 text-red-800";case"Cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=g=>{switch(g){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";case"Normal":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},v=async g=>{const w=t.find(O=>O._id===g),j=(w==null?void 0:w.transferNumber)||"this transfer order";if(window.confirm(`Are you sure you want to delete ${j}?

This action cannot be undone.`))try{s(!0);const O=await ce.deleteTransferOrder(g,{updatedBy:"Admin User"});O.success?(alert(`Transfer order ${j} has been deleted successfully.`),await h()):alert(`Failed to delete transfer order: ${O.message||"Unknown error"}`)}catch(O){console.error("Error deleting transfer order:",O),alert(`Error deleting transfer order: ${O instanceof Error?O.message:"Unknown error"}`)}finally{s(!1)}},x=()=>{var g,w,j,O;return n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transfer Order Details"}),n.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),u&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transfer Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(u.priority)}`,children:u.priority})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"From Outlet"}),n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:typeof u.fromOutlet=="object"?(g=u.fromOutlet)==null?void 0:g.name:u.fromOutlet||"N/A"}),((w=u.fromOutlet)==null?void 0:w.code)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[u.fromOutlet.code,"  ",u.fromOutlet.type||"Outlet"]}),n.jsx("div",{className:"text-xs text-gray-400",children:u.fromOutlet.location||"Location not specified"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"To Outlet"}),n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:typeof u.toOutlet=="object"?(j=u.toOutlet)==null?void 0:j.name:u.toOutlet||"N/A"}),((O=u.toOutlet)==null?void 0:O.code)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[u.toOutlet.code,"  ",u.toOutlet.type||"Outlet"]}),n.jsx("div",{className:"text-xs text-gray-400",children:u.toOutlet.location||"Location not specified"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transfer Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.transferDate?new Date(u.transferDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(u.status||"Unknown")}`,children:u.status||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requested By"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.requestedBy||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Amount"}),n.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:[u.totalAmount?u.totalAmount.toFixed(2):"0.00"," KWD"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Transfer Items"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Item Code"}),n.jsx("th",{className:"table-header",children:"Item Name"}),n.jsx("th",{className:"table-header",children:"Item Type"}),n.jsx("th",{className:"table-header",children:"Quantity"}),n.jsx("th",{className:"table-header",children:"Unit"}),n.jsx("th",{className:"table-header",children:"Unit Price"}),n.jsx("th",{className:"table-header",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.items&&u.items.length>0?u.items.map((_,E)=>n.jsxs("tr",{children:[n.jsx("td",{className:"table-cell",children:_.itemCode}),n.jsx("td",{className:"table-cell",children:_.itemName}),n.jsx("td",{className:"table-cell",children:_.itemType}),n.jsx("td",{className:"table-cell",children:_.quantity}),n.jsx("td",{className:"table-cell",children:_.unitOfMeasure}),n.jsxs("td",{className:"table-cell",children:[_.unitPrice?_.unitPrice.toFixed(2):"0.00"," KWD"]}),n.jsxs("td",{className:"table-cell font-medium",children:[_.totalValue?_.totalValue.toFixed(2):"0.00"," KWD"]})]},E)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center text-gray-500",children:"No items found"})})})]})}),n.jsx("div",{className:"mt-4 text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Amount: ",u.totalAmount?u.totalAmount.toFixed(2):"0.00"," KWD"]})})]}),u.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.notes})]})]})]})})})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transfer Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage material transfers between warehouses"})]}),n.jsxs("button",{onClick:()=>e("/central-kitchen/create-transfer"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search transfer orders...",className:"input-field pl-10",value:l,onChange:g=>c(g.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{className:"input-field",value:p,onChange:g=>y(g.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"In Transit",children:"In Transit"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Failed",children:"Failed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{onClick:h,className:"btn-secondary flex items-center",disabled:a,children:[n.jsx(dr,{className:"h-4 w-4 mr-2"}),a?"Refreshing...":"Refresh"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Transfer Number"}),n.jsx("th",{className:"table-header",children:"From  To"}),n.jsx("th",{className:"table-header",children:"Transfer Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Requested By"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center py-8",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-2 text-gray-600",children:"Loading transfer orders..."})]})})}):b.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center py-8 text-gray-500",children:"No transfer orders found"})}):b.map(g=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:g.transferNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.fromOutlet.name}),n.jsx(QR,{className:"h-4 w-4 mx-3 text-gray-400 flex-shrink-0"}),n.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.toOutlet.name})]})}),n.jsx("td",{className:"table-cell",children:new Date(g.transferDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(g.status)}`,children:g.status})}),n.jsx("td",{className:"table-cell",children:g.requestedBy}),n.jsxs("td",{className:"table-cell font-medium",children:[g.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{d(g),m(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:n.jsx(zi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>v(g._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},g._id))})]})})}),f&&n.jsx(x,{})]})},uce=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({transferNumber:"",fromWarehouseId:"",fromWarehouseName:"",toWarehouseId:"",toWarehouseName:"",transferDate:"",expectedDeliveryDate:"",status:"Draft",priority:"Medium",totalAmount:0,items:[],requestedBy:"",approvedBy:"",receivedBy:"",transferType:"Internal",reason:"",notes:""}),[s,i]=C.useState({}),[o,l]=C.useState(!0),c=["Draft","Pending","Approved","In Transit","Delivered","Cancelled"],u=["Low","Medium","High","Urgent"],d=["Internal","External","Emergency"],f=[{id:"WH-001",name:"Main Warehouse"},{id:"WH-002",name:"Secondary Warehouse"},{id:"WH-003",name:"Cold Storage"},{id:"WH-004",name:"Hazardous Storage"}],m={id:"1",transferNumber:"TO-2024-001",fromWarehouseId:"WH-001",fromWarehouseName:"Main Warehouse",toWarehouseId:"WH-002",toWarehouseName:"Secondary Warehouse",transferDate:new Date("2024-01-20").toISOString(),expectedDeliveryDate:new Date("2024-01-22").toISOString(),status:"In Transit",priority:"High",totalAmount:15750,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:100,unitOfMeasure:"KG",unitPrice:45.5,totalPrice:4550,remarks:"High priority transfer"},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:50,unitOfMeasure:"SQM",unitPrice:125,totalPrice:6250,remarks:"Handle with care"},{materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",quantity:200,unitOfMeasure:"M",unitPrice:23.75,totalPrice:4750,remarks:"Standard transfer"}],requestedBy:"John Smith",approvedBy:"Manager Name",receivedBy:"Warehouse Staff",transferType:"Internal",reason:"Inventory rebalancing between warehouses for better distribution",notes:"Transfer approved for inventory optimization. Ensure proper handling of aluminum sheets.",createdAt:new Date("2024-01-20").toISOString(),updatedAt:new Date("2024-01-21").toISOString(),createdBy:"admin",updatedBy:"admin"};C.useEffect(()=>{setTimeout(()=>{var x;a({transferNumber:m.transferNumber,fromWarehouseId:m.fromWarehouseId,fromWarehouseName:m.fromWarehouseName,toWarehouseId:m.toWarehouseId,toWarehouseName:m.toWarehouseName,transferDate:m.transferDate.split("T")[0],expectedDeliveryDate:((x=m.expectedDeliveryDate)==null?void 0:x.split("T")[0])||"",status:m.status,priority:m.priority,totalAmount:m.totalAmount,items:m.items,requestedBy:m.requestedBy,approvedBy:m.approvedBy,receivedBy:m.receivedBy,transferType:m.transferType,reason:m.reason,notes:m.notes}),l(!1)},500)},[t]);const p=()=>{const x={};return r.transferNumber.trim()||(x.transferNumber="Transfer number is required"),r.fromWarehouseId||(x.fromWarehouseId="From warehouse is required"),r.toWarehouseId||(x.toWarehouseId="To warehouse is required"),r.transferDate||(x.transferDate="Transfer date is required"),r.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),r.requestedBy.trim()||(x.requestedBy="Requested by is required"),r.reason.trim()||(x.reason="Reason is required"),r.items.length===0&&(x.items="At least one transfer item is required"),i(x),Object.keys(x).length===0},y=x=>{if(x.preventDefault(),!p())return;const g=r.items.reduce((j,O)=>j+O.totalPrice,0),w={...m,transferNumber:r.transferNumber,fromWarehouseId:r.fromWarehouseId,fromWarehouseName:r.fromWarehouseName,toWarehouseId:r.toWarehouseId,toWarehouseName:r.toWarehouseName,transferDate:new Date(r.transferDate).toISOString(),expectedDeliveryDate:new Date(r.expectedDeliveryDate).toISOString(),status:r.status,priority:r.priority,totalAmount:g,items:r.items,requestedBy:r.requestedBy,approvedBy:r.approvedBy,receivedBy:r.receivedBy,transferType:r.transferType,reason:r.reason,notes:r.notes,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Transfer Order:",w),e("/transfer-orders")},h=(x,g)=>{a(w=>({...w,[x]:g})),s[x]&&i(w=>({...w,[x]:""}))},b=(x,g)=>{const w=f.find(O=>O.id===g),j=w?w.name:"";a(x==="fromWarehouseId"?O=>({...O,fromWarehouseId:g,fromWarehouseName:j}):O=>({...O,toWarehouseId:g,toWarehouseName:j}))},N=()=>{const x={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};a(g=>({...g,items:[...g.items,x]}))},S=(x,g,w)=>{a(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},v=x=>{a(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))};return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Transfer Order"}),n.jsx("p",{className:"text-gray-600",children:"Update transfer order information"})]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Transfer Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.transferNumber?"border-red-500":""}`,value:r.transferNumber,onChange:x=>h("transferNumber",x.target.value),placeholder:"TO-2024-001"}),s.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:r.transferType,onChange:x=>h("transferType",x.target.value),children:d.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:x=>h("priority",x.target.value),children:u.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:x=>h("status",x.target.value),children:c.map(x=>n.jsx("option",{value:x,children:x},x))})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Warehouse Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Warehouse *"}),n.jsxs("select",{className:`input-field ${s.fromWarehouseId?"border-red-500":""}`,value:r.fromWarehouseId,onChange:x=>b("fromWarehouseId",x.target.value),children:[n.jsx("option",{value:"",children:"Select From Warehouse"}),f.map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))]}),s.fromWarehouseId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.fromWarehouseId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Warehouse *"}),n.jsxs("select",{className:`input-field ${s.toWarehouseId?"border-red-500":""}`,value:r.toWarehouseId,onChange:x=>b("toWarehouseId",x.target.value),children:[n.jsx("option",{value:"",children:"Select To Warehouse"}),f.filter(x=>x.id!==r.fromWarehouseId).map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))]}),s.toWarehouseId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.toWarehouseId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.transferDate?"border-red-500":""}`,value:r.transferDate,onChange:x=>h("transferDate",x.target.value)}),s.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.expectedDeliveryDate?"border-red-500":""}`,value:r.expectedDeliveryDate,onChange:x=>h("expectedDeliveryDate",x.target.value)}),s.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personnel Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested By *"}),n.jsx("input",{type:"text",className:`input-field ${s.requestedBy?"border-red-500":""}`,value:r.requestedBy,onChange:x=>h("requestedBy",x.target.value),placeholder:"John Smith"}),s.requestedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.requestedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved By"}),n.jsx("input",{type:"text",className:"input-field",value:r.approvedBy,onChange:x=>h("approvedBy",x.target.value),placeholder:"Manager Name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By"}),n.jsx("input",{type:"text",className:"input-field",value:r.receivedBy,onChange:x=>h("receivedBy",x.target.value),placeholder:"Warehouse Staff"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transfer Items"}),n.jsxs("button",{type:"button",onClick:N,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.materialCode,onChange:w=>S(g,"materialCode",w.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.materialName,onChange:w=>S(g,"materialName",w.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:w=>S(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.unitOfMeasure,onChange:w=>S(g,"unitOfMeasure",w.target.value),placeholder:"KG"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:x.unitPrice,onChange:w=>S(g,"unitPrice",parseFloat(w.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks,onChange:w=>S(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>v(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",r.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Transfer *"}),n.jsx("textarea",{className:`input-field ${s.reason?"border-red-500":""}`,rows:3,value:r.reason,onChange:x=>h("reason",x.target.value),placeholder:"Reason for material transfer"}),s.reason&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.reason})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:x=>h("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update Transfer Order"]})]})]})})]})},dce=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState(!0),[i,o]=C.useState(null),[l,c]=C.useState(""),[u,d]=C.useState(""),[f,m]=C.useState(""),[p,y]=C.useState(""),[h,b]=C.useState("createdAt"),[N,S]=C.useState("desc"),[v,x]=C.useState(null),[g,w]=C.useState(!1);C.useEffect(()=>{j()},[]),C.useEffect(()=>{a||j()},[l,u,f,p,h,N]);const j=async()=>{try{s(!0),o(null);const k=[{id:"outlet-001",outletCode:"KC001",outletName:"Kuwait City",outletType:"Restaurant",description:"Main restaurant outlet in Kuwait City",address:{street:"123 Main Street",city:"Kuwait City",state:"Kuwait",zipCode:"12345",country:"Kuwait"},contactInfo:{phone:"+965-1234-5678",email:"kuwait@localbeat.com",managerName:"Ahmed Al-Sabah",managerPhone:"+965-1234-5679",managerEmail:"ahmed@localbeat.com"},operatingHours:{monday:{open:"08:00",close:"22:00",isOpen:!0},tuesday:{open:"08:00",close:"22:00",isOpen:!0},wednesday:{open:"08:00",close:"22:00",isOpen:!0},thursday:{open:"08:00",close:"22:00",isOpen:!0},friday:{open:"08:00",close:"22:00",isOpen:!0},saturday:{open:"08:00",close:"22:00",isOpen:!0},sunday:{open:"08:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:100,kitchenCapacity:50,storageCapacity:200,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway","Delivery"],timezone:"Asia/Kuwait",notes:"Main restaurant outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-002",outletCode:"M360001",outletName:"360 Mall",outletType:"Cafe",description:"Cafe outlet in 360 Mall",address:{street:"360 Mall, Level 2",city:"Kuwait City",state:"Kuwait",zipCode:"12346",country:"Kuwait"},contactInfo:{phone:"+965-2345-6789",email:"mall360@localbeat.com",managerName:"Sarah Johnson",managerPhone:"+965-2345-6790",managerEmail:"sarah@localbeat.com"},operatingHours:{monday:{open:"10:00",close:"23:00",isOpen:!0},tuesday:{open:"10:00",close:"23:00",isOpen:!0},wednesday:{open:"10:00",close:"23:00",isOpen:!0},thursday:{open:"10:00",close:"23:00",isOpen:!0},friday:{open:"10:00",close:"23:00",isOpen:!0},saturday:{open:"10:00",close:"23:00",isOpen:!0},sunday:{open:"10:00",close:"23:00",isOpen:!0}},capacity:{seatingCapacity:80,kitchenCapacity:30,storageCapacity:150,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway"],timezone:"Asia/Kuwait",notes:"Mall cafe outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-003",outletCode:"VC001",outletName:"Vibes Complex",outletType:"Food Court",description:"Food court outlet in Vibes Complex",address:{street:"Vibes Complex, Food Court",city:"Kuwait City",state:"Kuwait",zipCode:"12347",country:"Kuwait"},contactInfo:{phone:"+965-3456-7890",email:"vibes@localbeat.com",managerName:"Mohammed Al-Rashid",managerPhone:"+965-3456-7891",managerEmail:"mohammed@localbeat.com"},operatingHours:{monday:{open:"09:00",close:"24:00",isOpen:!0},tuesday:{open:"09:00",close:"24:00",isOpen:!0},wednesday:{open:"09:00",close:"24:00",isOpen:!0},thursday:{open:"09:00",close:"24:00",isOpen:!0},friday:{open:"09:00",close:"24:00",isOpen:!0},saturday:{open:"09:00",close:"24:00",isOpen:!0},sunday:{open:"09:00",close:"24:00",isOpen:!0}},capacity:{seatingCapacity:120,kitchenCapacity:40,storageCapacity:180,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway","Food Court"],timezone:"Asia/Kuwait",notes:"Food court outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-004",outletCode:"TH001",outletName:"Taiba Hospital",outletType:"Drive-Thru",description:"Drive-thru outlet at Taiba Hospital",address:{street:"Taiba Hospital, Ground Floor",city:"Kuwait City",state:"Kuwait",zipCode:"12348",country:"Kuwait"},contactInfo:{phone:"+965-4567-8901",email:"taiba@localbeat.com",managerName:"Fatima Al-Zahra",managerPhone:"+965-4567-8902",managerEmail:"fatima@localbeat.com"},operatingHours:{monday:{open:"06:00",close:"02:00",isOpen:!0},tuesday:{open:"06:00",close:"02:00",isOpen:!0},wednesday:{open:"06:00",close:"02:00",isOpen:!0},thursday:{open:"06:00",close:"02:00",isOpen:!0},friday:{open:"06:00",close:"02:00",isOpen:!0},saturday:{open:"06:00",close:"02:00",isOpen:!0},sunday:{open:"06:00",close:"02:00",isOpen:!0}},capacity:{seatingCapacity:20,kitchenCapacity:25,storageCapacity:100,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Drive-Thru","Takeaway"],timezone:"Asia/Kuwait",notes:"Hospital drive-thru outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-005",outletCode:"CK001",outletName:"Central Kitchen",outletType:"Central Kitchen",description:"Central kitchen for all outlets",address:{street:"Industrial Area, Block 5",city:"Kuwait City",state:"Kuwait",zipCode:"12349",country:"Kuwait"},contactInfo:{phone:"+965-5678-9012",email:"central@localbeat.com",managerName:"Chef Abdullah",managerPhone:"+965-5678-9013",managerEmail:"chef@localbeat.com"},operatingHours:{monday:{open:"05:00",close:"23:00",isOpen:!0},tuesday:{open:"05:00",close:"23:00",isOpen:!0},wednesday:{open:"05:00",close:"23:00",isOpen:!0},thursday:{open:"05:00",close:"23:00",isOpen:!0},friday:{open:"05:00",close:"23:00",isOpen:!0},saturday:{open:"05:00",close:"23:00",isOpen:!0},sunday:{open:"05:00",close:"23:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:200,storageCapacity:500,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!0,features:["Production","Storage","Distribution"],timezone:"Asia/Kuwait",notes:"Central kitchen for all outlets",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"}];console.log("Loaded Outlets:",k),r(k)}catch(k){o(k instanceof Error?k.message:"Failed to load outlets"),console.error("Error loading outlets:",k)}finally{s(!1)}},O=async k=>{if(window.confirm("Are you sure you want to delete this outlet?"))try{(await ce.deleteOutlet(k)).success?await j():alert("Failed to delete outlet")}catch(A){alert("Error deleting outlet: "+(A instanceof Error?A.message:"Unknown error")),console.error("Error deleting outlet:",A)}},_=()=>{c(""),d(""),m(""),y(""),b("createdAt"),S("desc"),j()},E=k=>{switch(k){case"Active":return"bg-green-100 text-green-800";case"Inactive":return"bg-gray-100 text-gray-800";case"Maintenance":return"bg-yellow-100 text-yellow-800";case"Closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=k=>{switch(k){case"Restaurant":return"bg-blue-100 text-blue-800";case"Cafe":return"bg-purple-100 text-purple-800";case"Food Court":return"bg-orange-100 text-orange-800";case"Drive-Thru":return"bg-green-100 text-green-800";case"Takeaway":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading outlets..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:j,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Outlet Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage restaurant outlets and central kitchen operations"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:j,className:"btn-secondary flex items-center",title:"Refresh outlets",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/outlets/add"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Outlet"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search outlets by name, code, city, or manager...",className:"input-field pl-10",value:l,onChange:k=>c(k.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:_,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsxs("select",{className:"input-field",value:u,onChange:k=>d(k.target.value),children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"Restaurant",children:"Restaurant"}),n.jsx("option",{value:"Cafe",children:"Cafe"}),n.jsx("option",{value:"Food Court",children:"Food Court"}),n.jsx("option",{value:"Drive-Thru",children:"Drive-Thru"}),n.jsx("option",{value:"Takeaway",children:"Takeaway"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:f,onChange:k=>m(k.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Maintenance",children:"Maintenance"}),n.jsx("option",{value:"Closed",children:"Closed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Type"}),n.jsxs("select",{className:"input-field",value:p,onChange:k=>y(k.target.value),children:[n.jsx("option",{value:"",children:"All Kitchens"}),n.jsx("option",{value:"true",children:"Central Kitchen"}),n.jsx("option",{value:"false",children:"Regular Outlet"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:h,onChange:k=>b(k.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"outletName",children:"Outlet Name"}),n.jsx("option",{value:"outletCode",children:"Outlet Code"}),n.jsx("option",{value:"outletType",children:"Outlet Type"}),n.jsx("option",{value:"status",children:"Status"})]}),n.jsx("button",{onClick:()=>S(N==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${N==="asc"?"Descending":"Ascending"}`,children:N==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",t.length," outlets",(l||u||f||p)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(l||u||f||p)&&n.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Outlet Code"}),n.jsx("th",{className:"table-header",children:"Outlet Name"}),n.jsx("th",{className:"table-header",children:"Type"}),n.jsx("th",{className:"table-header",children:"Location"}),n.jsx("th",{className:"table-header",children:"Manager"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Kitchen Type"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:k.outletCode}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:k.outletName}),n.jsx("div",{className:"text-gray-500 text-sm max-w-xs truncate",children:k.description})]})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(k.outletType)}`,children:k.outletType})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[n.jsx(Cd,{className:"h-4 w-4 mr-1"}),n.jsxs("span",{children:[k.address.city,", ",k.address.state]})]})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:k.contactInfo.managerName}),n.jsx("div",{className:"text-gray-500 text-sm",children:k.contactInfo.phone})]})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(k.status)}`,children:k.status})}),n.jsx("td",{className:"table-cell",children:k.isCentralKitchen?n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:" Central Kitchen"}):n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Regular Outlet"})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>{x(k),w(!0)},className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(zi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/outlets/edit/${k.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>O(k.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},k.id))})]})})}),g&&v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Outlet Details"}),n.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code"}),n.jsx("p",{className:"text-gray-900 font-mono",children:v.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name"}),n.jsx("p",{className:"text-gray-900",children:v.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(v.outletType)}`,children:v.outletType})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(v.status)}`,children:v.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Type"}),v.isCentralKitchen?n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:" Central Kitchen"}):n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Regular Outlet"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("p",{className:"text-gray-900",children:v.timezone})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),n.jsxs("p",{className:"text-gray-900",children:[v.address.street,n.jsx("br",{}),v.address.city,", ",v.address.state," ",v.address.zipCode,n.jsx("br",{}),v.address.country]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("p",{className:"text-gray-900",children:v.contactInfo.managerPhone||"N/A"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(Rb,{className:"h-6 w-6 mx-auto text-blue-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Seating"}),n.jsx("p",{className:"text-lg font-semibold text-blue-600",children:v.capacity.seatingCapacity})]}),n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(En,{className:"h-6 w-6 mx-auto text-green-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Kitchen"}),n.jsx("p",{className:"text-lg font-semibold text-green-600",children:v.capacity.kitchenCapacity})]}),n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(Cd,{className:"h-6 w-6 mx-auto text-purple-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Storage"}),n.jsx("p",{className:"text-lg font-semibold text-purple-600",children:v.capacity.storageCapacity})]})]})]}),v.features.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:v.features.map((k,A)=>n.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:k},A))})]}),v.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("p",{className:"text-gray-900",children:v.notes})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>w(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{w(!1),e(`/outlets/edit/${v.id}`)},className:"btn-primary",children:"Edit Outlet"})]})]})})]})},fce=()=>{const e=lt(),[t,r]=C.useState({outletCode:"",outletName:"",outletType:"Restaurant",description:"",address:{street:"",city:"",state:"",zipCode:"",country:"Kuwait"},contactInfo:{phone:"",email:"",managerName:"",managerPhone:"",managerEmail:""},operatingHours:{monday:{open:"09:00",close:"22:00",isOpen:!0},tuesday:{open:"09:00",close:"22:00",isOpen:!0},wednesday:{open:"09:00",close:"22:00",isOpen:!0},thursday:{open:"09:00",close:"22:00",isOpen:!0},friday:{open:"09:00",close:"22:00",isOpen:!0},saturday:{open:"09:00",close:"22:00",isOpen:!0},sunday:{open:"09:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:0,storageCapacity:0,capacityUnit:"SQM"},status:"Active",isCentralKitchen:!1,features:[],timezone:"Asia/Kuwait",notes:""}),[a,s]=C.useState({}),[i,o]=C.useState(!1),l=["Restaurant","Cafe","Food Court","Drive-Thru","Takeaway"],c=["Active","Inactive","Maintenance","Closed"],u=["SQM","CBM","KG","TON"],d=["Delivery","Takeaway","Dine-in","Drive-thru","Online Ordering","Catering"],f=()=>{const h={};return t.outletCode.trim()||(h.outletCode="Outlet code is required"),t.outletName.trim()||(h.outletName="Outlet name is required"),t.address.street.trim()||(h.street="Street address is required"),t.address.city.trim()||(h.city="City is required"),t.contactInfo.phone.trim()||(h.phone="Phone number is required"),t.contactInfo.email.trim()||(h.email="Email is required"),t.contactInfo.managerName.trim()||(h.managerName="Manager name is required"),s(h),Object.keys(h).length===0},m=async h=>{if(h.preventDefault(),!!f()){o(!0);try{(await ce.createOutlet(t)).success?(alert("Outlet created successfully!"),e("/outlets")):alert("Failed to create outlet")}catch(b){alert("Error creating outlet: "+(b instanceof Error?b.message:"Unknown error")),console.error("Error creating outlet:",b)}finally{o(!1)}}},p=(h,b)=>{if(h.includes(".")){const[N,S]=h.split(".");r(v=>({...v,[N]:{...v[N]||{},[S]:b}}))}else r(N=>({...N,[h]:b}));a[h]&&s(N=>({...N,[h]:""}))},y=h=>{r(b=>({...b,features:b.features.includes(h)?b.features.filter(N=>N!==h):[...b.features,h]}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/outlets"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Outlets"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Outlet"}),n.jsx("p",{className:"text-gray-600",children:"Create a new restaurant outlet or central kitchen"})]})]})}),n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.outletCode?"border-red-500":""}`,value:t.outletCode,onChange:h=>p("outletCode",h.target.value.toUpperCase()),placeholder:"OUTLET-001"}),a.outletCode&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.outletName?"border-red-500":""}`,value:t.outletName,onChange:h=>p("outletName",h.target.value),placeholder:"Downtown Restaurant"}),a.outletName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("select",{className:"input-field",value:t.outletType,onChange:h=>p("outletType",h.target.value),children:l.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:h=>p("status",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.description,onChange:h=>p("description",h.target.value),placeholder:"Brief description of the outlet..."})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isCentralKitchen",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:t.isCentralKitchen,onChange:h=>p("isCentralKitchen",h.target.checked)}),n.jsx("label",{htmlFor:"isCentralKitchen",className:"ml-2 block text-sm text-gray-900",children:"This is a Central Kitchen"})]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),n.jsx("input",{type:"text",className:`input-field ${a.street?"border-red-500":""}`,value:t.address.street,onChange:h=>p("address.street",h.target.value),placeholder:"123 Main Street"}),a.street&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${a.city?"border-red-500":""}`,value:t.address.city,onChange:h=>p("address.city",h.target.value),placeholder:"Kuwait City"}),a.city&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.state,onChange:h=>p("address.state",h.target.value),placeholder:"Kuwait"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.zipCode,onChange:h=>p("address.zipCode",h.target.value),placeholder:"12345"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.country,onChange:h=>p("address.country",h.target.value),placeholder:"Kuwait"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${a.phone?"border-red-500":""}`,value:t.contactInfo.phone,onChange:h=>p("contactInfo.phone",h.target.value),placeholder:"+965 1234 5678"}),a.phone&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.email?"border-red-500":""}`,value:t.contactInfo.email,onChange:h=>p("contactInfo.email",h.target.value),placeholder:"outlet@restaurant.com"}),a.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.managerName?"border-red-500":""}`,value:t.contactInfo.managerName,onChange:h=>p("contactInfo.managerName",h.target.value),placeholder:"John Smith"}),a.managerName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("input",{type:"tel",className:"input-field",value:t.contactInfo.managerPhone,onChange:h=>p("contactInfo.managerPhone",h.target.value),placeholder:"+965 9876 5432"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Email"}),n.jsx("input",{type:"email",className:"input-field",value:t.contactInfo.managerEmail,onChange:h=>p("contactInfo.managerEmail",h.target.value),placeholder:"manager@restaurant.com"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Capacity & Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seating Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.seatingCapacity,onChange:h=>p("capacity.seatingCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.kitchenCapacity,onChange:h=>p("capacity.kitchenCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.storageCapacity,onChange:h=>p("capacity.storageCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity Unit"}),n.jsx("select",{className:"input-field",value:t.capacity.capacityUnit,onChange:h=>p("capacity.capacityUnit",h.target.value),children:u.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(h=>n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:t.features.includes(h),onChange:()=>y(h)}),n.jsx("span",{className:"ml-2 text-sm text-gray-900",children:h})]},h))})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:t.timezone,onChange:h=>p("timezone",h.target.value),placeholder:"Asia/Kuwait"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:h=>p("notes",h.target.value),placeholder:"Additional notes about the outlet..."})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/outlets"),className:"btn-secondary",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Outlet"]})})]})]})]})},mce=()=>{const e=lt(),{id:t}=Vi(),[r,a]=C.useState({outletCode:"",outletName:"",outletType:"Restaurant",description:"",address:{street:"",city:"",state:"",zipCode:"",country:"Kuwait"},contactInfo:{phone:"",email:"",managerName:"",managerPhone:"",managerEmail:""},operatingHours:{monday:{open:"09:00",close:"22:00",isOpen:!0},tuesday:{open:"09:00",close:"22:00",isOpen:!0},wednesday:{open:"09:00",close:"22:00",isOpen:!0},thursday:{open:"09:00",close:"22:00",isOpen:!0},friday:{open:"09:00",close:"22:00",isOpen:!0},saturday:{open:"09:00",close:"22:00",isOpen:!0},sunday:{open:"09:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:0,storageCapacity:0,capacityUnit:"SQM"},status:"Active",isCentralKitchen:!1,features:[],timezone:"Asia/Kuwait",notes:""}),[s,i]=C.useState({}),[o,l]=C.useState(!1),[c,u]=C.useState(!0),d=["Restaurant","Cafe","Food Court","Drive-Thru","Takeaway"],f=["Active","Inactive","Maintenance","Closed"],m=["SQM","CBM","KG","TON"],p=["Delivery","Takeaway","Dine-in","Drive-thru","Online Ordering","Catering"];C.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{u(!0);const v=await ce.getOutlet(t);v.success?a(v.data):(alert("Failed to load outlet"),e("/outlets"))}catch(v){alert("Error loading outlet: "+(v instanceof Error?v.message:"Unknown error")),e("/outlets")}finally{u(!1)}},h=()=>{const v={};return r.outletCode.trim()||(v.outletCode="Outlet code is required"),r.outletName.trim()||(v.outletName="Outlet name is required"),r.address.street.trim()||(v.street="Street address is required"),r.address.city.trim()||(v.city="City is required"),r.contactInfo.phone.trim()||(v.phone="Phone number is required"),r.contactInfo.email.trim()||(v.email="Email is required"),r.contactInfo.managerName.trim()||(v.managerName="Manager name is required"),i(v),Object.keys(v).length===0},b=async v=>{if(v.preventDefault(),!!h()){l(!0);try{(await ce.updateOutlet(t,r)).success?(alert("Outlet updated successfully!"),e("/outlets")):alert("Failed to update outlet")}catch(x){alert("Error updating outlet: "+(x instanceof Error?x.message:"Unknown error")),console.error("Error updating outlet:",x)}finally{l(!1)}}},N=(v,x)=>{if(v.includes(".")){const[g,w]=v.split(".");a(j=>({...j,[g]:{...j[g]||{},[w]:x}}))}else a(g=>({...g,[v]:x}));s[v]&&i(g=>({...g,[v]:""}))},S=v=>{a(x=>({...x,features:x.features.includes(v)?x.features.filter(g=>g!==v):[...x.features,v]}))};return c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading outlet..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/outlets"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Outlets"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Outlet"}),n.jsx("p",{className:"text-gray-600",children:"Update outlet information"})]})]})}),n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.outletCode?"border-red-500":""}`,value:r.outletCode,onChange:v=>N("outletCode",v.target.value.toUpperCase()),placeholder:"OUTLET-001"}),s.outletCode&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.outletName?"border-red-500":""}`,value:r.outletName,onChange:v=>N("outletName",v.target.value),placeholder:"Downtown Restaurant"}),s.outletName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("select",{className:"input-field",value:r.outletType,onChange:v=>N("outletType",v.target.value),children:d.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:v=>N("status",v.target.value),children:f.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.description,onChange:v=>N("description",v.target.value),placeholder:"Brief description of the outlet..."})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isCentralKitchen",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:r.isCentralKitchen,onChange:v=>N("isCentralKitchen",v.target.checked)}),n.jsx("label",{htmlFor:"isCentralKitchen",className:"ml-2 block text-sm text-gray-900",children:"This is a Central Kitchen"})]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),n.jsx("input",{type:"text",className:`input-field ${s.street?"border-red-500":""}`,value:r.address.street,onChange:v=>N("address.street",v.target.value),placeholder:"123 Main Street"}),s.street&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${s.city?"border-red-500":""}`,value:r.address.city,onChange:v=>N("address.city",v.target.value),placeholder:"Kuwait City"}),s.city&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.state,onChange:v=>N("address.state",v.target.value),placeholder:"Kuwait"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.zipCode,onChange:v=>N("address.zipCode",v.target.value),placeholder:"12345"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.country,onChange:v=>N("address.country",v.target.value),placeholder:"Kuwait"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${s.phone?"border-red-500":""}`,value:r.contactInfo.phone,onChange:v=>N("contactInfo.phone",v.target.value),placeholder:"+965 1234 5678"}),s.phone&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.email?"border-red-500":""}`,value:r.contactInfo.email,onChange:v=>N("contactInfo.email",v.target.value),placeholder:"outlet@restaurant.com"}),s.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.managerName?"border-red-500":""}`,value:r.contactInfo.managerName,onChange:v=>N("contactInfo.managerName",v.target.value),placeholder:"John Smith"}),s.managerName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("input",{type:"tel",className:"input-field",value:r.contactInfo.managerPhone,onChange:v=>N("contactInfo.managerPhone",v.target.value),placeholder:"+965 9876 5432"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Email"}),n.jsx("input",{type:"email",className:"input-field",value:r.contactInfo.managerEmail,onChange:v=>N("contactInfo.managerEmail",v.target.value),placeholder:"manager@restaurant.com"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Capacity & Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seating Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.seatingCapacity,onChange:v=>N("capacity.seatingCapacity",parseInt(v.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.kitchenCapacity,onChange:v=>N("capacity.kitchenCapacity",parseInt(v.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.storageCapacity,onChange:v=>N("capacity.storageCapacity",parseInt(v.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity Unit"}),n.jsx("select",{className:"input-field",value:r.capacity.capacityUnit,onChange:v=>N("capacity.capacityUnit",v.target.value),children:m.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(v=>n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:r.features.includes(v),onChange:()=>S(v)}),n.jsx("span",{className:"ml-2 text-sm text-gray-900",children:v})]},v))})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:r.timezone,onChange:v=>N("timezone",v.target.value),placeholder:"Asia/Kuwait"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:v=>N("notes",v.target.value),placeholder:"Additional notes about the outlet..."})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/outlets"),className:"btn-secondary",disabled:o,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):n.jsxs(n.Fragment,{children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Update Outlet"]})})]})]})]})},hce=()=>{const e=lt(),[t,r]=C.useState(null),[a,s]=C.useState(!0),[i,o]=C.useState(null),{notifications:l,markAsRead:c,markAllAsRead:u,clearAll:d}=Js("Central Kitchen");C.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0),o(null);const m=await ce.getCentralKitchens();if(m.success&&m.data.length>0){const p=m.data[0];r(p)}else o("Central Kitchen not found")}catch(m){o(m instanceof Error?m.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",m)}finally{s(!1)}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Central Kitchen..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:f,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Central Kitchen"}),n.jsxs("p",{className:"text-gray-600",children:["Main production facility - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:f,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(Zi,{notifications:l,onMarkAsRead:c,onMarkAllAsRead:u,onClearAll:d})]})]}),n.jsx("div",{className:"card p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t==null?void 0:t.outletName}),n.jsx("p",{className:"text-gray-600",children:"Central Kitchen Operations"}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Rb,{className:"h-4 w-4 mr-1"}),"Production Facility"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(px,{className:"h-4 w-4 mr-1"}),"24/7 Operations"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-1"}),"Distribution Hub"]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t==null?void 0:t.outletCode}),n.jsx("div",{className:"text-sm text-gray-500",children:"Central Kitchen"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Material Inventory"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Nl,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Good Inventory"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/make-finished-good"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Lb,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Make Finished Good"}),n.jsx("p",{className:"text-gray-600",children:"Create finished goods from raw materials"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/create-transfer"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(ta,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Transfer"}),n.jsx("p",{className:"text-gray-600",children:"Transfer inventory to outlets"})]})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>e("/central-kitchen/add-item"),className:"btn-primary flex items-center justify-center",children:[n.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Inventory Item"]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center justify-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"View All Transfers"]}),n.jsxs("button",{onClick:()=>e("/sales-orders"),className:"btn-secondary flex items-center justify-center",children:[n.jsx(En,{className:"h-4 w-4 mr-2"}),"View Sales Orders"]})]})]})]})},XP=({isOpen:e,onClose:t,onConfirm:r,onCancel:a,title:s,message:i,type:o="info",confirmText:l="OK",cancelText:c="Cancel",showCancel:u=!1})=>{if(!e)return null;const d=()=>{switch(o){case"success":return n.jsx(Ib,{className:"h-6 w-6 text-green-600"});case"warning":return n.jsx($o,{className:"h-6 w-6 text-yellow-600"});case"error":return n.jsx(Db,{className:"h-6 w-6 text-red-600"});default:return n.jsx(hE,{className:"h-6 w-6 text-blue-600"})}},f=()=>{switch(o){case"success":return"bg-green-600 hover:bg-green-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"error":return"bg-red-600 hover:bg-red-700 text-white";default:return"bg-blue-600 hover:bg-blue-700 text-white"}},m=()=>{r&&r(),t()},p=()=>{a&&a(),t()};return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),n.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[n.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:n.jsxs("div",{className:"sm:flex sm:items-start",children:[n.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 sm:mx-0 sm:h-10 sm:w-10",children:d()}),n.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s}),n.jsx("div",{className:"mt-2",children:n.jsx("p",{className:"text-sm text-gray-500 whitespace-pre-line",children:i})})]})]})}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[u&&n.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:p,children:c}),n.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm ${f()}`,onClick:m,children:l})]})]})]})})},Zc=({isOpen:e,onClose:t,transferOrder:r,onAccept:a,onReject:s,loading:i=!1})=>{const[o,l]=C.useState([]),[c,u]=C.useState(null),[d,f]=C.useState(""),[m,p]=C.useState("");if(C.useEffect(()=>{r&&(l(r.items.map(E=>({...E}))),p(r.notes||""))},[r]),!e||!r)return null;const y=r.status==="Approved"||r.status==="Rejected",h=E=>{switch(E){case"Urgent":return"bg-red-100 text-red-800 border-red-200";case"High":return"bg-orange-100 text-orange-800 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},b=r.status==="Pending"||r.status==="Approved by Central Kitchen",N=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),S=E=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD"}).format(E),v=E=>{const T=o[E];u(E),f(T.quantity.toString())},x=E=>{const T=parseInt(d,10);if(isNaN(T)||T<0){alert("Please enter a valid whole number (must be 0 or greater)");return}if(d.includes(".")||d.includes(",")){alert("Please enter a whole number only (no decimal values allowed)");return}const k=[...o],A=k[E],P=r.items[E].quantity;if(T>P){alert(`Cannot exceed original requested quantity of ${P} ${A.unitOfMeasure}. You can only decrease the quantity.`);return}A.quantity=T,A.totalPrice=T*A.unitPrice,A.totalValue=T*A.unitPrice,l(k),u(null),f("")},g=E=>{const T=E.replace(/[^0-9]/g,"");f(T)},w=E=>{const T=r.items[E].quantity,k=parseInt(d,10)||0;if(k<T){const A=k+1;f(A.toString())}},j=E=>{const T=parseInt(d,10)||0;if(T>0){const k=T-1;f(k.toString())}},O=()=>{u(null),f("")},_=()=>o.reduce((E,T)=>E+(T.totalPrice||T.totalValue||T.quantity*T.unitPrice),0);return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ta,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Order Details"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Order #",r.transferNumber]})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:`p-3 rounded-md border ${b?"bg-yellow-50 border-yellow-200 text-yellow-800":r.status==="Approved"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:["Status: ",r.status]}),n.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(En,{className:"h-5 w-5 text-blue-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"From Outlet"})]}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Outlet:"}),n.jsx("span",{className:"ml-2 text-gray-900",children:r.fromOutlet.name})]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Hy,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Transfer Date"})]}),n.jsx("p",{className:"text-gray-900",children:N(r.transferDate)})]}),n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Db,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Priority"})]}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(r.priority)}`,children:r.priority})]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Fi,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Requested By"})]}),n.jsx("p",{className:"text-gray-900",children:r.requestedBy}),n.jsx("p",{className:"text-xs text-gray-500",children:N(r.requestedAt||r.transferDate)})]})}),n.jsxs("div",{className:"card p-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Notes (Optional)"}),n.jsx("textarea",{value:m,onChange:E=>p(E.target.value),placeholder:"Add any notes or comments about this transfer order...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,disabled:i}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes will be included in the Zoho Inventory transfer order description"})]}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transfer Items"}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approved Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.items.map((E,T)=>{const k=o[T]||E,A=c===T,P=k.quantity!==E.quantity;return n.jsxs("tr",{className:`hover:bg-gray-50 ${P?"bg-yellow-50":""}`,children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.itemCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:E.itemName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E.itemType==="Raw Material"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:E.itemType==="Raw Material"?"Raw Material":"Finished Goods"})}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:[E.category||"-",E.subCategory&&n.jsx("div",{className:"text-xs text-gray-400",children:E.subCategory})]}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:[E.quantity," ",E.unitOfMeasure]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{type:"button",onClick:()=>j(),disabled:parseInt(d,10)<=0,className:`p-1 rounded border transition-colors ${parseInt(d,10)<=0?"bg-gray-100 text-gray-400 border-gray-300 cursor-not-allowed":"bg-red-50 text-red-600 border-red-300 hover:bg-red-100 hover:border-red-400"}`,title:"Decrease quantity",children:n.jsx(i8,{className:"h-4 w-4"})}),n.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",min:"0",max:E.quantity,value:d,onChange:M=>g(M.target.value),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:M=>{if(M.key==="."||M.key===","||M.key==="-"||M.key==="e"||M.key==="E"||M.key==="+"){M.preventDefault();return}M.key==="Enter"?x(T):M.key==="Escape"&&O()},onBlur:()=>{const M=parseInt(d,10);isNaN(M)||M<0?f("0"):M>E.quantity&&f(E.quantity.toString())},autoFocus:!0,title:`Enter a whole number between 0 and ${E.quantity} (cannot exceed original)`}),n.jsx("button",{type:"button",onClick:()=>w(T),disabled:parseInt(d,10)>=E.quantity,className:`p-1 rounded border transition-colors ${parseInt(d,10)>=E.quantity?"bg-gray-100 text-gray-400 border-gray-300 cursor-not-allowed":"bg-green-50 text-green-600 border-green-300 hover:bg-green-100 hover:border-green-400"}`,title:"Increase quantity (max: original requested quantity)",children:n.jsx(kt,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-xs text-gray-500 ml-1",children:E.unitOfMeasure}),n.jsx("button",{onClick:()=>x(T),className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-100 rounded transition-colors",title:"Save",children:n.jsx(JR,{className:"h-4 w-4"})}),n.jsx("button",{onClick:O,className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",title:"Cancel",children:n.jsx(l8,{className:"h-4 w-4"})})]}):n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:`text-sm font-medium ${P?"text-yellow-700":"text-gray-900"}`,children:[k.quantity," ",E.unitOfMeasure]}),P&&n.jsx("span",{className:"text-xs text-yellow-600 bg-yellow-100 px-2 py-0.5 rounded",children:"Modified"}),!y&&n.jsx("button",{onClick:()=>v(T),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded transition-colors",title:"Edit quantity",children:n.jsx(o8,{className:"h-4 w-4"})})]})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:S(E.unitPrice)}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S(k.totalPrice||k.totalValue||k.quantity*k.unitPrice)})]},T)})})]}),n.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Original Total:"}),n.jsx("span",{className:"text-sm text-gray-500",children:S(r.totalAmount||r.totalValue||0)})]}),n.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 pt-2",children:[n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Approved Total:"}),n.jsx("span",{className:`text-xl font-bold ${_()!==(r.totalAmount||r.totalValue||0)?"text-yellow-700":"text-gray-900"}`,children:S(_())})]}),_()!==(r.totalAmount||r.totalValue||0)&&n.jsxs("div",{className:"text-xs text-yellow-600 bg-yellow-50 p-2 rounded",children:[n.jsx("strong",{children:"Note:"})," Quantities have been modified. Only the approved quantities will be transferred."]})]})]})]})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Review the transfer order details before making a decision"}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",disabled:i,children:"Close"}),n.jsx("button",{onClick:()=>{const E=r._id||r.id||"";console.log("TransferOrderModal: Reject button clicked"),console.log("TransferOrderModal: transferOrder._id =",r._id),console.log("TransferOrderModal: transferOrder.id =",r.id),console.log("TransferOrderModal: Using transferOrderId =",E),s(E)},className:"px-4 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors disabled:opacity-50",disabled:i||!b,children:b?i?"Processing...":"Reject Order":"Rejected"}),n.jsx("button",{onClick:()=>{const E=r._id||r.id||"";console.log("TransferOrderModal: Accept button clicked"),console.log("TransferOrderModal: transferOrder._id =",r._id),console.log("TransferOrderModal: transferOrder.id =",r.id),console.log("TransferOrderModal: Using transferOrderId =",E),console.log("TransferOrderModal: Edited items:",o),console.log("TransferOrderModal: Transfer notes:",m),o.some((k,A)=>k.quantity!==r.items[A].quantity)?a(E,o,m.trim()||void 0):a(E,void 0,m.trim()||void 0)},className:"px-4 py-2 text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors disabled:opacity-50",disabled:i||!b,children:b?i?"Processing...":"Accept Order":"Approved"})]})]})]})})};function eu(e,t=500){const[r,a]=C.useState(e);return C.useEffect(()=>{const s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const xce=()=>{const e=C.useRef(null),{confirmation:t,closeConfirmation:r}=zw(),[a,s]=C.useState(null),[i,o]=C.useState([]),[l,c]=C.useState(!0),[u,d]=C.useState(null),[f,m]=C.useState(""),[p,y]=C.useState(""),[h,b]=C.useState(""),[N,S]=C.useState("materialName"),[v,x]=C.useState("asc"),[g,w]=C.useState(null),[j,O]=C.useState(!1),[_,E]=C.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[T,k]=C.useState(!1),[A,P]=C.useState(null),[M,U]=C.useState(!1),[W,Y]=C.useState(!1),[B,ae]=C.useState(!1),{notifications:oe,markAsRead:D,markAllAsRead:H,clearAll:G,refreshNotifications:Z}=Js("Central Kitchen"),[X,ie]=C.useState(1),[pe,ne]=C.useState(20),[ee,we]=C.useState(1),[F,Ue]=C.useState(0),R=eu(f,500),ve=oe.filter(ye=>{var te,ke,$e,q,z;return ye.isTransferOrder&&(ye.itemType==="Raw Material"||ye.itemType==="Mixed")&&(((te=ye.title)==null?void 0:te.includes("Transfer Request from Kuwait City"))||((ke=ye.title)==null?void 0:ke.includes("Transfer Request from 360 Mall"))||(($e=ye.title)==null?void 0:$e.includes("Transfer Request from Vibes Complex"))||((q=ye.title)==null?void 0:q.includes("Transfer Request from Taiba Hospital")))||((z=ye.title)==null?void 0:z.includes("Items Received from Ingredient Master"))&&ye.type==="success"});C.useEffect(()=>{console.log(" Central Kitchen: All notifications:",oe),console.log(" Central Kitchen: Filtered notifications:",ve),console.log(" Central Kitchen: Number of all notifications:",oe.length),console.log(" Central Kitchen: Number of filtered notifications:",ve.length)},[oe,ve]),C.useEffect(()=>{const ye=setInterval(()=>{console.log(" Central Kitchen Raw Materials: Auto-refreshing notifications..."),Z()},5e3);return()=>clearInterval(ye)},[Z]),C.useEffect(()=>{xe()},[]),C.useEffect(()=>{l||(ie(1),de())},[R,p,h,N,v]),C.useEffect(()=>{!l&&a&&de()},[X,pe]);const xe=async()=>{try{c(!0),d(null);const ye=await ce.getCentralKitchens();if(ye.success&&ye.data.length>0){const te=ye.data[0];s({id:te._id,outletCode:te.kitchenCode,outletName:te.kitchenName,outletType:"Central Kitchen",isCentralKitchen:!0}),await de()}else d("Central Kitchen not found")}catch(ye){d(ye instanceof Error?ye.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",ye)}finally{c(!1)}},de=async()=>{try{console.log("Loading raw materials from Central Kitchen dedicated database");const ye=await ce.getCentralKitchenRawMaterials({page:X,limit:pe,search:R,subCategory:p,status:h,sortBy:N==="materialName"?"materialName":N,sortOrder:v});if(ye.success)if(console.log("Loaded Central Kitchen Raw Materials:",ye.data),console.log("Pagination info:",ye.pagination),ye.pagination&&(we(ye.pagination.totalPages),Ue(ye.pagination.totalItems)),ye.data&&ye.data.length>0){const te=ye.data.map(ke=>({id:ke._id||ke.id,outletId:"central-kitchen",outletCode:"CK001",outletName:"Central Kitchen",materialId:ke._id,materialCode:ke.materialCode,materialName:ke.materialName,category:ke.subCategory,unitOfMeasure:ke.unitOfMeasure,unitPrice:ke.unitPrice,currentStock:ke.currentStock,reservedStock:0,availableStock:ke.currentStock,minimumStock:ke.minimumStock,maximumStock:ke.maximumStock,reorderPoint:ke.reorderPoint,totalValue:ke.currentStock*ke.unitPrice,location:"Main Storage",batchNumber:"",supplier:"",lastUpdated:ke.lastStockUpdate||ke.updatedAt,status:ke.status,notes:ke.notes||"",isActive:!0}));o(te)}else console.log("No raw materials inventory found for this central kitchen"),o([]);else console.error("Failed to load raw materials inventory:",ye.error||"API Error"),d(`Failed to load inventory from server: ${ye.error||"Unknown error"}`)}catch(ye){d(ye instanceof Error?ye.message:"Failed to load inventory"),console.error("Error loading inventory:",ye)}},Ve=()=>{m(""),y(""),b(""),S("materialName"),x("asc"),ie(1)},ft=ye=>{w(ye),E({currentStock:ye.currentStock.toString(),minimumStock:ye.minimumStock.toString(),maximumStock:ye.maximumStock.toString(),reorderPoint:ye.reorderPoint.toString(),unitPrice:ye.unitPrice.toString(),notes:ye.notes||""}),O(!0)},it=async()=>{if(g)try{c(!0);const ye={currentStock:parseFloat(_.currentStock)||0,minimumStock:parseFloat(_.minimumStock)||0,maximumStock:parseFloat(_.maximumStock)||0,reorderPoint:parseFloat(_.reorderPoint)||0,unitPrice:parseFloat(_.unitPrice)||0,notes:_.notes,updatedBy:"user"},te=await ce.updateCentralKitchenRawMaterial(g.id,ye);if(te.success)alert("Raw material updated successfully!"),O(!1),w(null),await de();else throw new Error(te.message||"Failed to update raw material")}catch(ye){console.error("Error updating raw material:",ye),alert(`Failed to update raw material: ${ye instanceof Error?ye.message:"Unknown error"}`)}finally{c(!1)}},mt=()=>{O(!1),w(null),E({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},ht=()=>{var ye;(ye=e.current)==null||ye.click()},He=async ye=>{var q;const te=(q=ye.target.files)==null?void 0:q[0];if(!te)return;const ke=te.name.toLowerCase().endsWith(".xlsx")||te.name.toLowerCase().endsWith(".xls"),$e=te.name.toLowerCase().endsWith(".csv");if(!ke&&!$e){alert("Please select an Excel (.xlsx, .xls) or CSV file");return}try{if(ae(!0),ke){const z=await ce.importCentralKitchenExcel(te);if(z.success){const{results:re}=z;let le=`Excel Import completed!

Total Rows: ${re.totalRows}
Processed: ${re.totalProcessed}
Created: ${re.created}
Updated: ${re.updated}
Skipped: ${re.skipped}
Errors: ${re.errors}`;re.skippedReasons&&re.skippedReasons.length>0&&(le+=`

Skipped Reasons:
${re.skippedReasons.join(`
`)}`),alert(le),await de()}else alert("Import failed: "+z.message)}else{const re=(await te.text()).split(`
`).filter(Ze=>Ze.trim());if(re.length<2){alert("CSV file must contain at least a header row and one data row");return}const le=re.slice(1);let _e=0,be=0;for(const Ze of le)try{const Te=Ze.split(",").map(ze=>ze.replace(/"/g,"").trim()),Ye={materialCode:Te[0],materialName:Te[1],category:Te[3],unitOfMeasure:Te[4],unitPrice:0,currentStock:0,minimumStock:0,maximumStock:0,supplier:"",notes:""},Dt={id:`rm-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,outletId:(a==null?void 0:a.id)||"central-kitchen-001",outletCode:(a==null?void 0:a.outletCode)||"",outletName:(a==null?void 0:a.outletName)||"",materialId:Ye.materialCode,materialCode:Ye.materialCode,materialName:Ye.materialName,category:Ye.category,unitOfMeasure:Ye.unitOfMeasure,unitPrice:Ye.unitPrice,currentStock:Ye.currentStock,reservedStock:0,availableStock:Ye.currentStock,minimumStock:Ye.minimumStock,maximumStock:Ye.maximumStock,reorderPoint:Math.ceil(Ye.minimumStock*1.5),totalValue:Ye.currentStock*Ye.unitPrice,location:"Main Storage",batchNumber:`BATCH-${Date.now()}`,supplier:Ye.supplier,lastUpdated:new Date().toISOString(),status:"In Stock",notes:Ye.notes,isActive:!0};o(ze=>[...ze,Dt]),_e++}catch{be++}alert(`CSV Import completed!

Successfully imported: ${_e} items
Errors: ${be}`)}}catch(z){alert("Error importing file: "+(z instanceof Error?z.message:"Unknown error"))}finally{ae(!1),e.current&&(e.current.value="")}},gt=async ye=>{try{console.log(" Central Kitchen Raw Materials: handleViewTransferOrder called with transferOrderId:",ye),U(!0);const te=await ce.getTransferOrderById(ye);if(te.success)P(te.data),k(!0),console.log(" Central Kitchen Raw Materials: Transfer order modal opened successfully");else throw new Error(te.message||"Failed to load transfer order")}catch(te){console.error("Error loading transfer order:",te),alert("Failed to load transfer order details")}finally{U(!1)}},Rt=async(ye,te,ke)=>{try{U(!0),console.log("Starting acceptance process for transfer order:",ye),console.log("Edited items:",te),console.log("Fetching transfer order details...");const $e=await ce.getTransferOrderById(ye);if(!$e.success)throw new Error($e.message||"Failed to fetch transfer order");const q=$e.data;console.log("Transfer order details:",q);const z={approvedBy:"Central Kitchen Manager",notes:ke||"Transfer order approved by Central Kitchen"};te&&te.length>0&&(z.editedItems=te,console.log("Including edited items in approval request:",te)),console.log("Approving transfer order...");let re;try{re=await ce.approveTransferOrder(ye,z),console.log("Approval response:",re)}catch(le){throw console.error("Approval failed:",le),new Error(`Approval failed: ${le instanceof Error?le.message:"Unknown error"}`)}if(re.success){const le=te&&te.some((_e,be)=>{var Ze;return _e.quantity!==((Ze=q.items[be])==null?void 0:Ze.quantity)});alert(`Transfer order accepted successfully!${le?" (Quantities modified)":""}`),k(!1),P(null),D(ye)}else throw new Error(`Failed to approve transfer order: ${re.message}`)}catch($e){console.error("Error accepting transfer order:",$e),console.error("Error details:",$e instanceof Error?$e.message:"Unknown error"),alert(`Failed to accept transfer order: ${$e instanceof Error?$e.message:"Unknown error"}`)}finally{U(!1)}},Gt=async ye=>{var te,ke,$e;try{U(!0),console.log("Starting rejection process for transfer order:",ye),console.log("Fetching transfer order details...");const q=await ce.getTransferOrderById(ye);if(!q.success)throw new Error(q.message||"Failed to fetch transfer order");const z=q.data;console.log("Transfer order details:",z),console.log("Updating transfer order inventory...");let re,le;try{le=await ce.updateTransferOrderInventory(ye,"reject"),console.log("Inventory update response:",le)}catch(_e){throw console.error("Inventory update failed:",_e),new Error(`Inventory update failed: ${_e instanceof Error?_e.message:"Unknown error"}`)}try{re=await ce.updateTransferOrderStatus(ye,{status:"Rejected",approvedBy:"Central Kitchen Manager",notes:"Transfer order rejected by Central Kitchen"}),console.log("Status update response:",re)}catch(_e){throw console.error("Status update failed:",_e),new Error(`Status update failed: ${_e instanceof Error?_e.message:"Unknown error"}`)}if(re.success&&le.success){const _e=((te=z.items[0])==null?void 0:te.itemType)||"Mixed",be=z.items.map(Ye=>`${Ye.itemName} (${Ye.quantity} ${Ye.unitOfMeasure||"pcs"})`).join(", "),Ze=typeof z.fromOutlet=="string"?z.fromOutlet:((ke=z.fromOutlet)==null?void 0:ke.outletName)||(($e=z.fromOutlet)==null?void 0:$e.name)||"Unknown Outlet";console.log("Creating notification for",Ze,"...");const Te=await ce.createNotification({title:"Transfer Order Rejected",message:`Transfer order #${z.transferNumber} has been rejected. Requested items: ${be}`,type:"transfer_rejection",targetOutlet:Ze,sourceOutlet:"Central Kitchen",transferOrderId:ye,itemType:_e,priority:"normal"});console.log("Notification response:",Te),alert(`Transfer order rejected and notification sent to ${Ze}`),k(!1),P(null),D(ye)}else throw new Error(`Failed to update transfer order status. Status: ${re.success}, Inventory: ${le.success}`)}catch(q){console.error("Error rejecting transfer order:",q),console.error("Error details:",q instanceof Error?q.message:"Unknown error"),alert(`Failed to reject transfer order: ${q instanceof Error?q.message:"Unknown error"}`)}finally{U(!1)}},Jt=async()=>{try{Y(!0),console.log("Starting export of raw materials..."),await ce.exportCentralKitchenRawMaterials({search:f,subCategory:p,status:h}),console.log("Export completed successfully")}catch(ye){console.error("Error exporting raw materials:",ye),alert(`Failed to export raw materials: ${ye instanceof Error?ye.message:"Unknown error"}`)}finally{Y(!1)}},Vt=i.reduce((ye,te)=>ye+te.totalValue,0),Ge=i.filter(ye=>ye.status==="Low Stock").length,Xe=i.filter(ye=>ye.status==="Out of Stock").length,jt=[...new Set(i.map(ye=>ye.category))];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Raw Materials..."})]})}):u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:u}),n.jsx("button",{onClick:xe,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Raw Material Inventory"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",a==null?void 0:a.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Jt,disabled:W,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),W?"Exporting...":"Export"]}),n.jsxs("button",{onClick:xe,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(Zi,{notifications:ve,onMarkAsRead:D,onMarkAllAsRead:H,onClearAll:G,onViewTransferOrder:gt,onRefresh:Z})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:F}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(across all pages)"})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(tt,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[Vt.toFixed(2)," KWD"]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx($o,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ge})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(wE,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Xe})]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",className:"input-field pl-10",value:f,onChange:ye=>m(ye.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:Ve,className:"btn-secondary flex items-center",title:"Clear all filters",children:"Clear Filters"}),n.jsx("button",{onClick:ht,disabled:B,className:`btn-secondary flex items-center ${B?"opacity-50 cursor-not-allowed":""}`,title:"Import inventory from Excel or CSV",children:B?n.jsxs(n.Fragment,{children:[n.jsx(ea,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Import"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:p,onChange:ye=>y(ye.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),jt.map(ye=>n.jsx("option",{value:ye,children:ye},ye))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:h,onChange:ye=>b(ye.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),n.jsx("option",{value:"Overstock",children:"Overstock"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:N,onChange:ye=>S(ye.target.value),children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastUpdated",children:"Last Updated"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",F>0?(X-1)*pe+1:0," - ",Math.min(X*pe,F)," of ",F," raw material items",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:pe,onChange:ye=>{ne(Number(ye.target.value)),ie(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]}),(f||p||h)&&n.jsx("button",{onClick:Ve,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})]}),n.jsxs("div",{className:"card overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Complete inventory list with all fields"})]})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-green-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(tt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No raw materials found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Raw materials inventory is empty"})]})})}):i.map(ye=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ye.materialCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:ye.materialName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ye.category}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ye.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",ye.unitPrice?Number(ye.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ye.currentStock}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>ft(ye),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:"Edit"})})]},ye.id))})]})}),ee>1&&n.jsx("div",{className:"px-4 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",X," of ",ee]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ie(1),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>ie(ye=>Math.max(1,ye-1)),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ee)},(ye,te)=>{let ke;return ee<=5||X<=3?ke=te+1:X>=ee-2?ke=ee-4+te:ke=X-2+te,n.jsx("button",{onClick:()=>ie(ke),className:`px-3 py-1 text-sm border rounded-md ${X===ke?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:ke},ke)})}),n.jsx("button",{onClick:()=>ie(ye=>Math.min(ee,ye+1)),disabled:X===ee,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>ie(ee),disabled:X===ee,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]}),B&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx(ea,{className:"h-8 w-8 animate-spin text-blue-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-center mb-2",children:"Importing Excel File"}),n.jsx("p",{className:"text-gray-600 text-center mb-4",children:"Please wait while we process your Excel file..."}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),n.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"This may take a few moments depending on file size"})]})}),n.jsx("input",{ref:e,type:"file",accept:".xlsx,.xls,.csv",onChange:He,style:{display:"none"}}),j&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Raw Material: ",g.materialName]}),n.jsx("button",{onClick:mt,className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.currentStock,onChange:ye=>E(te=>({...te,currentStock:ye.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.minimumStock,onChange:ye=>E(te=>({...te,minimumStock:ye.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.maximumStock,onChange:ye=>E(te=>({...te,maximumStock:ye.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reorder Point (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.reorderPoint,onChange:ye=>E(te=>({...te,reorderPoint:ye.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",value:_.unitPrice,onChange:ye=>E(te=>({...te,unitPrice:ye.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:_.notes,onChange:ye=>E(te=>({...te,notes:ye.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Optional notes..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:mt,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),n.jsx("button",{onClick:it,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Saving...":"Save Changes"})]})]})}),n.jsx(XP,{isOpen:t.isOpen,onClose:r,onConfirm:t.onConfirm,onCancel:t.onCancel,title:t.title,message:t.message,type:t.type,confirmText:t.confirmText,cancelText:t.cancelText,showCancel:t.showCancel}),n.jsx(Zc,{isOpen:T,onClose:()=>{k(!1),P(null)},transferOrder:A,onAccept:Rt,onReject:Gt,loading:M})]})},pce="modulepreload",gce=function(e){return"/"+e},wO={},cf=function(t,r,a){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=gce(i),i in wO)return;wO[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!a)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":pce,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},yce=()=>{const e=C.useRef(null),{confirmation:t,closeConfirmation:r}=zw(),[a,s]=C.useState(null),[i,o]=C.useState([]),[l,c]=C.useState(!0),[u,d]=C.useState(null),[f,m]=C.useState(""),[p,y]=C.useState(""),[h,b]=C.useState(""),[N,S]=C.useState("materialName"),[v,x]=C.useState("asc"),[g,w]=C.useState(null),[j,O]=C.useState(!1),[_,E]=C.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[T,k]=C.useState(!1),[A,P]=C.useState(null),[M,U]=C.useState(!1),[W,Y]=C.useState(!1),[B,ae]=C.useState(!1),{notifications:oe,markAsRead:D,markAllAsRead:H,clearAll:G,refreshNotifications:Z}=Js("Central Kitchen"),[X,ie]=C.useState(1),[pe,ne]=C.useState(20),[ee,we]=C.useState(1),[F,Ue]=C.useState(0),R=eu(f,500),ve=oe.filter(te=>{var ke,$e,q,z,re;return te.isTransferOrder&&(te.itemType==="Finished Goods"||te.itemType==="Mixed")&&(((ke=te.title)==null?void 0:ke.includes("Transfer Request from Kuwait City"))||(($e=te.title)==null?void 0:$e.includes("Transfer Request from 360 Mall"))||((q=te.title)==null?void 0:q.includes("Transfer Request from Vibes Complex"))||((z=te.title)==null?void 0:z.includes("Transfer Request from Taiba Hospital")))||((re=te.title)==null?void 0:re.includes("Items Received from Ingredient Master"))&&te.type==="success"});C.useEffect(()=>{console.log(" Central Kitchen Finished Goods: All notifications:",oe),console.log(" Central Kitchen Finished Goods: Filtered notifications:",ve),console.log(" Central Kitchen Finished Goods: Number of all notifications:",oe.length),console.log(" Central Kitchen Finished Goods: Number of filtered notifications:",ve.length)},[oe,ve]),C.useEffect(()=>{const te=setInterval(()=>{console.log(" Central Kitchen Finished Goods: Auto-refreshing notifications..."),Z()},5e3);return()=>clearInterval(te)},[Z]),C.useEffect(()=>{xe()},[]),C.useEffect(()=>{l||(ie(1),de())},[R,p,h,N,v]),C.useEffect(()=>{!l&&a&&de()},[X,pe]);const xe=async()=>{try{c(!0),d(null);const te=await ce.getCentralKitchens();if(te.success&&te.data&&Array.isArray(te.data)&&te.data.length>0){const ke=te.data[0];s({id:ke._id,outletCode:ke.kitchenCode,outletName:ke.kitchenName,outletType:"Central Kitchen",isCentralKitchen:!0}),await de()}else d("Central Kitchen not found")}catch(te){d(te instanceof Error?te.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",te)}finally{c(!1)}},de=async()=>{try{console.log("Loading finished goods from Central Kitchen dedicated database");const te=await ce.getCentralKitchenFinishedProducts({page:X,limit:pe,search:R,subCategory:p,status:h,sortBy:N==="materialName"?"productName":N,sortOrder:v});if(te.success)if(console.log("Loaded Central Kitchen Finished Goods:",te.data),console.log("Pagination info:",te.pagination),te.pagination&&(we(te.pagination.totalPages),Ue(te.pagination.totalItems)),te.data&&Array.isArray(te.data)&&te.data.length>0){const ke=te.data.map($e=>({id:$e._id||$e.id,outletId:"central-kitchen",outletCode:"CK001",outletName:"Central Kitchen",materialId:$e._id,materialCode:$e.productCode,materialName:$e.productName,category:$e.subCategory,unitOfMeasure:$e.unitOfMeasure,unitPrice:$e.unitPrice,currentStock:$e.currentStock,reservedStock:0,availableStock:$e.currentStock,minimumStock:$e.minimumStock,maximumStock:$e.maximumStock,reorderPoint:$e.reorderPoint,totalValue:$e.currentStock*$e.unitPrice,location:"Main Storage",batchNumber:"",supplier:"",lastUpdated:$e.lastStockUpdate||$e.updatedAt,status:$e.status,notes:$e.notes||"",isActive:!0}));o(ke)}else console.log("No finished goods inventory found for this central kitchen"),o([]);else console.error("Failed to load finished goods inventory:",te.error||"API Error"),d(`Failed to load inventory from server: ${te.error||"Unknown error"}`)}catch(te){d(te instanceof Error?te.message:"Failed to load inventory"),console.error("Error loading inventory:",te)}},Ve=()=>{m(""),y(""),b(""),S("materialName"),x("asc"),ie(1)},ft=te=>{w(te),E({currentStock:te.currentStock.toString(),minimumStock:te.minimumStock.toString(),maximumStock:te.maximumStock.toString(),reorderPoint:te.reorderPoint.toString(),unitPrice:te.unitPrice.toString(),notes:te.notes||""}),O(!0)},it=async()=>{if(g)try{c(!0);const te={currentStock:Number.parseFloat(_.currentStock)||0,minimumStock:Number.parseFloat(_.minimumStock)||0,maximumStock:Number.parseFloat(_.maximumStock)||0,reorderPoint:Number.parseFloat(_.reorderPoint)||0,unitPrice:Number.parseFloat(_.unitPrice)||0,notes:_.notes,updatedBy:"user"},ke=await ce.updateCentralKitchenFinishedProduct(g.id,te);if(ke.success)alert("Finished product updated successfully!"),O(!1),w(null),await de();else throw new Error(ke.message||"Failed to update finished product")}catch(te){console.error("Error updating finished product:",te),alert(`Failed to update finished product: ${te instanceof Error?te.message:"Unknown error"}`)}finally{c(!1)}},mt=()=>{O(!1),w(null),E({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},ht=()=>{var te;(te=e.current)==null||te.click()},He=async()=>{try{const te=[{SKU:"psk-001","Product Name":"Sample Finished Good","Sales Description":"Sample finished good description","Parent Category":"Finish Product","SubCategory Name":"MAIN COURSES",Unit:"piece","Unit Price":10.5,"Cost Price":7.25,"Current Quantity":100,"Minimum Stock":10,"Maximum Stock":500,"Reorder Point":25,Status:"Active",Description:"Sample product description",Notes:"Sample notes"}],ke=await cf(()=>Promise.resolve().then(()=>kf),void 0),$e=ke.utils.book_new(),q=ke.utils.json_to_sheet(te),z=[{wch:15},{wch:25},{wch:30},{wch:20},{wch:20},{wch:15},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:10},{wch:30},{wch:30}];q["!cols"]=z,ke.utils.book_append_sheet($e,q,"Finished Goods Template");const re=ke.write($e,{type:"array",bookType:"xlsx"}),le=new Blob([re],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),_e=window.URL.createObjectURL(le),be=document.createElement("a");be.href=_e,be.download="Central_Kitchen_Finished_Goods_Template.xlsx",document.body.appendChild(be),be.click(),window.URL.revokeObjectURL(_e),document.body.removeChild(be)}catch(te){console.error("Error downloading template:",te),alert("Error downloading template: "+(te instanceof Error?te.message:"Unknown error"))}},gt=async te=>{var z;const ke=(z=te.target.files)==null?void 0:z[0];if(!ke)return;const $e=[".xlsx",".xls",".csv"],q=ke.name.toLowerCase().substring(ke.name.lastIndexOf("."));if(!$e.includes(q)){alert("Please select an Excel file (.xlsx, .xls) or CSV file");return}try{ae(!0);let re=[],le=[];if(q===".csv"){const Ze=(await ke.text()).split(`
`).filter(Ye=>Ye.trim());if(Ze.length<2){alert("CSV file must contain at least a header row and one data row");return}re=Ze.slice(1).map((Ye,Dt)=>{try{if(!Ye||Ye.trim()==="")return null;const ze=Ye.split(",").map(Ot=>Ot.replace(/"/g,"").trim());return!ze[0]||!ze[1]||ze[0]===""||ze[1]===""?(le.push(`Row ${Dt+2}: Missing product code or name`),null):{productCode:String(ze[0]||"").trim(),productName:String(ze[1]||"").trim(),salesDescription:String(ze[2]||ze[1]||"").trim(),subCategory:String(ze[3]||"MAIN COURSES").trim(),unitOfMeasure:String(ze[4]||"piece").trim(),unitPrice:Number.parseFloat(ze[5]||"0")||0,costPrice:Number.parseFloat(ze[6]||"0")||0,currentStock:Number.parseFloat(ze[7]||"0")||0,minimumStock:Number.parseFloat(ze[8]||"5")||5,maximumStock:Number.parseFloat(ze[9]||"100")||100,reorderPoint:Number.parseFloat(ze[10]||"10")||10,status:String(ze[11]||"Active").trim(),description:String(ze[12]||"").trim(),notes:String(ze[13]||"").trim()}}catch(ze){return le.push(`Row ${Dt+2}: ${ze instanceof Error?ze.message:"Parse error"}`),null}}).filter(Boolean)}else{const be=await cf(()=>Promise.resolve().then(()=>kf),void 0),Ze=await ke.arrayBuffer(),Te=be.read(Ze,{type:"array"}),Ye=Te.SheetNames[0],Dt=Te.Sheets[Ye],ze=be.utils.sheet_to_json(Dt,{header:1});if(ze.length<2){alert("Excel file must contain at least a header row and one data row");return}const Ot=ze[0];re=ze.slice(1).map((Tt,zr)=>{try{if(!Tt||Tt.every(Ce=>!Ce||Ce===""))return null;const ct=Ce=>{const We=Ot.findIndex(I=>I&&I.toLowerCase().includes(Ce.toLowerCase()));return We>=0?String(Tt[We]||""):""},yr=ct("sku")||ct("product code")||"",ue=ct("product name")||ct("item name")||ct("sales description")||"";return!yr||!ue||yr===""||ue===""?(le.push(`Row ${zr+2}: Missing product code or name`),null):{productCode:String(yr||"").trim(),productName:String(ue||"").trim(),salesDescription:String(ct("sales description")||ue||ct("description")||"").trim(),subCategory:String(ct("subcategory name")||ct("subcategory")||ct("category")||"MAIN COURSES").trim(),unitOfMeasure:String(ct("unit")||ct("unit of measure")||"piece").trim(),unitPrice:Number.parseFloat(ct("unit price")||ct("price")||"0")||0,costPrice:Number.parseFloat(ct("cost price")||ct("cost")||"0")||0,currentStock:Number.parseFloat(ct("current quantity")||ct("current stock")||ct("quantity")||"0")||0,minimumStock:Number.parseFloat(ct("minimum stock")||"5")||5,maximumStock:Number.parseFloat(ct("maximum stock")||"100")||100,reorderPoint:Number.parseFloat(ct("reorder point")||"10")||10,status:String(ct("status")||"Active").trim(),description:String(ct("description")||"").trim(),notes:String(ct("notes")||"").trim()}}catch(ct){return le.push(`Row ${zr+2}: ${ct instanceof Error?ct.message:"Parse error"}`),null}}).filter(Boolean)}if(le.length>0){console.warn("Parse errors:",le);const be=`Found ${le.length} parsing errors:

${le.slice(0,10).join(`
`)}${le.length>10?`
... and ${le.length-10} more errors`:""}`;alert(be)}if(re.length===0){alert("No valid products found in the file. Please check that your file has the required columns: Product Code, Product Name");return}console.log(`Parsed ${re.length} products for import`);const _e=await ce.importCentralKitchenFinishedProducts(re);if(_e.success){const be=_e.data,Ze=(be==null?void 0:be.successCount)||0,Te=(be==null?void 0:be.errorCount)||0;let Ye=`Import completed!

Successfully imported: ${Ze} items
Errors: ${Te}`;be!=null&&be.errors&&be.errors.length>0&&(console.warn("Import errors:",be.errors),Ye+=`

First few errors:
${be.errors.slice(0,5).join(`
`)}`),alert(Ye),await de()}else throw new Error(_e.message||"Import failed")}catch(re){console.error("Error importing file:",re),alert("Error importing file: "+(re instanceof Error?re.message:"Unknown error"))}finally{ae(!1),e.current&&(e.current.value="")}},Rt=async te=>{try{console.log(" Central Kitchen Raw Materials: handleViewTransferOrder called with transferOrderId:",te),U(!0);const ke=await ce.getTransferOrderById(te);if(ke.success)P(ke.data),k(!0),console.log(" Central Kitchen Raw Materials: Transfer order modal opened successfully");else throw new Error(ke.message||"Failed to load transfer order")}catch(ke){console.error("Error loading transfer order:",ke),alert("Failed to load transfer order details")}finally{U(!1)}},Gt=async(te,ke,$e)=>{try{U(!0),console.log("Starting acceptance process for transfer order:",te),console.log("Edited items:",ke),console.log("Fetching transfer order details...");const q=await ce.getTransferOrderById(te);if(!q.success)throw new Error(q.message||"Failed to fetch transfer order");const z=q.data;console.log("Transfer order details:",z);const re={approvedBy:"Central Kitchen Manager",notes:$e||"Transfer order approved by Central Kitchen"};ke&&ke.length>0&&(re.editedItems=ke,console.log("Including edited items in approval request:",ke)),console.log("Approving transfer order...");let le;try{le=await ce.approveTransferOrder(te,re),console.log("Approval response:",le)}catch(_e){throw console.error("Approval failed:",_e),new Error(`Approval failed: ${_e instanceof Error?_e.message:"Unknown error"}`)}if(le.success){const _e=ke&&ke.some((be,Ze)=>{var Te;return be.quantity!==((Te=z.items[Ze])==null?void 0:Te.quantity)});alert(`Transfer order accepted successfully!${_e?" (Quantities modified)":""}`),k(!1),P(null),D(te)}else throw new Error(`Failed to approve transfer order: ${le.message}`)}catch(q){console.error("Error accepting transfer order:",q),console.error("Error details:",q instanceof Error?q.message:"Unknown error"),alert(`Failed to accept transfer order: ${q instanceof Error?q.message:"Unknown error"}`)}finally{U(!1)}},Jt=async te=>{try{U(!0),console.log("Starting rejection process for transfer order:",te),console.log("Fetching transfer order details...");const ke=await ce.getTransferOrderById(te);if(!ke.success)throw new Error(ke.message||"Failed to fetch transfer order");const $e=ke.data;console.log("Transfer order details:",$e),console.log("Rejecting transfer order...");let q;try{q=await ce.rejectTransferOrder(te,{approvedBy:"Central Kitchen Manager",notes:"Transfer order rejected by Central Kitchen"}),console.log("Rejection response:",q)}catch(z){throw console.error("Rejection failed:",z),new Error(`Rejection failed: ${z instanceof Error?z.message:"Unknown error"}`)}if(q.success)alert("Transfer order rejected successfully!"),k(!1),P(null),D(te);else throw new Error(`Failed to reject transfer order: ${q.message}`)}catch(ke){console.error("Error rejecting transfer order:",ke),console.error("Error details:",ke instanceof Error?ke.message:"Unknown error"),alert(`Failed to reject transfer order: ${ke instanceof Error?ke.message:"Unknown error"}`)}finally{U(!1)}},Vt=async()=>{try{Y(!0),console.log("Starting export of finished goods..."),await ce.exportCentralKitchenFinishedProducts({search:f,subCategory:p,status:h}),console.log("Export completed successfully")}catch(te){console.error("Error exporting finished goods:",te),alert(`Failed to export finished goods: ${te instanceof Error?te.message:"Unknown error"}`)}finally{Y(!1)}},Ge=i.reduce((te,ke)=>te+ke.totalValue,0),Xe=i.filter(te=>te.status==="Low Stock").length,jt=i.filter(te=>te.status==="Out of Stock").length,ye=[...new Set(i.map(te=>te.category))];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Finished Goods..."})]})}):u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:u}),n.jsx("button",{onClick:xe,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6 relative",children:[B&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Importing Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Please wait while we process your file..."}),n.jsx("div",{className:"mt-4 text-sm text-gray-500",children:"This may take a few moments for large files"})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Finished Goods Inventory"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",a==null?void 0:a.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Vt,disabled:W,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),W?"Exporting...":"Export"]}),n.jsxs("button",{onClick:xe,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(Zi,{notifications:ve,onMarkAsRead:D,onMarkAllAsRead:H,onClearAll:G,onViewTransferOrder:Rt,onRefresh:Z})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:F}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(across all pages)"})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(tt,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[Ge.toFixed(2)," KWD"]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx($o,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Xe})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(wE,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:jt})]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search finished goods by name, code, or supplier...",className:"input-field pl-10",value:f,onChange:te=>m(te.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:Ve,className:"btn-secondary flex items-center",title:"Clear all filters",children:"Clear Filters"}),n.jsxs("button",{onClick:He,className:"btn-secondary flex items-center",title:"Download Excel template",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Template"]}),n.jsxs("button",{onClick:ht,disabled:B,className:"btn-secondary flex items-center disabled:opacity-50",title:"Import finished goods from Excel/CSV",children:[n.jsx(Ha,{className:"h-4 w-4 mr-2"}),B?"Importing...":"Import"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:p,onChange:te=>y(te.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),ye.map(te=>n.jsx("option",{value:te,children:te},te))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:h,onChange:te=>b(te.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),n.jsx("option",{value:"Overstock",children:"Overstock"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:N,onChange:te=>S(te.target.value),children:[n.jsx("option",{value:"materialName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastUpdated",children:"Last Updated"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",F>0?(X-1)*pe+1:0," - ",Math.min(X*pe,F)," of ",F," finished goods items",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:pe,onChange:te=>{ne(Number(te.target.value)),ie(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]}),(f||p||h)&&n.jsx("button",{onClick:Ve,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})]}),n.jsxs("div",{className:"card overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods Inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Complete inventory list with all fields"})]})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-green-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(tt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No finished goods found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Finished goods inventory is empty"})]})})}):i.map(te=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:te.materialCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:te.materialName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:te.category}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:te.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",te.unitPrice?Number(te.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:te.currentStock}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>ft(te),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:"Edit"})})]},te.id))})]})}),ee>1&&n.jsx("div",{className:"px-4 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",X," of ",ee]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ie(1),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>ie(te=>Math.max(1,te-1)),disabled:X===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,ee)},(te,ke)=>{let $e;return ee<=5||X<=3?$e=ke+1:X>=ee-2?$e=ee-4+ke:$e=X-2+ke,n.jsx("button",{onClick:()=>ie($e),className:`px-3 py-1 text-sm border rounded-md ${X===$e?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:$e},$e)})}),n.jsx("button",{onClick:()=>ie(te=>Math.min(ee,te+1)),disabled:X===ee,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>ie(ee),disabled:X===ee,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]}),n.jsx("input",{ref:e,type:"file",accept:".xlsx,.xls,.csv",onChange:gt,style:{display:"none"}}),j&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Raw Material: ",g.materialName]}),n.jsx("button",{onClick:mt,className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.currentStock,onChange:te=>E(ke=>({...ke,currentStock:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.minimumStock,onChange:te=>E(ke=>({...ke,minimumStock:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.maximumStock,onChange:te=>E(ke=>({...ke,maximumStock:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reorder Point (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.reorderPoint,onChange:te=>E(ke=>({...ke,reorderPoint:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",value:_.unitPrice,onChange:te=>E(ke=>({...ke,unitPrice:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:_.notes,onChange:te=>E(ke=>({...ke,notes:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Optional notes..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:mt,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),n.jsx("button",{onClick:it,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Saving...":"Save Changes"})]})]})}),n.jsx(XP,{isOpen:t.isOpen,onClose:r,onConfirm:t.onConfirm,onCancel:t.onCancel,title:t.title,message:t.message,type:t.type,confirmText:t.confirmText,cancelText:t.cancelText,showCancel:t.showCancel}),n.jsx(Zc,{isOpen:T,onClose:()=>{k(!1),P(null)},transferOrder:A,onAccept:Gt,onReject:Jt,loading:M})]})},vce=()=>{const e=lt(),[t,r]=C.useState(null),[a,s]=C.useState(!0),[i,o]=C.useState(null),[l,c]=C.useState([]),[u,d]=C.useState(!1),[f,m]=C.useState([]),[p,y]=C.useState(null),[h,b]=C.useState(!1),[N,S]=C.useState({productCode:"",productName:"",category:"",unitOfMeasure:"pcs",quantity:1,costPrice:0,unitPrice:0,expiryDays:1,notes:""});C.useEffect(()=>{v()},[]);const v=async()=>{try{s(!0),o(null);const E=await ce.getCentralKitchens();if(E.success&&E.data.length>0){const k=E.data[0];r(k)}else o("Central Kitchen not found");const T=await ce.getCentralKitchenFinishedProducts({limit:1e3});T.success&&T.data&&m(T.data)}catch(E){o(E instanceof Error?E.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",E)}finally{s(!1)}},x=()=>{if(!N.productCode||!N.productName||!N.quantity){alert("Please select a finished good and enter quantity");return}const E={id:`item-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,productCode:N.productCode,productName:N.productName,category:N.category||"",unitOfMeasure:N.unitOfMeasure||"pcs",quantity:N.quantity||1,costPrice:N.costPrice||0,unitPrice:N.unitPrice||0,expiryDays:N.expiryDays||1,notes:N.notes||""};c(T=>[...T,E]),S({productCode:"",productName:"",category:"",unitOfMeasure:"pcs",quantity:1,costPrice:0,unitPrice:0,expiryDays:1,notes:""}),y(null),d(!1)},g=E=>{c(T=>T.filter(k=>k.id!==E))},w=(E,T,k)=>{c(A=>A.map(P=>P.id===E?{...P,[T]:k}:P))},j=async E=>{const T=f.find(k=>k.productCode===E);if(T){S(k=>({...k,productCode:T.productCode,productName:T.productName,category:T.subCategory,unitOfMeasure:T.unitOfMeasure,unitPrice:T.unitPrice,costPrice:T.costPrice}));try{b(!0);let k=null;if(k=await ce.getBillOfMaterials({search:T.productName,limit:10}),(!k.success||!k.data||k.data.length===0)&&(k=await ce.getBillOfMaterials({search:T.productCode,limit:10})),(!k.success||!k.data||k.data.length===0)&&T.bomCode&&(k=await ce.getBillOfMaterials({search:T.bomCode,limit:10})),k.success&&k.data&&k.data.length>0){const A=k.data.find(P=>P.productName.toLowerCase()===T.productName.toLowerCase());y(A||k.data[0])}else y(null)}catch(k){console.error("Error fetching BOM:",k),y(null)}finally{b(!1)}}},O=async()=>{if(l.length===0){alert("Please add at least one item to produce");return}try{s(!0);for(const T of l){const k=await ce.getBillOfMaterials({search:T.productName,limit:10});if(!k.success||!k.data||k.data.length===0){alert(`No recipe found for ${T.productName}. Cannot produce without recipe.`);return}const A=k.data.find(M=>M.productName.toLowerCase()===T.productName.toLowerCase())||k.data[0],P=await ce.makeFinishedGood({productCode:T.productCode,productName:T.productName,quantity:T.quantity,bomCode:A.bomCode,notes:T.notes});if(!P.success){alert(`Failed to produce ${T.productName}: ${P.message}`);return}console.log(`Successfully produced ${T.productName}:`,P.data)}let E=`Production completed successfully!

Produced ${l.length} items:
`;l.forEach(T=>{E+=`- ${T.productName} (${T.quantity} ${T.unitOfMeasure})
`}),E+=`
Raw materials have been deducted from Central Kitchen inventory.
Finished goods have been added to Central Kitchen inventory.`,alert(E),c([]),await v()}catch(E){console.error("Error saving production:",E),alert("Failed to save production. Please try again.")}finally{s(!1)}},_=["pcs","kg","L","g","ml","box","pack","serving"];return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Make Finished Good..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:v,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Lb,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Make Finished Good"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:v,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/central-kitchen/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(tt,{className:"h-4 w-4 mr-2"}),"View Finished Goods"]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Production Form"}),n.jsxs("button",{onClick:()=>d(!u),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),u&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Production Item"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finished Good *"}),n.jsxs("select",{className:"input-field",value:N.productCode||"",onChange:E=>j(E.target.value),children:[n.jsx("option",{value:"",children:"Select Finished Good"}),f.map(E=>n.jsxs("option",{value:E.productCode,children:[E.productName," (",E.productCode,")"]},E._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:N.productCode||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:N.productName||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:N.category||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure"}),n.jsx("select",{className:"input-field",value:N.unitOfMeasure||"pcs",onChange:E=>S(T=>({...T,unitOfMeasure:E.target.value})),children:_.map(E=>n.jsx("option",{value:E,children:E},E))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field",value:N.quantity||1,onChange:E=>S(T=>({...T,quantity:Number.parseInt(E.target.value)||1})),min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:N.costPrice||0,onChange:E=>S(T=>({...T,costPrice:Number.parseFloat(E.target.value)||0})),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:N.unitPrice||0,onChange:E=>S(T=>({...T,unitPrice:Number.parseFloat(E.target.value)||0})),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Days"}),n.jsx("input",{type:"number",className:"input-field",value:N.expiryDays||1,onChange:E=>S(T=>({...T,expiryDays:Number.parseInt(E.target.value)||1})),min:"1"})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:N.notes||"",onChange:E=>S(T=>({...T,notes:E.target.value})),placeholder:"Additional notes about this production..."})]})]}),h&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),n.jsx("span",{className:"text-blue-600",children:"Loading recipe ingredients..."})]})}),p&&!h&&n.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Required Raw Materials (Recipe Master)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity per Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.items.map((E,T)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.materialCode||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.materialName||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.quantity||0}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:E.unitOfMeasure||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:(E.unitCost||0)>0?(E.unitCost||0).toFixed(2)+" KWD":"0.00 KWD"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:(E.totalCost||0)>0?(E.totalCost||0).toFixed(2)+" KWD":"0.00 KWD"})]},T))}),n.jsx("tfoot",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("td",{colSpan:5,className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Total Recipe Cost:"}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:[p.totalCost.toFixed(2)," KWD"]})]})})]})}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"BOM Code:"})," ",p.bomCode]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Description:"})," ",p.productDescription]})]})]}),!p&&!h&&N.productCode&&n.jsx("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.jsx("span",{className:"text-yellow-800",children:"No recipe found for this finished good. Raw materials information not available."})]})}),n.jsxs("div",{className:"flex gap-3 mt-4",children:[n.jsxs("button",{onClick:x,className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add to Production"]}),n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Cancel"})]})]}),l.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Production Items (",l.length,")"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Days"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(E=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.productName}),n.jsxs("div",{className:"text-sm text-gray-500",children:[E.productCode,"  ",E.category]})]})}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[n.jsx("input",{type:"number",className:"input-field w-20",value:E.quantity,onChange:T=>w(E.id,"quantity",Number.parseInt(T.target.value)||1),min:"1"}),n.jsx("span",{className:"ml-2 text-sm text-gray-500",children:E.unitOfMeasure})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",step:"0.01",className:"input-field w-24",value:E.costPrice,onChange:T=>w(E.id,"costPrice",Number.parseFloat(T.target.value)||0),min:"0"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",step:"0.01",className:"input-field w-24",value:E.unitPrice,onChange:T=>w(E.id,"unitPrice",Number.parseFloat(T.target.value)||0),min:"0"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",className:"input-field w-20",value:E.expiryDays,onChange:T=>w(E.id,"expiryDays",Number.parseInt(T.target.value)||1),min:"1"})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("input",{type:"text",className:"input-field w-full",value:E.notes,onChange:T=>w(E.id,"notes",T.target.value),placeholder:"Production notes..."})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("button",{onClick:()=>g(E.id),className:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})})]},E.id))})]})}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Production Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Quantity"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.reduce((E,T)=>E+T.quantity,0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[l.reduce((E,T)=>E+T.quantity*T.unitPrice,0).toFixed(2)," KWD"]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Notes"}),n.jsx("textarea",{className:"input-field",rows:3,placeholder:"Additional notes about this production batch..."})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:O,disabled:a,className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Production"]})})]})]})]})},bce=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},wce=()=>{const e=lt(),[t,r]=C.useState(null),[a,s]=C.useState(!0),[i,o]=C.useState(null),[l,c]=C.useState([]),[u,d]=C.useState([]),[f,m]=C.useState([]),[p,y]=C.useState(!1),[h,b]=C.useState({toOutlet:"",transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:""});C.useEffect(()=>{N(),S()},[]);const N=async()=>{try{s(!0),o(null);const k=await ce.getCentralKitchens();if(k.success&&k.data.length>0){const A=k.data[0];r(A)}else o("Central Kitchen not found")}catch(k){o(k instanceof Error?k.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",k)}finally{s(!1)}},S=async()=>{try{y(!0),console.log("Loading raw materials and finished goods data...");const k=await ce.getCentralKitchenRawMaterials({limit:1e3});k.success?(d(k.data),console.log("Loaded raw materials:",k.data.length)):console.error("Failed to load raw materials:",k.error||"API Error");const A=await ce.getCentralKitchenFinishedProducts({limit:1e3});A.success?(m(A.data),console.log("Loaded finished goods:",A.data.length)):console.error("Failed to load finished goods:",A.error||"API Error")}catch(k){console.error("Error loading materials data:",k)}finally{y(!1)}},v=()=>{console.log("Add Item button clicked!");const k=`form-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log("Creating new form with ID:",k),c(A=>{const P=[...A,{id:k,data:{itemType:"Raw Material",itemCode:"",itemName:"",category:"",unitOfMeasure:"pcs",quantity:1,unitPrice:0,notes:""}}];return console.log("Updated forms array:",P),P})},x=(k,A,P)=>{c(M=>M.map(U=>{if(U.id===k){const W={...U,data:{...U.data,[A]:P}};if(A==="itemType"&&(W.data.itemCode="",W.data.itemName="",W.data.category=""),A==="itemCode"&&P){const Y=g(W.data.itemType||"Raw Material",P);Y&&(W.data.itemName=Y.materialName||Y.productName||"",W.data.category=Y.category||Y.subCategory||"",W.data.unitOfMeasure=_(Y.unitOfMeasure||"pcs"),W.data.unitPrice=Y.unitPrice||0)}return W}return U}))},g=(k,A)=>k==="Raw Material"?u.find(P=>P.materialCode===A):k==="Finished Goods"?f.find(P=>P.productCode===A):null,w=k=>{c(A=>A.filter(P=>P.id!==k))},j=async()=>{if(l.length===0){alert("Please add at least one item to transfer");return}if(!h.toOutlet){alert("Please select a destination outlet");return}if(l.filter(P=>!P.data.itemType||!P.data.itemCode||!P.data.itemName).length>0){alert("Please fill in all required fields (Item Type, Item Code) for all items");return}if(l.filter(P=>!P.data.quantity||P.data.quantity<=0).length>0){alert("Please enter valid quantities (greater than 0) for all items");return}try{s(!0);const P=l.map(W=>({itemType:W.data.itemType,itemCode:W.data.itemCode,itemName:W.data.itemName||W.data.itemCode,category:W.data.category||"",subCategory:W.data.subCategory||"",unitOfMeasure:W.data.unitOfMeasure||"pcs",quantity:W.data.quantity||1,unitPrice:W.data.unitPrice||0,notes:W.data.notes||""})),M={fromOutlet:(t==null?void 0:t.outletName)||"Central Kitchen",toOutlet:h.toOutlet,transferDate:h.transferDate,priority:h.priority,items:P,totalValue:P.reduce((W,Y)=>W+Y.quantity*Y.unitPrice,0),notes:h.notes};console.log("Creating transfer with data:",M),console.log(" Calling apiService.createTransfer...");const U=await ce.createTransfer(M);console.log(" Transfer API response:",U),U.success?(alert(`Transfer created successfully!

Transfer Details:
From: ${t==null?void 0:t.outletName}
To: ${M.toOutlet}
Items: ${P.length}
Total Value: ${M.totalValue.toFixed(2)} KWD

Transfer ID: ${U.data.transferId}

Stock has been updated in both Central Kitchen and destination outlet.${M.toOutlet==="Kuwait City"||M.toOutlet==="360 Mall"||M.toOutlet==="Vibe Complex"||M.toOutlet==="Taiba Hospital"?`

Notification sent to ${M.toOutlet}.`:""}`),c([]),b({toOutlet:"",transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:""}),await S()):alert(`Transfer failed: ${U.message}`)}catch(P){console.error(" Error creating transfer:",P),console.error(" Error details:",{message:P instanceof Error?P.message:"Unknown error",stack:P instanceof Error?P.stack:void 0,response:P==null?void 0:P.response}),alert(`Failed to create transfer order: ${P instanceof Error?P.message:"Unknown error"}`)}finally{s(!1)}},O=["km (Kilometers)","lb (Pounds)","mg (Milli Grams)","ml (Milli Litre)","m (Meter)","pcs (Pieces)","pcs 6 (Pieces 6)","pcs 12 (Pieces 12)","No.s (Number)","ltr (Liter)","kg 2 (Kilograms2)","kg 5 (Kilograms 5)","kg 10 (Kilograms 10)","Pr (Portion)","kg (Kilograms)"],_=k=>{if(!k)return"pcs (Pieces)";const A={km:"km (Kilometers)",lb:"lb (Pounds)",mg:"mg (Milli Grams)",ml:"ml (Milli Litre)",m:"m (Meter)",pcs:"pcs (Pieces)","pcs 6":"pcs 6 (Pieces 6)","pcs 12":"pcs 12 (Pieces 12)","No.s":"No.s (Number)",ltr:"ltr (Liter)","kg 2":"kg 2 (Kilograms2)","kg 5":"kg 5 (Kilograms 5)","kg 10":"kg 10 (Kilograms 10)",Pr:"Pr (Portion)",kg:"kg (Kilograms)"};return O.includes(k)?k:A[k.trim()]||"pcs (Pieces)"},E=["Kuwait City","360 Mall","Vibes Complex","Taiba Hospital"],T=["Low","Normal","High","Urgent"];return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Create Transfer..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:N,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(ta,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Transfer"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:N,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"View All Transfers"]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Transfer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Outlet"}),n.jsx("input",{type:"text",className:"input-field",value:(t==null?void 0:t.outletName)||"Central Kitchen",disabled:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Outlet *"}),n.jsxs("select",{className:"input-field",value:h.toOutlet,onChange:k=>b(A=>({...A,toOutlet:k.target.value})),children:[n.jsx("option",{value:"",children:"Select Destination"}),E.map(k=>n.jsx("option",{value:k,children:k},k))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Date"}),n.jsx("input",{type:"date",className:"input-field",value:h.transferDate,onChange:k=>b(A=>({...A,transferDate:k.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("select",{className:"input-field",value:h.priority,onChange:k=>b(A=>({...A,priority:k.target.value})),children:T.map(k=>n.jsx("option",{value:k,children:k},k))})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:h.notes,onChange:k=>b(A=>({...A,notes:k.target.value})),placeholder:"Additional notes about this transfer..."})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Items"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:S,disabled:p,className:"btn-secondary flex items-center text-sm",title:"Refresh materials data",children:[n.jsx(ea,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),p?"Loading...":"Refresh Items"]}),n.jsxs("button",{onClick:v,className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),l.map((k,A)=>n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Item #",A+1]}),n.jsx("button",{onClick:()=>w(k.id),className:"text-red-600 hover:text-red-900 text-sm",children:"Remove Item"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Type *"}),n.jsxs("select",{className:"input-field",value:k.data.itemType||"",onChange:P=>x(k.id,"itemType",P.target.value),children:[n.jsx("option",{value:"",children:"Select Item Type"}),n.jsx("option",{value:"Raw Material",children:"Raw Material"}),n.jsx("option",{value:"Finished Goods",children:"Finished Goods"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Code *"}),n.jsx(bce,{value:k.data.itemCode||"",onChange:P=>x(k.id,"itemCode",P),disabled:!k.data.itemType||p,placeholder:"Select Item",options:k.data.itemType==="Raw Material"?u.map(P=>({value:P.materialCode,label:`${P.materialCode} - ${P.materialName}`})):k.data.itemType==="Finished Goods"?f.map(P=>({value:P.productCode,label:`${P.productCode} - ${P.productName}`})):[]}),p&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading items..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),n.jsx("input",{type:"text",className:"input-field",value:k.data.itemName||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsx("input",{type:"text",className:"input-field",value:k.data.category||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure"}),n.jsx("select",{className:"input-field",value:k.data.unitOfMeasure||"pcs (Pieces)",onChange:P=>x(k.id,"unitOfMeasure",P.target.value),children:O.map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field",value:k.data.quantity||1,onChange:P=>x(k.id,"quantity",parseInt(P.target.value)||1),min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:k.data.unitPrice||0,onChange:P=>x(k.id,"unitPrice",parseFloat(P.target.value)||0),min:"0",placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:k.data.notes||"",onChange:P=>x(k.id,"notes",P.target.value),placeholder:"Additional notes about this item..."})]})]})]},k.id)),l.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Transfer Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Quantity"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:l.reduce((k,A)=>k+(A.data.quantity||1),0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[l.reduce((k,A)=>k+(A.data.quantity||1)*(A.data.unitPrice||0),0).toFixed(2)," KWD"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Priority"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:h.priority})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:j,disabled:a,className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),a?"Creating Transfer Order...":"Create Transfer Order"]})})]}),l.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Items Added"}),n.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Add Item" to start adding items to your transfer order'})]})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var uf={};uf.version="0.18.5";var sn=1200,Vo=1252,Nce=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Hw={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},sp=function(e){Nce.indexOf(e)!=-1&&(Vo=Hw[0]=e)};function jce(){sp(1252)}var _n=function(e){sn=e,sp(e)};function ip(){_n(1200),jce()}function Rh(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function Sce(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function YP(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var $l=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Sce(e.slice(2)):t==254&&r==255?YP(e.slice(2)):t==65279?e.slice(1):e},Iu=function(t){return String.fromCharCode(t)},v1=function(t){return String.fromCharCode(t)},Ct;function kce(e){Ct=e,_n=function(t){sn=t,sp(t)},$l=function(t){return t.charCodeAt(0)===255&&t.charCodeAt(1)===254?Ct.utils.decode(1200,Rh(t.slice(2))):t},Iu=function(r){return sn===1200?String.fromCharCode(r):Ct.utils.decode(sn,[r&255,r>>8])[0]},v1=function(r){return Ct.utils.decode(Vo,[r])[0]},C6()}var vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function df(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,a=e.charCodeAt(u++),o=(r&3)<<4|a>>4,s=e.charCodeAt(u++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=vi.charAt(i)+vi.charAt(o)+vi.charAt(l)+vi.charAt(c);return t}function un(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=vi.indexOf(e.charAt(u++)),o=vi.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=vi.indexOf(e.charAt(u++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=vi.indexOf(e.charAt(u++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var pt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ri=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Ri(e){return pt?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function NO(e){return pt?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var tn=function(t){return pt?ri(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function qf(e){if(typeof ArrayBuffer>"u")return tn(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function eo(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Cce(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function Gw(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Gw(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Qr=pt?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:ri(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Oce(e){for(var t=[],r=0,a=e.length+250,s=Ri(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=Ri(65535),a=65530)}return t.push(s.slice(0,r)),Qr(t)}var ka=/\u0000/g,Mu=/[\u0001-\u0006]/g;function Zl(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Jn(e,t){var r=""+e;return r.length>=t?r:wr("0",t-r.length)+r}function Xw(e,t){var r=""+e;return r.length>=t?r:wr(" ",t-r.length)+r}function Lh(e,t){var r=""+e;return r.length>=t?r:r+wr(" ",t-r.length)}function _ce(e,t){var r=""+Math.round(e);return r.length>=t?r:wr("0",t-r.length)+r}function Tce(e,t){var r=""+e;return r.length>=t?r:wr("0",t-r.length)+r}var jO=Math.pow(2,32);function gl(e,t){if(e>jO||e<-jO)return _ce(e,t);var r=Math.round(e);return Tce(r,t)}function $h(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var SO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Tg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Ece(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var et={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},kO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Ace={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Bh(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),l=f*o+i,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),i=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=i):(d=u,l=o)),!r)return[0,a*l,d];var m=Math.floor(a*l/d);return[m,a*l-m*d,d]}function bi(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Rce(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var QP=new Date(1899,11,31,0,0,0),Pce=QP.getTime(),Dce=new Date(1900,2,1,0,0,0);function JP(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Dce&&(r+=24*60*60*1e3),(r-(Pce+(e.getTimezoneOffset()-QP.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Yw(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Ice(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Mce(e){var t=e<0?12:11,r=Yw(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Fce(e){var t=Yw(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ff(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Mce(e):t===10?r=e.toFixed(10).substr(0,12):r=Fce(e),Yw(Ice(r.toUpperCase()))}function zo(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ff(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return dn(14,JP(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Rce(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Lce(e,t,r,a){var s="",i=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return Tg[r.m-1][1];case 5:return Tg[r.m-1][0];default:return Tg[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return SO[r.q][0];default:return SO[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Jn(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Jn(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Jn(c,u):"";return d}function wi(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var ZP=/%/g;function $ce(e,t,r){var a=t.replace(ZP,""),s=t.length-a.length;return Bs(e,a,r*Math.pow(10,2*s))+wr("%",s)}function Bce(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Bs(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function e6(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+e6(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var t6=/# (\?+)( ?)\/( ?)(\d+)/;function Uce(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?wr(" ",e[1].length+1+e[4].length):Xw(o,e[1].length)+e[2]+"/"+e[3]+Jn(l,e[4].length))}function Wce(e,t,r){return r+(t===0?"":""+t)+wr(" ",e[1].length+2+e[4].length)}var r6=/^#*0*\.([0#]+)/,a6=/\).*[0#]/,n6=/\(###\) ###\\?-####/;function Pa(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function CO(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function OO(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function qce(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Kce(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function yn(e,t,r){if(e.charCodeAt(0)===40&&!t.match(a6)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yn("n",a,r):"("+yn("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Bce(e,t,r);if(t.indexOf("%")!==-1)return $ce(e,t,r);if(t.indexOf("E")!==-1)return e6(t,r);if(t.charCodeAt(0)===36)return"$"+yn(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+gl(c,t.length);if(t.match(/^[#?]+$/))return s=gl(r,0),s==="0"&&(s=""),s.length>t.length?s:Pa(t.substr(0,t.length-s.length))+s;if(i=t.match(t6))return Uce(i,c,u);if(t.match(/^#+0+$/))return u+gl(c,t.length-t.indexOf("0"));if(i=t.match(r6))return s=CO(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Pa(i[1])).replace(/\.$/,"."+Pa(i[1])).replace(/\.(\d*)$/,function(y,h){return"."+h+wr("0",Pa(i[1]).length-h.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+CO(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+wi(gl(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yn(e,t,-r):wi(""+(Math.floor(r)+qce(r,i[1].length)))+"."+Jn(OO(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return yn(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Zl(yn(e,t.replace(/[\\-]/g,""),r)),o=0,Zl(Zl(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(n6))return s=yn(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Bh(c,Math.pow(10,o)-1,!1),s=""+u,d=Bs("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=Lh(l[2],o),d.length<i[4].length&&(d=Pa(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Bh(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Xw(l[1],o)+i[2]+"/"+i[3]+Lh(l[2],o):wr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=gl(r,0),t.length<=s.length?s:Pa(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,m=t.length-s.length-f;return Pa(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=OO(r,i[1].length),r<0?"-"+yn(e,t,-r):wi(Kce(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Jn(0,3-y.length):"")+y})+"."+Jn(o,i[1].length);switch(t){case"###,##0.00":return yn(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=wi(gl(c,0));return p!=="0"?u+p:"";case"###,###.00":return yn(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return yn(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Vce(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Bs(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function zce(e,t,r){var a=t.replace(ZP,""),s=t.length-a.length;return Bs(e,a,r*Math.pow(10,2*s))+wr("%",s)}function s6(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+s6(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function os(e,t,r){if(e.charCodeAt(0)===40&&!t.match(a6)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?os("n",a,r):"("+os("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Vce(e,t,r);if(t.indexOf("%")!==-1)return zce(e,t,r);if(t.indexOf("E")!==-1)return s6(t,r);if(t.charCodeAt(0)===36)return"$"+os(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Jn(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Pa(t.substr(0,t.length-s.length))+s;if(i=t.match(t6))return Wce(i,c,u);if(t.match(/^#+0+$/))return u+Jn(c,t.length-t.indexOf("0"));if(i=t.match(r6))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Pa(i[1])).replace(/\.$/,"."+Pa(i[1])),s=s.replace(/\.(\d*)$/,function(y,h){return"."+h+wr("0",Pa(i[1]).length-h.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+wi(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+os(e,t,-r):wi(""+r)+"."+wr("0",i[1].length);if(i=t.match(/^#,#*,#0/))return os(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Zl(os(e,t.replace(/[\\-]/g,""),r)),o=0,Zl(Zl(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(n6))return s=os(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Bh(c,Math.pow(10,o)-1,!1),s=""+u,d=Bs("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=Lh(l[2],o),d.length<i[4].length&&(d=Pa(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Bh(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Xw(l[1],o)+i[2]+"/"+i[3]+Lh(l[2],o):wr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Pa(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,m=t.length-s.length-f;return Pa(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+os(e,t,-r):wi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Jn(0,3-y.length):"")+y})+"."+Jn(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=wi(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return os(e,t.slice(0,t.lastIndexOf(".")),r)+Pa(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Bs(e,t,r){return(r|0)===r?os(e,t,r):yn(e,t,r)}function Hce(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var i6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function sl(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":$h(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(i6))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Gce(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",u,d,f,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!$h(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),y=p==="("||p===")"?p:"t";s[s.length]={t:y,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=bi(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=bi(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var h={t:l,v:l};if(u==null&&(u=bi(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(h.v=u.H>=12?"P":"A"),h.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(h.v=u.H>=12?"PM":"AM"),h.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(h.v=u.H>=12?"":""),h.t="T",o+=5,m="h"):(h.t="t",++o),u==null&&h.t==="T")return"";s[s.length]=h,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(i6)){if(u==null&&(u=bi(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",sl(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,N=0,S;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",b<1&&(b=1);break;case"s":(S=s[o].v.match(/\.0+$/))&&(N=Math.max(N,S[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var v="",x;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Lce(s[o].t.charCodeAt(0),s[o].v,u,N),s[o].t="t";break;case"n":case"?":for(x=o+1;s[x]!=null&&((l=s[x].t)==="?"||l==="D"||(l===" "||l==="t")&&s[x+1]!=null&&(s[x+1].t==="?"||s[x+1].t==="t"&&s[x+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[x].v==="/"||s[x].v===" "&&s[x+1]!=null&&s[x+1].t=="?"));)s[o].v+=s[x].v,s[x]={v:"",t:";"},++x;v+=s[o].v,o=x-1;break;case"G":s[o].t="t",s[o].v=zo(t,r);break}var g="",w,j;if(v.length>0){v.charCodeAt(0)==40?(w=t<0&&v.charCodeAt(0)===45?-t:t,j=Bs("n",v,w)):(w=t<0&&a>1?-t:t,j=Bs("n",v,w),w<0&&s[0]&&s[0].t=="t"&&(j=j.substr(1),s[0].v="-"+s[0].v)),x=j.length-1;var O=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){O=o;break}var _=s.length;if(O===s.length&&j.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(x>=s[o].v.length-1?(x-=s[o].v.length,s[o].v=j.substr(x+1,s[o].v.length)):x<0?s[o].v="":(s[o].v=j.substr(0,x+1),x=-1),s[o].t="t",_=o);x>=0&&_<s.length&&(s[_].v=j.substr(0,x+1)+s[_].v)}else if(O!==s.length&&j.indexOf("E")===-1){for(x=j.indexOf(".")-1,o=O;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(d=s[o].v.indexOf(".")>-1&&o===O?s[o].v.indexOf(".")-1:s[o].v.length-1,g=s[o].v.substr(d+1);d>=0;--d)x>=0&&(s[o].v.charAt(d)==="0"||s[o].v.charAt(d)==="#")&&(g=j.charAt(x--)+g);s[o].v=g,s[o].t="t",_=o}for(x>=0&&_<s.length&&(s[_].v=j.substr(0,x+1)+s[_].v),x=j.indexOf(".")+1,o=O;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==O)){for(d=s[o].v.indexOf(".")>-1&&o===O?s[o].v.indexOf(".")+1:0,g=s[o].v.substr(0,d);d<s[o].v.length;++d)x<j.length&&(g+=j.charAt(x++));s[o].v=g,s[o].t="t",_=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(w=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Bs(s[o].t,s[o].v,w),s[o].t="t");var E="";for(o=0;o!==s.length;++o)s[o]!=null&&(E+=s[o].v);return E}var _O=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function TO(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Xce(e,t){var r=Hce(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(_O),l=r[1].match(_O);return TO(t,o)?[a,r[0]]:TO(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function dn(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:et)[e],a==null&&(a=r.table&&r.table[kO[e]]||et[kO[e]]),a==null&&(a=Ace[e]||"General");break}if($h(a,0))return zo(t,r);t instanceof Date&&(t=JP(t,r.date1904));var s=Xce(a,t);if($h(s[1]))return zo(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Gce(s[1],t,r,s[0])}function gs(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(et[r]==null){t<0&&(t=r);continue}if(et[r]==e){t=r;break}}t<0&&(t=391)}return et[t]=e,t}function Kf(e){for(var t=0;t!=392;++t)e[t]!==void 0&&gs(e[t],t)}function tu(){et=Ece()}var o6={format:dn,load:gs,_table:et,load_table:Kf,parse_date_code:bi,is_date:sl,get_table:function(){return o6._table=et}},Yce={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},l6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Qce(e){var t=typeof e=="number"?et[e]:e;return t=t.replace(l6,"(\\d+)"),new RegExp("^"+t+"$")}function Jce(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(l6)||[]).forEach(function(f,m){var p=parseInt(r[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:a==-1&&s==-1&&i==-1?d:u+"T"+d}var Zce=function(){var e={};e.version="1.2.0";function t(){for(var j=0,O=new Array(256),_=0;_!=256;++_)j=_,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,O[_]=j;return typeof Int32Array<"u"?new Int32Array(O):O}var r=t();function a(j){var O=0,_=0,E=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(E=0;E!=256;++E)T[E]=j[E];for(E=0;E!=256;++E)for(_=j[E],O=256+E;O<4096;O+=256)_=T[O]=_>>>8^j[_&255];var k=[];for(E=1;E!=16;++E)k[E-1]=typeof Int32Array<"u"?T.subarray(E*256,E*256+256):T.slice(E*256,E*256+256);return k}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],u=s[4],d=s[5],f=s[6],m=s[7],p=s[8],y=s[9],h=s[10],b=s[11],N=s[12],S=s[13],v=s[14];function x(j,O){for(var _=O^-1,E=0,T=j.length;E<T;)_=_>>>8^r[(_^j.charCodeAt(E++))&255];return~_}function g(j,O){for(var _=O^-1,E=j.length-15,T=0;T<E;)_=v[j[T++]^_&255]^S[j[T++]^_>>8&255]^N[j[T++]^_>>16&255]^b[j[T++]^_>>>24]^h[j[T++]]^y[j[T++]]^p[j[T++]]^m[j[T++]]^f[j[T++]]^d[j[T++]]^u[j[T++]]^c[j[T++]]^l[j[T++]]^o[j[T++]]^i[j[T++]]^r[j[T++]];for(E+=15;T<E;)_=_>>>8^r[(_^j[T++])&255];return~_}function w(j,O){for(var _=O^-1,E=0,T=j.length,k=0,A=0;E<T;)k=j.charCodeAt(E++),k<128?_=_>>>8^r[(_^k)&255]:k<2048?(_=_>>>8^r[(_^(192|k>>6&31))&255],_=_>>>8^r[(_^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,A=j.charCodeAt(E++)&1023,_=_>>>8^r[(_^(240|k>>8&7))&255],_=_>>>8^r[(_^(128|k>>2&63))&255],_=_>>>8^r[(_^(128|A>>6&15|(k&3)<<4))&255],_=_>>>8^r[(_^(128|A&63))&255]):(_=_>>>8^r[(_^(224|k>>12&15))&255],_=_>>>8^r[(_^(128|k>>6&63))&255],_=_>>>8^r[(_^(128|k&63))&255]);return~_}return e.table=r,e.bstr=x,e.buf=g,e.str=w,e}(),Je=function(){var t={};t.version="1.2.1";function r(I,V){for(var L=I.split("/"),K=V.split("/"),Q=0,J=0,me=Math.min(L.length,K.length);Q<me;++Q){if(J=L[Q].length-K[Q].length)return J;if(L[Q]!=K[Q])return L[Q]<K[Q]?-1:1}return L.length-K.length}function a(I){if(I.charAt(I.length-1)=="/")return I.slice(0,-1).indexOf("/")===-1?I:a(I.slice(0,-1));var V=I.lastIndexOf("/");return V===-1?I:I.slice(0,V+1)}function s(I){if(I.charAt(I.length-1)=="/")return s(I.slice(0,-1));var V=I.lastIndexOf("/");return V===-1?I:I.slice(V+1)}function i(I,V){typeof V=="string"&&(V=new Date(V));var L=V.getHours();L=L<<6|V.getMinutes(),L=L<<5|V.getSeconds()>>>1,I.write_shift(2,L);var K=V.getFullYear()-1980;K=K<<4|V.getMonth()+1,K=K<<5|V.getDate(),I.write_shift(2,K)}function o(I){var V=I.read_shift(2)&65535,L=I.read_shift(2)&65535,K=new Date,Q=L&31;L>>>=5;var J=L&15;L>>>=4,K.setMilliseconds(0),K.setFullYear(L+1980),K.setMonth(J-1),K.setDate(Q);var me=V&31;V>>>=5;var Ne=V&63;return V>>>=6,K.setHours(V),K.setMinutes(Ne),K.setSeconds(me<<1),K}function l(I){oa(I,0);for(var V={},L=0;I.l<=I.length-4;){var K=I.read_shift(2),Q=I.read_shift(2),J=I.l+Q,me={};switch(K){case 21589:L=I.read_shift(1),L&1&&(me.mtime=I.read_shift(4)),Q>5&&(L&2&&(me.atime=I.read_shift(4)),L&4&&(me.ctime=I.read_shift(4))),me.mtime&&(me.mt=new Date(me.mtime*1e3));break}I.l=J,V[K]=me}return V}var c;function u(){return c||(c={})}function d(I,V){if(I[0]==80&&I[1]==75)return _e(I,V);if((I[0]|32)==109&&(I[1]|32)==105)return Tt(I,V);if(I.length<512)throw new Error("CFB file size "+I.length+" < 512");var L=3,K=512,Q=0,J=0,me=0,Ne=0,fe=0,he=[],ge=I.slice(0,512);oa(ge,0);var Ee=f(ge);switch(L=Ee[0],L){case 3:K=512;break;case 4:K=4096;break;case 0:if(Ee[1]==0)return _e(I,V);default:throw new Error("Major Version: Expected 3 or 4 saw "+L)}K!==512&&(ge=I.slice(0,K),oa(ge,28));var Ie=I.slice(0,K);m(ge,L);var Be=ge.read_shift(4,"i");if(L===3&&Be!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Be);ge.l+=4,me=ge.read_shift(4,"i"),ge.l+=4,ge.chk("00100000","Mini Stream Cutoff Size: "),Ne=ge.read_shift(4,"i"),Q=ge.read_shift(4,"i"),fe=ge.read_shift(4,"i"),J=ge.read_shift(4,"i");for(var De=-1,Le=0;Le<109&&(De=ge.read_shift(4,"i"),!(De<0));++Le)he[Le]=De;var ot=p(I,K);b(fe,J,ot,K,he);var fr=S(ot,me,he,K);fr[me].name="!Directory",Q>0&&Ne!==A&&(fr[Ne].name="!MiniFAT"),fr[he[0]].name="!FAT",fr.fat_addrs=he,fr.ssz=K;var mr={},fa=[],su=[],iu=[];v(me,fr,ot,fa,Q,mr,su,Ne),y(su,iu,fa),fa.shift();var ou={FileIndex:su,FullPaths:iu};return V&&V.raw&&(ou.raw={header:Ie,sectors:ot}),ou}function f(I){if(I[I.l]==80&&I[I.l+1]==75)return[0,0];I.chk(P,"Header Signature: "),I.l+=16;var V=I.read_shift(2,"u");return[I.read_shift(2,"u"),V]}function m(I,V){var L=9;switch(I.l+=2,L=I.read_shift(2)){case 9:if(V!=3)throw new Error("Sector Shift: Expected 9 saw "+L);break;case 12:if(V!=4)throw new Error("Sector Shift: Expected 12 saw "+L);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+L)}I.chk("0600","Mini Sector Shift: "),I.chk("000000000000","Reserved: ")}function p(I,V){for(var L=Math.ceil(I.length/V)-1,K=[],Q=1;Q<L;++Q)K[Q-1]=I.slice(Q*V,(Q+1)*V);return K[L-1]=I.slice(L*V),K}function y(I,V,L){for(var K=0,Q=0,J=0,me=0,Ne=0,fe=L.length,he=[],ge=[];K<fe;++K)he[K]=ge[K]=K,V[K]=L[K];for(;Ne<ge.length;++Ne)K=ge[Ne],Q=I[K].L,J=I[K].R,me=I[K].C,he[K]===K&&(Q!==-1&&he[Q]!==Q&&(he[K]=he[Q]),J!==-1&&he[J]!==J&&(he[K]=he[J])),me!==-1&&(he[me]=K),Q!==-1&&K!=he[K]&&(he[Q]=he[K],ge.lastIndexOf(Q)<Ne&&ge.push(Q)),J!==-1&&K!=he[K]&&(he[J]=he[K],ge.lastIndexOf(J)<Ne&&ge.push(J));for(K=1;K<fe;++K)he[K]===K&&(J!==-1&&he[J]!==J?he[K]=he[J]:Q!==-1&&he[Q]!==Q&&(he[K]=he[Q]));for(K=1;K<fe;++K)if(I[K].type!==0){if(Ne=K,Ne!=he[Ne])do Ne=he[Ne],V[K]=V[Ne]+"/"+V[K];while(Ne!==0&&he[Ne]!==-1&&Ne!=he[Ne]);he[K]=-1}for(V[0]+="/",K=1;K<fe;++K)I[K].type!==2&&(V[K]+="/")}function h(I,V,L){for(var K=I.start,Q=I.size,J=[],me=K;L&&Q>0&&me>=0;)J.push(V.slice(me*k,me*k+k)),Q-=k,me=xo(L,me*4);return J.length===0?je(0):Qr(J).slice(0,I.size)}function b(I,V,L,K,Q){var J=A;if(I===A){if(V!==0)throw new Error("DIFAT chain shorter than expected")}else if(I!==-1){var me=L[I],Ne=(K>>>2)-1;if(!me)return;for(var fe=0;fe<Ne&&(J=xo(me,fe*4))!==A;++fe)Q.push(J);b(xo(me,K-4),V-1,L,K,Q)}}function N(I,V,L,K,Q){var J=[],me=[];Q||(Q=[]);var Ne=K-1,fe=0,he=0;for(fe=V;fe>=0;){Q[fe]=!0,J[J.length]=fe,me.push(I[fe]);var ge=L[Math.floor(fe*4/K)];if(he=fe*4&Ne,K<4+he)throw new Error("FAT boundary crossed: "+fe+" 4 "+K);if(!I[ge])break;fe=xo(I[ge],he)}return{nodes:J,data:UO([me])}}function S(I,V,L,K){var Q=I.length,J=[],me=[],Ne=[],fe=[],he=K-1,ge=0,Ee=0,Ie=0,Be=0;for(ge=0;ge<Q;++ge)if(Ne=[],Ie=ge+V,Ie>=Q&&(Ie-=Q),!me[Ie]){fe=[];var De=[];for(Ee=Ie;Ee>=0;){De[Ee]=!0,me[Ee]=!0,Ne[Ne.length]=Ee,fe.push(I[Ee]);var Le=L[Math.floor(Ee*4/K)];if(Be=Ee*4&he,K<4+Be)throw new Error("FAT boundary crossed: "+Ee+" 4 "+K);if(!I[Le]||(Ee=xo(I[Le],Be),De[Ee]))break}J[Ie]={nodes:Ne,data:UO([fe])}}return J}function v(I,V,L,K,Q,J,me,Ne){for(var fe=0,he=K.length?2:0,ge=V[I].data,Ee=0,Ie=0,Be;Ee<ge.length;Ee+=128){var De=ge.slice(Ee,Ee+128);oa(De,64),Ie=De.read_shift(2),Be=up(De,0,Ie-he),K.push(Be);var Le={name:Be,type:De.read_shift(1),color:De.read_shift(1),L:De.read_shift(4,"i"),R:De.read_shift(4,"i"),C:De.read_shift(4,"i"),clsid:De.read_shift(16),state:De.read_shift(4,"i"),start:0,size:0},ot=De.read_shift(2)+De.read_shift(2)+De.read_shift(2)+De.read_shift(2);ot!==0&&(Le.ct=x(De,De.l-8));var fr=De.read_shift(2)+De.read_shift(2)+De.read_shift(2)+De.read_shift(2);fr!==0&&(Le.mt=x(De,De.l-8)),Le.start=De.read_shift(4,"i"),Le.size=De.read_shift(4,"i"),Le.size<0&&Le.start<0&&(Le.size=Le.type=0,Le.start=A,Le.name=""),Le.type===5?(fe=Le.start,Q>0&&fe!==A&&(V[fe].name="!StreamData")):Le.size>=4096?(Le.storage="fat",V[Le.start]===void 0&&(V[Le.start]=N(L,Le.start,V.fat_addrs,V.ssz)),V[Le.start].name=Le.name,Le.content=V[Le.start].data.slice(0,Le.size)):(Le.storage="minifat",Le.size<0?Le.size=0:fe!==A&&Le.start!==A&&V[fe]&&(Le.content=h(Le,V[fe].data,(V[Ne]||{}).data))),Le.content&&oa(Le.content,0),J[Be]=Le,me.push(Le)}}function x(I,V){return new Date((Yr(I,V+4)/1e7*Math.pow(2,32)+Yr(I,V)/1e7-11644473600)*1e3)}function g(I,V){return u(),d(c.readFileSync(I),V)}function w(I,V){var L=V&&V.type;switch(L||pt&&Buffer.isBuffer(I)&&(L="buffer"),L||"base64"){case"file":return g(I,V);case"base64":return d(tn(un(I)),V);case"binary":return d(tn(I),V)}return d(I,V)}function j(I,V){var L=V||{},K=L.root||"Root Entry";if(I.FullPaths||(I.FullPaths=[]),I.FileIndex||(I.FileIndex=[]),I.FullPaths.length!==I.FileIndex.length)throw new Error("inconsistent CFB structure");I.FullPaths.length===0&&(I.FullPaths[0]=K+"/",I.FileIndex[0]={name:K,type:5}),L.CLSID&&(I.FileIndex[0].clsid=L.CLSID),O(I)}function O(I){var V="Sh33tJ5";if(!Je.find(I,"/"+V)){var L=je(4);L[0]=55,L[1]=L[3]=50,L[2]=54,I.FileIndex.push({name:V,type:2,content:L,size:4,L:69,R:69,C:69}),I.FullPaths.push(I.FullPaths[0]+V),_(I)}}function _(I,V){j(I);for(var L=!1,K=!1,Q=I.FullPaths.length-1;Q>=0;--Q){var J=I.FileIndex[Q];switch(J.type){case 0:K?L=!0:(I.FileIndex.pop(),I.FullPaths.pop());break;case 1:case 2:case 5:K=!0,isNaN(J.R*J.L*J.C)&&(L=!0),J.R>-1&&J.L>-1&&J.R==J.L&&(L=!0);break;default:L=!0;break}}if(!(!L&&!V)){var me=new Date(1987,1,19),Ne=0,fe=Object.create?Object.create(null):{},he=[];for(Q=0;Q<I.FullPaths.length;++Q)fe[I.FullPaths[Q]]=!0,I.FileIndex[Q].type!==0&&he.push([I.FullPaths[Q],I.FileIndex[Q]]);for(Q=0;Q<he.length;++Q){var ge=a(he[Q][0]);K=fe[ge],K||(he.push([ge,{name:s(ge).replace("/",""),type:1,clsid:U,ct:me,mt:me,content:null}]),fe[ge]=!0)}for(he.sort(function(Be,De){return r(Be[0],De[0])}),I.FullPaths=[],I.FileIndex=[],Q=0;Q<he.length;++Q)I.FullPaths[Q]=he[Q][0],I.FileIndex[Q]=he[Q][1];for(Q=0;Q<he.length;++Q){var Ee=I.FileIndex[Q],Ie=I.FullPaths[Q];if(Ee.name=s(Ie).replace("/",""),Ee.L=Ee.R=Ee.C=-(Ee.color=1),Ee.size=Ee.content?Ee.content.length:0,Ee.start=0,Ee.clsid=Ee.clsid||U,Q===0)Ee.C=he.length>1?1:-1,Ee.size=0,Ee.type=5;else if(Ie.slice(-1)=="/"){for(Ne=Q+1;Ne<he.length&&a(I.FullPaths[Ne])!=Ie;++Ne);for(Ee.C=Ne>=he.length?-1:Ne,Ne=Q+1;Ne<he.length&&a(I.FullPaths[Ne])!=a(Ie);++Ne);Ee.R=Ne>=he.length?-1:Ne,Ee.type=1}else a(I.FullPaths[Q+1]||"")==a(Ie)&&(Ee.R=Q+1),Ee.type=2}}}function E(I,V){var L=V||{};if(L.fileType=="mad")return zr(I,L);switch(_(I),L.fileType){case"zip":return Ze(I,L)}var K=function(Be){for(var De=0,Le=0,ot=0;ot<Be.FileIndex.length;++ot){var fr=Be.FileIndex[ot];if(fr.content){var mr=fr.content.length;mr>0&&(mr<4096?De+=mr+63>>6:Le+=mr+511>>9)}}for(var fa=Be.FullPaths.length+3>>2,su=De+7>>3,iu=De+127>>7,ou=su+Le+fa+iu,ao=ou+127>>7,gp=ao<=109?0:Math.ceil((ao-109)/127);ou+ao+gp+127>>7>ao;)gp=++ao<=109?0:Math.ceil((ao-109)/127);var Ss=[1,gp,ao,iu,fa,Le,De,0];return Be.FileIndex[0].size=De<<6,Ss[7]=(Be.FileIndex[0].start=Ss[0]+Ss[1]+Ss[2]+Ss[3]+Ss[4]+Ss[5])+(Ss[6]+7>>3),Ss}(I),Q=je(K[7]<<9),J=0,me=0;{for(J=0;J<8;++J)Q.write_shift(1,M[J]);for(J=0;J<8;++J)Q.write_shift(2,0);for(Q.write_shift(2,62),Q.write_shift(2,3),Q.write_shift(2,65534),Q.write_shift(2,9),Q.write_shift(2,6),J=0;J<3;++J)Q.write_shift(2,0);for(Q.write_shift(4,0),Q.write_shift(4,K[2]),Q.write_shift(4,K[0]+K[1]+K[2]+K[3]-1),Q.write_shift(4,0),Q.write_shift(4,4096),Q.write_shift(4,K[3]?K[0]+K[1]+K[2]-1:A),Q.write_shift(4,K[3]),Q.write_shift(-4,K[1]?K[0]-1:A),Q.write_shift(4,K[1]),J=0;J<109;++J)Q.write_shift(-4,J<K[2]?K[1]+J:-1)}if(K[1])for(me=0;me<K[1];++me){for(;J<236+me*127;++J)Q.write_shift(-4,J<K[2]?K[1]+J:-1);Q.write_shift(-4,me===K[1]-1?A:me+1)}var Ne=function(Be){for(me+=Be;J<me-1;++J)Q.write_shift(-4,J+1);Be&&(++J,Q.write_shift(-4,A))};for(me=J=0,me+=K[1];J<me;++J)Q.write_shift(-4,W.DIFSECT);for(me+=K[2];J<me;++J)Q.write_shift(-4,W.FATSECT);Ne(K[3]),Ne(K[4]);for(var fe=0,he=0,ge=I.FileIndex[0];fe<I.FileIndex.length;++fe)ge=I.FileIndex[fe],ge.content&&(he=ge.content.length,!(he<4096)&&(ge.start=me,Ne(he+511>>9)));for(Ne(K[6]+7>>3);Q.l&511;)Q.write_shift(-4,W.ENDOFCHAIN);for(me=J=0,fe=0;fe<I.FileIndex.length;++fe)ge=I.FileIndex[fe],ge.content&&(he=ge.content.length,!(!he||he>=4096)&&(ge.start=me,Ne(he+63>>6)));for(;Q.l&511;)Q.write_shift(-4,W.ENDOFCHAIN);for(J=0;J<K[4]<<2;++J){var Ee=I.FullPaths[J];if(!Ee||Ee.length===0){for(fe=0;fe<17;++fe)Q.write_shift(4,0);for(fe=0;fe<3;++fe)Q.write_shift(4,-1);for(fe=0;fe<12;++fe)Q.write_shift(4,0);continue}ge=I.FileIndex[J],J===0&&(ge.start=ge.size?ge.start-1:A);var Ie=J===0&&L.root||ge.name;if(he=2*(Ie.length+1),Q.write_shift(64,Ie,"utf16le"),Q.write_shift(2,he),Q.write_shift(1,ge.type),Q.write_shift(1,ge.color),Q.write_shift(-4,ge.L),Q.write_shift(-4,ge.R),Q.write_shift(-4,ge.C),ge.clsid)Q.write_shift(16,ge.clsid,"hex");else for(fe=0;fe<4;++fe)Q.write_shift(4,0);Q.write_shift(4,ge.state||0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,ge.start),Q.write_shift(4,ge.size),Q.write_shift(4,0)}for(J=1;J<I.FileIndex.length;++J)if(ge=I.FileIndex[J],ge.size>=4096)if(Q.l=ge.start+1<<9,pt&&Buffer.isBuffer(ge.content))ge.content.copy(Q,Q.l,0,ge.size),Q.l+=ge.size+511&-512;else{for(fe=0;fe<ge.size;++fe)Q.write_shift(1,ge.content[fe]);for(;fe&511;++fe)Q.write_shift(1,0)}for(J=1;J<I.FileIndex.length;++J)if(ge=I.FileIndex[J],ge.size>0&&ge.size<4096)if(pt&&Buffer.isBuffer(ge.content))ge.content.copy(Q,Q.l,0,ge.size),Q.l+=ge.size+63&-64;else{for(fe=0;fe<ge.size;++fe)Q.write_shift(1,ge.content[fe]);for(;fe&63;++fe)Q.write_shift(1,0)}if(pt)Q.l=Q.length;else for(;Q.l<Q.length;)Q.write_shift(1,0);return Q}function T(I,V){var L=I.FullPaths.map(function(fe){return fe.toUpperCase()}),K=L.map(function(fe){var he=fe.split("/");return he[he.length-(fe.slice(-1)=="/"?2:1)]}),Q=!1;V.charCodeAt(0)===47?(Q=!0,V=L[0].slice(0,-1)+V):Q=V.indexOf("/")!==-1;var J=V.toUpperCase(),me=Q===!0?L.indexOf(J):K.indexOf(J);if(me!==-1)return I.FileIndex[me];var Ne=!J.match(Mu);for(J=J.replace(ka,""),Ne&&(J=J.replace(Mu,"!")),me=0;me<L.length;++me)if((Ne?L[me].replace(Mu,"!"):L[me]).replace(ka,"")==J||(Ne?K[me].replace(Mu,"!"):K[me]).replace(ka,"")==J)return I.FileIndex[me];return null}var k=64,A=-2,P="d0cf11e0a1b11ae1",M=[208,207,17,224,161,177,26,225],U="00000000000000000000000000000000",W={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:A,FREESECT:-1,HEADER_SIGNATURE:P,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Y(I,V,L){u();var K=E(I,L);c.writeFileSync(V,K)}function B(I){for(var V=new Array(I.length),L=0;L<I.length;++L)V[L]=String.fromCharCode(I[L]);return V.join("")}function ae(I,V){var L=E(I,V);switch(V&&V.type||"buffer"){case"file":return u(),c.writeFileSync(V.filename,L),L;case"binary":return typeof L=="string"?L:B(L);case"base64":return df(typeof L=="string"?L:B(L));case"buffer":if(pt)return Buffer.isBuffer(L)?L:ri(L);case"array":return typeof L=="string"?tn(L):L}return L}var oe;function D(I){try{var V=I.InflateRaw,L=new V;if(L._processChunk(new Uint8Array([3,0]),L._finishFlushFlag),L.bytesRead)oe=I;else throw new Error("zlib does not expose bytesRead")}catch(K){console.error("cannot use native zlib: "+(K.message||K))}}function H(I,V){if(!oe)return re(I,V);var L=oe.InflateRaw,K=new L,Q=K._processChunk(I.slice(I.l),K._finishFlushFlag);return I.l+=K.bytesRead,Q}function G(I){return oe?oe.deflateRawSync(I):Xe(I)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function pe(I){var V=(I<<1|I<<11)&139536|(I<<5|I<<15)&558144;return(V>>16|V>>8|V)&255}for(var ne=typeof Uint8Array<"u",ee=ne?new Uint8Array(256):[],we=0;we<256;++we)ee[we]=pe(we);function F(I,V){var L=ee[I&255];return V<=8?L>>>8-V:(L=L<<8|ee[I>>8&255],V<=16?L>>>16-V:(L=L<<8|ee[I>>16&255],L>>>24-V))}function Ue(I,V){var L=V&7,K=V>>>3;return(I[K]|(L<=6?0:I[K+1]<<8))>>>L&3}function R(I,V){var L=V&7,K=V>>>3;return(I[K]|(L<=5?0:I[K+1]<<8))>>>L&7}function ve(I,V){var L=V&7,K=V>>>3;return(I[K]|(L<=4?0:I[K+1]<<8))>>>L&15}function xe(I,V){var L=V&7,K=V>>>3;return(I[K]|(L<=3?0:I[K+1]<<8))>>>L&31}function de(I,V){var L=V&7,K=V>>>3;return(I[K]|(L<=1?0:I[K+1]<<8))>>>L&127}function Ve(I,V,L){var K=V&7,Q=V>>>3,J=(1<<L)-1,me=I[Q]>>>K;return L<8-K||(me|=I[Q+1]<<8-K,L<16-K)||(me|=I[Q+2]<<16-K,L<24-K)||(me|=I[Q+3]<<24-K),me&J}function ft(I,V,L){var K=V&7,Q=V>>>3;return K<=5?I[Q]|=(L&7)<<K:(I[Q]|=L<<K&255,I[Q+1]=(L&7)>>8-K),V+3}function it(I,V,L){var K=V&7,Q=V>>>3;return L=(L&1)<<K,I[Q]|=L,V+1}function mt(I,V,L){var K=V&7,Q=V>>>3;return L<<=K,I[Q]|=L&255,L>>>=8,I[Q+1]=L,V+8}function ht(I,V,L){var K=V&7,Q=V>>>3;return L<<=K,I[Q]|=L&255,L>>>=8,I[Q+1]=L&255,I[Q+2]=L>>>8,V+16}function He(I,V){var L=I.length,K=2*L>V?2*L:V+5,Q=0;if(L>=V)return I;if(pt){var J=NO(K);if(I.copy)I.copy(J);else for(;Q<I.length;++Q)J[Q]=I[Q];return J}else if(ne){var me=new Uint8Array(K);if(me.set)me.set(I);else for(;Q<L;++Q)me[Q]=I[Q];return me}return I.length=K,I}function gt(I){for(var V=new Array(I),L=0;L<I;++L)V[L]=0;return V}function Rt(I,V,L){var K=1,Q=0,J=0,me=0,Ne=0,fe=I.length,he=ne?new Uint16Array(32):gt(32);for(J=0;J<32;++J)he[J]=0;for(J=fe;J<L;++J)I[J]=0;fe=I.length;var ge=ne?new Uint16Array(fe):gt(fe);for(J=0;J<fe;++J)he[Q=I[J]]++,K<Q&&(K=Q),ge[J]=0;for(he[0]=0,J=1;J<=K;++J)he[J+16]=Ne=Ne+he[J-1]<<1;for(J=0;J<fe;++J)Ne=I[J],Ne!=0&&(ge[J]=he[Ne+16]++);var Ee=0;for(J=0;J<fe;++J)if(Ee=I[J],Ee!=0)for(Ne=F(ge[J],K)>>K-Ee,me=(1<<K+4-Ee)-1;me>=0;--me)V[Ne|me<<Ee]=Ee&15|J<<4;return K}var Gt=ne?new Uint16Array(512):gt(512),Jt=ne?new Uint16Array(32):gt(32);if(!ne){for(var Vt=0;Vt<512;++Vt)Gt[Vt]=0;for(Vt=0;Vt<32;++Vt)Jt[Vt]=0}(function(){for(var I=[],V=0;V<32;V++)I.push(5);Rt(I,Jt,32);var L=[];for(V=0;V<=143;V++)L.push(8);for(;V<=255;V++)L.push(9);for(;V<=279;V++)L.push(7);for(;V<=287;V++)L.push(8);Rt(L,Gt,288)})();var Ge=function(){for(var V=ne?new Uint8Array(32768):[],L=0,K=0;L<ie.length-1;++L)for(;K<ie[L+1];++K)V[K]=L;for(;K<32768;++K)V[K]=29;var Q=ne?new Uint8Array(259):[];for(L=0,K=0;L<X.length-1;++L)for(;K<X[L+1];++K)Q[K]=L;function J(Ne,fe){for(var he=0;he<Ne.length;){var ge=Math.min(65535,Ne.length-he),Ee=he+ge==Ne.length;for(fe.write_shift(1,+Ee),fe.write_shift(2,ge),fe.write_shift(2,~ge&65535);ge-- >0;)fe[fe.l++]=Ne[he++]}return fe.l}function me(Ne,fe){for(var he=0,ge=0,Ee=ne?new Uint16Array(32768):[];ge<Ne.length;){var Ie=Math.min(65535,Ne.length-ge);if(Ie<10){for(he=ft(fe,he,+(ge+Ie==Ne.length)),he&7&&(he+=8-(he&7)),fe.l=he/8|0,fe.write_shift(2,Ie),fe.write_shift(2,~Ie&65535);Ie-- >0;)fe[fe.l++]=Ne[ge++];he=fe.l*8;continue}he=ft(fe,he,+(ge+Ie==Ne.length)+2);for(var Be=0;Ie-- >0;){var De=Ne[ge];Be=(Be<<5^De)&32767;var Le=-1,ot=0;if((Le=Ee[Be])&&(Le|=ge&-32768,Le>ge&&(Le-=32768),Le<ge))for(;Ne[Le+ot]==Ne[ge+ot]&&ot<250;)++ot;if(ot>2){De=Q[ot],De<=22?he=mt(fe,he,ee[De+1]>>1)-1:(mt(fe,he,3),he+=5,mt(fe,he,ee[De-23]>>5),he+=3);var fr=De<8?0:De-4>>2;fr>0&&(ht(fe,he,ot-X[De]),he+=fr),De=V[ge-Le],he=mt(fe,he,ee[De]>>3),he-=3;var mr=De<4?0:De-2>>1;mr>0&&(ht(fe,he,ge-Le-ie[De]),he+=mr);for(var fa=0;fa<ot;++fa)Ee[Be]=ge&32767,Be=(Be<<5^Ne[ge])&32767,++ge;Ie-=ot-1}else De<=143?De=De+48:he=it(fe,he,1),he=mt(fe,he,ee[De]),Ee[Be]=ge&32767,++ge}he=mt(fe,he,0)-1}return fe.l=(he+7)/8|0,fe.l}return function(fe,he){return fe.length<8?J(fe,he):me(fe,he)}}();function Xe(I){var V=je(50+Math.floor(I.length*1.1)),L=Ge(I,V);return V.slice(0,L)}var jt=ne?new Uint16Array(32768):gt(32768),ye=ne?new Uint16Array(32768):gt(32768),te=ne?new Uint16Array(128):gt(128),ke=1,$e=1;function q(I,V){var L=xe(I,V)+257;V+=5;var K=xe(I,V)+1;V+=5;var Q=ve(I,V)+4;V+=4;for(var J=0,me=ne?new Uint8Array(19):gt(19),Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fe=1,he=ne?new Uint8Array(8):gt(8),ge=ne?new Uint8Array(8):gt(8),Ee=me.length,Ie=0;Ie<Q;++Ie)me[Z[Ie]]=J=R(I,V),fe<J&&(fe=J),he[J]++,V+=3;var Be=0;for(he[0]=0,Ie=1;Ie<=fe;++Ie)ge[Ie]=Be=Be+he[Ie-1]<<1;for(Ie=0;Ie<Ee;++Ie)(Be=me[Ie])!=0&&(Ne[Ie]=ge[Be]++);var De=0;for(Ie=0;Ie<Ee;++Ie)if(De=me[Ie],De!=0){Be=ee[Ne[Ie]]>>8-De;for(var Le=(1<<7-De)-1;Le>=0;--Le)te[Be|Le<<De]=De&7|Ie<<3}var ot=[];for(fe=1;ot.length<L+K;)switch(Be=te[de(I,V)],V+=Be&7,Be>>>=3){case 16:for(J=3+Ue(I,V),V+=2,Be=ot[ot.length-1];J-- >0;)ot.push(Be);break;case 17:for(J=3+R(I,V),V+=3;J-- >0;)ot.push(0);break;case 18:for(J=11+de(I,V),V+=7;J-- >0;)ot.push(0);break;default:ot.push(Be),fe<Be&&(fe=Be);break}var fr=ot.slice(0,L),mr=ot.slice(L);for(Ie=L;Ie<286;++Ie)fr[Ie]=0;for(Ie=K;Ie<30;++Ie)mr[Ie]=0;return ke=Rt(fr,jt,286),$e=Rt(mr,ye,30),V}function z(I,V){if(I[0]==3&&!(I[1]&3))return[Ri(V),2];for(var L=0,K=0,Q=NO(V||1<<18),J=0,me=Q.length>>>0,Ne=0,fe=0;!(K&1);){if(K=R(I,L),L+=3,K>>>1)K>>1==1?(Ne=9,fe=5):(L=q(I,L),Ne=ke,fe=$e);else{L&7&&(L+=8-(L&7));var he=I[L>>>3]|I[(L>>>3)+1]<<8;if(L+=32,he>0)for(!V&&me<J+he&&(Q=He(Q,J+he),me=Q.length);he-- >0;)Q[J++]=I[L>>>3],L+=8;continue}for(;;){!V&&me<J+32767&&(Q=He(Q,J+32767),me=Q.length);var ge=Ve(I,L,Ne),Ee=K>>>1==1?Gt[ge]:jt[ge];if(L+=Ee&15,Ee>>>=4,!(Ee>>>8&255))Q[J++]=Ee;else{if(Ee==256)break;Ee-=257;var Ie=Ee<8?0:Ee-4>>2;Ie>5&&(Ie=0);var Be=J+X[Ee];Ie>0&&(Be+=Ve(I,L,Ie),L+=Ie),ge=Ve(I,L,fe),Ee=K>>>1==1?Jt[ge]:ye[ge],L+=Ee&15,Ee>>>=4;var De=Ee<4?0:Ee-2>>1,Le=ie[Ee];for(De>0&&(Le+=Ve(I,L,De),L+=De),!V&&me<Be&&(Q=He(Q,Be+100),me=Q.length);J<Be;)Q[J]=Q[J-Le],++J}}}return V?[Q,L+7>>>3]:[Q.slice(0,J),L+7>>>3]}function re(I,V){var L=I.slice(I.l||0),K=z(L,V);return I.l+=K[1],K[0]}function le(I,V){if(I)typeof console<"u"&&console.error(V);else throw new Error(V)}function _e(I,V){var L=I;oa(L,0);var K=[],Q=[],J={FileIndex:K,FullPaths:Q};j(J,{root:V.root});for(var me=L.length-4;(L[me]!=80||L[me+1]!=75||L[me+2]!=5||L[me+3]!=6)&&me>=0;)--me;L.l=me+4,L.l+=4;var Ne=L.read_shift(2);L.l+=6;var fe=L.read_shift(4);for(L.l=fe,me=0;me<Ne;++me){L.l+=20;var he=L.read_shift(4),ge=L.read_shift(4),Ee=L.read_shift(2),Ie=L.read_shift(2),Be=L.read_shift(2);L.l+=8;var De=L.read_shift(4),Le=l(L.slice(L.l+Ee,L.l+Ee+Ie));L.l+=Ee+Ie+Be;var ot=L.l;L.l=De+4,be(L,he,ge,J,Le),L.l=ot}return J}function be(I,V,L,K,Q){I.l+=2;var J=I.read_shift(2),me=I.read_shift(2),Ne=o(I);if(J&8257)throw new Error("Unsupported ZIP encryption");for(var fe=I.read_shift(4),he=I.read_shift(4),ge=I.read_shift(4),Ee=I.read_shift(2),Ie=I.read_shift(2),Be="",De=0;De<Ee;++De)Be+=String.fromCharCode(I[I.l++]);if(Ie){var Le=l(I.slice(I.l,I.l+Ie));(Le[21589]||{}).mt&&(Ne=Le[21589].mt),((Q||{})[21589]||{}).mt&&(Ne=Q[21589].mt)}I.l+=Ie;var ot=I.slice(I.l,I.l+he);switch(me){case 8:ot=H(I,ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+me)}var fr=!1;J&8&&(fe=I.read_shift(4),fe==134695760&&(fe=I.read_shift(4),fr=!0),he=I.read_shift(4),ge=I.read_shift(4)),he!=V&&le(fr,"Bad compressed size: "+V+" != "+he),ge!=L&&le(fr,"Bad uncompressed size: "+L+" != "+ge),yr(K,Be,ot,{unsafe:!0,mt:Ne})}function Ze(I,V){var L=V||{},K=[],Q=[],J=je(1),me=L.compression?8:0,Ne=0,fe=0,he=0,ge=0,Ee=0,Ie=I.FullPaths[0],Be=Ie,De=I.FileIndex[0],Le=[],ot=0;for(fe=1;fe<I.FullPaths.length;++fe)if(Be=I.FullPaths[fe].slice(Ie.length),De=I.FileIndex[fe],!(!De.size||!De.content||Be=="Sh33tJ5")){var fr=ge,mr=je(Be.length);for(he=0;he<Be.length;++he)mr.write_shift(1,Be.charCodeAt(he)&127);mr=mr.slice(0,mr.l),Le[Ee]=Zce.buf(De.content,0);var fa=De.content;me==8&&(fa=G(fa)),J=je(30),J.write_shift(4,67324752),J.write_shift(2,20),J.write_shift(2,Ne),J.write_shift(2,me),De.mt?i(J,De.mt):J.write_shift(4,0),J.write_shift(-4,Le[Ee]),J.write_shift(4,fa.length),J.write_shift(4,De.content.length),J.write_shift(2,mr.length),J.write_shift(2,0),ge+=J.length,K.push(J),ge+=mr.length,K.push(mr),ge+=fa.length,K.push(fa),J=je(46),J.write_shift(4,33639248),J.write_shift(2,0),J.write_shift(2,20),J.write_shift(2,Ne),J.write_shift(2,me),J.write_shift(4,0),J.write_shift(-4,Le[Ee]),J.write_shift(4,fa.length),J.write_shift(4,De.content.length),J.write_shift(2,mr.length),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(4,0),J.write_shift(4,fr),ot+=J.l,Q.push(J),ot+=mr.length,Q.push(mr),++Ee}return J=je(22),J.write_shift(4,101010256),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(2,Ee),J.write_shift(2,Ee),J.write_shift(4,ot),J.write_shift(4,ge),J.write_shift(2,0),Qr([Qr(K),Qr(Q),J])}var Te={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ye(I,V){if(I.ctype)return I.ctype;var L=I.name||"",K=L.match(/\.([^\.]+)$/);return K&&Te[K[1]]||V&&(K=(L=V).match(/[\.\\]([^\.\\])+$/),K&&Te[K[1]])?Te[K[1]]:"application/octet-stream"}function Dt(I){for(var V=df(I),L=[],K=0;K<V.length;K+=76)L.push(V.slice(K,K+76));return L.join(`\r
`)+`\r
`}function ze(I){var V=I.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(he){var ge=he.charCodeAt(0).toString(16).toUpperCase();return"="+(ge.length==1?"0"+ge:ge)});V=V.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),V.charAt(0)==`
`&&(V="=0D"+V.slice(1)),V=V.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var L=[],K=V.split(`\r
`),Q=0;Q<K.length;++Q){var J=K[Q];if(J.length==0){L.push("");continue}for(var me=0;me<J.length;){var Ne=76,fe=J.slice(me,me+Ne);fe.charAt(Ne-1)=="="?Ne--:fe.charAt(Ne-2)=="="?Ne-=2:fe.charAt(Ne-3)=="="&&(Ne-=3),fe=J.slice(me,me+Ne),me+=Ne,me<J.length&&(fe+="="),L.push(fe)}}return L.join(`\r
`)}function Ot(I){for(var V=[],L=0;L<I.length;++L){for(var K=I[L];L<=I.length&&K.charAt(K.length-1)=="=";)K=K.slice(0,K.length-1)+I[++L];V.push(K)}for(var Q=0;Q<V.length;++Q)V[Q]=V[Q].replace(/[=][0-9A-Fa-f]{2}/g,function(J){return String.fromCharCode(parseInt(J.slice(1),16))});return tn(V.join(`\r
`))}function _t(I,V,L){for(var K="",Q="",J="",me,Ne=0;Ne<10;++Ne){var fe=V[Ne];if(!fe||fe.match(/^\s*$/))break;var he=fe.match(/^(.*?):\s*([^\s].*)$/);if(he)switch(he[1].toLowerCase()){case"content-location":K=he[2].trim();break;case"content-type":J=he[2].trim();break;case"content-transfer-encoding":Q=he[2].trim();break}}switch(++Ne,Q.toLowerCase()){case"base64":me=tn(un(V.slice(Ne).join("")));break;case"quoted-printable":me=Ot(V.slice(Ne));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Q)}var ge=yr(I,K.slice(L.length),me,{unsafe:!0});J&&(ge.ctype=J)}function Tt(I,V){if(B(I.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var L=V&&V.root||"",K=(pt&&Buffer.isBuffer(I)?I.toString("binary"):B(I)).split(`\r
`),Q=0,J="";for(Q=0;Q<K.length;++Q)if(J=K[Q],!!/^Content-Location:/i.test(J)&&(J=J.slice(J.indexOf("file")),L||(L=J.slice(0,J.lastIndexOf("/")+1)),J.slice(0,L.length)!=L))for(;L.length>0&&(L=L.slice(0,L.length-1),L=L.slice(0,L.lastIndexOf("/")+1),J.slice(0,L.length)!=L););var me=(K[1]||"").match(/boundary="(.*?)"/);if(!me)throw new Error("MAD cannot find boundary");var Ne="--"+(me[1]||""),fe=[],he=[],ge={FileIndex:fe,FullPaths:he};j(ge);var Ee,Ie=0;for(Q=0;Q<K.length;++Q){var Be=K[Q];Be!==Ne&&Be!==Ne+"--"||(Ie++&&_t(ge,K.slice(Ee,Q),L),Ee=Q)}return ge}function zr(I,V){var L=V||{},K=L.boundary||"SheetJS";K="------="+K;for(var Q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+K.slice(2)+'"',"","",""],J=I.FullPaths[0],me=J,Ne=I.FileIndex[0],fe=1;fe<I.FullPaths.length;++fe)if(me=I.FullPaths[fe].slice(J.length),Ne=I.FileIndex[fe],!(!Ne.size||!Ne.content||me=="Sh33tJ5")){me=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ot){return"_x"+ot.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ot){return"_u"+ot.charCodeAt(0).toString(16)+"_"});for(var he=Ne.content,ge=pt&&Buffer.isBuffer(he)?he.toString("binary"):B(he),Ee=0,Ie=Math.min(1024,ge.length),Be=0,De=0;De<=Ie;++De)(Be=ge.charCodeAt(De))>=32&&Be<128&&++Ee;var Le=Ee>=Ie*4/5;Q.push(K),Q.push("Content-Location: "+(L.root||"file:///C:/SheetJS/")+me),Q.push("Content-Transfer-Encoding: "+(Le?"quoted-printable":"base64")),Q.push("Content-Type: "+Ye(Ne,me)),Q.push(""),Q.push(Le?ze(ge):Dt(ge))}return Q.push(K+`--\r
`),Q.join(`\r
`)}function ct(I){var V={};return j(V,I),V}function yr(I,V,L,K){var Q=K&&K.unsafe;Q||j(I);var J=!Q&&Je.find(I,V);if(!J){var me=I.FullPaths[0];V.slice(0,me.length)==me?me=V:(me.slice(-1)!="/"&&(me+="/"),me=(me+V).replace("//","/")),J={name:s(V),type:2},I.FileIndex.push(J),I.FullPaths.push(me),Q||Je.utils.cfb_gc(I)}return J.content=L,J.size=L?L.length:0,K&&(K.CLSID&&(J.clsid=K.CLSID),K.mt&&(J.mt=K.mt),K.ct&&(J.ct=K.ct)),J}function ue(I,V){j(I);var L=Je.find(I,V);if(L){for(var K=0;K<I.FileIndex.length;++K)if(I.FileIndex[K]==L)return I.FileIndex.splice(K,1),I.FullPaths.splice(K,1),!0}return!1}function Ce(I,V,L){j(I);var K=Je.find(I,V);if(K){for(var Q=0;Q<I.FileIndex.length;++Q)if(I.FileIndex[Q]==K)return I.FileIndex[Q].name=s(L),I.FullPaths[Q]=L,!0}return!1}function We(I){_(I,!0)}return t.find=T,t.read=w,t.parse=d,t.write=ae,t.writeFile=Y,t.utils={cfb_new:ct,cfb_add:yr,cfb_del:ue,cfb_mov:Ce,cfb_gc:We,ReadShift:Qu,CheckField:O6,prep_blob:oa,bconcat:Qr,use_zlib:D,_deflateRaw:Xe,_inflateRaw:re,consts:W},t}();let Ni;function eue(e){Ni=e}function tue(e){return typeof e=="string"?qf(e):Array.isArray(e)?Cce(e):e}function Vf(e,t,r){if(typeof Ni<"u"&&Ni.writeFileSync)return r?Ni.writeFileSync(e,t,r):Ni.writeFileSync(e,t);if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=qf(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?fs(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([tue(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=eo(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function rue(e){if(typeof Ni<"u")return Ni.readFileSync(e);if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function kr(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function EO(e,t){for(var r=[],a=kr(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function op(e){for(var t=[],r=kr(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function lp(e){for(var t=[],r=kr(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function aue(e){for(var t=[],r=kr(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var Uh=new Date(1899,11,30,0,0,0);function Kr(e,t){var r=e.getTime();t&&(r-=1462*24*60*60*1e3);var a=Uh.getTime()+(e.getTimezoneOffset()-Uh.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var c6=new Date,nue=Uh.getTime()+(c6.getTimezoneOffset()-Uh.getTimezoneOffset())*6e4,AO=c6.getTimezoneOffset();function cp(e){var t=new Date;return t.setTime(e*24*60*60*1e3+nue),t.getTimezoneOffset()!==AO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-AO)*6e4),t}function sue(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var PO=new Date("2017-02-19T19:06:09.000Z"),u6=isNaN(PO.getFullYear())?new Date("2/19/17"):PO,iue=u6.getFullYear()==2017;function lr(e,t){var r=new Date(e);if(iue)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(u6.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Ho(e,t){if(pt&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return fs(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return fs(YP(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return fs(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return fs(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function Yt(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Yt(e[r]));return t}function wr(e,t){for(var r="";r.length<t;)r+=e;return r}function ts(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var oue=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ic(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&oue.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var lue=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function d6(e){return e?e.content&&e.type?Ho(e.content,!0):e.data?$l(e.data):e.asNodeBuffer&&pt?$l(e.asNodeBuffer().toString("binary")):e.asBinary?$l(e.asBinary()):e._data&&e._data.getContent?$l(Ho(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function f6(e){if(!e)return null;if(e.data)return Rh(e.data);if(e.asNodeBuffer&&pt)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?Rh(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function cue(e){return e&&e.name.slice(-4)===".bin"?f6(e):d6(e)}function wn(e,t){for(var r=e.FullPaths||kr(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function Qw(e,t){var r=wn(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Dr(e,t,r){if(!r)return cue(Qw(e,t));if(!t)return null;try{return Dr(e,t)}catch{return null}}function rn(e,t,r){if(!r)return d6(Qw(e,t));if(!t)return null;try{return rn(e,t)}catch{return null}}function m6(e,t,r){if(!r)return f6(Qw(e,t));if(!t)return null;try{return m6(e,t)}catch{return null}}function DO(e){for(var t=e.FullPaths||kr(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function dt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return pt?a=ri(r):a=Oce(r),Je.utils.cfb_add(e,t,a)}Je.utils.cfb_add(e,t,r)}else e.file(t,r)}function Jw(){return Je.utils.cfb_new()}function h6(e,t){switch(t.type){case"base64":return Je.read(e,{type:"base64"});case"binary":return Je.read(e,{type:"binary"});case"buffer":case"array":return Je.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Fu(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Er=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,uue=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,IO=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,due=/<[^>]*>/g,Ea=Er.match(IO)?IO:due,fue=/<\w*:/,mue=/<(\/?)\w+:/;function st(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(uue),l=0,c="",u=0,d="",f="",m=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(d=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(m=(s=f.charCodeAt(i+1))==34||s==39?1:0,c=f.slice(i+1+m,f.length-m),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,r||(a[d.toLowerCase()]=c);else{var p=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(a[p]&&d.slice(l-3,l)=="ext")continue;a[p]=c,r||(a[p.toLowerCase()]=c)}}return a}function Ns(e){return e.replace(mue,"<$1")}var x6={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Zw=op(x6),At=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return x6[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),eN=/[&<>'"]/g,hue=/[\u0000-\u0008\u000b-\u001f]/g;function Wt(e){var t=e+"";return t.replace(eN,function(r){return Zw[r]}).replace(hue,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function MO(e){return Wt(e).replace(/ /g,"_x0020_")}var p6=/[\u0000-\u001f]/g;function tN(e){var t=e+"";return t.replace(eN,function(r){return Zw[r]}).replace(/\n/g,"<br/>").replace(p6,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function xue(e){var t=e+"";return t.replace(eN,function(r){return Zw[r]}).replace(p6,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var FO=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function pue(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function sr(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Eg(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function RO(e){var t=Ri(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function LO(e){return ri(e,"binary").toString("utf8")}var M0="foo bar baz",Ht=pt&&(LO(M0)==Eg(M0)&&LO||RO(M0)==Eg(M0)&&RO)||Eg,fs=pt?function(e){return ri(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},mf=function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),g6=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}}(),gue=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),yue=/<\/?(?:vt:)?variant>/g,vue=/<(?:vt:)([^>]*)>([\s\S]*)</;function $O(e,t){var r=st(e),a=e.match(gue(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(yue,"").match(vue);o&&s.push({v:Ht(o[2]),t:o[1]})}),s}var y6=/(^\s|\s$|\n)/;function la(e,t){return"<"+e+(t.match(y6)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function hf(e){return kr(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Me(e,t,r){return"<"+e+(r!=null?hf(r):"")+(t!=null?(t.match(y6)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function b1(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function bue(e,t){switch(typeof e){case"string":var r=Me("vt:lpwstr",Wt(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return Me((e|0)==e?"vt:i4":"vt:r8",Wt(String(e)));case"boolean":return Me("vt:bool",e?"true":"false")}if(e instanceof Date)return Me("vt:filetime",b1(e));throw new Error("Unable to serialize "+e)}function rN(e){if(pt&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ht(eo(Gw(e)));throw new Error("Bad input format: expected Buffer or string")}var xf=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ur={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},il=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Za={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function wue(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function Nue(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var BO=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},UO=pt?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:ri(t)})):BO(e)}:BO,WO=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(Ds(e,s)));return a.join("").replace(ka,"")},up=pt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(ka,""):WO(e,t,r)}:WO,qO=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},v6=pt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):qO(e,t,r)}:qO,KO=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(jl(e,s)));return a.join("")},ru=pt?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):KO(t,r,a)}:KO,b6=function(e,t){var r=Yr(e,t);return r>0?ru(e,t+4,t+4+r-1):""},aN=b6,w6=function(e,t){var r=Yr(e,t);return r>0?ru(e,t+4,t+4+r-1):""},nN=w6,N6=function(e,t){var r=2*Yr(e,t);return r>0?ru(e,t+4,t+4+r-1):""},sN=N6,j6=function(t,r){var a=Yr(t,r);return a>0?up(t,r+4,r+4+a):""},iN=j6,S6=function(e,t){var r=Yr(e,t);return r>0?ru(e,t+4,t+4+r):""},oN=S6,k6=function(e,t){return wue(e,t)},Wh=k6,lN=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pt&&(aN=function(t,r){if(!Buffer.isBuffer(t))return b6(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},nN=function(t,r){if(!Buffer.isBuffer(t))return w6(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},sN=function(t,r){if(!Buffer.isBuffer(t))return N6(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},iN=function(t,r){if(!Buffer.isBuffer(t))return j6(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},oN=function(t,r){if(!Buffer.isBuffer(t))return S6(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},Wh=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):k6(t,r)},lN=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});function C6(){up=function(e,t,r){return Ct.utils.decode(1200,e.slice(t,r)).replace(ka,"")},ru=function(e,t,r){return Ct.utils.decode(65001,e.slice(t,r))},aN=function(e,t){var r=Yr(e,t);return r>0?Ct.utils.decode(Vo,e.slice(t+4,t+4+r-1)):""},nN=function(e,t){var r=Yr(e,t);return r>0?Ct.utils.decode(sn,e.slice(t+4,t+4+r-1)):""},sN=function(e,t){var r=2*Yr(e,t);return r>0?Ct.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},iN=function(e,t){var r=Yr(e,t);return r>0?Ct.utils.decode(1200,e.slice(t+4,t+4+r)):""},oN=function(e,t){var r=Yr(e,t);return r>0?Ct.utils.decode(65001,e.slice(t+4,t+4+r)):""}}typeof Ct<"u"&&C6();var jl=function(e,t){return e[t]},Ds=function(e,t){return e[t+1]*256+e[t]},jue=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Yr=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},xo=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Sue=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Qu(e,t){var r="",a,s,i=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,pt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Ds(this,u)),u+=2;e*=2;break;case"utf8":r=ru(this,this.l,this.l+e);break;case"utf16le":e*=2,r=up(this,this.l,this.l+e);break;case"wstr":if(typeof Ct<"u")r=Ct.utils.decode(sn,this.slice(this.l,this.l+2*e));else return Qu.call(this,e,"dbcs");e=2*e;break;case"lpstr-ansi":r=aN(this,this.l),e=4+Yr(this,this.l);break;case"lpstr-cp":r=nN(this,this.l),e=4+Yr(this,this.l);break;case"lpwstr":r=sN(this,this.l),e=4+2*Yr(this,this.l);break;case"lpp4":e=4+Yr(this,this.l),r=iN(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Yr(this,this.l),r=oN(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=jl(this,this.l+e++))!==0;)i.push(Iu(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Ds(this,this.l+e))!==0;)i.push(Iu(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=jl(this,u),this.l=u+1,l=Qu.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Iu(Ds(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":if(typeof Ct<"u"){r=Ct.utils.decode(sn,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=jl(this,u),this.l=u+1,l=Qu.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Iu(jl(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return a=jl(this,this.l),this.l++,a;case 2:return a=(t==="i"?jue:Ds)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(a=(e>0?xo:Sue)(this,this.l),this.l+=4,a):(s=Yr(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Wh(this,this.l):s=Wh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=v6(this,this.l,e);break}}return this.l+=e,r}var kue=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Cue=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Oue=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function _ue(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Oue(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){if(typeof Ct<"u"&&Vo==874)for(s=0;s!=t.length;++s){var i=Ct.utils.encode(Vo,t.charAt(s));this[this.l+s]=i[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var o=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var l=t.charCodeAt(s);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,kue(this,t,this.l);break;case 8:if(a=8,r==="f"){Nue(this,t,this.l);break}case 16:break;case-4:a=4,Cue(this,t,this.l);break}return this.l+=a,this}function O6(e,t){var r=v6(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function oa(e,t){e.l=t,e.read_shift=Qu,e.chk=O6,e.write_shift=_ue}function _a(e,t){e.l+=t}function je(e){var t=Ri(e);return oa(t,0),t}function ai(e,t,r){if(e){var a,s,i;oa(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=wf[l]||wf[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var d=u.f&&u.f(e,i,r);if(e.l=c,t(d,u,l))return}}}function za(){var e=[],t=pt?256:2048,r=function(u){var d=je(u);return oa(d,0),d},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(s(),a=r(Math.max(u+1,t)))},o=function(){return s(),Qr(e)},l=function(u){s(),a=u,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Oe(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=wf[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&lN(r)&&e.push(r)}}function Ju(e,t,r){var a=Yt(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function VO(e,t,r){var a=Yt(e);return a.s=Ju(a.s,t.s,r),a.e=Ju(a.e,t.s,r),a}function Zu(e,t){if(e.cRel&&e.c<0)for(e=Yt(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Yt(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=nt(e);return!e.cRel&&e.cRel!=null&&(r=Aue(r)),!e.rRel&&e.rRel!=null&&(r=Tue(r)),r}function Ag(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+or(e.s.c)+":"+(e.e.cRel?"":"$")+or(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Nr(e.s.r)+":"+(e.e.rRel?"":"$")+Nr(e.e.r):Zu(e.s,t.biff)+":"+Zu(e.e,t.biff)}function cN(e){return parseInt(Eue(e),10)-1}function Nr(e){return""+(e+1)}function Tue(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Eue(e){return e.replace(/\$(\d+)$/,"$1")}function uN(e){for(var t=Pue(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function or(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Aue(e){return e.replace(/^([A-Z])/,"$$$1")}function Pue(e){return e.replace(/^\$([A-Z])/,"$1")}function Due(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function xr(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function nt(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Fa(e){var t=e.indexOf(":");return t==-1?{s:xr(e),e:xr(e)}:{s:xr(e.slice(0,t)),e:xr(e.slice(t+1))}}function ut(e,t){return typeof t>"u"||typeof t=="number"?ut(e.s,e.e):(typeof e!="string"&&(e=nt(e)),typeof t!="string"&&(t=nt(t)),e==t?e:e+":"+t)}function Nt(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function zO(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=dn(e.z,r?Kr(t):t)}catch{}try{return e.w=dn((e.XF||{}).numFmtId||(r?14:0),r?Kr(t):t)}catch{return""+t}}function bs(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?ni[e.v]||e.v:t==null?zO(e,e.v):zO(e,t))}function to(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function _6(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?xr(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Nt(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var p={v:t[f][m]},y=o+f,h=l+m;if(u.s.r>y&&(u.s.r=y),u.s.c>h&&(u.s.c=h),u.e.r<y&&(u.e.r=y),u.e.c<h&&(u.e.c=h),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))p=t[f][m];else if(Array.isArray(p.v)&&(p.f=t[f][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(a.nullError)p.t="e",p.v=0;else if(a.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=a.dateNF||et[14],a.cellDates?(p.t="d",p.w=dn(p.z,Kr(p.v))):(p.t="n",p.v=Kr(p.v),p.w=dn(p.z,p.v))):p.t="s";if(s)i[y]||(i[y]=[]),i[y][h]&&i[y][h].z&&(p.z=i[y][h].z),i[y][h]=p;else{var b=nt({c:h,r:y});i[b]&&i[b].z&&(p.z=i[b].z),i[b]=p}}}return u.s.c<1e7&&(i["!ref"]=ut(u)),i}function au(e,t){return _6(null,e,t)}function Iue(e){return e.read_shift(4,"i")}function rs(e,t){return t||(t=je(4)),t.write_shift(4,e),t}function Ca(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Jr(e,t){var r=!1;return t==null&&(r=!0,t=je(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Mue(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Fue(e,t){return t||(t=je(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0),t}function dN(e,t){var r=e.l,a=e.read_shift(1),s=Ca(e),i=[],o={t:s,h:s};if(a&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Mue(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Rue(e,t){var r=!1;return t==null&&(r=!0,t=je(15+4*e.t.length)),t.write_shift(1,0),Jr(e.t,t),r?t.slice(0,t.l):t}var Lue=dN;function $ue(e,t){var r=!1;return t==null&&(r=!0,t=je(23+4*e.t.length)),t.write_shift(1,1),Jr(e.t,t),t.write_shift(4,1),Fue({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function $n(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function ol(e,t){return t==null&&(t=je(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ll(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function cl(e,t){return t==null&&(t=je(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Bue=Ca,T6=Jr;function fN(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function qh(e,t){var r=!1;return t==null&&(r=!0,t=je(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Uue=Ca,w1=fN,mN=qh;function hN(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?Wh([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):xo(t,0)>>2;return r?s/100:s}function E6(e,t){t==null&&(t=je(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-(1<<29)&&e<1<<29?a=1:s==(s|0)&&s>=-(1<<29)&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function A6(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Wue(e,t){return t||(t=je(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ul=A6,nu=Wue;function ja(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Go(e,t){return(t||je(8)).write_shift(8,e,"f")}function que(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var u=_o[s];u&&(t.rgb=gf(u));break;case 2:t.rgb=gf([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Kh(e,t){if(t||(t=je(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Kue(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Vue(e,t){t||(t=je(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function P6(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function zue(e){return P6(e,1)}function Hue(e){return P6(e,2)}var xN=2,$a=3,F0=11,HO=12,Vh=19,R0=64,Gue=65,Xue=71,Yue=4108,Que=4126,Gr=80,D6=81,Jue=[Gr,D6],N1={1:{n:"CodePage",t:xN},2:{n:"Category",t:Gr},3:{n:"PresentationFormat",t:Gr},4:{n:"ByteCount",t:$a},5:{n:"LineCount",t:$a},6:{n:"ParagraphCount",t:$a},7:{n:"SlideCount",t:$a},8:{n:"NoteCount",t:$a},9:{n:"HiddenCount",t:$a},10:{n:"MultimediaClipCount",t:$a},11:{n:"ScaleCrop",t:F0},12:{n:"HeadingPairs",t:Yue},13:{n:"TitlesOfParts",t:Que},14:{n:"Manager",t:Gr},15:{n:"Company",t:Gr},16:{n:"LinksUpToDate",t:F0},17:{n:"CharacterCount",t:$a},19:{n:"SharedDoc",t:F0},22:{n:"HyperlinksChanged",t:F0},23:{n:"AppVersion",t:$a,p:"version"},24:{n:"DigSig",t:Gue},26:{n:"ContentType",t:Gr},27:{n:"ContentStatus",t:Gr},28:{n:"Language",t:Gr},29:{n:"Version",t:Gr},255:{},2147483648:{n:"Locale",t:Vh},2147483651:{n:"Behavior",t:Vh},1919054434:{}},j1={1:{n:"CodePage",t:xN},2:{n:"Title",t:Gr},3:{n:"Subject",t:Gr},4:{n:"Author",t:Gr},5:{n:"Keywords",t:Gr},6:{n:"Comments",t:Gr},7:{n:"Template",t:Gr},8:{n:"LastAuthor",t:Gr},9:{n:"RevNumber",t:Gr},10:{n:"EditTime",t:R0},11:{n:"LastPrinted",t:R0},12:{n:"CreatedDate",t:R0},13:{n:"ModifiedDate",t:R0},14:{n:"PageCount",t:$a},15:{n:"WordCount",t:$a},16:{n:"CharCount",t:$a},17:{n:"Thumbnail",t:Xue},18:{n:"Application",t:Gr},19:{n:"DocSecurity",t:$a},255:{},2147483648:{n:"Locale",t:Vh},2147483651:{n:"Behavior",t:Vh},1919054434:{}},GO={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Zue=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ede(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var tde=ede([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_o=Yt(tde),ni={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},I6={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},S1={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},L0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function pN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function rde(e){var t=pN();if(!e||!e.match)return t;var r={};if((e.match(Ea)||[]).forEach(function(a){var s=st(a);switch(s[0].replace(fue,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[S1[s.ContentType]]!==void 0&&t[S1[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Ur.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function M6(e,t){var r=aue(S1),a=[],s;a[a.length]=Er,a[a.length]=Me("Types",null,{xmlns:Ur.CT,"xmlns:xsd":Ur.xsd,"xmlns:xsi":Ur.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Me("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=Me("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:L0[c][t.bookType]||L0[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){a[a.length]=Me("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:L0[c][t.bookType]||L0[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){a[a.length]=Me("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var yt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function pf(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ed(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Ea)||[]).forEach(function(s){var i=st(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Fu(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function ec(e){var t=[Er,Me("Relationships",null,{xmlns:Ur.RELS})];return kr(e["!id"]).forEach(function(r){t[t.length]=Me("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ut(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,i?s.TargetMode=i:[yt.HLINK,yt.XPATH,yt.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var ade="application/vnd.oasis.opendocument.spreadsheet";function nde(e,t){for(var r=rN(e),a,s;a=xf.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=st(a[0],!1),s.path=="/"&&s.type!==ade)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function sde(e){var t=[Er];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function XO(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function ide(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function ode(e){var t=[Er];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(XO(e[r][0],e[r][1])),t.push(ide("",e[r][0]));return t.push(XO("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function F6(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+uf.version+"</meta:generator></office:meta></office:document-meta>"}var Dn=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],lde=function(){for(var e=new Array(Dn.length),t=0;t<Dn.length;++t){var r=Dn[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function R6(e){var t={};e=Ht(e);for(var r=0;r<Dn.length;++r){var a=Dn[r],s=e.match(lde[r]);s!=null&&s.length>0&&(t[a[1]]=At(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=lr(t[a[1]]))}return t}function Pg(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Wt(t),a[a.length]=r?Me(e,t,r):la(e,t))}function L6(e,t){var r=t||{},a=[Er,Me("cp:coreProperties",null,{"xmlns:cp":Ur.CORE_PROPS,"xmlns:dc":Ur.dc,"xmlns:dcterms":Ur.dcterms,"xmlns:dcmitype":Ur.dcmitype,"xmlns:xsi":Ur.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Pg("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:b1(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&Pg("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:b1(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=Dn.length;++i){var o=Dn[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Pg(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var To=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],$6=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function B6(e,t,r,a){var s=[];if(typeof e=="string")s=$O(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(d){return{v:d}}));var o=typeof t=="string"?$O(t,a).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function cde(e,t,r){var a={};return t||(t={}),e=Ht(e),To.forEach(function(s){var i=(e.match(mf(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=At(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&B6(a.HeadingPairs,a.TitlesOfParts,t,r),t}function U6(e){var t=[],r=Me;return e||(e={}),e.Application="SheetJS",t[t.length]=Er,t[t.length]=Me("Properties",null,{xmlns:Ur.EXT_PROPS,"xmlns:vt":Ur.vt}),To.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=Wt(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Wt(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ude=/<[^>]+>[^<]*/g;function dde(e,t){var r={},a="",s=e.match(ude);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=st(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=At(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=At(d);break;case"bool":r[a]=sr(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(d);break;case"filetime":case"date":r[a]=lr(d);break;case"cy":case"error":r[a]=At(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function W6(e){var t=[Er,Me("Properties",null,{xmlns:Ur.CUST_PROPS,"xmlns:vt":Ur.vt})];if(!e)return t.join("");var r=1;return kr(e).forEach(function(s){++r,t[t.length]=Me("property",bue(e[s],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Wt(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var k1={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Dg;function fde(e,t,r){Dg||(Dg=op(k1)),t=Dg[t]||t,e[t]=r}function mde(e,t){var r=[];return kr(k1).map(function(a){for(var s=0;s<Dn.length;++s)if(Dn[s][1]==a)return Dn[s];for(s=0;s<To.length;++s)if(To[s][1]==a)return To[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(la(k1[a[1]]||a[1],s))}}),Me("DocumentProperties",r.join(""),{xmlns:Za.o})}function hde(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&kr(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<Dn.length;++o)if(i==Dn[o][1])return;for(o=0;o<To.length;++o)if(i==To[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(Me(MO(i),l,{"dt:dt":c}))}}),t&&kr(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(Me(MO(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+Za.o+'">'+s.join("")+"</"+a+">"}function gN(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function xde(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=je(8);return o.write_shift(4,a),o.write_shift(4,s),o}function q6(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function K6(e,t,r){var a=e.read_shift(0,"lpwstr");return r&&(e.l+=4-(a.length+1&3)&3),a}function V6(e,t,r){return t===31?K6(e):q6(e,t,r)}function C1(e,t,r){return V6(e,t,r===!1?0:4)}function pde(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return V6(e,t,0)}function gde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(ka,""),e.l-s&2&&(e.l+=2)}return r}function yde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(ka,"");return r}function vde(e){var t=e.l,r=zh(e,D6);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=zh(e,$a);return[r,a]}function bde(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(vde(e));return r}function YO(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(ka,"").replace(Mu,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>2+1<<2),a}function z6(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function wde(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function zh(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==HO&&a!==t&&Jue.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===HO?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return q6(e,a,4).replace(ka,"");case 31:return K6(e);case 64:return gN(e);case 65:return z6(e);case 71:return wde(e);case 80:return C1(e,a,!i.raw).replace(ka,"");case 81:return pde(e,a).replace(ka,"");case 4108:return bde(e);case 4126:case 4127:return a==4127?gde(e):yde(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function QO(e,t){var r=je(4),a=je(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=je(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=xde(t);break;case 31:case 80:for(a=je(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Qr([r,a])}function JO(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,u={};for(o=0;o!=s;++o){var d=e.read_shift(4),f=e.read_shift(4);i[o]=[d,f+r]}i.sort(function(S,v){return S[1]-v[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var y=t[i[o][0]];if(m[y.n]=zh(e,y.t,{raw:!0}),y.p==="version"&&(m[y.n]=String(m[y.n]>>16)+"."+("0000"+String(m[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(m[y.n]){case 0:m[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:_n(l=m[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[y.n])}}else if(i[o][0]===1){if(l=m.CodePage=zh(e,xN),_n(l),c!==-1){var h=e.l;e.l=i[c][1],u=YO(e,l),e.l=h}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}u=YO(e,l)}else{var b=u[i[o][0]],N;switch(e[e.l]){case 65:e.l+=4,N=z6(e);break;case 30:e.l+=4,N=C1(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,N=C1(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,N=e.read_shift(4,"i");break;case 19:e.l+=4,N=e.read_shift(4);break;case 5:e.l+=4,N=e.read_shift(8,"f");break;case 11:e.l+=4,N=Cr(e,4);break;case 64:e.l+=4,N=lr(gN(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[b]=N}}return e.l=r+a,m}var H6=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Nde(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function ZO(e,t,r){var a=je(8),s=[],i=[],o=8,l=0,c=je(8),u=je(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),s.push(u),o+=8+c.length,!t){u=je(8),u.write_shift(4,0),s.unshift(u);var d=[je(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=je(4+4+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Qr(d),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(H6.indexOf(e[l][0])>-1||$6.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var y=r[p];if(y.p=="version"&&typeof m=="string"){var h=m.split(".");m=(+h[0]<<16)+(+h[1]||0)}c=QO(y.t,m)}else{var b=Nde(m);b==-1&&(b=31,m=String(m)),c=QO(b,m)}i.push(c),u=je(8),u.write_shift(4,t?p:2+l),s.push(u),o+=8+c.length}var N=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,N),N+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),Qr([a].concat(s).concat(i))}function e_(e,t,r){var a=e.content;if(!a)return{};oa(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),d=a.read_shift(16);if(d!==Je.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=JO(a,t),m={SystemIdentifier:u};for(var p in f)m[p]=f[p];if(m.FMTID=i,s===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var y;try{y=JO(a,null)}catch{}for(p in y)m[p]=y[p];return m.FMTID=[i,o],m}function t_(e,t,r,a,s,i){var o=je(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Je.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=ZO(e,r,a);if(l.push(c),s){var u=ZO(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Qr(l)}function ii(e,t){return e.read_shift(t),null}function jde(e,t){t||(t=je(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Sde(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function Cr(e,t){return e.read_shift(t)===1}function Da(e,t){return t||(t=je(2)),t.write_shift(2,+!!e),t}function Ir(e){return e.read_shift(2,"u")}function Nn(e,t){return t||(t=je(2)),t.write_shift(2,e),t}function G6(e,t){return Sde(e,t,Ir)}function kde(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function X6(e,t,r){return r||(r=je(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function zf(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont",i=sn;if(r&&r.biff>=8&&(sn=1200),!r||r.biff==8){var o=e.read_shift(1);o&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var l=a?e.read_shift(a,s):"";return sn=i,l}function Cde(e){var t=sn;sn=1200;var r=e.read_shift(2),a=e.read_shift(1),s=a&4,i=a&8,o=1+(a&1),l=0,c,u={};i&&(l=e.read_shift(2)),s&&(c=e.read_shift(4));var d=o==2?"dbcs-cont":"sbcs-cont",f=r===0?"":e.read_shift(r,d);return i&&(e.l+=4*l),s&&(e.l+=c),u.t=f,i||(u.raw="<t>"+u.t+"</t>",u.r=u.t),sn=t,u}function Ode(e){var t=e.t||"",r=je(3+0);r.write_shift(2,t.length),r.write_shift(1,1);var a=je(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return Qr(s)}function Xo(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Hf(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Xo(e,a,r)}function dl(e,t,r){if(r.biff>5)return Hf(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Y6(e,t,r){return r||(r=je(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function _de(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Tde(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(ka,"");return a&&(e.l+=24),s}function Ede(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(ka,"");return r+o}function Ade(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Tde(e);case"0303000000000000c000000000000046":return Ede(e);default:throw new Error("Unsupported Moniker "+r)}}function $0(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(ka,""):"";return r}function r_(e,t){t||(t=je(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Pde(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,u="",d,f;s&16&&(i=$0(e,r-e.l)),s&128&&(o=$0(e,r-e.l)),(s&257)===257&&(l=$0(e,r-e.l)),(s&257)===1&&(c=Ade(e,r-e.l)),s&8&&(u=$0(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=gN(e)),e.l=r;var m=o||l||c||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),f&&(p.time=f),i&&(p.Tooltip=i),p}function Dde(e){var t=je(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),r_(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&r_(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Q6(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function J6(e,t){var r=Q6(e);return r[3]=0,r}function js(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Yo(e,t,r,a){return a||(a=je(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function Ide(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Mde(e,t,r){return t===0?"":dl(e,t,r)}function Fde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function Z6(e){var t=e.read_shift(2),r=hN(e);return[t,r]}function Rde(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=zf(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function dp(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function eD(e,t){return t||(t=je(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function tD(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var Lde=tD;function rD(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function $de(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Bde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function xa(e){e.l+=2,e.l+=e.read_shift(2)}var Ude={0:xa,4:xa,5:xa,6:xa,7:Bde,8:xa,9:xa,10:xa,11:xa,12:xa,13:$de,14:xa,15:xa,16:xa,17:xa,18:xa,19:xa,20:xa,21:rD};function Wde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(Ude[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function B0(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function yN(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=je(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function qde(e,t){return t===0||e.read_shift(2),1200}function Kde(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=dl(e,0,r);return e.read_shift(t+a-e.l),s}function Vde(e,t){var r=!t||t.biff==8,a=je(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function zde(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function Hde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=zf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function Gde(e,t){var r=!t||t.biff>=8?2:1,a=je(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function Xde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Cde(e));return i.Count=a,i.Unique=s,i}function Yde(e,t){var r=je(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=Ode(e[s]);var i=Qr([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function Qde(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Jde(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Zde(e){var t=Ide(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function efe(e){return e.read_shift(2),e.read_shift(4)}function a_(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function tfe(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function rfe(){var e=je(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function afe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function nfe(e){var t=je(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function sfe(){}function ife(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=zf(e,0,r),a}function ofe(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=je(s);return i.write_shift(2,(e.sz||12)*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function lfe(e){var t=js(e);return t.isst=e.read_shift(4),t}function cfe(e,t,r,a){var s=je(10);return Yo(e,t,a,s),s.write_shift(4,r),s}function ufe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=js(e);r.biff==2&&e.l++;var i=Hf(e,a-e.l,r);return s.val=i,s}function dfe(e,t,r,a,s){var i=!s||s.biff==8,o=je(6+2+ +i+(1+i)*r.length);return Yo(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function ffe(e,t,r){var a=e.read_shift(2),s=dl(e,0,r);return[a,s]}function mfe(e,t,r,a){var s=r&&r.biff==5;a||(a=je(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var hfe=dl;function n_(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function xfe(e,t){var r=t.biff==8||!t.biff?4:2,a=je(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function pfe(e){var t=e.read_shift(2),r=e.read_shift(2),a=Z6(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function gfe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(Z6(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function yfe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function vfe(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=Zue[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function bfe(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=vfe(e,t,a.fStyle,r),a}function s_(e,t,r,a){var s=r&&r.biff==5;a||(a=je(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function wfe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Nfe(e){var t=je(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}function i_(e,t,r){var a=js(e);(r.biff==2||t==9)&&++e.l;var s=kde(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function jfe(e,t,r,a,s,i){var o=je(8);return Yo(e,t,a,o),X6(r,i,o),o}function Sfe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=js(e),s=ja(e);return a.val=s,a}function kfe(e,t,r,a){var s=je(14);return Yo(e,t,a,s),Go(r,s),s}var o_=Mde;function Cfe(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Xo(e,i),l=[];a>e.l;)l.push(Hf(e));return[i,s,o,l]}function l_(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Rde(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Ofe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function c_(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Xo(e,o,r);s&32&&(u=Ofe[u.charCodeAt(0)]);var d=a-e.l;r&&r.biff==2&&--d;var f=a==e.l||l===0||!(d>0)?[]:Wxe(e,d,r,l);return{chKey:i,Name:u,itab:c,rgce:f}}function aD(e,t,r){if(r.biff<8)return _fe(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(Fde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function _fe(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=zf(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function Tfe(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Xo(e,a,r),o=Xo(e,s,r);return[i,o]}function Efe(e,t,r){var a=tD(e);e.l++;var s=e.read_shift(1);return t-=8,[qxe(e,t,r),s,a]}function u_(e,t,r){var a=Lde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,Bxe(e,t,r)]}function Afe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function Pfe(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=dl(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function Dfe(e,t,r){return Pfe(e,t,r)}function Ife(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(dp(e));return r}function Mfe(e){var t=je(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)eD(e[r],t);return t}function Ffe(e,t,r){if(r&&r.biff<8)return Lfe(e,t,r);var a=rD(e),s=Wde(e,t-22,a[1]);return{cmo:a,ft:s}}var Rfe={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function Lfe(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Rfe[a]||_a)(e,t,r)),{cmo:[s,a,i],ft:o}}function $fe(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=_de(e,6,r);var l=e.read_shift(2);e.read_shift(2),Ir(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Xo(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Bfe(e,t){var r=dp(e);e.l+=16;var a=Pde(e,t-24);return[r,a]}function Ufe(e){var t=je(24),r=xr(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return Qr([t,Dde(e[1])])}function Wfe(e,t){e.read_shift(2);var r=dp(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(ka,""),[r,a]}function qfe(e){var t=e[1].Tooltip,r=je(10+2*(t.length+1));r.write_shift(2,2048);var a=xr(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Kfe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=GO[r]||r,r=e.read_shift(2),t[1]=GO[r]||r,t}function Vfe(e){return e||(e=je(4)),e.write_shift(2,1),e.write_shift(2,1),e}function zfe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(J6(e));return r}function Hfe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(J6(e));return r}function Gfe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function nD(e,t,r){if(!r.cellStyles)return _a(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Xfe(e,t){var r=je(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function Yfe(e,t){var r={};return t<32||(e.l+=16,r.header=ja(e),r.footer=ja(e),e.l+=2),r}function Qfe(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function Jfe(e){for(var t=je(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Zfe=js,e0e=G6,t0e=Hf;function r0e(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function a0e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=js(e);++e.l;var s=dl(e,t-7,r);return a.t="str",a.val=s,a}function n0e(e){var t=js(e);++e.l;var r=ja(e);return t.t="n",t.val=r,t}function s0e(e,t,r){var a=je(15);return Qf(a,e,t),a.write_shift(8,r,"f"),a}function i0e(e){var t=js(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function o0e(e,t,r){var a=je(9);return Qf(a,e,t),a.write_shift(2,r),a}function l0e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function c0e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function u0e(e,t,r){var a=e.l+t,s=js(e),i=e.read_shift(2),o=Xo(e,i,r);return e.l=a,s.t="str",s.val=o,s}var d0e=[2,3,48,49,131,139,140,245],O1=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=op({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Ri(1);switch(c.type){case"base64":d=tn(un(l));break;case"binary":d=tn(l);break;case"buffer":case"array":d=l;break}oa(d,0);var f=d.read_shift(1),m=!!(f&136),p=!1,y=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var h=0,b=521;f==2&&(h=d.read_shift(2)),d.l+=3,f!=2&&(h=d.read_shift(4)),h>1048576&&(h=1e6),f!=2&&(b=d.read_shift(2));var N=d.read_shift(2),S=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(S=e[d[d.l]]),d.l+=1,d.l+=2),y&&(d.l+=36);for(var v=[],x={},g=Math.min(d.length,f==2?521:b-10-(p?264:0)),w=y?32:11;d.l<g&&d[d.l]!=13;)switch(x={},x.name=Ct.utils.decode(S,d.slice(d.l,d.l+w)).replace(/[\u0000\r\n].*$/g,""),d.l+=w,x.type=String.fromCharCode(d.read_shift(1)),f!=2&&!y&&(x.offset=d.read_shift(4)),x.len=d.read_shift(1),f==2&&(x.offset=d.read_shift(2)),x.dec=d.read_shift(1),x.name.length&&v.push(x),f!=2&&(d.l+=y?13:14),x.type){case"B":(!p||x.len!=8)&&c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+x.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var j=0,O=0;for(u[0]=[],O=0;O!=v.length;++O)u[0][O]=v[O].name;for(;h-- >0;){if(d[d.l]===42){d.l+=N;continue}for(++d.l,u[++j]=[],O=0,O=0;O!=v.length;++O){var _=d.slice(d.l,d.l+v[O].len);d.l+=v[O].len,oa(_,0);var E=Ct.utils.decode(S,_);switch(v[O].type){case"C":E.trim().length&&(u[j][O]=E.replace(/\s+$/,""));break;case"D":E.length===8?u[j][O]=new Date(+E.slice(0,4),+E.slice(4,6)-1,+E.slice(6,8)):u[j][O]=E;break;case"F":u[j][O]=parseFloat(E.trim());break;case"+":case"I":u[j][O]=y?_.read_shift(-4,"i")^2147483648:_.read_shift(4,"i");break;case"L":switch(E.trim().toUpperCase()){case"Y":case"T":u[j][O]=!0;break;case"N":case"F":u[j][O]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+E+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][O]="##MEMO##"+(y?parseInt(E.trim(),10):_.read_shift(4));break;case"N":E=E.replace(/\u0000/g,"").trim(),E&&E!="."&&(u[j][O]=+E||0);break;case"@":u[j][O]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":u[j][O]=new Date((_.read_shift(4)-2440588)*864e5+_.read_shift(4));break;case"Y":u[j][O]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][O]=-_.read_shift(-8,"f");break;case"B":if(p&&v[O].len==8){u[j][O]=_.read_shift(8,"f");break}case"G":case"P":_.l+=v[O].len;break;case"0":if(v[O].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+v[O].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=v,u}function a(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=au(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(l,c){try{return to(a(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&_n(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=za(),f=Xh(l,{header:1,raw:!0,cellDates:!0}),m=f[0],p=f.slice(1),y=l["!cols"]||[],h=0,b=0,N=0,S=1;for(h=0;h<m.length;++h){if(((y[h]||{}).DBF||{}).name){m[h]=y[h].DBF.name,++N;continue}if(m[h]!=null){if(++N,typeof m[h]=="number"&&(m[h]=m[h].toString(10)),typeof m[h]!="string")throw new Error("DBF Invalid column name "+m[h]+" |"+typeof m[h]+"|");if(m.indexOf(m[h])!==h){for(b=0;b<1024;++b)if(m.indexOf(m[h]+"_"+b)==-1){m[h]+="_"+b;break}}}}var v=Nt(l["!ref"]),x=[],g=[],w=[];for(h=0;h<=v.e.c-v.s.c;++h){var j="",O="",_=0,E=[];for(b=0;b<p.length;++b)p[b][h]!=null&&E.push(p[b][h]);if(E.length==0||m[h]==null){x[h]="?";continue}for(b=0;b<E.length;++b){switch(typeof E[b]){case"number":O="B";break;case"string":O="C";break;case"boolean":O="L";break;case"object":O=E[b]instanceof Date?"D":"C";break;default:O="C"}_=Math.max(_,String(E[b]).length),j=j&&j!=O?"C":O}_>250&&(_=250),O=((y[h]||{}).DBF||{}).type,O=="C"&&y[h].DBF.len>_&&(_=y[h].DBF.len),j=="B"&&O=="N"&&(j="N",w[h]=y[h].DBF.dec,_=y[h].DBF.len),g[h]=j=="C"||O=="N"?_:i[j]||0,S+=g[h],x[h]=j}var T=d.next(32);for(T.write_shift(4,318902576),T.write_shift(4,p.length),T.write_shift(2,296+32*N),T.write_shift(2,S),h=0;h<4;++h)T.write_shift(4,0);for(T.write_shift(4,0|(+t[Vo]||3)<<8),h=0,b=0;h<m.length;++h)if(m[h]!=null){var k=d.next(32),A=(m[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,A,"sbcs"),k.write_shift(1,x[h]=="?"?"C":x[h],"sbcs"),k.write_shift(4,b),k.write_shift(1,g[h]||i[x[h]]||0),k.write_shift(1,w[h]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),b+=g[h]||i[x[h]]||0}var P=d.next(264);for(P.write_shift(4,13),h=0;h<65;++h)P.write_shift(4,0);for(h=0;h<p.length;++h){var M=d.next(S);for(M.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(x[b]){case"L":M.write_shift(1,p[h][b]==null?63:p[h][b]?84:70);break;case"B":M.write_shift(8,p[h][b]||0,"f");break;case"N":var U="0";for(typeof p[h][b]=="number"&&(U=p[h][b].toFixed(w[b]||0)),N=0;N<g[b]-U.length;++N)M.write_shift(1,32);M.write_shift(1,U,"sbcs");break;case"D":p[h][b]?(M.write_shift(4,("0000"+p[h][b].getFullYear()).slice(-4),"sbcs"),M.write_shift(2,("00"+(p[h][b].getMonth()+1)).slice(-2),"sbcs"),M.write_shift(2,("00"+p[h][b].getDate()).slice(-2),"sbcs")):M.write_shift(8,"00000000","sbcs");break;case"C":var W=String(p[h][b]!=null?p[h][b]:"").slice(0,g[b]);for(M.write_shift(1,W,"sbcs"),N=0;N<g[b]-W.length;++N)M.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}}(),sD=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+kr(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var y=e[p];return typeof y=="number"?v1(y):y},a=function(m,p,y){var h=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return h==59?m:v1(h)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(un(m),p);case"binary":return i(m,p);case"buffer":return i(pt&&Buffer.isBuffer(m)?m.toString("binary"):eo(m),p);case"array":return i(Ho(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var y=m.split(/[\n\r]+/),h=-1,b=-1,N=0,S=0,v=[],x=[],g=null,w={},j=[],O=[],_=[],E=0,T;for(+p.codepage>=0&&_n(+p.codepage);N!==y.length;++N){E=0;var k=y[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),A=k.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),P=A[0],M;if(k.length>0)switch(P){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":A[1].charAt(0)=="P"&&x.push(k.slice(3).replace(/;;/g,";"));break;case"C":var U=!1,W=!1,Y=!1,B=!1,ae=-1,oe=-1;for(S=1;S<A.length;++S)switch(A[S].charAt(0)){case"A":break;case"X":b=parseInt(A[S].slice(1))-1,W=!0;break;case"Y":for(h=parseInt(A[S].slice(1))-1,W||(b=0),T=v.length;T<=h;++T)v[T]=[];break;case"K":M=A[S].slice(1),M.charAt(0)==='"'?M=M.slice(1,M.length-1):M==="TRUE"?M=!0:M==="FALSE"?M=!1:isNaN(ts(M))?isNaN(Ic(M).getDate())||(M=lr(M)):(M=ts(M),g!==null&&sl(g)&&(M=cp(M))),typeof Ct<"u"&&typeof M=="string"&&(p||{}).type!="string"&&(p||{}).codepage&&(M=Ct.utils.decode(p.codepage,M)),U=!0;break;case"E":B=!0;var D=tc(A[S].slice(1),{r:h,c:b});v[h][b]=[v[h][b],D];break;case"S":Y=!0,v[h][b]=[v[h][b],"S5S"];break;case"G":break;case"R":ae=parseInt(A[S].slice(1))-1;break;case"C":oe=parseInt(A[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}if(U&&(v[h][b]&&v[h][b].length==2?v[h][b][0]=M:v[h][b]=M,g=null),Y){if(B)throw new Error("SYLK shared formula cannot have own formula");var H=ae>-1&&v[ae][oe];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");v[h][b][1]=jD(H[1],{r:h-ae,c:b-oe})}break;case"F":var G=0;for(S=1;S<A.length;++S)switch(A[S].charAt(0)){case"X":b=parseInt(A[S].slice(1))-1,++G;break;case"Y":for(h=parseInt(A[S].slice(1))-1,T=v.length;T<=h;++T)v[T]=[];break;case"M":E=parseInt(A[S].slice(1))/20;break;case"F":break;case"G":break;case"P":g=x[parseInt(A[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(_=A[S].slice(1).split(" "),T=parseInt(_[0],10);T<=parseInt(_[1],10);++T)E=parseInt(_[2],10),O[T-1]=E===0?{hidden:!0}:{wch:E},Li(O[T-1]);break;case"C":b=parseInt(A[S].slice(1))-1,O[b]||(O[b]={});break;case"R":h=parseInt(A[S].slice(1))-1,j[h]||(j[h]={}),E>0?(j[h].hpt=E,j[h].hpx=Fc(E)):E===0&&(j[h].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}G<1&&(g=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}}return j.length>0&&(w["!rows"]=j),O.length>0&&(w["!cols"]=O),p&&p.sheetRows&&(v=v.slice(0,p.sheetRows)),[v,w]}function o(m,p){var y=s(m,p),h=y[0],b=y[1],N=au(h,p);return kr(b).forEach(function(S){N[S]=b[S]}),N}function l(m,p){return to(o(m,p),p)}function c(m,p,y,h){var b="C;Y"+(y+1)+";X"+(h+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+SN(m.f,{r:y,c:h}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(m,p){p.forEach(function(y,h){var b="F;W"+(h+1)+" "+(h+1)+" ";y.hidden?b+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=yf(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=vf(y.wpx)),typeof y.wch=="number"&&(b+=Math.round(y.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function d(m,p){p.forEach(function(y,h){var b="F;";y.hidden?b+="M0;":y.hpt?b+="M"+20*y.hpt+";":y.hpx&&(b+="M"+20*bf(y.hpx)+";"),b.length>2&&m.push(b+"R"+(h+1))})}function f(m,p){var y=["ID;PWXL;N;E"],h=[],b=Nt(m["!ref"]),N,S=Array.isArray(m),v=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),m["!cols"]&&u(y,m["!cols"]),m["!rows"]&&d(y,m["!rows"]),y.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var x=b.s.r;x<=b.e.r;++x)for(var g=b.s.c;g<=b.e.c;++g){var w=nt({r:x,c:g});N=S?(m[x]||[])[g]:m[w],!(!N||N.v==null&&(!N.f||N.F))&&h.push(c(N,m,x,g))}return y.join(v)+v+h.join(v)+v+"E"+v}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),iD=function(){function e(i,o){switch(o.type){case"base64":return t(un(i),o);case"binary":return t(i,o);case"buffer":return t(pt&&Buffer.isBuffer(i)?i.toString("binary"):eo(i),o);case"array":return t(Ho(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var m=l[d].trim().split(","),p=m[0],y=m[1];++d;for(var h=l[d]||"";(h.match(/["]/g)||[]).length&1&&d<l.length-1;)h+=`
`+l[++d];switch(h=h.trim(),+p){case-1:if(h==="BOT"){f[++c]=[],u=0;continue}else if(h!=="EOD")throw new Error("Unrecognized DIF special command "+h);break;case 0:h==="TRUE"?f[c][u]=!0:h==="FALSE"?f[c][u]=!1:isNaN(ts(y))?isNaN(Ic(y).getDate())?f[c][u]=y:f[c][u]=lr(y):f[c][u]=ts(y),++u;break;case 1:h=h.slice(1,h.length-1),h=h.replace(/""/g,'"'),h&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),f[c][u++]=h!==""?h:null;break}if(h==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return au(e(i,o),o)}function a(i,o){return to(r(i,o),o)}var s=function(){var i=function(c,u,d,f,m){c.push(u),c.push(d+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Nt(c["!ref"]),f,m=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){o(u,-1,0,"BOT");for(var y=d.s.c;y<=d.e.c;++y){var h=nt({r:p,c:y});if(f=m?(c[p]||[])[y]:c[h],!f){o(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,b,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=dn(f.z||et[14],Kr(lr(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var N=`\r
`,S=u.join(N);return S}}();return{to_workbook:a,to_sheet:r,from_sheet:s}}(),oD=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,m){for(var p=f.split(`
`),y=-1,h=-1,b=0,N=[];b!==p.length;++b){var S=p[b].trim().split(":");if(S[0]==="cell"){var v=xr(S[1]);if(N.length<=v.r)for(y=N.length;y<=v.r;++y)N[y]||(N[y]=[]);switch(y=v.r,h=v.c,S[2]){case"t":N[y][h]=e(S[3]);break;case"v":N[y][h]=+S[3];break;case"vtf":var x=S[S.length-1];case"vtc":switch(S[3]){case"nl":N[y][h]=!!+S[4];break;default:N[y][h]=+S[4];break}S[2]=="vtf"&&(N[y][h]=[N[y][h],x])}}}return m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),N}function a(f,m){return au(r(f,m),m)}function s(f,m){return to(a(f,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var m=[],p=[],y,h="",b=Fa(f["!ref"]),N=Array.isArray(f),S=b.s.r;S<=b.e.r;++S)for(var v=b.s.c;v<=b.e.c;++v)if(h=nt({r:S,c:v}),y=N?(f[S]||[])[v]:f[h],!(!y||y.v==null||y.t==="z")){switch(p=["cell",h,"t"],y.t){case"s":case"str":p.push(t(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=t(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=t(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var x=Kr(lr(y.v));p[2]="vtc",p[3]="nd",p[4]=""+x,p[5]=y.w||dn(y.z||et[14],x);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[i,o,l,o,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:d}}(),Mc=function(){function e(d,f,m,p,y){y.raw?f[m][p]=d:d===""||(d==="TRUE"?f[m][p]=!0:d==="FALSE"?f[m][p]=!1:isNaN(ts(d))?isNaN(Ic(d).getDate())?f[m][p]=d:f[m][p]=lr(d):f[m][p]=ts(d))}function t(d,f){var m=f||{},p=[];if(!d||d.length===0)return p;for(var y=d.split(/[\r\n]/),h=y.length-1;h>=0&&y[h].length===0;)--h;for(var b=10,N=0,S=0;S<=h;++S)N=y[S].indexOf(" "),N==-1?N=y[S].length:N++,b=Math.max(b,N);for(S=0;S<=h;++S){p[S]=[];var v=0;for(e(y[S].slice(0,b).trim(),p,S,v,m),v=1;v<=(y[S].length-b)/10+1;++v)e(y[S].slice(b+(v-1)*10,b+v*10).trim(),p,S,v,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(d){for(var f={},m=!1,p=0,y=0;p<d.length;++p)(y=d.charCodeAt(p))==34?m=!m:!m&&y in r&&(f[y]=(f[y]||0)+1);y=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&y.push([f[p],p]);if(!y.length){f=a;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&y.push([f[p],p])}return y.sort(function(h,b){return h[0]-b[0]||a[h[1]]-a[b[1]]}),r[y.pop()[1]]||44}function i(d,f){var m=f||{},p="",y=m.dense?[]:{},h={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=s(d.slice(0,1024)):m&&m.FS?p=m.FS:p=s(d.slice(0,1024));var b=0,N=0,S=0,v=0,x=0,g=p.charCodeAt(0),w=!1,j=0,O=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var _=m.dateNF!=null?Qce(m.dateNF):null;function E(){var T=d.slice(v,x),k={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)k.t="z";else if(m.raw)k.t="s",k.v=T;else if(T.trim().length===0)k.t="s",k.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(k.t="s",k.v=T.slice(2,-1).replace(/""/g,'"')):Che(T)?(k.t="n",k.f=T.slice(1)):(k.t="s",k.v=T);else if(T=="TRUE")k.t="b",k.v=!0;else if(T=="FALSE")k.t="b",k.v=!1;else if(!isNaN(S=ts(T)))k.t="n",m.cellText!==!1&&(k.w=T),k.v=S;else if(!isNaN(Ic(T).getDate())||_&&T.match(_)){k.z=m.dateNF||et[14];var A=0;_&&T.match(_)&&(T=Jce(T,m.dateNF,T.match(_)||[]),A=1),m.cellDates?(k.t="d",k.v=lr(T,A)):(k.t="n",k.v=Kr(lr(T,A))),m.cellText!==!1&&(k.w=dn(k.z,k.v instanceof Date?Kr(k.v):k.v)),m.cellNF||delete k.z}else k.t="s",k.v=T;if(k.t=="z"||(m.dense?(y[b]||(y[b]=[]),y[b][N]=k):y[nt({c:N,r:b})]=k),v=x+1,O=d.charCodeAt(v),h.e.c<N&&(h.e.c=N),h.e.r<b&&(h.e.r=b),j==g)++N;else if(N=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;x<d.length;++x)switch(j=d.charCodeAt(x)){case 34:O===34&&(w=!w);break;case g:case 10:case 13:if(!w&&E())break e;break}return x-v>0&&E(),y["!ref"]=ut(h),y}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):au(t(d,f),f)}function l(d,f){var m="",p=f.type=="string"?[0,0,0,0]:DN(d,f);switch(f.type){case"base64":m=un(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof Ct<"u"?m=Ct.utils.decode(f.codepage,d):m=pt&&Buffer.isBuffer(d)?d.toString("binary"):eo(d);break;case"array":m=Ho(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Ht(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=Ht(m):f.type=="binary"&&typeof Ct<"u"&&f.codepage&&(m=Ct.utils.decode(f.codepage,Ct.utils.encode(28591,m))),m.slice(0,19)=="socialcalc:version:"?oD.to_sheet(f.type=="string"?m:Ht(m),f):o(m,f)}function c(d,f){return to(l(d,f),f)}function u(d){for(var f=[],m=Nt(d["!ref"]),p,y=Array.isArray(d),h=m.s.r;h<=m.e.r;++h){for(var b=[],N=m.s.c;N<=m.e.c;++N){var S=nt({r:h,c:N});if(p=y?(d[h]||[])[N]:d[S],!p||p.v==null){b.push("          ");continue}for(var v=(p.w||(bs(p),p.w)||"").slice(0,10);v.length<10;)v+=" ";b.push(v+(N===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function f0e(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=sD.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Mc.to_workbook(e,t)}}var Eo=function(){function e(D,H,G){if(D){oa(D,D.l||0);for(var Z=G.Enum||ae;D.l<D.length;){var X=D.read_shift(2),ie=Z[X]||Z[65535],pe=D.read_shift(2),ne=D.l+pe,ee=ie.f&&ie.f(D,pe,G);if(D.l=ne,H(ee,ie,X))return}}}function t(D,H){switch(H.type){case"base64":return r(tn(un(D)),H);case"binary":return r(tn(D),H);case"buffer":case"array":return r(D,H)}throw"Unsupported type "+H.type}function r(D,H){if(!D)return D;var G=H||{},Z=G.dense?[]:{},X="Sheet1",ie="",pe=0,ne={},ee=[],we=[],F={s:{r:0,c:0},e:{r:0,c:0}},Ue=G.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)G.Enum=ae,e(D,function(de,Ve,ft){switch(ft){case 0:G.vers=de,de>=4096&&(G.qpro=!0);break;case 6:F=de;break;case 204:de&&(ie=de);break;case 222:ie=de;break;case 15:case 51:G.qpro||(de[1].v=de[1].v.slice(1));case 13:case 14:case 16:ft==14&&(de[2]&112)==112&&(de[2]&15)>1&&(de[2]&15)<15&&(de[1].z=G.dateNF||et[14],G.cellDates&&(de[1].t="d",de[1].v=cp(de[1].v))),G.qpro&&de[3]>pe&&(Z["!ref"]=ut(F),ne[X]=Z,ee.push(X),Z=G.dense?[]:{},F={s:{r:0,c:0},e:{r:0,c:0}},pe=de[3],X=ie||"Sheet"+(pe+1),ie="");var it=G.dense?(Z[de[0].r]||[])[de[0].c]:Z[nt(de[0])];if(it){it.t=de[1].t,it.v=de[1].v,de[1].z!=null&&(it.z=de[1].z),de[1].f!=null&&(it.f=de[1].f);break}G.dense?(Z[de[0].r]||(Z[de[0].r]=[]),Z[de[0].r][de[0].c]=de[1]):Z[nt(de[0])]=de[1];break}},G);else if(D[2]==26||D[2]==14)G.Enum=oe,D[2]==14&&(G.qpro=!0,D.l=0),e(D,function(de,Ve,ft){switch(ft){case 204:X=de;break;case 22:de[1].v=de[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(de[3]>pe&&(Z["!ref"]=ut(F),ne[X]=Z,ee.push(X),Z=G.dense?[]:{},F={s:{r:0,c:0},e:{r:0,c:0}},pe=de[3],X="Sheet"+(pe+1)),Ue>0&&de[0].r>=Ue)break;G.dense?(Z[de[0].r]||(Z[de[0].r]=[]),Z[de[0].r][de[0].c]=de[1]):Z[nt(de[0])]=de[1],F.e.c<de[0].c&&(F.e.c=de[0].c),F.e.r<de[0].r&&(F.e.r=de[0].r);break;case 27:de[14e3]&&(we[de[14e3][0]]=de[14e3][1]);break;case 1537:we[de[0]]=de[1],de[0]==pe&&(X=de[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(Z["!ref"]=ut(F),ne[ie||X]=Z,ee.push(ie||X),!we.length)return{SheetNames:ee,Sheets:ne};for(var R={},ve=[],xe=0;xe<we.length;++xe)ne[ee[xe]]?(ve.push(we[xe]||ee[xe]),R[we[xe]]=ne[we[xe]]||ne[ee[xe]]):(ve.push(we[xe]),R[we[xe]]={"!ref":"A1"});return{SheetNames:ve,Sheets:R}}function a(D,H){var G=H||{};if(+G.codepage>=0&&_n(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=za(),X=Nt(D["!ref"]),ie=Array.isArray(D),pe=[];Fe(Z,0,i(1030)),Fe(Z,6,c(X));for(var ne=Math.min(X.e.r,8191),ee=X.s.r;ee<=ne;++ee)for(var we=Nr(ee),F=X.s.c;F<=X.e.c;++F){ee===X.s.r&&(pe[F]=or(F));var Ue=pe[F]+we,R=ie?(D[ee]||[])[F]:D[Ue];if(!(!R||R.t=="z"))if(R.t=="n")(R.v|0)==R.v&&R.v>=-32768&&R.v<=32767?Fe(Z,13,p(ee,F,R.v)):Fe(Z,14,h(ee,F,R.v));else{var ve=bs(R);Fe(Z,15,f(ee,F,ve.slice(0,239)))}}return Fe(Z,1),Z.end()}function s(D,H){var G=H||{};if(+G.codepage>=0&&_n(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=za();Fe(Z,0,o(D));for(var X=0,ie=0;X<D.SheetNames.length;++X)(D.Sheets[D.SheetNames[X]]||{})["!ref"]&&Fe(Z,27,B(D.SheetNames[X],ie++));var pe=0;for(X=0;X<D.SheetNames.length;++X){var ne=D.Sheets[D.SheetNames[X]];if(!(!ne||!ne["!ref"])){for(var ee=Nt(ne["!ref"]),we=Array.isArray(ne),F=[],Ue=Math.min(ee.e.r,8191),R=ee.s.r;R<=Ue;++R)for(var ve=Nr(R),xe=ee.s.c;xe<=ee.e.c;++xe){R===ee.s.r&&(F[xe]=or(xe));var de=F[xe]+ve,Ve=we?(ne[R]||[])[xe]:ne[de];if(!(!Ve||Ve.t=="z"))if(Ve.t=="n")Fe(Z,23,E(R,xe,pe,Ve.v));else{var ft=bs(Ve);Fe(Z,22,j(R,xe,pe,ft.slice(0,239)))}}++pe}}return Fe(Z,1),Z.end()}function i(D){var H=je(2);return H.write_shift(2,D),H}function o(D){var H=je(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var G=0,Z=0,X=0,ie=0;ie<D.SheetNames.length;++ie){var pe=D.SheetNames[ie],ne=D.Sheets[pe];if(!(!ne||!ne["!ref"])){++X;var ee=Fa(ne["!ref"]);G<ee.e.r&&(G=ee.e.r),Z<ee.e.c&&(Z=ee.e.c)}}return G>8191&&(G=8191),H.write_shift(2,G),H.write_shift(1,X),H.write_shift(1,Z),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function l(D,H,G){var Z={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&G.qpro?(Z.s.c=D.read_shift(1),D.l++,Z.s.r=D.read_shift(2),Z.e.c=D.read_shift(1),D.l++,Z.e.r=D.read_shift(2),Z):(Z.s.c=D.read_shift(2),Z.s.r=D.read_shift(2),H==12&&G.qpro&&(D.l+=2),Z.e.c=D.read_shift(2),Z.e.r=D.read_shift(2),H==12&&G.qpro&&(D.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function c(D){var H=je(8);return H.write_shift(2,D.s.c),H.write_shift(2,D.s.r),H.write_shift(2,D.e.c),H.write_shift(2,D.e.r),H}function u(D,H,G){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(Z[0].c=D.read_shift(1),Z[3]=D.read_shift(1),Z[0].r=D.read_shift(2),D.l+=2):(Z[2]=D.read_shift(1),Z[0].c=D.read_shift(2),Z[0].r=D.read_shift(2)),Z}function d(D,H,G){var Z=D.l+H,X=u(D,H,G);if(X[1].t="s",G.vers==20768){D.l++;var ie=D.read_shift(1);return X[1].v=D.read_shift(ie,"utf8"),X}return G.qpro&&D.l++,X[1].v=D.read_shift(Z-D.l,"cstr"),X}function f(D,H,G){var Z=je(7+G.length);Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,D),Z.write_shift(1,39);for(var X=0;X<Z.length;++X){var ie=G.charCodeAt(X);Z.write_shift(1,ie>=128?95:ie)}return Z.write_shift(1,0),Z}function m(D,H,G){var Z=u(D,H,G);return Z[1].v=D.read_shift(2,"i"),Z}function p(D,H,G){var Z=je(7);return Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,D),Z.write_shift(2,G,"i"),Z}function y(D,H,G){var Z=u(D,H,G);return Z[1].v=D.read_shift(8,"f"),Z}function h(D,H,G){var Z=je(13);return Z.write_shift(1,255),Z.write_shift(2,H),Z.write_shift(2,D),Z.write_shift(8,G,"f"),Z}function b(D,H,G){var Z=D.l+H,X=u(D,H,G);if(X[1].v=D.read_shift(8,"f"),G.qpro)D.l=Z;else{var ie=D.read_shift(2);x(D.slice(D.l,D.l+ie),X),D.l+=ie}return X}function N(D,H,G){var Z=H&32768;return H&=-32769,H=(Z?D:0)+(H>=8192?H-16384:H),(Z?"":"$")+(G?or(H):Nr(H))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},v=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function x(D,H){oa(D,0);for(var G=[],Z=0,X="",ie="",pe="",ne="";D.l<D.length;){var ee=D[D.l++];switch(ee){case 0:G.push(D.read_shift(8,"f"));break;case 1:ie=N(H[0].c,D.read_shift(2),!0),X=N(H[0].r,D.read_shift(2),!1),G.push(ie+X);break;case 2:{var we=N(H[0].c,D.read_shift(2),!0),F=N(H[0].r,D.read_shift(2),!1);ie=N(H[0].c,D.read_shift(2),!0),X=N(H[0].r,D.read_shift(2),!1),G.push(we+F+":"+ie+X)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(D.read_shift(2));break;case 6:{for(var Ue="";ee=D[D.l++];)Ue+=String.fromCharCode(ee);G.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:ne=G.pop(),pe=G.pop(),G.push(["AND","OR"][ee-20]+"("+pe+","+ne+")");break;default:if(ee<32&&v[ee])ne=G.pop(),pe=G.pop(),G.push(pe+v[ee]+ne);else if(S[ee]){if(Z=S[ee][1],Z==69&&(Z=D[D.l++]),Z>G.length){console.error("WK1 bad formula parse 0x"+ee.toString(16)+":|"+G.join("|")+"|");return}var R=G.slice(-Z);G.length-=Z,G.push(S[ee][0]+"("+R.join(",")+")")}else return ee<=7?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=24?console.error("WK1 unsupported op "+ee.toString(16)):ee<=30?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=115?console.error("WK1 unsupported function opcode "+ee.toString(16)):console.error("WK1 unrecognized opcode "+ee.toString(16))}}G.length==1?H[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function g(D){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=D.read_shift(2),H[3]=D[D.l++],H[0].c=D[D.l++],H}function w(D,H){var G=g(D);return G[1].t="s",G[1].v=D.read_shift(H-4,"cstr"),G}function j(D,H,G,Z){var X=je(6+Z.length);X.write_shift(2,D),X.write_shift(1,G),X.write_shift(1,H),X.write_shift(1,39);for(var ie=0;ie<Z.length;++ie){var pe=Z.charCodeAt(ie);X.write_shift(1,pe>=128?95:pe)}return X.write_shift(1,0),X}function O(D,H){var G=g(D);G[1].v=D.read_shift(2);var Z=G[1].v>>1;if(G[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return G[1].v=Z,G}function _(D,H){var G=g(D),Z=D.read_shift(4),X=D.read_shift(4),ie=D.read_shift(2);if(ie==65535)return Z===0&&X===3221225472?(G[1].t="e",G[1].v=15):Z===0&&X===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var pe=ie&32768;return ie=(ie&32767)-16446,G[1].v=(1-pe*2)*(X*Math.pow(2,ie+32)+Z*Math.pow(2,ie)),G}function E(D,H,G,Z){var X=je(14);if(X.write_shift(2,D),X.write_shift(1,G),X.write_shift(1,H),Z==0)return X.write_shift(4,0),X.write_shift(4,0),X.write_shift(2,65535),X;var ie=0,pe=0,ne=0,ee=0;return Z<0&&(ie=1,Z=-Z),pe=Math.log2(Z)|0,Z/=Math.pow(2,pe-31),ee=Z>>>0,ee&2147483648||(Z/=2,++pe,ee=Z>>>0),Z-=ee,ee|=2147483648,ee>>>=0,Z*=Math.pow(2,32),ne=Z>>>0,X.write_shift(4,ne),X.write_shift(4,ee),pe+=16383+(ie?32768:0),X.write_shift(2,pe),X}function T(D,H){var G=_(D);return D.l+=H-14,G}function k(D,H){var G=g(D),Z=D.read_shift(4);return G[1].v=Z>>6,G}function A(D,H){var G=g(D),Z=D.read_shift(8,"f");return G[1].v=Z,G}function P(D,H){var G=A(D);return D.l+=H-10,G}function M(D,H){return D[D.l+H-1]==0?D.read_shift(H,"cstr"):""}function U(D,H){var G=D[D.l++];G>H-1&&(G=H-1);for(var Z="";Z.length<G;)Z+=String.fromCharCode(D[D.l++]);return Z}function W(D,H,G){if(!(!G.qpro||H<21)){var Z=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var X=D.read_shift(H-21,"cstr");return[Z,X]}}function Y(D,H){for(var G={},Z=D.l+H;D.l<Z;){var X=D.read_shift(2);if(X==14e3){for(G[X]=[0,""],G[X][0]=D.read_shift(2);D[D.l];)G[X][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return G}function B(D,H){var G=je(5+D.length);G.write_shift(2,14e3),G.write_shift(2,H);for(var Z=0;Z<D.length;++Z){var X=D.charCodeAt(Z);G[G.l++]=X>127?95:X}return G[G.l++]=0,G}var ae={0:{n:"BOF",f:Ir},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:M},222:{n:"SHEETNAMELP",f:U},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:w},23:{n:"NUMBER17",f:_},24:{n:"NUMBER18",f:O},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Y},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:A},40:{n:"FORMULA28",f:P},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:M},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:W},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}}();function m0e(e){var t={},r=e.match(Ea),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=st(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=Hw[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var h0e=function(){var e=mf("t"),t=mf("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:At(o[1])},c=i.match(t);return c&&(l.s=m0e(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}}(),x0e=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),p0e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,g0e=/<(?:\w+:)?r>/,y0e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function vN(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=At(Ht(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Ht(e),r&&(a.h=tN(a.t))):e.match(g0e)&&(a.r=Ht(e),a.t=At(Ht((e.replace(y0e,"").match(p0e)||[]).join("").replace(Ea,""))),r&&(a.h=x0e(h0e(a.r)))),a):{t:""}}var v0e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,b0e=/<(?:\w+:)?(?:si|sstItem)>/g,w0e=/<\/(?:\w+:)?(?:si|sstItem)>/;function N0e(e,t){var r=[],a="";if(!e)return r;var s=e.match(v0e);if(s){a=s[2].replace(b0e,"").split(w0e);for(var i=0;i!=a.length;++i){var o=vN(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=st(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var j0e=/^\s|\s$|[\t\n\r]/;function lD(e,t){if(!t.bookSST)return"";var r=[Er];r[r.length]=Me("sst",null,{xmlns:il[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(j0e)&&(i+=' xml:space="preserve"'),i+=">"+Wt(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function S0e(e){return[e.read_shift(4),e.read_shift(4)]}function k0e(e,t){var r=[],a=!1;return ai(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function C0e(e,t){return t||(t=je(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var O0e=Rue;function _0e(e){var t=za();Oe(t,159,C0e(e));for(var r=0;r<e.length;++r)Oe(t,19,O0e(e[r]));return Oe(t,160),t.end()}function cD(e){if(typeof Ct<"u")return Ct.utils.encode(Vo,e);for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Us(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function T0e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Us(e,4),t.U=Us(e,4),t.W=Us(e,4),t}function E0e(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function A0e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(E0e(e));return t}function P0e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function D0e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Us(e,4),t.U=Us(e,4),t.W=Us(e,4),t}function I0e(e){var t=D0e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function uD(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function dD(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function M0e(e){var t=Us(e);switch(t.Minor){case 2:return[t.Minor,F0e(e)];case 3:return[t.Minor,R0e()];case 4:return[t.Minor,L0e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function F0e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=uD(e,r),s=dD(e,e.length-e.l);return{t:"Std",h:a,v:s}}function R0e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function L0e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(Ea,function(i){var o=st(i);switch(Ns(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function $0e(e,t){var r={},a=r.EncryptionVersionInfo=Us(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=uD(e,s),t-=s,r.EncryptionVerifier=dD(e,t),r}function B0e(e){var t={},r=t.EncryptionVersionInfo=Us(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function bN(e){var t=0,r,a=cD(e),s=a.length+1,i,o,l,c,u;for(r=Ri(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var fD=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=cD(o),c=i(l),u=l.length,d=Ri(16),f=0;f!=16;++f)d[f]=0;var m,p,y;for((u&1)===1&&(m=c>>8,d[u]=s(e[0],m),--u,m=c&255,p=l[l.length-1],d[u]=s(p,m));u>0;)--u,m=c>>8,d[u]=s(l[u],m),--u,m=c&255,d[u]=s(l[u],m);for(u=15,y=15-l.length;y>0;)m=c>>8,d[u]=s(e[y],m),--u,--y,m=c&255,d[u]=s(l[u],m),--u,--y;return d}}(),U0e=function(e,t,r,a,s){s||(s=t),a||(a=fD(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},W0e=function(e){var t=0,r=fD(e);return function(a){var s=U0e("",a,t,r);return t=s[1],s[0]}};function q0e(e,t,r,a){var s={key:Ir(e),verificationBytes:Ir(e)};return r.password&&(s.verifier=bN(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=W0e(r.password)),s}function K0e(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=B0e(e):a.Data=$0e(e,t),a}function V0e(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?K0e(e,t-2,a):q0e(e,r.biff>=8?t:t-2,r,a),a}var mD=function(){function e(s,i){switch(i.type){case"base64":return t(un(s),i);case"binary":return t(s,i);case"buffer":return t(pt&&Buffer.isBuffer(s)?s.toString("binary"):eo(s),i);case"array":return t(Ho(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var m=/\\\w+\b/g,p=0,y,h=-1;y=m.exec(d);){switch(y[0]){case"\\cell":var b=d.slice(p,m.lastIndex-y[0].length);if(b[0]==" "&&(b=b.slice(1)),++h,b.length){var N={v:b,t:"s"};Array.isArray(l)?l[f][h]=N:l[nt({r:f,c:h})]=N}break}p=m.lastIndex}h>u.e.c&&(u.e.c=h)}),l["!ref"]=ut(u),l}function r(s,i){return to(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=Nt(s["!ref"]),l,c=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=nt({r:u,c:d});l=c?(s[u]||[])[d]:s[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(bs(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function z0e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function gf(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function H0e(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,u=s+i;switch(c=o/(u>1?2-u:u),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,u/2]}function G0e(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function Hh(e,t){if(t===0)return e;var r=H0e(z0e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),gf(G0e(r))}var hD=6,X0e=15,Y0e=1,Na=hD;function yf(e){return Math.floor((e+Math.round(128/Na)/256)*Na)}function vf(e){return Math.floor((e-5)/Na*100+.5)/100}function Gh(e){return Math.round((e*Na+5)/Na*256)/256}function Ig(e){return Gh(vf(yf(e)))}function wN(e){var t=Math.abs(e-Ig(e)),r=Na;if(t>.005)for(Na=Y0e;Na<X0e;++Na)Math.abs(e-Ig(e))<=t&&(t=Math.abs(e-Ig(e)),r=Na);Na=r}function Li(e){e.width?(e.wpx=yf(e.width),e.wch=vf(e.wpx),e.MDW=Na):e.wpx?(e.wch=vf(e.wpx),e.width=Gh(e.wch),e.MDW=Na):typeof e.wch=="number"&&(e.width=Gh(e.wch),e.wpx=yf(e.width),e.MDW=Na),e.customWidth&&delete e.customWidth}var Q0e=96,xD=Q0e;function bf(e){return e*96/xD}function Fc(e){return e*xD/96}var J0e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Z0e(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(Ea)||[]).forEach(function(o){var l=st(o);switch(Ns(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=sr(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=sr(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function eme(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(Ea)||[]).forEach(function(o){var l=st(o);switch(Ns(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function tme(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(Ea)||[]).forEach(function(o){var l=st(o);switch(Ns(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ht(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?sr(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?sr(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?sr(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?sr(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?sr(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?sr(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?sr(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Hw[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=sr(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=_o[s.color.index];s.color.index==81&&(c=_o[1]),c||(c=_o[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Hh(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function rme(e,t,r){t.NumberFmt=[];for(var a=kr(et),s=0;s<a.length;++s)t.NumberFmt[a[s]]=et[a[s]];var i=e[0].match(Ea);if(i)for(s=0;s<i.length;++s){var o=st(i[s]);switch(Ns(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=At(Ht(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}gs(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function ame(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=Me("numFmt",null,{numFmtId:a,formatCode:Wt(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Me("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var U0=["numFmtId","fillId","fontId","borderId","xfId"],W0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function nme(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(Ea)||[]).forEach(function(i){var o=st(i),l=0;switch(Ns(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<U0.length;++l)a[U0[l]]&&(a[U0[l]]=parseInt(a[U0[l]],10));for(l=0;l<W0.length;++l)a[W0[l]]&&(a[W0[l]]=sr(a[W0[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=sr(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function sme(e){var t=[];return t[t.length]=Me("cellXfs",null),e.forEach(function(r){t[t.length]=Me("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Me("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var ime=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&rme(f,d,u),(f=l.match(s))&&tme(f,d,c,u),(f=l.match(a))&&eme(f,d,c,u),(f=l.match(i))&&Z0e(f,d,c,u),(f=l.match(r))&&nme(f,d,u),d}}();function pD(e,t){var r=[Er,Me("styleSheet",null,{xmlns:il[0],"xmlns:vt":Ur.vt})],a;return e.SSF&&(a=ame(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=sme(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ome(e,t){var r=e.read_shift(2),a=Ca(e);return[r,a]}function lme(e,t,r){r||(r=je(6+4*t.length)),r.write_shift(2,e),Jr(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function cme(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Kue(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=que(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Ca(e),a}function ume(e,t){t||(t=je(25+4*32)),t.write_shift(2,e.sz*20),Vue(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Kh(e.color,t);var a=0;return e.scheme=="major"&&(a=1),e.scheme=="minor"&&(a=2),t.write_shift(1,a),Jr(e.name,t),t.length>t.l?t.slice(0,t.l):t}var dme=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Mg,fme=_a;function d_(e,t){t||(t=je(4*3+8*7+16*1)),Mg||(Mg=op(dme));var r=Mg[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(Kh({auto:1},t),Kh({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function mme(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function gD(e,t,r){r||(r=je(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Cu(e,t){return t||(t=je(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var hme=_a;function xme(e,t){return t||(t=je(51)),t.write_shift(1,0),Cu(null,t),Cu(null,t),Cu(null,t),Cu(null,t),Cu(null,t),t.length>t.l?t.slice(0,t.l):t}function pme(e,t){return t||(t=je(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),qh(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function gme(e,t,r){var a=je(2052);return a.write_shift(4,e),qh(t,a),qh(r,a),a.length>a.l?a.slice(0,a.l):a}function yme(e,t,r){var a={};a.NumberFmt=[];for(var s in et)a.NumberFmt[s]=et[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return ai(e,function(c,u,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],gs(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Hh(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(d),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(d);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}function vme(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(Oe(e,615,rs(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Oe(e,44,lme(s,t[s]))}),Oe(e,616))}}function bme(e){var t=1;Oe(e,611,rs(t)),Oe(e,43,ume({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Oe(e,612)}function wme(e){var t=2;Oe(e,603,rs(t)),Oe(e,45,d_({patternType:"none"})),Oe(e,45,d_({patternType:"gray125"})),Oe(e,604)}function Nme(e){var t=1;Oe(e,613,rs(t)),Oe(e,46,xme()),Oe(e,614)}function jme(e){var t=1;Oe(e,626,rs(t)),Oe(e,47,gD({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Oe(e,627)}function Sme(e,t){Oe(e,617,rs(t.length)),t.forEach(function(r){Oe(e,47,gD(r,0))}),Oe(e,618)}function kme(e){var t=1;Oe(e,619,rs(t)),Oe(e,48,pme({xfId:0,builtinId:0,name:"Normal"})),Oe(e,620)}function Cme(e){var t=0;Oe(e,505,rs(t)),Oe(e,506)}function Ome(e){var t=0;Oe(e,508,gme(t,"TableStyleMedium9","PivotStyleMedium4")),Oe(e,509)}function _me(e,t){var r=za();return Oe(r,278),vme(r,e.SSF),bme(r),wme(r),Nme(r),jme(r),Sme(r,t.cellXfs),kme(r),Cme(r),Ome(r),Oe(r,279),r.end()}var Tme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Eme(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(Ea)||[]).forEach(function(s){var i=st(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Tme.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Ame(){}function Pme(){}var Dme=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Ime=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Mme=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Fme(e,t,r){t.themeElements={};var a;[["clrScheme",Dme,Eme],["fontScheme",Ime,Ame],["fmtScheme",Mme,Pme]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var Rme=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function yD(e,t){(!e||e.length===0)&&(e=NN());var r,a={};if(!(r=e.match(Rme)))throw new Error("themeElements not found in theme");return Fme(r[0],a,t),a.raw=e,a}function NN(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Er];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Lme(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=h6(i,{type:"array"})}catch{return}var l=rn(o,"theme/theme/theme1.xml",!0);if(l)return yD(l,r)}}function $me(e){return e.read_shift(4)}function Bme(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Ume(e,4);break;case 2:t.xclrValue=Q6(e);break;case 3:t.xclrValue=$me(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Ume(e,t){return _a(e,t)}function Wme(e,t){return _a(e,t)}function qme(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=Bme(e);break;case 6:a[1]=Wme(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function Kme(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(qme(e,r-e.l));return{ixfe:a,ext:i}}function Vme(e,t){t.forEach(function(r){switch(r[0]){}})}function zme(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ca(e)}}function Hme(e){var t=je(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Jr(e.name,t),t.slice(0,t.l)}function Gme(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Xme(e){var t=je(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Yme(e,t){var r=je(8+2*t.length);return r.write_shift(4,e),Jr(t,r),r.slice(0,r.l)}function Qme(e){return e.l+=4,e.read_shift(4)!=0}function Jme(e,t){var r=je(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}function Zme(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return ai(e,function(c,u,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(d),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function ehe(){var e=za();return Oe(e,332),Oe(e,334,rs(1)),Oe(e,335,Hme({name:"XLDAPR",version:12e4,flags:3496657072})),Oe(e,336),Oe(e,339,Yme(1,"XLDAPR")),Oe(e,52),Oe(e,35,rs(514)),Oe(e,4096,rs(0)),Oe(e,4097,Nn(1)),Oe(e,36),Oe(e,53),Oe(e,340),Oe(e,337,Jme(1,!0)),Oe(e,51,Xme([[1,0]])),Oe(e,338),Oe(e,333),e.end()}function the(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(Ea,function(l){var c=st(l);switch(Ns(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==c.name&&(o=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function vD(){var e=[Er];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function rhe(e){var t=[];if(!e)return t;var r=1;return(e.match(Ea)||[]).forEach(function(a){var s=st(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function ahe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=nt(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function nhe(e,t,r){var a=[];return ai(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function she(e,t,r,a){if(!e)return e;var s=a||{},i=!1;ai(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function ihe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Bl=1024;function bD(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Me("xml",null,{"xmlns:v":Za.v,"xmlns:o":Za.o,"xmlns:x":Za.x,"xmlns:mv":Za.mv}).replace(/\/>/,">"),Me("o:shapelayout",Me("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Me("v:shapetype",[Me("v:stroke",null,{joinstyle:"miter"}),Me("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];Bl<e*1e3;)Bl+=1e3;return t.forEach(function(i){var o=xr(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Me("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Me("v:fill",c,l),d={on:"t",obscured:"t"};++Bl,s=s.concat(["<v:shape"+hf({id:"_x0000_s"+Bl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Me("v:shadow",null,d),Me("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",la("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),la("x:AutoFill","False"),la("x:Row",String(o.r)),la("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function f_(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=xr(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Nt(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=ut(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}i.c.push(d)})}function ohe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=st(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=xr(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&vN(f[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=m.h),a.push(u)}}}}),a}function wD(e){var t=[Er,Me("comments",null,{xmlns:il[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=Wt(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(Wt(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(la("t",Wt(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(la("t",Wt(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function lhe(e,t){var r=[],a=!1,s={},i=0;return e.replace(Ea,function(l,c){var u=st(l);switch(Ns(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function che(e,t,r){var a=[Er,Me("ThreadedComments",null,{xmlns:Ur.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(Me("threadedComment",la("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function uhe(e,t){var r=[],a=!1;return e.replace(Ea,function(i){var o=st(i);switch(Ns(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function dhe(e){var t=[Er,Me("personList",null,{xmlns:Ur.TCMNT,"xmlns:x":il[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(Me("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function fhe(e){var t={};t.iauthor=e.read_shift(4);var r=ul(e);return t.rfx=r.s,t.ref=nt(r.s),e.l+=16,t}function mhe(e,t){return t==null&&(t=je(36)),t.write_shift(4,e[1].iauthor),nu(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var hhe=Ca;function xhe(e){return Jr(e.slice(0,54))}function phe(e,t){var r=[],a=[],s={},i=!1;return ai(e,function(l,c,u){switch(u){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function ghe(e){var t=za(),r=[];return Oe(t,628),Oe(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Oe(t,632,xhe(s.a)))})}),Oe(t,631),Oe(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:xr(a[0]),e:xr(a[0])};Oe(t,635,mhe([i,s])),s.t&&s.t.length>0&&Oe(t,637,$ue(s)),Oe(t,636),delete s.iauthor})}),Oe(t,634),Oe(t,629),t.end()}var yhe="application/vnd.ms-office.vbaProject";function vhe(e){var t=Je.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Je.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Je.write(t)}function bhe(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Je.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var ND=["xlsb","xlsm","xlam","biff8","xla"];function whe(){return{"!type":"dialog"}}function Nhe(){return{"!type":"dialog"}}function jhe(){return{"!type":"macro"}}function She(){return{"!type":"macro"}}var tc=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,s+(l?"":"$")+or(d)+(c?"":"$")+Nr(u)}return function(s,i){return t=i,s.replace(e,r)}}(),jN=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,SN=function(){return function(t,r){return t.replace(jN,function(a,s,i,o,l,c){var u=uN(o)-(i?0:r.c),d=cN(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",m=u==0?"":i?u+1:"["+u+"]";return s+"R"+f+"C"+m})}}();function jD(e,t){return e.replace(jN,function(r,a,s,i,o,l){return a+(s=="$"?s+i:or(uN(i)+t.c))+(o=="$"?o+l:Nr(cN(l)+t.r))})}function khe(e,t,r){var a=Fa(t),s=a.s,i=xr(r),o={r:i.r-s.r,c:i.c-s.c};return jD(e,o)}function Che(e){return e.length!=1}function m_(e){return e.replace(/_xlfn\./g,"")}function Ar(e){e.l+=1}function $i(e,t){var r=e.read_shift(t==1?1:2);return[r&16383,r>>14&1,r>>15&1]}function SD(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return kD(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=$i(e,2),l=$i(e,2);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function kD(e){var t=$i(e,2),r=$i(e,2),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Ohe(e,t,r){if(r.biff<8)return kD(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=$i(e,2),o=$i(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function CD(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return _he(e);var a=e.read_shift(r&&r.biff==12?4:2),s=$i(e,2);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function _he(e){var t=$i(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function The(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Ehe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return Ahe(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function Ahe(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function Phe(e,t,r){var a=(e[e.l++]&96)>>5,s=SD(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function Dhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=SD(e,i,r);return[a,s,o]}function Ihe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function Mhe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function Fhe(e,t,r){var a=(e[e.l++]&96)>>5,s=Ohe(e,t-1,r);return[a,s]}function Rhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function h_(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Lhe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function $he(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Bhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Uhe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Whe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function OD(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function qhe(e){return e.read_shift(2),OD(e)}function Khe(e){return e.read_shift(2),OD(e)}function Vhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=CD(e,0,r);return[a,s]}function zhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=Ehe(e,0,r);return[a,s]}function Hhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=CD(e,0,r);return[a,s,i]}function Ghe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Qxe[s],ED[s],a]}function Xhe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Yhe(e);return[s,(i[0]===0?ED:Yxe)[i[1]]]}function Yhe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Qhe(e,t,r){e.l+=r&&r.biff==2?3:4}function Jhe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Zhe(e){return e.l++,ni[e.read_shift(1)]}function exe(e){return e.l++,e.read_shift(2)}function txe(e){return e.l++,e.read_shift(1)!==0}function rxe(e){return e.l++,ja(e)}function axe(e,t,r){return e.l++,zf(e,t-1,r)}function nxe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Cr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=ni[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ja(e);break;case 2:r[1]=dl(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function sxe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?ul:dp)(e));return s}function ixe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=nxe(e,r.biff);return o}function oxe(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function lxe(e,t,r){if(r.biff==5)return cxe(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function cxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function uxe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function dxe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function fxe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function mxe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var hxe=_a,xxe=_a,pxe=_a;function Gf(e,t,r){return e.l+=2,[The(e)]}function kN(e){return e.l+=6,[]}var gxe=Gf,yxe=kN,vxe=kN,bxe=Gf;function _D(e){return e.l+=2,[Ir(e),e.read_shift(2)&1]}var wxe=Gf,Nxe=_D,jxe=kN,Sxe=Gf,kxe=Gf,Cxe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Oxe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=Cxe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function _xe(e){return e.l+=2,[e.read_shift(4)]}function Txe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Exe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Axe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Pxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Dxe(e){return e.l+=4,[0,0]}var x_={1:{n:"PtgExp",f:Jhe},2:{n:"PtgTbl",f:pxe},3:{n:"PtgAdd",f:Ar},4:{n:"PtgSub",f:Ar},5:{n:"PtgMul",f:Ar},6:{n:"PtgDiv",f:Ar},7:{n:"PtgPower",f:Ar},8:{n:"PtgConcat",f:Ar},9:{n:"PtgLt",f:Ar},10:{n:"PtgLe",f:Ar},11:{n:"PtgEq",f:Ar},12:{n:"PtgGe",f:Ar},13:{n:"PtgGt",f:Ar},14:{n:"PtgNe",f:Ar},15:{n:"PtgIsect",f:Ar},16:{n:"PtgUnion",f:Ar},17:{n:"PtgRange",f:Ar},18:{n:"PtgUplus",f:Ar},19:{n:"PtgUminus",f:Ar},20:{n:"PtgPercent",f:Ar},21:{n:"PtgParen",f:Ar},22:{n:"PtgMissArg",f:Ar},23:{n:"PtgStr",f:axe},26:{n:"PtgSheet",f:Txe},27:{n:"PtgEndSheet",f:Exe},28:{n:"PtgErr",f:Zhe},29:{n:"PtgBool",f:txe},30:{n:"PtgInt",f:exe},31:{n:"PtgNum",f:rxe},32:{n:"PtgArray",f:Rhe},33:{n:"PtgFunc",f:Ghe},34:{n:"PtgFuncVar",f:Xhe},35:{n:"PtgName",f:oxe},36:{n:"PtgRef",f:Vhe},37:{n:"PtgArea",f:Phe},38:{n:"PtgMemArea",f:uxe},39:{n:"PtgMemErr",f:hxe},40:{n:"PtgMemNoMem",f:xxe},41:{n:"PtgMemFunc",f:dxe},42:{n:"PtgRefErr",f:fxe},43:{n:"PtgAreaErr",f:Ihe},44:{n:"PtgRefN",f:zhe},45:{n:"PtgAreaN",f:Fhe},46:{n:"PtgMemAreaN",f:Axe},47:{n:"PtgMemNoMemN",f:Pxe},57:{n:"PtgNameX",f:lxe},58:{n:"PtgRef3d",f:Hhe},59:{n:"PtgArea3d",f:Dhe},60:{n:"PtgRefErr3d",f:mxe},61:{n:"PtgAreaErr3d",f:Mhe},255:{}},Ixe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Mxe={1:{n:"PtgElfLel",f:_D},2:{n:"PtgElfRw",f:Sxe},3:{n:"PtgElfCol",f:gxe},6:{n:"PtgElfRwV",f:kxe},7:{n:"PtgElfColV",f:bxe},10:{n:"PtgElfRadical",f:wxe},11:{n:"PtgElfRadicalS",f:jxe},13:{n:"PtgElfColS",f:yxe},15:{n:"PtgElfColSV",f:vxe},16:{n:"PtgElfRadicalLel",f:Nxe},25:{n:"PtgList",f:Oxe},29:{n:"PtgSxName",f:_xe},255:{}},Fxe={0:{n:"PtgAttrNoop",f:Dxe},1:{n:"PtgAttrSemi",f:Whe},2:{n:"PtgAttrIf",f:Bhe},4:{n:"PtgAttrChoose",f:Lhe},8:{n:"PtgAttrGoto",f:$he},16:{n:"PtgAttrSum",f:Qhe},32:{n:"PtgAttrBaxcel",f:h_},33:{n:"PtgAttrBaxcel",f:h_},64:{n:"PtgAttrSpace",f:qhe},65:{n:"PtgAttrSpaceSemi",f:Khe},128:{n:"PtgAttrIfError",f:Uhe},255:{}};function Xf(e,t,r,a){if(a.biff<8)return _a(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=ixe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=sxe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(_a(e,t)),i}function Yf(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=x_[i]||x_[Ixe[i]],(i===24||i===25)&&(s=(i===24?Mxe:Fxe)[e[e.l+1]]),!s||!s.f?_a(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Rxe(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Lxe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function $xe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function TD(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function p_(e,t,r){var a=TD(e,t,r);return a=="#REF"?a:$xe(a,r)}function ya(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},l=[],c,u,d,f=0,m=0,p,y="";if(!e[0]||!e[0][0])return"";for(var h=-1,b="",N=0,S=e[0].length;N<S;++N){var v=e[0][N];switch(v[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),h>=0){switch(e[0][h][1][0]){case 0:b=wr(" ",e[0][h][1][1]);break;case 1:b=wr("\r",e[0][h][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}u=u+b,h=-1}l.push(u+Lxe[v[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Ju(v[1][1],o,s),l.push(Zu(d,i));break;case"PtgRefN":d=r?Ju(v[1][1],r,s):v[1][1],l.push(Zu(d,i));break;case"PtgRef3d":f=v[1][1],d=Ju(v[1][2],o,s),y=p_(a,f,s),l.push(y+"!"+Zu(d,i));break;case"PtgFunc":case"PtgFuncVar":var x=v[1][0],g=v[1][1];x||(x=0),x&=127;var w=x==0?[]:l.slice(-x);l.length-=x,g==="User"&&(g=w.shift()),l.push(g+"("+w.join(",")+")");break;case"PtgBool":l.push(v[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(v[1]);break;case"PtgNum":l.push(String(v[1]));break;case"PtgStr":l.push('"'+v[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(v[1]);break;case"PtgAreaN":p=VO(v[1][1],r?{s:r}:o,s),l.push(Ag(p,s));break;case"PtgArea":p=VO(v[1][1],o,s),l.push(Ag(p,s));break;case"PtgArea3d":f=v[1][1],p=v[1][2],y=p_(a,f,s),l.push(y+"!"+Ag(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=v[1][2];var j=(a.names||[])[m-1]||(a[0]||[])[m],O=j?j.Name:"SH33TJSNAME"+String(m);O&&O.slice(0,6)=="_xlfn."&&!s.xlfn&&(O=O.slice(6)),l.push(O);break;case"PtgNameX":var _=v[1][1];m=v[1][2];var E;if(s.biff<=5)_<0&&(_=-_),a[_]&&(E=a[_][m]);else{var T="";if(((a[_]||[])[0]||[])[0]==14849||(((a[_]||[])[0]||[])[0]==1025?a[_][m]&&a[_][m].itab>0&&(T=a.SheetNames[a[_][m].itab-1]+"!"):T=a.SheetNames[m-1]+"!"),a[_]&&a[_][m])T+=a[_][m].Name;else if(a[0]&&a[0][m])T+=a[0][m].Name;else{var k=(TD(a,_,s)||"").split(";;");k[m-1]?T=k[m-1]:T+="SH33TJSERRX"}l.push(T);break}E||(E={Name:"SH33TJSERRY"}),l.push(E.Name);break;case"PtgParen":var A="(",P=")";if(h>=0){switch(b="",e[0][h][1][0]){case 2:A=wr(" ",e[0][h][1][1])+A;break;case 3:A=wr("\r",e[0][h][1][1])+A;break;case 4:P=wr(" ",e[0][h][1][1])+P;break;case 5:P=wr("\r",e[0][h][1][1])+P;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}h=-1}l.push(A+l.pop()+P);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:v[1][1],r:v[1][0]};var M={c:r.c,r:r.r};if(a.sharedf[nt(d)]){var U=a.sharedf[nt(d)];l.push(ya(U,o,M,a,s))}else{var W=!1;for(c=0;c!=a.arrayf.length;++c)if(u=a.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(ya(u[1],o,M,a,s)),W=!0;break}W||l.push(v[1])}break;case"PtgArray":l.push("{"+Rxe(v[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":h=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+v[1].idx+"[#"+v[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(v));default:throw new Error("Unrecognized Formula Token: "+String(v))}var Y=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&h>=0&&Y.indexOf(e[0][N][0])==-1){v=e[0][h];var B=!0;switch(v[1][0]){case 4:B=!1;case 0:b=wr(" ",v[1][1]);break;case 5:B=!1;case 1:b=wr("\r",v[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+v[1][0])}l.push((B?b:"")+l.pop()+(B?"":b)),h=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Bxe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],_a(e,t-2)];var l=Yf(e,o,r);return t!==o+s&&(i=Xf(e,t-o-s,l,r)),e.l=a,[l,i]}function Uxe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],_a(e,t-2)];var l=Yf(e,o,r);return t!==o+s&&(i=Xf(e,t-o-s,l,r)),e.l=a,[l,i]}function Wxe(e,t,r,a){var s=e.l+t,i=Yf(e,a,r),o;return s!==e.l&&(o=Xf(e,s-e.l,i,r)),[i,o]}function qxe(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=Yf(e,i,r);return i==65535?[[],_a(e,t-2)]:(t!==i+2&&(s=Xf(e,a-i-2,o,r)),[o,s])}function Kxe(e){var t;if(Ds(e,e.l+6)!==65535)return[ja(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Vxe(e){if(e==null){var t=je(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Go(e);return Go(0)}function Fg(e,t,r){var a=e.l+t,s=js(e);r.biff==2&&++e.l;var i=Kxe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Uxe(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function zxe(e,t,r,a,s){var i=Yo(t,r,s),o=Vxe(e.v),l=je(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=je(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Qr([i,o,l,u]);return f}function fp(e,t,r){var a=e.read_shift(4),s=Yf(e,a,r),i=e.read_shift(4),o=i>0?Xf(e,i,s,r):null;return[s,o]}var Hxe=fp,mp=fp,Gxe=fp,Xxe=fp,Yxe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},ED={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Qxe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function g_(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Jxe(e){var t="of:="+e.replace(jN,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Rg(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Zxe(e){return e.replace(/\./,"!")}var td={},rc={},rd=typeof Map<"u";function CN(e,t,r){var a=0,s=e.length;if(r){if(rd?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=rd?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(rd?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function hp(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(Na=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=vf(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=Gh(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Ao(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function ro(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){gs(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function AD(e,t,r,a,s,i){try{a.cellNF&&(e.z=et[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=lr(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(et[t]==null&&gs(Yce[t]||"General",t),e.t==="e")e.w=e.w||ni[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ff(e.v);else if(e.t==="d"){var o=Kr(e.v);(o|0)===o?e.w=o.toString(10):e.w=ff(o)}else{if(e.v===void 0)return"";e.w=zo(e.v,rc)}else e.t==="d"?e.w=dn(t,Kr(e.v),rc):e.w=dn(t,e.v,rc)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Hh(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Hh(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function epe(e,t,r){if(e&&e["!ref"]){var a=Nt(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function tpe(e,t){var r=Nt(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=ut(r))}var rpe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ape=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,npe=/<(?:\w:)?hyperlink [^>]*>/mg,spe=/"(\w*:\w*)"/,ipe=/<(?:\w:)?col\b[^>]*[\/]?>/g,ope=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,lpe=/<(?:\w:)?pageMargins[^>]*\/>/g,PD=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,cpe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,upe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function dpe(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(ape);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var m=u.match(PD);m?ON(m[0],l,s,r):(m=u.match(cpe))&&mpe(m[0],m[1]||"",l,s,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var y=u.slice(p,p+50).match(spe);y&&tpe(l,y[1])}var h=u.match(upe);h&&h[1]&&Cpe(h[1],s);var b=[];if(t.cellStyles){var N=u.match(ipe);N&&wpe(b,N)}f&&Tpe(f[1],l,t,c,i,o);var S=d.match(ope);S&&(l["!autofilter"]=jpe(S[0]));var v=[],x=d.match(rpe);if(x)for(p=0;p!=x.length;++p)v[p]=Nt(x[p].slice(x[p].indexOf('"')+1));var g=d.match(npe);g&&ype(l,g,a);var w=d.match(lpe);if(w&&(l["!margins"]=vpe(st(w[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=ut(c)),t.sheetRows>0&&l["!ref"]){var j=Nt(l["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=ut(j))}return b.length>0&&(l["!cols"]=b),v.length>0&&(l["!merges"]=v),l}function fpe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+ut(e[r])+'"/>';return t+"</mergeCells>"}function ON(e,t,r,a){var s=st(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=At(Ht(s.codeName)))}function mpe(e,t,r,a,s){ON(e.slice(0,e.indexOf(">")),r,a,s)}function hpe(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=fs(Wt(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Me("outlinePr",null,u)}!i&&!l||(s[s.length]=Me("sheetPr",l,o))}var xpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],ppe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function gpe(e){var t={sheet:1};return xpe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),ppe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=bN(e.password).toString(16).toUpperCase()),Me("sheetProtection",null,t)}function ype(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=st(Ht(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+At(i.location))):(i.Target="#"+At(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Nt(i.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=nt({c:u,r:c});a?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=i)}}}function vpe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function bpe(e){return Ao(e),Me("pageMargins",null,e)}function wpe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=st(t[a],!0);s.hidden&&(s.hidden=sr(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,wN(s.width)),Li(s);i<=o;)e[i++]=Yt(s)}}function Npe(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=Me("col",null,hp(s,a)));return r[r.length]="</cols>",r.join("")}function jpe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Spe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:ut(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Fa(s);o.s.r==o.e.r&&(o.e.r=Fa(t["!ref"]).e.r,s=ut(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),Me("autoFilter",null,{ref:s})}var kpe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Cpe(e,t){t.Views||(t.Views=[{}]),(e.match(kpe)||[]).forEach(function(r,a){var s=st(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),sr(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function Ope(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),Me("sheetViews",Me("sheetView",null,s),{})}function _pe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=ni[e.v];break;case"d":a&&a.cellDates?s=lr(e.v,-1).toISOString():(e=Yt(e),e.t="n",s=""+(e.v=Kr(lr(e.v)))),typeof e.z>"u"&&(e.z=et[14]);break;default:s=e.v;break}var l=la("v",Wt(s)),c={r:t},u=ro(a.cellXfs,e,a);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=la("v",""+CN(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Me("f",Wt(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Me("c",l,c)}var Tpe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=mf("v"),o=mf("f");return function(c,u,d,f,m,p){for(var y=0,h="",b=[],N=[],S=0,v=0,x=0,g="",w,j,O=0,_=0,E,T,k=0,A=0,P=Array.isArray(p.CellXf),M,U=[],W=[],Y=Array.isArray(u),B=[],ae={},oe=!1,D=!!d.sheetStubs,H=c.split(t),G=0,Z=H.length;G!=Z;++G){h=H[G].trim();var X=h.length;if(X!==0){var ie=0;e:for(y=0;y<X;++y)switch(h[y]){case">":if(h[y-1]!="/"){++y;break e}if(d&&d.cellStyles){if(j=st(h.slice(ie,y),!0),O=j.r!=null?parseInt(j.r,10):O+1,_=-1,d.sheetRows&&d.sheetRows<O)continue;ae={},oe=!1,j.ht&&(oe=!0,ae.hpt=parseFloat(j.ht),ae.hpx=Fc(ae.hpt)),j.hidden=="1"&&(oe=!0,ae.hidden=!0),j.outlineLevel!=null&&(oe=!0,ae.level=+j.outlineLevel),oe&&(B[O-1]=ae)}break;case"<":ie=y;break}if(ie>=y)break;if(j=st(h.slice(ie,y),!0),O=j.r!=null?parseInt(j.r,10):O+1,_=-1,!(d.sheetRows&&d.sheetRows<O)){f.s.r>O-1&&(f.s.r=O-1),f.e.r<O-1&&(f.e.r=O-1),d&&d.cellStyles&&(ae={},oe=!1,j.ht&&(oe=!0,ae.hpt=parseFloat(j.ht),ae.hpx=Fc(ae.hpt)),j.hidden=="1"&&(oe=!0,ae.hidden=!0),j.outlineLevel!=null&&(oe=!0,ae.level=+j.outlineLevel),oe&&(B[O-1]=ae)),b=h.slice(y).split(e);for(var pe=0;pe!=b.length&&b[pe].trim().charAt(0)=="<";++pe);for(b=b.slice(pe),y=0;y!=b.length;++y)if(h=b[y].trim(),h.length!==0){if(N=h.match(r),S=y,v=0,x=0,h="<c "+(h.slice(0,1)=="<"?">":"")+h,N!=null&&N.length===2){for(S=0,g=N[1],v=0;v!=g.length&&!((x=g.charCodeAt(v)-64)<1||x>26);++v)S=26*S+x;--S,_=S}else++_;for(v=0;v!=h.length&&h.charCodeAt(v)!==62;++v);if(++v,j=st(h.slice(0,v),!0),j.r||(j.r=nt({r:O-1,c:_})),g=h.slice(v),w={t:""},(N=g.match(i))!=null&&N[1]!==""&&(w.v=At(N[1])),d.cellFormula){if((N=g.match(o))!=null&&N[1]!==""){if(w.f=At(Ht(N[1])).replace(/\r\n/g,`
`),d.xlfn||(w.f=m_(w.f)),N[0].indexOf('t="array"')>-1)w.F=(g.match(s)||[])[1],w.F.indexOf(":")>-1&&U.push([Nt(w.F),w.F]);else if(N[0].indexOf('t="shared"')>-1){T=st(N[0]);var ne=At(Ht(N[1]));d.xlfn||(ne=m_(ne)),W[parseInt(T.si,10)]=[T,ne,j.r]}}else(N=g.match(/<f[^>]*\/>/))&&(T=st(N[0]),W[T.si]&&(w.f=khe(W[T.si][1],W[T.si][2],j.r)));var ee=xr(j.r);for(v=0;v<U.length;++v)ee.r>=U[v][0].s.r&&ee.r<=U[v][0].e.r&&ee.c>=U[v][0].s.c&&ee.c<=U[v][0].e.c&&(w.F=U[v][1])}if(j.t==null&&w.v===void 0)if(w.f||w.F)w.v=0,w.t="n";else if(D)w.t="z";else continue;else w.t=j.t||"n";switch(f.s.c>_&&(f.s.c=_),f.e.c<_&&(f.e.c=_),w.t){case"n":if(w.v==""||w.v==null){if(!D)continue;w.t="z"}else w.v=parseFloat(w.v);break;case"s":if(typeof w.v>"u"){if(!D)continue;w.t="z"}else E=td[parseInt(w.v,10)],w.v=E.t,w.r=E.r,d.cellHTML&&(w.h=E.h);break;case"str":w.t="s",w.v=w.v!=null?Ht(w.v):"",d.cellHTML&&(w.h=tN(w.v));break;case"inlineStr":N=g.match(a),w.t="s",N!=null&&(E=vN(N[1]))?(w.v=E.t,d.cellHTML&&(w.h=E.h)):w.v="";break;case"b":w.v=sr(w.v);break;case"d":d.cellDates?w.v=lr(w.v,1):(w.v=Kr(lr(w.v,1)),w.t="n");break;case"e":(!d||d.cellText!==!1)&&(w.w=w.v),w.v=I6[w.v];break}if(k=A=0,M=null,P&&j.s!==void 0&&(M=p.CellXf[j.s],M!=null&&(M.numFmtId!=null&&(k=M.numFmtId),d.cellStyles&&M.fillId!=null&&(A=M.fillId))),AD(w,k,A,d,m,p),d.cellDates&&P&&w.t=="n"&&sl(et[k])&&(w.t="d",w.v=cp(w.v)),j.cm&&d.xlmeta){var we=(d.xlmeta.Cell||[])[+j.cm-1];we&&we.type=="XLDAPR"&&(w.D=!0)}if(Y){var F=xr(j.r);u[F.r]||(u[F.r]=[]),u[F.r][F.c]=w}else u[j.r]=w}}}}B.length>0&&(u["!rows"]=B)}}();function Epe(e,t,r,a){var s=[],i=[],o=Nt(e["!ref"]),l="",c,u="",d=[],f=0,m=0,p=e["!rows"],y=Array.isArray(e),h={r:u},b,N=-1;for(m=o.s.c;m<=o.e.c;++m)d[m]=or(m);for(f=o.s.r;f<=o.e.r;++f){for(i=[],u=Nr(f),m=o.s.c;m<=o.e.c;++m){c=d[m]+u;var S=y?(e[f]||[])[m]:e[c];S!==void 0&&(l=_pe(S,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[f])&&(h={r:u},p&&p[f]&&(b=p[f],b.hidden&&(h.hidden=1),N=-1,b.hpx?N=bf(b.hpx):b.hpt&&(N=b.hpt),N>-1&&(h.ht=N,h.customHeight=1),b.level&&(h.outlineLevel=b.level)),s[s.length]=Me("row",i.join(""),h))}if(p)for(;f<p.length;++f)p&&p[f]&&(h={r:f+1},b=p[f],b.hidden&&(h.hidden=1),N=-1,b.hpx?N=bf(b.hpx):b.hpt&&(N=b.hpt),N>-1&&(h.ht=N,h.customHeight=1),b.level&&(h.outlineLevel=b.level),s[s.length]=Me("row","",h));return s.join("")}function DD(e,t,r,a){var s=[Er,Me("worksheet",null,{xmlns:il[0],"xmlns:r":Ur.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=Nt(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=ut(d)}a||(a={}),c["!comments"]=[];var f=[];hpe(c,r,e,t,s),s[s.length]=Me("dimension",null,{ref:u}),s[s.length]=Ope(c,t,e,r),t.sheetFormat&&(s[s.length]=Me("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Npe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Epe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=gpe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Spe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=fpe(c["!merges"]));var m=-1,p,y=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(h){h[1].Target&&(p={ref:h[0]},h[1].Target.charAt(0)!="#"&&(y=Ut(a,-1,Wt(h[1].Target).replace(/#.*$/,""),yt.HLINK),p["r:id"]="rId"+y),(m=h[1].Target.indexOf("#"))>-1&&(p.location=Wt(h[1].Target.slice(m+1))),h[1].Tooltip&&(p.tooltip=Wt(h[1].Tooltip)),s[s.length]=Me("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=bpe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=la("ignoredErrors",Me("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(y=Ut(a,-1,"../drawings/drawing"+(e+1)+".xml",yt.DRAW),s[s.length]=Me("drawing",null,{"r:id":"rId"+y}),c["!drawing"]=f),c["!comments"].length>0&&(y=Ut(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",yt.VML),s[s.length]=Me("legacyDrawing",null,{"r:id":"rId"+y}),c["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Ape(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function Ppe(e,t,r){var a=je(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=bf(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,m=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var y=Array.isArray(r)?(r[u.r]||[])[u.c]:r[nt(u)];y&&(f<0&&(f=p),m=p)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,m))}var h=a.l;return a.l=c,a.write_shift(4,l),a.l=h,a.length>a.l?a.slice(0,a.l):a}function Dpe(e,t,r,a){var s=Ppe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&Oe(e,0,s)}var Ipe=ul,Mpe=nu;function Fpe(){}function Rpe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Bue(e),r}function Lpe(e,t,r){r==null&&(r=je(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return Kh({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),T6(e,r),r.slice(0,r.l)}function $pe(e){var t=$n(e);return[t]}function Bpe(e,t,r){return r==null&&(r=je(8)),ol(t,r)}function Upe(e){var t=ll(e);return[t]}function Wpe(e,t,r){return r==null&&(r=je(4)),cl(t,r)}function qpe(e){var t=$n(e),r=e.read_shift(1);return[t,r,"b"]}function Kpe(e,t,r){return r==null&&(r=je(9)),ol(t,r),r.write_shift(1,e.v?1:0),r}function Vpe(e){var t=ll(e),r=e.read_shift(1);return[t,r,"b"]}function zpe(e,t,r){return r==null&&(r=je(5)),cl(t,r),r.write_shift(1,e.v?1:0),r}function Hpe(e){var t=$n(e),r=e.read_shift(1);return[t,r,"e"]}function Gpe(e,t,r){return r==null&&(r=je(9)),ol(t,r),r.write_shift(1,e.v),r}function Xpe(e){var t=ll(e),r=e.read_shift(1);return[t,r,"e"]}function Ype(e,t,r){return r==null&&(r=je(8)),cl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Qpe(e){var t=$n(e),r=e.read_shift(4);return[t,r,"s"]}function Jpe(e,t,r){return r==null&&(r=je(12)),ol(t,r),r.write_shift(4,t.v),r}function Zpe(e){var t=ll(e),r=e.read_shift(4);return[t,r,"s"]}function ege(e,t,r){return r==null&&(r=je(8)),cl(t,r),r.write_shift(4,t.v),r}function tge(e){var t=$n(e),r=ja(e);return[t,r,"n"]}function rge(e,t,r){return r==null&&(r=je(16)),ol(t,r),Go(e.v,r),r}function ID(e){var t=ll(e),r=ja(e);return[t,r,"n"]}function age(e,t,r){return r==null&&(r=je(12)),cl(t,r),Go(e.v,r),r}function nge(e){var t=$n(e),r=hN(e);return[t,r,"n"]}function sge(e,t,r){return r==null&&(r=je(12)),ol(t,r),E6(e.v,r),r}function ige(e){var t=ll(e),r=hN(e);return[t,r,"n"]}function oge(e,t,r){return r==null&&(r=je(8)),cl(t,r),E6(e.v,r),r}function lge(e){var t=$n(e),r=dN(e);return[t,r,"is"]}function cge(e){var t=$n(e),r=Ca(e);return[t,r,"str"]}function uge(e,t,r){return r==null&&(r=je(12+4*e.v.length)),ol(t,r),Jr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function dge(e){var t=ll(e),r=Ca(e);return[t,r,"str"]}function fge(e,t,r){return r==null&&(r=je(8+4*e.v.length)),cl(t,r),Jr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function mge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=mp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}function hge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=mp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}function xge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=ja(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=mp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}function pge(e,t,r){var a=e.l+t,s=$n(e);s.r=r["!row"];var i=Ca(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=mp(e,a-e.l,r);o[3]=ya(l,null,s,r.supbooks,r)}else e.l=a;return o}var gge=ul,yge=nu;function vge(e,t){return t==null&&(t=je(4)),t.write_shift(4,e),t}function bge(e,t){var r=e.l+t,a=ul(e),s=fN(e),i=Ca(e),o=Ca(e),l=Ca(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function wge(e,t){var r=je(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));nu({s:xr(e[0]),e:xr(e[0])},r),mN("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return Jr(s||"",r),Jr(e[1].Tooltip||"",r),Jr("",r),r.slice(0,r.l)}function Nge(){}function jge(e,t,r){var a=e.l+t,s=A6(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Hxe(e,a-e.l,r);o[1]=l}else e.l=a;return o}function Sge(e,t,r){var a=e.l+t,s=ul(e),i=[s];if(r.cellFormula){var o=Xxe(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function kge(e,t,r){r==null&&(r=je(18));var a=hp(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var MD=["left","right","top","bottom","header","footer"];function Cge(e){var t={};return MD.forEach(function(r){t[r]=ja(e)}),t}function Oge(e,t){return t==null&&(t=je(6*8)),Ao(e),MD.forEach(function(r){Go(e[r],t)}),t}function _ge(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Tge(e,t,r){r==null&&(r=je(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Ege(e){var t=je(24);return t.write_shift(4,4),t.write_shift(4,1),nu(e,t),t}function Age(e,t){return t==null&&(t=je(16*4+2)),t.write_shift(2,e.password?bN(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Pge(){}function Dge(){}function Ige(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,p,y,h,b,N,S,v,x,g,w=[];l.biff=12,l["!row"]=0;var j=0,O=!1,_=[],E={},T=l.supbooks||s.supbooks||[[]];if(T.sharedf=E,T.arrayf=_,T.SheetNames=s.SheetNames||s.Sheets.map(function(Y){return Y.name}),!l.supbooks&&(l.supbooks=T,s.Names))for(var k=0;k<s.Names.length;++k)T[0][k+1]=s.Names[k];var A=[],P=[],M=!1;wf[16]={n:"BrtShortReal",f:ID};var U;if(ai(e,function(B,ae,oe){if(!m)switch(oe){case 148:u=B;break;case 0:p=B,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),x=Nr(b=p.r),l["!row"]=p.r,(B.hidden||B.hpt||B.level!=null)&&(B.hpt&&(B.hpx=Fc(B.hpt)),P[B.r]=B);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:B[2]},B[2]){case"n":y.v=B[1];break;case"s":v=td[B[1]],y.v=v.t,y.r=v.r;break;case"b":y.v=!!B[1];break;case"e":y.v=B[1],l.cellText!==!1&&(y.w=ni[y.v]);break;case"str":y.t="s",y.v=B[1];break;case"is":y.t="s",y.v=B[1].t;break}if((h=o.CellXf[B[0].iStyleRef])&&AD(y,h.numFmtId,null,l,i,o),N=B[0].c==-1?N+1:B[0].c,l.dense?(c[b]||(c[b]=[]),c[b][N]=y):c[or(N)+x]=y,l.cellFormula){for(O=!1,j=0;j<_.length;++j){var D=_[j];p.r>=D[0].s.r&&p.r<=D[0].e.r&&N>=D[0].s.c&&N<=D[0].e.c&&(y.F=ut(D[0]),O=!0)}!O&&B.length>3&&(y.f=B[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>N&&(d.s.c=N),d.e.r<p.r&&(d.e.r=p.r),d.e.c<N&&(d.e.c=N),l.cellDates&&h&&y.t=="n"&&sl(et[h.numFmtId])){var H=bi(y.v);H&&(y.t="d",y.v=new Date(H.y,H.m-1,H.d,H.H,H.M,H.S,H.u))}U&&(U.type=="XLDAPR"&&(y.D=!0),U=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;y={t:"z",v:void 0},N=B[0].c==-1?N+1:B[0].c,l.dense?(c[b]||(c[b]=[]),c[b][N]=y):c[or(N)+x]=y,d.s.r>p.r&&(d.s.r=p.r),d.s.c>N&&(d.s.c=N),d.e.r<p.r&&(d.e.r=p.r),d.e.c<N&&(d.e.c=N),U&&(U.type=="XLDAPR"&&(y.D=!0),U=void 0);break;case 176:w.push(B);break;case 49:U=((l.xlmeta||{}).Cell||[])[B-1];break;case 494:var G=a["!id"][B.relId];for(G?(B.Target=G.Target,B.loc&&(B.Target+="#"+B.loc),B.Rel=G):B.relId==""&&(B.Target="#"+B.loc),b=B.rfx.s.r;b<=B.rfx.e.r;++b)for(N=B.rfx.s.c;N<=B.rfx.e.c;++N)l.dense?(c[b]||(c[b]=[]),c[b][N]||(c[b][N]={t:"z",v:void 0}),c[b][N].l=B):(S=nt({c:N,r:b}),c[S]||(c[S]={t:"z",v:void 0}),c[S].l=B);break;case 426:if(!l.cellFormula)break;_.push(B),g=l.dense?c[b][N]:c[or(N)+x],g.f=ya(B[1],d,{r:p.r,c:N},T,l),g.F=ut(B[0]);break;case 427:if(!l.cellFormula)break;E[nt(B[0].s)]=B[1],g=l.dense?c[b][N]:c[or(N)+x],g.f=ya(B[1],d,{r:p.r,c:N},T,l);break;case 60:if(!l.cellStyles)break;for(;B.e>=B.s;)A[B.e--]={width:B.w/256,hidden:!!(B.flags&1),level:B.level},M||(M=!0,wN(B.w/256)),Li(A[B.e+1]);break;case 161:c["!autofilter"]={ref:ut(B)};break;case 476:c["!margins"]=B;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),B.name&&(s.Sheets[r].CodeName=B.name),(B.above||B.left)&&(c["!outline"]={above:B.above,left:B.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),B.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ae.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+oe.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=ut(u||d)),l.sheetRows&&c["!ref"]){var W=Nt(c["!ref"]);l.sheetRows<=+W.e.r&&(W.e.r=l.sheetRows-1,W.e.r>d.e.r&&(W.e.r=d.e.r),W.e.r<W.s.r&&(W.s.r=W.e.r),W.e.c>d.e.c&&(W.e.c=d.e.c),W.e.c<W.s.c&&(W.s.c=W.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ut(W))}return w.length>0&&(c["!merges"]=w),A.length>0&&(c["!cols"]=A),P.length>0&&(c["!rows"]=P),c}function Mge(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Yt(t),t.z=t.z||et[14],t.v=Kr(lr(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=ro(s.cellXfs,t,s),t.l&&i["!links"].push([nt(c),t.l]),t.c&&i["!comments"].push([nt(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=CN(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Oe(e,18,ege(t,c)):Oe(e,7,Jpe(t,c))):(c.t="str",o?Oe(e,17,fge(t,c)):Oe(e,6,uge(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Oe(e,13,oge(t,c)):Oe(e,2,sge(t,c)):o?Oe(e,16,age(t,c)):Oe(e,5,rge(t,c)),!0;case"b":return c.t="b",o?Oe(e,15,zpe(t,c)):Oe(e,4,Kpe(t,c)),!0;case"e":return c.t="e",o?Oe(e,14,Ype(t,c)):Oe(e,3,Gpe(t,c)),!0}return o?Oe(e,12,Wpe(t,c)):Oe(e,1,Bpe(t,c)),!0}function Fge(e,t,r,a){var s=Nt(t["!ref"]||"A1"),i,o="",l=[];Oe(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){o=Nr(d),Dpe(e,t,s,d);var f=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(l[m]=or(m)),i=l[m]+o;var p=c?(t[d]||[])[m]:t[i];if(!p){f=!1;continue}f=Mge(e,p,d,m,a,t,f)}}Oe(e,146)}function Rge(e,t){!t||!t["!merges"]||(Oe(e,177,vge(t["!merges"].length)),t["!merges"].forEach(function(r){Oe(e,176,yge(r))}),Oe(e,178))}function Lge(e,t){!t||!t["!cols"]||(Oe(e,390),t["!cols"].forEach(function(r,a){r&&Oe(e,60,kge(a,r))}),Oe(e,391))}function $ge(e,t){!t||!t["!ref"]||(Oe(e,648),Oe(e,649,Ege(Nt(t["!ref"]))),Oe(e,650))}function Bge(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Ut(r,-1,a[1].Target.replace(/#.*$/,""),yt.HLINK);Oe(e,494,wge(a,s))}}),delete t["!links"]}function Uge(e,t,r,a){if(t["!comments"].length>0){var s=Ut(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",yt.VML);Oe(e,551,mN("rId"+s)),t["!legacy"]=s}}function Wge(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:ut(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Fa(i);l.s.r==l.e.r&&(l.e.r=Fa(t["!ref"]).e.r,i=ut(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Oe(e,161,nu(Nt(i))),Oe(e,162)}}function qge(e,t,r){Oe(e,133),Oe(e,137,Tge(t,r)),Oe(e,138),Oe(e,134)}function Kge(e,t){t["!protect"]&&Oe(e,535,Age(t["!protect"]))}function Vge(e,t,r,a){var s=za(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Nt(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Oe(s,129),(r.vbaraw||o["!outline"])&&Oe(s,147,Lpe(l,o["!outline"])),Oe(s,148,Mpe(c)),qge(s,o,r.Workbook),Lge(s,o),Fge(s,o,e,t),Kge(s,o),Wge(s,o,r,e),Rge(s,o),Bge(s,o,a),o["!margins"]&&Oe(s,476,Oge(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&$ge(s,o),Uge(s,o,e,a),Oe(s,130),s.end()}function zge(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=At((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function Hge(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=zge(f);d.s.r=d.s.c=0,d.e.c=l,u=or(l),m[0].forEach(function(p,y){o[u+Nr(y)]={t:"n",v:p,z:m[1]},c=y}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=ut(d)),o}function Gge(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(PD);return l&&ON(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function Xge(e,t){e.l+=10;var r=Ca(e);return{name:r}}function Yge(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return ai(e,function(c,u,d){switch(d){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var _N=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Qge=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Jge=[],Zge=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function y_(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=sr(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function v_(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=sr(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function FD(e){v_(e.WBProps,_N),v_(e.CalcPr,Zge),y_(e.WBView,Qge),y_(e.Sheets,Jge),rc.date1904=sr(e.WBProps.date1904)}function eye(e){return!e.Workbook||!e.Workbook.WBProps?"false":sr(e.Workbook.WBProps.date1904)?"true":"false"}var tye="][*?/\\".split("");function RD(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return tye.forEach(function(a){if(e.indexOf(a)!=-1){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function rye(e,t,r){e.forEach(function(a,s){RD(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function LD(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];rye(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)epe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var aye=/<\w+:workbook/;function nye(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(Ea,function(c,u){var d=st(c);switch(Ns(d[0])){case"<?xml":break;case"<workbook":c.match(aye)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":_N.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=sr(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ht(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=At(Ht(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Ht(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),sr(d.hidden||"0")&&(i.Hidden=!0),o=u+c.length;break;case"</definedName>":i.Ref=At(Ht(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),il.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return FD(r),r}function $D(e){var t=[Er];t[t.length]=Me("workbook",null,{xmlns:il[0],"xmlns:r":Ur.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(_N.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=Me("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Wt(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Me("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Me("definedName",Wt(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function sye(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=w1(e),r.name=Ca(e),r}function iye(e,t){return t||(t=je(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),mN(e.strRelID,t),Jr(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function oye(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Ca(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function lye(e,t){t||(t=je(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),T6(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function cye(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function uye(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Uue(e),o=Gxe(e,0,r),l=fN(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function dye(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],wf[16]={n:"BrtFRTArchID$",f:cye},ai(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ya(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(d),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),FD(r),r.Names=i,r.supbooks=o,r}function fye(e,t){Oe(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Oe(e,156,iye(s))}Oe(e,144)}function mye(e,t){t||(t=je(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Jr("SheetJS",t),Jr(uf.version,t),Jr(uf.version,t),Jr("7262",t),t.length>t.l?t.slice(0,t.l):t}function hye(e,t){t||(t=je(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function xye(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(Oe(e,135),Oe(e,158,hye(s)),Oe(e,136))}}function pye(e,t){var r=za();return Oe(r,131),Oe(r,128,mye()),Oe(r,153,lye(e.Workbook&&e.Workbook.WBProps||null)),xye(r,e),fye(r,e),Oe(r,132),r.end()}function gye(e,t,r){return t.slice(-4)===".bin"?dye(e,r):nye(e,r)}function yye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Ige(e,a,r,s,i,o,l):dpe(e,a,r,s,i,o,l)}function vye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Yge(e,a,r,s,i):Gge(e,a,r,s,i)}function bye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?jhe():She()}function wye(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?whe():Nhe()}function Nye(e,t,r,a){return t.slice(-4)===".bin"?yme(e,r,a):ime(e,r,a)}function jye(e,t,r){return yD(e,r)}function Sye(e,t,r){return t.slice(-4)===".bin"?k0e(e,r):N0e(e,r)}function kye(e,t,r){return t.slice(-4)===".bin"?phe(e,r):ohe(e,r)}function Cye(e,t,r){return t.slice(-4)===".bin"?nhe(e):rhe(e)}function Oye(e,t,r,a){return r.slice(-4)===".bin"?she(e,t,r,a):void 0}function _ye(e,t,r){return t.slice(-4)===".bin"?Zme(e,t,r):the(e,t,r)}function Tye(e,t,r){return(t.slice(-4)===".bin"?pye:$D)(e)}function Eye(e,t,r,a,s){return(t.slice(-4)===".bin"?Vge:DD)(e,r,a,s)}function Aye(e,t,r){return(t.slice(-4)===".bin"?_me:pD)(e,r)}function Pye(e,t,r){return(t.slice(-4)===".bin"?_0e:lD)(e,r)}function Dye(e,t,r){return(t.slice(-4)===".bin"?ghe:wD)(e)}function Iye(e){return(e.slice(-4)===".bin"?ehe:vD)()}var BD=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,UD=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Wn(e,t){var r=e.split(/\s+/),a=[];if(t||(a[0]=r[0]),r.length===1)return a;var s=e.match(BD),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(UD),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function Mye(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(BD),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(UD),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var ad;function Fye(e,t){var r=ad[e]||At(e);return r==="General"?zo(t):dn(r,t)}function Rye(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=sr(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=lr(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[At(t)]=s}function Lye(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||ni[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ff(e.v):e.w=zo(e.v):e.w=Fye(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=ad[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&sl(a)){var s=bi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function $ye(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=J0e[a.Pattern]||a.Pattern)}e[t.ID]=t}function Bye(e,t,r,a,s,i,o,l,c,u){var d="General",f=a.StyleID,m={};u=u||{};var p=[],y=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(d=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=sr(e);break;case"String":a.t="s",a.r=FO(At(e)),a.v=e.indexOf("<")>-1?At(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(lr(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=At(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=I6[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=FO(t||e));break}if(Lye(a,d,u),u.cellFormula!==!1)if(a.Formula){var h=At(a.Formula);h.charCodeAt(0)==61&&(h=h.slice(1)),a.f=tc(h,s),delete a.Formula,a.ArrayRange=="RC"?a.F=tc("RC:RC",s):a.ArrayRange&&(a.F=tc(a.ArrayRange,s),c.push([Nt(a.F),a.F]))}else for(y=0;y<c.length;++y)s.r>=c[y][0].s.r&&s.r<=c[y][0].e.r&&s.c>=c[y][0].s.c&&s.c<=c[y][0].e.c&&(a.F=c[y][1]);u.cellStyles&&(p.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Uye(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Lg(e,t){var r=t||{};tu();var a=$l(rN(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(typeof Ct<"u"?a=Ct.utils.decode(65001,Rh(a)):a=Ht(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Yt(r);return o.type="string",Mc.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ve){s.indexOf("<"+Ve)>=0&&(i=!0)}),i)return jve(a,r);ad={"General Number":"General","General Date":et[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":et[15],"Short Date":et[14],"Long Time":et[19],"Medium Time":et[18],"Short Time":et[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:et[2],Standard:et[4],Percent:et[10],Scientific:et[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],m=r.dense?[]:{},p="",y={},h={},b=Wn('<Data ss:Type="String">'),N=0,S=0,v=0,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},g={},w={},j="",O=0,_=[],E={},T={},k=0,A=[],P=[],M={},U=[],W,Y=!1,B=[],ae=[],oe={},D=0,H=0,G={Sheets:[],WBProps:{date1904:!1}},Z={};xf.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var X="";l=xf.exec(a);)switch(l[3]=(X=l[3]).toLowerCase()){case"data":if(X=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Bye(a.slice(N,l.index),j,b,c[c.length-1][0]=="comment"?M:y,{c:S,r:v},g,U[S],h,B,r):(j="",b=Wn(l[0]),N=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(P.length>0&&(y.c=P),(!r.sheetRows||r.sheetRows>v)&&y.v!==void 0&&(r.dense?(m[v]||(m[v]=[]),m[v][S]=y):m[or(S)+Nr(v)]=y),y.HRef&&(y.l={Target:At(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(D=S+(parseInt(y.MergeAcross,10)|0),H=v+(parseInt(y.MergeDown,10)|0),_.push({s:{c:S,r:v},e:{c:D,r:H}})),!r.sheetStubs)y.MergeAcross?S=D+1:++S;else if(y.MergeAcross||y.MergeDown){for(var ie=S;ie<=D;++ie)for(var pe=v;pe<=H;++pe)(ie>S||pe>v)&&(r.dense?(m[pe]||(m[pe]=[]),m[pe][ie]={t:"z"}):m[or(ie)+Nr(pe)]={t:"z"});S=D+1}else++S;else y=Mye(l[0]),y.Index&&(S=+y.Index-1),S<x.s.c&&(x.s.c=S),S>x.e.c&&(x.e.c=S),l[0].slice(-2)==="/>"&&++S,P=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(v<x.s.r&&(x.s.r=v),v>x.e.r&&(x.e.r=v),l[0].slice(-2)==="/>"&&(h=Wn(l[0]),h.Index&&(v=+h.Index-1)),S=0,++v):(h=Wn(l[0]),h.Index&&(v=+h.Index-1),oe={},(h.AutoFitHeight=="0"||h.Height)&&(oe.hpx=parseInt(h.Height,10),oe.hpt=bf(oe.hpx),ae[v]=oe),h.Hidden=="1"&&(oe.hidden=!0,ae[v]=oe));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(p),x.s.r<=x.e.r&&x.s.c<=x.e.c&&(m["!ref"]=ut(x),r.sheetRows&&r.sheetRows<=x.e.r&&(m["!fullref"]=m["!ref"],x.e.r=r.sheetRows-1,m["!ref"]=ut(x))),_.length&&(m["!merges"]=_),U.length>0&&(m["!cols"]=U),ae.length>0&&(m["!rows"]=ae),d[p]=m}else x={s:{r:2e6,c:2e6},e:{r:0,c:0}},v=S=0,c.push([l[3],!1]),u=Wn(l[0]),p=At(u.Name),m=r.dense?[]:{},_=[],B=[],ae=[],Z={name:p,Hidden:0},G.Sheets.push(Z);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),U=[],Y=!1}break;case"style":l[1]==="/"?$ye(g,w,r):w=Wn(l[0]);break;case"numberformat":w.nf=At(Wn(l[0]).Format||"General"),ad[w.nf]&&(w.nf=ad[w.nf]);for(var ne=0;ne!=392&&et[ne]!=w.nf;++ne);if(ne==392){for(ne=57;ne!=392;++ne)if(et[ne]==null){gs(w.nf,ne);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(W=Wn(l[0]),W.Hidden&&(W.hidden=!0,delete W.Hidden),W.Width&&(W.wpx=parseInt(W.Width,10)),!Y&&W.wpx>10){Y=!0,Na=hD;for(var ee=0;ee<U.length;++ee)U[ee]&&Li(U[ee])}Y&&Li(W),U[W.Index-1||U.length]=W;for(var we=0;we<+W.Span;++we)U[U.length]=Yt(W);break;case"namedrange":if(l[1]==="/")break;G.Names||(G.Names=[]);var F=st(l[0]),Ue={Name:F.Name,Ref:tc(F.RefersTo.slice(1),{r:0,c:0})};G.Sheets.length>0&&(Ue.Sheet=G.Sheets.length-1),G.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=a.slice(O,l.index):O=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;w.Interior=Wn(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?fde(E,X,a.slice(k,l.index)):k=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));Uye(M),P.push(M)}else c.push([l[3],!1]),u=Wn(l[0]),M={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var R=Wn(l[0]);m["!autofilter"]={ref:tc(R.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return S_(a,r);var ve=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ve=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ve=!1}break;case"excelworkbook":switch(l[3]){case"date1904":G.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ve=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ve=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(k,l.index)){case"SheetHidden":Z.Hidden=1;break;case"SheetVeryHidden":Z.Hidden=2;break}else k=l.index+l[0].length;break;case"header":m["!margins"]||Ao(m["!margins"]={},"xlml"),isNaN(+st(l[0]).Margin)||(m["!margins"].header=+st(l[0]).Margin);break;case"footer":m["!margins"]||Ao(m["!margins"]={},"xlml"),isNaN(+st(l[0]).Margin)||(m["!margins"].footer=+st(l[0]).Margin);break;case"pagemargins":var xe=st(l[0]);m["!margins"]||Ao(m["!margins"]={},"xlml"),isNaN(+xe.Top)||(m["!margins"].top=+xe.Top),isNaN(+xe.Left)||(m["!margins"].left=+xe.Left),isNaN(+xe.Right)||(m["!margins"].right=+xe.Right),isNaN(+xe.Bottom)||(m["!margins"].bottom=+xe.Bottom);break;case"displayrighttoleft":G.Views||(G.Views=[]),G.Views[0]||(G.Views[0]={}),G.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ve=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ve=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ve=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ve=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ve=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ve=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ve=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ve=!1}break;case"smarttags":break;default:ve=!1;break}if(ve||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Rye(T,X,A,a.slice(k,l.index)):(A=l,k=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var de={};return!r.bookSheets&&!r.bookProps&&(de.Sheets=d),de.SheetNames=f,de.Workbook=G,de.SSF=Yt(et),de.Props=E,de.Custprops=T,de}function _1(e,t){switch(AN(t=t||{}),t.type||"base64"){case"base64":return Lg(un(e),t);case"binary":case"buffer":case"file":return Lg(e,t);case"array":return Lg(eo(e),t)}}function Wye(e,t){var r=[];return e.Props&&r.push(mde(e.Props,t)),e.Custprops&&r.push(hde(e.Props,e.Custprops)),r.join("")}function qye(){return""}function Kye(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(Me("NumberFormat",null,{"ss:Format":Wt(et[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(Me("Style",i.join(""),o))}),Me("Styles",r.join(""))}function WD(e){return Me("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+SN(e.Ref,{r:0,c:0})})}function Vye(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(WD(s)))}return Me("Names",r.join(""))}function zye(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(WD(l)))}return i.join("")}function Hye(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Me("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Me("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Me("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(Me("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(la("ProtectContents","True")),e["!protect"].objects&&s.push(la("ProtectObjects","True")),e["!protect"].scenarios&&s.push(la("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(la("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(la("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":Me("WorksheetOptions",s.join(""),{xmlns:Za.x})}function Gye(e){return e.map(function(t){var r=pue(t.t||""),a=Me("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Me("Comment",a,{"ss:Author":t.a})}).join("")}function Xye(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Wt(SN(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=xr(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Wt(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Wt(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",m="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",m=String(e.v);break;case"b":f="Boolean",m=e.v?"1":"0";break;case"e":f="Error",m=ni[e.v];break;case"d":f="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||et[14]);break;case"s":f="String",m=xue(e.v||"");break}var p=ro(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var y=e.v!=null?m:"",h=e.t=="z"?"":'<Data ss:Type="'+f+'">'+y+"</Data>";return(e.c||[]).length>0&&(h+=Gye(e.c)),Me("Cell",h,l)}function Yye(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Fc(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Qye(e,t,r,a){if(!e["!ref"])return"";var s=Nt(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(b,N){Li(b);var S=!!b.width,v=hp(N,b),x={"ss:Index":N+1};S&&(x["ss:Width"]=yf(v.width)),b.hidden&&(x["ss:Hidden"]="1"),l.push(Me("Column",null,x))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[Yye(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>u)&&!(i[o].e.c<f)&&!(i[o].e.r<u)){(i[o].s.c!=f||i[o].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:f},y=nt(p),h=c?(e[u]||[])[f]:e[y];d.push(Xye(h,y,e,t,r,a,p))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function Jye(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?zye(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?Qye(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push(Hye(i,t,e,r)),a.join("")}function Zye(e,t){t||(t={}),e.SSF||(e.SSF=Yt(et)),e.SSF&&(tu(),Kf(e.SSF),t.revssf=lp(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],ro(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Wye(e,t)),r.push(qye()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(Me("Worksheet",Jye(a,t,e),{"ss:Name":Wt(e.SheetNames[a])}));return r[2]=Kye(e,t),r[3]=Vye(e),Er+Me("Workbook",r.join(""),{xmlns:Za.ss,"xmlns:o":Za.o,"xmlns:x":Za.x,"xmlns:ss":Za.ss,"xmlns:dt":Za.dt,"xmlns:html":Za.html})}function eve(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=zue(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=Hue(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var tve=[60,1084,2066,2165,2175];function rve(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=Ds(r,r.l),u=T1[c],d=0;u!=null&&tve.indexOf(c)>-1;)i=Ds(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+i),o.push(l),r.l+=4+i,u=T1[c=Ds(r,r.l)];var f=Qr(o);oa(f,0);var m=0;f.lens=[];for(var p=0;p<o.length;++p)f.lens.push(m),m+=o[p].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,s)}function is(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=et[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||ni[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ff(e.v):e.w=zo(e.v):e.w=dn(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&sl(et[a]||String(a))){var s=bi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function q0(e,t,r){return{v:e,ixfe:t,t:r}}function ave(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],u="",d={},f,m="",p,y,h,b,N={},S=[],v,x,g=[],w=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},O={},_=function(Xe){return Xe<8?_o[Xe]:Xe<64&&w[Xe-8]||_o[Xe]},E=function(Xe,jt,ye){var te=jt.XF.data;if(!(!te||!te.patternType||!ye||!ye.cellStyles)){jt.s={},jt.s.patternType=te.patternType;var ke;(ke=gf(_(te.icvFore)))&&(jt.s.fgColor={rgb:ke}),(ke=gf(_(te.icvBack)))&&(jt.s.bgColor={rgb:ke})}},T=function(Xe,jt,ye){if(!(oe>1)&&!(ye.sheetRows&&Xe.r>=ye.sheetRows)){if(ye.cellStyles&&jt.XF&&jt.XF.data&&E(Xe,jt,ye),delete jt.ixfe,delete jt.XF,f=Xe,m=nt(Xe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Xe.r<o.s.r&&(o.s.r=Xe.r),Xe.c<o.s.c&&(o.s.c=Xe.c),Xe.r+1>o.e.r&&(o.e.r=Xe.r+1),Xe.c+1>o.e.c&&(o.e.c=Xe.c+1),ye.cellFormula&&jt.f){for(var te=0;te<S.length;++te)if(!(S[te][0].s.c>Xe.c||S[te][0].s.r>Xe.r)&&!(S[te][0].e.c<Xe.c||S[te][0].e.r<Xe.r)){jt.F=ut(S[te][0]),(S[te][0].s.c!=Xe.c||S[te][0].s.r!=Xe.r)&&delete jt.f,jt.f&&(jt.f=""+ya(S[te][1],o,Xe,B,k));break}}ye.dense?(s[Xe.r]||(s[Xe.r]=[]),s[Xe.r][Xe.c]=jt):s[m]=jt}},k={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var A,P=[],M=[],U=[],W=[],Y=!1,B=[];B.SheetNames=k.snames,B.sharedf=k.sharedf,B.arrayf=k.arrayf,B.names=[],B.XTI=[];var ae=0,oe=0,D=0,H=[],G=[],Z;k.codepage=1200,_n(1200);for(var X=!1;e.l<e.length-1;){var ie=e.l,pe=e.read_shift(2);if(pe===0&&ae===10)break;var ne=e.l===e.length?0:e.read_shift(2),ee=T1[pe];if(ee&&ee.f){if(t.bookSheets&&ae===133&&pe!==133)break;if(ae=pe,ee.r===2||ee.r==12){var we=e.read_shift(2);if(ne-=2,!k.enc&&we!==pe&&((we&255)<<8|we>>8)!==pe)throw new Error("rt mismatch: "+we+"!="+pe);ee.r==12&&(e.l+=10,ne-=10)}var F={};if(pe===10?F=ee.f(e,ne,k):F=rve(pe,ee,e,ne,k),oe==0&&[9,521,1033,2057].indexOf(ae)===-1)continue;switch(pe){case 34:r.opts.Date1904=j.WBProps.date1904=F;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=F,!t.password)throw new Error("File is password-protected");if(F.valid==null)throw new Error("Encryption scheme unsupported");if(!F.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=F;break;case 66:var Ue=Number(F);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}_n(k.codepage=Ue),X=!0;break;case 317:k.rrtabid=F;break;case 25:k.winlocked=F;break;case 439:r.opts.RefreshAll=F;break;case 12:r.opts.CalcCount=F;break;case 16:r.opts.CalcDelta=F;break;case 17:r.opts.CalcIter=F;break;case 13:r.opts.CalcMode=F;break;case 14:r.opts.CalcPrecision=F;break;case 95:r.opts.CalcSaveRecalc=F;break;case 15:k.CalcRefMode=F;break;case 2211:r.opts.FullCalc=F;break;case 129:F.fDialog&&(s["!type"]="dialog"),F.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),F.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:g.push(F);break;case 430:B.push([F]),B[B.length-1].XTI=[];break;case 35:case 547:B[B.length-1].push(F);break;case 24:case 536:Z={Name:F.Name,Ref:ya(F.rgce,o,null,B,k)},F.itab>0&&(Z.Sheet=F.itab-1),B.names.push(Z),B[0]||(B[0]=[],B[0].XTI=[]),B[B.length-1].push(F),F.Name=="_xlnm._FilterDatabase"&&F.itab>0&&F.rgce&&F.rgce[0]&&F.rgce[0][0]&&F.rgce[0][0][0]=="PtgArea3d"&&(G[F.itab-1]={ref:ut(F.rgce[0][0][1][2])});break;case 22:k.ExternCount=F;break;case 23:B.length==0&&(B[0]=[],B[0].XTI=[]),B[B.length-1].XTI=B[B.length-1].XTI.concat(F),B.XTI=B.XTI.concat(F);break;case 2196:if(k.biff<8)break;Z!=null&&(Z.Comment=F[1]);break;case 18:s["!protect"]=F;break;case 19:F!==0&&k.WTF&&console.error("Password verifier: "+F);break;case 133:i[F.pos]=F,k.snames.push(F.name);break;case 10:{if(--oe)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=ut(o),t.sheetRows&&t.sheetRows<=o.e.r){var R=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=ut(o),o.e.r=R}o.e.r++,o.e.c++}P.length>0&&(s["!merges"]=P),M.length>0&&(s["!objects"]=M),U.length>0&&(s["!cols"]=U),W.length>0&&(s["!rows"]=W),j.Sheets.push(O)}u===""?d=s:a[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[F.BIFFVer]||8),k.biffguess=F.BIFFVer==0,F.BIFFVer==0&&F.dt==4096&&(k.biff=5,X=!0,_n(k.codepage=28591)),k.biff==8&&F.BIFFVer==0&&F.dt==16&&(k.biff=2),oe++)break;if(s=t.dense?[]:{},k.biff<8&&!X&&(X=!0,_n(k.codepage=t.codepage||1252)),k.biff<5||F.BIFFVer==0&&F.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ve={pos:e.l-ne,name:u};i[ve.pos]=ve,k.snames.push(u)}else u=(i[ie]||{name:""}).name;F.dt==32&&(s["!type"]="chart"),F.dt==64&&(s["!type"]="macro"),P=[],M=[],k.arrayf=S=[],U=[],W=[],Y=!1,O={Hidden:(i[ie]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[F.r]||[])[F.c]:s[nt({c:F.c,r:F.r})])&&++F.c,v={ixfe:F.ixfe,XF:g[F.ixfe]||{},v:F.val,t:"n"},D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:F.c,r:F.r},v,t);break;case 5:case 517:v={ixfe:F.ixfe,XF:g[F.ixfe],v:F.val,t:F.t},D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:F.c,r:F.r},v,t);break;case 638:v={ixfe:F.ixfe,XF:g[F.ixfe],v:F.rknum,t:"n"},D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:F.c,r:F.r},v,t);break;case 189:for(var xe=F.c;xe<=F.C;++xe){var de=F.rkrec[xe-F.c][0];v={ixfe:de,XF:g[de],v:F.rkrec[xe-F.c][1],t:"n"},D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:xe,r:F.r},v,t)}break;case 6:case 518:case 1030:{if(F.val=="String"){l=F;break}if(v=q0(F.val,F.cell.ixfe,F.tt),v.XF=g[v.ixfe],t.cellFormula){var Ve=F.formula;if(Ve&&Ve[0]&&Ve[0][0]&&Ve[0][0][0]=="PtgExp"){var ft=Ve[0][0][1][0],it=Ve[0][0][1][1],mt=nt({r:ft,c:it});N[mt]?v.f=""+ya(F.formula,o,F.cell,B,k):v.F=((t.dense?(s[ft]||[])[it]:s[mt])||{}).F}else v.f=""+ya(F.formula,o,F.cell,B,k)}D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T(F.cell,v,t),l=F}break;case 7:case 519:if(l)l.val=F,v=q0(F,l.cell.ixfe,"s"),v.XF=g[v.ixfe],t.cellFormula&&(v.f=""+ya(l.formula,o,l.cell,B,k)),D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T(l.cell,v,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(F);var ht=nt(F[0].s);if(p=t.dense?(s[F[0].s.r]||[])[F[0].s.c]:s[ht],t.cellFormula&&p){if(!l||!ht||!p)break;p.f=""+ya(F[1],o,F[0],B,k),p.F=ut(F[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;N[nt(l.cell)]=F[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[nt(l.cell)],(p||{}).f=""+ya(F[0],o,f,B,k)}}break;case 253:v=q0(c[F.isst].t,F.ixfe,"s"),c[F.isst].h&&(v.h=c[F.isst].h),v.XF=g[v.ixfe],D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:F.c,r:F.r},v,t);break;case 513:t.sheetStubs&&(v={ixfe:F.ixfe,XF:g[F.ixfe],t:"z"},D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:F.c,r:F.r},v,t));break;case 190:if(t.sheetStubs)for(var He=F.c;He<=F.C;++He){var gt=F.ixfe[He-F.c];v={ixfe:gt,XF:g[gt],t:"z"},D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:He,r:F.r},v,t)}break;case 214:case 516:case 4:v=q0(F.val,F.ixfe,"s"),v.XF=g[v.ixfe],D>0&&(v.z=H[v.ixfe>>8&63]),is(v,t,r.opts.Date1904),T({c:F.c,r:F.r},v,t);break;case 0:case 512:oe===1&&(o=F);break;case 252:c=F;break;case 1054:if(k.biff==4){H[D++]=F[1];for(var Rt=0;Rt<D+163&&et[Rt]!=F[1];++Rt);Rt>=163&&gs(F[1],D+163)}else gs(F[1],F[0]);break;case 30:{H[D++]=F;for(var Gt=0;Gt<D+163&&et[Gt]!=F;++Gt);Gt>=163&&gs(F,D+163)}break;case 229:P=P.concat(F);break;case 93:M[F.cmo[0]]=k.lastobj=F;break;case 438:k.lastobj.TxO=F;break;case 127:k.lastobj.ImData=F;break;case 440:for(b=F[0].s.r;b<=F[0].e.r;++b)for(h=F[0].s.c;h<=F[0].e.c;++h)p=t.dense?(s[b]||[])[h]:s[nt({c:h,r:b})],p&&(p.l=F[1]);break;case 2048:for(b=F[0].s.r;b<=F[0].e.r;++b)for(h=F[0].s.c;h<=F[0].e.c;++h)p=t.dense?(s[b]||[])[h]:s[nt({c:h,r:b})],p&&p.l&&(p.l.Tooltip=F[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;p=t.dense?(s[F[0].r]||[])[F[0].c]:s[nt(F[0])];var Jt=M[F[2]];p||(t.dense?(s[F[0].r]||(s[F[0].r]=[]),p=s[F[0].r][F[0].c]={t:"z"}):p=s[nt(F[0])]={t:"z"},o.e.r=Math.max(o.e.r,F[0].r),o.s.r=Math.min(o.s.r,F[0].r),o.e.c=Math.max(o.e.c,F[0].c),o.s.c=Math.min(o.s.c,F[0].c)),p.c||(p.c=[]),y={a:F[1],t:Jt.TxO.t},p.c.push(y)}break;case 2173:Vme(g[F.ixfe],F.ext);break;case 125:{if(!k.cellStyles)break;for(;F.e>=F.s;)U[F.e--]={width:F.w/256,level:F.level||0,hidden:!!(F.flags&1)},Y||(Y=!0,wN(F.w/256)),Li(U[F.e+1])}break;case 520:{var Vt={};F.level!=null&&(W[F.r]=Vt,Vt.level=F.level),F.hidden&&(W[F.r]=Vt,Vt.hidden=!0),F.hpt&&(W[F.r]=Vt,Vt.hpt=F.hpt,Vt.hpx=Fc(F.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Ao(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[pe]]=F;break;case 161:s["!margins"]||Ao(s["!margins"]={}),s["!margins"].header=F.header,s["!margins"].footer=F.footer;break;case 574:F.RTL&&(j.Views[0].RTL=!0);break;case 146:w=F;break;case 2198:A=F;break;case 140:x=F;break;case 442:u?O.CodeName=F||O.name:j.WBProps.CodeName=F||"ThisWorkbook";break}}else ee||console.error("Missing Info for XLS Record 0x"+pe.toString(16)),e.l+=ne}return r.SheetNames=kr(i).sort(function(Ge,Xe){return Number(Ge)-Number(Xe)}).map(function(Ge){return i[Ge].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&G.forEach(function(Ge,Xe){r.Sheets[r.SheetNames[Xe]]["!autofilter"]=Ge}),r.Strings=c,r.SSF=Yt(et),k.enc&&(r.Encryption=k.enc),A&&(r.Themes=A),r.Metadata={},x!==void 0&&(r.Metadata.Country=x),B.names.length>0&&(j.Names=B.names),r.Workbook=j,r}var nd={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function nve(e,t,r){var a=Je.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=e_(a,N1,nd.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Je.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=e_(o,j1,nd.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(B6(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function sve(e,t){var r=[],a=[],s=[],i=0,o,l=EO(N1,"n"),c=EO(j1,"n");if(e.Props)for(o=kr(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=kr(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<s.length;++i)H6.indexOf(s[i][0])>-1||$6.indexOf(s[i][0])>-1||s[i][1]!=null&&u.push(s[i]);a.length&&Je.utils.cfb_add(t,"/SummaryInformation",t_(a,nd.SI,c,j1)),(r.length||u.length)&&Je.utils.cfb_add(t,"/DocumentSummaryInformation",t_(r,nd.DSI,l,N1,u.length?u:null,nd.UDI))}function TN(e,t){t||(t={}),AN(t),ip(),t.codepage&&sp(t.codepage);var r,a;if(e.FullPaths){if(Je.find(e,"/encryption"))throw new Error("File is password-protected");r=Je.find(e,"!CompObj"),a=Je.find(e,"/Workbook")||Je.find(e,"/Book")}else{switch(t.type){case"base64":e=tn(un(e));break;case"binary":e=tn(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}oa(e,0),a={content:e}}var s,i;if(r&&eve(r),t.bookProps&&!t.bookSheets)s={};else{var o=pt?"buffer":"array";if(a&&a.content)s=ave(a.content,t);else if((i=Je.find(e,"PerfectOffice_MAIN"))&&i.content)s=Eo.to_workbook(i.content,(t.type=o,t));else if((i=Je.find(e,"NativeContent_MAIN"))&&i.content)s=Eo.to_workbook(i.content,(t.type=o,t));else throw(i=Je.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Je.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=vhe(e))}var l={};return e.FullPaths&&nve(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function ive(e,t){var r=t||{},a=Je.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Je.utils.cfb_add(a,s,qD(e,r)),r.biff==8&&(e.Props||e.Custprops)&&sve(e,a),r.biff==8&&e.vbaraw&&bhe(a,Je.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var wf={0:{f:Ape},1:{f:$pe},2:{f:nge},3:{f:Hpe},4:{f:qpe},5:{f:tge},6:{f:cge},7:{f:Qpe},8:{f:pge},9:{f:xge},10:{f:mge},11:{f:hge},12:{f:Upe},13:{f:ige},14:{f:Xpe},15:{f:Vpe},16:{f:ID},17:{f:dge},18:{f:Zpe},19:{f:dN},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:uye},40:{},42:{},43:{f:cme},44:{f:ome},45:{f:fme},46:{f:hme},47:{f:mme},48:{},49:{f:Iue},50:{},51:{f:Gme},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:nD},62:{f:lge},63:{f:ahe},64:{f:Pge},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:_a,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_ge},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Rpe},148:{f:Ipe,p:16},151:{f:Nge},152:{},153:{f:oye},154:{},155:{},156:{f:sye},157:{},158:{},159:{T:1,f:S0e},160:{T:-1},161:{T:1,f:ul},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:gge},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:zme},336:{T:-1},337:{f:Qme,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:w1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:aD},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:jge},427:{f:Sge},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Cge},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Fpe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:bge},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:w1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:hhe},633:{T:1},634:{T:-1},635:{T:1,f:fhe},636:{T:-1},637:{f:Lue},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Xge},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Dge},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},T1={6:{f:Fg},10:{f:ii},12:{f:Ir},13:{f:Ir},14:{f:Cr},15:{f:Cr},16:{f:ja},17:{f:Cr},18:{f:Cr},19:{f:Ir},20:{f:o_},21:{f:o_},23:{f:aD},24:{f:c_},25:{f:Cr},26:{},27:{},28:{f:Dfe},29:{},34:{f:Cr},35:{f:l_},38:{f:ja},39:{f:ja},40:{f:ja},41:{f:ja},42:{f:Cr},43:{f:Cr},47:{f:V0e},49:{f:ife},51:{f:Ir},60:{},61:{f:tfe},64:{f:Cr},65:{f:sfe},66:{f:Ir},77:{},80:{},81:{},82:{},85:{f:Ir},89:{},90:{},91:{},92:{f:Kde},93:{f:Ffe},94:{},95:{f:Cr},96:{},97:{},99:{f:Cr},125:{f:nD},128:{f:wfe},129:{f:zde},130:{f:Ir},131:{f:Cr},132:{f:Cr},133:{f:Hde},134:{},140:{f:Kfe},141:{f:Ir},144:{},146:{f:Hfe},151:{},152:{},153:{},154:{},155:{},156:{f:Ir},157:{},158:{},160:{f:e0e},161:{f:Yfe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:gfe},190:{f:yfe},193:{f:ii},197:{},198:{},199:{},200:{},201:{},202:{f:Cr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ir},220:{},221:{f:Cr},222:{},224:{f:bfe},225:{f:qde},226:{f:ii},227:{},229:{f:Ife},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Xde},253:{f:lfe},255:{f:Qde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:G6},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Cr},353:{f:ii},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Cfe},431:{f:Cr},432:{},433:{},434:{},437:{},438:{f:$fe},439:{f:Cr},440:{f:Bfe},441:{},442:{f:Hf},443:{},444:{f:Ir},445:{},446:{},448:{f:ii},449:{f:efe,r:2},450:{f:ii},512:{f:n_},513:{f:Zfe},515:{f:Sfe},516:{f:ufe},517:{f:i_},519:{f:t0e},520:{f:Jde},523:{},545:{f:u_},549:{f:a_},566:{},574:{f:afe},638:{f:pfe},659:{},1048:{},1054:{f:ffe},1084:{},1212:{f:Efe},2048:{f:Wfe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:B0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ii},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Gfe,r:12},2173:{f:Kme,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Cr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Tfe,r:12},2197:{},2198:{f:Lme,r:12},2199:{},2200:{},2201:{},2202:{f:Afe,r:12},2203:{f:ii},2204:{},2205:{},2206:{},2207:{},2211:{f:Zde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ir},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Qfe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:zfe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:n_},1:{},2:{f:i0e},3:{f:n0e},4:{f:a0e},5:{f:i_},7:{f:l0e},8:{},9:{f:B0},11:{},22:{f:Ir},30:{f:hfe},31:{},32:{},33:{f:u_},36:{},37:{f:a_},50:{f:c0e},62:{},52:{},67:{},68:{f:Ir},69:{},86:{},126:{},127:{f:r0e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:u0e},223:{},234:{},354:{},421:{},518:{f:Fg},521:{f:B0},536:{f:c_},547:{f:l_},561:{},579:{},1030:{f:Fg},1033:{f:B0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Fe(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&lN(r)&&e.push(r)}}function ove(e,t,r,a){var s=a||(r||[]).length||0;if(s<=8224)return Fe(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Qf(e,t,r){return e||(e=je(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function lve(e,t,r,a){var s=je(9);return Qf(s,e,t),X6(r,a||"b",s),s}function cve(e,t,r){var a=je(8+2*r.length);return Qf(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function uve(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Kr(lr(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?Fe(e,2,o0e(r,a,s)):Fe(e,3,s0e(r,a,s));return;case"b":case"e":Fe(e,5,lve(r,a,t.v,t.t));return;case"s":case"str":Fe(e,4,cve(r,a,(t.v||"").slice(0,255)));return}Fe(e,1,Qf(null,r,a))}function dve(e,t,r,a){var s=Array.isArray(t),i=Nt(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=ut(i)}for(var u=i.s.r;u<=i.e.r;++u){l=Nr(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=or(d)),o=c[d]+l;var f=s?(t[u]||[])[d]:t[o];f&&uve(e,f,u,d)}}}function fve(e,t){for(var r=t||{},a=za(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Fe(a,r.biff==4?1033:r.biff==3?521:9,yN(e,16,r)),dve(a,e.Sheets[e.SheetNames[s]],s,r),Fe(a,10),a.end()}function mve(e,t,r){Fe(e,49,ofe({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function hve(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Fe(e,1054,mfe(s,t[s],r))})}function xve(e,t){var r=je(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Fe(e,2151,r),r=je(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),eD(Nt(t["!ref"]||"A1"),r),r.write_shift(4,4),Fe(e,2152,r)}function pve(e,t){for(var r=0;r<16;++r)Fe(e,224,s_({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Fe(e,224,s_(a,0,t))})}function gve(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Fe(e,440,Ufe(a)),a[1].Tooltip&&Fe(e,2048,qfe(a))}delete t["!links"]}function yve(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&Fe(e,125,Xfe(hp(s,a),s))})}}function vve(e,t,r,a,s){var i=16+ro(s.cellXfs,t,s);if(t.v==null&&!t.bf){Fe(e,513,Yo(r,a,i));return}if(t.bf)Fe(e,6,zxe(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?Kr(lr(t.v)):t.v;Fe(e,515,kfe(r,a,o,i));break;case"b":case"e":Fe(e,517,jfe(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=CN(s.Strings,t.v,s.revStrings);Fe(e,253,cfe(r,a,l,i))}else Fe(e,516,dfe(r,a,(t.v||"").slice(0,255),i,s));break;default:Fe(e,513,Yo(r,a,i))}}function bve(e,t,r){var a=za(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",m=[],p=Nt(i["!ref"]||"A1"),y=u?65536:16384;if(p.e.c>255||p.e.r>=y){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}Fe(a,2057,yN(r,16,t)),Fe(a,13,Nn(1)),Fe(a,12,Nn(100)),Fe(a,15,Da(!0)),Fe(a,17,Da(!1)),Fe(a,16,Go(.001)),Fe(a,95,Da(!0)),Fe(a,42,Da(!1)),Fe(a,43,Da(!1)),Fe(a,130,Nn(1)),Fe(a,128,Nfe([0,0])),Fe(a,131,Da(!1)),Fe(a,132,Da(!1)),u&&yve(a,i["!cols"]),Fe(a,512,xfe(p,t)),u&&(i["!links"]=[]);for(var h=p.s.r;h<=p.e.r;++h){f=Nr(h);for(var b=p.s.c;b<=p.e.c;++b){h===p.s.r&&(m[b]=or(b)),d=m[b]+f;var N=c?(i[h]||[])[b]:i[d];N&&(vve(a,N,h,b,t),u&&N.l&&i["!links"].push([d,N.l]))}}var S=l.CodeName||l.name||s;return u&&Fe(a,574,nfe((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&Fe(a,229,Mfe(i["!merges"])),u&&gve(a,i),Fe(a,442,Y6(S)),u&&xve(a,i),Fe(a,10),a.end()}function wve(e,t,r){var a=za(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(Fe(a,2057,yN(e,5,r)),r.bookType=="xla"&&Fe(a,135),Fe(a,225,l?Nn(1200):null),Fe(a,193,jde(2)),c&&Fe(a,191),c&&Fe(a,192),Fe(a,226),Fe(a,92,Vde("SheetJS",r)),Fe(a,66,Nn(l?1200:1252)),l&&Fe(a,353,Nn(0)),l&&Fe(a,448),Fe(a,317,Jfe(e.SheetNames.length)),l&&e.vbaraw&&Fe(a,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Fe(a,442,Y6(u))}Fe(a,156,Nn(17)),Fe(a,25,Da(!1)),Fe(a,18,Da(!1)),Fe(a,19,Nn(0)),l&&Fe(a,431,Da(!1)),l&&Fe(a,444,Nn(0)),Fe(a,61,rfe()),Fe(a,64,Da(!1)),Fe(a,141,Nn(0)),Fe(a,34,Da(eye(e)=="true")),Fe(a,14,Da(!0)),l&&Fe(a,439,Da(!1)),Fe(a,218,Nn(0)),mve(a,e,r),hve(a,e.SSF,r),pve(a,r),l&&Fe(a,352,Da(!1));var d=a.end(),f=za();l&&Fe(f,140,Vfe()),l&&r.Strings&&ove(f,252,Yde(r.Strings)),Fe(f,10);var m=f.end(),p=za(),y=0,h=0;for(h=0;h<e.SheetNames.length;++h)y+=(l?12:11)+(l?2:1)*e.SheetNames[h].length;var b=d.length+y+m.length;for(h=0;h<e.SheetNames.length;++h){var N=i[h]||{};Fe(p,133,Gde({pos:b,hs:N.Hidden||0,dt:0,name:e.SheetNames[h]},r)),b+=t[h].length}var S=p.end();if(y!=S.length)throw new Error("BS8 "+y+" != "+S.length);var v=[];return d.length&&v.push(d),S.length&&v.push(S),m.length&&v.push(m),Qr(v)}function Nve(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=Yt(et)),e&&e.SSF&&(tu(),Kf(e.SSF),r.revssf=lp(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,PN(r),r.cellXfs=[],ro(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=bve(s,r,e);return a.unshift(wve(e,a,r)),Qr(a)}function qD(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=Fa(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return Nve(e,t);case 4:case 3:case 2:return fve(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function b_(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=lue(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(o=0;o<c.length;++o){var h=c[o].trim(),b=h.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var N=h.split(/<\/t[dh]>/i);for(l=0;l<N.length;++l){var S=N[l].trim();if(S.match(/<t[dh]/i)){for(var v=S,x=0;v.charAt(0)=="<"&&(x=v.indexOf(">"))>-1;)v=v.slice(x+1);for(var g=0;g<y.length;++g){var w=y[g];w.s.c==d&&w.s.r<u&&u<=w.e.r&&(d=w.e.c+1,g=-1)}var j=st(S.slice(0,S.indexOf(">")));m=j.colspan?+j.colspan:1,((f=+j.rowspan)>1||m>1)&&y.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+m-1}});var O=j.t||j["data-t"]||"";if(!v.length){d+=m;continue}if(v=g6(v),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!v.length){d+=m;continue}var _={t:"s",v};r.raw||!v.trim().length||O=="s"||(v==="TRUE"?_={t:"b",v:!0}:v==="FALSE"?_={t:"b",v:!1}:isNaN(ts(v))?isNaN(Ic(v).getDate())||(_={t:"d",v:lr(v)},r.cellDates||(_={t:"n",v:Kr(_.v)}),_.z=r.dateNF||et[14]):_={t:"n",v:ts(v)}),r.dense?(a[u]||(a[u]=[]),a[u][d]=_):a[nt({r:u,c:d})]=_,d+=m}}}}return a["!ref"]=ut(p),y.length&&(a["!merges"]=y),a}function KD(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var d=nt({r,c:o}),f=a.dense?(e[r]||[])[o]:e[d],m=f&&f.v!=null&&(f.h||tN(f.w||(bs(f),f.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),p.id=(a.id||"sjs")+"-"+d,i.push(Me("td",m,p))}}var y="<tr>";return y+i.join("")+"</tr>"}var VD='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',zD="</body></html>";function jve(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return to(b_(r[0],t),t);var a=RN();return r.forEach(function(s,i){LN(a,b_(s,t),"Sheet"+(i+1))}),a}function HD(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function GD(e,t){var r=t||{},a=r.header!=null?r.header:VD,s=r.footer!=null?r.footer:zD,i=[a],o=Fa(e["!ref"]);r.dense=Array.isArray(e),i.push(HD(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(KD(e,o,l,r));return i.push("</table>"+s),i.join("")}function XD(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?xr(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var d=Fa(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],m=0,p=e["!rows"]||(e["!rows"]=[]),y=0,h=0,b=0,N=0,S=0,v=0;for(e["!cols"]||(e["!cols"]=[]);y<l.length&&h<c;++y){var x=l[y];if(w_(x)){if(a.display)continue;p[h]={hidden:!0}}var g=x.children;for(b=N=0;b<g.length;++b){var w=g[b];if(!(a.display&&w_(w))){var j=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):g6(w.innerHTML),O=w.getAttribute("data-z")||w.getAttribute("z");for(m=0;m<f.length;++m){var _=f[m];_.s.c==N+i&&_.s.r<h+s&&h+s<=_.e.r&&(N=_.e.c+1-i,m=-1)}v=+w.getAttribute("colspan")||1,((S=+w.getAttribute("rowspan")||1)>1||v>1)&&f.push({s:{r:h+s,c:N+i},e:{r:h+s+(S||1)-1,c:N+i+(v||1)-1}});var E={t:"s",v:j},T=w.getAttribute("data-t")||w.getAttribute("t")||"";j!=null&&(j.length==0?E.t=T||"z":a.raw||j.trim().length==0||T=="s"||(j==="TRUE"?E={t:"b",v:!0}:j==="FALSE"?E={t:"b",v:!1}:isNaN(ts(j))?isNaN(Ic(j).getDate())||(E={t:"d",v:lr(j)},a.cellDates||(E={t:"n",v:Kr(E.v)}),E.z=a.dateNF||et[14]):E={t:"n",v:ts(j)})),E.z===void 0&&O!=null&&(E.z=O);var k="",A=w.getElementsByTagName("A");if(A&&A.length)for(var P=0;P<A.length&&!(A[P].hasAttribute("href")&&(k=A[P].getAttribute("href"),k.charAt(0)!="#"));++P);k&&k.charAt(0)!="#"&&(E.l={Target:k}),a.dense?(e[h+s]||(e[h+s]=[]),e[h+s][N+i]=E):e[nt({c:N+i,r:h+s})]=E,u.e.c<N+i&&(u.e.c=N+i),N+=v}}++h}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,h-1+s),e["!ref"]=ut(u),h>=c&&(e["!fullref"]=ut((u.e.r=l.length-y+h-1+s,u))),e}function YD(e,t){var r=t||{},a=r.dense?[]:{};return XD(a,e,t)}function Sve(e,t){return to(YD(e,t),t)}function w_(e){var t="",r=kve(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function kve(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Cve(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=At(t.replace(/<[^>]*>/g,""));return[r]}var N_={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function QD(e,t){var r=t||{},a=rN(e),s=[],i,o,l={name:""},c="",u=0,d,f,m={},p=[],y=r.dense?[]:{},h,b,N={value:""},S="",v=0,x=[],g=-1,w=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},O=0,_={},E=[],T={},k=0,A=0,P=[],M=1,U=1,W=[],Y={Names:[]},B={},ae=["",""],oe=[],D={},H="",G=0,Z=!1,X=!1,ie=0;for(xf.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");h=xf.exec(a);)switch(h[3]=h[3].replace(/_.*$/,"")){case"table":case"":h[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?y["!ref"]=ut(j):y["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(y["!fullref"]=y["!ref"],j.e.r=r.sheetRows-1,y["!ref"]=ut(j)),E.length&&(y["!merges"]=E),P.length&&(y["!rows"]=P),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=y,X=!1):h[0].charAt(h[0].length-2)!=="/"&&(d=st(h[0],!1),g=w=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,y=r.dense?[]:{},E=[],P=[],X=!0);break;case"table-row-group":h[1]==="/"?--O:++O;break;case"table-row":case"":if(h[1]==="/"){g+=M,M=1;break}if(f=st(h[0],!1),f.?g=f.-1:g==-1&&(g=0),M=+f["number-rows-repeated"]||1,M<10)for(ie=0;ie<M;++ie)O>0&&(P[g+ie]={level:O});w=-1;break;case"covered-table-cell":h[1]!=="/"&&++w,r.sheetStubs&&(r.dense?(y[g]||(y[g]=[]),y[g][w]={t:"z"}):y[nt({r:g,c:w})]={t:"z"}),S="",x=[];break;case"table-cell":case"":if(h[0].charAt(h[0].length-2)==="/")++w,N=st(h[0],!1),U=parseInt(N["number-columns-repeated"]||"1",10),b={t:"z",v:null},N.formula&&r.cellFormula!=!1&&(b.f=g_(At(N.formula))),(N.||N["value-type"])=="string"&&(b.t="s",b.v=At(N["string-value"]||""),r.dense?(y[g]||(y[g]=[]),y[g][w]=b):y[nt({r:g,c:w})]=b),w+=U-1;else if(h[1]!=="/"){++w,S="",v=0,x=[],U=1;var pe=M?g+M-1:g;if(w>j.e.c&&(j.e.c=w),w<j.s.c&&(j.s.c=w),g<j.s.r&&(j.s.r=g),pe>j.e.r&&(j.e.r=pe),N=st(h[0],!1),oe=[],D={},b={t:N.||N["value-type"],v:null},r.cellFormula)if(N.formula&&(N.formula=At(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(k=parseInt(N["number-matrix-rows-spanned"],10)||0,A=parseInt(N["number-matrix-columns-spanned"],10)||0,T={s:{r:g,c:w},e:{r:g+k-1,c:w+A-1}},b.F=ut(T),W.push([T,b.F])),N.formula)b.f=g_(N.formula);else for(ie=0;ie<W.length;++ie)g>=W[ie][0].s.r&&g<=W[ie][0].e.r&&w>=W[ie][0].s.c&&w<=W[ie][0].e.c&&(b.F=W[ie][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(k=parseInt(N["number-rows-spanned"],10)||0,A=parseInt(N["number-columns-spanned"],10)||0,T={s:{r:g,c:w},e:{r:g+k-1,c:w+A-1}},E.push(T)),N["number-columns-repeated"]&&(U=parseInt(N["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=sr(N["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(N.value);break;case"percentage":b.t="n",b.v=parseFloat(N.value);break;case"currency":b.t="n",b.v=parseFloat(N.value);break;case"date":b.t="d",b.v=lr(N["date-value"]),r.cellDates||(b.t="n",b.v=Kr(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=sue(N["time-value"])/86400,r.cellDates&&(b.t="d",b.v=cp(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(N.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",N["string-value"]!=null&&(S=At(N["string-value"]),x=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(Z=!1,b.t==="s"&&(b.v=S||"",x.length&&(b.R=x),Z=v==0),B.Target&&(b.l=B),oe.length>0&&(b.c=oe,oe=[]),S&&r.cellText!==!1&&(b.w=S),Z&&(b.t="z",delete b.v),(!Z||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=g))for(var ne=0;ne<M;++ne){if(U=parseInt(N["number-columns-repeated"]||"1",10),r.dense)for(y[g+ne]||(y[g+ne]=[]),y[g+ne][w]=ne==0?b:Yt(b);--U>0;)y[g+ne][w+U]=Yt(b);else for(y[nt({r:g+ne,c:w})]=b;--U>0;)y[nt({r:g+ne,c:w+U})]=Yt(b);j.e.c<=w&&(j.e.c=w)}U=parseInt(N["number-columns-repeated"]||"1",10),w+=U-1,U=0,b={},S="",x=[]}B={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!0]);break;case"annotation":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i;D.t=S,x.length&&(D.R=x),D.a=H,oe.push(D)}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!1]);H="",G=0,S="",v=0,x=[];break;case"creator":h[1]==="/"?H=a.slice(G,h.index):G=h.index+h[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!1]);S="",v=0,x=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(h[1]==="/"){if(_[l.name]=c,(i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&(c="",l=st(h[0],!1),s.push([h[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=st(h[0],!1),c+=N_[h[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=st(h[0],!1),c+=N_[h[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(h[0].slice(-2)==="/>")break;if(h[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(u,h.index);break}else u=h.index+h[0].length;break;case"named-range":o=st(h[0],!1),ae=Rg(o["cell-range-address"]);var ee={Name:o.name,Ref:ae[0]+"!"+ae[1]};X&&(ee.Sheet=p.length),Y.Names.push(ee);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(h[1]==="/"&&(!N||!N["string-value"])){var we=Cve(a.slice(v,h.index));S=(S.length>0?S+`
`:"")+we[0]}else st(h[0],!1),v=h.index+h[0].length;break;case"s":break;case"database-range":if(h[1]==="/")break;try{ae=Rg(st(h[0])["target-range-address"]),m[ae[0]]["!autofilter"]={ref:ae[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(h[1]!=="/"){if(B=st(h[0],!1),!B.href)break;B.Target=At(B.href),delete B.href,B.Target.charAt(0)=="#"&&B.Target.indexOf(".")>-1?(ae=Rg(B.Target.slice(1)),B.Target="#"+ae[0]+"!"+ae[1]):B.Target.match(/^\.\.[\\\/]/)&&(B.Target=B.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(h[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(h)}}var F={Sheets:m,SheetNames:p,Workbook:Y};return r.bookSheets&&delete F.Sheets,F}function j_(e,t){t=t||{},wn(e,"META-INF/manifest.xml")&&nde(Dr(e,"META-INF/manifest.xml"),t);var r=rn(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=QD(Ht(r),t);return wn(e,"meta.xml")&&(a.Props=R6(Dr(e,"meta.xml"))),a}function S_(e,t){return QD(e,t)}var Ove=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+hf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Er+t}}(),k_=function(){var e=function(i){return Wt(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Wt(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Fa(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,y=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var h="",b=i["!rows"]||[];for(u=0;u<f.s.r;++u)h=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+h+`></table:table-row>
`);for(;u<=f.e.r;++u){for(h=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+h+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var N=!1,S={},v="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>u)&&!(m[p].e.c<d)&&!(m[p].e.r<u)){(m[p].s.c!=d||m[p].s.r!=u)&&(N=!0),S["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,S["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(N){c.push(r);continue}var x=nt({r:u,c:d}),g=y?(i[u]||[])[d]:i[x];if(g&&g.f&&(S["table:formula"]=Wt(Jxe(g.f)),g.F&&g.F.slice(0,x.length)==x)){var w=Fa(g.F);S["table:number-matrix-columns-spanned"]=w.e.c-w.s.c+1,S["table:number-matrix-rows-spanned"]=w.e.r-w.s.r+1}if(!g){c.push(t);continue}switch(g.t){case"b":v=g.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=g.v?"true":"false";break;case"n":v=g.w||String(g.v||0),S["office:value-type"]="float",S["office:value"]=g.v||0;break;case"s":case"str":v=g.v==null?"":g.v,S["office:value-type"]="string";break;case"d":v=g.w||lr(g.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=lr(g.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(v);if(g.l&&g.l.Target){var O=g.l.Target;O=O.charAt(0)=="#"?"#"+Zxe(O.slice(1)):O,O.charAt(0)!="#"&&!O.match(/^\w+:/)&&(O="../"+O),j=Me("text:a",j,{"xlink:href":O.replace(/&/g,"&amp;")})}c.push("          "+Me("table:table-cell",Me("text:p",j,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Li(f),f.ods=l;var m=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Er],u=hf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=hf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(F6().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function JD(e,t){if(t.bookType=="fods")return k_(e,t);var r=Jw(),a="",s=[],i=[];return a="mimetype",dt(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",dt(r,a,k_(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",dt(r,a,Ove(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",dt(r,a,Er+F6()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",dt(r,a,ode(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",dt(r,a,sde(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Qo(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function E1(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ht(eo(e))}function _ve(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):tn(fs(e))}function Tve(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Bi(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function C_(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Eve(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function Ave(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function Nf(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Bt(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function jr(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function It(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=Nf(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Nf(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function aa(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(Bt(a*8+s.type)),s.type==2&&t.push(Bt(s.data.length)),t.push(s.data))})}),Bi(t)}function EN(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function vn(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=Nf(e,a),i=It(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:jr(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=It(l.data),u=jr(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=jr(i[3][0].data)>>>0>0),r.push(o)}return r}function yl(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Bt(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Bt(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Bt(o.data.length)}],a[2].push({data:aa(o.meta),type:2})});var i=aa(a);t.push(Bt(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),Bi(t)}function Pve(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=Nf(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Bi(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=Bi(s);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function bn(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Pve(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Bi(t)}function vl(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Bt(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return Bi(t)}function Dve(e,t,r,a){var s=Qo(e),i=s.getUint32(4,!0),o=(a>1?12:8)+C_(i&(a>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=C_(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(d.setTime(d.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Ive(e,t,r){var a=Qo(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(c=Eve(e,i),i+=16),s&2&&(u=a.getFloat64(i,!0),i+=8),s&4&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function $g(e,t){var r=new Uint8Array(32),a=Qo(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Ave(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function Bg(e,t){var r=new Uint8Array(32),a=Qo(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function Mve(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Dve(e,t,r,e[0]);case 5:return Ive(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ga(e){var t=It(e);return Nf(t[1][0].data)}function O_(e,t){var r=It(t.data),a=jr(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=It(o.data),c=jr(l[1][0].data)>>>0;switch(a){case 1:i[c]=E1(l[3][0].data);break;case 8:{var u=e[ga(l[9][0].data)][0],d=It(u.data),f=e[ga(d[1][0].data)][0],m=jr(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=It(f.data);i[c]=p[3].map(function(y){return E1(y.data)}).join("")}break}}),i}function Fve(e,t){var r,a,s,i,o,l,c,u,d,f,m,p,y,h,b=It(e),N=jr(b[1][0].data)>>>0,S=jr(b[2][0].data)>>>0,v=((a=(r=b[8])==null?void 0:r[0])==null?void 0:a.data)&&jr(b[8][0].data)>0||!1,x,g;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)x=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,g=(u=(c=b[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)x=(p=(m=b[4])==null?void 0:m[0])==null?void 0:p.data,g=(h=(y=b[3])==null?void 0:y[0])==null?void 0:h.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var w=v?4:1,j=Qo(x),O=[],_=0;_<x.length/2;++_){var E=j.getUint16(_*2,!0);E<65535&&O.push([_,E])}if(O.length!=S)throw"Expected ".concat(S," cells, found ").concat(O.length);var T=[];for(_=0;_<O.length-1;++_)T[O[_][0]]=g.subarray(O[_][1]*w,O[_+1][1]*w);return O.length>=1&&(T[O[O.length-1][0]]=g.subarray(O[O.length-1][1]*w)),{R:N,cells:T}}function Rve(e,t){var r,a=It(t.data),s=(r=a==null?void 0:a[7])!=null&&r[0]?jr(a[7][0].data)>>>0>0?1:0:-1,i=EN(a[5],function(o){return Fve(o,s)});return{nrows:jr(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function Lve(e,t,r){var a,s=It(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(jr(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(jr(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=ut(i);var o=It(s[4][0].data),l=O_(e,e[ga(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?O_(e,e[ga(o[17][0].data)][0]):[],u=It(o[3][0].data),d=0;u[1].forEach(function(f){var m=It(f.data),p=e[ga(m[2][0].data)][0],y=jr(p.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var h=Rve(e,p);h.data.forEach(function(b,N){b.forEach(function(S,v){var x=nt({r:d+N,c:v}),g=Mve(S,l,c);g&&(r[x]=g)})}),d+=h.nrows})}function $ve(e,t){var r=It(t.data),a={"!ref":"A1"},s=e[ga(r[2][0].data)],i=jr(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Lve(e,s[0],a),a}function Bve(e,t){var r,a=It(t.data),s={name:(r=a[1])!=null&&r[0]?E1(a[1][0].data):"",sheets:[]},i=EN(a[2],ga);return i.forEach(function(o){e[o].forEach(function(l){var c=jr(l.meta[1][0].data);c==6e3&&s.sheets.push($ve(e,l))})}),s}function Uve(e,t){var r=RN(),a=It(t.data),s=EN(a[1],ga);if(s.forEach(function(i){e[i].forEach(function(o){var l=jr(o.meta[1][0].data);if(l==2){var c=Bve(e,o);c.sheets.forEach(function(u,d){LN(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Ug(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=bn(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=vn(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&jr(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(u){var d=jr(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Uve(i,l)}function Wve(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&jr(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Qo(e[7][0].data),d=0,f=[],m=Qo(e[4][0].data),p=0,y=[],h=0;h<t.length;++h){if(t[h]==null){u.setUint16(h*2,65535,!0),m.setUint16(h*2,65535);continue}u.setUint16(h*2,d,!0),m.setUint16(h*2,p,!0);var b,N;switch(typeof t[h]){case"string":b=$g({t:"s",v:t[h]},r),N=Bg({t:"s",v:t[h]},r);break;case"number":b=$g({t:"n",v:t[h]},r),N=Bg({t:"n",v:t[h]},r);break;case"boolean":b=$g({t:"b",v:t[h]},r),N=Bg({t:"b",v:t[h]},r);break;default:throw new Error("Unsupported value "+t[h])}f.push(b),d+=b.length,y.push(N),p+=N.length,++c}for(e[2][0].data=Bt(c);h<e[7][0].data.length/2;++h)u.setUint16(h*2,65535,!0),m.setUint16(h*2,65535,!0);return e[6][0].data=Bi(f),e[3][0].data=Bi(y),c}function qve(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Fa(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(ut(a)));var i=Xh(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(H){return H.forEach(function(G){typeof G=="string"&&o.push(G)})});var l={},c=[],u=Je.read(t.numbers,{type:"base64"});u.FileIndex.map(function(H,G){return[H,u.FullPaths[G]]}).forEach(function(H){var G=H[0],Z=H[1];if(G.type==2&&G.name.match(/\.iwa/)){var X=G.content,ie=bn(X),pe=vn(ie);pe.forEach(function(ne){c.push(ne.id),l[ne.id]={deps:[],location:Z,type:jr(ne.messages[0].meta[1][0].data)}})}}),c.sort(function(H,G){return H-G});var d=c.filter(function(H){return H>1}).map(function(H){return[H,Bt(H)]});u.FileIndex.map(function(H,G){return[H,u.FullPaths[G]]}).forEach(function(H){var G=H[0];if(H[1],!!G.name.match(/\.iwa/)){var Z=vn(bn(G.content));Z.forEach(function(X){X.messages.forEach(function(ie){d.forEach(function(pe){X.messages.some(function(ne){return jr(ne.meta[1][0].data)!=11006&&Tve(ne.data,pe[1])})&&l[pe[0]].deps.push(X.id)})})})}});for(var f=Je.find(u,l[1].location),m=vn(bn(f.content)),p,y=0;y<m.length;++y){var h=m[y];h.id==1&&(p=h)}var b=ga(It(p.messages[0].data)[1][0].data);for(f=Je.find(u,l[b].location),m=vn(bn(f.content)),y=0;y<m.length;++y)h=m[y],h.id==b&&(p=h);for(b=ga(It(p.messages[0].data)[2][0].data),f=Je.find(u,l[b].location),m=vn(bn(f.content)),y=0;y<m.length;++y)h=m[y],h.id==b&&(p=h);for(b=ga(It(p.messages[0].data)[2][0].data),f=Je.find(u,l[b].location),m=vn(bn(f.content)),y=0;y<m.length;++y)h=m[y],h.id==b&&(p=h);var N=It(p.messages[0].data);{N[6][0].data=Bt(a.e.r+1),N[7][0].data=Bt(a.e.c+1);var S=ga(N[46][0].data),v=Je.find(u,l[S].location),x=vn(bn(v.content));{for(var g=0;g<x.length&&x[g].id!=S;++g);if(x[g].id!=S)throw"Bad ColumnRowUIDMapArchive";var w=It(x[g].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var j=0;j<=a.e.c;++j){var O=[];O[1]=O[2]=[{type:0,data:Bt(j+420690)}],w[1].push({type:2,data:aa(O)}),w[2].push({type:0,data:Bt(j)}),w[3].push({type:0,data:Bt(j)})}w[4]=[],w[5]=[],w[6]=[];for(var _=0;_<=a.e.r;++_)O=[],O[1]=O[2]=[{type:0,data:Bt(_+726270)}],w[4].push({type:2,data:aa(O)}),w[5].push({type:0,data:Bt(_)}),w[6].push({type:0,data:Bt(_)});x[g].messages[0].data=aa(w)}v.content=vl(yl(x)),v.size=v.content.length,delete N[46];var E=It(N[4][0].data);{E[7][0].data=Bt(a.e.r+1);var T=It(E[1][0].data),k=ga(T[2][0].data);v=Je.find(u,l[k].location),x=vn(bn(v.content));{if(x[0].id!=k)throw"Bad HeaderStorageBucket";var A=It(x[0].messages[0].data);for(_=0;_<i.length;++_){var P=It(A[2][0].data);P[1][0].data=Bt(_),P[4][0].data=Bt(i[_].length),A[2][_]={type:A[2][0].type,data:aa(P)}}x[0].messages[0].data=aa(A)}v.content=vl(yl(x)),v.size=v.content.length;var M=ga(E[2][0].data);v=Je.find(u,l[M].location),x=vn(bn(v.content));{if(x[0].id!=M)throw"Bad HeaderStorageBucket";for(A=It(x[0].messages[0].data),j=0;j<=a.e.c;++j)P=It(A[2][0].data),P[1][0].data=Bt(j),P[4][0].data=Bt(a.e.r+1),A[2][j]={type:A[2][0].type,data:aa(P)};x[0].messages[0].data=aa(A)}v.content=vl(yl(x)),v.size=v.content.length;var U=ga(E[4][0].data);(function(){for(var H=Je.find(u,l[U].location),G=vn(bn(H.content)),Z,X=0;X<G.length;++X){var ie=G[X];ie.id==U&&(Z=ie)}var pe=It(Z.messages[0].data);{pe[3]=[];var ne=[];o.forEach(function(F,Ue){ne[1]=[{type:0,data:Bt(Ue)}],ne[2]=[{type:0,data:Bt(1)}],ne[3]=[{type:2,data:_ve(F)}],pe[3].push({type:2,data:aa(ne)})})}Z.messages[0].data=aa(pe);var ee=yl(G),we=vl(ee);H.content=we,H.size=H.content.length})();var W=It(E[3][0].data);{var Y=W[1][0];delete W[2];var B=It(Y.data);{var ae=ga(B[2][0].data);(function(){for(var H=Je.find(u,l[ae].location),G=vn(bn(H.content)),Z,X=0;X<G.length;++X){var ie=G[X];ie.id==ae&&(Z=ie)}var pe=It(Z.messages[0].data);{delete pe[6],delete W[7];var ne=new Uint8Array(pe[5][0].data);pe[5]=[];for(var ee=0,we=0;we<=a.e.r;++we){var F=It(ne);ee+=Wve(F,i[we],o),F[1][0].data=Bt(we),pe[5].push({data:aa(F),type:2})}pe[1]=[{type:0,data:Bt(a.e.c+1)}],pe[2]=[{type:0,data:Bt(a.e.r+1)}],pe[3]=[{type:0,data:Bt(ee)}],pe[4]=[{type:0,data:Bt(a.e.r+1)}]}Z.messages[0].data=aa(pe);var Ue=yl(G),R=vl(Ue);H.content=R,H.size=H.content.length})()}Y.data=aa(B)}E[3][0].data=aa(W)}N[4][0].data=aa(E)}p.messages[0].data=aa(N);var oe=yl(m),D=vl(oe);return f.content=D,f.size=f.content.length,u}function ZD(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function AN(e){ZD([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function PN(e){ZD([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Kve(e){return yt.WS.indexOf(e)>-1?"sheet":e==yt.CS?"chart":e==yt.DS?"dialog":e==yt.MS?"macro":e&&e.length?e:"sheet"}function Vve(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Kve(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function zve(e,t,r,a,s,i,o,l,c,u,d,f){try{i[a]=ed(rn(e,r,!0),t);var m=Dr(e,t),p;switch(l){case"sheet":p=yye(m,t,s,c,i[a],u,d,f);break;case"chart":if(p=vye(m,t,s,c,i[a],u,d,f),!p||!p["!drawel"])break;var y=Fu(p["!drawel"].Target,t),h=pf(y),b=ihe(rn(e,y,!0),ed(rn(e,h,!0),y)),N=Fu(b,y),S=pf(N);p=Hge(rn(e,N,!0),N,c,ed(rn(e,S,!0),N),u,p);break;case"macro":p=bye(m,t,s,c,i[a],u,d,f);break;case"dialog":p=wye(m,t,s,c,i[a],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=p;var v=[];i&&i[a]&&kr(i[a]).forEach(function(x){var g="";if(i[a][x].Type==yt.CMNT){g=Fu(i[a][x].Target,t);var w=kye(Dr(e,g,!0),g,c);if(!w||!w.length)return;f_(p,w,!1)}i[a][x].Type==yt.TCMNT&&(g=Fu(i[a][x].Target,t),v=v.concat(lhe(Dr(e,g,!0),c)))}),v&&v.length&&f_(p,v,!0,c.people||[])}catch(x){if(c.WTF)throw x}}function gn(e){return e.charAt(0)=="/"?e.slice(1):e}function eI(e,t){if(tu(),t=t||{},AN(t),wn(e,"META-INF/manifest.xml")||wn(e,"objectdata.xml"))return j_(e,t);if(wn(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Ug<"u"){if(e.FileIndex)return Ug(e);var r=Je.utils.cfb_new();return DO(e).forEach(function(P){dt(r,P,m6(e,P))}),Ug(r)}throw new Error("Unsupported NUMBERS file")}if(!wn(e,"[Content_Types].xml"))throw wn(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):wn(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=DO(e),s=rde(rn(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Dr(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Dr(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(td=[],s.sst)try{td=Sye(Dr(e,gn(s.sst)),s.sst,t)}catch(P){if(t.WTF)throw P}t.cellStyles&&s.themes.length&&(c=jye(rn(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Nye(Dr(e,gn(s.style)),s.style,c,t))}s.links.map(function(P){try{var M=ed(rn(e,pf(gn(P))),P);return Oye(Dr(e,gn(P)),M,P,t)}catch{}});var d=gye(Dr(e,gn(s.workbooks[0])),s.workbooks[0],t),f={},m="";s.coreprops.length&&(m=Dr(e,gn(s.coreprops[0]),!0),m&&(f=R6(m)),s.extprops.length!==0&&(m=Dr(e,gn(s.extprops[0]),!0),m&&cde(m,f,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=rn(e,gn(s.custprops[0]),!0),m&&(p=dde(m,t)));var y={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(M){return M.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(y.Props=f,y.Custprops=p),t.bookSheets&&typeof o<"u"&&(y.SheetNames=o),t.bookSheets?y.SheetNames:t.bookProps))return y;o={};var h={};t.bookDeps&&s.calcchain&&(h=Cye(Dr(e,gn(s.calcchain)),s.calcchain));var b=0,N={},S,v;{var x=d.Sheets;f.Worksheets=x.length,f.SheetNames=[];for(var g=0;g!=x.length;++g)f.SheetNames[g]=x[g].name}var w=i?"bin":"xml",j=s.workbooks[0].lastIndexOf("/"),O=(s.workbooks[0].slice(0,j+1)+"_rels/"+s.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");wn(e,O)||(O="xl/_rels/workbook."+w+".rels");var _=ed(rn(e,O,!0),O.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=_ye(Dr(e,gn(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=uhe(Dr(e,gn(s.people[0])),t)),_&&(_=Vve(_,d.Sheets));var E=Dr(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var T="sheet";if(_&&_[b]?(S="xl/"+_[b][1].replace(/[\/]?xl\//,""),wn(e,S)||(S=_[b][1]),wn(e,S)||(S=O.replace(/_rels\/.*$/,"")+_[b][1]),T=_[b][2]):(S="xl/worksheets/sheet"+(b+1-E)+"."+w,S=S.replace(/sheet0\./,"sheet.")),v=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,A=0;A!=t.sheets.length;++A)typeof t.sheets[A]=="number"&&t.sheets[A]==b&&(k=1),typeof t.sheets[A]=="string"&&t.sheets[A].toLowerCase()==f.SheetNames[b].toLowerCase()&&(k=1);if(!k)continue e}}zve(e,S,v,f.SheetNames[b],b,N,o,T,t,d,c,u)}return y={Directory:s,Workbook:d,Props:f,Custprops:p,Deps:h,Sheets:o,SheetNames:f.SheetNames,Strings:td,Styles:u,Themes:c,SSF:Yt(et)},t&&t.bookFiles&&(e.files?(y.keys=a,y.files=e.files):(y.keys=[],y.files={},e.FullPaths.forEach(function(P,M){P=P.replace(/^Root Entry[\/]/,""),y.keys.push(P),y.files[P]=e.FileIndex[M]}))),t&&t.bookVBA&&(s.vba.length>0?y.vbaraw=Dr(e,gn(s.vba[0]),!0):s.defaults&&s.defaults.bin===yhe&&(y.vbaraw=Dr(e,"xl/vbaProject.bin",!0))),y}function Hve(e,t){var r=t||{},a="Workbook",s=Je.find(e,a);try{if(a="/!DataSpaces/Version",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(T0e(s.content),a="/!DataSpaces/DataSpaceMap",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=A0e(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=P0e(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);I0e(s.content)}catch{}if(a="/EncryptionInfo",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=M0e(s.content);if(a="/EncryptedPackage",s=Je.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Gve(e,t){return t.bookType=="ods"?JD(e,t):t.bookType=="numbers"?qve(e,t):t.bookType=="xlsb"?Xve(e,t):tI(e,t)}function Xve(e,t){Bl=1024,e&&!e.SSF&&(e.SSF=Yt(et)),e&&e.SSF&&(tu(),Kf(e.SSF),t.revssf=lp(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,rd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=ND.indexOf(t.bookType)>-1,s=pN();PN(t=t||{});var i=Jw(),o="",l=0;if(t.cellXfs=[],ro(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",dt(i,o,L6(e.Props,t)),s.coreprops.push(o),Ut(t.rels,2,o,yt.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,dt(i,o,U6(e.Props)),s.extprops.push(o),Ut(t.rels,3,o,yt.EXT_PROPS),e.Custprops!==e.Props&&kr(e.Custprops||{}).length>0&&(o="docProps/custom.xml",dt(i,o,W6(e.Custprops)),s.custprops.push(o),Ut(t.rels,4,o,yt.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,dt(i,o,Eye(l-1,o,t,e,d)),s.sheets.push(o),Ut(t.wbrels,-1,"worksheets/sheet"+l+"."+r,yt.WS[0])}if(f){var p=f["!comments"],y=!1,h="";p&&p.length>0&&(h="xl/comments"+l+"."+r,dt(i,h,Dye(p,h)),s.comments.push(h),Ut(d,-1,"../comments"+l+"."+r,yt.CMNT),y=!0),f["!legacy"]&&y&&dt(i,"xl/drawings/vmlDrawing"+l+".vml",bD(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&dt(i,pf(o),ec(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,dt(i,o,Pye(t.Strings,o,t)),s.strs.push(o),Ut(t.wbrels,-1,"sharedStrings."+r,yt.SST)),o="xl/workbook."+r,dt(i,o,Tye(e,o)),s.workbooks.push(o),Ut(t.rels,1,o,yt.WB),o="xl/theme/theme1.xml",dt(i,o,NN(e.Themes,t)),s.themes.push(o),Ut(t.wbrels,-1,"theme/theme1.xml",yt.THEME),o="xl/styles."+r,dt(i,o,Aye(e,o,t)),s.styles.push(o),Ut(t.wbrels,-1,"styles."+r,yt.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",dt(i,o,e.vbaraw),s.vba.push(o),Ut(t.wbrels,-1,"vbaProject.bin",yt.VBA)),o="xl/metadata."+r,dt(i,o,Iye(o)),s.metadata.push(o),Ut(t.wbrels,-1,"metadata."+r,yt.XLMETA),dt(i,"[Content_Types].xml",M6(s,t)),dt(i,"_rels/.rels",ec(t.rels)),dt(i,"xl/_rels/workbook."+r+".rels",ec(t.wbrels)),delete t.revssf,delete t.ssf,i}function tI(e,t){Bl=1024,e&&!e.SSF&&(e.SSF=Yt(et)),e&&e.SSF&&(tu(),Kf(e.SSF),t.revssf=lp(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,rd?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=ND.indexOf(t.bookType)>-1,s=pN();PN(t=t||{});var i=Jw(),o="",l=0;if(t.cellXfs=[],ro(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",dt(i,o,L6(e.Props,t)),s.coreprops.push(o),Ut(t.rels,2,o,yt.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,dt(i,o,U6(e.Props)),s.extprops.push(o),Ut(t.rels,3,o,yt.EXT_PROPS),e.Custprops!==e.Props&&kr(e.Custprops||{}).length>0&&(o="docProps/custom.xml",dt(i,o,W6(e.Custprops)),s.custprops.push(o),Ut(t.rels,4,o,yt.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,dt(i,o,DD(l-1,t,e,f)),s.sheets.push(o),Ut(t.wbrels,-1,"worksheets/sheet"+l+"."+r,yt.WS[0])}if(m){var y=m["!comments"],h=!1,b="";if(y&&y.length>0){var N=!1;y.forEach(function(S){S[1].forEach(function(v){v.T==!0&&(N=!0)})}),N&&(b="xl/threadedComments/threadedComment"+l+"."+r,dt(i,b,che(y,d,t)),s.threadedcomments.push(b),Ut(f,-1,"../threadedComments/threadedComment"+l+"."+r,yt.TCMNT)),b="xl/comments"+l+"."+r,dt(i,b,wD(y)),s.comments.push(b),Ut(f,-1,"../comments"+l+"."+r,yt.CMNT),h=!0}m["!legacy"]&&h&&dt(i,"xl/drawings/vmlDrawing"+l+".vml",bD(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&dt(i,pf(o),ec(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,dt(i,o,lD(t.Strings,t)),s.strs.push(o),Ut(t.wbrels,-1,"sharedStrings."+r,yt.SST)),o="xl/workbook."+r,dt(i,o,$D(e)),s.workbooks.push(o),Ut(t.rels,1,o,yt.WB),o="xl/theme/theme1.xml",dt(i,o,NN(e.Themes,t)),s.themes.push(o),Ut(t.wbrels,-1,"theme/theme1.xml",yt.THEME),o="xl/styles."+r,dt(i,o,pD(e,t)),s.styles.push(o),Ut(t.wbrels,-1,"styles."+r,yt.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",dt(i,o,e.vbaraw),s.vba.push(o),Ut(t.wbrels,-1,"vbaProject.bin",yt.VBA)),o="xl/metadata."+r,dt(i,o,vD()),s.metadata.push(o),Ut(t.wbrels,-1,"metadata."+r,yt.XLMETA),d.length>1&&(o="xl/persons/person.xml",dt(i,o,dhe(d)),s.people.push(o),Ut(t.wbrels,-1,"persons/person.xml",yt.PEOPLE)),dt(i,"[Content_Types].xml",M6(s,t)),dt(i,"_rels/.rels",ec(t.rels)),dt(i,"xl/_rels/workbook."+r+".rels",ec(t.wbrels)),delete t.revssf,delete t.ssf,i}function DN(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=un(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Yve(e,t){return Je.find(e,"EncryptedPackage")?Hve(e,t):TN(e,t)}function Qve(e,t){var r,a=e,s=t||{};return s.type||(s.type=pt&&Buffer.isBuffer(e)?"buffer":"base64"),r=h6(a,s),eI(r,s)}function rI(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return _1(e.slice(r),t);default:break e}return Mc.to_workbook(e,t)}function Jve(e,t){var r="",a=DN(e,t);switch(t.type){case"base64":r=un(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Ho(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Ht(r)),t.type="binary",rI(r,t)}function Zve(e,t){var r=e;return t.type=="base64"&&(r=un(r)),r=Ct.utils.decode(1200,r.slice(2),"str"),t.type="binary",rI(r,t)}function e1e(e){return e.match(/[^\x00-\x7F]/)?fs(e):e}function Wg(e,t,r,a){return a?(r.type="string",Mc.to_workbook(e,r)):Mc.to_workbook(t,r)}function jf(e,t){ip();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return jf(new Uint8Array(e),(r=Yt(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),rc={},r.dateNF&&(rc.dateNF=r.dateNF),r.type||(r.type=pt&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pt?"buffer":"binary",a=rue(e),typeof Uint8Array<"u"&&!pt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=e1e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Yt(r),r.type="array",jf(Gw(a),r)}switch((s=DN(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Yve(Je.read(a,r),r);break;case 9:if(s[1]<=8)return TN(a,r);break;case 60:return _1(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return f0e(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return iD.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Qve(a,r):Wg(e,a,r,i);case 239:return s[3]===60?_1(a,r):Wg(e,a,r,i);case 255:if(s[1]===254)return Zve(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Eo.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Eo.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return O1.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return mD.to_workbook(a,r);break;case 10:case 13:case 32:return Jve(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return d0e.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?O1.to_workbook(a,r):Wg(e,a,r,i)}function __(e,t){var r=t||{};return r.type="file",jf(e,r)}function aI(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Vf(t.file,Je.write(e,{type:pt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Je.write(e,t)}function t1e(e,t){var r=Yt(t||{}),a=Gve(e,r);return nI(a,r)}function r1e(e,t){var r=Yt(t||{}),a=tI(e,r);return nI(a,r)}function nI(e,t){var r={},a=pt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Je.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(qf(s))}return t.password&&typeof encrypt_agile<"u"?aI(encrypt_agile(s,t.password),t):t.type==="file"?Vf(t.file,s):t.type=="string"?Ht(s):s}function a1e(e,t){var r=t||{},a=ive(e,r);return aI(a,r)}function ls(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return df(fs(a));case"binary":return fs(a);case"string":return e;case"file":return Vf(t.file,a,"utf8");case"buffer":return pt?ri(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ls(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function n1e(e,t){switch(t.type){case"base64":return df(e);case"binary":return e;case"string":return e;case"file":return Vf(t.file,e,"binary");case"buffer":return pt?ri(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function K0(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?df(r):t.type=="string"?Ht(r):r;case"file":return Vf(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function IN(e,t){ip(),LD(e);var r=Yt(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=IN(e,r);return r.type="array",qf(a)}return r1e(e,r)}function xp(e,t){ip(),LD(e);var r=Yt(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=xp(e,r);return r.type="array",qf(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ls(Zye(e,r),r);case"slk":case"sylk":return ls(sD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ls(GD(e.Sheets[e.SheetNames[s]],r),r);case"txt":return n1e(oI(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ls(FN(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ls(iD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return K0(O1.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ls(Mc.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ls(mD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ls(oD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ls(JD(e,r),r);case"wk1":return K0(Eo.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return K0(Eo.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),K0(qD(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),a1e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return t1e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function MN(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function T_(e,t,r){var a=r||{};return a.type="file",a.file=t,MN(a),xp(e,a)}function s1e(e,t,r){var a=r||{};return a.type="file",a.file=t,MN(a),IN(e,a)}function i1e(e,t,r,a){var s=r||{};s.type="file",s.file=e,MN(s),s.type="buffer";var i=a;return i instanceof Function||(i=r),Ni.writeFile(e,xp(t,s),i)}function sI(e,t,r,a,s,i,o,l){var c=Nr(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var y=o?e[r][p]:e[a[p]+c];if(y===void 0||y.t===void 0){if(u===void 0)continue;i[p]!=null&&(m[i[p]]=u);continue}var h=y.v;switch(y.t){case"z":if(h==null)break;continue;case"e":h=h==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(i[p]!=null){if(h==null)if(y.t=="e"&&h===null)m[i[p]]=null;else if(u!==void 0)m[i[p]]=u;else if(d&&h===null)m[i[p]]=null;else continue;else m[i[p]]=d&&(y.t!=="n"||y.t==="n"&&l.rawNumbers!==!1)?h:bs(y,h,l);h!=null&&(f=!1)}}return{row:m,isempty:f}}function Xh(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof d){case"string":c=Nt(d);break;case"number":c=Nt(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(s=0);var f=Nr(c.s.r),m=[],p=[],y=0,h=0,b=Array.isArray(e),N=c.s.r,S=0,v={};b&&!e[N]&&(e[N]=[]);var x=u.skipHidden&&e["!cols"]||[],g=u.skipHidden&&e["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(x[S]||{}).hidden)switch(m[S]=or(S),r=b?e[N][S]:e[m[S]+f],a){case 1:i[S]=S-c.s.c;break;case 2:i[S]=m[S];break;case 3:i[S]=u.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=bs(r,null,u),h=v[o]||0,!h)v[o]=1;else{do l=o+"_"+h++;while(v[l]);v[o]=h,v[l]=1}i[S]=l}for(N=c.s.r+s;N<=c.e.r;++N)if(!(g[N]||{}).hidden){var w=sI(e,c,N,m,a,i,b,u);(w.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(p[y++]=w.row)}return p.length=y,p}var E_=/"/g;function iI(e,t,r,a,s,i,o,l){for(var c=!0,u=[],d="",f=Nr(r),m=t.s.c;m<=t.e.c;++m)if(a[m]){var p=l.dense?(e[r]||[])[m]:e[a[m]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(l.rawNumbers&&p.t=="n"?p.v:bs(p,null,l));for(var y=0,h=0;y!==d.length;++y)if((h=d.charCodeAt(y))===s||h===i||h===34||l.forceQuotes){d='"'+d.replace(E_,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(E_,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function FN(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=Nt(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(f[y]=or(y));for(var h=0,b=s.s.r;b<=s.e.r;++b)(p[b]||{}).hidden||(d=iI(e,s,b,f,o,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),(d||a.blankrows!==!1)&&r.push((h++?l:"")+d)));return delete a.dense,r.join("")}function oI(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=FN(e,t);if(typeof Ct>"u"||t.type=="string")return r;var a=Ct.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+a}function o1e(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=Nt(e["!ref"]),i="",o=[],l,c=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=or(l);for(var d=s.s.r;d<=s.e.r;++d)for(i=Nr(d),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[d]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function lI(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?xr(a.origin):a.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var f=Nt(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+s)}else o==-1&&(o=0,d.e.r=t.length-1+s);var m=a.header||[],p=0;t.forEach(function(h,b){kr(h).forEach(function(N){(p=m.indexOf(N))==-1&&(m[p=m.length]=N);var S=h[N],v="z",x="",g=nt({c:l+p,r:o+b+s});u=Sf(i,g),S&&typeof S=="object"&&!(S instanceof Date)?i[g]=S:(typeof S=="number"?v="n":typeof S=="boolean"?v="b":typeof S=="string"?v="s":S instanceof Date?(v="d",a.cellDates||(v="n",S=Kr(S)),x=a.dateNF||et[14]):S===null&&a.nullError&&(v="e",S=0),u?(u.t=v,u.v=S,delete u.w,delete u.R,x&&(u.z=x)):i[g]=u={t:v,v:S},x&&(u.z=x))})}),d.e.c=Math.max(d.e.c,l+m.length-1);var y=Nr(o);if(s)for(p=0;p<m.length;++p)i[or(p+l)+y]={t:"s",v:m[p]};return i["!ref"]=ut(d),i}function l1e(e,t){return lI(null,e,t)}function Sf(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=xr(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Sf(e,nt(t)):Sf(e,nt({r:t,c:r||0}))}function c1e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function RN(){return{SheetNames:[],Sheets:{}}}function LN(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(RD(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function u1e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=c1e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function d1e(e,t){return e.z=t,e}function cI(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function f1e(e,t,r){return cI(e,"#"+t,r)}function m1e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function h1e(e,t,r,a){for(var s=typeof t!="string"?t:Nt(t),i=typeof t=="string"?t:ut(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=Sf(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var uI={encode_col:or,encode_row:Nr,encode_cell:nt,encode_range:ut,decode_col:uN,decode_row:cN,split_cell:Due,decode_cell:xr,decode_range:Fa,format_cell:bs,sheet_add_aoa:_6,sheet_add_json:lI,sheet_add_dom:XD,aoa_to_sheet:au,json_to_sheet:l1e,table_to_sheet:YD,table_to_book:Sve,sheet_to_csv:FN,sheet_to_txt:oI,sheet_to_json:Xh,sheet_to_html:GD,sheet_to_formulae:o1e,sheet_to_row_object_array:Xh,sheet_get_cell:Sf,book_new:RN,book_append_sheet:LN,book_set_sheet_visibility:u1e,cell_set_number_format:d1e,cell_set_hyperlink:cI,cell_set_internal_link:f1e,cell_add_comment:m1e,sheet_set_array_formula:h1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},pp;function x1e(e){pp=e}function p1e(e,t){var r=pp(),a=t??{};if(e==null||e["!ref"]==null)return r.push(null),r;var s=Nt(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(f[y]=or(y));var h=s.s.r,b=!1,N=0;return r._read=function(){if(!b)return b=!0,r.push("\uFEFF");for(;h<=s.e.r;)if(++h,!(p[h-1]||{}).hidden&&(d=iI(e,s,h-1,f,o,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),d||a.blankrows!==!1)))return r.push((N++?l:"")+d);return r.push(null)},r}function g1e(e,t){var r=pp(),a=t||{},s=a.header!=null?a.header:VD,i=a.footer!=null?a.footer:zD;r.push(s);var o=Fa(e["!ref"]);a.dense=Array.isArray(e),r.push(HD(e,o,a));var l=o.s.r,c=!1;return r._read=function(){if(l>o.e.r)return c||(c=!0,r.push("</table>"+i)),r.push(null);for(;l<=o.e.r;){r.push(KD(e,o,l,a)),++l;break}},r}function y1e(e,t){var r=pp({objectMode:!0});if(e==null||e["!ref"]==null)return r.push(null),r;var a={t:"n",v:0},s=0,i=1,o=[],l=0,c="",u={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)&&(s=3),typeof f){case"string":u=Nt(f);break;case"number":u=Nt(e["!ref"]),u.s.r=f;break;default:u=f}s>0&&(i=0);var m=Nr(u.s.r),p=[],y=0,h=Array.isArray(e),b=u.s.r,N=0,S={};h&&!e[b]&&(e[b]=[]);var v=d.skipHidden&&e["!cols"]||[],x=d.skipHidden&&e["!rows"]||[];for(N=u.s.c;N<=u.e.c;++N)if(!(v[N]||{}).hidden)switch(p[N]=or(N),a=h?e[b][N]:e[p[N]+m],s){case 1:o[N]=N-u.s.c;break;case 2:o[N]=p[N];break;case 3:o[N]=d.header[N-u.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),c=l=bs(a,null,d),y=S[l]||0,!y)S[l]=1;else{do c=l+"_"+y++;while(S[c]);S[l]=y,S[c]=1}o[N]=c}return b=u.s.r+i,r._read=function(){for(;b<=u.e.r;)if(!(x[b-1]||{}).hidden){var g=sI(e,u,b,p,s,o,h,d);if(++b,g.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows)){r.push(g.row);return}}return r.push(null)},r}var v1e={to_json:y1e,to_html:g1e,to_csv:p1e,set_readable:x1e};const b1e=uf.version,kf=Object.freeze(Object.defineProperty({__proto__:null,CFB:Je,SSF:o6,parse_xlscfb:TN,parse_zip:eI,read:jf,readFile:__,readFileSync:__,set_cptable:kce,set_fs:eue,stream:v1e,utils:uI,version:b1e,write:xp,writeFile:T_,writeFileAsync:i1e,writeFileSync:T_,writeFileXLSX:s1e,writeXLSX:IN},Symbol.toStringTag,{value:"Module"})),qg=()=>{const e=lt(),t=Ta(),[r,a]=C.useState(null),[s,i]=C.useState([]),[o,l]=C.useState([]),[c,u]=C.useState(!0),[d,f]=C.useState(null),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState(""),[S,v]=C.useState("materialName"),[x,g]=C.useState("asc"),[w,j]=C.useState(!1),[O,_]=C.useState(!1),E=C.useRef(null),[T,k]=C.useState(!1),[A,P]=C.useState(null),[M,U]=C.useState(!1),{notifications:W,markAsRead:Y,markAllAsRead:B,clearAll:ae,refreshNotifications:oe}=Js("Kuwait City"),[D,H]=C.useState(1),[G,Z]=C.useState(20),[X,ie]=C.useState(1),[pe,ne]=C.useState(0),[ee,we]=C.useState(1),[F,Ue]=C.useState(20),[R,ve]=C.useState(1),[xe,de]=C.useState(0),Ve=eu(m,500),ft=()=>{const q=t.pathname;return q.includes("/raw-materials")?"raw-materials":q.includes("/finished-goods")?"finished-goods":q.includes("/sales-orders")?"sales-orders":"overview"},it=ft(),mt=()=>{const q=ft();console.log(` Kuwait City: Current section: ${q}`),console.log(" Kuwait City: All notifications:",W);let z=[];return q==="raw-materials"?z=W.filter(re=>re.isTransferOrder&&(re.itemType==="Raw Material"||re.itemType==="Mixed")):q==="finished-goods"?z=W.filter(re=>re.isTransferOrder&&(re.itemType==="Finished Goods"||re.itemType==="Mixed")):z=W,console.log(` Kuwait City: Filtered notifications for ${q}:`,z),z};C.useEffect(()=>{console.log(" Kuwait City: Notifications updated:",W),console.log(` Kuwait City: Number of notifications: ${W.length}`),W.length>0&&console.log(" Kuwait City: First notification:",W[0])},[W]);const ht=se.useCallback(async q=>{try{console.log(" Kuwait City: handleViewTransferOrder called with transferOrderId:",q),U(!0);const z=await ce.getTransferOrderById(q);if(z.success)P(z.data),k(!0),console.log(" Kuwait City: Transfer order modal opened successfully");else throw new Error(z.message||"Failed to load transfer order")}catch(z){console.error("Error loading transfer order:",z),alert("Failed to load transfer order details")}finally{U(!1)}},[]);C.useEffect(()=>{He(),Jt();const q=re=>{const{transferOrderId:le}=re.detail;le&&ht(le)};window.addEventListener("viewTransferOrder",q);const z=localStorage.getItem("pendingTransferOrderView");return z&&(localStorage.removeItem("pendingTransferOrderView"),ht(z)),()=>{window.removeEventListener("viewTransferOrder",q)}},[ht]),C.useEffect(()=>{c||(H(1),we(1),Jt())},[c,Ve,y,b,S,x]),C.useEffect(()=>{!c&&r&&Jt()},[D,G,ee,F]);const He=async()=>{try{u(!0),f(null);const q=await ce.getOutlets({limit:1e3});if(q.success){const z=q.data.find(re=>re.outletName==="Kuwait City");z?a(z):f("Kuwait City not found")}else f("Failed to load outlet data")}catch(q){f(q instanceof Error?q.message:"Failed to load outlet data"),console.error("Error loading outlet data:",q)}finally{u(!1)}},gt=()=>{p(""),h(""),N(""),v(it==="finished-goods"?"productName":"materialName"),g("asc"),H(1),we(1),Jt()},Rt=async(q,z,re)=>{try{U(!0),console.log("Starting acceptance process for transfer order:",q),console.log("Edited items:",z),console.log("Transfer notes:",re),console.log("Fetching transfer order details...");const le=await ce.getTransferOrderById(q);if(!le.success)throw new Error(le.message||"Failed to fetch transfer order");const _e=le.data;console.log("Transfer order details:",_e);const be={approvedBy:"Kuwait City Manager",notes:re||"Transfer order approved by Kuwait City"};z&&z.length>0&&(be.editedItems=z,console.log("Including edited items in approval request:",z)),console.log("Approving transfer order...");const Ze=await ce.approveTransferOrder(q,be);if(console.log("Approval response:",Ze),Ze.success){const Te=z&&z.some((Ye,Dt)=>{var ze;return Ye.quantity!==((ze=_e.items[Dt])==null?void 0:ze.quantity)});alert(`Transfer order accepted successfully!${Te?" (Quantities modified)":""}`),k(!1),P(null),await Jt(),oe()}else throw new Error(`Failed to approve transfer order: ${Ze.message}`)}catch(le){console.error("Error accepting transfer order:",le),console.error("Error details:",le instanceof Error?le.message:"Unknown error"),alert(`Failed to accept transfer order: ${le instanceof Error?le.message:"Unknown error"}`)}finally{U(!1)}},Gt=async q=>{try{U(!0),console.log("Starting rejection process for transfer order:",q),console.log("Fetching transfer order details...");const z=await ce.getTransferOrderById(q);if(!z.success)throw new Error(z.message||"Failed to fetch transfer order");const re=z.data;console.log("Transfer order details:",re),console.log("Rejecting transfer order...");const le=await ce.rejectTransferOrder(q,{approvedBy:"Kuwait City Manager",notes:"Transfer order rejected by Kuwait City"});if(console.log("Rejection response:",le),le.success)alert("Transfer order rejected successfully!"),k(!1),P(null),oe();else throw new Error(`Failed to reject transfer order: ${le.message}`)}catch(z){console.error("Error rejecting transfer order:",z),console.error("Error details:",z instanceof Error?z.message:"Unknown error"),alert(`Failed to reject transfer order: ${z instanceof Error?z.message:"Unknown error"}`)}finally{U(!1)}},Jt=async()=>{try{console.log("Loading Kuwait City inventory from dedicated database");const q=await ce.getKuwaitCityRawMaterials({page:D,limit:G,search:Ve,subCategory:y,status:b,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(q.success)if(console.log("Loaded Kuwait City Raw Materials:",q.data),console.log("Raw Materials Pagination info:",q.pagination),q.pagination&&(ie(q.pagination.totalPages),ne(q.pagination.totalItems)),q.data&&q.data.length>0){const re=q.data.map(le=>({id:le._id||le.id,outletId:"kuwait-city",outletCode:"OUT-001",outletName:"Kuwait City",materialId:le._id,materialCode:le.materialCode,materialName:le.materialName,category:le.subCategory||le.category,unitOfMeasure:le.unitOfMeasure,unitPrice:le.unitPrice,currentStock:le.currentStock,reservedStock:0,availableStock:le.currentStock,minimumStock:le.minimumStock,maximumStock:le.maximumStock,reorderPoint:le.reorderPoint,totalValue:le.currentStock*le.unitPrice,location:"Main Storage",batchNumber:`KCBATCH-${le.materialCode}-${Date.now()}`,supplier:"Various Suppliers",lastUpdated:le.updatedAt,status:le.status,notes:le.notes||"",isActive:le.isActive}));i(re)}else console.log("No raw materials inventory found for Kuwait City"),i([]);else console.error("Failed to load raw materials inventory:","API Error"),i([]);const z=await ce.getKuwaitCityFinishedProducts({page:ee,limit:F,search:Ve,subCategory:y,status:b,sortBy:S==="productName"?"productName":S,sortOrder:x});if(z.success)if(console.log("Loaded Kuwait City Finished Products:",z.data),console.log("Finished Goods Pagination info:",z.pagination),z.pagination&&(ve(z.pagination.totalPages),de(z.pagination.totalItems)),z.data&&z.data.length>0){const re=z.data.map(le=>{var _e;return{id:le._id||le.id,outletId:"kuwait-city",outletCode:"OUT-001",outletName:"Kuwait City",productId:le._id,productCode:le.productCode,productName:le.productName,category:le.subCategory||le.category,unitOfMeasure:le.unitOfMeasure,unitPrice:le.unitPrice,costPrice:le.costPrice,currentStock:le.currentStock,reservedStock:0,availableStock:le.currentStock,minimumStock:le.minimumStock,maximumStock:le.maximumStock,reorderPoint:le.reorderPoint,totalValue:le.currentStock*le.unitPrice,productionDate:new Date().toISOString(),expiryDate:le.shelfLife?new Date(Date.now()+le.shelfLife*24*60*60*1e3).toISOString():new Date(Date.now()+6048e5).toISOString(),batchNumber:`KCFG-${le.productCode}-${Date.now()}`,storageLocation:"Main Storage",storageTemperature:((_e=le.storageRequirements)==null?void 0:_e.temperature)||"Room Temperature",qualityStatus:"Good",qualityNotes:"",status:le.status,transferSource:"Production",lastUpdated:le.updatedAt,notes:le.notes||"",isActive:le.isActive}});l(re)}else console.log("No finished goods inventory found for Kuwait City"),l([]);else console.error("Failed to load finished goods inventory:","API Error")}catch(q){f(q instanceof Error?q.message:"Failed to load inventory"),console.error("Error loading inventory:",q)}},Vt=async q=>{var re,le;const z=(re=q.target.files)==null?void 0:re[0];if(z)try{if(_(!0),it==="raw-materials"){const _e=z.name.toLowerCase();if(!(_e.endsWith(".xlsx")||_e.endsWith(".xls"))){alert("Please select an Excel file (.xlsx or .xls) for Raw Materials import");return}const be=await ce.importKuwaitCityRawMaterialsExcel(z);alert(be.message||"Raw materials import completed"),await Jt()}else if(it==="finished-goods"){const _e=z.name.toLowerCase();let be=[];if(_e.endsWith(".json")){const Te=await z.text(),Ye=JSON.parse(Te);be=Array.isArray(Ye)?Ye:Ye.products||[]}else if(_e.endsWith(".csv"))be=(await z.text()).split(`
`).filter(ze=>ze.trim()).slice(1).map(ze=>{const Ot=ze.split(",").map(_t=>_t.replace(/\"/g,"").trim());return{productCode:Ot[0]||Ot[1],productName:Ot[1]||Ot[2],subCategory:Ot[2]||"MAIN COURSES",unitOfMeasure:Ot[3]||"piece",unitPrice:parseFloat(Ot[4])||0,currentStock:parseFloat(Ot[5])||0}}).filter(ze=>ze.productCode&&ze.productName);else if(_e.endsWith(".xlsx")||_e.endsWith(".xls")){const Te=await z.arrayBuffer(),Ye=jf(Te,{type:"array"}),Dt=Ye.SheetNames[0],ze=Ye.Sheets[Dt];be=uI.sheet_to_json(ze,{defval:""}).map(_t=>{const Tt=I=>{const V=I.find(K=>Object.keys(_t).some(Q=>Q.toString().trim().toLowerCase()===K));if(!V)return;const L=Object.keys(_t).find(K=>K.toString().trim().toLowerCase()===V);return _t[L]},zr=(Tt(["product code","sku","code"])||"").toString().trim(),ct=(Tt(["product name","item name","name"])||"").toString().trim(),yr=(Tt(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim(),ue=(Tt(["unit of measure","unit","uom"])||"piece").toString().trim(),Ce=Tt(["unit price","price"]),We=Tt(["current stock","current quantity","quantity","qty"]);return{productCode:zr,productName:ct,subCategory:yr,category:yr,unitOfMeasure:ue,unitPrice:Number.parseFloat(String(Ce))||0,currentStock:Number.parseFloat(String(We))||0}}).filter(_t=>_t.productCode&&_t.productName)}else{alert("Please select an Excel (.xlsx/.xls), CSV or JSON file for Finished Products import");return}const Ze=await ce.importKuwaitCityFinishedProducts(be);alert(Ze.message||`Finished products import completed. Success: ${((le=Ze.data)==null?void 0:le.successCount)||0}`),await Jt()}}catch(_e){alert("Error importing file: "+(_e instanceof Error?_e.message:"Unknown error"))}finally{_(!1),E.current&&(E.current.value="")}},Ge=async()=>{try{j(!0),console.log("Starting export of Kuwait City raw materials..."),await ce.exportKuwaitCityRawMaterials({search:m,subCategory:y,status:b}),console.log("Export completed successfully")}catch(q){console.error("Error exporting raw materials:",q),alert(`Failed to export raw materials: ${q instanceof Error?q.message:"Unknown error"}`)}finally{j(!1)}},Xe=async()=>{try{j(!0),console.log("Starting export of Kuwait City finished goods..."),await ce.exportKuwaitCityFinishedProducts({search:m,subCategory:y,status:b}),console.log("Export completed successfully")}catch(q){console.error("Error exporting finished goods:",q),alert(`Failed to export finished goods: ${q instanceof Error?q.message:"Unknown error"}`)}finally{j(!1)}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Kuwait City..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:He,className:"btn-primary",children:"Retry"})]})});const jt=()=>{switch(it){case"raw-materials":return ye();case"finished-goods":return te();case"sales-orders":return ke();default:return $e()}},ye=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(tt,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{var q;return(q=E.current)==null?void 0:q.click()},className:"btn-secondary flex items-center",title:"Import raw materials from Excel (.xlsx/.xls)",disabled:O,children:O?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Import"]})}),n.jsxs("button",{onClick:Ge,disabled:w||O,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),w?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:q=>p(q.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsxs("select",{value:y,onChange:q=>h(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Categories"}),n.jsx("option",{value:"NON FOOD - PACKING",children:"NON FOOD - PACKING"}),n.jsx("option",{value:"Vegetables",children:"Vegetables"}),n.jsx("option",{value:"Dairy",children:"Dairy"})]}),n.jsxs("select",{value:b,onChange:q=>N(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:q=>v(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",pe>0?(D-1)*G+1:0," - ",Math.min(D*G,pe)," of ",pe," raw material items",(m||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:G,onChange:q=>{Z(Number(q.target.value)),H(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Jt,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(q=>q.materialId&&q.materialCode&&q.materialName).map(q=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",q.unitPrice?Number(q.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.currentStock})]},q.id))})]})}),X>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",D," of ",X]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>H(1),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>H(q=>Math.max(1,q-1)),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,X)},(q,z)=>{let re;return X<=5||D<=3?re=z+1:D>=X-2?re=X-4+z:re=D-2+z,n.jsx("button",{onClick:()=>H(re),className:`px-3 py-1 text-sm border rounded-md ${D===re?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:re},re)})}),n.jsx("button",{onClick:()=>H(q=>Math.min(X,q+1)),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>H(X),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),te=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(tt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{var q;return(q=E.current)==null?void 0:q.click()},className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON",disabled:O,children:O?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Import"]})}),n.jsxs("button",{onClick:Xe,disabled:w||O,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),w?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:q=>p(q.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsxs("select",{value:y,onChange:q=>h(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Categories"}),n.jsx("option",{value:"GATHERING",children:"GATHERING"}),n.jsx("option",{value:"HAPPY ENDINGS",children:"HAPPY ENDINGS"})]}),n.jsxs("select",{value:b,onChange:q=>N(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:q=>v(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",xe>0?(ee-1)*F+1:0," - ",Math.min(ee*F,xe)," of ",xe," finished goods items",(m||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:F,onChange:q=>{Ue(Number(q.target.value)),we(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Jt,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit of Measure"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(q=>q.productId&&q.productCode&&q.productName).map(q=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KWD ",q.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.currentStock}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${q.status==="In Stock"?"bg-green-100 text-green-800":q.status==="Low Stock"?"bg-yellow-100 text-yellow-800":q.status==="Out of Stock"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:q.status})})]},q.id))})]})}),R>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",ee," of ",R]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>we(1),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>we(q=>Math.max(1,q-1)),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,R)},(q,z)=>{let re;return R<=5||ee<=3?re=z+1:ee>=R-2?re=R-4+z:re=ee-2+z,n.jsx("button",{onClick:()=>we(re),className:`px-3 py-1 text-sm border rounded-md ${ee===re?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:re},re)})}),n.jsx("button",{onClick:()=>we(q=>Math.min(R,q+1)),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>we(R),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),ke=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"POS Sales"}),n.jsxs("button",{onClick:()=>e("/kuwait-city/pos-sales/create-order",{state:{outletName:"Kuwait City"}}),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Point of Sale system for Kuwait City outlet"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/pos-sales/create-order",{state:{outletName:"Kuwait City"}}),children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Fr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"New Order"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create a new sales order"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(yE,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Order History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View past orders"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Mb,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View payment summaries"})]})]})})]})]})}),$e=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-blue-50 to-green-50 border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(tt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Raw Materials"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(q=>q.materialId&&q.materialCode&&q.materialName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(tt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Finished Goods"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(q=>q.productId&&q.productCode&&q.productName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",(s.reduce((q,z)=>q+z.totalValue,0)+o.reduce((q,z)=>q+z.totalValue,0)).toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-yellow-500",children:n.jsx($o,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(q=>q.status==="Low Stock").length+o.filter(q=>q.status==="Low Stock").length})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(En,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kuwait City"}),n.jsxs("p",{className:"text-gray-600",children:[it==="raw-materials"?"Raw Materials Inventory":it==="finished-goods"?"Finished Goods Inventory":it==="sales-orders"?"Sales Orders":"Premium dining restaurant"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>{He(),Jt()},className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),it==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/kuwait-city/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),it==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/kuwait-city/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:mt(),onMarkAsRead:Y,onMarkAllAsRead:B,onClearAll:ae,onRefresh:oe,onViewTransferOrder:ht})]})]}),jt(),n.jsx("input",{ref:E,type:"file",accept:it==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:Vt,className:"hidden",disabled:O}),n.jsx(Zc,{isOpen:T,onClose:()=>{k(!1),P(null)},transferOrder:A,onAccept:Rt,onReject:Gt,loading:M})]})},bl=()=>{const e=lt(),t=Ta(),[r,a]=C.useState(null),[s,i]=C.useState([]),[o,l]=C.useState([]),[c,u]=C.useState(!0),[d,f]=C.useState(null),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState(""),[S,v]=C.useState("materialName"),[x,g]=C.useState("asc"),[w,j]=C.useState(!1),O=C.useRef(null),[_,E]=C.useState(!1),{notifications:T,markAsRead:k,markAllAsRead:A,clearAll:P,refreshNotifications:M}=Js("Vibes Complex"),[U,W]=C.useState(!1),[Y,B]=C.useState(null),[ae,oe]=C.useState(!1),[D,H]=C.useState(1),[G,Z]=C.useState(20),[X,ie]=C.useState(1),[pe,ne]=C.useState(0),[ee,we]=C.useState(1),[F,Ue]=C.useState(20),[R,ve]=C.useState(1),[xe,de]=C.useState(0),Ve=eu(m,500);C.useEffect(()=>{console.log(" Vibes Complex: Notifications updated:",T),console.log(` Vibes Complex: Number of notifications: ${T.length}`),T.length>0&&console.log(" Vibes Complex: First notification:",T[0])},[T]),C.useEffect(()=>{console.log(' Vibes Complex: Component mounted, loading notifications for: "Vibes Complex"'),console.log(` Vibes Complex: Current URL path: ${t.pathname}`),console.log(" Vibes Complex: Component file: MarinaWalkCafe.tsx")},[]);const ft=()=>{const q=t.pathname;return q.includes("/raw-materials")?"raw-materials":q.includes("/finished-goods")?"finished-goods":q.includes("/sales-orders")?"sales-orders":"overview"},it=ft(),mt=()=>{const q=ft();console.log(` Vibes Complex: Current section: ${q}`),console.log(" Vibes Complex: All notifications:",T);let z=[];return q==="raw-materials"?z=T.filter(re=>re.isTransferOrder&&(re.itemType==="Raw Material"||re.itemType==="Mixed")):q==="finished-goods"?z=T.filter(re=>re.isTransferOrder&&(re.itemType==="Finished Goods"||re.itemType==="Mixed")):z=T,console.log(` Vibes Complex: Filtered notifications for ${q}:`,z),z},ht=se.useCallback(async q=>{try{console.log(" Vibes Complex: handleViewTransferOrder called with transferOrderId:",q),oe(!0);const z=await ce.getTransferOrderById(q);if(z.success)B(z.data),W(!0),console.log(" Vibes Complex: Transfer order modal opened successfully");else throw new Error(z.message||"Failed to load transfer order")}catch(z){console.error("Error loading transfer order:",z),alert("Failed to load transfer order details")}finally{oe(!1)}},[]);C.useEffect(()=>{He(),Ge();const q=re=>{const{transferOrderId:le}=re.detail;le&&ht(le)};window.addEventListener("viewTransferOrder",q);const z=localStorage.getItem("pendingTransferOrderView");return z&&(localStorage.removeItem("pendingTransferOrderView"),ht(z)),()=>{window.removeEventListener("viewTransferOrder",q)}},[ht]),C.useEffect(()=>{T.length>0&&T.some(z=>{var re,le,_e;return!z.read&&(((re=z.title)==null?void 0:re.includes("Items Received from Central Kitchen"))||((le=z.title)==null?void 0:le.includes("Transfer from Central Kitchen"))||((_e=z.title)==null?void 0:_e.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for Vibes Complex, refreshing inventory..."),Ge())},[T]),C.useEffect(()=>{const q=setInterval(()=>{console.log(" Vibes Complex: Auto-refreshing notifications..."),M()},5e3);return()=>clearInterval(q)},[M]),C.useEffect(()=>{c||Ge()},[Ve,y,b,S,x,D,G,ee,F]);const He=async()=>{try{u(!0),f(null);const q=await ce.getOutlets({limit:1e3});if(q.success){const z=q.data.find(re=>re.outletName==="Vibes Complex");z?(a(z),await Ge()):f("Vibes Complex not found")}else f("Failed to load outlet data")}catch(q){f(q instanceof Error?q.message:"Failed to load outlet data"),console.error("Error loading outlet data:",q)}finally{u(!1)}},gt=async(q,z,re)=>{try{oe(!0),console.log("Starting acceptance process for transfer order:",q),console.log("Edited items:",z),console.log("Transfer notes:",re),console.log("Fetching transfer order details...");const le=await ce.getTransferOrderById(q);if(!le.success)throw new Error(le.message||"Failed to fetch transfer order");const _e=le.data;console.log("Transfer order details:",_e);const be={approvedBy:"Vibes Complex Manager",notes:re||"Transfer order approved by Vibes Complex"};z&&z.length>0&&(be.editedItems=z,console.log("Including edited items in approval request:",z)),console.log("Approving transfer order...");const Ze=await ce.approveTransferOrder(q,be);if(console.log("Approval response:",Ze),Ze.success){const Te=z&&z.some((Ye,Dt)=>{var ze;return Ye.quantity!==((ze=_e.items[Dt])==null?void 0:ze.quantity)});alert(`Transfer order accepted successfully!${Te?" (Quantities modified)":""}`),W(!1),B(null),await Ge(),M()}else throw new Error(`Failed to approve transfer order: ${Ze.message}`)}catch(le){console.error("Error accepting transfer order:",le),console.error("Error details:",le instanceof Error?le.message:"Unknown error"),alert(`Failed to accept transfer order: ${le instanceof Error?le.message:"Unknown error"}`)}finally{oe(!1)}},Rt=async q=>{try{oe(!0);const z=await ce.getTransferOrderById(q);if(!z.success)throw new Error(z.message||"Failed to fetch transfer order");const re=await ce.rejectTransferOrder(q,{approvedBy:"Vibes Complex Manager",notes:"Transfer order rejected by Vibes Complex"});if(re.success)alert("Transfer order rejected successfully!"),W(!1),B(null),M();else throw new Error(`Failed to reject transfer order: ${re.message}`)}catch(z){console.error("Error rejecting transfer order:",z),alert(`Failed to reject transfer order: ${z instanceof Error?z.message:"Unknown error"}`)}finally{oe(!1)}},Gt=()=>{p(""),h(""),N(""),v("materialName"),g("asc"),H(1),we(1),Ge()},Jt=async()=>{try{j(!0),await ce.exportVibesComplexRawMaterials({search:m,subCategory:y,status:b})}catch(q){console.error("Error exporting raw materials:",q),alert("Error exporting raw materials: "+(q instanceof Error?q.message:"Unknown error"))}finally{j(!1)}},Vt=async()=>{try{j(!0),await ce.exportVibesComplexFinishedProducts({search:m,subCategory:y,status:b})}catch(q){console.error("Error exporting finished goods:",q),alert("Error exporting finished goods: "+(q instanceof Error?q.message:"Unknown error"))}finally{j(!1)}},Ge=async()=>{var q,z;try{console.log("Loading Vibes Complex inventory from dedicated database"),console.log("   Search params:",{debouncedSearchTerm:Ve,filterCategory:y,filterStatus:b,sortBy:S,sortOrder:x});const re=await ce.getVibesComplexRawMaterials({page:D,limit:G,search:Ve,subCategory:y,status:b,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(console.log(" Raw Materials API Response:",{success:re.success,dataLength:((q=re.data)==null?void 0:q.length)||0,pagination:re.pagination}),re.success)if(console.log(" Loaded Vibes Complex Raw Materials:",((z=re.data)==null?void 0:z.length)||0,"items"),re.data&&re.data.length>0){const _e=re.data.map(be=>{var Ze;return{id:be._id||be.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"",outletName:(r==null?void 0:r.outletName)||"Vibes Complex",materialId:be._id,materialCode:be.materialCode,materialName:be.materialName,category:be.subCategory||be.category,unitOfMeasure:be.unitOfMeasure,unitPrice:be.unitPrice||0,currentStock:be.currentStock||0,reservedStock:0,availableStock:be.currentStock||0,minimumStock:be.minimumStock||0,maximumStock:be.maximumStock||0,reorderPoint:be.reorderPoint||0,totalValue:(be.currentStock||0)*(be.unitPrice||0),location:((Ze=be.storageRequirements)==null?void 0:Ze.location)||"Main Storage",batchNumber:be.batchNumber||"",supplier:be.supplierName||"",lastUpdated:be.lastUpdated||be.updatedAt,status:be.status,notes:be.notes||"",isActive:be.isActive}});i(_e),re.pagination&&(ie(re.pagination.totalPages),ne(re.pagination.totalItems))}else console.log("No raw materials inventory found for Vibes Complex"),i([]),ie(1),ne(0);else console.error("Failed to load raw materials inventory:",re.error||"API Error"),i([]),ie(1),ne(0);const le=await ce.getVibesComplexFinishedProducts({page:ee,limit:F,search:Ve,subCategory:y,status:b,sortBy:S==="productName"?"productName":S,sortOrder:x});if(le.success)if(console.log("Loaded Vibes Complex Finished Products:",le.data),le.data&&le.data.length>0){const _e=le.data.map(be=>({id:be._id||be.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"",outletName:(r==null?void 0:r.outletName)||"Vibes Complex",productId:be._id,productCode:be.productCode,productName:be.productName,category:be.subCategory||be.category,unitOfMeasure:be.unitOfMeasure,unitPrice:be.unitPrice||0,costPrice:be.costPrice||0,currentStock:be.currentStock||0,reservedStock:0,availableStock:be.currentStock||0,minimumStock:be.minimumStock||0,maximumStock:be.maximumStock||0,reorderPoint:be.reorderPoint||0,totalValue:(be.currentStock||0)*(be.unitPrice||0),productionDate:be.productionDate||new Date().toISOString(),expiryDate:be.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:be.batchNumber||"",storageLocation:be.storageLocation||"Cold Storage",storageTemperature:be.storageTemperature||"Cold",qualityStatus:be.qualityStatus||"Good",qualityNotes:be.qualityNotes||"",status:be.status,transferSource:"Transfer",lastUpdated:be.lastUpdated||be.updatedAt,notes:be.notes||"",isActive:be.isActive}));l(_e),le.pagination&&(ve(le.pagination.totalPages),de(le.pagination.totalItems))}else console.log("No finished goods inventory found for Vibes Complex"),l([]),ve(1),de(0);else console.error("Failed to load finished goods inventory:",le.error||"API Error"),l([]),ve(1),de(0)}catch(re){f(re instanceof Error?re.message:"Failed to load inventory"),console.error("Error loading inventory:",re)}},Xe=async q=>{var re,le;const z=(re=q.target.files)==null?void 0:re[0];if(z)try{E(!0);const _e=z.name.toLowerCase(),be=ft();if(be==="raw-materials"){if(!(_e.endsWith(".xlsx")||_e.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const Ze=await ce.importVibeComplexRawMaterialsExcel(z);alert(Ze.message||"Raw materials import completed"),await Ge()}else if(be==="finished-goods"){let Ze=[];if(_e.endsWith(".json")){const Ye=await z.text(),Dt=JSON.parse(Ye);Ze=Array.isArray(Dt)?Dt:Dt.products||[]}else if(_e.endsWith(".csv"))Ze=(await z.text()).split(`
`).filter(Ot=>Ot.trim()).slice(1).map(Ot=>{const _t=Ot.split(",").map(Tt=>Tt.replace(/\"/g,"").trim());return{productCode:_t[0]||_t[1],productName:_t[1]||_t[2],subCategory:_t[2]||"MAIN COURSES",category:_t[2]||"MAIN COURSES",unitOfMeasure:_t[3]||"piece",unitPrice:parseFloat(_t[4])||0,currentStock:parseFloat(_t[5])||0}}).filter(Ot=>Ot.productCode&&Ot.productName);else if(_e.endsWith(".xlsx")||_e.endsWith(".xls")){const Ye=await z.arrayBuffer(),Dt=await cf(()=>Promise.resolve().then(()=>kf),void 0),ze=Dt.read(Ye,{type:"array"}),Ot=ze.Sheets[ze.SheetNames[0]];Ze=Dt.utils.sheet_to_json(Ot,{defval:""}).map(Tt=>{const zr=ue=>ue.toString().trim().toLowerCase(),ct=ue=>{const Ce=Object.keys(Tt).find(We=>ue.includes(zr(We)));return Ce?Tt[Ce]:void 0},yr=(ct(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(ct(["product code","sku","code"])||"").toString().trim(),productName:(ct(["product name","item name","name"])||"").toString().trim(),subCategory:yr,category:yr,unitOfMeasure:(ct(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(ct(["unit price","price"])))||0,currentStock:Number.parseFloat(String(ct(["current stock","current quantity","quantity","qty"])))||0}}).filter(Tt=>Tt.productCode&&Tt.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const Te=await ce.importVibeComplexFinishedProducts(Ze);alert(Te.message||`Finished products import completed. Success: ${((le=Te.data)==null?void 0:le.successCount)||0}`),await Ge()}}catch(_e){alert("Error importing file: "+(_e instanceof Error?_e.message:"Unknown error"))}finally{E(!1),O.current&&(O.current.value="")}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Vibes Complex..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:He,className:"btn-primary",children:"Retry"})]})});const jt=()=>{switch(it){case"raw-materials":return ye();case"finished-goods":return te();case"sales-orders":return ke();default:return $e()}},ye=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(tt,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var q;return(q=O.current)==null?void 0:q.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ha,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:Jt,disabled:w||_,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),w?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:q=>p(q.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:q=>h(q.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:b,onChange:q=>N(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:q=>v(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",pe>0?(D-1)*G+1:0," - ",Math.min(D*G,pe)," of ",pe," raw material items",(Ve||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:G,onChange:q=>{Z(Number(q.target.value)),H(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(q=>q.materialId&&q.materialCode&&q.materialName).map(q=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",q.unitPrice?Number(q.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.currentStock})]},q.id))})]})}),X>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",D," of ",X]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>H(1),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>H(q=>Math.max(1,q-1)),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,X)},(q,z)=>{let re;return X<=5||D<=3?re=z+1:D>=X-2?re=X-4+z:re=D-2+z,n.jsx("button",{onClick:()=>H(re),className:`px-3 py-1 text-sm border rounded-md ${D===re?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:re},re)})}),n.jsx("button",{onClick:()=>H(q=>Math.min(X,q+1)),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>H(X),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),te=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(tt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var q;return(q=O.current)==null?void 0:q.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ha,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:Vt,disabled:w||_,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),w?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:q=>p(q.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:q=>h(q.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:b,onChange:q=>N(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:q=>v(q.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",xe>0?(ee-1)*F+1:0," - ",Math.min(ee*F,xe)," of ",xe," finished goods items",(Ve||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:F,onChange:q=>{Ue(Number(q.target.value)),we(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit of Measure"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(q=>q.productId&&q.productCode&&q.productName).map(q=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KWD ",q.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.currentStock}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${q.status==="In Stock"?"bg-green-100 text-green-800":q.status==="Low Stock"?"bg-yellow-100 text-yellow-800":q.status==="Out of Stock"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:q.status})})]},q.id))})]})}),R>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",ee," of ",R]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>we(1),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>we(q=>Math.max(1,q-1)),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,R)},(q,z)=>{let re;return R<=5||ee<=3?re=z+1:ee>=R-2?re=R-4+z:re=ee-2+z,n.jsx("button",{onClick:()=>we(re),className:`px-3 py-1 text-sm border rounded-md ${ee===re?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:re},re)})}),n.jsx("button",{onClick:()=>we(q=>Math.min(R,q+1)),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>we(R),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),ke=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"POS Sales"}),n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/pos-sales/create-order",{state:{outletName:"360 Mall"}}),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Point of Sale system for 360 Mall outlet"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/pos-sales/create-order",{state:{outletName:"360 Mall"}}),children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Fr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"New Order"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create a new sales order"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(yE,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Order History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View past orders"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Mb,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View payment summaries"})]})]})})]})]})}),$e=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Fm,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(tt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Raw Materials"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(q=>q.materialId&&q.materialCode&&q.materialName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(tt,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Finished Goods"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.filter(q=>q.productId&&q.productCode&&q.productName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(Fr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",(s.reduce((q,z)=>q+z.totalValue,0)+o.reduce((q,z)=>q+z.totalValue,0)).toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-yellow-500",children:n.jsx($o,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(q=>q.status==="Low Stock").length+o.filter(q=>q.status==="Low Stock").length})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Fm,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(r==null?void 0:r.outletName)||"Vibes Complex"}),n.jsxs("p",{className:"text-gray-600",children:[it==="raw-materials"?"Raw Materials Inventory":it==="finished-goods"?"Finished Goods Inventory":it==="sales-orders"?"Sales Orders":"Cozy waterfront cafe"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:He,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),it==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/vibes-complex/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),it==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/vibes-complex/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:mt(),onMarkAsRead:k,onMarkAllAsRead:A,onClearAll:P,onRefresh:M,onViewTransferOrder:ht})]})]}),jt(),n.jsx("input",{ref:O,type:"file",accept:it==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:Xe,className:"hidden",disabled:_}),n.jsx(Zc,{isOpen:U,onClose:()=>{W(!1),B(null)},transferOrder:Y,onAccept:gt,onReject:Rt,loading:ae})]})},Kg=()=>{const e=lt(),t=Ta(),[r,a]=C.useState(null),[s,i]=C.useState([]),[o,l]=C.useState([]),[c,u]=C.useState(!0),[d,f]=C.useState(null),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState(""),[S,v]=C.useState("materialName"),[x,g]=C.useState("asc"),[w,j]=C.useState(!1),O=C.useRef(null),[_,E]=C.useState(!1),{notifications:T,markAsRead:k,markAllAsRead:A,clearAll:P,refreshNotifications:M}=Js("360 Mall"),[U,W]=C.useState(!1),[Y,B]=C.useState(null),[ae,oe]=C.useState(!1),[D,H]=C.useState(1),[G,Z]=C.useState(20),[X,ie]=C.useState(1),[pe,ne]=C.useState(0),[ee,we]=C.useState(1),[F,Ue]=C.useState(20),[R,ve]=C.useState(1),[xe,de]=C.useState(0),Ve=eu(m,500),ft=()=>{const z=it();console.log(` 360 Mall: Current section: ${z}`),console.log(" 360 Mall: All notifications:",T);let re=[];return z==="raw-materials"?re=T.filter(le=>le.isTransferOrder&&(le.itemType==="Raw Material"||le.itemType==="Mixed")):z==="finished-goods"?re=T.filter(le=>le.isTransferOrder&&(le.itemType==="Finished Goods"||le.itemType==="Mixed")):re=T,console.log(` 360 Mall: Filtered notifications for ${z}:`,re),re},it=()=>{const z=t.pathname;return z.includes("/raw-materials")?"raw-materials":z.includes("/finished-goods")?"finished-goods":z.includes("/sales-orders")?"sales-orders":"overview"},mt=it(),ht=se.useCallback(async z=>{try{console.log(" 360 Mall: handleViewTransferOrder called with transferOrderId:",z),oe(!0);const re=await ce.getTransferOrderById(z);if(re.success)B(re.data),W(!0),console.log(" 360 Mall: Transfer order modal opened successfully");else throw new Error(re.message||"Failed to load transfer order")}catch(re){console.error("Error loading transfer order:",re),alert("Failed to load transfer order details")}finally{oe(!1)}},[]);C.useEffect(()=>{He(),Ge();const z=le=>{const{transferOrderId:_e}=le.detail;_e&&ht(_e)};window.addEventListener("viewTransferOrder",z);const re=localStorage.getItem("pendingTransferOrderView");return re&&(localStorage.removeItem("pendingTransferOrderView"),ht(re)),()=>{window.removeEventListener("viewTransferOrder",z)}},[ht]),C.useEffect(()=>{console.log(" 360 Mall: Notifications updated:",T),console.log(` 360 Mall: Number of notifications: ${T.length}`),T.length>0&&console.log(" 360 Mall: First notification:",T[0])},[T]),C.useEffect(()=>{console.log(' 360 Mall: Component mounted, loading notifications for: "360 Mall"')},[]),C.useEffect(()=>{c||Ge()},[Ve,y,b,S,x,D,G,ee,F]),C.useEffect(()=>{T.length>0&&T.some(re=>{var le,_e,be;return!re.read&&(((le=re.title)==null?void 0:le.includes("Items Received from Central Kitchen"))||((_e=re.title)==null?void 0:_e.includes("Transfer from Central Kitchen"))||((be=re.title)==null?void 0:be.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for 360 Mall, refreshing inventory..."),Ge())},[T]),C.useEffect(()=>{const z=setInterval(()=>{console.log(" 360 Mall: Auto-refreshing notifications..."),M()},5e3);return()=>clearInterval(z)},[M]);const He=async()=>{try{u(!0),f(null);const z=await ce.getOutlets({limit:1e3});if(z.success){const re=z.data.find(le=>le.outletName==="360 Mall");re?(a(re),await Ge()):f("360 Mall not found")}else f("Failed to load outlet data")}catch(z){f(z instanceof Error?z.message:"Failed to load outlet data"),console.error("Error loading outlet data:",z)}finally{u(!1)}},gt=async(z,re,le)=>{try{oe(!0),console.log("Starting acceptance process for transfer order:",z),console.log("Edited items:",re),console.log("Transfer notes:",le),console.log("Fetching transfer order details...");const _e=await ce.getTransferOrderById(z);if(!_e.success)throw new Error(_e.message||"Failed to fetch transfer order");const be=_e.data;console.log("Transfer order details:",be);const Ze={approvedBy:"360 Mall Manager",notes:le||"Transfer order approved by 360 Mall"};re&&re.length>0&&(Ze.editedItems=re,console.log("Including edited items in approval request:",re)),console.log("Approving transfer order...");const Te=await ce.approveTransferOrder(z,Ze);if(console.log("Approval response:",Te),Te.success){const Ye=re&&re.some((Dt,ze)=>{var Ot;return Dt.quantity!==((Ot=be.items[ze])==null?void 0:Ot.quantity)});alert(`Transfer order accepted successfully!${Ye?" (Quantities modified)":""}`),W(!1),B(null),await Ge(),M()}else throw new Error(`Failed to approve transfer order: ${Te.message}`)}catch(_e){console.error("Error accepting transfer order:",_e),console.error("Error details:",_e instanceof Error?_e.message:"Unknown error"),alert(`Failed to accept transfer order: ${_e instanceof Error?_e.message:"Unknown error"}`)}finally{oe(!1)}},Rt=async z=>{try{oe(!0);const re=await ce.getTransferOrderById(z);if(!re.success)throw new Error(re.message||"Failed to fetch transfer order");const le=await ce.rejectTransferOrder(z,{approvedBy:"360 Mall Manager",notes:"Transfer order rejected by 360 Mall"});if(le.success)alert("Transfer order rejected successfully!"),W(!1),B(null),M();else throw new Error(`Failed to reject transfer order: ${le.message}`)}catch(re){console.error("Error rejecting transfer order:",re),alert(`Failed to reject transfer order: ${re instanceof Error?re.message:"Unknown error"}`)}finally{oe(!1)}},Gt=()=>{p(""),h(""),N(""),v("materialName"),g("asc"),H(1),we(1),Ge()},Jt=async()=>{try{j(!0),await ce.exportMall360RawMaterials({search:m,subCategory:y,status:b})}catch(z){console.error("Error exporting raw materials:",z),alert("Error exporting raw materials: "+(z instanceof Error?z.message:"Unknown error"))}finally{j(!1)}},Vt=async()=>{try{j(!0),await ce.exportMall360FinishedProducts({search:m,subCategory:y,status:b})}catch(z){console.error("Error exporting finished goods:",z),alert("Error exporting finished goods: "+(z instanceof Error?z.message:"Unknown error"))}finally{j(!1)}},Ge=async()=>{var z,re,le;try{console.log(" Loading 360 Mall inventory from dedicated database"),console.log("   Search params:",{debouncedSearchTerm:Ve,filterCategory:y,filterStatus:b,sortBy:S,sortOrder:x});const _e=await ce.get360MallRawMaterials({page:D,limit:G,search:Ve,subCategory:y,status:b,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(console.log(" Raw Materials API Response:",{success:_e.success,dataLength:((z=_e.data)==null?void 0:z.length)||0,pagination:_e.pagination}),_e.success)if(console.log(" Loaded 360 Mall Raw Materials:",((re=_e.data)==null?void 0:re.length)||0,"items"),console.log("   First few items:",(le=_e.data)==null?void 0:le.slice(0,3)),_e.data&&_e.data.length>0){const Ze=_e.data.map(Te=>{var Ye;return{id:Te._id||Te.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"OUT-003",outletName:(r==null?void 0:r.outletName)||"360 Mall",materialId:Te._id,materialCode:Te.materialCode,materialName:Te.materialName,category:Te.subCategory||Te.category,unitOfMeasure:Te.unitOfMeasure,unitPrice:Te.unitPrice||0,currentStock:Te.currentStock||0,reservedStock:0,availableStock:Te.currentStock||0,minimumStock:Te.minimumStock||0,maximumStock:Te.maximumStock||0,reorderPoint:Te.reorderPoint||0,totalValue:(Te.currentStock||0)*(Te.unitPrice||0),location:((Ye=Te.storageRequirements)==null?void 0:Ye.location)||"Main Storage",batchNumber:Te.batchNumber||"",supplier:Te.supplierName||"",lastUpdated:Te.lastUpdated||Te.updatedAt,status:Te.status,notes:Te.notes||"",isActive:Te.isActive}});i(Ze),_e.pagination&&(ie(_e.pagination.totalPages),ne(_e.pagination.totalItems))}else console.log("No raw materials inventory found for 360 Mall"),i([]),ie(1),ne(0);else console.error("Failed to load raw materials inventory:",_e.error||"API Error"),i([]),ie(1),ne(0);const be=await ce.get360MallFinishedProducts({page:ee,limit:F,search:Ve,subCategory:y,status:b,sortBy:S==="productName"?"productName":S,sortOrder:x});if(be.success)if(console.log("Loaded 360 Mall Finished Products:",be.data),be.data&&be.data.length>0){const Ze=be.data.map(Te=>({id:Te._id||Te.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"OUT-003",outletName:(r==null?void 0:r.outletName)||"360 Mall",productId:Te._id,productCode:Te.productCode,productName:Te.productName,category:Te.subCategory||Te.category,unitOfMeasure:Te.unitOfMeasure,unitPrice:Te.unitPrice||0,costPrice:Te.costPrice||0,currentStock:Te.currentStock||0,reservedStock:0,availableStock:Te.currentStock||0,minimumStock:Te.minimumStock||0,maximumStock:Te.maximumStock||0,reorderPoint:Te.reorderPoint||0,totalValue:(Te.currentStock||0)*(Te.unitPrice||0),productionDate:Te.productionDate||new Date().toISOString(),expiryDate:Te.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:Te.batchNumber||"",storageLocation:Te.storageLocation||"Cold Storage",storageTemperature:Te.storageTemperature||"Cold",qualityStatus:Te.qualityStatus||"Good",qualityNotes:Te.qualityNotes||"",status:Te.status,transferSource:"Transfer",lastUpdated:Te.lastUpdated||Te.updatedAt,notes:Te.notes||"",isActive:Te.isActive}));l(Ze),be.pagination&&(ve(be.pagination.totalPages),de(be.pagination.totalItems))}else console.log("No finished goods inventory found for 360 Mall"),l([]),ve(1),de(0);else console.error("Failed to load finished goods inventory:",be.error||"API Error"),l([]),ve(1),de(0)}catch(_e){f(_e instanceof Error?_e.message:"Failed to load inventory"),console.error("Error loading inventory:",_e)}},Xe=z=>{switch(z){case"In Stock":return"bg-green-100 text-green-800";case"Low Stock":return"bg-yellow-100 text-yellow-800";case"Out of Stock":return"bg-red-100 text-red-800";case"Overstock":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading 360 Mall..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:He,className:"btn-primary",children:"Retry"})]})});const jt=()=>{switch(mt){case"raw-materials":return te();case"finished-goods":return ke();case"sales-orders":return $e();default:return q()}},ye=async z=>{var le,_e;const re=(le=z.target.files)==null?void 0:le[0];if(re)try{E(!0);const be=re.name.toLowerCase(),Ze=it();if(Ze==="raw-materials"){if(!(be.endsWith(".xlsx")||be.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const Te=await ce.importMall360RawMaterialsExcel(re);alert(Te.message||"Raw materials import completed"),await Ge()}else if(Ze==="finished-goods"){let Te=[];if(be.endsWith(".json")){const Dt=await re.text(),ze=JSON.parse(Dt);Te=Array.isArray(ze)?ze:ze.products||[]}else if(be.endsWith(".csv"))Te=(await re.text()).split(`
`).filter(_t=>_t.trim()).slice(1).map(_t=>{const Tt=_t.split(",").map(zr=>zr.replace(/\"/g,"").trim());return{productCode:Tt[0]||Tt[1],productName:Tt[1]||Tt[2],subCategory:Tt[2]||"MAIN COURSES",category:Tt[2]||"MAIN COURSES",unitOfMeasure:Tt[3]||"piece",unitPrice:parseFloat(Tt[4])||0,currentStock:parseFloat(Tt[5])||0}}).filter(_t=>_t.productCode&&_t.productName);else if(be.endsWith(".xlsx")||be.endsWith(".xls")){const Dt=await re.arrayBuffer(),ze=await cf(()=>Promise.resolve().then(()=>kf),void 0),Ot=ze.read(Dt,{type:"array"}),_t=Ot.Sheets[Ot.SheetNames[0]];Te=ze.utils.sheet_to_json(_t,{defval:""}).map(zr=>{const ct=Ce=>Ce.toString().trim().toLowerCase(),yr=Ce=>{const We=Object.keys(zr).find(I=>Ce.includes(ct(I)));return We?zr[We]:void 0},ue=(yr(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(yr(["product code","sku","code"])||"").toString().trim(),productName:(yr(["product name","item name","name"])||"").toString().trim(),subCategory:ue,category:ue,unitOfMeasure:(yr(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(yr(["unit price","price"])))||0,currentStock:Number.parseFloat(String(yr(["current stock","current quantity","quantity","qty"])))||0}}).filter(zr=>zr.productCode&&zr.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const Ye=await ce.importMall360FinishedProducts(Te);alert(Ye.message||`Finished products import completed. Success: ${((_e=Ye.data)==null?void 0:_e.successCount)||0}`),await Ge()}}catch(be){console.error("Error importing file:",be),alert("Error importing file. Please check the file format.")}finally{E(!1),O.current&&(O.current.value="")}},te=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var z;return(z=O.current)==null?void 0:z.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ha,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:Jt,disabled:w||_,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),w?"Exporting...":"Export"]})]})]}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:z=>p(z.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:z=>h(z.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:b,onChange:z=>N(z.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:z=>v(z.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",pe>0?(D-1)*G+1:0," - ",Math.min(D*G,pe)," of ",pe," raw material items",(Ve||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:G,onChange:z=>{Z(Number(z.target.value)),H(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(z=>z.materialId&&z.materialCode&&z.materialName).map(z=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",z.unitPrice?Number(z.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.currentStock})]},z.id))})]})}),X>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",D," of ",X]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>H(1),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>H(z=>Math.max(1,z-1)),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,X)},(z,re)=>{let le;return X<=5||D<=3?le=re+1:D>=X-2?le=X-4+re:le=D-2+re,n.jsx("button",{onClick:()=>H(le),className:`px-3 py-1 text-sm border rounded-md ${D===le?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:le},le)})}),n.jsx("button",{onClick:()=>H(z=>Math.min(X,z+1)),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>H(X),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),ke=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(tt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var z;return(z=O.current)==null?void 0:z.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ha,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:Vt,disabled:w||_,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),w?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:z=>p(z.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:z=>h(z.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:b,onChange:z=>N(z.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:z=>v(z.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",xe>0?(ee-1)*F+1:0," - ",Math.min(ee*F,xe)," of ",xe," finished goods items",(Ve||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:F,onChange:z=>{Ue(Number(z.target.value)),we(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:Gt,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:Ge,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(z=>z.productId&&z.productCode&&z.productName).map(z=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.unitOfMeasure}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.currentStock}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",z.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Xe(z.status)}`,children:z.status})})]},z.id))})]})}),R>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",ee," of ",R]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>we(1),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>we(z=>Math.max(1,z-1)),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,R)},(z,re)=>{let le;return R<=5||ee<=3?le=re+1:ee>=R-2?le=R-4+re:le=ee-2+re,n.jsx("button",{onClick:()=>we(le),className:`px-3 py-1 text-sm border rounded-md ${ee===le?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:le},le)})}),n.jsx("button",{onClick:()=>we(z=>Math.min(R,z+1)),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>we(R),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),$e=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Sales orders functionality will be implemented here."})]})}),q=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-orange-50 to-red-50 border-orange-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Rm,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Rm,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(r==null?void 0:r.outletName)||"360 Mall"}),n.jsxs("p",{className:"text-gray-600",children:[mt==="raw-materials"?"Raw Materials Inventory":mt==="finished-goods"?"Finished Goods Inventory":mt==="sales-orders"?"Sales Orders":"Fast-service food court outlet"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:He,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),mt==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/360-mall/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),mt==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/360-mall/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:ft(),onMarkAsRead:k,onMarkAllAsRead:A,onClearAll:P,onRefresh:M,onViewTransferOrder:ht})]})]}),jt(),n.jsx("input",{ref:O,type:"file",accept:mt==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:ye,className:"hidden",disabled:_}),n.jsx(Zc,{isOpen:U,onClose:()=>{W(!1),B(null)},transferOrder:Y,onAccept:gt,onReject:Rt,loading:ae})]})},wl=()=>{const e=lt(),t=Ta(),[r,a]=C.useState(null),[s,i]=C.useState([]),[o,l]=C.useState([]),[c,u]=C.useState(!0),[d,f]=C.useState(null),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState(""),[S,v]=C.useState("materialName"),[x,g]=C.useState("asc"),[w,j]=C.useState(!1),[O,_]=C.useState(!1),E=C.useRef(null),{notifications:T,markAsRead:k,markAllAsRead:A,clearAll:P,refreshNotifications:M}=Js("Taiba Hospital"),[U,W]=C.useState(!1),[Y,B]=C.useState(null),[ae,oe]=C.useState(!1),[D,H]=C.useState(1),[G,Z]=C.useState(20),[X,ie]=C.useState(1),[pe,ne]=C.useState(0),[ee,we]=C.useState(1),[F,Ue]=C.useState(20),[R,ve]=C.useState(1),[xe,de]=C.useState(0),Ve=eu(m,500),[ft,it]=C.useState(null),[mt,ht]=C.useState(!1),[He,gt]=C.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[Rt,Gt]=C.useState(null),[Jt,Vt]=C.useState(!1),[Ge,Xe]=C.useState({currentStock:"",unitPrice:"",costPrice:"",minimumStock:"",maximumStock:"",reorderPoint:"",storageLocation:"",storageTemperature:"",qualityStatus:"",qualityNotes:"",notes:""}),jt=()=>{const ue=t.pathname;return ue.includes("/raw-materials")?"raw-materials":ue.includes("/finished-goods")?"finished-goods":ue.includes("/sales-orders")?"sales-orders":"overview"},ye=jt(),te=()=>{const ue=jt();return ue==="raw-materials"?T.filter(Ce=>Ce.isTransferOrder&&(Ce.itemType==="Raw Material"||Ce.itemType==="Mixed")):ue==="finished-goods"?T.filter(Ce=>Ce.isTransferOrder&&(Ce.itemType==="Finished Goods"||Ce.itemType==="Mixed")):T},ke=se.useCallback(async ue=>{try{console.log(" Taiba Hospital: handleViewTransferOrder called with transferOrderId:",ue),oe(!0);const Ce=await ce.getTransferOrderById(ue);if(Ce.success)B(Ce.data),W(!0),console.log(" Taiba Hospital: Transfer order modal opened successfully");else throw new Error(Ce.message||"Failed to load transfer order")}catch(Ce){console.error("Error loading transfer order:",Ce),alert("Failed to load transfer order details")}finally{oe(!1)}},[]);C.useEffect(()=>{$e(),be();const ue=We=>{const{transferOrderId:I}=We.detail;I&&ke(I)};window.addEventListener("viewTransferOrder",ue);const Ce=localStorage.getItem("pendingTransferOrderView");return Ce&&(localStorage.removeItem("pendingTransferOrderView"),ke(Ce)),()=>{window.removeEventListener("viewTransferOrder",ue)}},[ke]),C.useEffect(()=>{T.length>0&&T.some(Ce=>{var We,I,V;return!Ce.read&&(((We=Ce.title)==null?void 0:We.includes("Items Received from Central Kitchen"))||((I=Ce.title)==null?void 0:I.includes("Transfer from Central Kitchen"))||((V=Ce.title)==null?void 0:V.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for Taiba Hospital, refreshing inventory..."),be())},[T]),C.useEffect(()=>{r&&!c&&be()},[Ve,y,b,S,x,D,G,ee,F]);const $e=async()=>{try{u(!0),f(null);const ue=await ce.getOutlets({limit:1e3});if(ue.success){const Ce=ue.data.find(We=>We.outletName==="Taiba Hospital");Ce?(a(Ce),await be()):f("Taiba Hospital not found")}else f("Failed to load outlet data")}catch(ue){f(ue instanceof Error?ue.message:"Failed to load outlet data"),console.error("Error loading outlet data:",ue)}finally{u(!1)}},q=()=>{p(""),h(""),N(""),v("materialName"),g("asc"),H(1),we(1),be()},z=async(ue,Ce,We)=>{try{oe(!0),console.log("Starting acceptance process for transfer order:",ue),console.log("Edited items:",Ce),console.log("Transfer notes:",We),console.log("Fetching transfer order details...");const I=await ce.getTransferOrderById(ue);if(!I.success)throw new Error(I.message||"Failed to fetch transfer order");const V=I.data;console.log("Transfer order details:",V);const L={approvedBy:"Taiba Hospital Manager",notes:We||"Transfer order approved by Taiba Hospital"};Ce&&Ce.length>0&&(L.editedItems=Ce,console.log("Including edited items in approval request:",Ce)),console.log("Approving transfer order...");const K=await ce.approveTransferOrder(ue,L);if(console.log("Approval response:",K),K.success){const Q=Ce&&Ce.some((J,me)=>{var Ne;return J.quantity!==((Ne=V.items[me])==null?void 0:Ne.quantity)});alert(`Transfer order accepted successfully!${Q?" (Quantities modified)":""}`),W(!1),B(null),await be(),M()}else throw new Error(`Failed to approve transfer order: ${K.message}`)}catch(I){console.error("Error accepting transfer order:",I),console.error("Error details:",I instanceof Error?I.message:"Unknown error"),alert(`Failed to accept transfer order: ${I instanceof Error?I.message:"Unknown error"}`)}finally{oe(!1)}},re=async ue=>{try{oe(!0);const Ce=await ce.getTransferOrderById(ue);if(!Ce.success)throw new Error(Ce.message||"Failed to fetch transfer order");const We=await ce.rejectTransferOrder(ue,{approvedBy:"Taiba Hospital Manager",notes:"Transfer order rejected by Taiba Hospital"});if(We.success)alert("Transfer order rejected successfully!"),W(!1),B(null),M();else throw new Error(`Failed to reject transfer order: ${We.message}`)}catch(Ce){console.error("Error rejecting transfer order:",Ce),alert(`Failed to reject transfer order: ${Ce instanceof Error?Ce.message:"Unknown error"}`)}finally{oe(!1)}},le=async()=>{try{_(!0),await ce.exportTaibaHospitalRawMaterials({search:m,category:y,status:b})}catch(ue){console.error("Error exporting raw materials:",ue),alert("Error exporting raw materials: "+(ue instanceof Error?ue.message:"Unknown error"))}finally{_(!1)}},_e=async()=>{try{_(!0),await ce.exportTaibaHospitalFinishedProducts({search:m,category:y,status:b})}catch(ue){console.error("Error exporting finished goods:",ue),alert("Error exporting finished goods: "+(ue instanceof Error?ue.message:"Unknown error"))}finally{_(!1)}},be=async()=>{var ue,Ce;try{console.log("Loading Taiba Kitchen inventory..."),console.log("   Search params:",{debouncedSearchTerm:Ve,filterCategory:y,filterStatus:b,sortBy:S,sortOrder:x});const We=await ce.getTaibaKitchenRawMaterials({page:D,limit:G,search:Ve,category:y,status:b,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(console.log(" Raw Materials API Response:",{success:We.success,dataLength:((ue=We.data)==null?void 0:ue.length)||0,pagination:We.pagination}),We.success)if(console.log(" Loaded Taiba Kitchen Raw Materials:",((Ce=We.data)==null?void 0:Ce.length)||0,"items"),We.data&&We.data.length>0){const V=We.data.map(L=>{var K;return{id:L._id||L.id,outletId:"taiba-kitchen",outletCode:"OUT-004",outletName:"Taiba Hospital",materialId:L._id||L.id,materialCode:L.materialCode,materialName:L.materialName,category:L.category,unitOfMeasure:L.unitOfMeasure,unitPrice:L.unitPrice,currentStock:L.currentStock,reservedStock:0,availableStock:L.currentStock,minimumStock:L.minimumStock,maximumStock:L.maximumStock,reorderPoint:L.reorderPoint,totalValue:L.currentStock*L.unitPrice,location:((K=L.storageRequirements)==null?void 0:K.location)||"Main Storage",batchNumber:L.batchNumber||"",supplier:L.supplierName||"",lastUpdated:L.updatedAt||new Date().toISOString(),status:L.status,notes:L.notes||"",isActive:L.isActive}});i(V),We.pagination&&(ie(We.pagination.totalPages),ne(We.pagination.totalItems))}else console.log("No raw materials inventory found for Taiba Kitchen"),i([]),ie(1),ne(0);else console.error("Failed to load raw materials inventory:",We.error||"API Error"),i([]),ie(1),ne(0);const I=await ce.getTaibaKitchenFinishedProducts({page:ee,limit:F,search:Ve,category:y,status:b,sortBy:S==="productName"?"productName":S,sortOrder:x});if(I.success)if(console.log("Loaded outlet finished goods inventory:",I.data),I.data&&I.data.length>0){const V=I.data.map(L=>({id:L._id||L.id,outletId:"taiba-kitchen",outletCode:"OUT-004",outletName:"Taiba Hospital",productId:L._id||L.id,productCode:L.productCode,productName:L.productName,category:L.category,unitOfMeasure:L.unitOfMeasure,unitPrice:L.unitPrice,costPrice:L.costPrice||0,currentStock:L.currentStock,reservedStock:0,availableStock:L.currentStock,minimumStock:L.minimumStock,maximumStock:L.maximumStock,reorderPoint:L.reorderPoint,totalValue:L.currentStock*L.unitPrice,productionDate:L.productionDate||new Date().toISOString(),expiryDate:L.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:L.batchNumber||"",storageLocation:L.storageLocation||"Cold Storage",storageTemperature:L.storageTemperature||"Cold",qualityStatus:L.qualityStatus||"Good",qualityNotes:L.qualityNotes||"",status:L.status,transferSource:"Transfer",lastUpdated:L.lastUpdated||L.updatedAt,notes:L.notes||"",isActive:L.isActive}));l(V),I.pagination&&(ve(I.pagination.totalPages),de(I.pagination.totalItems))}else console.log("No finished goods inventory found for this outlet"),l([]),ve(1),de(0);else console.error("Failed to load finished goods inventory:",I.error||"API Error"),l([]),ve(1),de(0)}catch(We){f(We instanceof Error?We.message:"Failed to load inventory"),console.error("Error loading inventory:",We)}},Ze=async()=>{if(ft)try{const ue={currentStock:parseFloat(He.currentStock),minimumStock:parseFloat(He.minimumStock),maximumStock:parseFloat(He.maximumStock),reorderPoint:parseFloat(He.reorderPoint),unitPrice:parseFloat(He.unitPrice),notes:He.notes},Ce=await ce.updateTaibaKitchenRawMaterial(ft.id,ue);Ce.success?(i(We=>We.map(I=>I.id===ft.id?{...I,...ue,totalValue:ue.currentStock*ue.unitPrice}:I)),ht(!1),it(null)):alert(`Failed to update inventory item: ${Ce.error||"Unknown error"}`)}catch(ue){console.error("Error updating inventory item:",ue),alert("Failed to update inventory item")}},Te=()=>{ht(!1),it(null),gt({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},Ye=async()=>{if(Rt)try{const ue={currentStock:parseFloat(Ge.currentStock),unitPrice:parseFloat(Ge.unitPrice),costPrice:parseFloat(Ge.costPrice),minimumStock:parseFloat(Ge.minimumStock),maximumStock:parseFloat(Ge.maximumStock),reorderPoint:parseFloat(Ge.reorderPoint),storageLocation:Ge.storageLocation,storageTemperature:Ge.storageTemperature,qualityStatus:Ge.qualityStatus,qualityNotes:Ge.qualityNotes,notes:Ge.notes},Ce=await ce.updateTaibaKitchenFinishedProduct(Rt.id,ue);Ce.success?(l(We=>We.map(I=>I.id===Rt.id?{...I,...ue,totalValue:ue.currentStock*ue.unitPrice}:I)),Vt(!1),Gt(null)):alert(`Failed to update finished good inventory item: ${Ce.error||"Unknown error"}`)}catch(ue){console.error("Error updating finished good inventory item:",ue),alert("Failed to update finished good inventory item")}},Dt=()=>{Vt(!1),Gt(null),Xe({currentStock:"",unitPrice:"",costPrice:"",minimumStock:"",maximumStock:"",reorderPoint:"",storageLocation:"",storageTemperature:"",qualityStatus:"",qualityNotes:"",notes:""})},ze=ue=>{switch(ue){case"In Stock":return"bg-green-100 text-green-800";case"Low Stock":return"bg-yellow-100 text-yellow-800";case"Out of Stock":return"bg-red-100 text-red-800";case"Overstock":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Taiba Hospital..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:$e,className:"btn-primary",children:"Retry"})]})});const Ot=()=>{switch(ye){case"raw-materials":return Tt();case"finished-goods":return zr();case"sales-orders":return ct();default:return yr()}},_t=async ue=>{var We,I;const Ce=(We=ue.target.files)==null?void 0:We[0];if(Ce)try{j(!0);const V=Ce.name.toLowerCase(),L=jt();if(L==="raw-materials"){if(!(V.endsWith(".xlsx")||V.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const K=await ce.importTaibaKitchenRawMaterialsExcel(Ce);alert(K.message||"Raw materials import completed"),await be()}else if(L==="finished-goods"){let K=[];if(V.endsWith(".json")){const J=await Ce.text(),me=JSON.parse(J);K=Array.isArray(me)?me:me.products||[]}else if(V.endsWith(".csv"))K=(await Ce.text()).split(`
`).filter(fe=>fe.trim()).slice(1).map(fe=>{const he=fe.split(",").map(ge=>ge.replace(/\"/g,"").trim());return{productCode:he[0]||he[1],productName:he[1]||he[2],subCategory:he[2]||"MAIN COURSES",category:he[2]||"MAIN COURSES",unitOfMeasure:he[3]||"piece",unitPrice:parseFloat(he[4])||0,currentStock:parseFloat(he[5])||0}}).filter(fe=>fe.productCode&&fe.productName);else if(V.endsWith(".xlsx")||V.endsWith(".xls")){const J=await Ce.arrayBuffer(),me=await cf(()=>Promise.resolve().then(()=>kf),void 0),Ne=me.read(J,{type:"array"}),fe=Ne.Sheets[Ne.SheetNames[0]];K=me.utils.sheet_to_json(fe,{defval:""}).map(ge=>{const Ee=De=>De.toString().trim().toLowerCase(),Ie=De=>{const Le=Object.keys(ge).find(ot=>De.includes(Ee(ot)));return Le?ge[Le]:void 0},Be=(Ie(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(Ie(["product code","sku","code"])||"").toString().trim(),productName:(Ie(["product name","item name","name"])||"").toString().trim(),subCategory:Be,category:Be,unitOfMeasure:(Ie(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(Ie(["unit price","price"])))||0,currentStock:Number.parseFloat(String(Ie(["current stock","current quantity","quantity","qty"])))||0}}).filter(ge=>ge.productCode&&ge.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const Q=await ce.importTaibaKitchenFinishedProducts(K);alert(Q.message||`Finished products import completed. Success: ${((I=Q.data)==null?void 0:I.successCount)||0}`),await be()}}catch(V){console.error("Error importing file:",V),alert("Error importing file. Please check the file format.")}finally{j(!1),E.current&&(E.current.value="")}},Tt=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var ue;return(ue=E.current)==null?void 0:ue.click()},disabled:w,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[w?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ha,{className:"h-4 w-4 mr-2"}),w?"Importing...":"Import"]}),n.jsxs("button",{onClick:le,disabled:O||w,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),O?"Exporting...":"Export"]})]})]}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:ue=>p(ue.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:ue=>h(ue.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:b,onChange:ue=>N(ue.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:ue=>v(ue.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:q,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",pe>0?(D-1)*G+1:0," - ",Math.min(D*G,pe)," of ",pe," raw material items",(Ve||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:G,onChange:ue=>{Z(Number(ue.target.value)),H(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:q,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:be,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(ue=>ue.materialId&&ue.materialCode&&ue.materialName).map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ue.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ue.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",ue.unitPrice?Number(ue.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.currentStock})]},ue.id))})]})}),X>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",D," of ",X]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>H(1),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>H(ue=>Math.max(1,ue-1)),disabled:D===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,X)},(ue,Ce)=>{let We;return X<=5||D<=3?We=Ce+1:D>=X-2?We=X-4+Ce:We=D-2+Ce,n.jsx("button",{onClick:()=>H(We),className:`px-3 py-1 text-sm border rounded-md ${D===We?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:We},We)})}),n.jsx("button",{onClick:()=>H(ue=>Math.min(X,ue+1)),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>H(X),disabled:D===X,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),zr=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(tt,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var ue;return(ue=E.current)==null?void 0:ue.click()},disabled:w,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[w?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ha,{className:"h-4 w-4 mr-2"}),w?"Importing...":"Import"]}),n.jsxs("button",{onClick:_e,disabled:O||w,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),O?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:ue=>p(ue.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:ue=>h(ue.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:b,onChange:ue=>N(ue.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:ue=>v(ue.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:q,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",xe>0?(ee-1)*F+1:0," - ",Math.min(ee*F,xe)," of ",xe," finished goods items",(Ve||y||b)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Items per page:"}),n.jsxs("select",{value:F,onChange:ue=>{Ue(Number(ue.target.value)),we(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:10,children:"10"}),n.jsx("option",{value:20,children:"20"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]})]})]}),o.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:q,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:be,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(ue=>ue.productId&&ue.productCode&&ue.productName).map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ue.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ue.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.unitOfMeasure}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.currentStock}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",ue.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ze(ue.status)}`,children:ue.status})})]},ue.id))})]})}),R>1&&n.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",ee," of ",R]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>we(1),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:""}),n.jsx("button",{onClick:()=>we(ue=>Math.max(1,ue-1)),disabled:ee===1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:" Previous"}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,R)},(ue,Ce)=>{let We;return R<=5||ee<=3?We=Ce+1:ee>=R-2?We=R-4+Ce:We=ee-2+Ce,n.jsx("button",{onClick:()=>we(We),className:`px-3 py-1 text-sm border rounded-md ${ee===We?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-100"}`,children:We},We)})}),n.jsx("button",{onClick:()=>we(ue=>Math.min(R,ue+1)),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next "}),n.jsx("button",{onClick:()=>we(R),disabled:ee===R,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:""})]})]})})]})}),ct=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Sales orders functionality will be implemented here."})]})}),yr=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Mm,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(tt,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Fr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Mm,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Taiba Hospital"}),n.jsxs("p",{className:"text-gray-600",children:[ye==="raw-materials"?"Raw Materials Inventory":ye==="finished-goods"?"Finished Goods Inventory":ye==="sales-orders"?"Sales Orders":"Express drive-thru outlet"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:$e,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),ye==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/drive-thru-express/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),ye==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/drive-thru-express/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(ta,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(Zi,{notifications:te(),onMarkAsRead:k,onMarkAllAsRead:A,onClearAll:P,onRefresh:M,onViewTransferOrder:ke})]})]}),Ot(),n.jsx("input",{ref:E,type:"file",accept:ye==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:_t,className:"hidden",disabled:w}),n.jsx(Zc,{isOpen:U,onClose:()=>{W(!1),B(null)},transferOrder:Y,onAccept:z,onReject:re,loading:ae}),mt&&ft&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Edit Inventory Item"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[ft.materialCode," - ",ft.materialName]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{type:"number",step:"0.01",value:He.currentStock,onChange:ue=>gt(Ce=>({...Ce,currentStock:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",value:He.unitPrice,onChange:ue=>gt(Ce=>({...Ce,unitPrice:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:He.minimumStock,onChange:ue=>gt(Ce=>({...Ce,minimumStock:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:He.maximumStock,onChange:ue=>gt(Ce=>({...Ce,maximumStock:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{type:"number",step:"0.01",value:He.reorderPoint,onChange:ue=>gt(Ce=>({...Ce,reorderPoint:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:He.notes,onChange:ue=>gt(Ce=>({...Ce,notes:ue.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:Te,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ze,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})}),Jt&&Rt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Edit Finished Good Inventory Item"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[Rt.productCode," - ",Rt.productName]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{type:"number",step:"0.01",value:Ge.currentStock,onChange:ue=>Xe(Ce=>({...Ce,currentStock:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",value:Ge.unitPrice,onChange:ue=>Xe(Ce=>({...Ce,unitPrice:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price"}),n.jsx("input",{type:"number",step:"0.01",value:Ge.costPrice,onChange:ue=>Xe(Ce=>({...Ce,costPrice:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:Ge.minimumStock,onChange:ue=>Xe(Ce=>({...Ce,minimumStock:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:Ge.maximumStock,onChange:ue=>Xe(Ce=>({...Ce,maximumStock:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{type:"number",step:"0.01",value:Ge.reorderPoint,onChange:ue=>Xe(Ce=>({...Ce,reorderPoint:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Location"}),n.jsx("input",{type:"text",value:Ge.storageLocation,onChange:ue=>Xe(Ce=>({...Ce,storageLocation:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Temperature"}),n.jsxs("select",{value:Ge.storageTemperature,onChange:ue=>Xe(Ce=>({...Ce,storageTemperature:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Cold",children:"Cold"}),n.jsx("option",{value:"Frozen",children:"Frozen"}),n.jsx("option",{value:"Hot",children:"Hot"}),n.jsx("option",{value:"Room Temperature",children:"Room Temperature"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{value:Ge.qualityStatus,onChange:ue=>Xe(Ce=>({...Ce,qualityStatus:ue.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Good",children:"Good"}),n.jsx("option",{value:"Damaged",children:"Damaged"}),n.jsx("option",{value:"Expired",children:"Expired"}),n.jsx("option",{value:"Under Review",children:"Under Review"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Notes"}),n.jsx("textarea",{value:Ge.qualityNotes,onChange:ue=>Xe(Ce=>({...Ce,qualityNotes:ue.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:Ge.notes,onChange:ue=>Xe(Ce=>({...Ce,notes:ue.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:Dt,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ye,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})]})},w1e=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState(!0),[i,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(!1),[f,m]=C.useState(""),[p,y]=C.useState(""),[h,b]=C.useState(""),[N,S]=C.useState("createdAt"),[v,x]=C.useState("desc");C.useEffect(()=>{g()},[]),C.useEffect(()=>{a||g()},[f,p,h,N,v]);const g=async()=>{try{s(!0),o(null);const k=await ce.getRawMaterialForecasts({limit:1e3,search:f,status:p,forecastPeriod:h,sortBy:N,sortOrder:v});k.success?(console.log("Loaded Raw Material Forecasts:",k.data),r(k.data)):o("Failed to load forecasts")}catch(k){o(k instanceof Error?k.message:"Failed to load forecasts"),console.error("Error loading forecasts:",k)}finally{s(!1)}},w=t,j=()=>{m(""),y(""),b(""),S("createdAt"),x("desc"),g()},O=k=>{c(k),d(!0)},_=async k=>{if(window.confirm("Are you sure you want to delete this forecast?"))try{(await ce.deleteRawMaterialForecast(k)).success?await g():alert("Failed to delete forecast")}catch(A){alert("Error deleting forecast: "+(A instanceof Error?A.message:"Unknown error")),console.error("Error deleting forecast:",A)}},E=k=>{switch(k){case"Active":return"bg-green-100 text-green-800";case"Draft":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=k=>{switch(k){case"High":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading forecasts..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:g,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ingredient Forecast"}),n.jsx("p",{className:"text-gray-600",children:"Plan and predict your ingredient requirements based on Job Orders"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:g,className:"btn-secondary flex items-center",title:"Refresh forecasts",children:[n.jsx(Pu,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/raw-material-forecast/add"),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Create Forecast"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search forecasts by name, number, or description...",className:"input-field pl-10",value:f,onChange:k=>m(k.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:j,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:k=>y(k.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),n.jsxs("select",{className:"input-field",value:h,onChange:k=>b(k.target.value),children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"Weekly",children:"Weekly"}),n.jsx("option",{value:"Monthly",children:"Monthly"}),n.jsx("option",{value:"Quarterly",children:"Quarterly"}),n.jsx("option",{value:"Yearly",children:"Yearly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:N,onChange:k=>S(k.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"forecastNumber",children:"Forecast Number"}),n.jsx("option",{value:"forecastName",children:"Forecast Name"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"forecastStartDate",children:"Start Date"})]}),n.jsx("button",{onClick:()=>x(v==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${v==="asc"?"Descending":"Ascending"}`,children:v==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",w.length," forecasts",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(f||p||h)&&n.jsx("button",{onClick:j,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Forecast #"}),n.jsx("th",{className:"table-header",children:"Name"}),n.jsx("th",{className:"table-header",children:"Period"}),n.jsx("th",{className:"table-header",children:"Start Date"}),n.jsx("th",{className:"table-header",children:"End Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Confidence"}),n.jsx("th",{className:"table-header",children:"Total Value"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:k.forecastNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:k.forecastName}),n.jsx("div",{className:"text-gray-500 text-sm max-w-xs truncate",children:k.forecastDescription})]})}),n.jsx("td",{className:"table-cell",children:k.forecastPeriod}),n.jsx("td",{className:"table-cell",children:new Date(k.forecastStartDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:new Date(k.forecastEndDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(k.status)}`,children:k.status})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(k.confidenceLevel)}`,children:k.confidenceLevel})}),n.jsxs("td",{className:"table-cell font-semibold",children:[k.totalValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>O(k),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(zi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/raw-material-forecast/edit/${k.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_(k.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},k.id))})]})})}),u&&l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Forecast Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forecast Number"}),n.jsx("p",{className:"text-gray-900 font-mono",children:l.forecastNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forecast Name"}),n.jsx("p",{className:"text-gray-900",children:l.forecastName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),n.jsx("p",{className:"text-gray-900",children:l.forecastPeriod})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(l.status)}`,children:l.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.forecastStartDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.forecastEndDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confidence Level"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(l.confidenceLevel)}`,children:l.confidenceLevel})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Value"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[l.totalValue.toFixed(2)," KWD"]})]})]}),l.forecastDescription&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:l.forecastDescription})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Forecast Items (",l.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.items.map((k,A)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:k.materialCode}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:k.materialName}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[k.requiredQuantity.toFixed(2)," ",k.unitOfMeasure]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[k.availableQuantity.toFixed(2)," ",k.unitOfMeasure]}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.shortfall>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:[k.shortfall.toFixed(2)," ",k.unitOfMeasure]})}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[k.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[k.forecastValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:k.jobOrderNumber}),n.jsx("div",{className:"text-xs",children:k.bomCode})]})})]},A))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:l.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:l.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(l.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/raw-material-forecast/edit/${l.id}`)},className:"btn-primary",children:"Edit Forecast"})]})]})})]})},N1e=()=>{const e=lt(),[t,r]=C.useState({selectedJobOrderId:"",items:[]}),[a,s]=C.useState({}),[i,o]=C.useState([]),[l,c]=C.useState([]),[u,d]=C.useState(!1),[f,m]=C.useState(null),[p,y]=C.useState(new Set);C.useEffect(()=>{h(),b()},[]);const h=async()=>{try{d(!0),console.log("Loading job orders from backend...");const g=await ce.getJobOrders({limit:1e3});console.log("Job orders response:",g),g.success&&g.data&&g.data.length>0?(o(g.data),console.log(" Loaded job orders from backend:",g.data.length)):(console.log(" No job orders found in backend"),o([]))}catch(g){console.error(" Error loading job orders from backend:",g),o([])}finally{d(!1)}},b=async()=>{try{console.log("Loading BOMs from backend...");const g=await ce.getBillOfMaterials({limit:1e3});g.success&&g.data&&g.data.length>0?(c(g.data),console.log(" Loaded BOMs from backend:",g.data.length)):(console.log(" No BOMs found in backend"),c([]))}catch(g){console.error(" Error loading BOMs from backend:",g),c([])}},N=g=>{const w=i.find(O=>O.id===g);if(!w)return;m(w),r(O=>({...O,selectedJobOrderId:g}));const j=new Map;w.items.forEach(O=>{const _=l.find(E=>E.id===O.bomId);_&&_.items.forEach(E=>{const T=E.materialCode,k=O.totalQuantity*E.quantity;if(j.has(T)){const A=j.get(T);A.requiredQuantity+=k,A.forecastQuantity=A.requiredQuantity,A.forecastValue=A.forecastQuantity*A.unitPrice,A.shortfall=Math.max(0,A.requiredQuantity-A.availableQuantity)}else{const A={materialId:E.materialId,materialCode:E.materialCode,materialName:E.materialName,currentStock:0,unitOfMeasure:E.unitOfMeasure,unitPrice:E.unitCost,forecastQuantity:k,forecastValue:k*E.unitCost,leadTime:3,requiredQuantity:k,availableQuantity:0,shortfall:k,jobOrderId:w.id,jobOrderNumber:w.jobOrderNumber,bomId:_.id,bomCode:_.bomCode,notes:`Required for ${O.product} (${O.totalQuantity} units)`};j.set(T,A)}})}),r(O=>({...O,items:Array.from(j.values())}))},S=()=>{const g={};return t.selectedJobOrderId||(g.selectedJobOrderId="Please select a Recipe Order"),t.items.length===0&&(g.items="No forecast items generated. Please select a Recipe Order with valid BOMs."),s(g),Object.keys(g).length===0},v=async g=>{if(g.preventDefault(),!!S())try{const w=t.items.reduce((E,T)=>E+T.forecastValue,0),O={forecastNumber:`FC-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`,forecastName:`Forecast for ${f==null?void 0:f.jobOrderNumber}`,forecastDescription:`Material forecast based on Job Order ${f==null?void 0:f.jobOrderNumber}`,forecastPeriod:"Monthly",forecastStartDate:new Date().toISOString().split("T")[0],forecastEndDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"Draft",totalValue:Math.round(w*100)/100,items:t.items,basedOnJobOrders:!0,basedOnHistoricalData:!1,confidenceLevel:"Medium",createdBy:"admin",updatedBy:"admin"};console.log("Creating Forecast:",O);const _=await ce.createRawMaterialForecast(O);if(_.success){let E="Forecast created successfully!";if(_.data&&_.data.generatedPurchaseOrder){const T=_.data.generatedPurchaseOrder;E+=`

 Purchase Order Generated:
PO Number: ${T.poNumber}
Total Amount: ${T.totalAmount.toFixed(2)} KWD
Items: ${T.items.length} materials
Status: ${T.status}`}alert(E),e("/raw-material-forecast")}else alert("Error creating forecast: "+(_.message||"Unknown error"))}catch(w){console.error("Error creating forecast:",w),alert("Error creating forecast: "+(w instanceof Error?w.message:"Unknown error"))}},x=g=>{const w=new Set(p);w.has(g)?w.delete(g):w.add(g),y(w)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Ingredient Forecast"}),n.jsx("p",{className:"text-gray-600",children:"Create an ingredient forecast based on Job Orders"})]}),n.jsxs("button",{onClick:()=>e("/raw-material-forecast"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Forecasts"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Step 1: Select Recipe Order"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Recipe Order *"}),n.jsxs("select",{className:`input-field ${a.selectedJobOrderId?"border-red-500":""}`,value:t.selectedJobOrderId,onChange:g=>N(g.target.value),children:[n.jsx("option",{value:"",children:"Select a Recipe Order"}),u?n.jsx("option",{disabled:!0,children:"Loading recipe orders..."}):i.map(g=>n.jsxs("option",{value:g.id,children:["Recipe Order #",g.jobOrderNumber," - ",g.customerName," (",g.items.length," items)"]},g.id))]}),a.selectedJobOrderId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.selectedJobOrderId})]}),f&&n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Recipe Order Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Order Number:"})," ",f.jobOrderNumber]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",f.customerName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total Items:"})," ",f.items.length]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",f.totalAmount.toFixed(2)," KWD"]})]})]})]})]}),f&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 2: Recipe Order Items & Ingredients"}),n.jsx("div",{className:"space-y-4",children:f.items.map((g,w)=>{const j=l.find(E=>E.id===g.bomId),O=`item-${w}`,_=p.has(O);return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ZR,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:g.product}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",g.totalQuantity," units | Unit Price: ",g.unitPrice.toFixed(2)," KWD | Total: ",g.totalPrice.toFixed(2)," KWD"]})]})]}),n.jsx("button",{type:"button",onClick:()=>x(O),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:_?"Hide Ingredients":"Show Ingredients"})]}),_&&j&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx(tt,{className:"h-4 w-4 text-green-600"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Recipe: ",j.productName," (",j.bomCode,")"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ingredient"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Per Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.items.map((E,T)=>{const k=g.totalQuantity*E.quantity,A=0,P=Math.max(0,k-A),M=k*E.unitCost;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.materialName}),n.jsx("div",{className:"text-sm text-gray-500 font-mono",children:E.materialCode})]})}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:E.unitOfMeasure}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:E.quantity}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 font-semibold",children:k.toFixed(2)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:A.toFixed(2)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:P.toFixed(2)})}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900",children:[E.unitCost.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900 font-semibold",children:[M.toFixed(2)," KWD"]})]},T)})})]})})]})]},w)})})]}),t.items.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 3: Forecast Summary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-red-800 font-semibold text-lg",children:t.items.reduce((g,w)=>g+w.shortfall,0).toFixed(2)}),n.jsx("div",{className:"text-red-600 text-sm",children:"Total Shortfall"})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-blue-800 font-semibold text-lg",children:t.items.reduce((g,w)=>g+w.requiredQuantity,0).toFixed(2)}),n.jsx("div",{className:"text-blue-600 text-sm",children:"Total Required"})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-green-800 font-semibold text-lg",children:t.items.reduce((g,w)=>g+w.availableQuantity,0).toFixed(2)}),n.jsx("div",{className:"text-green-600 text-sm",children:"Total Available"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.items.map((g,w)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.materialName}),n.jsx("div",{className:"text-sm text-gray-500 font-mono",children:g.materialCode})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.unitOfMeasure}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:g.requiredQuantity.toFixed(2)}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.availableQuantity.toFixed(2)}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.shortfall>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:g.shortfall.toFixed(2)})}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[g.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[g.forecastValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:g.jobOrderNumber}),n.jsx("div",{className:"text-xs",children:g.bomCode})]})})]},w))})]})}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("div",{children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Forecast Value: ",t.items.reduce((g,w)=>g+w.forecastValue,0).toFixed(2)," KWD"]})}),n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-red-600",children:["Total Shortfall Value: ",t.items.reduce((g,w)=>g+w.shortfall*w.unitPrice,0).toFixed(2)," KWD"]})})]}),t.items.some(g=>g.shortfall>0)&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:" Purchase Order will be automatically generated for shortfall quantities"}),n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Total PO Value: ",t.items.reduce((g,w)=>g+w.shortfall*w.unitPrice,0).toFixed(2)," KWD"]})]})]})})]})]})]}),t.items.length>0&&n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-material-forecast"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Generate Forecast"]})]})]})})]})},oi=()=>{const e=lt(),t=Ta(),[r,a]=C.useState([]),[s,i]=C.useState(!0),[o,l]=C.useState(null),[c,u]=C.useState(""),[d,f]=C.useState(""),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState(""),[S,v]=C.useState(null),[x,g]=C.useState(!1),[w,j]=C.useState([]),[O,_]=C.useState(null),[E,T]=C.useState([]),[k,A]=C.useState(!1),[P,M]=C.useState({}),U=()=>{const R=t.pathname;return R.includes("/kuwait-city/")?"Kuwait City":R.includes("/360-mall/")||R.includes("/marina-walk-cafe/")?"360 Mall":R.includes("/vibes-complex/")||R.includes("/mall-food-court/")?"Vibes Complex":R.includes("/taiba-hospital/")||R.includes("/drive-thru-express/")?"Taiba Hospital":null},W=U(),Y=["Pending","Confirmed","Preparing","Ready","Served","Completed","Cancelled"],B=["Dine-in","Takeaway","Delivery","Drive-thru"],ae=["Pending","Paid","Partially Paid","Refunded"],oe=async()=>{i(!0),l(null);try{const ve=U()||(O==null?void 0:O.outletName)||"",xe=await ce.getSalesOrders({search:c,outletName:ve,orderStatus:m,orderType:y,paymentStatus:b,limit:1e3,sortBy:"orderTiming.orderDate",sortOrder:"desc"});xe.success?a(xe.data):(console.log("API failed, loading sample data"),D())}catch(R){console.log("API error, loading sample data:",R),D()}finally{i(!1)}},D=()=>{const R=U(),ve=[{_id:"so-001",orderNumber:"SO-DT-001-001",outletId:{_id:"outlet-downtown-001",outletCode:"DT-001",outletName:R||"Kuwait City"},outletCode:"DT-001",outletName:R||"Kuwait City",customerInfo:{customerName:"John Smith",customerPhone:"+965-1234-5678",customerEmail:"john.smith@email.com",tableNumber:"T-05",orderType:"Dine-in"},orderItems:[{productId:{_id:"fg-001",productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages"},productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages",quantity:2,unitPrice:4.5,totalPrice:9,specialInstructions:"Extra ice"},{productId:{_id:"fg-002",productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals"},productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals",quantity:1,unitPrice:8.75,totalPrice:8.75,specialInstructions:"No nuts"}],orderSummary:{subtotal:17.75,taxAmount:2.66,discountAmount:0,totalAmount:20.41,paymentMethod:"Card",paymentStatus:"Paid"},orderStatus:"Ready",orderTiming:{orderDate:new Date().toISOString(),estimatedPrepTime:15,servedAt:new Date().toISOString()},notes:"Regular customer",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"so-002",orderNumber:"SO-MW-001-002",outletId:{_id:"outlet-marina-001",outletCode:"MW-001",outletName:R||"360 Mall"},outletCode:"MW-001",outletName:R||"360 Mall",customerInfo:{customerName:"Sarah Johnson",customerPhone:"+965-9876-5432",customerEmail:"sarah.j@email.com",orderType:"Takeaway"},orderItems:[{productId:{_id:"fg-003",productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages"},productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages",quantity:1,unitPrice:5.25,totalPrice:5.25}],orderSummary:{subtotal:5.25,taxAmount:.79,discountAmount:0,totalAmount:6.04,paymentMethod:"Cash",paymentStatus:"Paid"},orderStatus:"Completed",orderTiming:{orderDate:new Date(Date.now()-30*60*1e3).toISOString(),estimatedPrepTime:10,servedAt:new Date(Date.now()-20*60*1e3).toISOString(),completedAt:new Date(Date.now()-10*60*1e3).toISOString()},notes:"Quick takeaway order",createdAt:new Date(Date.now()-30*60*1e3).toISOString(),updatedAt:new Date(Date.now()-10*60*1e3).toISOString()},{_id:"so-003",orderNumber:"SO-MF-001-003",outletId:{_id:"outlet-mall-001",outletCode:"MF-001",outletName:R||"Vibes Complex"},outletCode:"MF-001",outletName:R||"Vibes Complex",customerInfo:{customerName:"Ahmed Al-Rashid",customerPhone:"+965-5555-1234",tableNumber:"T-12",orderType:"Dine-in"},orderItems:[{productId:{_id:"fg-004",productCode:"FG-004",productName:"Quinoa Salad",category:"Meals"},productCode:"FG-004",productName:"Quinoa Salad",category:"Meals",quantity:2,unitPrice:7.5,totalPrice:15,specialInstructions:"Extra dressing"},{productId:{_id:"fg-005",productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks"},productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks",quantity:1,unitPrice:3.25,totalPrice:3.25}],orderSummary:{subtotal:18.25,taxAmount:2.74,discountAmount:1,totalAmount:19.99,paymentMethod:"Digital Wallet",paymentStatus:"Paid"},orderStatus:"Preparing",orderTiming:{orderDate:new Date(Date.now()-10*60*1e3).toISOString(),estimatedPrepTime:20},notes:"Family lunch order",createdAt:new Date(Date.now()-10*60*1e3).toISOString(),updatedAt:new Date(Date.now()-5*60*1e3).toISOString()}],xe=R?ve.filter(de=>de.outletName===R):ve;a(xe),l(null)},H=async()=>{try{console.log("SalesOrders - loadOutlets called, pathname:",t.pathname);const R=await ce.getOutlets({limit:1e3});if(R.success){j(R.data);const ve=U();if(console.log("SalesOrders - Detected outlet from path:",ve),ve){O||_({outletName:ve});const xe=R.data.find(de=>de.outletName===ve);console.log("SalesOrders - Found outlet in data:",xe),xe&&(_(xe),f(xe._id),console.log("SalesOrders - Set currentOutlet:",xe.outletName))}else _(null)}}catch(R){console.error("Error loading outlets:",R)}};C.useEffect(()=>{H()},[t.pathname]),C.useEffect(()=>{oe()},[c,d,m,y,b,t.pathname]),C.useEffect(()=>{const R=setTimeout(()=>{oe()},500);return()=>clearTimeout(R)},[]);const G=()=>{oe()};C.useEffect(()=>{const R=()=>{setTimeout(()=>{oe()},100)};return window.addEventListener("focus",R),()=>{window.removeEventListener("focus",R)}},[]);const Z=R=>{v(R),g(!0)},X=async R=>{if(globalThis.confirm("Are you sure you want to delete this sales order?"))try{const ve=await ce.deleteSalesOrder(R);ve.success?(alert(ve.message),oe()):alert(ve.message||"Failed to delete sales order")}catch(ve){alert(ve.message||"An error occurred during deletion")}},ie=async R=>{M(ve=>({...ve,[R]:"pushing"}));try{const ve=await ce.pushSalesOrderToZoho(R);ve.success?(M(xe=>({...xe,[R]:"success"})),alert(`Sales order pushed to Zoho as Invoice successfully! Zoho Invoice ID: ${ve.data.zohoInvoiceId}`),oe()):(M(xe=>({...xe,[R]:"error"})),alert(ve.message||"Failed to push sales order to Zoho"))}catch(ve){M(xe=>({...xe,[R]:"error"})),alert(ve.message||"An error occurred while pushing to Zoho")}},pe=async()=>{if(E.length===0){alert("Please select at least one sales order to push to Zoho");return}A(!0);try{const R=await ce.pushBulkSalesOrdersToZoho(E);R.success?(alert(`Bulk push to Zoho Invoices completed! ${R.data.successful.length} successful, ${R.data.failed.length} failed`),T([]),oe()):alert(R.message||"Failed to push sales orders to Zoho")}catch(R){alert(R.message||"An error occurred during bulk push to Zoho")}finally{A(!1)}},ne=R=>{T(ve=>ve.includes(R)?ve.filter(xe=>xe!==R):[...ve,R])},ee=()=>{E.length===r.length?T([]):T(r.map(R=>R._id))},we=R=>{switch(R){case"Pending":return"bg-yellow-100 text-yellow-800";case"Confirmed":return"bg-blue-100 text-blue-800";case"Preparing":return"bg-orange-100 text-orange-800";case"Ready":return"bg-green-100 text-green-800";case"Served":return"bg-green-100 text-green-800";case"Completed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},F=R=>{switch(R){case"Pending":return"bg-yellow-100 text-yellow-800";case"Paid":return"bg-green-100 text-green-800";case"Partially Paid":return"bg-blue-100 text-blue-800";case"Refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ue=R=>{switch(R){case"Dine-in":return"";case"Takeaway":return"";case"Delivery":return"";case"Drive-thru":return"";default:return""}};return n.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Sales Orders",O&&n.jsxs("span",{className:"text-lg font-normal text-gray-600 ml-2",children:["- ",O.outletName]})]}),O&&n.jsxs("p",{className:"text-gray-600 mt-1",children:["Managing sales orders for ",O.outletName]})]}),n.jsxs("div",{className:"flex space-x-3",children:[E.length>0&&n.jsx("button",{onClick:pe,disabled:k,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:k?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Pushing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ha,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Push to Zoho Invoices (",E.length,")"]})}),n.jsxs("button",{onClick:()=>{const R=U();if(R){const xe={"Kuwait City":"kuwait-city","360 Mall":"360-mall","Vibes Complex":"vibes-complex","Taiba Hospital":"taiba-hospital"}[R]||R.toLowerCase().replace(/\s+/g,"-");e(`/${xe}/pos-sales/create-order`)}else e("/sales-orders/add")},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(kt,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Create Order"]})]})]}),n.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Search"}),n.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(dr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),n.jsx("input",{type:"text",name:"search",id:"search",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search orders...",value:c,onChange:R=>u(R.target.value)})]})]}),!W&&!O&&n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"outletFilter",className:"block text-sm font-medium text-gray-700",children:"Outlet"}),n.jsxs("select",{id:"outletFilter",name:"outletFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:d,onChange:R=>f(R.target.value),children:[n.jsx("option",{value:"",children:"All Outlets"}),w.map(R=>n.jsx("option",{value:R._id,children:R.outletName},R._id))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsxs("select",{id:"statusFilter",name:"statusFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:m,onChange:R=>p(R.target.value),children:[n.jsx("option",{value:"",children:"All Statuses"}),Y.map(R=>n.jsx("option",{value:R,children:R},R))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"orderTypeFilter",className:"block text-sm font-medium text-gray-700",children:"Order Type"}),n.jsxs("select",{id:"orderTypeFilter",name:"orderTypeFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:y,onChange:R=>h(R.target.value),children:[n.jsx("option",{value:"",children:"All Types"}),B.map(R=>n.jsx("option",{value:R,children:R},R))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"paymentStatusFilter",className:"block text-sm font-medium text-gray-700",children:"Payment"}),n.jsxs("select",{id:"paymentStatusFilter",name:"paymentStatusFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:b,onChange:R=>N(R.target.value),children:[n.jsx("option",{value:"",children:"All Payments"}),ae.map(R=>n.jsx("option",{value:R,children:R},R))]})]})]}),n.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[n.jsxs("button",{onClick:()=>{u(""),O||f(""),p(""),h(""),N("")},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(wt,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Clear Filters"]}),n.jsxs("button",{onClick:G,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(ea,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Refresh"]})]})]}),s?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full"}),n.jsx("p",{className:"text-gray-600 mt-3",children:"Loading sales orders..."})]}):o?n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error!"}),n.jsxs("span",{className:"block sm:inline",children:[" ",o]}),n.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:n.jsx(wt,{className:"h-6 w-6 text-red-500 cursor-pointer",onClick:()=>l(null)})})]}):r.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Fr,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-lg",children:"No sales orders found."}),n.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new order."})]}):n.jsx("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.jsx("input",{type:"checkbox",checked:E.length===r.length&&r.length>0,onChange:ee,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order #"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Status"}),n.jsx("th",{scope:"col",className:"relative px-6 py-3",children:n.jsx("span",{className:"sr-only",children:"Actions"})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(R=>{var ve,xe,de;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:E.includes(R._id),onChange:()=>ne(R._id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.orderNumber}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:R.customerInfo.customerName}),R.customerInfo.customerPhone&&n.jsx("div",{className:"text-gray-400",children:R.customerInfo.customerPhone})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.outletName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("span",{className:"flex items-center",children:[n.jsx("span",{className:"mr-1",children:Ue(R.customerInfo.orderType)}),R.customerInfo.orderType]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[R.orderItems.length," item",R.orderItems.length!==1?"s":""]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",R.orderSummary.totalAmount.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${we(R.orderStatus)}`,children:R.orderStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F(R.orderSummary.paymentStatus)}`,children:R.orderSummary.paymentStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(R.orderTiming.orderDate).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((ve=R.zohoIntegration)==null?void 0:ve.status)==="pushed"?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(Ib,{className:"h-3 w-3 mr-1"}),"Invoice Created"]}):((xe=R.zohoIntegration)==null?void 0:xe.status)==="failed"?n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Failed"}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Pushed"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[((de=R.zohoIntegration)==null?void 0:de.status)!=="pushed"&&n.jsx("button",{onClick:()=>ie(R._id),disabled:P[R._id]==="pushing",className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:"Push to Zoho as Invoice",children:P[R._id]==="pushing"?n.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-green-600 border-t-transparent rounded-full"}):n.jsx(Ha,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>Z(R),className:"text-indigo-600 hover:text-indigo-900",title:"View Details",children:n.jsx(zi,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>e(`/sales-orders/edit/${R._id}`),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:n.jsx(ys,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>X(R._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(Mt,{className:"h-5 w-5"})})]})})]},R._id)})})]})}),x&&S&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-gray-800 bg-opacity-75 flex justify-center items-center",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl mx-4 my-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Order Details: ",S.orderNumber]}),n.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Customer Information"}),n.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",S.customerInfo.customerName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",S.customerInfo.customerPhone||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",S.customerInfo.customerEmail||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Order Type:"})," ",Ue(S.customerInfo.orderType)," ",S.customerInfo.orderType]}),S.customerInfo.tableNumber&&n.jsxs("p",{children:[n.jsx("strong",{children:"Table:"})," ",S.customerInfo.tableNumber]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Order Summary"}),n.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Outlet:"})," ",S.outletName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${we(S.orderStatus)}`,children:S.orderStatus})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Payment:"})," ",n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F(S.orderSummary.paymentStatus)}`,children:S.orderSummary.paymentStatus})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Method:"})," ",S.orderSummary.paymentMethod]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total:"})," KWD ",S.orderSummary.totalAmount.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Order Items"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.orderItems.map((R,ve)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:R.productName}),n.jsx("div",{className:"text-gray-500",children:R.productCode}),R.specialInstructions&&n.jsx("div",{className:"text-gray-400 text-xs italic",children:R.specialInstructions})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.quantity}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",R.unitPrice.toFixed(2)]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",R.totalPrice.toFixed(2)]})]},ve))})]})})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Close"})})]})})]})},li=()=>{const e=lt(),t=Ta(),[r,a]=C.useState(null),[s,i]=C.useState([]),[o,l]=C.useState(!0),[c,u]=C.useState({orderNumber:"",outletId:"",outletCode:"",outletName:"",customerInfo:{customerName:"",customerPhone:"",customerEmail:"",tableNumber:"",orderType:"Dine-in"},orderItems:[],orderSummary:{subtotal:0,taxAmount:0,discountAmount:0,totalAmount:0,paymentMethod:"Cash",paymentStatus:"Pending"},orderStatus:"Pending",orderTiming:{orderDate:new Date().toISOString().split("T")[0],estimatedPrepTime:15},notes:""}),[d,f]=C.useState({}),[m]=C.useState("");C.useEffect(()=>{const A=new URLSearchParams(t.search).get("outlet");A?p(A):y()},[t.search]);const p=async k=>{try{l(!0);const P={"kuwait-city":"Kuwait City","360-mall":"360 Mall","marina-walk-cafe":"360 Mall","vibes-complex":"Vibes Complex","mall-food-court":"Vibes Complex","taiba-hospital":"Taiba Hospital","drive-thru-express":"Taiba Hospital"}[k]||k,M=await ce.getOutlets({limit:1e3});if(M.success&&Array.isArray(M.data)){const U=M.data.find(W=>W.outletName===P);U&&(a(U),u(W=>({...W,outletId:U._id||U.id,outletCode:U.outletCode,outletName:U.outletName,orderNumber:`SO-${U.outletCode}-${Date.now().toString().slice(-6)}`})))}await h()}catch(A){console.error("Error loading outlet data:",A)}finally{l(!1)}},y=async()=>{try{l(!0);const k=await ce.getOutlets({limit:1e3});if(k.success&&k.data.length>0){const A=k.data[0];a(A),u(P=>({...P,outletId:A._id||A.id,outletCode:A.outletCode,outletName:A.outletName,orderNumber:`SO-${A.outletCode}-${Date.now().toString().slice(-6)}`}))}await h()}catch(k){console.error("Error loading default outlet:",k)}finally{l(!1)}},h=async()=>{try{const k=(r==null?void 0:r.outletName)||c.outletName;let A;k?A=await ce.getOutletFinishedGoods(k,{limit:1e3}):A=await ce.getOutletFinishedGoods("Kuwait City",{limit:1e3}),A.success?i(A.data):(console.log("API failed, loading sample products"),b())}catch(k){console.error("Error loading products:",k),b()}},b=()=>{i([{_id:"fg-001",id:"fg-001",productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages",unitPrice:4.5,description:"Fresh green smoothie with spinach, banana, and apple"},{_id:"fg-002",id:"fg-002",productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals",unitPrice:8.75,description:"High protein meal bowl with quinoa and vegetables"},{_id:"fg-003",id:"fg-003",productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages",unitPrice:5.25,description:"Fresh detox juice blend with celery and cucumber"},{_id:"fg-004",id:"fg-004",productCode:"FG-004",productName:"Quinoa Salad",category:"Meals",unitPrice:7.5,description:"Healthy quinoa salad with mixed vegetables"},{_id:"fg-005",id:"fg-005",productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks",unitPrice:3.25,description:"High protein energy bar for quick nutrition"},{_id:"fg-006",id:"fg-006",productCode:"FG-006",productName:"Fresh Fruit Bowl",category:"Meals",unitPrice:6,description:"Mixed fresh fruit bowl with seasonal fruits"},{_id:"fg-007",id:"fg-007",productCode:"FG-007",productName:"Acai Bowl",category:"Meals",unitPrice:9.5,description:"Nutritious acai bowl with granola and berries"},{_id:"fg-008",id:"fg-008",productCode:"FG-008",productName:"Cold Brew Coffee",category:"Beverages",unitPrice:3.75,description:"Smooth cold brew coffee with natural sweetness"}])},N=["Dine-in","Takeaway","Delivery","Drive-thru"],S=["Cash","Card","Digital Wallet","Credit","Mixed"],v=["Pending","Paid","Partially Paid","Refunded"],x=["Pending","Confirmed","Preparing","Ready","Served","Completed","Cancelled"],g=()=>{const k={};return c.orderNumber.trim()||(k.orderNumber="Order number is required"),c.customerInfo.customerName.trim()||(k.customerName="Customer name is required"),c.customerInfo.orderType||(k.orderType="Order type is required"),c.orderItems.length===0&&(k.orderItems="At least one item is required"),f(k),Object.keys(k).length===0},w=async k=>{if(k.preventDefault(),!!g())try{const A=c.orderItems.reduce((Y,B)=>Y+B.totalPrice,0),P=A*.15,M=A+P-c.orderSummary.discountAmount,U={orderNumber:c.orderNumber,outletId:c.outletId,outletCode:c.outletCode,outletName:c.outletName,customerInfo:c.customerInfo,orderItems:c.orderItems,orderSummary:{...c.orderSummary,subtotal:A,taxAmount:P,totalAmount:M},orderStatus:c.orderStatus,orderTiming:c.orderTiming,notes:c.notes};console.log("Creating Sales Order:",U);const W=await ce.createSalesOrder(U);if(W.success){alert("Sales Order created successfully!");const Y=new URLSearchParams(t.search).get("outlet");if(Y)if(Y==="Central Kitchen")e("/central-kitchen");else{const B=Y.toLowerCase().replace(/\s+/g,"-");e(`/${B}/sales-orders`)}else e("/sales-orders")}else alert("Failed to create Sales Order: "+W.message)}catch(A){console.error("Error creating Sales Order:",A),alert("Error creating Sales Order: "+(A instanceof Error?A.message:"Unknown error"))}},j=(k,A)=>{if(k.includes(".")){const[P,M]=k.split(".");u(U=>({...U,[P]:{...U[P]||{},[M]:A}}))}else u(P=>({...P,[k]:A}));d[k]&&f(P=>({...P,[k]:""}))},O=()=>{const k={productId:"",productCode:"",productName:"",category:"",quantity:1,unitPrice:0,totalPrice:0,specialInstructions:""};u(A=>({...A,orderItems:[...A.orderItems,k]}))},_=(k,A,P)=>{const M=[...c.orderItems];if(M[k]={...M[k],[A]:P},A==="quantity"||A==="unitPrice"){const U=A==="quantity"?Number(P):M[k].quantity,W=A==="unitPrice"?Number(P):M[k].unitPrice;M[k].totalPrice=U*W}if(A==="productId"&&typeof P=="string"){const U=s.find(W=>W._id===P||W.id===P);U&&(M[k].productCode=U.productCode,M[k].productName=U.productName,M[k].category=U.category,M[k].unitPrice=U.unitPrice,M[k].totalPrice=M[k].quantity*U.unitPrice)}u(U=>({...U,orderItems:M}))},E=k=>{const A=c.orderItems.filter((P,M)=>M!==k);u(P=>({...P,orderItems:A}))},T=s.filter(k=>k.productName.toLowerCase().includes(m.toLowerCase())||k.productCode.toLowerCase().includes(m.toLowerCase())||k.category.toLowerCase().includes(m.toLowerCase()));return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading sales order form..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Sales Order"}),n.jsx("p",{className:"text-gray-600",children:r?`${r.outletName} (${r.outletCode})`:"Select an outlet"})]}),n.jsxs("button",{onClick:()=>e("/sales-orders"),className:"btn-secondary flex items-center",children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Back to Sales Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:w,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(tt,{className:"h-5 w-5 mr-2"}),"Order Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${d.orderNumber?"border-red-500":""}`,value:c.orderNumber,onChange:k=>j("orderNumber",k.target.value),placeholder:"Enter order number"}),d.orderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${d.orderDate?"border-red-500":""}`,value:c.orderTiming.orderDate,onChange:k=>j("orderTiming.orderDate",k.target.value)}),d.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Fi,{className:"h-5 w-5 mr-2"}),"Customer Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${d.customerName?"border-red-500":""}`,value:c.customerInfo.customerName,onChange:k=>j("customerInfo.customerName",k.target.value),placeholder:"Enter customer name"}),d.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type *"}),n.jsx("select",{className:`input-field ${d.orderType?"border-red-500":""}`,value:c.customerInfo.orderType,onChange:k=>j("customerInfo.orderType",k.target.value),children:N.map(k=>n.jsx("option",{value:k,children:k},k))}),d.orderType&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderType})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(gE,{className:"h-4 w-4 inline mr-1"}),"Phone Number"]}),n.jsx("input",{type:"tel",className:"input-field",value:c.customerInfo.customerPhone,onChange:k=>j("customerInfo.customerPhone",k.target.value),placeholder:"Enter phone number"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(pE,{className:"h-4 w-4 inline mr-1"}),"Email Address"]}),n.jsx("input",{type:"email",className:"input-field",value:c.customerInfo.customerEmail,onChange:k=>j("customerInfo.customerEmail",k.target.value),placeholder:"Enter email address"})]}),c.customerInfo.orderType==="Dine-in"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Cd,{className:"h-4 w-4 inline mr-1"}),"Table Number"]}),n.jsx("input",{type:"text",className:"input-field",value:c.customerInfo.tableNumber,onChange:k=>j("customerInfo.tableNumber",k.target.value),placeholder:"Enter table number"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[n.jsx(Fr,{className:"h-5 w-5 mr-2"}),"Order Items"]}),n.jsxs("button",{type:"button",onClick:O,className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),c.orderItems.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Fr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:'No items added yet. Click "Add Item" to start building the order.'})]}):n.jsx("div",{className:"space-y-4",children:c.orderItems.map((k,A)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h4",{className:"font-medium text-gray-900",children:["Item ",A+1]}),n.jsx("button",{type:"button",onClick:()=>E(A),className:"text-red-600 hover:text-red-800",children:n.jsx(Mt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),n.jsxs("select",{className:"input-field",value:k.productId,onChange:P=>_(A,"productId",P.target.value),children:[n.jsx("option",{value:"",children:"Select Product"}),T.map(P=>n.jsxs("option",{value:P._id||P.id,children:[P.productName," - ",P.unitPrice.toFixed(2)," KWD"]},P._id||P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),n.jsx("input",{type:"number",min:"1",className:"input-field",value:k.quantity,onChange:P=>_(A,"quantity",parseInt(P.target.value)||1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:k.unitPrice,onChange:P=>_(A,"unitPrice",parseFloat(P.target.value)||0)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:k.totalPrice.toFixed(2),readOnly:!0})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:2,value:k.specialInstructions,onChange:P=>_(A,"specialInstructions",P.target.value),placeholder:"Any special instructions for this item..."})]})]},A))}),d.orderItems&&n.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.orderItems})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtotal (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:c.orderItems.reduce((k,A)=>k+A.totalPrice,0).toFixed(2),readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:c.orderSummary.discountAmount,onChange:k=>j("orderSummary.discountAmount",(parseFloat(k.target.value)||0).toString())})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:(c.orderItems.reduce((k,A)=>k+A.totalPrice,0)*.15).toFixed(2),readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-blue-50 font-semibold",value:(c.orderItems.reduce((k,A)=>k+A.totalPrice,0)+c.orderItems.reduce((k,A)=>k+A.totalPrice,0)*.15-c.orderSummary.discountAmount).toFixed(2),readOnly:!0})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),n.jsx("select",{className:"input-field",value:c.orderSummary.paymentMethod,onChange:k=>j("orderSummary.paymentMethod",k.target.value),children:S.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),n.jsx("select",{className:"input-field",value:c.orderSummary.paymentStatus,onChange:k=>j("orderSummary.paymentStatus",k.target.value),children:v.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),n.jsx("select",{className:"input-field",value:c.orderStatus,onChange:k=>j("orderStatus",k.target.value),children:x.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(px,{className:"h-4 w-4 inline mr-1"}),"Estimated Prep Time (minutes)"]}),n.jsx("input",{type:"number",min:"1",className:"input-field",value:c.orderTiming.estimatedPrepTime,onChange:k=>j("orderTiming.estimatedPrepTime",(parseInt(k.target.value)||15).toString())})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:c.notes,onChange:k=>j("notes",k.target.value),placeholder:"Any additional notes for this order..."})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/sales-orders"),className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Sales Order"]})]})]})})]})};function j1e(e){return{"kuwait-city":"Kuwait City","360-mall":"360 Mall","marina-walk-cafe":"360 Mall","vibes-complex":"Vibes Complex","mall-food-court":"Vibes Complex","taiba-hospital":"Taiba Hospital","drive-thru-express":"Taiba Hospital"}[e.toLowerCase()]||"Kuwait City"}const oo=()=>{const e=lt(),t=Ta(),r=t.pathname.split("/")[1],a=j1e(r);console.log("POSCreateOrder - URL Path:",t.pathname),console.log("POSCreateOrder - Outlet Slug:",r),console.log("POSCreateOrder - Outlet Name:",a);const[s,i]=C.useState([]),[o,l]=C.useState([]),[c,u]=C.useState("finished"),[d,f]=C.useState([]),[m,p]=C.useState(""),[y,h]=C.useState(""),[b,N]=C.useState({name:"",phone:"",email:""}),[S,v]=C.useState("Dine-in"),[x,g]=C.useState("Cash"),[w,j]=C.useState(0),[O]=C.useState(15),[_,E]=C.useState(!1),[T,k]=C.useState(null),[A,P]=C.useState([]),M=[{value:"Dine-in",label:"Dine-in",icon:""},{value:"Takeaway",label:"Takeaway",icon:""},{value:"Delivery",label:"Delivery",icon:""},{value:"Drive-thru",label:"Drive-thru",icon:""}];C.useEffect(()=>{console.log("useEffect triggered - outletName changed to:",a),console.log("useEffect - location.pathname:",t.pathname),console.log("useEffect - outletSlug:",r),P([]),i([]),k(null),U(),W(),Y(),B()},[a,t.pathname]);const U=async()=>{try{console.log("loadOutletData - Looking for outlet:",a);const R=await ce.getOutlets();if(R.success&&Array.isArray(R.data)){console.log("loadOutletData - Available outlets:",R.data.map(xe=>xe.outletName));const ve=R.data.find(xe=>xe.outletName===a);ve?(console.log("loadOutletData - Found outlet match:",ve),k(ve)):console.log("loadOutletData - No outlet match found for:",a)}}catch(R){console.error("Error loading outlet data:",R)}},W=async()=>{try{E(!0);let R;if(console.log("loadProducts - Loading products for outlet:",a),a==="Kuwait City"?(console.log("loadProducts - Calling getKuwaitCityFinishedProducts"),R=await ce.getKuwaitCityFinishedProducts({limit:1e3})):a==="360 Mall"?(console.log("loadProducts - Calling get360MallFinishedProducts"),R=await ce.get360MallFinishedProducts({limit:1e3})):a==="Vibes Complex"?(console.log("loadProducts - Calling getVibeComplexFinishedProducts"),R=await ce.getVibeComplexFinishedProducts({limit:1e3})):a==="Taiba Hospital"?(console.log("loadProducts - Calling getTaibaKitchenFinishedProducts"),R=await ce.getTaibaKitchenFinishedProducts({limit:1e3})):(console.log("loadProducts - Fallback to getFinishedGoods"),R=await ce.getFinishedGoods({limit:1e3})),R.success&&Array.isArray(R.data)){console.log("loadProducts - Raw response data:",R.data.length,"products");const ve=R.data.filter(xe=>xe.isActive&&xe.currentStock>0&&xe.status!=="Out of Stock");console.log("loadProducts - Filtered available products:",ve.length,"products"),console.log("loadProducts - First few products:",ve.slice(0,3).map(xe=>({name:xe.productName,stock:xe.currentStock}))),i(ve)}}catch(R){console.error("Error loading products:",R),i([])}finally{E(!1)}},Y=async()=>{try{const R=await ce.getBillOfMaterials({limit:1e3,sortBy:"productName",sortOrder:"asc"});if(R.success&&Array.isArray(R.data)){const ve=R.data.map(xe=>({id:xe.id||xe._id,bomCode:xe.bomCode,productName:xe.productName,productDescription:xe.productDescription,totalCost:xe.totalCost}));l(ve)}else l([])}catch(R){console.error("Error loading recipes:",R),l([])}},B=async()=>{try{console.log("loadExistingOrders - Loading orders for outlet:",a);const R=await ce.getSalesOrders({outletName:a,limit:10,sortBy:"orderTiming.orderDate",sortOrder:"desc"});R.success&&Array.isArray(R.data)&&(console.log("loadExistingOrders - Found orders:",R.data.length),P(R.data))}catch(R){console.error("Error loading existing orders:",R),P([])}},ae=["All",...Array.from(new Set(s.map(R=>R.category)))],oe=s.filter(R=>{const ve=R.productName.toLowerCase().includes(m.toLowerCase())||R.productCode.toLowerCase().includes(m.toLowerCase()),xe=y===""||y==="All"||R.category===y;return ve&&xe&&R.isActive&&R.currentStock>0}),D=R=>{const ve=d.find(de=>de.kind==="finished"&&de.product&&de.product._id===R._id);if((ve?ve.quantity:0)>=R.currentStock){alert(`Only ${R.currentStock} ${R.unitOfMeasure} available in stock`);return}f(ve?d.map(de=>de.kind==="finished"&&de.product&&de.product._id===R._id?{...de,quantity:de.quantity+1,subtotal:(de.quantity+1)*R.unitPrice}:de):[...d,{kind:"finished",product:R,quantity:1,subtotal:R.unitPrice}])},H=R=>{const ve=d.find(xe=>xe.kind==="recipe"&&xe.recipe&&xe.recipe.bomCode===R.bomCode);f(ve?xe=>xe.map(de=>de.kind==="recipe"&&de.recipe&&de.recipe.bomCode===R.bomCode?{...de,quantity:de.quantity+1,subtotal:(de.quantity+1)*(de.recipe.totalCost||0)}:de):xe=>[...xe,{kind:"recipe",recipe:R,quantity:1,subtotal:R.totalCost||0}])},G=(R,ve)=>{ve<0||f(d.map(xe=>xe.kind==="finished"&&xe.product&&xe.product._id===R?{...xe,quantity:ve,subtotal:ve*xe.product.unitPrice}:xe))},Z=(R,ve)=>{ve<0||f(xe=>xe.map(de=>de.kind==="recipe"&&de.recipe&&de.recipe.bomCode===R.replace("recipe-","")?{...de,quantity:ve,subtotal:ve*(de.recipe.totalCost||0)}:de))},X=R=>{f(ve=>ve.filter(xe=>!(xe.kind==="recipe"&&xe.recipe&&xe.recipe.bomCode===R)))},ie=R=>{f(d.filter(ve=>!(ve.kind==="finished"&&ve.product&&ve.product._id===R)))},pe=()=>d.reduce((R,ve)=>R+ve.subtotal,0),ne=()=>pe()*O/100,ee=()=>pe()*w/100,we=()=>pe()+ne()-ee(),F=async()=>{var xe;if(d.length===0){alert("Please add items to cart before checkout");return}if(!b.name.trim()){alert("Please enter customer name");return}const R=[],ve=d.filter(de=>de.kind==="finished"&&de.product);for(const de of ve)de.quantity>de.product.currentStock&&R.push(`${de.product.productName}: Requested ${de.quantity}, Available ${de.product.currentStock} ${de.product.unitOfMeasure}`);if(R.length>0){const de=`Insufficient stock for the following items:

${R.join(`
`)}

Please adjust quantities and try again.`;alert(de);return}if(T||await U(),!T){alert("Unable to resolve outlet for this order. Please reload the page and try again.");return}E(!0);try{const Ve=d.filter(He=>He.kind==="finished"&&He.product).map(He=>({productId:He.product._id,productCode:He.product.productCode,productName:He.product.productName,category:He.product.category,quantity:He.quantity,unitPrice:He.product.unitPrice,totalPrice:He.subtotal})),it=d.filter(He=>He.kind==="recipe"&&He.recipe).map(He=>({bomCode:He.recipe.bomCode,productName:He.recipe.productName,quantity:He.quantity,unitPrice:He.recipe.totalCost||0})),mt={outletId:(T==null?void 0:T._id)||(T==null?void 0:T.id),outletCode:T==null?void 0:T.outletCode,outletName:a,outletSlug:r,customerInfo:{customerName:b.name,customerPhone:b.phone,customerEmail:b.email,orderType:S},orderItems:Ve,recipeItems:it,orderSummary:{subtotal:pe(),taxAmount:ne(),discountAmount:ee(),totalAmount:we(),paymentMethod:x,paymentStatus:"Paid"},orderStatus:"Completed",orderTiming:{orderDate:new Date().toISOString(),estimatedPrepTime:15},notes:`POS Order - ${S}`,createdBy:"pos-user",updatedBy:"pos-user"};console.log("Creating Sales Order:",mt),console.log("Outlet object:",T),console.log("Outlet slug:",r);const ht=await ce.createSalesOrder(mt);if(ht.success){const He=((xe=ht.data)==null?void 0:xe.orderNumber)||"N/A";alert(`Order ${He} created successfully!
Total: KWD ${we().toFixed(2)}

Please refresh the sales orders page to see the new order.`),f([]),N({name:"",phone:"",email:""}),j(0),await W(),await B(),setTimeout(()=>{const Rt={"Kuwait City":"kuwait-city","360 Mall":"360-mall","Vibes Complex":"vibes-complex","Taiba Hospital":"taiba-hospital"}[a]||r;e(`/${Rt}/sales-orders`)},1e3)}else alert("Failed to create order: "+ht.message)}catch(de){console.error("Error creating order:",de),alert("Error creating order: "+(de instanceof Error?de.message:"Unknown error"))}finally{E(!1)}},Ue=()=>{d.length>0&&window.confirm("Are you sure you want to clear the cart?")&&f([])};return n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:n.jsx(tr,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"POS - Create Order"}),n.jsx("p",{className:"text-gray-600",children:a})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(px,{className:"h-4 w-4"}),n.jsx("span",{children:new Date().toLocaleString()})]})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"inline-flex rounded-md shadow-sm overflow-hidden",role:"group",children:[n.jsx("button",{onClick:()=>u("finished"),className:`px-4 py-2 text-sm font-medium border ${c==="finished"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>u("recipe"),className:`px-4 py-2 text-sm font-medium border -ml-px ${c==="recipe"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipes"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx("div",{className:"card p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:m,onChange:R=>p(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),c==="finished"&&n.jsx("select",{value:y,onChange:R=>h(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ae.map(R=>n.jsx("option",{value:R,children:R},R))})]})}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:c==="finished"?"Available Products":"Available Recipes"}),_?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Loading products..."})]}):c==="finished"?oe.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No products available"}),n.jsx("p",{className:"text-sm",children:"Check back later or contact admin"})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:oe.map(R=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>D(R),onKeyDown:ve=>ve.key==="Enter"&&D(R),role:"button",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:R.productName}),n.jsxs("span",{className:"text-green-600 font-semibold",children:["KWD ",R.unitPrice.toFixed(2)]})]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Code: ",R.productCode]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:R.category}),n.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:["Stock: ",R.currentStock," ",R.unitOfMeasure]})]}),n.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Add to Cart"})]},R._id))}):o.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No recipes available"}),n.jsx("p",{className:"text-sm",children:"Add recipes in Recipe Master (BOM)"})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:o.filter(R=>R.productName.toLowerCase().includes(m.toLowerCase())||R.bomCode.toLowerCase().includes(m.toLowerCase())).map(R=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>H(R),onKeyDown:ve=>ve.key==="Enter"&&H(R),role:"button",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:R.productName}),n.jsx("span",{className:"text-green-600 font-semibold",children:R.totalCost?`KWD ${R.totalCost.toFixed(2)}`:"Recipe"})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",R.bomCode]}),R.productDescription&&n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:R.productDescription}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"text-indigo-600 text-sm font-medium",children:"Add to Cart"})})]},R.bomCode))})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Fr,{className:"h-5 w-5 mr-2"}),"Cart (",d.length,")"]}),d.length>0&&n.jsx("button",{onClick:Ue,className:"text-red-600 hover:text-red-800 text-sm",children:"Clear Cart"})]}),d.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Cart is empty"}),n.jsx("p",{className:"text-sm",children:"Add products to get started"})]}):n.jsx("div",{className:"space-y-3",children:d.map(R=>R.kind==="finished"&&R.product?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:R.product.productName}),n.jsxs("p",{className:"text-xs text-gray-600",children:["KWD ",R.product.unitPrice.toFixed(2)," each"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",R.product.currentStock," ",R.product.unitOfMeasure]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",value:R.quantity.toString(),onChange:ve=>{const xe=parseInt(ve.target.value)||0;xe>=0&&G(R.product._id,xe)},className:"w-16 text-center text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"}),n.jsx("button",{onClick:()=>ie(R.product._id),className:"p-1 text-red-600 hover:bg-red-50 rounded ml-2",children:n.jsx(Mt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"text-right ml-4",children:n.jsxs("p",{className:"font-medium text-sm",children:["KWD ",R.subtotal.toFixed(2)]})})]},R.product._id):R.kind==="recipe"&&R.recipe?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"font-medium text-sm",children:[R.recipe.productName," ",n.jsx("span",{className:"text-xs text-gray-500",children:"(Recipe)"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:R.recipe.totalCost?`KWD ${R.recipe.totalCost.toFixed(2)} each`:"Cost not set"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",value:R.quantity.toString(),onChange:ve=>{const xe=parseInt(ve.target.value)||0;xe>=0&&Z(`recipe-${R.recipe.bomCode}`,xe)},className:"w-16 text-center text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"}),n.jsx("button",{onClick:()=>X(R.recipe.bomCode),className:"p-1 text-red-600 hover:bg-red-50 rounded ml-2",children:n.jsx(Mt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"text-right ml-4",children:n.jsxs("p",{className:"font-medium text-sm",children:["KWD ",R.subtotal.toFixed(2)]})})]},`recipe-${R.recipe.bomCode}`):null)})]}),d.length>0&&n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["KWD ",pe().toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",O,"%):"]}),n.jsxs("span",{children:["KWD ",ne().toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Discount (",w,"%):"]}),n.jsxs("span",{className:"text-red-600",children:["-KWD ",ee().toFixed(2)]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["KWD ",we().toFixed(2)]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Type"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:M.map(R=>n.jsxs("button",{onClick:()=>v(R.value),className:`p-2 text-sm rounded-lg border transition-colors ${S===R.value?"bg-blue-100 border-blue-500 text-blue-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("span",{className:"mr-1",children:R.icon}),R.label]},R.value))})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Customer Info"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Customer name *",value:b.name,onChange:R=>N({...b,name:R.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsx(gE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"tel",placeholder:"Phone number",value:b.phone,onChange:R=>N({...b,phone:R.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(pE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"email",placeholder:"Email (optional)",value:b.email||"",onChange:R=>N({...b,email:R.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Method"}),n.jsxs("select",{value:x,onChange:R=>g(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"Cash",children:"Cash"}),n.jsx("option",{value:"Card",children:"Credit/Debit Card"}),n.jsx("option",{value:"Digital Wallet",children:"Digital Wallet"}),n.jsx("option",{value:"Credit",children:"Credit"}),n.jsx("option",{value:"Mixed",children:"Mixed"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:w,onChange:R=>j(Number(R.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsx("button",{onClick:F,disabled:_||d.length===0,className:"w-full mt-6 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:_?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Mb,{className:"h-4 w-4 mr-2"}),"Complete Order - $",we().toFixed(2)]})})]})]})]})]})})},S1e=({user:e,permissions:t,onClose:r,onSave:a})=>{const[s,i]=C.useState((e==null?void 0:e.permissions)||[]),o=t.reduce((d,f)=>(d[f.module]||(d[f.module]=[]),d[f.module].push(f),d),{}),l=(d,f)=>{i(f?m=>[...m,d]:m=>m.filter(p=>p!==d))},c=(d,f)=>{const m=o[d].map(p=>p.id);i(f?p=>[...new Set([...p,...m])]:p=>p.filter(y=>!m.includes(y)))},u=()=>{e&&(a(e.id,s),r())};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Fi,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Permissions"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," (",e.email,")"]})]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.role})]})]})}),Object.entries(o).map(([d,f])=>{const m=f.every(y=>s.includes(y.id)),p=f.some(y=>s.includes(y.id));return n.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:m,ref:y=>{y&&(y.indeterminate=p&&!m)},onChange:y=>c(d,y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Fb,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:d}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",f.filter(y=>s.includes(y.id)).length,"/",f.length,")"]})]})]})}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(y=>n.jsxs("label",{className:"flex items-start space-x-3",children:[n.jsx("input",{type:"checkbox",checked:s.includes(y.id),onChange:h=>l(y.id,h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:y.category})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:y.description})]})]},y.id))})})]},d)})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx(xE,{className:"h-4 w-4 inline mr-1"}),s.length," permissions selected"]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{onClick:u,className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}):null},k1e=({role:e,permissions:t,onClose:r,onSave:a,onDelete:s})=>{const[i,o]=C.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",permissions:(e==null?void 0:e.permissions)||[]}),l=t.reduce((m,p)=>(m[p.module]||(m[p.module]=[]),m[p.module].push(p),m),{}),c=(m,p)=>{o(p?y=>({...y,permissions:[...y.permissions,m]}):y=>({...y,permissions:y.permissions.filter(h=>h!==m)}))},u=(m,p)=>{const y=l[m].map(h=>h.id);o(p?h=>({...h,permissions:[...new Set([...h.permissions,...y])]}):h=>({...h,permissions:h.permissions.filter(b=>!y.includes(b))}))},d=()=>{i.name.trim()&&i.description.trim()&&(a(i),r())},f=()=>{e&&s&&(s(e.id),r())};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Fb,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Edit Role":"Create New Role"}),n.jsx("p",{className:"text-sm text-gray-600",children:e?"Modify role permissions and settings":"Define a new role with specific permissions"})]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),n.jsx("input",{type:"text",value:i.name,onChange:m=>o(p=>({...p,name:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter role name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Count"}),n.jsx("input",{type:"text",value:(e==null?void 0:e.userCount)||0,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),n.jsx("textarea",{value:i.description,onChange:m=>o(p=>({...p,description:m.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter role description"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Permissions"}),n.jsx("div",{className:"space-y-4",children:Object.entries(l).map(([m,p])=>{const y=p.every(b=>i.permissions.includes(b.id)),h=p.some(b=>i.permissions.includes(b.id));return n.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:y,ref:b=>{b&&(b.indeterminate=h&&!y)},onChange:b=>u(m,b.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("span",{className:"font-medium text-gray-900",children:m}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",p.filter(b=>i.permissions.includes(b.id)).length,"/",p.length,")"]})]})}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(b=>n.jsxs("label",{className:"flex items-start space-x-3",children:[n.jsx("input",{type:"checkbox",checked:i.permissions.includes(b.id),onChange:N=>c(b.id,N.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:b.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:b.category})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:b.description})]})]},b.id))})})]},m)})})]})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[i.permissions.length," permissions selected"]}),e&&s&&n.jsxs("button",{onClick:f,className:"text-red-600 hover:text-red-800 flex items-center space-x-1",children:[n.jsx(Mt,{className:"h-4 w-4"}),n.jsx("span",{children:"Delete Role"})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{onClick:d,className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),e?"Update Role":"Create Role"]})]})]})]})})},C1e=()=>{const[e,t]=C.useState("users"),[r,a]=C.useState([]),[s,i]=C.useState(!1),[o,l]=C.useState({name:"",email:"",password:"",role:"Staff",status:"Active"}),[c,u]=C.useState([{id:"1",name:"Admin",description:"Full system access",permissions:["all"],userCount:1},{id:"2",name:"Manager",description:"Management level access",permissions:["inventory.view","inventory.edit","reports.view","users.view"],userCount:1},{id:"3",name:"Staff",description:"Basic operational access",permissions:["inventory.view","sales.view"],userCount:1}]),[d]=C.useState([{id:"dashboard.view",name:"View Dashboard",description:"Access to main dashboard",category:"Dashboard",module:"Dashboard"},{id:"inventory.view",name:"View Inventory",description:"View inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.edit",name:"Edit Inventory",description:"Modify inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.add",name:"Add Inventory",description:"Add new inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.delete",name:"Delete Inventory",description:"Delete inventory items",category:"Inventory",module:"Inventory Management"},{id:"rawmaterials.view",name:"View Raw Materials",description:"View raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"rawmaterials.edit",name:"Edit Raw Materials",description:"Edit raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"rawmaterials.add",name:"Add Raw Materials",description:"Add new raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"centralkitchen.view",name:"View Central Kitchen",description:"Access central kitchen",category:"Central Kitchen",module:"Central Kitchen"},{id:"centralkitchen.edit",name:"Edit Central Kitchen",description:"Modify central kitchen data",category:"Central Kitchen",module:"Central Kitchen"},{id:"centralkitchen.transfer",name:"Create Transfers",description:"Create transfer orders",category:"Central Kitchen",module:"Central Kitchen"},{id:"outlets.view",name:"View Outlets",description:"View outlet information",category:"Outlets",module:"Outlet Management"},{id:"outlets.edit",name:"Edit Outlets",description:"Modify outlet data",category:"Outlets",module:"Outlet Management"},{id:"outlets.kuwait",name:"Kuwait City Access",description:"Access Kuwait City outlet",category:"Outlets",module:"Outlet Management"},{id:"outlets.mall360",name:"360 Mall Access",description:"Access 360 Mall outlets",category:"Outlets",module:"Outlet Management"},{id:"outlets.taiba",name:"Taiba Hospital Access",description:"Access Taiba Hospital outlet",category:"Outlets",module:"Outlet Management"},{id:"sales.view",name:"View Sales",description:"View sales data",category:"Sales",module:"Sales Management"},{id:"sales.edit",name:"Edit Sales",description:"Modify sales data",category:"Sales",module:"Sales Management"},{id:"sales.create",name:"Create Sales",description:"Create new sales orders",category:"Sales",module:"Sales Management"},{id:"reports.view",name:"View Reports",description:"Access reports",category:"Reports",module:"Reporting"},{id:"reports.export",name:"Export Reports",description:"Export report data",category:"Reports",module:"Reporting"},{id:"users.view",name:"View Users",description:"View user information",category:"Users",module:"User Management"},{id:"users.edit",name:"Edit Users",description:"Modify user data",category:"Users",module:"User Management"},{id:"users.add",name:"Add Users",description:"Add new users",category:"Users",module:"User Management"},{id:"users.delete",name:"Delete Users",description:"Delete users",category:"Users",module:"User Management"},{id:"settings.view",name:"View Settings",description:"Access system settings",category:"Settings",module:"System Settings"},{id:"settings.edit",name:"Edit Settings",description:"Modify system settings",category:"Settings",module:"System Settings"}]),[f,m]=C.useState(null),[p,y]=C.useState(null),[h,b]=C.useState(!1),[N,S]=C.useState(!1),v=d.reduce((k,A)=>(k[A.module]||(k[A.module]=[]),k[A.module].push(A),k),{}),x=(k,A,P)=>{a(M=>M.map(U=>U.id===k?P?{...U,permissions:[...U.permissions,A]}:{...U,permissions:U.permissions.filter(W=>W!==A)}:U))},g=(k,A)=>{a(P=>P.map(M=>M.id===k?{...M,permissions:A}:M))},w=k=>{if(p)u(A=>A.map(P=>P.id===p.id?{...P,...k}:P));else{const A={id:Date.now().toString(),...k,userCount:0};u(P=>[...P,A])}},j=k=>{u(A=>A.filter(P=>P.id!==k))},O=k=>{m(k),b(!0)},_=k=>{y(k),S(!0)},E=()=>{y(null),S(!0)},T=[{id:"users",name:"Users",icon:Rb},{id:"roles",name:"Roles",icon:Fb},{id:"permissions",name:"Permissions",icon:xE}];return se.useEffect(()=>{(async()=>{try{const k=await ce.getUsers();k!=null&&k.success&&a(k.data.map(A=>({id:A._id,name:A.name,email:A.email,role:A.role,status:(A.status||"Active").toLowerCase(),lastLogin:A.updatedAt?new Date(A.updatedAt).toLocaleString():"-",permissions:[]})))}catch{}})()},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(bE,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings & Permissions"}),n.jsx("p",{className:"text-gray-600",children:"Manage user access and system permissions"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-2",children:T.map(k=>n.jsxs("button",{onClick:()=>t(k.id),className:`flex items-center space-x-2 py-2 px-3 font-medium text-sm rounded-md transition-colors ${e===k.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-800 hover:bg-gray-50 border border-transparent"}`,children:[n.jsx(k.icon,{className:"h-4 w-4"}),n.jsx("span",{children:k.name})]},k.id))})}),e==="users"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),n.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name}),n.jsx("div",{className:"text-sm text-gray-500",children:k.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:k.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.lastLogin}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>O(k),className:"text-blue-600 hover:text-blue-900",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Mt,{className:"h-4 w-4"})})]})})]},k.id))})]})})})]}),e==="roles"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Role Management"}),n.jsxs("button",{onClick:E,className:"btn-primary flex items-center",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Role"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(k=>n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.name}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>_(k),className:"text-blue-600 hover:text-blue-900",children:n.jsx(ys,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(Mt,{className:"h-4 w-4"})})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:k.description}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("span",{children:[k.permissions.length," permissions"]}),n.jsxs("span",{children:[k.userCount," users"]})]})]},k.id))})]}),e==="permissions"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Permission Management"}),Object.entries(v).map(([k,A])=>n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:k}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(P=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:P.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:P.category})]}),n.jsx("p",{className:"text-xs text-gray-600",children:P.description})]},P.id))})]},k))]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add User"}),n.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),n.jsx("input",{className:"input-field",placeholder:"Full name",value:o.name,onChange:k=>l({...o,name:k.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",className:"input-field",placeholder:"you@company.com",value:o.email,onChange:k=>l({...o,email:k.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsx("input",{type:"password",className:"input-field",placeholder:"",value:o.password,onChange:k=>l({...o,password:k.target.value})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>i(!1),className:"btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:async()=>{const k=await ce.createUser({name:o.name,email:o.email,password:o.password,role:"Staff",status:"Active"});if(k!=null&&k.success){i(!1),l({name:"",email:"",password:"",role:"Staff",status:"Active"});const A=await ce.getUsers();A!=null&&A.success&&a(A.data.map(P=>({id:P._id,name:P.name,email:P.email,role:P.role,status:(P.status||"Active").toLowerCase(),lastLogin:P.updatedAt?new Date(P.updatedAt).toLocaleString():"-",permissions:[]})))}},className:"btn-primary",children:"Save"})]})]})}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Permissions - ",f.name]}),n.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:n.jsx(wt,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"space-y-6",children:Object.entries(v).map(([k,A])=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:k}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(P=>n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:f.permissions.includes(P.id),onChange:M=>x(f.id,P.id,M.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),n.jsx("div",{className:"text-xs text-gray-500",children:P.description})]})]},P.id))})]},k))}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>m(null),className:"btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:()=>m(null),className:"btn-primary",children:"Save Changes"})]})]})}),h&&f&&n.jsx(S1e,{user:f,permissions:d,onClose:()=>{b(!1),m(null)},onSave:g}),N&&n.jsx(k1e,{role:p,permissions:d,onClose:()=>{S(!1),y(null)},onSave:w,onDelete:j})]})},O1e=()=>{const[e,t]=C.useState([]),[r,a]=C.useState(!1),[s,i]=C.useState(!1),[o,l]=C.useState(1),[c]=C.useState(20),[u,d]=C.useState(0),[f,m]=C.useState(""),p=async()=>{try{a(!0);const b=await ce.getItemsList({page:o,limit:c,search:f});if(b.success){const N=b.data||{},S=N.data||[],v=N.pagination||{};t(S),d(Number(v.total||0))}}finally{a(!1)}};C.useEffect(()=>{p()},[o,c]);const y=async()=>{var b;try{i(!0);const N=await ce.syncItemsListFromZoho();await p();const S=((b=N.data)==null?void 0:b.summary)||(N==null?void 0:N.summary)||{};alert(`Synced. Total: ${S.total??0}, Created: ${S.created??0}, Updated: ${S.updated??0}, Skipped: ${S.skipped??0}`)}catch(N){alert(`Sync failed: ${(N==null?void 0:N.message)||"Unknown error"}`)}finally{i(!1)}},h=Math.max(1,Math.ceil(u/c));return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Items List"}),n.jsxs("button",{onClick:y,disabled:s,className:`btn-primary flex items-center ${s?"opacity-60":""}`,children:[n.jsx(vE,{className:"h-4 w-4 mr-2"}),s?"Syncing":"Sync from Zoho"]})]}),n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("input",{value:f,onChange:b=>m(b.target.value),placeholder:"Search SKU or Name",className:"input-field"}),n.jsx("button",{onClick:()=>{l(1),p()},className:"btn-secondary",children:"Search"})]}),n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-gray-600",children:[n.jsx("th",{className:"px-3 py-2",children:"SKU"}),n.jsx("th",{className:"px-3 py-2",children:"Name"}),n.jsx("th",{className:"px-3 py-2",children:"Zoho Item ID"}),n.jsx("th",{className:"px-3 py-2",children:"Category"}),n.jsx("th",{className:"px-3 py-2",children:"Unit"}),n.jsx("th",{className:"px-3 py-2",children:"Rate"}),n.jsx("th",{className:"px-3 py-2",children:"Updated"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:6,children:"Loading..."})}):e.length?e.map(b=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-3 py-2 font-mono",children:b.sku}),n.jsx("td",{className:"px-3 py-2",children:b.name}),n.jsx("td",{className:"px-3 py-2 font-mono",children:b.zohoItemId||"-"}),n.jsx("td",{className:"px-3 py-2",children:b.category||"-"}),n.jsx("td",{className:"px-3 py-2",children:b.unit||"-"}),n.jsx("td",{className:"px-3 py-2",children:Number(b.rate||0).toFixed(3)}),n.jsx("td",{className:"px-3 py-2",children:b.updatedAt?new Date(b.updatedAt).toLocaleString():"-"})]},`${b.sku}`)):n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:6,children:"No items"})})})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",o," of ",h]}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{disabled:o<=1,onClick:()=>l(b=>Math.max(1,b-1)),className:"btn-secondary",children:"Prev"}),n.jsx("button",{disabled:o>=h,onClick:()=>l(b=>Math.min(h,b+1)),className:"btn-secondary",children:"Next"})]})]})]})]})},_1e=()=>{const[e,t]=C.useState([]),[r,a]=C.useState(!1),[s,i]=C.useState(!1),o=async()=>{a(!0);try{const c=await ce.getLocationsList({limit:200});if(c.success){const u=c.data||{};t(u.data||[])}}finally{a(!1)}};C.useEffect(()=>{o()},[]);const l=async()=>{i(!0);try{await ce.syncLocationsFromZoho(),await o()}finally{i(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Locations"}),n.jsxs("button",{onClick:l,disabled:s,className:`btn-primary flex items-center ${s?"opacity-60":""}`,children:[n.jsx(vE,{className:"h-4 w-4 mr-2"}),s?"Syncing":"Sync from Zoho"]})]}),n.jsx("div",{className:"card p-4",children:n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-gray-600",children:[n.jsx("th",{className:"px-3 py-2",children:"Zoho Location ID"}),n.jsx("th",{className:"px-3 py-2",children:"Location Name"}),n.jsx("th",{className:"px-3 py-2",children:"Updated"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:3,children:"Loading..."})}):e.length?e.map(c=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-3 py-2 font-mono",children:c.zohoLocationId}),n.jsx("td",{className:"px-3 py-2",children:c.locationName}),n.jsx("td",{className:"px-3 py-2",children:c.updatedAt?new Date(c.updatedAt).toLocaleString():"-"})]},c.zohoLocationId)):n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:3,children:"No locations"})})})]})})})]})},T1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},E1e=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"Kuwait City",fromWarehouseName:"Kuwait City",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.getKuwaitCityRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{var g,w;if(x.preventDefault(),!!h())try{const j={fromOutlet:"Kuwait City",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(_=>({itemType:"Raw Material",itemCode:_.materialCode||"",itemName:_.materialName||"",category:"",subCategory:"",unitOfMeasure:_.unitOfMeasure,quantity:_.quantity,unitPrice:_.unitPrice,notes:_.remarks})),notes:a.notes,requestedBy:"Kuwait City Manager"},O=await ce.createTransferOrder(j);if(console.log(" Kuwait City: Transfer order response:",O),console.log(" Kuwait City: response.data:",O.data),console.log(" Kuwait City: response.data._id:",(g=O.data)==null?void 0:g._id),console.log(" Kuwait City: response.data.id:",(w=O.data)==null?void 0:w.id),O.success){try{const _=a.items.map(()=>"Raw Material"),E=[...new Set(_)],T=E.length===1?E[0]:"Mixed",k=a.items.map(M=>`${M.materialName} (${M.quantity} ${M.unitOfMeasure})`).join(", "),A={title:`Transfer Request from Kuwait City - ${T}`,message:`Transfer order #${j.fromOutlet}-${Date.now()} from Kuwait City. Items: ${k}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Kuwait City",transferOrderId:O.data._id||O.data.id||O.data.transferId||null,itemType:T,priority:a.priority==="Urgent"?"high":"normal"};console.log(" Kuwait City: Creating notification with data:",A),console.log(" Kuwait City: transferOrderId being set to:",A.transferOrderId),console.log(" Kuwait City: response.data keys:",Object.keys(O.data)),console.log(" Kuwait City: response.data values:",O.data);const P=await ce.createNotification(A);console.log("Notification sent to Central Kitchen:",P)}catch(_){console.error("Failed to send notification to Central Kitchen:",_)}alert("Transfer order created successfully!"),e("/kuwait-city/raw-materials")}else throw new Error(O.message||"Failed to create transfer order")}catch(j){console.error("Error creating transfer order:",j),alert("Error creating transfer order: "+(j instanceof Error?j.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/kuwait-city/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(T1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Raw Material",options:t.map(w=>({value:w.materialCode,label:`${w.materialCode} - ${w.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/kuwait-city/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},A1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},P1e=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"Kuwait City",fromWarehouseName:"Kuwait City",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.getKuwaitCityFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Kuwait City",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Kuwait City Manager"},w=await ce.createTransferOrder(g);if(w.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),T={title:`Transfer Request from Kuwait City - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Kuwait City. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Kuwait City",transferOrderId:w.data._id||w.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},k=await ce.createNotification(T);console.log("Notification sent to Central Kitchen:",k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/kuwait-city/finished-goods")}else throw new Error(w.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/kuwait-city/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(A1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Finished Good",options:t.map(w=>({value:w.productCode,label:`${w.productCode} - ${w.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/kuwait-city/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},D1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},I1e=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"360 Mall",fromWarehouseName:"360 Mall",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.get360MallRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"360 Mall",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"360 Mall Manager"},w=await ce.createTransferOrder(g);if(w.success){console.log(" 360 Mall: Transfer order created successfully:",w.data);try{const j=a.items.map(()=>"Raw Material"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),T={title:`Transfer Request from 360 Mall - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from 360 Mall. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"360 Mall",transferOrderId:w.data._id||w.data.id||w.data.transferId||null,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};console.log(" 360 Mall: Attempting to create notification:",T);const k=await ce.createNotification(T);console.log(" 360 Mall: Notification response:",k),k.success?console.log(" 360 Mall: Notification sent to Central Kitchen successfully!"):console.error(" 360 Mall: Failed to send notification:",k)}catch(j){console.error(" 360 Mall: Error sending notification to Central Kitchen:",j),console.error(" 360 Mall: Notification error details:",j.message)}alert("Transfer order created successfully!"),e("/360-mall/raw-materials")}else throw new Error(w.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/360-mall/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(D1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Raw Material",options:t.map(w=>({value:w.materialCode,label:`${w.materialCode} - ${w.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/360-mall/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},M1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},F1e=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"360 Mall",fromWarehouseName:"360 Mall",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.get360MallFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"360 Mall",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"360 Mall Manager"},w=await ce.createTransferOrder(g);if(w.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),T={title:`Transfer Request from 360 Mall - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from 360 Mall. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"360 Mall",transferOrderId:w.data._id||w.data.id||w.data.transferId||null,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},k=await ce.createNotification(T);console.log("Notification sent to Central Kitchen:",k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/360-mall/finished-goods")}else throw new Error(w.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/360-mall/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(M1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Finished Good",options:t.map(w=>({value:w.productCode,label:`${w.productCode} - ${w.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/360-mall/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},R1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},A_=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"Vibes Complex",fromWarehouseName:"Vibes Complex",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.getVibeComplexRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Vibes Complex",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Vibes Complex Manager"},w=await ce.createTransferOrder(g);if(w.success){try{const j=a.items.map(()=>"Raw Material"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),T={title:`Transfer Request from Vibes Complex - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Vibes Complex. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Vibes Complex",transferOrderId:w.data._id||w.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},k=await ce.createNotification(T);console.log("Notification sent to Central Kitchen:",k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/marina-walk-cafe/raw-materials")}else throw new Error(w.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(R1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Raw Material",options:t.map(w=>({value:w.materialCode,label:`${w.materialCode} - ${w.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/marina-walk-cafe/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},L1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},P_=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"Vibes Complex",fromWarehouseName:"Vibes Complex",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.getVibeComplexFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Vibes Complex",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Vibes Complex Manager"},w=await ce.createTransferOrder(g);if(w.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(k=>`${k.materialName} (${k.quantity} ${k.unitOfMeasure})`).join(", "),T={title:`Transfer Request from Vibes Complex - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Vibes Complex. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Vibes Complex",transferOrderId:w.data._id||w.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await ce.createNotification(T)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/marina-walk-cafe/finished-goods")}else throw new Error(w.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(L1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Finished Good",options:t.map(w=>({value:w.productCode,label:`${w.productCode} - ${w.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/marina-walk-cafe/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},$1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},D_=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"Taiba Hospital",fromWarehouseName:"Taiba Hospital",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.getTaibaKitchenRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Taiba Hospital",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Taiba Hospital Manager"},w=await ce.createTransferOrder(g);if(w.success){try{const j=a.items.map(()=>"Raw Material"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(k=>`${k.materialName} (${k.quantity} ${k.unitOfMeasure})`).join(", "),T={title:`Transfer Request from Taiba Hospital - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Taiba Hospital. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Taiba Hospital",transferOrderId:w.data._id||w.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await ce.createNotification(T)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/drive-thru-express/raw-materials")}else throw new Error(w.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/drive-thru-express/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx($1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Raw Material",options:t.map(w=>({value:w.materialCode,label:`${w.materialCode} - ${w.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/drive-thru-express/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},B1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,o]=C.useState(!1),[l,c]=C.useState(""),[u,d]=C.useState(r),f=C.useRef(null),m=C.useRef(null);C.useEffect(()=>{d(l?r.filter(h=>h.label.toLowerCase().includes(l.toLowerCase())||h.value.toLowerCase().includes(l.toLowerCase())):r)},[l,r]),C.useEffect(()=>{const h=b=>{f.current&&!f.current.contains(b.target)&&(o(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),C.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),o(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&o(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(Sa,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:l,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},I_=()=>{const e=lt(),[t,r]=C.useState([]),[a,s]=C.useState({transferNumber:"",fromWarehouseId:"Taiba Hospital",fromWarehouseName:"Taiba Hospital",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,o]=C.useState({}),[l,c]=C.useState(!0);C.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],w=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(O=>({...O,transferNumber:w,transferDate:x,expectedDeliveryDate:g}));const j=await ce.getTaibaKitchenFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(w=>({...w,[x]:g})),i[x]&&o(w=>({...w,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,w)=>{s(j=>({...j,items:j.items.map((O,_)=>{if(_===x){const E={...O,[g]:w};return(g==="quantity"||g==="unitPrice")&&(E.totalPrice=E.quantity*E.unitPrice),E}return O})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(O=>O.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((w,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),o(x),Object.keys(x).length===0},b=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Taiba Hospital",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Taiba Hospital Manager"},w=await ce.createTransferOrder(g);if(w.success){try{const j=a.items.map(()=>"Finished Goods"),O=[...new Set(j)],_=O.length===1?O[0]:"Mixed",E=a.items.map(k=>`${k.materialName} (${k.quantity} ${k.unitOfMeasure})`).join(", "),T={title:`Transfer Request from Taiba Hospital - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Taiba Hospital. Items: ${E}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Taiba Hospital",transferOrderId:w.data._id||w.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await ce.createNotification(T)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/drive-thru-express/finished-goods")}else throw new Error(w.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},N=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],v=["Internal","External","Emergency"];return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/drive-thru-express/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(tr,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:v.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:N.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(B1e,{value:x.materialCode,onChange:w=>p(g,w),placeholder:"Select Finished Good",options:t.map(w=>({value:w.productCode,label:`${w.productCode} - ${w.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:w=>m(g,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:w=>m(g,"remarks",w.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(Mt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/drive-thru-express/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(wt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx($t,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})};function U1e(){const t=Ta().pathname==="/login",r=typeof window<"u"?localStorage.getItem("auth_token"):null,a=typeof window<"u"?(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})():null,s=!!(a!=null&&a.isAdmin);return t?n.jsx(Vp,{children:n.jsx(Pe,{path:"/login",element:n.jsx(bO,{})})}):r?n.jsx(u8,{children:n.jsxs(Vp,{children:[n.jsx(Pe,{path:"/",element:n.jsx(vO,{})}),n.jsx(Pe,{path:"/dashboard",element:n.jsx(vO,{})}),n.jsx(Pe,{path:"/raw-materials",element:n.jsx(Wle,{})}),n.jsx(Pe,{path:"/raw-materials/add",element:n.jsx(qle,{})}),n.jsx(Pe,{path:"/raw-materials/edit/:id",element:n.jsx(Kle,{})}),n.jsx(Pe,{path:"/bill-of-materials",element:n.jsx(Vle,{})}),n.jsx(Pe,{path:"/bill-of-materials/add",element:n.jsx(Hle,{})}),n.jsx(Pe,{path:"/bill-of-materials/edit/:id",element:n.jsx(Gle,{})}),n.jsx(Pe,{path:"/job-orders",element:n.jsx(Xle,{})}),n.jsx(Pe,{path:"/job-orders/add",element:n.jsx(Qle,{})}),n.jsx(Pe,{path:"/job-orders/edit/:id",element:n.jsx(Zle,{})}),n.jsx(Pe,{path:"/purchase-orders",element:n.jsx(ece,{})}),n.jsx(Pe,{path:"/purchase-orders/add",element:n.jsx(tce,{})}),n.jsx(Pe,{path:"/purchase-orders/edit/:id",element:n.jsx(rce,{})}),n.jsx(Pe,{path:"/items-list",element:n.jsx(O1e,{})}),n.jsx(Pe,{path:"/locations-list",element:n.jsx(_1e,{})}),n.jsx(Pe,{path:"/good-receipt-notes",element:n.jsx(ace,{})}),n.jsx(Pe,{path:"/good-receipt-notes/add",element:n.jsx(nce,{})}),n.jsx(Pe,{path:"/good-receipt-notes/edit/:id",element:n.jsx(sce,{})}),n.jsx(Pe,{path:"/warehouse-master",element:n.jsx(ice,{})}),n.jsx(Pe,{path:"/warehouse-master/add",element:n.jsx(oce,{})}),n.jsx(Pe,{path:"/warehouse-master/edit/:id",element:n.jsx(lce,{})}),n.jsx(Pe,{path:"/transfer-orders",element:n.jsx(cce,{})}),n.jsx(Pe,{path:"/transfer-orders/edit/:id",element:n.jsx(uce,{})}),n.jsx(Pe,{path:"/outlets",element:n.jsx(dce,{})}),n.jsx(Pe,{path:"/outlets/add",element:n.jsx(fce,{})}),n.jsx(Pe,{path:"/outlets/edit/:id",element:n.jsx(mce,{})}),s&&n.jsxs(n.Fragment,{children:[n.jsx(Pe,{path:"/central-kitchen",element:n.jsx(hce,{})}),n.jsx(Pe,{path:"/central-kitchen/raw-materials",element:n.jsx(xce,{})}),n.jsx(Pe,{path:"/central-kitchen/finished-goods",element:n.jsx(yce,{})}),n.jsx(Pe,{path:"/central-kitchen/make-finished-good",element:n.jsx(vce,{})}),n.jsx(Pe,{path:"/central-kitchen/create-transfer",element:n.jsx(wce,{})})]}),n.jsx(Pe,{path:"/kuwait-city",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(qg,{})})}),n.jsx(Pe,{path:"/kuwait-city/raw-materials",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(qg,{})})}),n.jsx(Pe,{path:"/kuwait-city/finished-goods",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(qg,{})})}),n.jsx(Pe,{path:"/kuwait-city/request-raw-materials",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(E1e,{})})}),n.jsx(Pe,{path:"/kuwait-city/request-finished-goods",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(P1e,{})})}),n.jsx(Pe,{path:"/360-mall",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(Kg,{})})}),n.jsx(Pe,{path:"/360-mall/raw-materials",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(Kg,{})})}),n.jsx(Pe,{path:"/360-mall/finished-goods",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(Kg,{})})}),n.jsx(Pe,{path:"/360-mall/request-raw-materials",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(I1e,{})})}),n.jsx(Pe,{path:"/360-mall/request-finished-goods",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(F1e,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(bl,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe/raw-materials",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(bl,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe/finished-goods",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(bl,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe/request-raw-materials",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(A_,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe/request-finished-goods",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(P_,{})})}),n.jsx(Pe,{path:"/vibes-complex",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(bl,{})})}),n.jsx(Pe,{path:"/vibes-complex/raw-materials",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(bl,{})})}),n.jsx(Pe,{path:"/vibes-complex/finished-goods",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(bl,{})})}),n.jsx(Pe,{path:"/vibes-complex/request-raw-materials",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(A_,{})})}),n.jsx(Pe,{path:"/vibes-complex/request-finished-goods",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(P_,{})})}),n.jsx(Pe,{path:"/drive-thru-express",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(wl,{})})}),n.jsx(Pe,{path:"/drive-thru-express/raw-materials",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(wl,{})})}),n.jsx(Pe,{path:"/drive-thru-express/finished-goods",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(wl,{})})}),n.jsx(Pe,{path:"/drive-thru-express/request-raw-materials",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(D_,{})})}),n.jsx(Pe,{path:"/drive-thru-express/request-finished-goods",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(I_,{})})}),n.jsx(Pe,{path:"/taiba-hospital",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(wl,{})})}),n.jsx(Pe,{path:"/taiba-hospital/raw-materials",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(wl,{})})}),n.jsx(Pe,{path:"/taiba-hospital/finished-goods",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(wl,{})})}),n.jsx(Pe,{path:"/taiba-hospital/request-raw-materials",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(D_,{})})}),n.jsx(Pe,{path:"/taiba-hospital/request-finished-goods",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(I_,{})})}),n.jsx(Pe,{path:"/raw-material-forecast",element:n.jsx(w1e,{})}),n.jsx(Pe,{path:"/raw-material-forecast/add",element:n.jsx(N1e,{})}),n.jsx(Pe,{path:"/sales-orders",element:n.jsx(oi,{})}),n.jsx(Pe,{path:"/sales-orders/add",element:n.jsx(li,{})}),n.jsx(Pe,{path:"/kuwait-city/sales-orders",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(oi,{})})}),n.jsx(Pe,{path:"/kuwait-city/sales-orders/add",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(li,{})})}),n.jsx(Pe,{path:"/kuwait-city/pos-sales/create-order",element:n.jsx(rt,{allowedOutletCodes:["KUWAIT_CITY"],children:n.jsx(oo,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe/sales-orders",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(oi,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe/sales-orders/add",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(li,{})})}),n.jsx(Pe,{path:"/marina-walk-cafe/pos-sales/create-order",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(oo,{})})}),n.jsx(Pe,{path:"/360-mall/sales-orders",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(oi,{})})}),n.jsx(Pe,{path:"/360-mall/sales-orders/add",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(li,{})})}),n.jsx(Pe,{path:"/360-mall/pos-sales/create-order",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(oo,{})})}),n.jsx(Pe,{path:"/mall-food-court/sales-orders",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(oi,{})})}),n.jsx(Pe,{path:"/mall-food-court/sales-orders/add",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(li,{})})}),n.jsx(Pe,{path:"/mall-food-court/pos-sales/create-order",element:n.jsx(rt,{allowedOutletCodes:["MALL_360"],children:n.jsx(oo,{})})}),n.jsx(Pe,{path:"/vibes-complex/sales-orders",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(oi,{})})}),n.jsx(Pe,{path:"/vibes-complex/sales-orders/add",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(li,{})})}),n.jsx(Pe,{path:"/vibes-complex/pos-sales/create-order",element:n.jsx(rt,{allowedOutletCodes:["VIBE_COMPLEX"],children:n.jsx(oo,{})})}),n.jsx(Pe,{path:"/drive-thru-express/sales-orders",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(oi,{})})}),n.jsx(Pe,{path:"/drive-thru-express/sales-orders/add",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(li,{})})}),n.jsx(Pe,{path:"/drive-thru-express/pos-sales/create-order",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(oo,{})})}),n.jsx(Pe,{path:"/taiba-hospital/sales-orders",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(oi,{})})}),n.jsx(Pe,{path:"/taiba-hospital/sales-orders/add",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(li,{})})}),n.jsx(Pe,{path:"/taiba-hospital/pos-sales/create-order",element:n.jsx(rt,{allowedOutletCodes:["TAIBA_HOSPITAL"],children:n.jsx(oo,{})})}),s?n.jsx(Pe,{path:"/settings",element:n.jsx(C1e,{})}):n.jsx(Pe,{path:"/settings",element:n.jsx(tE,{to:"/dashboard",replace:!0})})]})}):n.jsx(Vp,{children:n.jsx(Pe,{path:"*",element:n.jsx(bO,{})})})}Vg.createRoot(document.getElementById("root")).render(n.jsx(se.StrictMode,{children:n.jsx(iR,{store:GR,children:n.jsx(F5,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsx(U1e,{})})})}));
