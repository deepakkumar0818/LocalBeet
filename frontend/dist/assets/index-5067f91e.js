var uI=Object.defineProperty;var dI=(e,t,r)=>t in e?uI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var PN=(e,t,r)=>(dI(e,typeof t!="symbol"?t+"":t,r),r);function fI(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ft(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O4={exports:{}},Uh={},E4={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=Symbol.for("react.element"),mI=Symbol.for("react.portal"),hI=Symbol.for("react.fragment"),xI=Symbol.for("react.strict_mode"),pI=Symbol.for("react.profiler"),gI=Symbol.for("react.provider"),yI=Symbol.for("react.context"),vI=Symbol.for("react.forward_ref"),bI=Symbol.for("react.suspense"),wI=Symbol.for("react.memo"),NI=Symbol.for("react.lazy"),DN=Symbol.iterator;function jI(e){return e===null||typeof e!="object"?null:(e=DN&&e[DN]||e["@@iterator"],typeof e=="function"?e:null)}var T4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A4=Object.assign,P4={};function Oc(e,t,r){this.props=e,this.context=t,this.refs=P4,this.updater=r||T4}Oc.prototype.isReactComponent={};Oc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function D4(){}D4.prototype=Oc.prototype;function S1(e,t,r){this.props=e,this.context=t,this.refs=P4,this.updater=r||T4}var k1=S1.prototype=new D4;k1.constructor=S1;A4(k1,Oc.prototype);k1.isPureReactComponent=!0;var IN=Array.isArray,I4=Object.prototype.hasOwnProperty,C1={current:null},F4={key:!0,ref:!0,__self:!0,__source:!0};function M4(e,t,r){var a,s={},i=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)I4.call(t,a)&&!F4.hasOwnProperty(a)&&(s[a]=t[a]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in o=e.defaultProps,o)s[a]===void 0&&(s[a]=o[a]);return{$$typeof:xf,type:e,key:i,ref:l,props:s,_owner:C1.current}}function SI(e,t){return{$$typeof:xf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _1(e){return typeof e=="object"&&e!==null&&e.$$typeof===xf}function kI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var FN=/\/+/g;function up(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kI(""+e.key):t.toString(36)}function M0(e,t,r,a,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case xf:case mI:l=!0}}if(l)return l=e,s=s(l),e=a===""?"."+up(l,0):a,IN(s)?(r="",e!=null&&(r=e.replace(FN,"$&/")+"/"),M0(s,t,r,"",function(u){return u})):s!=null&&(_1(s)&&(s=SI(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(FN,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=a===""?".":a+":",IN(e))for(var o=0;o<e.length;o++){i=e[o];var c=a+up(i,o);l+=M0(i,t,r,c,s)}else if(c=jI(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=a+up(i,o++),l+=M0(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Kf(e,t,r){if(e==null)return e;var a=[],s=0;return M0(e,a,"","",function(i){return t.call(r,i,s++)}),a}function CI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var va={current:null},R0={transition:null},_I={ReactCurrentDispatcher:va,ReactCurrentBatchConfig:R0,ReactCurrentOwner:C1};function R4(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:Kf,forEach:function(e,t,r){Kf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kf(e,function(){t++}),t},toArray:function(e){return Kf(e,function(t){return t})||[]},only:function(e){if(!_1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ut.Component=Oc;ut.Fragment=hI;ut.Profiler=pI;ut.PureComponent=S1;ut.StrictMode=xI;ut.Suspense=bI;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_I;ut.act=R4;ut.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=A4({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=C1.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)I4.call(t,c)&&!F4.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];a.children=o}return{$$typeof:xf,type:e.type,key:s,ref:i,props:a,_owner:l}};ut.createContext=function(e){return e={$$typeof:yI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gI,_context:e},e.Consumer=e};ut.createElement=M4;ut.createFactory=function(e){var t=M4.bind(null,e);return t.type=e,t};ut.createRef=function(){return{current:null}};ut.forwardRef=function(e){return{$$typeof:vI,render:e}};ut.isValidElement=_1;ut.lazy=function(e){return{$$typeof:NI,_payload:{_status:-1,_result:e},_init:CI}};ut.memo=function(e,t){return{$$typeof:wI,type:e,compare:t===void 0?null:t}};ut.startTransition=function(e){var t=R0.transition;R0.transition={};try{e()}finally{R0.transition=t}};ut.unstable_act=R4;ut.useCallback=function(e,t){return va.current.useCallback(e,t)};ut.useContext=function(e){return va.current.useContext(e)};ut.useDebugValue=function(){};ut.useDeferredValue=function(e){return va.current.useDeferredValue(e)};ut.useEffect=function(e,t){return va.current.useEffect(e,t)};ut.useId=function(){return va.current.useId()};ut.useImperativeHandle=function(e,t,r){return va.current.useImperativeHandle(e,t,r)};ut.useInsertionEffect=function(e,t){return va.current.useInsertionEffect(e,t)};ut.useLayoutEffect=function(e,t){return va.current.useLayoutEffect(e,t)};ut.useMemo=function(e,t){return va.current.useMemo(e,t)};ut.useReducer=function(e,t,r){return va.current.useReducer(e,t,r)};ut.useRef=function(e){return va.current.useRef(e)};ut.useState=function(e){return va.current.useState(e)};ut.useSyncExternalStore=function(e,t,r){return va.current.useSyncExternalStore(e,t,r)};ut.useTransition=function(){return va.current.useTransition()};ut.version="18.3.1";E4.exports=ut;var O=E4.exports;const ie=Ft(O),OI=fI({__proto__:null,default:ie},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI=O,TI=Symbol.for("react.element"),AI=Symbol.for("react.fragment"),PI=Object.prototype.hasOwnProperty,DI=EI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,II={key:!0,ref:!0,__self:!0,__source:!0};function L4(e,t,r){var a,s={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)PI.call(t,a)&&!II.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:TI,type:e,key:i,ref:l,props:s,_owner:DI.current}}Uh.Fragment=AI;Uh.jsx=L4;Uh.jsxs=L4;O4.exports=Uh;var n=O4.exports,Lg={},$4={exports:{}},Ga={},B4={exports:{}},U4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,B){var ee=K.length;K.push(B);e:for(;0<ee;){var oe=ee-1>>>1,R=K[oe];if(0<s(R,B))K[oe]=B,K[ee]=R,ee=oe;else break e}}function r(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var B=K[0],ee=K.pop();if(ee!==B){K[0]=ee;e:for(var oe=0,R=K.length,V=R>>>1;oe<V;){var X=2*(oe+1)-1,J=K[X],Z=X+1,le=K[Z];if(0>s(J,ee))Z<R&&0>s(le,J)?(K[oe]=le,K[Z]=ee,oe=Z):(K[oe]=J,K[X]=ee,oe=X);else if(Z<R&&0>s(le,ee))K[oe]=le,K[Z]=ee,oe=Z;else break e}}return B}function s(K,B){var ee=K.sortIndex-B.sortIndex;return ee!==0?ee:K.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,f=null,m=3,p=!1,y=!1,h=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var B=r(u);B!==null;){if(B.callback===null)a(u);else if(B.startTime<=K)a(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function x(K){if(h=!1,b(K),!y)if(r(c)!==null)y=!0,U(g);else{var B=r(u);B!==null&&W(x,B.startTime-K)}}function g(K,B){y=!1,h&&(h=!1,w(C),C=-1),p=!0;var ee=m;try{for(b(B),f=r(c);f!==null&&(!(f.expirationTime>B)||K&&!E());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,m=f.priorityLevel;var R=oe(f.expirationTime<=B);B=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(c)&&a(c),b(B)}else a(c);f=r(c)}if(f!==null)var V=!0;else{var X=r(u);X!==null&&W(x,X.startTime-B),V=!1}return V}finally{f=null,m=ee,p=!1}}var N=!1,j=null,C=-1,_=5,T=-1;function E(){return!(e.unstable_now()-T<_)}function k(){if(j!==null){var K=e.unstable_now();T=K;var B=!0;try{B=j(!0,K)}finally{B?A():(N=!1,j=null)}}else N=!1}var A;if(typeof S=="function")A=function(){S(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,F=P.port2;P.port1.onmessage=k,A=function(){F.postMessage(null)}}else A=function(){v(k,0)};function U(K){j=K,N||(N=!0,A())}function W(K,B){C=v(function(){K(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,U(g))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(K){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var ee=m;m=B;try{return K()}finally{m=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,B){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ee=m;m=K;try{return B()}finally{m=ee}},e.unstable_scheduleCallback=function(K,B,ee){var oe=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?oe+ee:oe):ee=oe,K){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=ee+R,K={id:d++,callback:B,priorityLevel:K,startTime:ee,expirationTime:R,sortIndex:-1},ee>oe?(K.sortIndex=ee,t(u,K),r(c)===null&&K===r(u)&&(h?(w(C),C=-1):h=!0,W(x,ee-oe))):(K.sortIndex=R,t(c,K),y||p||(y=!0,U(g))),K},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(K){var B=m;return function(){var ee=m;m=B;try{return K.apply(this,arguments)}finally{m=ee}}}})(U4);B4.exports=U4;var FI=B4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI=O,qa=FI;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W4=new Set,Gu={};function Wl(e,t){Go(e,t),Go(e+"Capture",t)}function Go(e,t){for(Gu[e]=t,e=0;e<t.length;e++)W4.add(t[e])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$g=Object.prototype.hasOwnProperty,RI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,MN={},RN={};function LI(e){return $g.call(RN,e)?!0:$g.call(MN,e)?!1:RI.test(e)?RN[e]=!0:(MN[e]=!0,!1)}function $I(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function BI(e,t,r,a){if(t===null||typeof t>"u"||$I(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ba(e,t,r,a,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gr[e]=new ba(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gr[t]=new ba(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gr[e]=new ba(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gr[e]=new ba(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gr[e]=new ba(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gr[e]=new ba(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gr[e]=new ba(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gr[e]=new ba(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gr[e]=new ba(e,5,!1,e.toLowerCase(),null,!1,!1)});var O1=/[\-:]([a-z])/g;function E1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(O1,E1);Gr[t]=new ba(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(O1,E1);Gr[t]=new ba(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(O1,E1);Gr[t]=new ba(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gr[e]=new ba(e,1,!1,e.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gr[e]=new ba(e,1,!1,e.toLowerCase(),null,!0,!0)});function T1(e,t,r,a){var s=Gr.hasOwnProperty(t)?Gr[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(BI(t,r,s,a)&&(r=null),a||s===null?LI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,a=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Bs=MI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zf=Symbol.for("react.element"),xo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),A1=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),q4=Symbol.for("react.provider"),K4=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),Ug=Symbol.for("react.suspense"),Wg=Symbol.for("react.suspense_list"),D1=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),z4=Symbol.for("react.offscreen"),LN=Symbol.iterator;function Qc(e){return e===null||typeof e!="object"?null:(e=LN&&e[LN]||e["@@iterator"],typeof e=="function"?e:null)}var er=Object.assign,dp;function pu(e){if(dp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dp=t&&t[1]||""}return`
`+dp+e}var fp=!1;function mp(e,t){if(!e||fp)return"";fp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var a=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){a=u}e.call(t.prototype)}else{try{throw Error()}catch(u){a=u}e()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=a.stack.split(`
`),l=s.length-1,o=i.length-1;1<=l&&0<=o&&s[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==i[o]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{fp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?pu(e):""}function UI(e){switch(e.tag){case 5:return pu(e.type);case 16:return pu("Lazy");case 13:return pu("Suspense");case 19:return pu("SuspenseList");case 0:case 2:case 15:return e=mp(e.type,!1),e;case 11:return e=mp(e.type.render,!1),e;case 1:return e=mp(e.type,!0),e;default:return""}}function qg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case po:return"Fragment";case xo:return"Portal";case Bg:return"Profiler";case A1:return"StrictMode";case Ug:return"Suspense";case Wg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K4:return(e.displayName||"Context")+".Consumer";case q4:return(e._context.displayName||"Context")+".Provider";case P1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D1:return t=e.displayName||null,t!==null?t:qg(e.type)||"Memo";case Zs:t=e._payload,e=e._init;try{return qg(e(t))}catch{}}return null}function WI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qg(t);case 8:return t===A1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Si(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function V4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qI(e){var t=V4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){a=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vf(e){e._valueTracker||(e._valueTracker=qI(e))}function H4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=V4(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function X0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kg(e,t){var r=t.checked;return er({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function $N(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Si(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function G4(e,t){t=t.checked,t!=null&&T1(e,"checked",t,!1)}function zg(e,t){G4(e,t);var r=Si(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vg(e,t.type,Si(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function BN(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vg(e,t,r){(t!=="number"||X0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var gu=Array.isArray;function Po(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Si(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Hg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return er({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function UN(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(_e(92));if(gu(r)){if(1<r.length)throw Error(_e(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Si(r)}}function X4(e,t){var r=Si(t.value),a=Si(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function WN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Y4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Y4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hf,Q4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hf=Hf||document.createElement("div"),Hf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Cu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KI=["Webkit","ms","Moz","O"];Object.keys(Cu).forEach(function(e){KI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cu[t]=Cu[e]})});function J4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Cu.hasOwnProperty(e)&&Cu[e]?(""+t).trim():t+"px"}function Z4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,s=J4(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}var zI=er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xg(e,t){if(t){if(zI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function Yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qg=null;function I1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jg=null,Do=null,Io=null;function qN(e){if(e=yf(e)){if(typeof Jg!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=Vh(t),Jg(e.stateNode,e.type,t))}}function eO(e){Do?Io?Io.push(e):Io=[e]:Do=e}function tO(){if(Do){var e=Do,t=Io;if(Io=Do=null,qN(e),t)for(e=0;e<t.length;e++)qN(t[e])}}function rO(e,t){return e(t)}function aO(){}var hp=!1;function nO(e,t,r){if(hp)return e(t,r);hp=!0;try{return rO(e,t,r)}finally{hp=!1,(Do!==null||Io!==null)&&(aO(),tO())}}function Yu(e,t){var r=e.stateNode;if(r===null)return null;var a=Vh(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(_e(231,t,typeof r));return r}var Zg=!1;if(Ps)try{var Jc={};Object.defineProperty(Jc,"passive",{get:function(){Zg=!0}}),window.addEventListener("test",Jc,Jc),window.removeEventListener("test",Jc,Jc)}catch{Zg=!1}function VI(e,t,r,a,s,i,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var _u=!1,Y0=null,Q0=!1,ey=null,HI={onError:function(e){_u=!0,Y0=e}};function GI(e,t,r,a,s,i,l,o,c){_u=!1,Y0=null,VI.apply(HI,arguments)}function XI(e,t,r,a,s,i,l,o,c){if(GI.apply(this,arguments),_u){if(_u){var u=Y0;_u=!1,Y0=null}else throw Error(_e(198));Q0||(Q0=!0,ey=u)}}function ql(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function sO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function KN(e){if(ql(e)!==e)throw Error(_e(188))}function YI(e){var t=e.alternate;if(!t){if(t=ql(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(a=s.return,a!==null){r=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return KN(s),e;if(i===a)return KN(s),t;i=i.sibling}throw Error(_e(188))}if(r.return!==a.return)r=s,a=i;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,a=i;break}if(o===a){l=!0,a=s,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,a=s;break}if(o===a){l=!0,a=i,r=s;break}o=o.sibling}if(!l)throw Error(_e(189))}}if(r.alternate!==a)throw Error(_e(190))}if(r.tag!==3)throw Error(_e(188));return r.stateNode.current===r?e:t}function iO(e){return e=YI(e),e!==null?lO(e):null}function lO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lO(e);if(t!==null)return t;e=e.sibling}return null}var oO=qa.unstable_scheduleCallback,zN=qa.unstable_cancelCallback,QI=qa.unstable_shouldYield,JI=qa.unstable_requestPaint,ur=qa.unstable_now,ZI=qa.unstable_getCurrentPriorityLevel,F1=qa.unstable_ImmediatePriority,cO=qa.unstable_UserBlockingPriority,J0=qa.unstable_NormalPriority,eF=qa.unstable_LowPriority,uO=qa.unstable_IdlePriority,Wh=null,Zn=null;function tF(e){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Wh,e,void 0,(e.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:nF,rF=Math.log,aF=Math.LN2;function nF(e){return e>>>=0,e===0?32:31-(rF(e)/aF|0)|0}var Gf=64,Xf=4194304;function yu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Z0(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~s;o!==0?a=yu(o):(i&=l,i!==0&&(a=yu(i)))}else l=r&~s,l!==0?a=yu(l):i!==0&&(a=yu(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-$n(t),s=1<<r,a|=e[r],t&=~s;return a}function sF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iF(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-$n(i),o=1<<l,c=s[l];c===-1?(!(o&r)||o&a)&&(s[l]=sF(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function ty(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dO(){var e=Gf;return Gf<<=1,!(Gf&4194240)&&(Gf=64),e}function xp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function pf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$n(t),e[t]=r}function lF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-$n(r),i=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~i}}function M1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-$n(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var Ot=0;function fO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mO,R1,hO,xO,pO,ry=!1,Yf=[],mi=null,hi=null,xi=null,Qu=new Map,Ju=new Map,ri=[],oF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VN(e,t){switch(e){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Qu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(t.pointerId)}}function Zc(e,t,r,a,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[s]},t!==null&&(t=yf(t),t!==null&&R1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cF(e,t,r,a,s){switch(t){case"focusin":return mi=Zc(mi,e,t,r,a,s),!0;case"dragenter":return hi=Zc(hi,e,t,r,a,s),!0;case"mouseover":return xi=Zc(xi,e,t,r,a,s),!0;case"pointerover":var i=s.pointerId;return Qu.set(i,Zc(Qu.get(i)||null,e,t,r,a,s)),!0;case"gotpointercapture":return i=s.pointerId,Ju.set(i,Zc(Ju.get(i)||null,e,t,r,a,s)),!0}return!1}function gO(e){var t=il(e.target);if(t!==null){var r=ql(t);if(r!==null){if(t=r.tag,t===13){if(t=sO(r),t!==null){e.blockedOn=t,pO(e.priority,function(){hO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function L0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ay(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Qg=a,r.target.dispatchEvent(a),Qg=null}else return t=yf(r),t!==null&&R1(t),e.blockedOn=r,!1;t.shift()}return!0}function HN(e,t,r){L0(e)&&r.delete(t)}function uF(){ry=!1,mi!==null&&L0(mi)&&(mi=null),hi!==null&&L0(hi)&&(hi=null),xi!==null&&L0(xi)&&(xi=null),Qu.forEach(HN),Ju.forEach(HN)}function eu(e,t){e.blockedOn===t&&(e.blockedOn=null,ry||(ry=!0,qa.unstable_scheduleCallback(qa.unstable_NormalPriority,uF)))}function Zu(e){function t(s){return eu(s,e)}if(0<Yf.length){eu(Yf[0],e);for(var r=1;r<Yf.length;r++){var a=Yf[r];a.blockedOn===e&&(a.blockedOn=null)}}for(mi!==null&&eu(mi,e),hi!==null&&eu(hi,e),xi!==null&&eu(xi,e),Qu.forEach(t),Ju.forEach(t),r=0;r<ri.length;r++)a=ri[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<ri.length&&(r=ri[0],r.blockedOn===null);)gO(r),r.blockedOn===null&&ri.shift()}var Fo=Bs.ReactCurrentBatchConfig,em=!0;function dF(e,t,r,a){var s=Ot,i=Fo.transition;Fo.transition=null;try{Ot=1,L1(e,t,r,a)}finally{Ot=s,Fo.transition=i}}function fF(e,t,r,a){var s=Ot,i=Fo.transition;Fo.transition=null;try{Ot=4,L1(e,t,r,a)}finally{Ot=s,Fo.transition=i}}function L1(e,t,r,a){if(em){var s=ay(e,t,r,a);if(s===null)kp(e,t,a,tm,r),VN(e,a);else if(cF(s,e,t,r,a))a.stopPropagation();else if(VN(e,a),t&4&&-1<oF.indexOf(e)){for(;s!==null;){var i=yf(s);if(i!==null&&mO(i),i=ay(e,t,r,a),i===null&&kp(e,t,a,tm,r),i===s)break;s=i}s!==null&&a.stopPropagation()}else kp(e,t,a,null,r)}}var tm=null;function ay(e,t,r,a){if(tm=null,e=I1(a),e=il(e),e!==null)if(t=ql(e),t===null)e=null;else if(r=t.tag,r===13){if(e=sO(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tm=e,null}function yO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZI()){case F1:return 1;case cO:return 4;case J0:case eF:return 16;case uO:return 536870912;default:return 16}default:return 16}}var si=null,$1=null,$0=null;function vO(){if($0)return $0;var e,t=$1,r=t.length,a,s="value"in si?si.value:si.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(a=1;a<=l&&t[r-a]===s[i-a];a++);return $0=s.slice(e,1<a?1-a:void 0)}function B0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qf(){return!0}function GN(){return!1}function Xa(e){function t(r,a,s,i,l){this._reactName=r,this._targetInst=s,this.type=a,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qf:GN,this.isPropagationStopped=GN,this}return er(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Qf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Qf)},persist:function(){},isPersistent:Qf}),t}var Ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B1=Xa(Ec),gf=er({},Ec,{view:0,detail:0}),mF=Xa(gf),pp,gp,tu,qh=er({},gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tu&&(tu&&e.type==="mousemove"?(pp=e.screenX-tu.screenX,gp=e.screenY-tu.screenY):gp=pp=0,tu=e),pp)},movementY:function(e){return"movementY"in e?e.movementY:gp}}),XN=Xa(qh),hF=er({},qh,{dataTransfer:0}),xF=Xa(hF),pF=er({},gf,{relatedTarget:0}),yp=Xa(pF),gF=er({},Ec,{animationName:0,elapsedTime:0,pseudoElement:0}),yF=Xa(gF),vF=er({},Ec,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bF=Xa(vF),wF=er({},Ec,{data:0}),YN=Xa(wF),NF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SF[e])?!!t[e]:!1}function U1(){return kF}var CF=er({},gf,{key:function(e){if(e.key){var t=NF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=B0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U1,charCode:function(e){return e.type==="keypress"?B0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?B0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_F=Xa(CF),OF=er({},qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QN=Xa(OF),EF=er({},gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U1}),TF=Xa(EF),AF=er({},Ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),PF=Xa(AF),DF=er({},qh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IF=Xa(DF),FF=[9,13,27,32],W1=Ps&&"CompositionEvent"in window,Ou=null;Ps&&"documentMode"in document&&(Ou=document.documentMode);var MF=Ps&&"TextEvent"in window&&!Ou,bO=Ps&&(!W1||Ou&&8<Ou&&11>=Ou),JN=String.fromCharCode(32),ZN=!1;function wO(e,t){switch(e){case"keyup":return FF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var go=!1;function RF(e,t){switch(e){case"compositionend":return NO(t);case"keypress":return t.which!==32?null:(ZN=!0,JN);case"textInput":return e=t.data,e===JN&&ZN?null:e;default:return null}}function LF(e,t){if(go)return e==="compositionend"||!W1&&wO(e,t)?(e=vO(),$0=$1=si=null,go=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bO&&t.locale!=="ko"?null:t.data;default:return null}}var $F={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ej(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$F[e.type]:t==="textarea"}function jO(e,t,r,a){eO(a),t=rm(t,"onChange"),0<t.length&&(r=new B1("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Eu=null,ed=null;function BF(e){IO(e,0)}function Kh(e){var t=bo(e);if(H4(t))return e}function UF(e,t){if(e==="change")return t}var SO=!1;if(Ps){var vp;if(Ps){var bp="oninput"in document;if(!bp){var tj=document.createElement("div");tj.setAttribute("oninput","return;"),bp=typeof tj.oninput=="function"}vp=bp}else vp=!1;SO=vp&&(!document.documentMode||9<document.documentMode)}function rj(){Eu&&(Eu.detachEvent("onpropertychange",kO),ed=Eu=null)}function kO(e){if(e.propertyName==="value"&&Kh(ed)){var t=[];jO(t,ed,e,I1(e)),nO(BF,t)}}function WF(e,t,r){e==="focusin"?(rj(),Eu=t,ed=r,Eu.attachEvent("onpropertychange",kO)):e==="focusout"&&rj()}function qF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kh(ed)}function KF(e,t){if(e==="click")return Kh(t)}function zF(e,t){if(e==="input"||e==="change")return Kh(t)}function VF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qn=typeof Object.is=="function"?Object.is:VF;function td(e,t){if(qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!$g.call(t,s)||!qn(e[s],t[s]))return!1}return!0}function aj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nj(e,t){var r=aj(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=aj(r)}}function CO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?CO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _O(){for(var e=window,t=X0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=X0(e.document)}return t}function q1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function HF(e){var t=_O(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&CO(r.ownerDocument.documentElement,r)){if(a!==null&&q1(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(a.start,s);a=a.end===void 0?i:Math.min(a.end,s),!e.extend&&i>a&&(s=a,a=i,i=s),s=nj(r,i);var l=nj(r,a);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GF=Ps&&"documentMode"in document&&11>=document.documentMode,yo=null,ny=null,Tu=null,sy=!1;function sj(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sy||yo==null||yo!==X0(a)||(a=yo,"selectionStart"in a&&q1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Tu&&td(Tu,a)||(Tu=a,a=rm(ny,"onSelect"),0<a.length&&(t=new B1("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=yo)))}function Jf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vo={animationend:Jf("Animation","AnimationEnd"),animationiteration:Jf("Animation","AnimationIteration"),animationstart:Jf("Animation","AnimationStart"),transitionend:Jf("Transition","TransitionEnd")},wp={},OO={};Ps&&(OO=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function zh(e){if(wp[e])return wp[e];if(!vo[e])return e;var t=vo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in OO)return wp[e]=t[r];return e}var EO=zh("animationend"),TO=zh("animationiteration"),AO=zh("animationstart"),PO=zh("transitionend"),DO=new Map,ij="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){DO.set(e,t),Wl(t,[e])}for(var Np=0;Np<ij.length;Np++){var jp=ij[Np],XF=jp.toLowerCase(),YF=jp[0].toUpperCase()+jp.slice(1);Ai(XF,"on"+YF)}Ai(EO,"onAnimationEnd");Ai(TO,"onAnimationIteration");Ai(AO,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(PO,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QF=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function lj(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,XI(a,t,void 0,e),e.currentTarget=null}function IO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;lj(s,o,u),i=c}else for(l=0;l<a.length;l++){if(o=a[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;lj(s,o,u),i=c}}}if(Q0)throw e=ey,Q0=!1,ey=null,e}function $t(e,t){var r=t[uy];r===void 0&&(r=t[uy]=new Set);var a=e+"__bubble";r.has(a)||(FO(t,e,2,!1),r.add(a))}function Sp(e,t,r){var a=0;t&&(a|=4),FO(r,e,a,t)}var Zf="_reactListening"+Math.random().toString(36).slice(2);function rd(e){if(!e[Zf]){e[Zf]=!0,W4.forEach(function(r){r!=="selectionchange"&&(QF.has(r)||Sp(r,!1,e),Sp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zf]||(t[Zf]=!0,Sp("selectionchange",!1,t))}}function FO(e,t,r,a){switch(yO(t)){case 1:var s=dF;break;case 4:s=fF;break;default:s=L1}r=s.bind(null,t,r,e),s=void 0,!Zg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function kp(e,t,r,a,s){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var o=a.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;o!==null;){if(l=il(o),l===null)return;if(c=l.tag,c===5||c===6){a=i=l;continue e}o=o.parentNode}}a=a.return}nO(function(){var u=i,d=I1(r),f=[];e:{var m=DO.get(e);if(m!==void 0){var p=B1,y=e;switch(e){case"keypress":if(B0(r)===0)break e;case"keydown":case"keyup":p=_F;break;case"focusin":y="focus",p=yp;break;case"focusout":y="blur",p=yp;break;case"beforeblur":case"afterblur":p=yp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=XN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=xF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=TF;break;case EO:case TO:case AO:p=yF;break;case PO:p=PF;break;case"scroll":p=mF;break;case"wheel":p=IF;break;case"copy":case"cut":case"paste":p=bF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=QN}var h=(t&4)!==0,v=!h&&e==="scroll",w=h?m!==null?m+"Capture":null:m;h=[];for(var S=u,b;S!==null;){b=S;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,w!==null&&(x=Yu(S,w),x!=null&&h.push(ad(S,x,b)))),v)break;S=S.return}0<h.length&&(m=new p(m,y,null,r,d),f.push({event:m,listeners:h}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==Qg&&(y=r.relatedTarget||r.fromElement)&&(il(y)||y[Ds]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?il(y):null,y!==null&&(v=ql(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(h=XN,x="onMouseLeave",w="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(h=QN,x="onPointerLeave",w="onPointerEnter",S="pointer"),v=p==null?m:bo(p),b=y==null?m:bo(y),m=new h(x,S+"leave",p,r,d),m.target=v,m.relatedTarget=b,x=null,il(d)===u&&(h=new h(w,S+"enter",y,r,d),h.target=b,h.relatedTarget=v,x=h),v=x,p&&y)t:{for(h=p,w=y,S=0,b=h;b;b=ro(b))S++;for(b=0,x=w;x;x=ro(x))b++;for(;0<S-b;)h=ro(h),S--;for(;0<b-S;)w=ro(w),b--;for(;S--;){if(h===w||w!==null&&h===w.alternate)break t;h=ro(h),w=ro(w)}h=null}else h=null;p!==null&&oj(f,m,p,h,!1),y!==null&&v!==null&&oj(f,v,y,h,!0)}}e:{if(m=u?bo(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var g=UF;else if(ej(m))if(SO)g=zF;else{g=qF;var N=WF}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(g=KF);if(g&&(g=g(e,u))){jO(f,g,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Vg(m,"number",m.value)}switch(N=u?bo(u):window,e){case"focusin":(ej(N)||N.contentEditable==="true")&&(yo=N,ny=u,Tu=null);break;case"focusout":Tu=ny=yo=null;break;case"mousedown":sy=!0;break;case"contextmenu":case"mouseup":case"dragend":sy=!1,sj(f,r,d);break;case"selectionchange":if(GF)break;case"keydown":case"keyup":sj(f,r,d)}var j;if(W1)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else go?wO(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(bO&&r.locale!=="ko"&&(go||C!=="onCompositionStart"?C==="onCompositionEnd"&&go&&(j=vO()):(si=d,$1="value"in si?si.value:si.textContent,go=!0)),N=rm(u,C),0<N.length&&(C=new YN(C,e,null,r,d),f.push({event:C,listeners:N}),j?C.data=j:(j=NO(r),j!==null&&(C.data=j)))),(j=MF?RF(e,r):LF(e,r))&&(u=rm(u,"onBeforeInput"),0<u.length&&(d=new YN("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}IO(f,t)})}function ad(e,t,r){return{instance:e,listener:t,currentTarget:r}}function rm(e,t){for(var r=t+"Capture",a=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yu(e,r),i!=null&&a.unshift(ad(e,i,s)),i=Yu(e,t),i!=null&&a.push(ad(e,i,s))),e=e.return}return a}function ro(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function oj(e,t,r,a,s){for(var i=t._reactName,l=[];r!==null&&r!==a;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===a)break;o.tag===5&&u!==null&&(o=u,s?(c=Yu(r,i),c!=null&&l.unshift(ad(r,c,o))):s||(c=Yu(r,i),c!=null&&l.push(ad(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var JF=/\r\n?/g,ZF=/\u0000|\uFFFD/g;function cj(e){return(typeof e=="string"?e:""+e).replace(JF,`
`).replace(ZF,"")}function e0(e,t,r){if(t=cj(t),cj(e)!==t&&r)throw Error(_e(425))}function am(){}var iy=null,ly=null;function oy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cy=typeof setTimeout=="function"?setTimeout:void 0,eM=typeof clearTimeout=="function"?clearTimeout:void 0,uj=typeof Promise=="function"?Promise:void 0,tM=typeof queueMicrotask=="function"?queueMicrotask:typeof uj<"u"?function(e){return uj.resolve(null).then(e).catch(rM)}:cy;function rM(e){setTimeout(function(){throw e})}function Cp(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){e.removeChild(s),Zu(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=s}while(r);Zu(t)}function pi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Tc=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Tc,nd="__reactProps$"+Tc,Ds="__reactContainer$"+Tc,uy="__reactEvents$"+Tc,aM="__reactListeners$"+Tc,nM="__reactHandles$"+Tc;function il(e){var t=e[Yn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ds]||r[Yn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=dj(e);e!==null;){if(r=e[Yn])return r;e=dj(e)}return t}e=r,r=e.parentNode}return null}function yf(e){return e=e[Yn]||e[Ds],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function Vh(e){return e[nd]||null}var dy=[],wo=-1;function Pi(e){return{current:e}}function qt(e){0>wo||(e.current=dy[wo],dy[wo]=null,wo--)}function Rt(e,t){wo++,dy[wo]=e.current,e.current=t}var ki={},ua=Pi(ki),Ca=Pi(!1),Nl=ki;function Xo(e,t){var r=e.type.contextTypes;if(!r)return ki;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _a(e){return e=e.childContextTypes,e!=null}function nm(){qt(Ca),qt(ua)}function fj(e,t,r){if(ua.current!==ki)throw Error(_e(168));Rt(ua,t),Rt(Ca,r)}function MO(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(_e(108,WI(e)||"Unknown",s));return er({},r,a)}function sm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Nl=ua.current,Rt(ua,e),Rt(Ca,Ca.current),!0}function mj(e,t,r){var a=e.stateNode;if(!a)throw Error(_e(169));r?(e=MO(e,t,Nl),a.__reactInternalMemoizedMergedChildContext=e,qt(Ca),qt(ua),Rt(ua,e)):qt(Ca),Rt(Ca,r)}var gs=null,Hh=!1,_p=!1;function RO(e){gs===null?gs=[e]:gs.push(e)}function sM(e){Hh=!0,RO(e)}function Di(){if(!_p&&gs!==null){_p=!0;var e=0,t=Ot;try{var r=gs;for(Ot=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}gs=null,Hh=!1}catch(s){throw gs!==null&&(gs=gs.slice(e+1)),oO(F1,Di),s}finally{Ot=t,_p=!1}}return null}var No=[],jo=0,im=null,lm=0,on=[],cn=0,jl=null,ys=1,vs="";function Zi(e,t){No[jo++]=lm,No[jo++]=im,im=e,lm=t}function LO(e,t,r){on[cn++]=ys,on[cn++]=vs,on[cn++]=jl,jl=e;var a=ys;e=vs;var s=32-$n(a)-1;a&=~(1<<s),r+=1;var i=32-$n(t)+s;if(30<i){var l=s-s%5;i=(a&(1<<l)-1).toString(32),a>>=l,s-=l,ys=1<<32-$n(t)+s|r<<s|a,vs=i+e}else ys=1<<i|r<<s|a,vs=e}function K1(e){e.return!==null&&(Zi(e,1),LO(e,1,0))}function z1(e){for(;e===im;)im=No[--jo],No[jo]=null,lm=No[--jo],No[jo]=null;for(;e===jl;)jl=on[--cn],on[cn]=null,vs=on[--cn],on[cn]=null,ys=on[--cn],on[cn]=null}var Ua=null,Ba=null,Vt=!1,Dn=null;function $O(e,t){var r=un(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ua=e,Ba=pi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ua=e,Ba=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=jl!==null?{id:ys,overflow:vs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=un(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ua=e,Ba=null,!0):!1;default:return!1}}function fy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function my(e){if(Vt){var t=Ba;if(t){var r=t;if(!hj(e,t)){if(fy(e))throw Error(_e(418));t=pi(r.nextSibling);var a=Ua;t&&hj(e,t)?$O(a,r):(e.flags=e.flags&-4097|2,Vt=!1,Ua=e)}}else{if(fy(e))throw Error(_e(418));e.flags=e.flags&-4097|2,Vt=!1,Ua=e}}}function xj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ua=e}function t0(e){if(e!==Ua)return!1;if(!Vt)return xj(e),Vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oy(e.type,e.memoizedProps)),t&&(t=Ba)){if(fy(e))throw BO(),Error(_e(418));for(;t;)$O(e,t),t=pi(t.nextSibling)}if(xj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ba=pi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ba=null}}else Ba=Ua?pi(e.stateNode.nextSibling):null;return!0}function BO(){for(var e=Ba;e;)e=pi(e.nextSibling)}function Yo(){Ba=Ua=null,Vt=!1}function V1(e){Dn===null?Dn=[e]:Dn.push(e)}var iM=Bs.ReactCurrentBatchConfig;function ru(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(_e(309));var a=r.stateNode}if(!a)throw Error(_e(147,e));var s=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=s.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(_e(284));if(!r._owner)throw Error(_e(290,e))}return e}function r0(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pj(e){var t=e._init;return t(e._payload)}function UO(e){function t(w,S){if(e){var b=w.deletions;b===null?(w.deletions=[S],w.flags|=16):b.push(S)}}function r(w,S){if(!e)return null;for(;S!==null;)t(w,S),S=S.sibling;return null}function a(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function s(w,S){return w=bi(w,S),w.index=0,w.sibling=null,w}function i(w,S,b){return w.index=b,e?(b=w.alternate,b!==null?(b=b.index,b<S?(w.flags|=2,S):b):(w.flags|=2,S)):(w.flags|=1048576,S)}function l(w){return e&&w.alternate===null&&(w.flags|=2),w}function o(w,S,b,x){return S===null||S.tag!==6?(S=Ip(b,w.mode,x),S.return=w,S):(S=s(S,b),S.return=w,S)}function c(w,S,b,x){var g=b.type;return g===po?d(w,S,b.props.children,x,b.key):S!==null&&(S.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Zs&&pj(g)===S.type)?(x=s(S,b.props),x.ref=ru(w,S,b),x.return=w,x):(x=H0(b.type,b.key,b.props,null,w.mode,x),x.ref=ru(w,S,b),x.return=w,x)}function u(w,S,b,x){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=Fp(b,w.mode,x),S.return=w,S):(S=s(S,b.children||[]),S.return=w,S)}function d(w,S,b,x,g){return S===null||S.tag!==7?(S=hl(b,w.mode,x,g),S.return=w,S):(S=s(S,b),S.return=w,S)}function f(w,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ip(""+S,w.mode,b),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case zf:return b=H0(S.type,S.key,S.props,null,w.mode,b),b.ref=ru(w,null,S),b.return=w,b;case xo:return S=Fp(S,w.mode,b),S.return=w,S;case Zs:var x=S._init;return f(w,x(S._payload),b)}if(gu(S)||Qc(S))return S=hl(S,w.mode,b,null),S.return=w,S;r0(w,S)}return null}function m(w,S,b,x){var g=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return g!==null?null:o(w,S,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zf:return b.key===g?c(w,S,b,x):null;case xo:return b.key===g?u(w,S,b,x):null;case Zs:return g=b._init,m(w,S,g(b._payload),x)}if(gu(b)||Qc(b))return g!==null?null:d(w,S,b,x,null);r0(w,b)}return null}function p(w,S,b,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(b)||null,o(S,w,""+x,g);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zf:return w=w.get(x.key===null?b:x.key)||null,c(S,w,x,g);case xo:return w=w.get(x.key===null?b:x.key)||null,u(S,w,x,g);case Zs:var N=x._init;return p(w,S,b,N(x._payload),g)}if(gu(x)||Qc(x))return w=w.get(b)||null,d(S,w,x,g,null);r0(S,x)}return null}function y(w,S,b,x){for(var g=null,N=null,j=S,C=S=0,_=null;j!==null&&C<b.length;C++){j.index>C?(_=j,j=null):_=j.sibling;var T=m(w,j,b[C],x);if(T===null){j===null&&(j=_);break}e&&j&&T.alternate===null&&t(w,j),S=i(T,S,C),N===null?g=T:N.sibling=T,N=T,j=_}if(C===b.length)return r(w,j),Vt&&Zi(w,C),g;if(j===null){for(;C<b.length;C++)j=f(w,b[C],x),j!==null&&(S=i(j,S,C),N===null?g=j:N.sibling=j,N=j);return Vt&&Zi(w,C),g}for(j=a(w,j);C<b.length;C++)_=p(j,w,C,b[C],x),_!==null&&(e&&_.alternate!==null&&j.delete(_.key===null?C:_.key),S=i(_,S,C),N===null?g=_:N.sibling=_,N=_);return e&&j.forEach(function(E){return t(w,E)}),Vt&&Zi(w,C),g}function h(w,S,b,x){var g=Qc(b);if(typeof g!="function")throw Error(_e(150));if(b=g.call(b),b==null)throw Error(_e(151));for(var N=g=null,j=S,C=S=0,_=null,T=b.next();j!==null&&!T.done;C++,T=b.next()){j.index>C?(_=j,j=null):_=j.sibling;var E=m(w,j,T.value,x);if(E===null){j===null&&(j=_);break}e&&j&&E.alternate===null&&t(w,j),S=i(E,S,C),N===null?g=E:N.sibling=E,N=E,j=_}if(T.done)return r(w,j),Vt&&Zi(w,C),g;if(j===null){for(;!T.done;C++,T=b.next())T=f(w,T.value,x),T!==null&&(S=i(T,S,C),N===null?g=T:N.sibling=T,N=T);return Vt&&Zi(w,C),g}for(j=a(w,j);!T.done;C++,T=b.next())T=p(j,w,C,T.value,x),T!==null&&(e&&T.alternate!==null&&j.delete(T.key===null?C:T.key),S=i(T,S,C),N===null?g=T:N.sibling=T,N=T);return e&&j.forEach(function(k){return t(w,k)}),Vt&&Zi(w,C),g}function v(w,S,b,x){if(typeof b=="object"&&b!==null&&b.type===po&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zf:e:{for(var g=b.key,N=S;N!==null;){if(N.key===g){if(g=b.type,g===po){if(N.tag===7){r(w,N.sibling),S=s(N,b.props.children),S.return=w,w=S;break e}}else if(N.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Zs&&pj(g)===N.type){r(w,N.sibling),S=s(N,b.props),S.ref=ru(w,N,b),S.return=w,w=S;break e}r(w,N);break}else t(w,N);N=N.sibling}b.type===po?(S=hl(b.props.children,w.mode,x,b.key),S.return=w,w=S):(x=H0(b.type,b.key,b.props,null,w.mode,x),x.ref=ru(w,S,b),x.return=w,w=x)}return l(w);case xo:e:{for(N=b.key;S!==null;){if(S.key===N)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){r(w,S.sibling),S=s(S,b.children||[]),S.return=w,w=S;break e}else{r(w,S);break}else t(w,S);S=S.sibling}S=Fp(b,w.mode,x),S.return=w,w=S}return l(w);case Zs:return N=b._init,v(w,S,N(b._payload),x)}if(gu(b))return y(w,S,b,x);if(Qc(b))return h(w,S,b,x);r0(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(r(w,S.sibling),S=s(S,b),S.return=w,w=S):(r(w,S),S=Ip(b,w.mode,x),S.return=w,w=S),l(w)):r(w,S)}return v}var Qo=UO(!0),WO=UO(!1),om=Pi(null),cm=null,So=null,H1=null;function G1(){H1=So=cm=null}function X1(e){var t=om.current;qt(om),e._currentValue=t}function hy(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Mo(e,t){cm=e,H1=So=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Sa=!0),e.firstContext=null)}function yn(e){var t=e._currentValue;if(H1!==e)if(e={context:e,memoizedValue:t,next:null},So===null){if(cm===null)throw Error(_e(308));So=e,cm.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var ll=null;function Y1(e){ll===null?ll=[e]:ll.push(e)}function qO(e,t,r,a){var s=t.interleaved;return s===null?(r.next=r,Y1(t)):(r.next=s.next,s.next=r),t.interleaved=r,Is(e,a)}function Is(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ei=!1;function Q1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gi(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,gt&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Is(e,r)}return s=a.interleaved,s===null?(t.next=t,Y1(a)):(t.next=s.next,s.next=t),a.interleaved=t,Is(e,r)}function U0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,M1(e,r)}}function gj(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function um(e,t,r,a){var s=e.updateQueue;ei=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;l=0,d=u=c=null,o=i;do{var m=o.lane,p=o.eventTime;if((a&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,h=o;switch(m=t,p=r,h.tag){case 1:if(y=h.payload,typeof y=="function"){f=y.call(p,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=h.payload,m=typeof y=="function"?y.call(p,f,m):y,m==null)break e;f=er({},f,m);break e;case 2:ei=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,l|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);kl|=l,e.lanes=l,e.memoizedState=f}}function yj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=r,typeof s!="function")throw Error(_e(191,s));s.call(a)}}}var vf={},es=Pi(vf),sd=Pi(vf),id=Pi(vf);function ol(e){if(e===vf)throw Error(_e(174));return e}function J1(e,t){switch(Rt(id,t),Rt(sd,e),Rt(es,vf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gg(t,e)}qt(es),Rt(es,t)}function Jo(){qt(es),qt(sd),qt(id)}function zO(e){ol(id.current);var t=ol(es.current),r=Gg(t,e.type);t!==r&&(Rt(sd,e),Rt(es,r))}function Z1(e){sd.current===e&&(qt(es),qt(sd))}var Qt=Pi(0);function dm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Op=[];function eb(){for(var e=0;e<Op.length;e++)Op[e]._workInProgressVersionPrimary=null;Op.length=0}var W0=Bs.ReactCurrentDispatcher,Ep=Bs.ReactCurrentBatchConfig,Sl=0,Zt=null,jr=null,Ar=null,fm=!1,Au=!1,ld=0,lM=0;function Yr(){throw Error(_e(321))}function tb(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qn(e[r],t[r]))return!1;return!0}function rb(e,t,r,a,s,i){if(Sl=i,Zt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,W0.current=e===null||e.memoizedState===null?dM:fM,e=r(a,s),Au){i=0;do{if(Au=!1,ld=0,25<=i)throw Error(_e(301));i+=1,Ar=jr=null,t.updateQueue=null,W0.current=mM,e=r(a,s)}while(Au)}if(W0.current=mm,t=jr!==null&&jr.next!==null,Sl=0,Ar=jr=Zt=null,fm=!1,t)throw Error(_e(300));return e}function ab(){var e=ld!==0;return ld=0,e}function Xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Zt.memoizedState=Ar=e:Ar=Ar.next=e,Ar}function vn(){if(jr===null){var e=Zt.alternate;e=e!==null?e.memoizedState:null}else e=jr.next;var t=Ar===null?Zt.memoizedState:Ar.next;if(t!==null)Ar=t,jr=e;else{if(e===null)throw Error(_e(310));jr=e,e={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Ar===null?Zt.memoizedState=Ar=e:Ar=Ar.next=e}return Ar}function od(e,t){return typeof t=="function"?t(e):t}function Tp(e){var t=vn(),r=t.queue;if(r===null)throw Error(_e(311));r.lastRenderedReducer=e;var a=jr,s=a.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}a.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,a=a.baseState;var o=l=null,c=null,u=i;do{var d=u.lane;if((Sl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,l=a):c=c.next=f,Zt.lanes|=d,kl|=d}u=u.next}while(u!==null&&u!==i);c===null?l=a:c.next=o,qn(a,t.memoizedState)||(Sa=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,r.lastRenderedState=a}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Zt.lanes|=i,kl|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ap(e){var t=vn(),r=t.queue;if(r===null)throw Error(_e(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);qn(i,t.memoizedState)||(Sa=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function VO(){}function HO(e,t){var r=Zt,a=vn(),s=t(),i=!qn(a.memoizedState,s);if(i&&(a.memoizedState=s,Sa=!0),a=a.queue,nb(YO.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||Ar!==null&&Ar.memoizedState.tag&1){if(r.flags|=2048,cd(9,XO.bind(null,r,a,s,t),void 0,null),Fr===null)throw Error(_e(349));Sl&30||GO(r,t,s)}return s}function GO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function XO(e,t,r,a){t.value=r,t.getSnapshot=a,QO(t)&&JO(e)}function YO(e,t,r){return r(function(){QO(t)&&JO(e)})}function QO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qn(e,r)}catch{return!0}}function JO(e){var t=Is(e,1);t!==null&&Bn(t,e,1,-1)}function vj(e){var t=Xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:e},t.queue=e,e=e.dispatch=uM.bind(null,Zt,e),[t.memoizedState,e]}function cd(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function ZO(){return vn().memoizedState}function q0(e,t,r,a){var s=Xn();Zt.flags|=e,s.memoizedState=cd(1|t,r,void 0,a===void 0?null:a)}function Gh(e,t,r,a){var s=vn();a=a===void 0?null:a;var i=void 0;if(jr!==null){var l=jr.memoizedState;if(i=l.destroy,a!==null&&tb(a,l.deps)){s.memoizedState=cd(t,r,i,a);return}}Zt.flags|=e,s.memoizedState=cd(1|t,r,i,a)}function bj(e,t){return q0(8390656,8,e,t)}function nb(e,t){return Gh(2048,8,e,t)}function eE(e,t){return Gh(4,2,e,t)}function tE(e,t){return Gh(4,4,e,t)}function rE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aE(e,t,r){return r=r!=null?r.concat([e]):null,Gh(4,4,rE.bind(null,t,e),r)}function sb(){}function nE(e,t){var r=vn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&tb(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function sE(e,t){var r=vn();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&tb(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function iE(e,t,r){return Sl&21?(qn(r,t)||(r=dO(),Zt.lanes|=r,kl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Sa=!0),e.memoizedState=r)}function oM(e,t){var r=Ot;Ot=r!==0&&4>r?r:4,e(!0);var a=Ep.transition;Ep.transition={};try{e(!1),t()}finally{Ot=r,Ep.transition=a}}function lE(){return vn().memoizedState}function cM(e,t,r){var a=vi(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},oE(e))cE(t,r);else if(r=qO(e,t,r,a),r!==null){var s=ga();Bn(r,e,a,s),uE(r,t,a)}}function uM(e,t,r){var a=vi(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(oE(e))cE(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(s.hasEagerState=!0,s.eagerState=o,qn(o,l)){var c=t.interleaved;c===null?(s.next=s,Y1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=qO(e,t,s,a),r!==null&&(s=ga(),Bn(r,e,a,s),uE(r,t,a))}}function oE(e){var t=e.alternate;return e===Zt||t!==null&&t===Zt}function cE(e,t){Au=fm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function uE(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,M1(e,r)}}var mm={readContext:yn,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useInsertionEffect:Yr,useLayoutEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useMutableSource:Yr,useSyncExternalStore:Yr,useId:Yr,unstable_isNewReconciler:!1},dM={readContext:yn,useCallback:function(e,t){return Xn().memoizedState=[e,t===void 0?null:t],e},useContext:yn,useEffect:bj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,q0(4194308,4,rE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return q0(4194308,4,e,t)},useInsertionEffect:function(e,t){return q0(4,2,e,t)},useMemo:function(e,t){var r=Xn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=Xn();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=cM.bind(null,Zt,e),[a.memoizedState,e]},useRef:function(e){var t=Xn();return e={current:e},t.memoizedState=e},useState:vj,useDebugValue:sb,useDeferredValue:function(e){return Xn().memoizedState=e},useTransition:function(){var e=vj(!1),t=e[0];return e=oM.bind(null,e[1]),Xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Zt,s=Xn();if(Vt){if(r===void 0)throw Error(_e(407));r=r()}else{if(r=t(),Fr===null)throw Error(_e(349));Sl&30||GO(a,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,bj(YO.bind(null,a,i,e),[e]),a.flags|=2048,cd(9,XO.bind(null,a,i,r,t),void 0,null),r},useId:function(){var e=Xn(),t=Fr.identifierPrefix;if(Vt){var r=vs,a=ys;r=(a&~(1<<32-$n(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=ld++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=lM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fM={readContext:yn,useCallback:nE,useContext:yn,useEffect:nb,useImperativeHandle:aE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:Tp,useRef:ZO,useState:function(){return Tp(od)},useDebugValue:sb,useDeferredValue:function(e){var t=vn();return iE(t,jr.memoizedState,e)},useTransition:function(){var e=Tp(od)[0],t=vn().memoizedState;return[e,t]},useMutableSource:VO,useSyncExternalStore:HO,useId:lE,unstable_isNewReconciler:!1},mM={readContext:yn,useCallback:nE,useContext:yn,useEffect:nb,useImperativeHandle:aE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:Ap,useRef:ZO,useState:function(){return Ap(od)},useDebugValue:sb,useDeferredValue:function(e){var t=vn();return jr===null?t.memoizedState=e:iE(t,jr.memoizedState,e)},useTransition:function(){var e=Ap(od)[0],t=vn().memoizedState;return[e,t]},useMutableSource:VO,useSyncExternalStore:HO,useId:lE,unstable_isNewReconciler:!1};function En(e,t){if(e&&e.defaultProps){t=er({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function xy(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:er({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Xh={isMounted:function(e){return(e=e._reactInternals)?ql(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=ga(),s=vi(e),i=Ss(a,s);i.payload=t,r!=null&&(i.callback=r),t=gi(e,i,s),t!==null&&(Bn(t,e,s,a),U0(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=ga(),s=vi(e),i=Ss(a,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=gi(e,i,s),t!==null&&(Bn(t,e,s,a),U0(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ga(),a=vi(e),s=Ss(r,a);s.tag=2,t!=null&&(s.callback=t),t=gi(e,s,a),t!==null&&(Bn(t,e,a,r),U0(t,e,a))}};function wj(e,t,r,a,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,l):t.prototype&&t.prototype.isPureReactComponent?!td(r,a)||!td(s,i):!0}function dE(e,t,r){var a=!1,s=ki,i=t.contextType;return typeof i=="object"&&i!==null?i=yn(i):(s=_a(t)?Nl:ua.current,a=t.contextTypes,i=(a=a!=null)?Xo(e,s):ki),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xh,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Nj(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Xh.enqueueReplaceState(t,t.state,null)}function py(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Q1(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=yn(i):(i=_a(t)?Nl:ua.current,s.context=Xo(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(xy(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Xh.enqueueReplaceState(s,s.state,null),um(e,r,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zo(e,t){try{var r="",a=t;do r+=UI(a),a=a.return;while(a);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Pp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hM=typeof WeakMap=="function"?WeakMap:Map;function fE(e,t,r){r=Ss(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){xm||(xm=!0,_y=a),gy(e,t)},r}function mE(e,t,r){r=Ss(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){gy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){gy(e,t),typeof a!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function jj(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new hM;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=OM.bind(null,e,t,r),t.then(e,e))}function Sj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kj(e,t,r,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ss(-1,1),t.tag=2,gi(r,t,1))),r.lanes|=1),e)}var xM=Bs.ReactCurrentOwner,Sa=!1;function ma(e,t,r,a){t.child=e===null?WO(t,null,r,a):Qo(t,e.child,r,a)}function Cj(e,t,r,a,s){r=r.render;var i=t.ref;return Mo(t,s),a=rb(e,t,r,a,i,s),r=ab(),e!==null&&!Sa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fs(e,t,s)):(Vt&&r&&K1(t),t.flags|=1,ma(e,t,a,s),t.child)}function _j(e,t,r,a,s){if(e===null){var i=r.type;return typeof i=="function"&&!mb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,hE(e,t,i,a,s)):(e=H0(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:td,r(l,a)&&e.ref===t.ref)return Fs(e,t,s)}return t.flags|=1,e=bi(i,a),e.ref=t.ref,e.return=t,t.child=e}function hE(e,t,r,a,s){if(e!==null){var i=e.memoizedProps;if(td(i,a)&&e.ref===t.ref)if(Sa=!1,t.pendingProps=a=i,(e.lanes&s)!==0)e.flags&131072&&(Sa=!0);else return t.lanes=e.lanes,Fs(e,t,s)}return yy(e,t,r,a,s)}function xE(e,t,r){var a=t.pendingProps,s=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Co,Ia),Ia|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Rt(Co,Ia),Ia|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Rt(Co,Ia),Ia|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,Rt(Co,Ia),Ia|=a;return ma(e,t,s,r),t.child}function pE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function yy(e,t,r,a,s){var i=_a(r)?Nl:ua.current;return i=Xo(t,i),Mo(t,s),r=rb(e,t,r,a,i,s),a=ab(),e!==null&&!Sa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Fs(e,t,s)):(Vt&&a&&K1(t),t.flags|=1,ma(e,t,r,s),t.child)}function Oj(e,t,r,a,s){if(_a(r)){var i=!0;sm(t)}else i=!1;if(Mo(t,s),t.stateNode===null)K0(e,t),dE(t,r,a),py(t,r,a,s),a=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=yn(u):(u=_a(r)?Nl:ua.current,u=Xo(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==a||c!==u)&&Nj(t,l,a,u),ei=!1;var m=t.memoizedState;l.state=m,um(t,a,l,s),c=t.memoizedState,o!==a||m!==c||Ca.current||ei?(typeof d=="function"&&(xy(t,r,d,a),c=t.memoizedState),(o=ei||wj(t,r,o,a,m,c,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),l.props=a,l.state=c,l.context=u,a=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,KO(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:En(t.type,o),l.props=u,f=t.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=yn(c):(c=_a(r)?Nl:ua.current,c=Xo(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||m!==c)&&Nj(t,l,a,c),ei=!1,m=t.memoizedState,l.state=m,um(t,a,l,s);var y=t.memoizedState;o!==f||m!==y||Ca.current||ei?(typeof p=="function"&&(xy(t,r,p,a),y=t.memoizedState),(u=ei||wj(t,r,u,a,m,y,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=y),l.props=a,l.state=y,l.context=c,a=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return vy(e,t,r,a,i,s)}function vy(e,t,r,a,s,i){pE(e,t);var l=(t.flags&128)!==0;if(!a&&!l)return s&&mj(t,r,!1),Fs(e,t,i);a=t.stateNode,xM.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&l?(t.child=Qo(t,e.child,null,i),t.child=Qo(t,null,o,i)):ma(e,t,o,i),t.memoizedState=a.state,s&&mj(t,r,!0),t.child}function gE(e){var t=e.stateNode;t.pendingContext?fj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fj(e,t.context,!1),J1(e,t.containerInfo)}function Ej(e,t,r,a,s){return Yo(),V1(s),t.flags|=256,ma(e,t,r,a),t.child}var by={dehydrated:null,treeContext:null,retryLane:0};function wy(e){return{baseLanes:e,cachePool:null,transitions:null}}function yE(e,t,r){var a=t.pendingProps,s=Qt.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Rt(Qt,s&1),e===null)return my(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Jh(l,a,0,null),e=hl(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wy(r),t.memoizedState=by,e):ib(t,l));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return pM(e,t,l,a,o,s,r);if(i){i=a.fallback,l=t.mode,s=e.child,o=s.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=bi(s,c),a.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=bi(o,i):(i=hl(i,l,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=e.child.memoizedState,l=l===null?wy(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=by,a}return i=e.child,e=i.sibling,a=bi(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function ib(e,t){return t=Jh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function a0(e,t,r,a){return a!==null&&V1(a),Qo(t,e.child,null,r),e=ib(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pM(e,t,r,a,s,i,l){if(r)return t.flags&256?(t.flags&=-257,a=Pp(Error(_e(422))),a0(e,t,l,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,s=t.mode,a=Jh({mode:"visible",children:a.children},s,0,null),i=hl(i,s,l,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Qo(t,e.child,null,l),t.child.memoizedState=wy(l),t.memoizedState=by,i);if(!(t.mode&1))return a0(e,t,l,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var o=a.dgst;return a=o,i=Error(_e(419)),a=Pp(i,a,void 0),a0(e,t,l,a)}if(o=(l&e.childLanes)!==0,Sa||o){if(a=Fr,a!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Is(e,s),Bn(a,e,s,-1))}return fb(),a=Pp(Error(_e(421))),a0(e,t,l,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=EM.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ba=pi(s.nextSibling),Ua=t,Vt=!0,Dn=null,e!==null&&(on[cn++]=ys,on[cn++]=vs,on[cn++]=jl,ys=e.id,vs=e.overflow,jl=t),t=ib(t,a.children),t.flags|=4096,t)}function Tj(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),hy(e.return,t,r)}function Dp(e,t,r,a,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=s)}function vE(e,t,r){var a=t.pendingProps,s=a.revealOrder,i=a.tail;if(ma(e,t,a.children,r),a=Qt.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tj(e,r,t);else if(e.tag===19)Tj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Rt(Qt,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&dm(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Dp(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&dm(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Dp(t,!0,r,null,i);break;case"together":Dp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function K0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),kl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,r=bi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=bi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gM(e,t,r){switch(t.tag){case 3:gE(t),Yo();break;case 5:zO(t);break;case 1:_a(t.type)&&sm(t);break;case 4:J1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;Rt(om,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Rt(Qt,Qt.current&1),t.flags|=128,null):r&t.child.childLanes?yE(e,t,r):(Rt(Qt,Qt.current&1),e=Fs(e,t,r),e!==null?e.sibling:null);Rt(Qt,Qt.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return vE(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rt(Qt,Qt.current),a)break;return null;case 22:case 23:return t.lanes=0,xE(e,t,r)}return Fs(e,t,r)}var bE,Ny,wE,NE;bE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ny=function(){};wE=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,ol(es.current);var i=null;switch(r){case"input":s=Kg(e,s),a=Kg(e,a),i=[];break;case"select":s=er({},s,{value:void 0}),a=er({},a,{value:void 0}),i=[];break;case"textarea":s=Hg(e,s),a=Hg(e,a),i=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=am)}Xg(r,a);var l;r=null;for(u in s)if(!a.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in a){var c=a[u];if(o=s!=null?s[u]:void 0,a.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$t("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};NE=function(e,t,r,a){r!==a&&(t.flags|=4)};function au(e,t){if(!Vt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Qr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function yM(e,t,r){var a=t.pendingProps;switch(z1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(t),null;case 1:return _a(t.type)&&nm(),Qr(t),null;case 3:return a=t.stateNode,Jo(),qt(Ca),qt(ua),eb(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(t0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dn!==null&&(Ty(Dn),Dn=null))),Ny(e,t),Qr(t),null;case 5:Z1(t);var s=ol(id.current);if(r=t.type,e!==null&&t.stateNode!=null)wE(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(_e(166));return Qr(t),null}if(e=ol(es.current),t0(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[Yn]=t,a[nd]=i,e=(t.mode&1)!==0,r){case"dialog":$t("cancel",a),$t("close",a);break;case"iframe":case"object":case"embed":$t("load",a);break;case"video":case"audio":for(s=0;s<vu.length;s++)$t(vu[s],a);break;case"source":$t("error",a);break;case"img":case"image":case"link":$t("error",a),$t("load",a);break;case"details":$t("toggle",a);break;case"input":$N(a,i),$t("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},$t("invalid",a);break;case"textarea":UN(a,i),$t("invalid",a)}Xg(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?a.textContent!==o&&(i.suppressHydrationWarning!==!0&&e0(a.textContent,o,e),s=["children",o]):typeof o=="number"&&a.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&e0(a.textContent,o,e),s=["children",""+o]):Gu.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&$t("scroll",a)}switch(r){case"input":Vf(a),BN(a,i,!0);break;case"textarea":Vf(a),WN(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=am)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Y4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),r==="select"&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[Yn]=t,e[nd]=a,bE(e,t,!1,!1),t.stateNode=e;e:{switch(l=Yg(r,a),r){case"dialog":$t("cancel",e),$t("close",e),s=a;break;case"iframe":case"object":case"embed":$t("load",e),s=a;break;case"video":case"audio":for(s=0;s<vu.length;s++)$t(vu[s],e);s=a;break;case"source":$t("error",e),s=a;break;case"img":case"image":case"link":$t("error",e),$t("load",e),s=a;break;case"details":$t("toggle",e),s=a;break;case"input":$N(e,a),s=Kg(e,a),$t("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=er({},a,{value:void 0}),$t("invalid",e);break;case"textarea":UN(e,a),s=Hg(e,a),$t("invalid",e);break;default:s=a}Xg(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Z4(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Q4(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Xu(e,c):typeof c=="number"&&Xu(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$t("scroll",e):c!=null&&T1(e,i,c,l))}switch(r){case"input":Vf(e),BN(e,a,!1);break;case"textarea":Vf(e),WN(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Si(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?Po(e,!!a.multiple,i,!1):a.defaultValue!=null&&Po(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=am)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qr(t),null;case 6:if(e&&t.stateNode!=null)NE(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(_e(166));if(r=ol(id.current),ol(es.current),t0(t)){if(a=t.stateNode,r=t.memoizedProps,a[Yn]=t,(i=a.nodeValue!==r)&&(e=Ua,e!==null))switch(e.tag){case 3:e0(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&e0(a.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Yn]=t,t.stateNode=a}return Qr(t),null;case 13:if(qt(Qt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&Ba!==null&&t.mode&1&&!(t.flags&128))BO(),Yo(),t.flags|=98560,i=!1;else if(i=t0(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(_e(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_e(317));i[Yn]=t}else Yo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qr(t),i=!1}else Dn!==null&&(Ty(Dn),Dn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Qt.current&1?kr===0&&(kr=3):fb())),t.updateQueue!==null&&(t.flags|=4),Qr(t),null);case 4:return Jo(),Ny(e,t),e===null&&rd(t.stateNode.containerInfo),Qr(t),null;case 10:return X1(t.type._context),Qr(t),null;case 17:return _a(t.type)&&nm(),Qr(t),null;case 19:if(qt(Qt),i=t.memoizedState,i===null)return Qr(t),null;if(a=(t.flags&128)!==0,l=i.rendering,l===null)if(a)au(i,!1);else{if(kr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=dm(e),l!==null){for(t.flags|=128,au(i,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Rt(Qt,Qt.current&1|2),t.child}e=e.sibling}i.tail!==null&&ur()>ec&&(t.flags|=128,a=!0,au(i,!1),t.lanes=4194304)}else{if(!a)if(e=dm(l),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),au(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Vt)return Qr(t),null}else 2*ur()-i.renderingStartTime>ec&&r!==1073741824&&(t.flags|=128,a=!0,au(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ur(),t.sibling=null,r=Qt.current,Rt(Qt,a?r&1|2:r&1),t):(Qr(t),null);case 22:case 23:return db(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ia&1073741824&&(Qr(t),t.subtreeFlags&6&&(t.flags|=8192)):Qr(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function vM(e,t){switch(z1(t),t.tag){case 1:return _a(t.type)&&nm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jo(),qt(Ca),qt(ua),eb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Z1(t),null;case 13:if(qt(Qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));Yo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qt(Qt),null;case 4:return Jo(),null;case 10:return X1(t.type._context),null;case 22:case 23:return db(),null;case 24:return null;default:return null}}var n0=!1,ra=!1,bM=typeof WeakSet=="function"?WeakSet:Set,Me=null;function ko(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){tr(e,t,a)}else r.current=null}function jy(e,t,r){try{r()}catch(a){tr(e,t,a)}}var Aj=!1;function wM(e,t){if(iy=em,e=_O(),q1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var p;f!==r||s!==0&&f.nodeType!==3||(o=l+s),f!==i||a!==0&&f.nodeType!==3||(c=l+a),f.nodeType===3&&(l+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++u===s&&(o=l),m===i&&++d===a&&(c=l),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ly={focusedElem:e,selectionRange:r},em=!1,Me=t;Me!==null;)if(t=Me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Me=e;else for(;Me!==null;){t=Me;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var h=y.memoizedProps,v=y.memoizedState,w=t.stateNode,S=w.getSnapshotBeforeUpdate(t.elementType===t.type?h:En(t.type,h),v);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(x){tr(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Me=e;break}Me=t.return}return y=Aj,Aj=!1,y}function Pu(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&jy(t,r,i)}s=s.next}while(s!==a)}}function Yh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Sy(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jE(e){var t=e.alternate;t!==null&&(e.alternate=null,jE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yn],delete t[nd],delete t[uy],delete t[aM],delete t[nM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SE(e){return e.tag===5||e.tag===3||e.tag===4}function Pj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||SE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ky(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=am));else if(a!==4&&(e=e.child,e!==null))for(ky(e,t,r),e=e.sibling;e!==null;)ky(e,t,r),e=e.sibling}function Cy(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Cy(e,t,r),e=e.sibling;e!==null;)Cy(e,t,r),e=e.sibling}var qr=null,Tn=!1;function Xs(e,t,r){for(r=r.child;r!==null;)kE(e,t,r),r=r.sibling}function kE(e,t,r){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Wh,r)}catch{}switch(r.tag){case 5:ra||ko(r,t);case 6:var a=qr,s=Tn;qr=null,Xs(e,t,r),qr=a,Tn=s,qr!==null&&(Tn?(e=qr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):qr.removeChild(r.stateNode));break;case 18:qr!==null&&(Tn?(e=qr,r=r.stateNode,e.nodeType===8?Cp(e.parentNode,r):e.nodeType===1&&Cp(e,r),Zu(e)):Cp(qr,r.stateNode));break;case 4:a=qr,s=Tn,qr=r.stateNode.containerInfo,Tn=!0,Xs(e,t,r),qr=a,Tn=s;break;case 0:case 11:case 14:case 15:if(!ra&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&jy(r,t,l),s=s.next}while(s!==a)}Xs(e,t,r);break;case 1:if(!ra&&(ko(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){tr(r,t,o)}Xs(e,t,r);break;case 21:Xs(e,t,r);break;case 22:r.mode&1?(ra=(a=ra)||r.memoizedState!==null,Xs(e,t,r),ra=a):Xs(e,t,r);break;default:Xs(e,t,r)}}function Dj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new bM),t.forEach(function(a){var s=TM.bind(null,e,a);r.has(a)||(r.add(a),a.then(s,s))})}}function Cn(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:qr=o.stateNode,Tn=!1;break e;case 3:qr=o.stateNode.containerInfo,Tn=!0;break e;case 4:qr=o.stateNode.containerInfo,Tn=!0;break e}o=o.return}if(qr===null)throw Error(_e(160));kE(i,l,s),qr=null,Tn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tr(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)CE(t,e),t=t.sibling}function CE(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cn(t,e),zn(e),a&4){try{Pu(3,e,e.return),Yh(3,e)}catch(h){tr(e,e.return,h)}try{Pu(5,e,e.return)}catch(h){tr(e,e.return,h)}}break;case 1:Cn(t,e),zn(e),a&512&&r!==null&&ko(r,r.return);break;case 5:if(Cn(t,e),zn(e),a&512&&r!==null&&ko(r,r.return),e.flags&32){var s=e.stateNode;try{Xu(s,"")}catch(h){tr(e,e.return,h)}}if(a&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&G4(s,i),Yg(o,l);var u=Yg(o,i);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];d==="style"?Z4(s,f):d==="dangerouslySetInnerHTML"?Q4(s,f):d==="children"?Xu(s,f):T1(s,d,f,u)}switch(o){case"input":zg(s,i);break;case"textarea":X4(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Po(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?Po(s,!!i.multiple,i.defaultValue,!0):Po(s,!!i.multiple,i.multiple?[]:"",!1))}s[nd]=i}catch(h){tr(e,e.return,h)}}break;case 6:if(Cn(t,e),zn(e),a&4){if(e.stateNode===null)throw Error(_e(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){tr(e,e.return,h)}}break;case 3:if(Cn(t,e),zn(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Zu(t.containerInfo)}catch(h){tr(e,e.return,h)}break;case 4:Cn(t,e),zn(e);break;case 13:Cn(t,e),zn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cb=ur())),a&4&&Dj(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ra=(u=ra)||d,Cn(t,e),ra=u):Cn(t,e),zn(e),a&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Me=e,d=e.child;d!==null;){for(f=Me=d;Me!==null;){switch(m=Me,p=m.child,m.tag){case 0:case 11:case 14:case 15:Pu(4,m,m.return);break;case 1:ko(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){a=m,r=m.return;try{t=a,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(h){tr(a,r,h)}}break;case 5:ko(m,m.return);break;case 22:if(m.memoizedState!==null){Fj(f);continue}}p!==null?(p.return=m,Me=p):Fj(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=J4("display",l))}catch(h){tr(e,e.return,h)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(h){tr(e,e.return,h)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cn(t,e),zn(e),a&4&&Dj(e);break;case 21:break;default:Cn(t,e),zn(e)}}function zn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(SE(r)){var a=r;break e}r=r.return}throw Error(_e(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(Xu(s,""),a.flags&=-33);var i=Pj(e);Cy(e,i,s);break;case 3:case 4:var l=a.stateNode.containerInfo,o=Pj(e);ky(e,o,l);break;default:throw Error(_e(161))}}catch(c){tr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NM(e,t,r){Me=e,_E(e)}function _E(e,t,r){for(var a=(e.mode&1)!==0;Me!==null;){var s=Me,i=s.child;if(s.tag===22&&a){var l=s.memoizedState!==null||n0;if(!l){var o=s.alternate,c=o!==null&&o.memoizedState!==null||ra;o=n0;var u=ra;if(n0=l,(ra=c)&&!u)for(Me=s;Me!==null;)l=Me,c=l.child,l.tag===22&&l.memoizedState!==null?Mj(s):c!==null?(c.return=l,Me=c):Mj(s);for(;i!==null;)Me=i,_E(i),i=i.sibling;Me=s,n0=o,ra=u}Ij(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Me=i):Ij(e)}}function Ij(e){for(;Me!==null;){var t=Me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ra||Yh(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!ra)if(r===null)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:En(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&yj(t,i,a);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}yj(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Zu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}ra||t.flags&512&&Sy(t)}catch(m){tr(t,t.return,m)}}if(t===e){Me=null;break}if(r=t.sibling,r!==null){r.return=t.return,Me=r;break}Me=t.return}}function Fj(e){for(;Me!==null;){var t=Me;if(t===e){Me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Me=r;break}Me=t.return}}function Mj(e){for(;Me!==null;){var t=Me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Yh(4,t)}catch(c){tr(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(c){tr(t,s,c)}}var i=t.return;try{Sy(t)}catch(c){tr(t,i,c)}break;case 5:var l=t.return;try{Sy(t)}catch(c){tr(t,l,c)}}}catch(c){tr(t,t.return,c)}if(t===e){Me=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Me=o;break}Me=t.return}}var jM=Math.ceil,hm=Bs.ReactCurrentDispatcher,lb=Bs.ReactCurrentOwner,mn=Bs.ReactCurrentBatchConfig,gt=0,Fr=null,yr=null,Hr=0,Ia=0,Co=Pi(0),kr=0,ud=null,kl=0,Qh=0,ob=0,Du=null,ja=null,cb=0,ec=1/0,ps=null,xm=!1,_y=null,yi=null,s0=!1,ii=null,pm=0,Iu=0,Oy=null,z0=-1,V0=0;function ga(){return gt&6?ur():z0!==-1?z0:z0=ur()}function vi(e){return e.mode&1?gt&2&&Hr!==0?Hr&-Hr:iM.transition!==null?(V0===0&&(V0=dO()),V0):(e=Ot,e!==0||(e=window.event,e=e===void 0?16:yO(e.type)),e):1}function Bn(e,t,r,a){if(50<Iu)throw Iu=0,Oy=null,Error(_e(185));pf(e,r,a),(!(gt&2)||e!==Fr)&&(e===Fr&&(!(gt&2)&&(Qh|=r),kr===4&&ai(e,Hr)),Oa(e,a),r===1&&gt===0&&!(t.mode&1)&&(ec=ur()+500,Hh&&Di()))}function Oa(e,t){var r=e.callbackNode;iF(e,t);var a=Z0(e,e===Fr?Hr:0);if(a===0)r!==null&&zN(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&zN(r),t===1)e.tag===0?sM(Rj.bind(null,e)):RO(Rj.bind(null,e)),tM(function(){!(gt&6)&&Di()}),r=null;else{switch(fO(a)){case 1:r=F1;break;case 4:r=cO;break;case 16:r=J0;break;case 536870912:r=uO;break;default:r=J0}r=FE(r,OE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function OE(e,t){if(z0=-1,V0=0,gt&6)throw Error(_e(327));var r=e.callbackNode;if(Ro()&&e.callbackNode!==r)return null;var a=Z0(e,e===Fr?Hr:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=gm(e,a);else{t=a;var s=gt;gt|=2;var i=TE();(Fr!==e||Hr!==t)&&(ps=null,ec=ur()+500,ml(e,t));do try{CM();break}catch(o){EE(e,o)}while(1);G1(),hm.current=i,gt=s,yr!==null?t=0:(Fr=null,Hr=0,t=kr)}if(t!==0){if(t===2&&(s=ty(e),s!==0&&(a=s,t=Ey(e,s))),t===1)throw r=ud,ml(e,0),ai(e,a),Oa(e,ur()),r;if(t===6)ai(e,a);else{if(s=e.current.alternate,!(a&30)&&!SM(s)&&(t=gm(e,a),t===2&&(i=ty(e),i!==0&&(a=i,t=Ey(e,i))),t===1))throw r=ud,ml(e,0),ai(e,a),Oa(e,ur()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(_e(345));case 2:el(e,ja,ps);break;case 3:if(ai(e,a),(a&130023424)===a&&(t=cb+500-ur(),10<t)){if(Z0(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){ga(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=cy(el.bind(null,e,ja,ps),t);break}el(e,ja,ps);break;case 4:if(ai(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var l=31-$n(a);i=1<<l,l=t[l],l>s&&(s=l),a&=~i}if(a=s,a=ur()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*jM(a/1960))-a,10<a){e.timeoutHandle=cy(el.bind(null,e,ja,ps),a);break}el(e,ja,ps);break;case 5:el(e,ja,ps);break;default:throw Error(_e(329))}}}return Oa(e,ur()),e.callbackNode===r?OE.bind(null,e):null}function Ey(e,t){var r=Du;return e.current.memoizedState.isDehydrated&&(ml(e,t).flags|=256),e=gm(e,t),e!==2&&(t=ja,ja=r,t!==null&&Ty(t)),e}function Ty(e){ja===null?ja=e:ja.push.apply(ja,e)}function SM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var s=r[a],i=s.getSnapshot;s=s.value;try{if(!qn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ai(e,t){for(t&=~ob,t&=~Qh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-$n(t),a=1<<r;e[r]=-1,t&=~a}}function Rj(e){if(gt&6)throw Error(_e(327));Ro();var t=Z0(e,0);if(!(t&1))return Oa(e,ur()),null;var r=gm(e,t);if(e.tag!==0&&r===2){var a=ty(e);a!==0&&(t=a,r=Ey(e,a))}if(r===1)throw r=ud,ml(e,0),ai(e,t),Oa(e,ur()),r;if(r===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,el(e,ja,ps),Oa(e,ur()),null}function ub(e,t){var r=gt;gt|=1;try{return e(t)}finally{gt=r,gt===0&&(ec=ur()+500,Hh&&Di())}}function Cl(e){ii!==null&&ii.tag===0&&!(gt&6)&&Ro();var t=gt;gt|=1;var r=mn.transition,a=Ot;try{if(mn.transition=null,Ot=1,e)return e()}finally{Ot=a,mn.transition=r,gt=t,!(gt&6)&&Di()}}function db(){Ia=Co.current,qt(Co)}function ml(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,eM(r)),yr!==null)for(r=yr.return;r!==null;){var a=r;switch(z1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&nm();break;case 3:Jo(),qt(Ca),qt(ua),eb();break;case 5:Z1(a);break;case 4:Jo();break;case 13:qt(Qt);break;case 19:qt(Qt);break;case 10:X1(a.type._context);break;case 22:case 23:db()}r=r.return}if(Fr=e,yr=e=bi(e.current,null),Hr=Ia=t,kr=0,ud=null,ob=Qh=kl=0,ja=Du=null,ll!==null){for(t=0;t<ll.length;t++)if(r=ll[t],a=r.interleaved,a!==null){r.interleaved=null;var s=a.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,a.next=l}r.pending=a}ll=null}return e}function EE(e,t){do{var r=yr;try{if(G1(),W0.current=mm,fm){for(var a=Zt.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}fm=!1}if(Sl=0,Ar=jr=Zt=null,Au=!1,ld=0,lb.current=null,r===null||r.return===null){kr=1,ud=t,yr=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Hr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Sj(l);if(p!==null){p.flags&=-257,kj(p,l,o,i,t),p.mode&1&&jj(i,u,t),t=p,c=u;var y=t.updateQueue;if(y===null){var h=new Set;h.add(c),t.updateQueue=h}else y.add(c);break e}else{if(!(t&1)){jj(i,u,t),fb();break e}c=Error(_e(426))}}else if(Vt&&o.mode&1){var v=Sj(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),kj(v,l,o,i,t),V1(Zo(c,o));break e}}i=c=Zo(c,o),kr!==4&&(kr=2),Du===null?Du=[i]:Du.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=fE(i,c,t);gj(i,w);break e;case 1:o=c;var S=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(yi===null||!yi.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=mE(i,o,t);gj(i,x);break e}}i=i.return}while(i!==null)}PE(r)}catch(g){t=g,yr===r&&r!==null&&(yr=r=r.return);continue}break}while(1)}function TE(){var e=hm.current;return hm.current=mm,e===null?mm:e}function fb(){(kr===0||kr===3||kr===2)&&(kr=4),Fr===null||!(kl&268435455)&&!(Qh&268435455)||ai(Fr,Hr)}function gm(e,t){var r=gt;gt|=2;var a=TE();(Fr!==e||Hr!==t)&&(ps=null,ml(e,t));do try{kM();break}catch(s){EE(e,s)}while(1);if(G1(),gt=r,hm.current=a,yr!==null)throw Error(_e(261));return Fr=null,Hr=0,kr}function kM(){for(;yr!==null;)AE(yr)}function CM(){for(;yr!==null&&!QI();)AE(yr)}function AE(e){var t=IE(e.alternate,e,Ia);e.memoizedProps=e.pendingProps,t===null?PE(e):yr=t,lb.current=null}function PE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=vM(r,t),r!==null){r.flags&=32767,yr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kr=6,yr=null;return}}else if(r=yM(r,t,Ia),r!==null){yr=r;return}if(t=t.sibling,t!==null){yr=t;return}yr=t=e}while(t!==null);kr===0&&(kr=5)}function el(e,t,r){var a=Ot,s=mn.transition;try{mn.transition=null,Ot=1,_M(e,t,r,a)}finally{mn.transition=s,Ot=a}return null}function _M(e,t,r,a){do Ro();while(ii!==null);if(gt&6)throw Error(_e(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(lF(e,i),e===Fr&&(yr=Fr=null,Hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||s0||(s0=!0,FE(J0,function(){return Ro(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=mn.transition,mn.transition=null;var l=Ot;Ot=1;var o=gt;gt|=4,lb.current=null,wM(e,r),CE(r,e),HF(ly),em=!!iy,ly=iy=null,e.current=r,NM(r),JI(),gt=o,Ot=l,mn.transition=i}else e.current=r;if(s0&&(s0=!1,ii=e,pm=s),i=e.pendingLanes,i===0&&(yi=null),tF(r.stateNode),Oa(e,ur()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(xm)throw xm=!1,e=_y,_y=null,e;return pm&1&&e.tag!==0&&Ro(),i=e.pendingLanes,i&1?e===Oy?Iu++:(Iu=0,Oy=e):Iu=0,Di(),null}function Ro(){if(ii!==null){var e=fO(pm),t=mn.transition,r=Ot;try{if(mn.transition=null,Ot=16>e?16:e,ii===null)var a=!1;else{if(e=ii,ii=null,pm=0,gt&6)throw Error(_e(331));var s=gt;for(gt|=4,Me=e.current;Me!==null;){var i=Me,l=i.child;if(Me.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(Me=u;Me!==null;){var d=Me;switch(d.tag){case 0:case 11:case 15:Pu(8,d,i)}var f=d.child;if(f!==null)f.return=d,Me=f;else for(;Me!==null;){d=Me;var m=d.sibling,p=d.return;if(jE(d),d===u){Me=null;break}if(m!==null){m.return=p,Me=m;break}Me=p}}}var y=i.alternate;if(y!==null){var h=y.child;if(h!==null){y.child=null;do{var v=h.sibling;h.sibling=null,h=v}while(h!==null)}}Me=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Me=l;else e:for(;Me!==null;){if(i=Me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pu(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Me=w;break e}Me=i.return}}var S=e.current;for(Me=S;Me!==null;){l=Me;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,Me=b;else e:for(l=S;Me!==null;){if(o=Me,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yh(9,o)}}catch(g){tr(o,o.return,g)}if(o===l){Me=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,Me=x;break e}Me=o.return}}if(gt=s,Di(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Wh,e)}catch{}a=!0}return a}finally{Ot=r,mn.transition=t}}return!1}function Lj(e,t,r){t=Zo(r,t),t=fE(e,t,1),e=gi(e,t,1),t=ga(),e!==null&&(pf(e,1,t),Oa(e,t))}function tr(e,t,r){if(e.tag===3)Lj(e,e,r);else for(;t!==null;){if(t.tag===3){Lj(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(yi===null||!yi.has(a))){e=Zo(r,e),e=mE(t,e,1),t=gi(t,e,1),e=ga(),t!==null&&(pf(t,1,e),Oa(t,e));break}}t=t.return}}function OM(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=ga(),e.pingedLanes|=e.suspendedLanes&r,Fr===e&&(Hr&r)===r&&(kr===4||kr===3&&(Hr&130023424)===Hr&&500>ur()-cb?ml(e,0):ob|=r),Oa(e,t)}function DE(e,t){t===0&&(e.mode&1?(t=Xf,Xf<<=1,!(Xf&130023424)&&(Xf=4194304)):t=1);var r=ga();e=Is(e,t),e!==null&&(pf(e,t,r),Oa(e,r))}function EM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),DE(e,r)}function TM(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(_e(314))}a!==null&&a.delete(t),DE(e,r)}var IE;IE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ca.current)Sa=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Sa=!1,gM(e,t,r);Sa=!!(e.flags&131072)}else Sa=!1,Vt&&t.flags&1048576&&LO(t,lm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;K0(e,t),e=t.pendingProps;var s=Xo(t,ua.current);Mo(t,r),s=rb(null,t,a,e,s,r);var i=ab();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_a(a)?(i=!0,sm(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Q1(t),s.updater=Xh,t.stateNode=s,s._reactInternals=t,py(t,a,e,r),t=vy(null,t,a,!0,i,r)):(t.tag=0,Vt&&i&&K1(t),ma(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(K0(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=PM(a),e=En(a,e),s){case 0:t=yy(null,t,a,e,r);break e;case 1:t=Oj(null,t,a,e,r);break e;case 11:t=Cj(null,t,a,e,r);break e;case 14:t=_j(null,t,a,En(a.type,e),r);break e}throw Error(_e(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:En(a,s),yy(e,t,a,s,r);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:En(a,s),Oj(e,t,a,s,r);case 3:e:{if(gE(t),e===null)throw Error(_e(387));a=t.pendingProps,i=t.memoizedState,s=i.element,KO(e,t),um(t,a,null,r);var l=t.memoizedState;if(a=l.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zo(Error(_e(423)),t),t=Ej(e,t,a,r,s);break e}else if(a!==s){s=Zo(Error(_e(424)),t),t=Ej(e,t,a,r,s);break e}else for(Ba=pi(t.stateNode.containerInfo.firstChild),Ua=t,Vt=!0,Dn=null,r=WO(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yo(),a===s){t=Fs(e,t,r);break e}ma(e,t,a,r)}t=t.child}return t;case 5:return zO(t),e===null&&my(t),a=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,oy(a,s)?l=null:i!==null&&oy(a,i)&&(t.flags|=32),pE(e,t),ma(e,t,l,r),t.child;case 6:return e===null&&my(t),null;case 13:return yE(e,t,r);case 4:return J1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Qo(t,null,a,r):ma(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:En(a,s),Cj(e,t,a,s,r);case 7:return ma(e,t,t.pendingProps,r),t.child;case 8:return ma(e,t,t.pendingProps.children,r),t.child;case 12:return ma(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Rt(om,a._currentValue),a._currentValue=l,i!==null)if(qn(i.value,l)){if(i.children===s.children&&!Ca.current){t=Fs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Ss(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),hy(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(_e(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),hy(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}ma(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Mo(t,r),s=yn(s),a=a(s),t.flags|=1,ma(e,t,a,r),t.child;case 14:return a=t.type,s=En(a,t.pendingProps),s=En(a.type,s),_j(e,t,a,s,r);case 15:return hE(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:En(a,s),K0(e,t),t.tag=1,_a(a)?(e=!0,sm(t)):e=!1,Mo(t,r),dE(t,a,s),py(t,a,s,r),vy(null,t,a,!0,e,r);case 19:return vE(e,t,r);case 22:return xE(e,t,r)}throw Error(_e(156,t.tag))};function FE(e,t){return oO(e,t)}function AM(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,t,r,a){return new AM(e,t,r,a)}function mb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PM(e){if(typeof e=="function")return mb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===P1)return 11;if(e===D1)return 14}return 2}function bi(e,t){var r=e.alternate;return r===null?(r=un(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function H0(e,t,r,a,s,i){var l=2;if(a=e,typeof e=="function")mb(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case po:return hl(r.children,s,i,t);case A1:l=8,s|=8;break;case Bg:return e=un(12,r,t,s|2),e.elementType=Bg,e.lanes=i,e;case Ug:return e=un(13,r,t,s),e.elementType=Ug,e.lanes=i,e;case Wg:return e=un(19,r,t,s),e.elementType=Wg,e.lanes=i,e;case z4:return Jh(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q4:l=10;break e;case K4:l=9;break e;case P1:l=11;break e;case D1:l=14;break e;case Zs:l=16,a=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=un(l,r,t,s),t.elementType=e,t.type=a,t.lanes=i,t}function hl(e,t,r,a){return e=un(7,e,a,t),e.lanes=r,e}function Jh(e,t,r,a){return e=un(22,e,a,t),e.elementType=z4,e.lanes=r,e.stateNode={isHidden:!1},e}function Ip(e,t,r){return e=un(6,e,null,t),e.lanes=r,e}function Fp(e,t,r){return t=un(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function DM(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xp(0),this.expirationTimes=xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xp(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hb(e,t,r,a,s,i,l,o,c){return e=new DM(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=un(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q1(i),e}function IM(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function ME(e){if(!e)return ki;e=e._reactInternals;e:{if(ql(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_a(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var r=e.type;if(_a(r))return MO(e,r,t)}return t}function RE(e,t,r,a,s,i,l,o,c){return e=hb(r,a,!0,e,s,i,l,o,c),e.context=ME(null),r=e.current,a=ga(),s=vi(r),i=Ss(a,s),i.callback=t??null,gi(r,i,s),e.current.lanes=s,pf(e,s,a),Oa(e,a),e}function Zh(e,t,r,a){var s=t.current,i=ga(),l=vi(s);return r=ME(r),t.context===null?t.context=r:t.pendingContext=r,t=Ss(i,l),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=gi(s,t,l),e!==null&&(Bn(e,s,l,i),U0(e,s,l)),l}function ym(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $j(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xb(e,t){$j(e,t),(e=e.alternate)&&$j(e,t)}function FM(){return null}var LE=typeof reportError=="function"?reportError:function(e){console.error(e)};function pb(e){this._internalRoot=e}ex.prototype.render=pb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));Zh(e,t,null,null)};ex.prototype.unmount=pb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cl(function(){Zh(null,e,null,null)}),t[Ds]=null}};function ex(e){this._internalRoot=e}ex.prototype.unstable_scheduleHydration=function(e){if(e){var t=xO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ri.length&&t!==0&&t<ri[r].priority;r++);ri.splice(r,0,e),r===0&&gO(e)}};function gb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bj(){}function MM(e,t,r,a,s){if(s){if(typeof a=="function"){var i=a;a=function(){var u=ym(l);i.call(u)}}var l=RE(t,a,e,0,null,!1,!1,"",Bj);return e._reactRootContainer=l,e[Ds]=l.current,rd(e.nodeType===8?e.parentNode:e),Cl(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var o=a;a=function(){var u=ym(c);o.call(u)}}var c=hb(e,0,!1,null,null,!1,!1,"",Bj);return e._reactRootContainer=c,e[Ds]=c.current,rd(e.nodeType===8?e.parentNode:e),Cl(function(){Zh(t,c,r,a)}),c}function rx(e,t,r,a,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var o=s;s=function(){var c=ym(l);o.call(c)}}Zh(t,l,e,s)}else l=MM(r,t,e,s,a);return ym(l)}mO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=yu(t.pendingLanes);r!==0&&(M1(t,r|1),Oa(t,ur()),!(gt&6)&&(ec=ur()+500,Di()))}break;case 13:Cl(function(){var a=Is(e,1);if(a!==null){var s=ga();Bn(a,e,1,s)}}),xb(e,1)}};R1=function(e){if(e.tag===13){var t=Is(e,134217728);if(t!==null){var r=ga();Bn(t,e,134217728,r)}xb(e,134217728)}};hO=function(e){if(e.tag===13){var t=vi(e),r=Is(e,t);if(r!==null){var a=ga();Bn(r,e,t,a)}xb(e,t)}};xO=function(){return Ot};pO=function(e,t){var r=Ot;try{return Ot=e,t()}finally{Ot=r}};Jg=function(e,t,r){switch(t){case"input":if(zg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=Vh(a);if(!s)throw Error(_e(90));H4(a),zg(a,s)}}}break;case"textarea":X4(e,r);break;case"select":t=r.value,t!=null&&Po(e,!!r.multiple,t,!1)}};rO=ub;aO=Cl;var RM={usingClientEntryPoint:!1,Events:[yf,bo,Vh,eO,tO,ub]},nu={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LM={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iO(e),e===null?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||FM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var i0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!i0.isDisabled&&i0.supportsFiber)try{Wh=i0.inject(LM),Zn=i0}catch{}}Ga.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RM;Ga.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gb(t))throw Error(_e(200));return IM(e,t,null,r)};Ga.createRoot=function(e,t){if(!gb(e))throw Error(_e(299));var r=!1,a="",s=LE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=hb(e,1,!1,null,null,r,!1,a,s),e[Ds]=t.current,rd(e.nodeType===8?e.parentNode:e),new pb(t)};Ga.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=iO(t),e=e===null?null:e.stateNode,e};Ga.flushSync=function(e){return Cl(e)};Ga.hydrate=function(e,t,r){if(!tx(t))throw Error(_e(200));return rx(null,e,t,!0,r)};Ga.hydrateRoot=function(e,t,r){if(!gb(e))throw Error(_e(405));var a=r!=null&&r.hydratedSources||null,s=!1,i="",l=LE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=RE(t,null,e,1,r??null,s,!1,i,l),e[Ds]=t.current,rd(e),a)for(e=0;e<a.length;e++)r=a[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ex(t)};Ga.render=function(e,t,r){if(!tx(t))throw Error(_e(200));return rx(null,e,t,!1,r)};Ga.unmountComponentAtNode=function(e){if(!tx(e))throw Error(_e(40));return e._reactRootContainer?(Cl(function(){rx(null,null,e,!1,function(){e._reactRootContainer=null,e[Ds]=null})}),!0):!1};Ga.unstable_batchedUpdates=ub;Ga.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!tx(r))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return rx(e,t,r,!1,a)};Ga.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(e){console.error(e)}}$E(),$4.exports=Ga;var $M=$4.exports,Uj=$M;Lg.createRoot=Uj.createRoot,Lg.hydrateRoot=Uj.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dd.apply(this,arguments)}var li;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(li||(li={}));const Wj="popstate";function BM(e){e===void 0&&(e={});function t(s,i){let{pathname:l="/",search:o="",hash:c=""}=Kl(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ay("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let l=s.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:vm(i))}function a(s,i){yb(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return WM(t,r,a,e)}function fr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function UM(){return Math.random().toString(36).substr(2,8)}function qj(e,t){return{usr:e.state,key:e.key,idx:t}}function Ay(e,t,r,a){return r===void 0&&(r=null),dd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Kl(t):t,{state:r,key:t&&t.key||a||UM()})}function vm(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Kl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function WM(e,t,r,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,l=s.history,o=li.Pop,c=null,u=d();u==null&&(u=0,l.replaceState(dd({},l.state,{idx:u}),""));function d(){return(l.state||{idx:null}).idx}function f(){o=li.Pop;let v=d(),w=v==null?null:v-u;u=v,c&&c({action:o,location:h.location,delta:w})}function m(v,w){o=li.Push;let S=Ay(h.location,v,w);r&&r(S,v),u=d()+1;let b=qj(S,u),x=h.createHref(S);try{l.pushState(b,"",x)}catch(g){if(g instanceof DOMException&&g.name==="DataCloneError")throw g;s.location.assign(x)}i&&c&&c({action:o,location:h.location,delta:1})}function p(v,w){o=li.Replace;let S=Ay(h.location,v,w);r&&r(S,v),u=d();let b=qj(S,u),x=h.createHref(S);l.replaceState(b,"",x),i&&c&&c({action:o,location:h.location,delta:0})}function y(v){let w=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof v=="string"?v:vm(v);return S=S.replace(/ $/,"%20"),fr(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let h={get action(){return o},get location(){return e(s,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Wj,f),c=v,()=>{s.removeEventListener(Wj,f),c=null}},createHref(v){return t(s,v)},createURL:y,encodeLocation(v){let w=y(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(v){return l.go(v)}};return h}var Kj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Kj||(Kj={}));function qM(e,t,r){return r===void 0&&(r="/"),KM(e,t,r,!1)}function KM(e,t,r,a){let s=typeof t=="string"?Kl(t):t,i=vb(s.pathname||"/",r);if(i==null)return null;let l=BE(e);zM(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=r5(i);o=e5(l[c],u,a)}return o}function BE(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let s=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(fr(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let u=wi([a,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(fr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),BE(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:JM(u,i.index),routesMeta:d})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,l);else for(let c of UE(i.path))s(i,l,c)}),t}function UE(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let l=UE(a.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function zM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ZM(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const VM=/^:[\w-]+$/,HM=3,GM=2,XM=1,YM=10,QM=-2,zj=e=>e==="*";function JM(e,t){let r=e.split("/"),a=r.length;return r.some(zj)&&(a+=QM),t&&(a+=GM),r.filter(s=>!zj(s)).reduce((s,i)=>s+(VM.test(i)?HM:i===""?XM:YM),a)}function ZM(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function e5(e,t,r){r===void 0&&(r=!1);let{routesMeta:a}=e,s={},i="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],u=o===a.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Vj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!a[a.length-1].route.index&&(f=Vj({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:wi([i,f.pathname]),pathnameBase:i5(wi([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=wi([i,f.pathnameBase]))}return l}function Vj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=t5(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:a.reduce((u,d,f)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let h=o[f]||"";l=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const y=o[f];return p&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:e}}function t5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),yb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function r5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function a5(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?Kl(e):e;return{pathname:r?r.startsWith("/")?r:n5(r,t):t,search:l5(a),hash:o5(s)}}function n5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Mp(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function bb(e,t){let r=s5(e);return t?r.map((a,s)=>s===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function wb(e,t,r,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=Kl(e):(s=dd({},e),fr(!s.pathname||!s.pathname.includes("?"),Mp("?","pathname","search",s)),fr(!s.pathname||!s.pathname.includes("#"),Mp("#","pathname","hash",s)),fr(!s.search||!s.search.includes("#"),Mp("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,o;if(l==null)o=r;else{let f=t.length-1;if(!a&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}o=f>=0?t[f]:"/"}let c=a5(s,o),u=l&&l!=="/"&&l.endsWith("/"),d=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const wi=e=>e.join("/").replace(/\/\/+/g,"/"),i5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function c5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const WE=["post","put","patch","delete"];new Set(WE);const u5=["get",...WE];new Set(u5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fd.apply(this,arguments)}const Nb=O.createContext(null),d5=O.createContext(null),Ii=O.createContext(null),ax=O.createContext(null),Us=O.createContext({outlet:null,matches:[],isDataRoute:!1}),qE=O.createContext(null);function f5(e,t){let{relative:r}=t===void 0?{}:t;Ac()||fr(!1);let{basename:a,navigator:s}=O.useContext(Ii),{hash:i,pathname:l,search:o}=zE(e,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:wi([a,l])),s.createHref({pathname:c,search:o,hash:i})}function Ac(){return O.useContext(ax)!=null}function wa(){return Ac()||fr(!1),O.useContext(ax).location}function KE(e){O.useContext(Ii).static||O.useLayoutEffect(e)}function Qe(){let{isDataRoute:e}=O.useContext(Us);return e?k5():m5()}function m5(){Ac()||fr(!1);let e=O.useContext(Nb),{basename:t,future:r,navigator:a}=O.useContext(Ii),{matches:s}=O.useContext(Us),{pathname:i}=wa(),l=JSON.stringify(bb(s,r.v7_relativeSplatPath)),o=O.useRef(!1);return KE(()=>{o.current=!0}),O.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){a.go(u);return}let f=wb(u,JSON.parse(l),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:wi([t,f.pathname])),(d.replace?a.replace:a.push)(f,d.state,d)},[t,a,l,i,e])}function Fi(){let{matches:e}=O.useContext(Us),t=e[e.length-1];return t?t.params:{}}function zE(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=O.useContext(Ii),{matches:s}=O.useContext(Us),{pathname:i}=wa(),l=JSON.stringify(bb(s,a.v7_relativeSplatPath));return O.useMemo(()=>wb(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function h5(e,t){return x5(e,t)}function x5(e,t,r,a){Ac()||fr(!1);let{navigator:s}=O.useContext(Ii),{matches:i}=O.useContext(Us),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=wa(),d;if(t){var f;let v=typeof t=="string"?Kl(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||fr(!1),d=v}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=qM(e,{pathname:p}),h=b5(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:wi([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:wi([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,a);return t&&h?O.createElement(ax.Provider,{value:{location:fd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:li.Pop}},h):h}function p5(){let e=S5(),t=c5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),r?O.createElement("pre",{style:s},r):null,i)}const g5=O.createElement(p5,null);class y5 extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?O.createElement(Us.Provider,{value:this.props.routeContext},O.createElement(qE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v5(e){let{routeContext:t,match:r,children:a}=e,s=O.useContext(Nb);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(Us.Provider,{value:t},a)}function b5(e,t,r,a){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=l.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||fr(!1),l=l.slice(0,Math.min(l.length,d+1))}let c=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let d=0;d<l.length;d++){let f=l[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=r,y=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((d,f,m)=>{let p,y=!1,h=null,v=null;r&&(p=o&&f.route.id?o[f.route.id]:void 0,h=f.route.errorElement||g5,c&&(u<0&&m===0?(C5("route-fallback",!1),y=!0,v=null):u===m&&(y=!0,v=f.route.hydrateFallbackElement||null)));let w=t.concat(l.slice(0,m+1)),S=()=>{let b;return p?b=h:y?b=v:f.route.Component?b=O.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,O.createElement(v5,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?O.createElement(y5,{location:r.location,revalidation:r.revalidation,component:h,error:p,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var VE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(VE||{}),bm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(bm||{});function w5(e){let t=O.useContext(Nb);return t||fr(!1),t}function N5(e){let t=O.useContext(d5);return t||fr(!1),t}function j5(e){let t=O.useContext(Us);return t||fr(!1),t}function HE(e){let t=j5(),r=t.matches[t.matches.length-1];return r.route.id||fr(!1),r.route.id}function S5(){var e;let t=O.useContext(qE),r=N5(bm.UseRouteError),a=HE(bm.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function k5(){let{router:e}=w5(VE.UseNavigateStable),t=HE(bm.UseNavigateStable),r=O.useRef(!1);return KE(()=>{r.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,fd({fromRouteId:t},i)))},[e,t])}const Hj={};function C5(e,t,r){!t&&!Hj[e]&&(Hj[e]=!0)}function _5(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function O5(e){let{to:t,replace:r,state:a,relative:s}=e;Ac()||fr(!1);let{future:i,static:l}=O.useContext(Ii),{matches:o}=O.useContext(Us),{pathname:c}=wa(),u=Qe(),d=wb(t,bb(o,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return O.useEffect(()=>u(JSON.parse(f),{replace:r,state:a,relative:s}),[u,f,s,r,a]),null}function ke(e){fr(!1)}function E5(e){let{basename:t="/",children:r=null,location:a,navigationType:s=li.Pop,navigator:i,static:l=!1,future:o}=e;Ac()&&fr(!1);let c=t.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:c,navigator:i,static:l,future:fd({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof a=="string"&&(a=Kl(a));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:y="default"}=a,h=O.useMemo(()=>{let v=vb(d,c);return v==null?null:{location:{pathname:v,search:f,hash:m,state:p,key:y},navigationType:s}},[c,d,f,m,p,y,s]);return h==null?null:O.createElement(Ii.Provider,{value:u},O.createElement(ax.Provider,{children:r,value:h}))}function Rp(e){let{children:t,location:r}=e;return h5(Py(t),r)}new Promise(()=>{});function Py(e,t){t===void 0&&(t=[]);let r=[];return O.Children.forEach(e,(a,s)=>{if(!O.isValidElement(a))return;let i=[...t,s];if(a.type===O.Fragment){r.push.apply(r,Py(a.props.children,i));return}a.type!==ke&&fr(!1),!a.props.index||!a.props.children||fr(!1);let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Py(a.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Dy.apply(this,arguments)}function T5(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function A5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function P5(e,t){return e.button===0&&(!t||t==="_self")&&!A5(e)}const D5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],I5="6";try{window.__reactRouterVersion=I5}catch{}const F5="startTransition",Gj=OI[F5];function M5(e){let{basename:t,children:r,future:a,window:s}=e,i=O.useRef();i.current==null&&(i.current=BM({window:s,v5Compat:!0}));let l=i.current,[o,c]=O.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},d=O.useCallback(f=>{u&&Gj?Gj(()=>c(f)):c(f)},[c,u]);return O.useLayoutEffect(()=>l.listen(d),[l,d]),O.useEffect(()=>_5(a),[a]),O.createElement(E5,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:a})}const R5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yi=O.forwardRef(function(t,r){let{onClick:a,relative:s,reloadDocument:i,replace:l,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=T5(t,D5),{basename:p}=O.useContext(Ii),y,h=!1;if(typeof u=="string"&&L5.test(u)&&(y=u,R5))try{let b=new URL(window.location.href),x=u.startsWith("//")?new URL(b.protocol+u):new URL(u),g=vb(x.pathname,p);x.origin===b.origin&&g!=null?u=g+x.search+x.hash:h=!0}catch{}let v=f5(u,{relative:s}),w=$5(u,{replace:l,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:f});function S(b){a&&a(b),b.defaultPrevented||w(b)}return O.createElement("a",Dy({},m,{href:y||v,onClick:h||i?a:S,ref:r,target:c}))});var Xj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Xj||(Xj={}));var Yj;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Yj||(Yj={}));function $5(e,t){let{target:r,replace:a,state:s,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=Qe(),u=wa(),d=zE(e,{relative:l});return O.useCallback(f=>{if(P5(f,r)){f.preventDefault();let m=a!==void 0?a:vm(u)===vm(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:l,viewTransition:o})}},[u,c,d,a,s,r,e,i,l,o])}var B5={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bf=O;function U5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W5=typeof Object.is=="function"?Object.is:U5,q5=bf.useSyncExternalStore,K5=bf.useRef,z5=bf.useEffect,V5=bf.useMemo,H5=bf.useDebugValue;B5.useSyncExternalStoreWithSelector=function(e,t,r,a,s){var i=K5(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=V5(function(){function c(p){if(!u){if(u=!0,d=p,p=a(p),s!==void 0&&l.hasValue){var y=l.value;if(s(y,p))return f=y}return f=p}if(y=f,W5(d,p))return y;var h=a(p);return s!==void 0&&s(y,h)?(d=p,y):(d=p,f=h)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,a,s]);var o=q5(e,i[0],i[1]);return z5(function(){l.hasValue=!0,l.value=o},[o]),H5(o),o};function G5(e){e()}function X5(){let e=null,t=null;return{clear(){e=null,t=null},notify(){G5(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Qj={notify(){},get:()=>[]};function Y5(e,t){let r,a=Qj,s=0,i=!1;function l(h){d();const v=a.subscribe(h);let w=!1;return()=>{w||(w=!0,v(),f())}}function o(){a.notify()}function c(){y.onStateChange&&y.onStateChange()}function u(){return i}function d(){s++,r||(r=t?t.addNestedSub(c):e.subscribe(c),a=X5())}function f(){s--,r&&s===0&&(r(),r=void 0,a.clear(),a=Qj)}function m(){i||(i=!0,d())}function p(){i&&(i=!1,f())}const y={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>a};return y}var Q5=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",J5=Q5(),Z5=()=>typeof navigator<"u"&&navigator.product==="ReactNative",eR=Z5(),tR=()=>J5||eR?O.useLayoutEffect:O.useEffect,rR=tR(),Lp=Symbol.for("react-redux-context"),$p=typeof globalThis<"u"?globalThis:{};function aR(){if(!O.createContext)return{};const e=$p[Lp]??($p[Lp]=new Map);let t=e.get(O.createContext);return t||(t=O.createContext(null),e.set(O.createContext,t)),t}var nR=aR();function sR(e){const{children:t,context:r,serverState:a,store:s}=e,i=O.useMemo(()=>{const c=Y5(s);return{store:s,subscription:c,getServerState:a?()=>a:void 0}},[s,a]),l=O.useMemo(()=>s.getState(),[s]);rR(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,l]);const o=r||nR;return O.createElement(o.Provider,{value:i},t)}var iR=sR;function Ur(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var lR=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),Jj=lR,Bp=()=>Math.random().toString(36).substring(7).split("").join("."),oR={INIT:`@@redux/INIT${Bp()}`,REPLACE:`@@redux/REPLACE${Bp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Bp()}`},wm=oR;function jb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function GE(e,t,r){if(typeof e!="function")throw new Error(Ur(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ur(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ur(1));return r(GE)(e,t)}let a=e,s=t,i=new Map,l=i,o=0,c=!1;function u(){l===i&&(l=new Map,i.forEach((v,w)=>{l.set(w,v)}))}function d(){if(c)throw new Error(Ur(3));return s}function f(v){if(typeof v!="function")throw new Error(Ur(4));if(c)throw new Error(Ur(5));let w=!0;u();const S=o++;return l.set(S,v),function(){if(w){if(c)throw new Error(Ur(6));w=!1,u(),l.delete(S),i=null}}}function m(v){if(!jb(v))throw new Error(Ur(7));if(typeof v.type>"u")throw new Error(Ur(8));if(typeof v.type!="string")throw new Error(Ur(17));if(c)throw new Error(Ur(9));try{c=!0,s=a(s,v)}finally{c=!1}return(i=l).forEach(S=>{S()}),v}function p(v){if(typeof v!="function")throw new Error(Ur(10));a=v,m({type:wm.REPLACE})}function y(){const v=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Ur(11));function S(){const x=w;x.next&&x.next(d())}return S(),{unsubscribe:v(S)}},[Jj](){return this}}}return m({type:wm.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:p,[Jj]:y}}function cR(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:wm.INIT})>"u")throw new Error(Ur(12));if(typeof r(void 0,{type:wm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ur(13))})}function uR(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const a=Object.keys(r);let s;try{cR(r)}catch(i){s=i}return function(l={},o){if(s)throw s;let c=!1;const u={};for(let d=0;d<a.length;d++){const f=a[d],m=r[f],p=l[f],y=m(p,o);if(typeof y>"u")throw o&&o.type,new Error(Ur(14));u[f]=y,c=c||y!==p}return c=c||a.length!==Object.keys(l).length,c?u:l}}function Nm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function dR(...e){return t=>(r,a)=>{const s=t(r,a);let i=()=>{throw new Error(Ur(15))};const l={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},o=e.map(c=>c(l));return i=Nm(...o)(s.dispatch),{...s,dispatch:i}}}function fR(e){return jb(e)&&"type"in e&&typeof e.type=="string"}var XE=Symbol.for("immer-nothing"),Zj=Symbol.for("immer-draftable"),Ka=Symbol.for("immer-state");function Fn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var tc=Object.getPrototypeOf;function _l(e){return!!e&&!!e[Ka]}function Ms(e){var t;return e?YE(e)||Array.isArray(e)||!!e[Zj]||!!((t=e.constructor)!=null&&t[Zj])||wf(e)||sx(e):!1}var mR=Object.prototype.constructor.toString();function YE(e){if(!e||typeof e!="object")return!1;const t=tc(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===mR}function jm(e,t){nx(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function nx(e){const t=e[Ka];return t?t.type_:Array.isArray(e)?1:wf(e)?2:sx(e)?3:0}function Iy(e,t){return nx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function QE(e,t,r){const a=nx(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function hR(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function wf(e){return e instanceof Map}function sx(e){return e instanceof Set}function tl(e){return e.copy_||e.base_}function Fy(e,t){if(wf(e))return new Map(e);if(sx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=YE(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[Ka];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const l=s[i],o=a[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(a[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(tc(e),a)}else{const a=tc(e);if(a!==null&&r)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function Sb(e,t=!1){return ix(e)||_l(e)||!Ms(e)||(nx(e)>1&&Object.defineProperties(e,{set:{value:l0},add:{value:l0},clear:{value:l0},delete:{value:l0}}),Object.freeze(e),t&&Object.values(e).forEach(r=>Sb(r,!0))),e}function l0(){Fn(2)}function ix(e){return Object.isFrozen(e)}var xR={};function Ol(e){const t=xR[e];return t||Fn(0,e),t}var md;function JE(){return md}function pR(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function e2(e,t){t&&(Ol("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function My(e){Ry(e),e.drafts_.forEach(gR),e.drafts_=null}function Ry(e){e===md&&(md=e.parent_)}function t2(e){return md=pR(md,e)}function gR(e){const t=e[Ka];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function r2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ka].modified_&&(My(t),Fn(4)),Ms(e)&&(e=Sm(t,e),t.parent_||km(t,e)),t.patches_&&Ol("Patches").generateReplacementPatches_(r[Ka].base_,e,t.patches_,t.inversePatches_)):e=Sm(t,r,[]),My(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==XE?e:void 0}function Sm(e,t,r){if(ix(t))return t;const a=t[Ka];if(!a)return jm(t,(s,i)=>a2(e,a,t,s,i,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return km(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),jm(i,(o,c)=>a2(e,a,s,o,c,r,l)),km(e,s,!1),r&&e.patches_&&Ol("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function a2(e,t,r,a,s,i,l){if(_l(s)){const o=i&&t&&t.type_!==3&&!Iy(t.assigned_,a)?i.concat(a):void 0,c=Sm(e,s,o);if(QE(r,a,c),_l(c))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Ms(s)&&!ix(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Sm(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(wf(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&km(e,s)}}function km(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Sb(t,r)}function yR(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:JE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=kb;r&&(s=[a],i=hd);const{revoke:l,proxy:o}=Proxy.revocable(s,i);return a.draft_=o,a.revoke_=l,o}var kb={get(e,t){if(t===Ka)return e;const r=tl(e);if(!Iy(r,t))return vR(e,r,t);const a=r[t];return e.finalized_||!Ms(a)?a:a===Up(e.base_,t)?(Wp(e),e.copy_[t]=$y(a,e)):a},has(e,t){return t in tl(e)},ownKeys(e){return Reflect.ownKeys(tl(e))},set(e,t,r){const a=ZE(tl(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const s=Up(tl(e),t),i=s==null?void 0:s[Ka];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(hR(r,s)&&(r!==void 0||Iy(e.base_,t)))return!0;Wp(e),Ly(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Up(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Wp(e),Ly(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=tl(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Fn(11)},getPrototypeOf(e){return tc(e.base_)},setPrototypeOf(){Fn(12)}},hd={};jm(kb,(e,t)=>{hd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});hd.deleteProperty=function(e,t){return hd.set.call(this,e,t,void 0)};hd.set=function(e,t,r){return kb.set.call(this,e[0],t,r,e[0])};function Up(e,t){const r=e[Ka];return(r?tl(r):e)[t]}function vR(e,t,r){var s;const a=ZE(t,r);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function ZE(e,t){if(!(t in e))return;let r=tc(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=tc(r)}}function Ly(e){e.modified_||(e.modified_=!0,e.parent_&&Ly(e.parent_))}function Wp(e){e.copy_||(e.copy_=Fy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(c=i,...u){return l.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Fn(6),a!==void 0&&typeof a!="function"&&Fn(7);let s;if(Ms(t)){const i=t2(this),l=$y(t,void 0);let o=!0;try{s=r(l),o=!1}finally{o?My(i):Ry(i)}return e2(i,a),r2(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===XE&&(s=void 0),this.autoFreeze_&&Sb(s,!0),a){const i=[],l=[];Ol("Patches").generateReplacementPatches_(t,s,i,l),a(i,l)}return s}else Fn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,c=>t(c,...o));let a,s;return[this.produce(t,r,(l,o)=>{a=l,s=o}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ms(e)||Fn(8),_l(e)&&(e=wR(e));const t=t2(this),r=$y(e,void 0);return r[Ka].isManual_=!0,Ry(t),r}finishDraft(e,t){const r=e&&e[Ka];(!r||!r.isManual_)&&Fn(9);const{scope_:a}=r;return e2(a,t),r2(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const a=Ol("Patches").applyPatches_;return _l(e)?a(e,t):this.produce(e,s=>a(s,t))}};function $y(e,t){const r=wf(e)?Ol("MapSet").proxyMap_(e,t):sx(e)?Ol("MapSet").proxySet_(e,t):yR(e,t);return(t?t.scope_:JE()).drafts_.push(r),r}function wR(e){return _l(e)||Fn(10,e),eT(e)}function eT(e){if(!Ms(e)||ix(e))return e;const t=e[Ka];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Fy(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Fy(e,!0);return jm(r,(a,s)=>{QE(r,a,eT(s))}),t&&(t.finalized_=!1),r}var NR=new bR,tT=NR.produce;function rT(e){return({dispatch:r,getState:a})=>s=>i=>typeof i=="function"?i(r,a,e):s(i)}var jR=rT(),SR=rT,kR=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Nm:Nm.apply(null,arguments)};function n2(e,t){function r(...a){if(t){let s=t(...a);if(!s)throw new Error(ks(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>fR(a)&&a.type===e,r}var aT=class bu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,bu.prototype)}static get[Symbol.species](){return bu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new bu(...t[0].concat(this)):new bu(...t.concat(this))}};function s2(e){return Ms(e)?tT(e,()=>{}):e}function o0(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function CR(e){return typeof e=="boolean"}var _R=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new aT;return r&&(CR(r)?l.push(jR):l.push(SR(r.extraArgument))),l},OR="RTK_autoBatch",i2=e=>t=>{setTimeout(t,e)},ER=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let s=!0,i=!1,l=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i2(10):e.type==="callback"?e.queueNotification:i2(e.timeout),u=()=>{l=!1,i&&(i=!1,o.forEach(d=>d()))};return Object.assign({},a,{subscribe(d){const f=()=>s&&d(),m=a.subscribe(f);return o.add(d),()=>{m(),o.delete(d)}},dispatch(d){var f;try{return s=!((f=d==null?void 0:d.meta)!=null&&f[OR]),i=!s,i&&(l||(l=!0,c(u))),a.dispatch(d)}finally{s=!0}}})},TR=e=>function(r){const{autoBatch:a=!0}=r??{};let s=new aT(e);return a&&s.push(ER(typeof a=="object"?a:void 0)),s};function AR(e){const t=_R(),{reducer:r=void 0,middleware:a,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:l=void 0,enhancers:o=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(jb(r))c=uR(r);else throw new Error(ks(1));let u;typeof a=="function"?u=a(t):u=t();let d=Nm;s&&(d=kR({trace:!1,...typeof s=="object"&&s}));const f=dR(...u),m=TR(f);let p=typeof o=="function"?o(m):m();const y=d(...p);return GE(c,l,y)}function nT(e){const t={},r=[];let a;const s={addCase(i,l){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(ks(28));if(o in t)throw new Error(ks(29));return t[o]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,r,a]}function PR(e){return typeof e=="function"}function DR(e,t){let[r,a,s]=nT(t),i;if(PR(e))i=()=>s2(e());else{const o=s2(e);i=()=>o}function l(o=i(),c){let u=[r[c.type],...a.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(_l(d)){const p=f(d,c);return p===void 0?d:p}else{if(Ms(d))return tT(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},o)}return l.getInitialState=i,l}var IR=Symbol.for("rtk-slice-createasyncthunk");function FR(e,t){return`${e}/${t}`}function MR({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[IR];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(ks(11));typeof process<"u";const o=(typeof s.reducers=="function"?s.reducers($R()):s.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(x,g){const N=typeof x=="string"?x:x.type;if(!N)throw new Error(ks(12));if(N in u.sliceCaseReducersByType)throw new Error(ks(13));return u.sliceCaseReducersByType[N]=g,d},addMatcher(x,g){return u.sliceMatchers.push({matcher:x,reducer:g}),d},exposeAction(x,g){return u.actionCreators[x]=g,d},exposeCaseReducer(x,g){return u.sliceCaseReducersByName[x]=g,d}};c.forEach(x=>{const g=o[x],N={reducerName:x,type:FR(i,x),createNotation:typeof s.reducers=="function"};UR(g)?qR(N,g,d,t):BR(N,g,d)});function f(){const[x={},g=[],N=void 0]=typeof s.extraReducers=="function"?nT(s.extraReducers):[s.extraReducers],j={...x,...u.sliceCaseReducersByType};return DR(s.initialState,C=>{for(let _ in j)C.addCase(_,j[_]);for(let _ of u.sliceMatchers)C.addMatcher(_.matcher,_.reducer);for(let _ of g)C.addMatcher(_.matcher,_.reducer);N&&C.addDefaultCase(N)})}const m=x=>x,p=new Map,y=new WeakMap;let h;function v(x,g){return h||(h=f()),h(x,g)}function w(){return h||(h=f()),h.getInitialState()}function S(x,g=!1){function N(C){let _=C[x];return typeof _>"u"&&g&&(_=o0(y,N,w)),_}function j(C=m){const _=o0(p,g,()=>new WeakMap);return o0(_,C,()=>{const T={};for(const[E,k]of Object.entries(s.selectors??{}))T[E]=RR(k,C,()=>o0(y,C,w),g);return T})}return{reducerPath:x,getSelectors:j,get selectors(){return j(N)},selectSlice:N}}const b={name:i,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:w,...S(l),injectInto(x,{reducerPath:g,...N}={}){const j=g??l;return x.inject({reducerPath:j,reducer:v},N),{...b,...S(j,!0)}}};return b}}function RR(e,t,r,a){function s(i,...l){let o=t(i);return typeof o>"u"&&a&&(o=r()),e(o,...l)}return s.unwrapped=e,s}var LR=MR();function $R(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function BR({type:e,reducerName:t,createNotation:r},a,s){let i,l;if("reducer"in a){if(r&&!WR(a))throw new Error(ks(17));i=a.reducer,l=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?n2(e,l):n2(e))}function UR(e){return e._reducerDefinitionType==="asyncThunk"}function WR(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qR({type:e,reducerName:t},r,a,s){if(!s)throw new Error(ks(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:c,settled:u,options:d}=r,f=s(e,i,d);a.exposeAction(t,f),l&&a.addCase(f.fulfilled,l),o&&a.addCase(f.pending,o),c&&a.addCase(f.rejected,c),u&&a.addMatcher(f.settled,u),a.exposeCaseReducer(t,{fulfilled:l||c0,pending:o||c0,rejected:c||c0,settled:u||c0})}function c0(){}function ks(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const KR={rawMaterials:[],loading:!1,error:null},zR=()=>{try{localStorage.removeItem("rawMaterials"),console.log(" Cleared rawMaterials from localStorage")}catch(e){console.error("Error clearing localStorage:",e)}return[]},VR=zR(),sT=LR({name:"inventory",initialState:{...KR,rawMaterials:VR},reducers:{setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload},setRawMaterials:(e,t)=>{e.rawMaterials=t.payload;try{localStorage.setItem("rawMaterials",JSON.stringify(t.payload))}catch(r){console.error("Error saving to localStorage:",r)}},addRawMaterial:(e,t)=>{e.rawMaterials.push(t.payload);try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(r){console.error("Error saving to localStorage:",r)}},updateRawMaterial:(e,t)=>{const r=e.rawMaterials.findIndex(a=>a.id===t.payload.id);if(r!==-1){e.rawMaterials[r]=t.payload;try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(a){console.error("Error saving to localStorage:",a)}}},deleteRawMaterial:(e,t)=>{e.rawMaterials=e.rawMaterials.filter(r=>r.id!==t.payload);try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(r){console.error("Error saving to localStorage:",r)}},importRawMaterials:(e,t)=>{const r=t.payload,s=[...e.rawMaterials];r.forEach(i=>{const l=s.findIndex(o=>o.materialCode===i.materialCode);l!==-1?s[l]={...s[l],materialName:i.materialName,description:i.description,category:i.category,unitOfMeasure:i.unitOfMeasure,updatedAt:new Date().toISOString()}:s.push(i)}),e.rawMaterials=s;try{localStorage.setItem("rawMaterials",JSON.stringify(e.rawMaterials))}catch(i){console.error("Error saving to localStorage:",i)}},clearRawMaterials:e=>{e.rawMaterials=[];try{localStorage.removeItem("rawMaterials")}catch(t){console.error("Error clearing localStorage:",t)}}}});sT.actions;const HR=sT.reducer,GR=AR({reducer:{inventory:HR}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),qe=(e,t)=>{const r=O.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>O.createElement("svg",{ref:d,...XR,width:s,height:s,stroke:a,strokeWidth:l?Number(i)*24/Number(s):i,className:["lucide",`lucide-${YR(e)}`,o].join(" "),...u},[...t.map(([f,m])=>O.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=qe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=qe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=qe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=qe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=qe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=qe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=qe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=qe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=qe("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=qe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=qe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=qe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=qe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=qe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=qe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=qe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=qe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=qe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=qe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=qe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=qe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=qe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=qe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=qe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=qe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=qe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=qe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=qe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=qe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=qe("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=qe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=qe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=qe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=qe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=qe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=qe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=qe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=qe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=qe("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=qe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=qe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=qe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),qp=[{name:"Dashboard",href:"/dashboard",icon:r8},{name:"Recipe Master",href:"/bill-of-materials",icon:e8},{name:"Central Kitchen",icon:hn,hasDropdown:!0,children:[{name:"Raw Material Inventory",href:"/central-kitchen/raw-materials",icon:Ve},{name:"Finished Good Inventory",href:"/central-kitchen/finished-goods",icon:mo},{name:"Make Finished Good",href:"/central-kitchen/make-finished-good",icon:Ab},{name:"Create Transfer",href:"/central-kitchen/create-transfer",icon:Rr}]},{name:"Outlets",icon:hn,hasDropdown:!0,children:[{name:"Kuwait City",icon:hn,hasDropdown:!0,children:[{name:"POS Sales",href:"/kuwait-city/sales-orders",icon:vr},{name:"Raw Material Inventory",href:"/kuwait-city/raw-materials",icon:Ve},{name:"Finished Goods Inventory",href:"/kuwait-city/finished-goods",icon:mo}]},{name:"360 Mall",icon:Om,hasDropdown:!0,children:[{name:"POS Sales",href:"/360-mall/sales-orders",icon:vr},{name:"Raw Material Inventory",href:"/360-mall/raw-materials",icon:Ve},{name:"Finished Goods Inventory",href:"/360-mall/finished-goods",icon:mo}]},{name:"Vibes Complex",icon:_m,hasDropdown:!0,children:[{name:"POS Sales",href:"/vibes-complex/sales-orders",icon:vr},{name:"Raw Material Inventory",href:"/vibes-complex/raw-materials",icon:Ve},{name:"Finished Goods Inventory",href:"/vibes-complex/finished-goods",icon:mo}]},{name:"Taiba Hospital",icon:Cm,hasDropdown:!0,children:[{name:"POS Sales",href:"/taiba-hospital/sales-orders",icon:vr},{name:"Raw Material Inventory",href:"/taiba-hospital/raw-materials",icon:Ve},{name:"Finished Goods Inventory",href:"/taiba-hospital/finished-goods",icon:mo}]}]},{name:"Transfer Orders",href:"/transfer-orders",icon:Rr},{name:"Purchase Orders",href:"/purchase-orders",icon:vr}],s8=({children:e})=>{const[t,r]=O.useState(!1),[a,s]=O.useState(new Set),i=wa(),l=(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})(),o=!!(l!=null&&l.isAdmin),c=String((l==null?void 0:l.assignedOutletCode)||""),u=ie.useMemo(()=>{if(o)return qp;const f=c==="KUWAIT_CITY"?"Kuwait City":c==="MALL_360"?"360 Mall":c==="VIBE_COMPLEX"?"Vibes Complex":c==="TAIBA_HOSPITAL"?"Taiba Hospital":"",m=[];m.push(qp[0]);const p=qp.find(y=>y.name==="Outlets");if(p&&p.children&&f){const y=p.children.filter(h=>h.name===f);y.length&&m.push({...p,children:y})}return m},[o,c]),d=f=>{const m=new Set(a);m.has(f)?m.delete(f):m.add(f),s(m)};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        /* Enhanced scrollbar styling for sidebar */
        .sidebar-nav::-webkit-scrollbar {
          width: 6px;
        }
        .sidebar-nav::-webkit-scrollbar-track {
          background: transparent;
          border-radius: 3px;
        }
        .sidebar-nav::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 3px;
          transition: background-color 0.2s ease;
        }
        .sidebar-nav::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
        .sidebar-nav {
          scrollbar-width: thin;
          scrollbar-color: #d1d5db transparent;
        }
        
        /* Smooth scrolling behavior */
        .sidebar-nav {
          scroll-behavior: smooth;
        }
        
        /* Ensure proper height constraints */
        .sidebar-container {
          height: calc(100vh - 4rem); /* Subtract header height */
          display: flex;
          flex-direction: column;
        }
        
        .sidebar-nav-container {
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          min-height: 0;
        }
        
        /* Mobile sidebar height fix */
        .mobile-sidebar-nav {
          height: calc(100vh - 4rem);
          overflow-y: auto;
          overflow-x: hidden;
        }
      `}),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${t?"block":"hidden"}`,children:[n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),n.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white sidebar-container",children:[n.jsxs("div",{className:"flex h-16 items-center justify-between px-4 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"L"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"localbeet"})})]}),n.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"sidebar-nav-container",children:n.jsx("nav",{className:"px-4 py-4 space-y-1 sidebar-nav mobile-sidebar-nav",children:u.map(f=>{const m=f.icon,p=i.pathname===f.href,y=f.hasDropdown,h=a.has(f.name);return y?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>d(f.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(m,{className:"mr-3 h-5 w-5 flex-shrink-0"}),f.name]}),h?n.jsx(la,{className:"h-4 w-4"}):n.jsx(d0,{className:"h-4 w-4"})]}),h&&f.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:f.children.map(v=>{const w=v.icon,S=v.href?i.pathname===v.href:!1,b=v.hasDropdown||!1,x=a.has(v.name);return b?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>d(v.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(w,{className:"mr-3 h-4 w-4 flex-shrink-0"}),v.name]}),x?n.jsx(la,{className:"h-4 w-4"}):n.jsx(d0,{className:"h-4 w-4"})]}),x&&v.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:v.children.map(g=>{const N=g.icon,j=g.href?i.pathname===g.href:!1;return n.jsxs(Yi,{to:g.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${j?"bg-primary-100 text-primary-700":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(N,{className:"mr-3 h-4 w-4 flex-shrink-0"}),g.name]},g.name)})})]},v.name):n.jsxs(Yi,{to:v.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${S?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(w,{className:"mr-3 h-4 w-4 flex-shrink-0"}),v.name]},v.name)})})]},f.name):n.jsxs(Yi,{to:f.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${p?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(m,{className:"mr-3 h-5 w-5 flex-shrink-0"}),f.name]},f.name)})})})]})]}),n.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:n.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 sidebar-container",children:[n.jsx("div",{className:"flex h-16 items-center px-4 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:"L"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"localbeet"})})]})}),n.jsx("div",{className:"sidebar-nav-container",children:n.jsx("nav",{className:"px-4 py-4 space-y-1 sidebar-nav",children:u.map(f=>{const m=f.icon,p=i.pathname===f.href,y=f.hasDropdown,h=a.has(f.name);return y?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>d(f.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(m,{className:"mr-3 h-5 w-5 flex-shrink-0"}),f.name]}),h?n.jsx(la,{className:"h-4 w-4"}):n.jsx(d0,{className:"h-4 w-4"})]}),h&&f.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:f.children.map(v=>{const w=v.icon,S=v.href?i.pathname===v.href:!1,b=v.hasDropdown||!1,x=a.has(v.name);return b?n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>d(v.name),className:"group flex items-center justify-between w-full px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(w,{className:"mr-3 h-4 w-4 flex-shrink-0"}),v.name]}),x?n.jsx(la,{className:"h-4 w-4"}):n.jsx(d0,{className:"h-4 w-4"})]}),x&&v.children&&n.jsx("div",{className:"ml-6 mt-1 space-y-1",children:v.children.map(g=>{const N=g.icon,j=g.href?i.pathname===g.href:!1;return n.jsxs(Yi,{to:g.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${j?"bg-primary-100 text-primary-700":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(N,{className:"mr-3 h-4 w-4 flex-shrink-0"}),g.name]},g.name)})})]},v.name):n.jsxs(Yi,{to:v.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${S?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(w,{className:"mr-3 h-4 w-4 flex-shrink-0"}),v.name]},v.name)})})]},f.name):n.jsxs(Yi,{to:f.href||"#",className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${p?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[n.jsx(m,{className:"mr-3 h-5 w-5 flex-shrink-0"}),f.name]},f.name)})})}),n.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ci,{className:"h-8 w-8 text-gray-400"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:(l==null?void 0:l.name)||"User"}),n.jsx("p",{className:"text-xs text-gray-500",children:(l==null?void 0:l.email)||""})]})]}),n.jsxs("div",{className:"mt-3 space-y-1",children:[o&&n.jsxs(Yi,{to:"/settings",className:`flex items-center px-3 py-2 text-sm rounded-lg w-full ${i.pathname==="/settings"?"bg-primary-100 text-primary-700":"text-gray-700 hover:bg-gray-100"}`,children:[n.jsx(fT,{className:"mr-3 h-4 w-4"}),"Settings"]}),n.jsxs("button",{onClick:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="/login"},className:"flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg w-full",children:[n.jsx(a8,{className:"mr-3 h-4 w-4"}),"Sign out"]})]})]})]})}),n.jsxs("div",{className:"lg:pl-64",children:[n.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[n.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>r(!0),children:n.jsx(n8,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[n.jsx("div",{className:"flex flex-1"}),n.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[n.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),n.jsx("div",{className:"flex items-center gap-x-2",children:n.jsx("span",{className:"text-sm text-gray-700",children:"Welcome back, Admin"})})]})]})]}),n.jsx("main",{className:"py-6",children:n.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})]})]})]})};function hT(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=hT(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function vt(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=hT(e))&&(a&&(a+=" "),a+=t);return a}var i8=Array.isArray,Aa=i8,l8=typeof qf=="object"&&qf&&qf.Object===Object&&qf,xT=l8,o8=xT,c8=typeof self=="object"&&self&&self.Object===Object&&self,u8=o8||c8||Function("return this")(),ls=u8,d8=ls,f8=d8.Symbol,Nf=f8,c2=Nf,pT=Object.prototype,m8=pT.hasOwnProperty,h8=pT.toString,su=c2?c2.toStringTag:void 0;function x8(e){var t=m8.call(e,su),r=e[su];try{e[su]=void 0;var a=!0}catch{}var s=h8.call(e);return a&&(t?e[su]=r:delete e[su]),s}var p8=x8,g8=Object.prototype,y8=g8.toString;function v8(e){return y8.call(e)}var b8=v8,u2=Nf,w8=p8,N8=b8,j8="[object Null]",S8="[object Undefined]",d2=u2?u2.toStringTag:void 0;function k8(e){return e==null?e===void 0?S8:j8:d2&&d2 in Object(e)?w8(e):N8(e)}var Ws=k8;function C8(e){return e!=null&&typeof e=="object"}var qs=C8,_8=Ws,O8=qs,E8="[object Symbol]";function T8(e){return typeof e=="symbol"||O8(e)&&_8(e)==E8}var Pc=T8,A8=Aa,P8=Pc,D8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,I8=/^\w*$/;function F8(e,t){if(A8(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||P8(e)?!0:I8.test(e)||!D8.test(e)||t!=null&&e in Object(t)}var Pb=F8;function M8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Li=M8;const Dc=Ft(Li);var R8=Ws,L8=Li,$8="[object AsyncFunction]",B8="[object Function]",U8="[object GeneratorFunction]",W8="[object Proxy]";function q8(e){if(!L8(e))return!1;var t=R8(e);return t==B8||t==U8||t==$8||t==W8}var Db=q8;const st=Ft(Db);var K8=ls,z8=K8["__core-js_shared__"],V8=z8,Kp=V8,f2=function(){var e=/[^.]+$/.exec(Kp&&Kp.keys&&Kp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function H8(e){return!!f2&&f2 in e}var G8=H8,X8=Function.prototype,Y8=X8.toString;function Q8(e){if(e!=null){try{return Y8.call(e)}catch{}try{return e+""}catch{}}return""}var gT=Q8,J8=Db,Z8=G8,eL=Li,tL=gT,rL=/[\\^$.*+?()[\]{}|]/g,aL=/^\[object .+?Constructor\]$/,nL=Function.prototype,sL=Object.prototype,iL=nL.toString,lL=sL.hasOwnProperty,oL=RegExp("^"+iL.call(lL).replace(rL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cL(e){if(!eL(e)||Z8(e))return!1;var t=J8(e)?oL:aL;return t.test(tL(e))}var uL=cL;function dL(e,t){return e==null?void 0:e[t]}var fL=dL,mL=uL,hL=fL;function xL(e,t){var r=hL(e,t);return mL(r)?r:void 0}var zl=xL,pL=zl,gL=pL(Object,"create"),ox=gL,m2=ox;function yL(){this.__data__=m2?m2(null):{},this.size=0}var vL=yL;function bL(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var wL=bL,NL=ox,jL="__lodash_hash_undefined__",SL=Object.prototype,kL=SL.hasOwnProperty;function CL(e){var t=this.__data__;if(NL){var r=t[e];return r===jL?void 0:r}return kL.call(t,e)?t[e]:void 0}var _L=CL,OL=ox,EL=Object.prototype,TL=EL.hasOwnProperty;function AL(e){var t=this.__data__;return OL?t[e]!==void 0:TL.call(t,e)}var PL=AL,DL=ox,IL="__lodash_hash_undefined__";function FL(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=DL&&t===void 0?IL:t,this}var ML=FL,RL=vL,LL=wL,$L=_L,BL=PL,UL=ML;function Ic(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Ic.prototype.clear=RL;Ic.prototype.delete=LL;Ic.prototype.get=$L;Ic.prototype.has=BL;Ic.prototype.set=UL;var WL=Ic;function qL(){this.__data__=[],this.size=0}var KL=qL;function zL(e,t){return e===t||e!==e&&t!==t}var Ib=zL,VL=Ib;function HL(e,t){for(var r=e.length;r--;)if(VL(e[r][0],t))return r;return-1}var cx=HL,GL=cx,XL=Array.prototype,YL=XL.splice;function QL(e){var t=this.__data__,r=GL(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():YL.call(t,r,1),--this.size,!0}var JL=QL,ZL=cx;function e$(e){var t=this.__data__,r=ZL(t,e);return r<0?void 0:t[r][1]}var t$=e$,r$=cx;function a$(e){return r$(this.__data__,e)>-1}var n$=a$,s$=cx;function i$(e,t){var r=this.__data__,a=s$(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var l$=i$,o$=KL,c$=JL,u$=t$,d$=n$,f$=l$;function Fc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Fc.prototype.clear=o$;Fc.prototype.delete=c$;Fc.prototype.get=u$;Fc.prototype.has=d$;Fc.prototype.set=f$;var ux=Fc,m$=zl,h$=ls,x$=m$(h$,"Map"),Fb=x$,h2=WL,p$=ux,g$=Fb;function y$(){this.size=0,this.__data__={hash:new h2,map:new(g$||p$),string:new h2}}var v$=y$;function b$(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var w$=b$,N$=w$;function j$(e,t){var r=e.__data__;return N$(t)?r[typeof t=="string"?"string":"hash"]:r.map}var dx=j$,S$=dx;function k$(e){var t=S$(this,e).delete(e);return this.size-=t?1:0,t}var C$=k$,_$=dx;function O$(e){return _$(this,e).get(e)}var E$=O$,T$=dx;function A$(e){return T$(this,e).has(e)}var P$=A$,D$=dx;function I$(e,t){var r=D$(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var F$=I$,M$=v$,R$=C$,L$=E$,$$=P$,B$=F$;function Mc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Mc.prototype.clear=M$;Mc.prototype.delete=R$;Mc.prototype.get=L$;Mc.prototype.has=$$;Mc.prototype.set=B$;var Mb=Mc,yT=Mb,U$="Expected a function";function Rb(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(U$);var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],i=r.cache;if(i.has(s))return i.get(s);var l=e.apply(this,a);return r.cache=i.set(s,l)||i,l};return r.cache=new(Rb.Cache||yT),r}Rb.Cache=yT;var vT=Rb;const W$=Ft(vT);var q$=vT,K$=500;function z$(e){var t=q$(e,function(a){return r.size===K$&&r.clear(),a}),r=t.cache;return t}var V$=z$,H$=V$,G$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X$=/\\(\\)?/g,Y$=H$(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(G$,function(r,a,s,i){t.push(s?i.replace(X$,"$1"):a||r)}),t}),Q$=Y$;function J$(e,t){for(var r=-1,a=e==null?0:e.length,s=Array(a);++r<a;)s[r]=t(e[r],r,e);return s}var Lb=J$,x2=Nf,Z$=Lb,e7=Aa,t7=Pc,r7=1/0,p2=x2?x2.prototype:void 0,g2=p2?p2.toString:void 0;function bT(e){if(typeof e=="string")return e;if(e7(e))return Z$(e,bT)+"";if(t7(e))return g2?g2.call(e):"";var t=e+"";return t=="0"&&1/e==-r7?"-0":t}var a7=bT,n7=a7;function s7(e){return e==null?"":n7(e)}var wT=s7,i7=Aa,l7=Pb,o7=Q$,c7=wT;function u7(e,t){return i7(e)?e:l7(e,t)?[e]:o7(c7(e))}var NT=u7,d7=Pc,f7=1/0;function m7(e){if(typeof e=="string"||d7(e))return e;var t=e+"";return t=="0"&&1/e==-f7?"-0":t}var fx=m7,h7=NT,x7=fx;function p7(e,t){t=h7(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[x7(t[r++])];return r&&r==a?e:void 0}var $b=p7,g7=$b;function y7(e,t,r){var a=e==null?void 0:g7(e,t);return a===void 0?r:a}var jT=y7;const xn=Ft(jT);function v7(e){return e==null}var b7=v7;const ct=Ft(b7);var w7=Ws,N7=Aa,j7=qs,S7="[object String]";function k7(e){return typeof e=="string"||!N7(e)&&j7(e)&&w7(e)==S7}var C7=k7;const Tl=Ft(C7);var ST={exports:{}},Et={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb=Symbol.for("react.element"),Ub=Symbol.for("react.portal"),mx=Symbol.for("react.fragment"),hx=Symbol.for("react.strict_mode"),xx=Symbol.for("react.profiler"),px=Symbol.for("react.provider"),gx=Symbol.for("react.context"),_7=Symbol.for("react.server_context"),yx=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),bx=Symbol.for("react.suspense_list"),wx=Symbol.for("react.memo"),Nx=Symbol.for("react.lazy"),O7=Symbol.for("react.offscreen"),kT;kT=Symbol.for("react.module.reference");function wn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Bb:switch(e=e.type,e){case mx:case xx:case hx:case vx:case bx:return e;default:switch(e=e&&e.$$typeof,e){case _7:case gx:case yx:case Nx:case wx:case px:return e;default:return t}}case Ub:return t}}}Et.ContextConsumer=gx;Et.ContextProvider=px;Et.Element=Bb;Et.ForwardRef=yx;Et.Fragment=mx;Et.Lazy=Nx;Et.Memo=wx;Et.Portal=Ub;Et.Profiler=xx;Et.StrictMode=hx;Et.Suspense=vx;Et.SuspenseList=bx;Et.isAsyncMode=function(){return!1};Et.isConcurrentMode=function(){return!1};Et.isContextConsumer=function(e){return wn(e)===gx};Et.isContextProvider=function(e){return wn(e)===px};Et.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bb};Et.isForwardRef=function(e){return wn(e)===yx};Et.isFragment=function(e){return wn(e)===mx};Et.isLazy=function(e){return wn(e)===Nx};Et.isMemo=function(e){return wn(e)===wx};Et.isPortal=function(e){return wn(e)===Ub};Et.isProfiler=function(e){return wn(e)===xx};Et.isStrictMode=function(e){return wn(e)===hx};Et.isSuspense=function(e){return wn(e)===vx};Et.isSuspenseList=function(e){return wn(e)===bx};Et.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mx||e===xx||e===hx||e===vx||e===bx||e===O7||typeof e=="object"&&e!==null&&(e.$$typeof===Nx||e.$$typeof===wx||e.$$typeof===px||e.$$typeof===gx||e.$$typeof===yx||e.$$typeof===kT||e.getModuleId!==void 0)};Et.typeOf=wn;ST.exports=Et;var E7=ST.exports,T7=Ws,A7=qs,P7="[object Number]";function D7(e){return typeof e=="number"||A7(e)&&T7(e)==P7}var CT=D7;const I7=Ft(CT);var F7=CT;function M7(e){return F7(e)&&e!=+e}var R7=M7;const jf=Ft(R7);var Rn=function(t){return t===0?0:t>0?1:-1},cl=function(t){return Tl(t)&&t.indexOf("%")===t.length-1},Ae=function(t){return I7(t)&&!jf(t)},L7=function(t){return ct(t)},Cr=function(t){return Ae(t)||Tl(t)},$7=0,Sf=function(t){var r=++$7;return"".concat(t||"").concat(r)},Al=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(t)&&!Tl(t))return a;var i;if(cl(t)){var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return jf(i)&&(i=a),s&&i>r&&(i=r),i},ni=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},B7=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},In=function(t,r){return Ae(t)&&Ae(r)?function(a){return t+a*(r-t)}:function(){return r}};function Em(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):xn(a,t))===r})}var U7=function(t,r){return Ae(t)&&Ae(r)?t-r:Tl(t)&&Tl(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Lo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Uy(e){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uy(e)}var W7=["viewBox","children"],q7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],y2=["points","pathLength"],zp={svg:W7,polygon:y2,polyline:y2},Wb=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Tm=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(O.isValidElement(t)&&(a=t.props),!Dc(a))return null;var s={};return Object.keys(a).forEach(function(i){Wb.includes(i)&&(s[i]=r||function(l){return a[i](a,l)})}),s},K7=function(t,r,a){return function(s){return t(r,a,s),null}},Am=function(t,r,a){if(!Dc(t)||Uy(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var l=t[i];Wb.includes(i)&&typeof l=="function"&&(s||(s={}),s[i]=K7(l,r,a))}),s},z7=["children"],V7=["children"];function v2(e,t){if(e==null)return{};var r=H7(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function H7(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Wy(e){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wy(e)}var b2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},w2=null,Vp=null,qb=function e(t){if(t===w2&&Array.isArray(Vp))return Vp;var r=[];return O.Children.forEach(t,function(a){ct(a)||(E7.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),Vp=r,w2=t,r};function pn(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return Cs(s)}):a=[Cs(t)],qb(e).forEach(function(s){var i=xn(s,"type.displayName")||xn(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function Fa(e,t){var r=pn(e,t);return r&&r[0]}var N2=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!Ae(a)||a<=0||!Ae(s)||s<=0)},G7=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],X7=function(t){return t&&t.type&&Tl(t.type)&&G7.indexOf(t.type)>=0},Y7=function(t){return t&&Wy(t)==="object"&&"clipDot"in t},Q7=function(t,r,a,s){var i,l=(i=zp==null?void 0:zp[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!st(t)&&(s&&l.includes(r)||q7.includes(r))||a&&Wb.includes(r)},ht=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(O.isValidElement(t)&&(s=t.props),!Dc(s))return null;var i={};return Object.keys(s).forEach(function(l){var o;Q7((o=s)===null||o===void 0?void 0:o[l],l,r,a)&&(i[l]=s[l])}),i},qy=function e(t,r){if(t===r)return!0;var a=O.Children.count(t);if(a!==O.Children.count(r))return!1;if(a===0)return!0;if(a===1)return j2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],l=r[s];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!j2(i,l))return!1}return!0},j2=function(t,r){if(ct(t)&&ct(r))return!0;if(!ct(t)&&!ct(r)){var a=t.props||{},s=a.children,i=v2(a,z7),l=r.props||{},o=l.children,c=v2(l,V7);return s&&o?Lo(i,c)&&qy(s,o):!s&&!o?Lo(i,c):!1}return!1},S2=function(t,r){var a=[],s={};return qb(t).forEach(function(i,l){if(X7(i))a.push(i);else if(i){var o=Cs(i.type),c=r[o]||{},u=c.handler,d=c.once;if(u&&(!d||!s[o])){var f=u(i,o,l);a.push(f),s[o]=!0}}}),a},J7=function(t){var r=t&&t.type;return r&&b2[r]?b2[r]:null},Z7=function(t,r){return qb(r).indexOf(t)},e9=["children","width","height","viewBox","className","style","title","desc"];function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ky.apply(this,arguments)}function t9(e,t){if(e==null)return{};var r=r9(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function r9(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function zy(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,l=e.style,o=e.title,c=e.desc,u=t9(e,e9),d=s||{width:r,height:a,x:0,y:0},f=vt("recharts-surface",i);return ie.createElement("svg",Ky({},ht(u,!0,"svg"),{className:f,width:r,height:a,style:l,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ie.createElement("title",null,o),ie.createElement("desc",null,c),t)}var a9=["children","className"];function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vy.apply(this,arguments)}function n9(e,t){if(e==null)return{};var r=s9(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function s9(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var dr=ie.forwardRef(function(e,t){var r=e.children,a=e.className,s=n9(e,a9),i=vt("recharts-layer",a);return ie.createElement("g",Vy({className:i},ht(s,!0),{ref:t}),r)}),_s=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function i9(e,t,r){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++a<s;)i[a]=e[a+t];return i}var l9=i9,o9=l9;function c9(e,t,r){var a=e.length;return r=r===void 0?a:r,!t&&r>=a?e:o9(e,t,r)}var u9=c9,d9="\\ud800-\\udfff",f9="\\u0300-\\u036f",m9="\\ufe20-\\ufe2f",h9="\\u20d0-\\u20ff",x9=f9+m9+h9,p9="\\ufe0e\\ufe0f",g9="\\u200d",y9=RegExp("["+g9+d9+x9+p9+"]");function v9(e){return y9.test(e)}var _T=v9;function b9(e){return e.split("")}var w9=b9,OT="\\ud800-\\udfff",N9="\\u0300-\\u036f",j9="\\ufe20-\\ufe2f",S9="\\u20d0-\\u20ff",k9=N9+j9+S9,C9="\\ufe0e\\ufe0f",_9="["+OT+"]",Hy="["+k9+"]",Gy="\\ud83c[\\udffb-\\udfff]",O9="(?:"+Hy+"|"+Gy+")",ET="[^"+OT+"]",TT="(?:\\ud83c[\\udde6-\\uddff]){2}",AT="[\\ud800-\\udbff][\\udc00-\\udfff]",E9="\\u200d",PT=O9+"?",DT="["+C9+"]?",T9="(?:"+E9+"(?:"+[ET,TT,AT].join("|")+")"+DT+PT+")*",A9=DT+PT+T9,P9="(?:"+[ET+Hy+"?",Hy,TT,AT,_9].join("|")+")",D9=RegExp(Gy+"(?="+Gy+")|"+P9+A9,"g");function I9(e){return e.match(D9)||[]}var F9=I9,M9=w9,R9=_T,L9=F9;function $9(e){return R9(e)?L9(e):M9(e)}var B9=$9,U9=u9,W9=_T,q9=B9,K9=wT;function z9(e){return function(t){t=K9(t);var r=W9(t)?q9(t):void 0,a=r?r[0]:t.charAt(0),s=r?U9(r,1).join(""):t.slice(1);return a[e]()+s}}var V9=z9,H9=V9,G9=H9("toUpperCase"),X9=G9;const jx=Ft(X9);function Mt(e){return function(){return e}}const IT=Math.cos,Pm=Math.sin,Kn=Math.sqrt,Dm=Math.PI,Sx=2*Dm,Xy=Math.PI,Yy=2*Xy,rl=1e-6,Y9=Yy-rl;function FT(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Q9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return FT;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class J9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?FT:Q9(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,l){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=a-t,u=s-r,d=l-t,f=o-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>rl)if(!(Math.abs(f*c-u*d)>rl)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=a-l,y=s-o,h=c*c+u*u,v=p*p+y*y,w=Math.sqrt(h),S=Math.sqrt(m),b=i*Math.tan((Xy-Math.acos((h+m-v)/(2*w*S)))/2),x=b/S,g=b/w;Math.abs(x-1)>rl&&this._append`L${t+x*d},${r+x*f}`,this._append`A${i},${i},0,0,${+(f*p>d*y)},${this._x1=t+g*c},${this._y1=r+g*u}`}}arc(t,r,a,s,i,l){if(t=+t,r=+r,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let o=a*Math.cos(s),c=a*Math.sin(s),u=t+o,d=r+c,f=1^l,m=l?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>rl||Math.abs(this._y1-d)>rl)&&this._append`L${u},${d}`,a&&(m<0&&(m=m%Yy+Yy),m>Y9?this._append`A${a},${a},0,1,${f},${t-o},${r-c}A${a},${a},0,1,${f},${this._x1=u},${this._y1=d}`:m>rl&&this._append`A${a},${a},0,${+(m>=Xy)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Kb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new J9(t)}function zb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function MT(e){this._context=e}MT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function kx(e){return new MT(e)}function RT(e){return e[0]}function LT(e){return e[1]}function $T(e,t){var r=Mt(!0),a=null,s=kx,i=null,l=Kb(o);e=typeof e=="function"?e:e===void 0?RT:Mt(e),t=typeof t=="function"?t:t===void 0?LT:Mt(t);function o(c){var u,d=(c=zb(c)).length,f,m=!1,p;for(a==null&&(i=s(p=l())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(p)return i=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Mt(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Mt(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Mt(!!c),o):r},o.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),o):s},o.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),o):a},o}function f0(e,t,r){var a=null,s=Mt(!0),i=null,l=kx,o=null,c=Kb(u);e=typeof e=="function"?e:e===void 0?RT:Mt(+e),t=typeof t=="function"?t:Mt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?LT:Mt(+r);function u(f){var m,p,y,h=(f=zb(f)).length,v,w=!1,S,b=new Array(h),x=new Array(h);for(i==null&&(o=l(S=c())),m=0;m<=h;++m){if(!(m<h&&s(v=f[m],m,f))===w)if(w=!w)p=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=m-1;y>=p;--y)o.point(b[y],x[y]);o.lineEnd(),o.areaEnd()}w&&(b[m]=+e(v,m,f),x[m]=+t(v,m,f),o.point(a?+a(v,m,f):b[m],r?+r(v,m,f):x[m]))}if(S)return o=null,S+""||null}function d(){return $T().defined(s).curve(l).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),a=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Mt(+f),u):e},u.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Mt(+f),u):a},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Mt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Mt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Mt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(a).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Mt(!!f),u):s},u.curve=function(f){return arguments.length?(l=f,i!=null&&(o=l(i)),u):l},u.context=function(f){return arguments.length?(f==null?i=o=null:o=l(i=f),u):i},u}class BT{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Z9(e){return new BT(e,!0)}function eB(e){return new BT(e,!1)}const Vb={draw(e,t){const r=Kn(t/Dm);e.moveTo(r,0),e.arc(0,0,r,0,Sx)}},tB={draw(e,t){const r=Kn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},UT=Kn(1/3),rB=UT*2,aB={draw(e,t){const r=Kn(t/rB),a=r*UT;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},nB={draw(e,t){const r=Kn(t),a=-r/2;e.rect(a,a,r,r)}},sB=.8908130915292852,WT=Pm(Dm/10)/Pm(7*Dm/10),iB=Pm(Sx/10)*WT,lB=-IT(Sx/10)*WT,oB={draw(e,t){const r=Kn(t*sB),a=iB*r,s=lB*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const l=Sx*i/5,o=IT(l),c=Pm(l);e.lineTo(c*r,-o*r),e.lineTo(o*a-c*s,c*a+o*s)}e.closePath()}},Hp=Kn(3),cB={draw(e,t){const r=-Kn(t/(Hp*3));e.moveTo(0,r*2),e.lineTo(-Hp*r,-r),e.lineTo(Hp*r,-r),e.closePath()}},Qa=-.5,Ja=Kn(3)/2,Qy=1/Kn(12),uB=(Qy/2+1)*3,dB={draw(e,t){const r=Kn(t/uB),a=r/2,s=r*Qy,i=a,l=r*Qy+r,o=-i,c=l;e.moveTo(a,s),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(Qa*a-Ja*s,Ja*a+Qa*s),e.lineTo(Qa*i-Ja*l,Ja*i+Qa*l),e.lineTo(Qa*o-Ja*c,Ja*o+Qa*c),e.lineTo(Qa*a+Ja*s,Qa*s-Ja*a),e.lineTo(Qa*i+Ja*l,Qa*l-Ja*i),e.lineTo(Qa*o+Ja*c,Qa*c-Ja*o),e.closePath()}};function fB(e,t){let r=null,a=Kb(s);e=typeof e=="function"?e:Mt(e||Vb),t=typeof t=="function"?t:Mt(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Mt(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Mt(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Im(){}function Fm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function qT(e){this._context=e}qT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mB(e){return new qT(e)}function KT(e){this._context=e}KT.prototype={areaStart:Im,areaEnd:Im,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hB(e){return new KT(e)}function zT(e){this._context=e}zT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:Fm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xB(e){return new zT(e)}function VT(e){this._context=e}VT.prototype={areaStart:Im,areaEnd:Im,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pB(e){return new VT(e)}function k2(e){return e<0?-1:1}function C2(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),l=(r-e._y1)/(s||a<0&&-0),o=(i*s+l*a)/(a+s);return(k2(i)+k2(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function _2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Gp(e,t,r){var a=e._x0,s=e._y0,i=e._x1,l=e._y1,o=(i-a)/3;e._context.bezierCurveTo(a+o,s+o*t,i-o,l-o*r,i,l)}function Mm(e){this._context=e}Mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Gp(this,this._t0,_2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Gp(this,_2(this,r=C2(this,e,t)),r);break;default:Gp(this,this._t0,r=C2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function HT(e){this._context=new GT(e)}(HT.prototype=Object.create(Mm.prototype)).point=function(e,t){Mm.prototype.point.call(this,t,e)};function GT(e){this._context=e}GT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function gB(e){return new Mm(e)}function yB(e){return new HT(e)}function XT(e){this._context=e}XT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=O2(e),s=O2(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function O2(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,l[t]-=a*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function vB(e){return new XT(e)}function Cx(e,t){this._context=e,this._t=t}Cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function bB(e){return new Cx(e,.5)}function wB(e){return new Cx(e,0)}function NB(e){return new Cx(e,1)}function rc(e,t){if((l=e.length)>1)for(var r=1,a,s,i=e[t[0]],l,o=i.length;r<l;++r)for(s=i,i=e[t[r]],a=0;a<o;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function Jy(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function jB(e,t){return e[t]}function SB(e){const t=[];return t.key=e,t}function kB(){var e=Mt([]),t=Jy,r=rc,a=jB;function s(i){var l=Array.from(e.apply(this,arguments),SB),o,c=l.length,u=-1,d;for(const f of i)for(o=0,++u;o<c;++o)(l[o][u]=[0,+a(f,l[o].key,u,i)]).data=f;for(o=0,d=zb(t(l));o<c;++o)l[d[o]].index=o;return r(l,d),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Mt(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Mt(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?Jy:typeof i=="function"?i:Mt(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??rc,s):r},s}function CB(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<a;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<a;++r)e[r][s][1]/=l}rc(e,t)}}function _B(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var l=0,o=0;l<s;++l)o+=e[l][r][1]||0;a[r][1]+=a[r][0]=-o/2}rc(e,t)}}function OB(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,l;a<i;++a){for(var o=0,c=0,u=0;o<l;++o){for(var d=e[t[o]],f=d[a][1]||0,m=d[a-1][1]||0,p=(f-m)/2,y=0;y<o;++y){var h=e[t[y]],v=h[a][1]||0,w=h[a-1][1]||0;p+=v-w}c+=f,u+=p*f}s[a-1][1]+=s[a-1][0]=r,c&&(r-=u/c)}s[a-1][1]+=s[a-1][0]=r,rc(e,t)}}function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}var EB=["type","size","sizeType"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zy.apply(this,arguments)}function E2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function T2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E2(Object(r),!0).forEach(function(a){TB(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function TB(e,t,r){return t=AB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AB(e){var t=PB(e,"string");return pd(t)=="symbol"?t:t+""}function PB(e,t){if(pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(pd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DB(e,t){if(e==null)return{};var r=IB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function IB(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var YT={symbolCircle:Vb,symbolCross:tB,symbolDiamond:aB,symbolSquare:nB,symbolStar:oB,symbolTriangle:cB,symbolWye:dB},FB=Math.PI/180,MB=function(t){var r="symbol".concat(jx(t));return YT[r]||Vb},RB=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*FB;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},LB=function(t,r){YT["symbol".concat(jx(t))]=r},Hb=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,l=t.sizeType,o=l===void 0?"area":l,c=DB(t,EB),u=T2(T2({},c),{},{type:a,size:i,sizeType:o}),d=function(){var v=MB(a),w=fB().type(v).size(RB(i,o,a));return w()},f=u.className,m=u.cx,p=u.cy,y=ht(u,!0);return m===+m&&p===+p&&i===+i?ie.createElement("path",Zy({},y,{className:vt("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(p,")"),d:d()})):null};Hb.registerSymbol=LB;function ac(e){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac(e)}function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ev.apply(this,arguments)}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $B(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(r),!0).forEach(function(a){gd(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function BB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P2(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,JT(a.key),a)}}function UB(e,t,r){return t&&P2(e.prototype,t),r&&P2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WB(e,t,r){return t=Rm(t),qB(e,QT()?Reflect.construct(t,r||[],Rm(e).constructor):t.apply(e,r))}function qB(e,t){if(t&&(ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KB(e)}function KB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QT=function(){return!!e})()}function Rm(e){return Rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rm(e)}function zB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}function tv(e,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tv(e,t)}function gd(e,t,r){return t=JT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JT(e){var t=VB(e,"string");return ac(t)=="symbol"?t:t+""}function VB(e,t){if(ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(ac(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Za=32,Gb=function(e){function t(){return BB(this,t),WB(this,t,arguments)}return zB(t,e),UB(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Za/2,l=Za/6,o=Za/3,c=a.inactive?s:a.color;if(a.type==="plainline")return ie.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Za,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return ie.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Za,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return ie.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Za/8,"h").concat(Za,"v").concat(Za*3/4,"h").concat(-Za,"z"),className:"recharts-legend-icon"});if(ie.isValidElement(a.legendIcon)){var u=$B({},a);return delete u.legendIcon,ie.cloneElement(a.legendIcon,u)}return ie.createElement(Hb,{fill:c,cx:i,cy:i,size:Za,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,l=s.iconSize,o=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Za,height:Za},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var h=p.formatter||c,v=vt(gd(gd({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var w=st(p.value)?null:p.value;_s(!st(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=p.inactive?u:p.color;return ie.createElement("li",ev({className:v,style:f,key:"legend-item-".concat(y)},Am(a.props,p,y)),ie.createElement(zy,{width:l,height:l,viewBox:d,style:m},a.renderIcon(p)),ie.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},h?h(w,p,y):w))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,l=a.align;if(!s||!s.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return ie.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(O.PureComponent);gd(Gb,"displayName","Legend");gd(Gb,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var HB=ux;function GB(){this.__data__=new HB,this.size=0}var XB=GB;function YB(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var QB=YB;function JB(e){return this.__data__.get(e)}var ZB=JB;function eU(e){return this.__data__.has(e)}var tU=eU,rU=ux,aU=Fb,nU=Mb,sU=200;function iU(e,t){var r=this.__data__;if(r instanceof rU){var a=r.__data__;if(!aU||a.length<sU-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new nU(a)}return r.set(e,t),this.size=r.size,this}var lU=iU,oU=ux,cU=XB,uU=QB,dU=ZB,fU=tU,mU=lU;function Rc(e){var t=this.__data__=new oU(e);this.size=t.size}Rc.prototype.clear=cU;Rc.prototype.delete=uU;Rc.prototype.get=dU;Rc.prototype.has=fU;Rc.prototype.set=mU;var ZT=Rc,hU="__lodash_hash_undefined__";function xU(e){return this.__data__.set(e,hU),this}var pU=xU;function gU(e){return this.__data__.has(e)}var yU=gU,vU=Mb,bU=pU,wU=yU;function Lm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new vU;++t<r;)this.add(e[t])}Lm.prototype.add=Lm.prototype.push=bU;Lm.prototype.has=wU;var e3=Lm;function NU(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var t3=NU;function jU(e,t){return e.has(t)}var r3=jU,SU=e3,kU=t3,CU=r3,_U=1,OU=2;function EU(e,t,r,a,s,i){var l=r&_U,o=e.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,p=r&OU?new SU:void 0;for(i.set(e,t),i.set(t,e);++f<o;){var y=e[f],h=t[f];if(a)var v=l?a(h,y,f,t,e,i):a(y,h,f,e,t,i);if(v!==void 0){if(v)continue;m=!1;break}if(p){if(!kU(t,function(w,S){if(!CU(p,S)&&(y===w||s(y,w,r,a,i)))return p.push(S)})){m=!1;break}}else if(!(y===h||s(y,h,r,a,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var a3=EU,TU=ls,AU=TU.Uint8Array,PU=AU;function DU(e){var t=-1,r=Array(e.size);return e.forEach(function(a,s){r[++t]=[s,a]}),r}var IU=DU;function FU(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var Xb=FU,D2=Nf,I2=PU,MU=Ib,RU=a3,LU=IU,$U=Xb,BU=1,UU=2,WU="[object Boolean]",qU="[object Date]",KU="[object Error]",zU="[object Map]",VU="[object Number]",HU="[object RegExp]",GU="[object Set]",XU="[object String]",YU="[object Symbol]",QU="[object ArrayBuffer]",JU="[object DataView]",F2=D2?D2.prototype:void 0,Xp=F2?F2.valueOf:void 0;function ZU(e,t,r,a,s,i,l){switch(r){case JU:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case QU:return!(e.byteLength!=t.byteLength||!i(new I2(e),new I2(t)));case WU:case qU:case VU:return MU(+e,+t);case KU:return e.name==t.name&&e.message==t.message;case HU:case XU:return e==t+"";case zU:var o=LU;case GU:var c=a&BU;if(o||(o=$U),e.size!=t.size&&!c)return!1;var u=l.get(e);if(u)return u==t;a|=UU,l.set(e,t);var d=RU(o(e),o(t),a,s,i,l);return l.delete(e),d;case YU:if(Xp)return Xp.call(e)==Xp.call(t)}return!1}var eW=ZU;function tW(e,t){for(var r=-1,a=t.length,s=e.length;++r<a;)e[s+r]=t[r];return e}var n3=tW,rW=n3,aW=Aa;function nW(e,t,r){var a=t(e);return aW(e)?a:rW(a,r(e))}var sW=nW;function iW(e,t){for(var r=-1,a=e==null?0:e.length,s=0,i=[];++r<a;){var l=e[r];t(l,r,e)&&(i[s++]=l)}return i}var lW=iW;function oW(){return[]}var cW=oW,uW=lW,dW=cW,fW=Object.prototype,mW=fW.propertyIsEnumerable,M2=Object.getOwnPropertySymbols,hW=M2?function(e){return e==null?[]:(e=Object(e),uW(M2(e),function(t){return mW.call(e,t)}))}:dW,xW=hW;function pW(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var gW=pW,yW=Ws,vW=qs,bW="[object Arguments]";function wW(e){return vW(e)&&yW(e)==bW}var NW=wW,R2=NW,jW=qs,s3=Object.prototype,SW=s3.hasOwnProperty,kW=s3.propertyIsEnumerable,CW=R2(function(){return arguments}())?R2:function(e){return jW(e)&&SW.call(e,"callee")&&!kW.call(e,"callee")},Yb=CW,$m={exports:{}};function _W(){return!1}var OW=_W;$m.exports;(function(e,t){var r=ls,a=OW,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===s,o=l?r.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||a;e.exports=u})($m,$m.exports);var i3=$m.exports,EW=9007199254740991,TW=/^(?:0|[1-9]\d*)$/;function AW(e,t){var r=typeof e;return t=t??EW,!!t&&(r=="number"||r!="symbol"&&TW.test(e))&&e>-1&&e%1==0&&e<t}var Qb=AW,PW=9007199254740991;function DW(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=PW}var Jb=DW,IW=Ws,FW=Jb,MW=qs,RW="[object Arguments]",LW="[object Array]",$W="[object Boolean]",BW="[object Date]",UW="[object Error]",WW="[object Function]",qW="[object Map]",KW="[object Number]",zW="[object Object]",VW="[object RegExp]",HW="[object Set]",GW="[object String]",XW="[object WeakMap]",YW="[object ArrayBuffer]",QW="[object DataView]",JW="[object Float32Array]",ZW="[object Float64Array]",eq="[object Int8Array]",tq="[object Int16Array]",rq="[object Int32Array]",aq="[object Uint8Array]",nq="[object Uint8ClampedArray]",sq="[object Uint16Array]",iq="[object Uint32Array]",Bt={};Bt[JW]=Bt[ZW]=Bt[eq]=Bt[tq]=Bt[rq]=Bt[aq]=Bt[nq]=Bt[sq]=Bt[iq]=!0;Bt[RW]=Bt[LW]=Bt[YW]=Bt[$W]=Bt[QW]=Bt[BW]=Bt[UW]=Bt[WW]=Bt[qW]=Bt[KW]=Bt[zW]=Bt[VW]=Bt[HW]=Bt[GW]=Bt[XW]=!1;function lq(e){return MW(e)&&FW(e.length)&&!!Bt[IW(e)]}var oq=lq;function cq(e){return function(t){return e(t)}}var l3=cq,Bm={exports:{}};Bm.exports;(function(e,t){var r=xT,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i&&r.process,o=function(){try{var c=s&&s.require&&s.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=o})(Bm,Bm.exports);var uq=Bm.exports,dq=oq,fq=l3,L2=uq,$2=L2&&L2.isTypedArray,mq=$2?fq($2):dq,o3=mq,hq=gW,xq=Yb,pq=Aa,gq=i3,yq=Qb,vq=o3,bq=Object.prototype,wq=bq.hasOwnProperty;function Nq(e,t){var r=pq(e),a=!r&&xq(e),s=!r&&!a&&gq(e),i=!r&&!a&&!s&&vq(e),l=r||a||s||i,o=l?hq(e.length,String):[],c=o.length;for(var u in e)(t||wq.call(e,u))&&!(l&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||yq(u,c)))&&o.push(u);return o}var jq=Nq,Sq=Object.prototype;function kq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Sq;return e===r}var Cq=kq;function _q(e,t){return function(r){return e(t(r))}}var c3=_q,Oq=c3,Eq=Oq(Object.keys,Object),Tq=Eq,Aq=Cq,Pq=Tq,Dq=Object.prototype,Iq=Dq.hasOwnProperty;function Fq(e){if(!Aq(e))return Pq(e);var t=[];for(var r in Object(e))Iq.call(e,r)&&r!="constructor"&&t.push(r);return t}var Mq=Fq,Rq=Db,Lq=Jb;function $q(e){return e!=null&&Lq(e.length)&&!Rq(e)}var kf=$q,Bq=jq,Uq=Mq,Wq=kf;function qq(e){return Wq(e)?Bq(e):Uq(e)}var _x=qq,Kq=sW,zq=xW,Vq=_x;function Hq(e){return Kq(e,Vq,zq)}var Gq=Hq,B2=Gq,Xq=1,Yq=Object.prototype,Qq=Yq.hasOwnProperty;function Jq(e,t,r,a,s,i){var l=r&Xq,o=B2(e),c=o.length,u=B2(t),d=u.length;if(c!=d&&!l)return!1;for(var f=c;f--;){var m=o[f];if(!(l?m in t:Qq.call(t,m)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var h=!0;i.set(e,t),i.set(t,e);for(var v=l;++f<c;){m=o[f];var w=e[m],S=t[m];if(a)var b=l?a(S,w,m,t,e,i):a(w,S,m,e,t,i);if(!(b===void 0?w===S||s(w,S,r,a,i):b)){h=!1;break}v||(v=m=="constructor")}if(h&&!v){var x=e.constructor,g=t.constructor;x!=g&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof g=="function"&&g instanceof g)&&(h=!1)}return i.delete(e),i.delete(t),h}var Zq=Jq,eK=zl,tK=ls,rK=eK(tK,"DataView"),aK=rK,nK=zl,sK=ls,iK=nK(sK,"Promise"),lK=iK,oK=zl,cK=ls,uK=oK(cK,"Set"),u3=uK,dK=zl,fK=ls,mK=dK(fK,"WeakMap"),hK=mK,rv=aK,av=Fb,nv=lK,sv=u3,iv=hK,d3=Ws,Lc=gT,U2="[object Map]",xK="[object Object]",W2="[object Promise]",q2="[object Set]",K2="[object WeakMap]",z2="[object DataView]",pK=Lc(rv),gK=Lc(av),yK=Lc(nv),vK=Lc(sv),bK=Lc(iv),al=d3;(rv&&al(new rv(new ArrayBuffer(1)))!=z2||av&&al(new av)!=U2||nv&&al(nv.resolve())!=W2||sv&&al(new sv)!=q2||iv&&al(new iv)!=K2)&&(al=function(e){var t=d3(e),r=t==xK?e.constructor:void 0,a=r?Lc(r):"";if(a)switch(a){case pK:return z2;case gK:return U2;case yK:return W2;case vK:return q2;case bK:return K2}return t});var wK=al,Yp=ZT,NK=a3,jK=eW,SK=Zq,V2=wK,H2=Aa,G2=i3,kK=o3,CK=1,X2="[object Arguments]",Y2="[object Array]",m0="[object Object]",_K=Object.prototype,Q2=_K.hasOwnProperty;function OK(e,t,r,a,s,i){var l=H2(e),o=H2(t),c=l?Y2:V2(e),u=o?Y2:V2(t);c=c==X2?m0:c,u=u==X2?m0:u;var d=c==m0,f=u==m0,m=c==u;if(m&&G2(e)){if(!G2(t))return!1;l=!0,d=!1}if(m&&!d)return i||(i=new Yp),l||kK(e)?NK(e,t,r,a,s,i):jK(e,t,c,r,a,s,i);if(!(r&CK)){var p=d&&Q2.call(e,"__wrapped__"),y=f&&Q2.call(t,"__wrapped__");if(p||y){var h=p?e.value():e,v=y?t.value():t;return i||(i=new Yp),s(h,v,r,a,i)}}return m?(i||(i=new Yp),SK(e,t,r,a,s,i)):!1}var EK=OK,TK=EK,J2=qs;function f3(e,t,r,a,s){return e===t?!0:e==null||t==null||!J2(e)&&!J2(t)?e!==e&&t!==t:TK(e,t,r,a,f3,s)}var Zb=f3,AK=ZT,PK=Zb,DK=1,IK=2;function FK(e,t,r,a){var s=r.length,i=s,l=!a;if(e==null)return!i;for(e=Object(e);s--;){var o=r[s];if(l&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<i;){o=r[s];var c=o[0],u=e[c],d=o[1];if(l&&o[2]){if(u===void 0&&!(c in e))return!1}else{var f=new AK;if(a)var m=a(u,d,c,e,t,f);if(!(m===void 0?PK(d,u,DK|IK,a,f):m))return!1}}return!0}var MK=FK,RK=Li;function LK(e){return e===e&&!RK(e)}var m3=LK,$K=m3,BK=_x;function UK(e){for(var t=BK(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,$K(s)]}return t}var WK=UK;function qK(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var h3=qK,KK=MK,zK=WK,VK=h3;function HK(e){var t=zK(e);return t.length==1&&t[0][2]?VK(t[0][0],t[0][1]):function(r){return r===e||KK(r,e,t)}}var GK=HK;function XK(e,t){return e!=null&&t in Object(e)}var YK=XK,QK=NT,JK=Yb,ZK=Aa,ez=Qb,tz=Jb,rz=fx;function az(e,t,r){t=QK(t,e);for(var a=-1,s=t.length,i=!1;++a<s;){var l=rz(t[a]);if(!(i=e!=null&&r(e,l)))break;e=e[l]}return i||++a!=s?i:(s=e==null?0:e.length,!!s&&tz(s)&&ez(l,s)&&(ZK(e)||JK(e)))}var nz=az,sz=YK,iz=nz;function lz(e,t){return e!=null&&iz(e,t,sz)}var oz=lz,cz=Zb,uz=jT,dz=oz,fz=Pb,mz=m3,hz=h3,xz=fx,pz=1,gz=2;function yz(e,t){return fz(e)&&mz(t)?hz(xz(e),t):function(r){var a=uz(r,e);return a===void 0&&a===t?dz(r,e):cz(t,a,pz|gz)}}var vz=yz;function bz(e){return e}var $c=bz;function wz(e){return function(t){return t==null?void 0:t[e]}}var Nz=wz,jz=$b;function Sz(e){return function(t){return jz(t,e)}}var kz=Sz,Cz=Nz,_z=kz,Oz=Pb,Ez=fx;function Tz(e){return Oz(e)?Cz(Ez(e)):_z(e)}var Az=Tz,Pz=GK,Dz=vz,Iz=$c,Fz=Aa,Mz=Az;function Rz(e){return typeof e=="function"?e:e==null?Iz:typeof e=="object"?Fz(e)?Dz(e[0],e[1]):Pz(e):Mz(e)}var $i=Rz;function Lz(e,t,r,a){for(var s=e.length,i=r+(a?1:-1);a?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var x3=Lz;function $z(e){return e!==e}var Bz=$z;function Uz(e,t,r){for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}var Wz=Uz,qz=x3,Kz=Bz,zz=Wz;function Vz(e,t,r){return t===t?zz(e,t,r):qz(e,Kz,r)}var Hz=Vz,Gz=Hz;function Xz(e,t){var r=e==null?0:e.length;return!!r&&Gz(e,t,0)>-1}var Yz=Xz;function Qz(e,t,r){for(var a=-1,s=e==null?0:e.length;++a<s;)if(r(t,e[a]))return!0;return!1}var Jz=Qz;function Zz(){}var eV=Zz,Qp=u3,tV=eV,rV=Xb,aV=1/0,nV=Qp&&1/rV(new Qp([,-0]))[1]==aV?function(e){return new Qp(e)}:tV,sV=nV,iV=e3,lV=Yz,oV=Jz,cV=r3,uV=sV,dV=Xb,fV=200;function mV(e,t,r){var a=-1,s=lV,i=e.length,l=!0,o=[],c=o;if(r)l=!1,s=oV;else if(i>=fV){var u=t?null:uV(e);if(u)return dV(u);l=!1,s=cV,c=new iV}else c=t?[]:o;e:for(;++a<i;){var d=e[a],f=t?t(d):d;if(d=r||d!==0?d:0,l&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),o.push(d)}else s(c,f,r)||(c!==o&&c.push(f),o.push(d))}return o}var hV=mV,xV=$i,pV=hV;function gV(e,t){return e&&e.length?pV(e,xV(t)):[]}var yV=gV;const Z2=Ft(yV);function p3(e,t,r){return t===!0?Z2(e,r):st(t)?Z2(e,t):e}function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(e)}var vV=["ref"];function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(a){Ox(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,y3(a.key),a)}}function wV(e,t,r){return t&&tS(e.prototype,t),r&&tS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NV(e,t,r){return t=Um(t),jV(e,g3()?Reflect.construct(t,r||[],Um(e).constructor):t.apply(e,r))}function jV(e,t){if(t&&(nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SV(e)}function SV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g3=function(){return!!e})()}function Um(e){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Um(e)}function kV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lv(e,t)}function lv(e,t){return lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},lv(e,t)}function Ox(e,t,r){return t=y3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y3(e){var t=CV(e,"string");return nc(t)=="symbol"?t:t+""}function CV(e,t){if(nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(nc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _V(e,t){if(e==null)return{};var r=OV(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function OV(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function EV(e){return e.value}function TV(e,t){if(ie.isValidElement(e))return ie.cloneElement(e,t);if(typeof e=="function")return ie.createElement(e,t);t.ref;var r=_V(t,vV);return ie.createElement(Gb,r)}var rS=1,$o=function(e){function t(){var r;bV(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=NV(this,t,[].concat(s)),Ox(r,"lastBoundingBox",{width:-1,height:-1}),r}return kV(t,e),wV(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>rS||Math.abs(s.height-this.lastBoundingBox.height)>rS)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ms({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,l=s.align,o=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,f,m;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(l==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(o==="middle"){var y=this.getBBoxSnapshot();m={top:((d||0)-y.height)/2}}else m=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ms(ms({},f),m)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,l=s.width,o=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,f=ms(ms({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return ie.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){a.wrapperNode=p}},TV(i,ms(ms({},this.props),{},{payload:p3(d,u,EV)})))}}],[{key:"getWithHeight",value:function(a,s){var i=ms(ms({},this.defaultProps),a.props),l=i.layout;return l==="vertical"&&Ae(a.props.height)?{height:a.props.height}:l==="horizontal"?{width:a.props.width||s}:null}}])}(O.PureComponent);Ox($o,"displayName","Legend");Ox($o,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var aS=Nf,AV=Yb,PV=Aa,nS=aS?aS.isConcatSpreadable:void 0;function DV(e){return PV(e)||AV(e)||!!(nS&&e&&e[nS])}var IV=DV,FV=n3,MV=IV;function v3(e,t,r,a,s){var i=-1,l=e.length;for(r||(r=MV),s||(s=[]);++i<l;){var o=e[i];t>0&&r(o)?t>1?v3(o,t-1,r,a,s):FV(s,o):a||(s[s.length]=o)}return s}var b3=v3;function RV(e){return function(t,r,a){for(var s=-1,i=Object(t),l=a(t),o=l.length;o--;){var c=l[e?o:++s];if(r(i[c],c,i)===!1)break}return t}}var LV=RV,$V=LV,BV=$V(),UV=BV,WV=UV,qV=_x;function KV(e,t){return e&&WV(e,t,qV)}var w3=KV,zV=kf;function VV(e,t){return function(r,a){if(r==null)return r;if(!zV(r))return e(r,a);for(var s=r.length,i=t?s:-1,l=Object(r);(t?i--:++i<s)&&a(l[i],i,l)!==!1;);return r}}var HV=VV,GV=w3,XV=HV,YV=XV(GV),ew=YV,QV=ew,JV=kf;function ZV(e,t){var r=-1,a=JV(e)?Array(e.length):[];return QV(e,function(s,i,l){a[++r]=t(s,i,l)}),a}var N3=ZV;function eH(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var tH=eH,sS=Pc;function rH(e,t){if(e!==t){var r=e!==void 0,a=e===null,s=e===e,i=sS(e),l=t!==void 0,o=t===null,c=t===t,u=sS(t);if(!o&&!u&&!i&&e>t||i&&l&&c&&!o&&!u||a&&l&&c||!r&&c||!s)return 1;if(!a&&!i&&!u&&e<t||u&&r&&s&&!a&&!i||o&&r&&s||!l&&s||!c)return-1}return 0}var aH=rH,nH=aH;function sH(e,t,r){for(var a=-1,s=e.criteria,i=t.criteria,l=s.length,o=r.length;++a<l;){var c=nH(s[a],i[a]);if(c){if(a>=o)return c;var u=r[a];return c*(u=="desc"?-1:1)}}return e.index-t.index}var iH=sH,Jp=Lb,lH=$b,oH=$i,cH=N3,uH=tH,dH=l3,fH=iH,mH=$c,hH=Aa;function xH(e,t,r){t.length?t=Jp(t,function(i){return hH(i)?function(l){return lH(l,i.length===1?i[0]:i)}:i}):t=[mH];var a=-1;t=Jp(t,dH(oH));var s=cH(e,function(i,l,o){var c=Jp(t,function(u){return u(i)});return{criteria:c,index:++a,value:i}});return uH(s,function(i,l){return fH(i,l,r)})}var pH=xH;function gH(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var yH=gH,vH=yH,iS=Math.max;function bH(e,t,r){return t=iS(t===void 0?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=iS(a.length-t,0),l=Array(i);++s<i;)l[s]=a[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=a[s];return o[t]=r(l),vH(e,this,o)}}var wH=bH;function NH(e){return function(){return e}}var jH=NH,SH=zl,kH=function(){try{var e=SH(Object,"defineProperty");return e({},"",{}),e}catch{}}(),j3=kH,CH=jH,lS=j3,_H=$c,OH=lS?function(e,t){return lS(e,"toString",{configurable:!0,enumerable:!1,value:CH(t),writable:!0})}:_H,EH=OH,TH=800,AH=16,PH=Date.now;function DH(e){var t=0,r=0;return function(){var a=PH(),s=AH-(a-r);if(r=a,s>0){if(++t>=TH)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var IH=DH,FH=EH,MH=IH,RH=MH(FH),LH=RH,$H=$c,BH=wH,UH=LH;function WH(e,t){return UH(BH(e,t,$H),e+"")}var qH=WH,KH=Ib,zH=kf,VH=Qb,HH=Li;function GH(e,t,r){if(!HH(r))return!1;var a=typeof t;return(a=="number"?zH(r)&&VH(t,r.length):a=="string"&&t in r)?KH(r[t],e):!1}var Ex=GH,XH=b3,YH=pH,QH=qH,oS=Ex,JH=QH(function(e,t){if(e==null)return[];var r=t.length;return r>1&&oS(e,t[0],t[1])?t=[]:r>2&&oS(t[0],t[1],t[2])&&(t=[t[0]]),YH(e,XH(t,1),[])}),ZH=JH;const tw=Ft(ZH);function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ov.apply(this,arguments)}function eG(e,t){return nG(e)||aG(e,t)||rG(e,t)||tG()}function tG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rG(e,t){if(e){if(typeof e=="string")return cS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cS(e,t)}}function cS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function aG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function nG(e){if(Array.isArray(e))return e}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(a){sG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sG(e,t,r){return t=iG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iG(e){var t=lG(e,"string");return yd(t)=="symbol"?t:t+""}function lG(e,t){if(yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(yd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oG(e){return Array.isArray(e)&&Cr(e[0])&&Cr(e[1])?e.join(" ~ "):e}var cG=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,l=t.itemStyle,o=l===void 0?{}:l,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,m=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,h=t.label,v=t.labelFormatter,w=t.accessibilityLayer,S=w===void 0?!1:w,b=function(){if(d&&d.length){var k={padding:0,margin:0},A=(m?tw(d,m):d).map(function(P,F){if(P.type==="none")return null;var U=Zp({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},o),W=P.formatter||f||oG,K=P.value,B=P.name,ee=K,oe=B;if(W&&ee!=null&&oe!=null){var R=W(K,B,P,F,d);if(Array.isArray(R)){var V=eG(R,2);ee=V[0],oe=V[1]}else ee=R}return ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:U},Cr(oe)?ie.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,Cr(oe)?ie.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,ie.createElement("span",{className:"recharts-tooltip-item-value"},ee),ie.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return ie.createElement("ul",{className:"recharts-tooltip-item-list",style:k},A)}return null},x=Zp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),g=Zp({margin:0},u),N=!ct(h),j=N?h:"",C=vt("recharts-default-tooltip",p),_=vt("recharts-tooltip-label",y);N&&v&&d!==void 0&&d!==null&&(j=v(h,d));var T=S?{role:"status","aria-live":"assertive"}:{};return ie.createElement("div",ov({className:C,style:x},T),ie.createElement("p",{className:_,style:g},ie.isValidElement(j)?j:"".concat(j)),b())};function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function h0(e,t,r){return t=uG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uG(e){var t=dG(e,"string");return vd(t)=="symbol"?t:t+""}function dG(e,t){if(vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(vd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iu="recharts-tooltip-wrapper",fG={visibility:"hidden"};function mG(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return vt(iu,h0(h0(h0(h0({},"".concat(iu,"-right"),Ae(r)&&t&&Ae(t.x)&&r>=t.x),"".concat(iu,"-left"),Ae(r)&&t&&Ae(t.x)&&r<t.x),"".concat(iu,"-bottom"),Ae(a)&&t&&Ae(t.y)&&a>=t.y),"".concat(iu,"-top"),Ae(a)&&t&&Ae(t.y)&&a<t.y))}function dS(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Ae(i[a]))return i[a];var d=r[a]-o-s,f=r[a]+s;if(t[a])return l[a]?d:f;if(l[a]){var m=d,p=c[a];return m<p?Math.max(f,c[a]):Math.max(d,c[a])}var y=f+o,h=c[a]+u;return y>h?Math.max(d,c[a]):Math.max(f,c[a])}function hG(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xG(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,l=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,u,d,f;return l.height>0&&l.width>0&&r?(d=dS({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),f=dS({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),u=hG({translateX:d,translateY:f,useTranslate3d:o})):u=fG,{cssProperties:u,cssClasses:mG({translateX:d,translateY:f,coordinate:r})}}function sc(e){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(e)}function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(r),!0).forEach(function(a){uv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,k3(a.key),a)}}function gG(e,t,r){return t&&hS(e.prototype,t),r&&hS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yG(e,t,r){return t=Wm(t),vG(e,S3()?Reflect.construct(t,r||[],Wm(e).constructor):t.apply(e,r))}function vG(e,t){if(t&&(sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bG(e)}function bG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S3=function(){return!!e})()}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wm(e)}function wG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},cv(e,t)}function uv(e,t,r){return t=k3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k3(e){var t=NG(e,"string");return sc(t)=="symbol"?t:t+""}function NG(e,t){if(sc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(sc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xS=1,jG=function(e){function t(){var r;pG(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=yG(this,t,[].concat(s)),uv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),uv(r,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return wG(t,e),gG(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>xS||Math.abs(a.height-this.state.lastBoundingBox.height)>xS)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,o=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,f=s.hasPayload,m=s.isAnimationActive,p=s.offset,y=s.position,h=s.reverseDirection,v=s.useTranslate3d,w=s.viewBox,S=s.wrapperStyle,b=xG({allowEscapeViewBox:l,coordinate:d,offsetTopLeft:p,position:y,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:w}),x=b.cssClasses,g=b.cssProperties,N=mS(mS({transition:m&&i?"transform ".concat(o,"ms ").concat(c):void 0},g),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},S);return ie.createElement("div",{tabIndex:-1,className:x,style:N,ref:function(C){a.wrapperNode=C}},u)}}])}(O.PureComponent),SG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Os={isSsr:SG(),get:function(t){return Os[t]},set:function(t,r){if(typeof t=="string")Os[t]=r;else{var a=Object.keys(t);a&&a.length&&a.forEach(function(s){Os[s]=t[s]})}}};function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(e)}function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function gS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(a){rw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_3(a.key),a)}}function CG(e,t,r){return t&&yS(e.prototype,t),r&&yS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _G(e,t,r){return t=qm(t),OG(e,C3()?Reflect.construct(t,r||[],qm(e).constructor):t.apply(e,r))}function OG(e,t){if(t&&(ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EG(e)}function EG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C3=function(){return!!e})()}function qm(e){return qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qm(e)}function TG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dv(e,t)}function dv(e,t){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},dv(e,t)}function rw(e,t,r){return t=_3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _3(e){var t=AG(e,"string");return ic(t)=="symbol"?t:t+""}function AG(e,t){if(ic(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(ic(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PG(e){return e.dataKey}function DG(e,t){return ie.isValidElement(e)?ie.cloneElement(e,t):typeof e=="function"?ie.createElement(e,t):ie.createElement(cG,t)}var ln=function(e){function t(){return kG(this,t),_G(this,t,arguments)}return TG(t,e),CG(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,o=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,f=s.filterNull,m=s.isAnimationActive,p=s.offset,y=s.payload,h=s.payloadUniqBy,v=s.position,w=s.reverseDirection,S=s.useTranslate3d,b=s.viewBox,x=s.wrapperStyle,g=y??[];f&&g.length&&(g=p3(y.filter(function(j){return j.value!=null&&(j.hide!==!0||a.props.includeHidden)}),h,PG));var N=g.length>0;return ie.createElement(jG,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:N,offset:p,position:v,reverseDirection:w,useTranslate3d:S,viewBox:b,wrapperStyle:x},DG(u,gS(gS({},this.props),{},{payload:g})))}}])}(O.PureComponent);rw(ln,"displayName","Tooltip");rw(ln,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Os.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var IG=ls,FG=function(){return IG.Date.now()},MG=FG,RG=/\s/;function LG(e){for(var t=e.length;t--&&RG.test(e.charAt(t)););return t}var $G=LG,BG=$G,UG=/^\s+/;function WG(e){return e&&e.slice(0,BG(e)+1).replace(UG,"")}var qG=WG,KG=qG,vS=Li,zG=Pc,bS=0/0,VG=/^[-+]0x[0-9a-f]+$/i,HG=/^0b[01]+$/i,GG=/^0o[0-7]+$/i,XG=parseInt;function YG(e){if(typeof e=="number")return e;if(zG(e))return bS;if(vS(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=vS(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=KG(e);var r=HG.test(e);return r||GG.test(e)?XG(e.slice(2),r?2:8):VG.test(e)?bS:+e}var O3=YG,QG=Li,eg=MG,wS=O3,JG="Expected a function",ZG=Math.max,eX=Math.min;function tX(e,t,r){var a,s,i,l,o,c,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(JG);t=wS(t)||0,QG(r)&&(d=!!r.leading,f="maxWait"in r,i=f?ZG(wS(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function p(N){var j=a,C=s;return a=s=void 0,u=N,l=e.apply(C,j),l}function y(N){return u=N,o=setTimeout(w,t),d?p(N):l}function h(N){var j=N-c,C=N-u,_=t-j;return f?eX(_,i-C):_}function v(N){var j=N-c,C=N-u;return c===void 0||j>=t||j<0||f&&C>=i}function w(){var N=eg();if(v(N))return S(N);o=setTimeout(w,h(N))}function S(N){return o=void 0,m&&a?p(N):(a=s=void 0,l)}function b(){o!==void 0&&clearTimeout(o),u=0,a=c=s=o=void 0}function x(){return o===void 0?l:S(eg())}function g(){var N=eg(),j=v(N);if(a=arguments,s=this,c=N,j){if(o===void 0)return y(c);if(f)return clearTimeout(o),o=setTimeout(w,t),p(c)}return o===void 0&&(o=setTimeout(w,t)),l}return g.cancel=b,g.flush=x,g}var rX=tX,aX=rX,nX=Li,sX="Expected a function";function iX(e,t,r){var a=!0,s=!0;if(typeof e!="function")throw new TypeError(sX);return nX(r)&&(a="leading"in r?!!r.leading:a,s="trailing"in r?!!r.trailing:s),aX(e,t,{leading:a,maxWait:t,trailing:s})}var lX=iX;const E3=Ft(lX);function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}function NS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function x0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(r),!0).forEach(function(a){oX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oX(e,t,r){return t=cX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cX(e){var t=uX(e,"string");return bd(t)=="symbol"?t:t+""}function uX(e,t){if(bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(bd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dX(e,t){return xX(e)||hX(e,t)||mX(e,t)||fX()}function fX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mX(e,t){if(e){if(typeof e=="string")return jS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jS(e,t)}}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function hX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function xX(e){if(Array.isArray(e))return e}var tg=O.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,l=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,m=e.maxHeight,p=e.children,y=e.debounce,h=y===void 0?0:y,v=e.id,w=e.className,S=e.onResize,b=e.style,x=b===void 0?{}:b,g=O.useRef(null),N=O.useRef();N.current=S,O.useImperativeHandle(t,function(){return Object.defineProperty(g.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),g.current},configurable:!0})});var j=O.useState({containerWidth:s.width,containerHeight:s.height}),C=dX(j,2),_=C[0],T=C[1],E=O.useCallback(function(A,P){T(function(F){var U=Math.round(A),W=Math.round(P);return F.containerWidth===U&&F.containerHeight===W?F:{containerWidth:U,containerHeight:W}})},[]);O.useEffect(function(){var A=function(B){var ee,oe=B[0].contentRect,R=oe.width,V=oe.height;E(R,V),(ee=N.current)===null||ee===void 0||ee.call(N,R,V)};h>0&&(A=E3(A,h,{trailing:!0,leading:!1}));var P=new ResizeObserver(A),F=g.current.getBoundingClientRect(),U=F.width,W=F.height;return E(U,W),P.observe(g.current),function(){P.disconnect()}},[E,h]);var k=O.useMemo(function(){var A=_.containerWidth,P=_.containerHeight;if(A<0||P<0)return null;_s(cl(l)||cl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),_s(!r||r>0,"The aspect(%s) must be greater than zero.",r);var F=cl(l)?A:l,U=cl(c)?P:c;r&&r>0&&(F?U=F/r:U&&(F=U*r),m&&U>m&&(U=m)),_s(F>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,U,l,c,d,f,r);var W=!Array.isArray(p)&&Cs(p.type).endsWith("Chart");return ie.Children.map(p,function(K){return ie.isValidElement(K)?O.cloneElement(K,x0({width:F,height:U},W?{style:x0({height:"100%",width:"100%",maxHeight:U,maxWidth:F},K.props.style)}:{})):K})},[r,p,c,m,f,d,_,l]);return ie.createElement("div",{id:v?"".concat(v):void 0,className:vt("recharts-responsive-container",w),style:x0(x0({},x),{},{width:l,height:c,minWidth:d,minHeight:f,maxHeight:m}),ref:g},k)}),T3=function(t){return null};T3.displayName="Cell";function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(a){pX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pX(e,t,r){return t=gX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gX(e){var t=yX(e,"string");return wd(t)=="symbol"?t:t+""}function yX(e,t){if(wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(wd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ao={widthCache:{},cacheCount:0},vX=2e3,bX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kS="recharts_measurement_span";function wX(e){var t=fv({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Fu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Os.isSsr)return{width:0,height:0};var a=wX(r),s=JSON.stringify({text:t,copyStyle:a});if(ao.widthCache[s])return ao.widthCache[s];try{var i=document.getElementById(kS);i||(i=document.createElement("span"),i.setAttribute("id",kS),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=fv(fv({},bX),a);Object.assign(i.style,l),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return ao.widthCache[s]=c,++ao.cacheCount>vX&&(ao.cacheCount=0,ao.widthCache={}),c}catch{return{width:0,height:0}}},NX=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function Km(e,t){return CX(e)||kX(e,t)||SX(e,t)||jX()}function jX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SX(e,t){if(e){if(typeof e=="string")return CS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CS(e,t)}}function CS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function kX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function CX(e){if(Array.isArray(e))return e}function _X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _S(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EX(a.key),a)}}function OX(e,t,r){return t&&_S(e.prototype,t),r&&_S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function EX(e){var t=TX(e,"string");return Nd(t)=="symbol"?t:t+""}function TX(e,t){if(Nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Nd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ES=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,PX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,A3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},DX=Object.keys(A3),_o="NaN";function IX(e,t){return e*A3[t]}var p0=function(){function e(t,r){_X(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!AX.test(r)&&(this.num=NaN,this.unit=""),DX.includes(r)&&(this.num=IX(t,r),this.unit="px")}return OX(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=PX.exec(r))!==null&&a!==void 0?a:[],i=Km(s,3),l=i[1],o=i[2];return new e(parseFloat(l),o??"")}}])}();function P3(e){if(e.includes(_o))return _o;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=OS.exec(t))!==null&&r!==void 0?r:[],s=Km(a,4),i=s[1],l=s[2],o=s[3],c=p0.parse(i??""),u=p0.parse(o??""),d=l==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return _o;t=t.replace(OS,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=ES.exec(t))!==null&&f!==void 0?f:[],p=Km(m,4),y=p[1],h=p[2],v=p[3],w=p0.parse(y??""),S=p0.parse(v??""),b=h==="+"?w.add(S):w.subtract(S);if(b.isNaN())return _o;t=t.replace(ES,b.toString())}return t}var TS=/\(([^()]*)\)/;function FX(e){for(var t=e;t.includes("(");){var r=TS.exec(t),a=Km(r,2),s=a[1];t=t.replace(TS,P3(s))}return t}function MX(e){var t=e.replace(/\s+/g,"");return t=FX(t),t=P3(t),t}function RX(e){try{return MX(e)}catch{return _o}}function rg(e){var t=RX(e.slice(5,-1));return t===_o?"":t}var LX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$X=["dx","dy","angle","className","breakAll"];function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mv.apply(this,arguments)}function AS(e,t){if(e==null)return{};var r=BX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function BX(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function PS(e,t){return KX(e)||qX(e,t)||WX(e,t)||UX()}function UX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WX(e,t){if(e){if(typeof e=="string")return DS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DS(e,t)}}function DS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function qX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function KX(e){if(Array.isArray(e))return e}var D3=/[ \f\n\r\t\v\u2028\u2029]+/,I3=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];ct(r)||(a?i=r.toString().split(""):i=r.toString().split(D3));var l=i.map(function(c){return{word:c,width:Fu(c,s).width}}),o=a?0:Fu("",s).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},zX=function(t,r,a,s,i){var l=t.maxLines,o=t.children,c=t.style,u=t.breakAll,d=Ae(l),f=o,m=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(U,W){var K=W.word,B=W.width,ee=U[U.length-1];if(ee&&(s==null||i||ee.width+B+a<Number(s)))ee.words.push(K),ee.width+=B+a;else{var oe={words:[K],width:B};U.push(oe)}return U},[])},p=m(r),y=function(F){return F.reduce(function(U,W){return U.width>W.width?U:W})};if(!d)return p;for(var h="",v=function(F){var U=f.slice(0,F),W=I3({breakAll:u,style:c,children:U+h}).wordsWithComputedWidth,K=m(W),B=K.length>l||y(K).width>Number(s);return[B,K]},w=0,S=f.length-1,b=0,x;w<=S&&b<=f.length-1;){var g=Math.floor((w+S)/2),N=g-1,j=v(N),C=PS(j,2),_=C[0],T=C[1],E=v(g),k=PS(E,1),A=k[0];if(!_&&!A&&(w=g+1),_&&A&&(S=g-1),!_&&A){x=T;break}b++}return x||p},IS=function(t){var r=ct(t)?[]:t.toString().split(D3);return[{words:r}]},VX=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,l=t.breakAll,o=t.maxLines;if((r||a)&&!Os.isSsr){var c,u,d=I3({breakAll:l,children:s,style:i});if(d){var f=d.wordsWithComputedWidth,m=d.spaceWidth;c=f,u=m}else return IS(s);return zX({breakAll:l,children:s,maxLines:o,style:i},c,u,r,a)}return IS(s)},FS="#808080",zm=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,l=t.lineHeight,o=l===void 0?"1em":l,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,m=t.textAnchor,p=m===void 0?"start":m,y=t.verticalAnchor,h=y===void 0?"end":y,v=t.fill,w=v===void 0?FS:v,S=AS(t,LX),b=O.useMemo(function(){return VX({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:f,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,f,S.style,S.width]),x=S.dx,g=S.dy,N=S.angle,j=S.className,C=S.breakAll,_=AS(S,$X);if(!Cr(a)||!Cr(i))return null;var T=a+(Ae(x)?x:0),E=i+(Ae(g)?g:0),k;switch(h){case"start":k=rg("calc(".concat(u,")"));break;case"middle":k=rg("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:k=rg("calc(".concat(b.length-1," * -").concat(o,")"));break}var A=[];if(f){var P=b[0].width,F=S.width;A.push("scale(".concat((Ae(F)?F/P:1)/P,")"))}return N&&A.push("rotate(".concat(N,", ").concat(T,", ").concat(E,")")),A.length&&(_.transform=A.join(" ")),ie.createElement("text",mv({},ht(_,!0),{x:T,y:E,className:vt("recharts-text",j),textAnchor:p,fill:w.includes("url")?FS:w}),b.map(function(U,W){var K=U.words.join(C?"":" ");return ie.createElement("tspan",{x:T,dy:W===0?k:o,key:"".concat(K,"-").concat(W)},K)}))};function Ni(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function HX(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function aw(e){let t,r,a;e.length!==2?(t=Ni,r=(o,c)=>Ni(e(o),c),a=(o,c)=>e(o)-c):(t=e===Ni||e===HX?e:GX,r=e,a=e);function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function l(o,c,u=0,d=o.length){const f=s(o,c,u,d-1);return f>u&&a(o[f-1],c)>-a(o[f],c)?f-1:f}return{left:s,center:l,right:i}}function GX(){return 0}function F3(e){return e===null?NaN:+e}function*XX(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(yield a)}}const YX=aw(Ni),QX=YX.right;aw(F3).center;const Cf=QX;class MS extends Map{constructor(t,r=eY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(RS(this,t))}has(t){return super.has(RS(this,t))}set(t,r){return super.set(JX(this,t),r)}delete(t){return super.delete(ZX(this,t))}}function RS({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function JX({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function ZX({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function eY(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tY(e=Ni){if(e===Ni)return M3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function M3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const rY=Math.sqrt(50),aY=Math.sqrt(10),nY=Math.sqrt(2);function Vm(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=rY?10:i>=aY?5:i>=nY?2:1;let o,c,u;return s<0?(u=Math.pow(10,-s)/l,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*l,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?Vm(e,t,r*2):[o,c,u]}function hv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,l]=a?Vm(t,e,r):Vm(e,t,r);if(!(i>=s))return[];const o=i-s+1,c=new Array(o);if(a)if(l<0)for(let u=0;u<o;++u)c[u]=(i-u)/-l;else for(let u=0;u<o;++u)c[u]=(i-u)*l;else if(l<0)for(let u=0;u<o;++u)c[u]=(s+u)/-l;else for(let u=0;u<o;++u)c[u]=(s+u)*l;return c}function xv(e,t,r){return t=+t,e=+e,r=+r,Vm(e,t,r)[2]}function pv(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?xv(t,e,r):xv(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function LS(e,t){let r;if(t===void 0)for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function $S(e,t){let r;if(t===void 0)for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function R3(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?M3:tY(s);a>r;){if(a-r>600){const c=a-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+m)),y=Math.min(a,Math.floor(t+(c-u)*f/c+m));R3(e,t,p,y,s)}const i=e[t];let l=r,o=a;for(lu(e,r,t),s(e[a],i)>0&&lu(e,r,a);l<o;){for(lu(e,l,o),++l,--o;s(e[l],i)<0;)++l;for(;s(e[o],i)>0;)--o}s(e[r],i)===0?lu(e,r,o):(++o,lu(e,o,a)),o<=t&&(r=o+1),t<=o&&(a=o-1)}return e}function lu(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function sY(e,t,r){if(e=Float64Array.from(XX(e,r)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return $S(e);if(t>=1)return LS(e);var a,s=(a-1)*t,i=Math.floor(s),l=LS(R3(e,i).subarray(0,i+1)),o=$S(e.subarray(i+1));return l+(o-l)*(s-i)}}function iY(e,t,r=F3){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),l=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return l+(o-l)*(s-i)}}function lY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function Nn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ks(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const gv=Symbol("implicit");function nw(){var e=new MS,t=[],r=[],a=gv;function s(i){let l=e.get(i);if(l===void 0){if(a!==gv)return a;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new MS;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return nw(t,r).unknown(a)},Nn.apply(s,arguments),s}function jd(){var e=nw().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,l,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,p=s<a,y=p?s:a,h=p?a:s;i=(h-y)/Math.max(1,m-c+u*2),o&&(i=Math.floor(i)),y+=(h-y-i*(m-c))*d,l=i*(1-c),o&&(y=Math.round(y),l=Math.round(l));var v=lY(m).map(function(w){return y+i*w});return r(p?v.reverse():v)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([a,s]=m,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(m){return[a,s]=m,a=+a,s=+s,o=!0,f()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(m){return arguments.length?(o=!!m,f()):o},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return jd(t(),[a,s]).round(o).paddingInner(c).paddingOuter(u).align(d)},Nn.apply(f(),arguments)}function L3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return L3(t())},e}function Mu(){return L3(jd.apply(null,arguments).paddingInner(1))}function sw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function $3(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function _f(){}var Sd=.7,Hm=1/Sd,Bo="\\s*([+-]?\\d+)\\s*",kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oY=/^#([0-9a-f]{3,8})$/,cY=new RegExp(`^rgb\\(${Bo},${Bo},${Bo}\\)$`),uY=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),dY=new RegExp(`^rgba\\(${Bo},${Bo},${Bo},${kd}\\)$`),fY=new RegExp(`^rgba\\(${ts},${ts},${ts},${kd}\\)$`),mY=new RegExp(`^hsl\\(${kd},${ts},${ts}\\)$`),hY=new RegExp(`^hsla\\(${kd},${ts},${ts},${kd}\\)$`),BS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sw(_f,Cd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:US,formatHex:US,formatHex8:xY,formatHsl:pY,formatRgb:WS,toString:WS});function US(){return this.rgb().formatHex()}function xY(){return this.rgb().formatHex8()}function pY(){return B3(this).formatHsl()}function WS(){return this.rgb().formatRgb()}function Cd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=oY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?qS(t):r===3?new ka(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?g0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?g0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cY.exec(e))?new ka(t[1],t[2],t[3],1):(t=uY.exec(e))?new ka(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dY.exec(e))?g0(t[1],t[2],t[3],t[4]):(t=fY.exec(e))?g0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mY.exec(e))?VS(t[1],t[2]/100,t[3]/100,1):(t=hY.exec(e))?VS(t[1],t[2]/100,t[3]/100,t[4]):BS.hasOwnProperty(e)?qS(BS[e]):e==="transparent"?new ka(NaN,NaN,NaN,0):null}function qS(e){return new ka(e>>16&255,e>>8&255,e&255,1)}function g0(e,t,r,a){return a<=0&&(e=t=r=NaN),new ka(e,t,r,a)}function gY(e){return e instanceof _f||(e=Cd(e)),e?(e=e.rgb(),new ka(e.r,e.g,e.b,e.opacity)):new ka}function yv(e,t,r,a){return arguments.length===1?gY(e):new ka(e,t,r,a??1)}function ka(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}sw(ka,yv,$3(_f,{brighter(e){return e=e==null?Hm:Math.pow(Hm,e),new ka(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sd:Math.pow(Sd,e),new ka(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ka(xl(this.r),xl(this.g),xl(this.b),Gm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KS,formatHex:KS,formatHex8:yY,formatRgb:zS,toString:zS}));function KS(){return`#${ul(this.r)}${ul(this.g)}${ul(this.b)}`}function yY(){return`#${ul(this.r)}${ul(this.g)}${ul(this.b)}${ul((isNaN(this.opacity)?1:this.opacity)*255)}`}function zS(){const e=Gm(this.opacity);return`${e===1?"rgb(":"rgba("}${xl(this.r)}, ${xl(this.g)}, ${xl(this.b)}${e===1?")":`, ${e})`}`}function Gm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ul(e){return e=xl(e),(e<16?"0":"")+e.toString(16)}function VS(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Mn(e,t,r,a)}function B3(e){if(e instanceof Mn)return new Mn(e.h,e.s,e.l,e.opacity);if(e instanceof _f||(e=Cd(e)),!e)return new Mn;if(e instanceof Mn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),l=NaN,o=i-s,c=(i+s)/2;return o?(t===i?l=(r-a)/o+(r<a)*6:r===i?l=(a-t)/o+2:l=(t-r)/o+4,o/=c<.5?i+s:2-i-s,l*=60):o=c>0&&c<1?0:l,new Mn(l,o,c,e.opacity)}function vY(e,t,r,a){return arguments.length===1?B3(e):new Mn(e,t,r,a??1)}function Mn(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}sw(Mn,vY,$3(_f,{brighter(e){return e=e==null?Hm:Math.pow(Hm,e),new Mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sd:Math.pow(Sd,e),new Mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new ka(ag(e>=240?e-240:e+120,s,a),ag(e,s,a),ag(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Mn(HS(this.h),y0(this.s),y0(this.l),Gm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gm(this.opacity);return`${e===1?"hsl(":"hsla("}${HS(this.h)}, ${y0(this.s)*100}%, ${y0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function HS(e){return e=(e||0)%360,e<0?e+360:e}function y0(e){return Math.max(0,Math.min(1,e||0))}function ag(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const iw=e=>()=>e;function bY(e,t){return function(r){return e+r*t}}function wY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function NY(e){return(e=+e)==1?U3:function(t,r){return r-t?wY(t,r,e):iw(isNaN(t)?r:t)}}function U3(e,t){var r=t-e;return r?bY(e,r):iw(isNaN(e)?t:e)}const GS=function e(t){var r=NY(t);function a(s,i){var l=r((s=yv(s)).r,(i=yv(i)).r),o=r(s.g,i.g),c=r(s.b,i.b),u=U3(s.opacity,i.opacity);return function(d){return s.r=l(d),s.g=o(d),s.b=c(d),s.opacity=u(d),s+""}}return a.gamma=e,a}(1);function jY(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function SY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kY(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),l;for(l=0;l<a;++l)s[l]=Bc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(o){for(l=0;l<a;++l)i[l]=s[l](o);return i}}function CY(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Xm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function _Y(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Bc(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var vv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ng=new RegExp(vv.source,"g");function OY(e){return function(){return e}}function EY(e){return function(t){return e(t)+""}}function TY(e,t){var r=vv.lastIndex=ng.lastIndex=0,a,s,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(a=vv.exec(e))&&(s=ng.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(a=a[0])===(s=s[0])?o[l]?o[l]+=s:o[++l]=s:(o[++l]=null,c.push({i:l,x:Xm(a,s)})),r=ng.lastIndex;return r<t.length&&(i=t.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?EY(c[0].x):OY(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Bc(e,t){var r=typeof t,a;return t==null||r==="boolean"?iw(t):(r==="number"?Xm:r==="string"?(a=Cd(t))?(t=a,GS):TY:t instanceof Cd?GS:t instanceof Date?CY:SY(t)?jY:Array.isArray(t)?kY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_Y:Xm)(e,t)}function lw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function AY(e,t){t===void 0&&(t=e,e=Bc);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(l){var o=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[o](l-o)}}function PY(e){return function(){return e}}function Ym(e){return+e}var XS=[0,1];function pa(e){return e}function bv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:PY(isNaN(t)?NaN:.5)}function DY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function IY(e,t,r){var a=e[0],s=e[1],i=t[0],l=t[1];return s<a?(a=bv(s,a),i=r(l,i)):(a=bv(a,s),i=r(i,l)),function(o){return i(a(o))}}function FY(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=bv(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(o){var c=Cf(e,o,1,a)-1;return i[c](s[c](o))}}function Of(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Tx(){var e=XS,t=XS,r=Bc,a,s,i,l=pa,o,c,u;function d(){var m=Math.min(e.length,t.length);return l!==pa&&(l=DY(e[0],e[m-1])),o=m>2?FY:IY,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=o(e.map(a),t,r)))(a(l(m)))}return f.invert=function(m){return l(s((u||(u=o(t,e.map(a),Xm)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Ym),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=lw,d()},f.clamp=function(m){return arguments.length?(l=m?!0:pa,d()):l!==pa},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,p){return a=m,s=p,d()}}function ow(){return Tx()(pa,pa)}function MY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function lc(e){return e=Qm(Math.abs(e)),e?e[1]:NaN}function RY(e,t){return function(r,a){for(var s=r.length,i=[],l=0,o=e[0],c=0;s>0&&o>0&&(c+o+1>a&&(o=Math.max(1,a-c)),i.push(r.substring(s-=o,s+o)),!((c+=o+1)>a));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function LY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var $Y=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _d(e){if(!(t=$Y.exec(e)))throw new Error("invalid format: "+e);var t;return new cw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_d.prototype=cw.prototype;function cw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function BY(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var W3;function UY(e,t){var r=Qm(e,t);if(!r)return e+"";var a=r[0],s=r[1],i=s-(W3=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Qm(e,Math.max(0,t+i-1))[0]}function YS(e,t){var r=Qm(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const QS={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:MY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YS(e*100,t),r:YS,s:UY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JS(e){return e}var ZS=Array.prototype.map,ek=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WY(e){var t=e.grouping===void 0||e.thousands===void 0?JS:RY(ZS.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?JS:LY(ZS.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=_d(f);var m=f.fill,p=f.align,y=f.sign,h=f.symbol,v=f.zero,w=f.width,S=f.comma,b=f.precision,x=f.trim,g=f.type;g==="n"?(S=!0,g="g"):QS[g]||(b===void 0&&(b=12),x=!0,g="g"),(v||m==="0"&&p==="=")&&(v=!0,m="0",p="=");var N=h==="$"?r:h==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",j=h==="$"?a:/[%p]/.test(g)?l:"",C=QS[g],_=/[defgprs%]/.test(g);b=b===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function T(E){var k=N,A=j,P,F,U;if(g==="c")A=C(E)+A,E="";else{E=+E;var W=E<0||1/E<0;if(E=isNaN(E)?c:C(Math.abs(E),b),x&&(E=BY(E)),W&&+E==0&&y!=="+"&&(W=!1),k=(W?y==="("?y:o:y==="-"||y==="("?"":y)+k,A=(g==="s"?ek[8+W3/3]:"")+A+(W&&y==="("?")":""),_){for(P=-1,F=E.length;++P<F;)if(U=E.charCodeAt(P),48>U||U>57){A=(U===46?s+E.slice(P+1):E.slice(P))+A,E=E.slice(0,P);break}}}S&&!v&&(E=t(E,1/0));var K=k.length+E.length+A.length,B=K<w?new Array(w-K+1).join(m):"";switch(S&&v&&(E=t(B+E,B.length?w-A.length:1/0),B=""),p){case"<":E=k+E+A+B;break;case"=":E=k+B+E+A;break;case"^":E=B.slice(0,K=B.length>>1)+k+E+A+B.slice(K);break;default:E=B+k+E+A;break}return i(E)}return T.toString=function(){return f+""},T}function d(f,m){var p=u((f=_d(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(lc(m)/3)))*3,h=Math.pow(10,-y),v=ek[8+y/3];return function(w){return p(h*w)+v}}return{format:u,formatPrefix:d}}var v0,uw,q3;qY({thousands:",",grouping:[3],currency:["$",""]});function qY(e){return v0=WY(e),uw=v0.format,q3=v0.formatPrefix,v0}function KY(e){return Math.max(0,-lc(Math.abs(e)))}function zY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lc(t)/3)))*3-lc(Math.abs(e)))}function VY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,lc(t)-lc(e))+1}function K3(e,t,r,a){var s=pv(e,t,r),i;switch(a=_d(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=zY(s,l))&&(a.precision=i),q3(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=VY(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=KY(s))&&(a.precision=i-(a.type==="%")*2);break}}return uw(a)}function Bi(e){var t=e.domain;return e.ticks=function(r){var a=t();return hv(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return K3(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,l=a[s],o=a[i],c,u,d=10;for(o<l&&(u=l,l=o,o=u,u=s,s=i,i=u);d-- >0;){if(u=xv(l,o,r),u===c)return a[s]=l,a[i]=o,t(a);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function Jm(){var e=ow();return e.copy=function(){return Of(e,Jm())},Nn.apply(e,arguments),Bi(e)}function z3(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Ym),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return z3(e).unknown(t)},e=arguments.length?Array.from(e,Ym):[0,1],Bi(r)}function V3(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],l;return i<s&&(l=r,r=a,a=l,l=s,s=i,i=l),e[r]=t.floor(s),e[a]=t.ceil(i),e}function tk(e){return Math.log(e)}function rk(e){return Math.exp(e)}function HY(e){return-Math.log(-e)}function GY(e){return-Math.exp(-e)}function XY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function YY(e){return e===10?XY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function QY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ak(e){return(t,r)=>-e(-t,r)}function dw(e){const t=e(tk,rk),r=t.domain;let a=10,s,i;function l(){return s=QY(a),i=YY(a),r()[0]<0?(s=ak(s),i=ak(i),e(HY,GY)):e(tk,rk),t}return t.base=function(o){return arguments.length?(a=+o,l()):a},t.domain=function(o){return arguments.length?(r(o),l()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),p=s(d),y,h;const v=o==null?10:+o;let w=[];if(!(a%1)&&p-m<v){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(y=1;y<a;++y)if(h=m<0?y/i(-m):y*i(m),!(h<u)){if(h>d)break;w.push(h)}}else for(;m<=p;++m)for(y=a-1;y>=1;--y)if(h=m>0?y/i(-m):y*i(m),!(h<u)){if(h>d)break;w.push(h)}w.length*2<v&&(w=hv(u,d,v))}else w=hv(m,p,Math.min(p-m,v)).map(i);return f?w.reverse():w},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=_d(c)).precision==null&&(c.trim=!0),c=uw(c)),o===1/0)return c;const u=Math.max(1,a*o/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*a<a-.5&&(f*=a),f<=u?c(d):""}},t.nice=()=>r(V3(r(),{floor:o=>i(Math.floor(s(o))),ceil:o=>i(Math.ceil(s(o)))})),t}function H3(){const e=dw(Tx()).domain([1,10]);return e.copy=()=>Of(e,H3()).base(e.base()),Nn.apply(e,arguments),e}function nk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fw(e){var t=1,r=e(nk(t),sk(t));return r.constant=function(a){return arguments.length?e(nk(t=+a),sk(t)):t},Bi(r)}function G3(){var e=fw(Tx());return e.copy=function(){return Of(e,G3()).constant(e.constant())},Nn.apply(e,arguments)}function ik(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function JY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ZY(e){return e<0?-e*e:e*e}function mw(e){var t=e(pa,pa),r=1;function a(){return r===1?e(pa,pa):r===.5?e(JY,ZY):e(ik(r),ik(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},Bi(t)}function hw(){var e=mw(Tx());return e.copy=function(){return Of(e,hw()).exponent(e.exponent())},Nn.apply(e,arguments),e}function eQ(){return hw.apply(null,arguments).exponent(.5)}function lk(e){return Math.sign(e)*e*e}function tQ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function X3(){var e=ow(),t=[0,1],r=!1,a;function s(i){var l=tQ(e(i));return isNaN(l)?a:r?Math.round(l):l}return s.invert=function(i){return e.invert(lk(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Ym)).map(lk)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return X3(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Nn.apply(s,arguments),Bi(s)}function Y3(){var e=[],t=[],r=[],a;function s(){var l=0,o=Math.max(1,t.length);for(r=new Array(o-1);++l<o;)r[l-1]=iY(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?a:t[Cf(r,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Ni),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return Y3().domain(e).range(t).unknown(a)},Nn.apply(i,arguments)}function Q3(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function l(c){return c!=null&&c<=c?s[Cf(a,c,0,r)]:i}function o(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,o()):s.slice()},l.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return a.slice()},l.copy=function(){return Q3().domain([e,t]).range(s).unknown(i)},Nn.apply(Bi(l),arguments)}function J3(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[Cf(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return J3().domain(e).range(t).unknown(r)},Nn.apply(s,arguments)}const sg=new Date,ig=new Date;function Or(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),o=s.ceil(i);return i-l<o-i?l:o},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,o)=>{const c=[];if(i=s.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let u;do c.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<l);return c},s.filter=i=>Or(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(sg.setTime(+i),ig.setTime(+l),e(sg),e(ig),Math.floor(r(sg,ig))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Zm=Or(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Or(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Zm);Zm.range;const bs=1e3,dn=bs*60,ws=dn*60,Rs=ws*24,xw=Rs*7,ok=Rs*30,lg=Rs*365,dl=Or(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getUTCSeconds());dl.range;const pw=Or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bs)},(e,t)=>{e.setTime(+e+t*dn)},(e,t)=>(t-e)/dn,e=>e.getMinutes());pw.range;const gw=Or(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*dn)},(e,t)=>(t-e)/dn,e=>e.getUTCMinutes());gw.range;const yw=Or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bs-e.getMinutes()*dn)},(e,t)=>{e.setTime(+e+t*ws)},(e,t)=>(t-e)/ws,e=>e.getHours());yw.range;const vw=Or(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ws)},(e,t)=>(t-e)/ws,e=>e.getUTCHours());vw.range;const Ef=Or(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*dn)/Rs,e=>e.getDate()-1);Ef.range;const Ax=Or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rs,e=>e.getUTCDate()-1);Ax.range;const Z3=Or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rs,e=>Math.floor(e/Rs));Z3.range;function Vl(e){return Or(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*dn)/xw)}const Px=Vl(0),eh=Vl(1),rQ=Vl(2),aQ=Vl(3),oc=Vl(4),nQ=Vl(5),sQ=Vl(6);Px.range;eh.range;rQ.range;aQ.range;oc.range;nQ.range;sQ.range;function Hl(e){return Or(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/xw)}const Dx=Hl(0),th=Hl(1),iQ=Hl(2),lQ=Hl(3),cc=Hl(4),oQ=Hl(5),cQ=Hl(6);Dx.range;th.range;iQ.range;lQ.range;cc.range;oQ.range;cQ.range;const bw=Or(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bw.range;const ww=Or(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ww.range;const Ls=Or(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ls.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Or(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ls.range;const $s=Or(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$s.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Or(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});$s.range;function eA(e,t,r,a,s,i){const l=[[dl,1,bs],[dl,5,5*bs],[dl,15,15*bs],[dl,30,30*bs],[i,1,dn],[i,5,5*dn],[i,15,15*dn],[i,30,30*dn],[s,1,ws],[s,3,3*ws],[s,6,6*ws],[s,12,12*ws],[a,1,Rs],[a,2,2*Rs],[r,1,xw],[t,1,ok],[t,3,3*ok],[e,1,lg]];function o(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),y=p?p.range(u,+d+1):[];return m?y.reverse():y}function c(u,d,f){const m=Math.abs(d-u)/f,p=aw(([,,v])=>v).right(l,m);if(p===l.length)return e.every(pv(u/lg,d/lg,f));if(p===0)return Zm.every(Math.max(pv(u,d,f),1));const[y,h]=l[m/l[p-1][2]<l[p][2]/m?p-1:p];return y.every(h)}return[o,c]}const[uQ,dQ]=eA($s,ww,Dx,Z3,vw,gw),[fQ,mQ]=eA(Ls,bw,Px,Ef,yw,pw);function og(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ou(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function hQ(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,u=cu(s),d=uu(s),f=cu(i),m=uu(i),p=cu(l),y=uu(l),h=cu(o),v=uu(o),w=cu(c),S=uu(c),b={a:W,A:K,b:B,B:ee,c:null,d:hk,e:hk,f:RQ,g:HQ,G:XQ,H:IQ,I:FQ,j:MQ,L:tA,m:LQ,M:$Q,p:oe,q:R,Q:gk,s:yk,S:BQ,u:UQ,U:WQ,V:qQ,w:KQ,W:zQ,x:null,X:null,y:VQ,Y:GQ,Z:YQ,"%":pk},x={a:V,A:X,b:J,B:Z,c:null,d:xk,e:xk,f:eJ,g:uJ,G:fJ,H:QQ,I:JQ,j:ZQ,L:aA,m:tJ,M:rJ,p:le,q:xe,Q:gk,s:yk,S:aJ,u:nJ,U:sJ,V:iJ,w:lJ,W:oJ,x:null,X:null,y:cJ,Y:dJ,Z:mJ,"%":pk},g={a:T,A:E,b:k,B:A,c:P,d:fk,e:fk,f:TQ,g:dk,G:uk,H:mk,I:mk,j:CQ,L:EQ,m:kQ,M:_Q,p:_,q:SQ,Q:PQ,s:DQ,S:OQ,u:vQ,U:bQ,V:wQ,w:yQ,W:NQ,x:F,X:U,y:dk,Y:uk,Z:jQ,"%":AQ};b.x=N(r,b),b.X=N(a,b),b.c=N(t,b),x.x=N(r,x),x.X=N(a,x),x.c=N(t,x);function N(ae,M){return function(G){var D=[],se=-1,I=0,ce=ae.length,ue,te,Ue;for(G instanceof Date||(G=new Date(+G));++se<ce;)ae.charCodeAt(se)===37&&(D.push(ae.slice(I,se)),(te=ck[ue=ae.charAt(++se)])!=null?ue=ae.charAt(++se):te=ue==="e"?" ":"0",(Ue=M[ue])&&(ue=Ue(G,te)),D.push(ue),I=se+1);return D.push(ae.slice(I,se)),D.join("")}}function j(ae,M){return function(G){var D=ou(1900,void 0,1),se=C(D,ae,G+="",0),I,ce;if(se!=G.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(M&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(I=cg(ou(D.y,0,1)),ce=I.getUTCDay(),I=ce>4||ce===0?th.ceil(I):th(I),I=Ax.offset(I,(D.V-1)*7),D.y=I.getUTCFullYear(),D.m=I.getUTCMonth(),D.d=I.getUTCDate()+(D.w+6)%7):(I=og(ou(D.y,0,1)),ce=I.getDay(),I=ce>4||ce===0?eh.ceil(I):eh(I),I=Ef.offset(I,(D.V-1)*7),D.y=I.getFullYear(),D.m=I.getMonth(),D.d=I.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),ce="Z"in D?cg(ou(D.y,0,1)).getUTCDay():og(ou(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(ce+5)%7:D.w+D.U*7-(ce+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,cg(D)):og(D)}}function C(ae,M,G,D){for(var se=0,I=M.length,ce=G.length,ue,te;se<I;){if(D>=ce)return-1;if(ue=M.charCodeAt(se++),ue===37){if(ue=M.charAt(se++),te=g[ue in ck?M.charAt(se++):ue],!te||(D=te(ae,G,D))<0)return-1}else if(ue!=G.charCodeAt(D++))return-1}return D}function _(ae,M,G){var D=u.exec(M.slice(G));return D?(ae.p=d.get(D[0].toLowerCase()),G+D[0].length):-1}function T(ae,M,G){var D=p.exec(M.slice(G));return D?(ae.w=y.get(D[0].toLowerCase()),G+D[0].length):-1}function E(ae,M,G){var D=f.exec(M.slice(G));return D?(ae.w=m.get(D[0].toLowerCase()),G+D[0].length):-1}function k(ae,M,G){var D=w.exec(M.slice(G));return D?(ae.m=S.get(D[0].toLowerCase()),G+D[0].length):-1}function A(ae,M,G){var D=h.exec(M.slice(G));return D?(ae.m=v.get(D[0].toLowerCase()),G+D[0].length):-1}function P(ae,M,G){return C(ae,t,M,G)}function F(ae,M,G){return C(ae,r,M,G)}function U(ae,M,G){return C(ae,a,M,G)}function W(ae){return l[ae.getDay()]}function K(ae){return i[ae.getDay()]}function B(ae){return c[ae.getMonth()]}function ee(ae){return o[ae.getMonth()]}function oe(ae){return s[+(ae.getHours()>=12)]}function R(ae){return 1+~~(ae.getMonth()/3)}function V(ae){return l[ae.getUTCDay()]}function X(ae){return i[ae.getUTCDay()]}function J(ae){return c[ae.getUTCMonth()]}function Z(ae){return o[ae.getUTCMonth()]}function le(ae){return s[+(ae.getUTCHours()>=12)]}function xe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var M=N(ae+="",b);return M.toString=function(){return ae},M},parse:function(ae){var M=j(ae+="",!1);return M.toString=function(){return ae},M},utcFormat:function(ae){var M=N(ae+="",x);return M.toString=function(){return ae},M},utcParse:function(ae){var M=j(ae+="",!0);return M.toString=function(){return ae},M}}}var ck={"-":"",_:" ",0:"0"},Lr=/^\s*\d+/,xQ=/^%/,pQ=/[\\^$*+?|[\]().{}]/g;function Nt(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function gQ(e){return e.replace(pQ,"\\$&")}function cu(e){return new RegExp("^(?:"+e.map(gQ).join("|")+")","i")}function uu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yQ(e,t,r){var a=Lr.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function vQ(e,t,r){var a=Lr.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function bQ(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function wQ(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function NQ(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function uk(e,t,r){var a=Lr.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function dk(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function jQ(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function SQ(e,t,r){var a=Lr.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function kQ(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function fk(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function CQ(e,t,r){var a=Lr.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function mk(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function _Q(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function OQ(e,t,r){var a=Lr.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function EQ(e,t,r){var a=Lr.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function TQ(e,t,r){var a=Lr.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function AQ(e,t,r){var a=xQ.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function PQ(e,t,r){var a=Lr.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function DQ(e,t,r){var a=Lr.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function hk(e,t){return Nt(e.getDate(),t,2)}function IQ(e,t){return Nt(e.getHours(),t,2)}function FQ(e,t){return Nt(e.getHours()%12||12,t,2)}function MQ(e,t){return Nt(1+Ef.count(Ls(e),e),t,3)}function tA(e,t){return Nt(e.getMilliseconds(),t,3)}function RQ(e,t){return tA(e,t)+"000"}function LQ(e,t){return Nt(e.getMonth()+1,t,2)}function $Q(e,t){return Nt(e.getMinutes(),t,2)}function BQ(e,t){return Nt(e.getSeconds(),t,2)}function UQ(e){var t=e.getDay();return t===0?7:t}function WQ(e,t){return Nt(Px.count(Ls(e)-1,e),t,2)}function rA(e){var t=e.getDay();return t>=4||t===0?oc(e):oc.ceil(e)}function qQ(e,t){return e=rA(e),Nt(oc.count(Ls(e),e)+(Ls(e).getDay()===4),t,2)}function KQ(e){return e.getDay()}function zQ(e,t){return Nt(eh.count(Ls(e)-1,e),t,2)}function VQ(e,t){return Nt(e.getFullYear()%100,t,2)}function HQ(e,t){return e=rA(e),Nt(e.getFullYear()%100,t,2)}function GQ(e,t){return Nt(e.getFullYear()%1e4,t,4)}function XQ(e,t){var r=e.getDay();return e=r>=4||r===0?oc(e):oc.ceil(e),Nt(e.getFullYear()%1e4,t,4)}function YQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Nt(t/60|0,"0",2)+Nt(t%60,"0",2)}function xk(e,t){return Nt(e.getUTCDate(),t,2)}function QQ(e,t){return Nt(e.getUTCHours(),t,2)}function JQ(e,t){return Nt(e.getUTCHours()%12||12,t,2)}function ZQ(e,t){return Nt(1+Ax.count($s(e),e),t,3)}function aA(e,t){return Nt(e.getUTCMilliseconds(),t,3)}function eJ(e,t){return aA(e,t)+"000"}function tJ(e,t){return Nt(e.getUTCMonth()+1,t,2)}function rJ(e,t){return Nt(e.getUTCMinutes(),t,2)}function aJ(e,t){return Nt(e.getUTCSeconds(),t,2)}function nJ(e){var t=e.getUTCDay();return t===0?7:t}function sJ(e,t){return Nt(Dx.count($s(e)-1,e),t,2)}function nA(e){var t=e.getUTCDay();return t>=4||t===0?cc(e):cc.ceil(e)}function iJ(e,t){return e=nA(e),Nt(cc.count($s(e),e)+($s(e).getUTCDay()===4),t,2)}function lJ(e){return e.getUTCDay()}function oJ(e,t){return Nt(th.count($s(e)-1,e),t,2)}function cJ(e,t){return Nt(e.getUTCFullYear()%100,t,2)}function uJ(e,t){return e=nA(e),Nt(e.getUTCFullYear()%100,t,2)}function dJ(e,t){return Nt(e.getUTCFullYear()%1e4,t,4)}function fJ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?cc(e):cc.ceil(e),Nt(e.getUTCFullYear()%1e4,t,4)}function mJ(){return"+0000"}function pk(){return"%"}function gk(e){return+e}function yk(e){return Math.floor(+e/1e3)}var no,sA,iA;hJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hJ(e){return no=hQ(e),sA=no.format,no.parse,iA=no.utcFormat,no.utcParse,no}function xJ(e){return new Date(e)}function pJ(e){return e instanceof Date?+e:+new Date(+e)}function Nw(e,t,r,a,s,i,l,o,c,u){var d=ow(),f=d.invert,m=d.domain,p=u(".%L"),y=u(":%S"),h=u("%I:%M"),v=u("%I %p"),w=u("%a %d"),S=u("%b %d"),b=u("%B"),x=u("%Y");function g(N){return(c(N)<N?p:o(N)<N?y:l(N)<N?h:i(N)<N?v:a(N)<N?s(N)<N?w:S:r(N)<N?b:x)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?m(Array.from(N,pJ)):m().map(xJ)},d.ticks=function(N){var j=m();return e(j[0],j[j.length-1],N??10)},d.tickFormat=function(N,j){return j==null?g:u(j)},d.nice=function(N){var j=m();return(!N||typeof N.range!="function")&&(N=t(j[0],j[j.length-1],N??10)),N?m(V3(j,N)):d},d.copy=function(){return Of(d,Nw(e,t,r,a,s,i,l,o,c,u))},d}function gJ(){return Nn.apply(Nw(fQ,mQ,Ls,bw,Px,Ef,yw,pw,dl,sA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yJ(){return Nn.apply(Nw(uQ,dQ,$s,ww,Dx,Ax,vw,gw,dl,iA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ix(){var e=0,t=1,r,a,s,i,l=pa,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:l(s===0?.5:(f=(i(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(l=f,u):l};function d(f){return function(m){var p,y;return arguments.length?([p,y]=m,l=f(p,y),u):[l(0),l(1)]}}return u.range=d(Bc),u.rangeRound=d(lw),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),a=f(t),s=r===a?0:1/(a-r),u}}function Ui(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function lA(){var e=Bi(Ix()(pa));return e.copy=function(){return Ui(e,lA())},Ks.apply(e,arguments)}function oA(){var e=dw(Ix()).domain([1,10]);return e.copy=function(){return Ui(e,oA()).base(e.base())},Ks.apply(e,arguments)}function cA(){var e=fw(Ix());return e.copy=function(){return Ui(e,cA()).constant(e.constant())},Ks.apply(e,arguments)}function jw(){var e=mw(Ix());return e.copy=function(){return Ui(e,jw()).exponent(e.exponent())},Ks.apply(e,arguments)}function vJ(){return jw.apply(null,arguments).exponent(.5)}function uA(){var e=[],t=pa;function r(a){if(a!=null&&!isNaN(a=+a))return t((Cf(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ni),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>sY(e,i/a))},r.copy=function(){return uA(t).domain(e)},Ks.apply(r,arguments)}function Fx(){var e=0,t=.5,r=1,a=1,s,i,l,o,c,u=pa,d,f=!1,m;function p(h){return isNaN(h=+h)?m:(h=.5+((h=+d(h))-i)*(a*h<a*i?o:c),u(f?Math.max(0,Math.min(1,h)):h))}p.domain=function(h){return arguments.length?([e,t,r]=h,s=d(e=+e),i=d(t=+t),l=d(r=+r),o=s===i?0:.5/(i-s),c=i===l?0:.5/(l-i),a=i<s?-1:1,p):[e,t,r]},p.clamp=function(h){return arguments.length?(f=!!h,p):f},p.interpolator=function(h){return arguments.length?(u=h,p):u};function y(h){return function(v){var w,S,b;return arguments.length?([w,S,b]=v,u=AY(h,[w,S,b]),p):[u(0),u(.5),u(1)]}}return p.range=y(Bc),p.rangeRound=y(lw),p.unknown=function(h){return arguments.length?(m=h,p):m},function(h){return d=h,s=h(e),i=h(t),l=h(r),o=s===i?0:.5/(i-s),c=i===l?0:.5/(l-i),a=i<s?-1:1,p}}function dA(){var e=Bi(Fx()(pa));return e.copy=function(){return Ui(e,dA())},Ks.apply(e,arguments)}function fA(){var e=dw(Fx()).domain([.1,1,10]);return e.copy=function(){return Ui(e,fA()).base(e.base())},Ks.apply(e,arguments)}function mA(){var e=fw(Fx());return e.copy=function(){return Ui(e,mA()).constant(e.constant())},Ks.apply(e,arguments)}function Sw(){var e=mw(Fx());return e.copy=function(){return Ui(e,Sw()).exponent(e.exponent())},Ks.apply(e,arguments)}function bJ(){return Sw.apply(null,arguments).exponent(.5)}const vk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jd,scaleDiverging:dA,scaleDivergingLog:fA,scaleDivergingPow:Sw,scaleDivergingSqrt:bJ,scaleDivergingSymlog:mA,scaleIdentity:z3,scaleImplicit:gv,scaleLinear:Jm,scaleLog:H3,scaleOrdinal:nw,scalePoint:Mu,scalePow:hw,scaleQuantile:Y3,scaleQuantize:Q3,scaleRadial:X3,scaleSequential:lA,scaleSequentialLog:oA,scaleSequentialPow:jw,scaleSequentialQuantile:uA,scaleSequentialSqrt:vJ,scaleSequentialSymlog:cA,scaleSqrt:eQ,scaleSymlog:G3,scaleThreshold:J3,scaleTime:gJ,scaleUtc:yJ,tickFormat:K3},Symbol.toStringTag,{value:"Module"}));var wJ=Pc;function NJ(e,t,r){for(var a=-1,s=e.length;++a<s;){var i=e[a],l=t(i);if(l!=null&&(o===void 0?l===l&&!wJ(l):r(l,o)))var o=l,c=i}return c}var hA=NJ;function jJ(e,t){return e>t}var SJ=jJ,kJ=hA,CJ=SJ,_J=$c;function OJ(e){return e&&e.length?kJ(e,_J,CJ):void 0}var EJ=OJ;const Mx=Ft(EJ);function TJ(e,t){return e<t}var AJ=TJ,PJ=hA,DJ=AJ,IJ=$c;function FJ(e){return e&&e.length?PJ(e,IJ,DJ):void 0}var MJ=FJ;const Rx=Ft(MJ);var RJ=Lb,LJ=$i,$J=N3,BJ=Aa;function UJ(e,t){var r=BJ(e)?RJ:$J;return r(e,LJ(t))}var WJ=UJ,qJ=b3,KJ=WJ;function zJ(e,t){return qJ(KJ(e,t),1)}var VJ=zJ;const HJ=Ft(VJ);var GJ=Zb;function XJ(e,t){return GJ(e,t)}var YJ=XJ;const Lx=Ft(YJ);var Uc=1e9,QJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Cw,Ht=!0,bn="[DecimalError] ",pl=bn+"Invalid argument: ",kw=bn+"Exponent out of range: ",Wc=Math.floor,nl=Math.pow,JJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ra,Er=1e7,Ut=7,xA=9007199254740991,rh=Wc(xA/Ut),Re={};Re.absoluteValue=Re.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Re.comparedTo=Re.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Re.decimalPlaces=Re.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ut;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Re.dividedBy=Re.div=function(e){return Es(this,new this.constructor(e))};Re.dividedToIntegerBy=Re.idiv=function(e){var t=this,r=t.constructor;return Dt(Es(t,new r(e),0,1),r.precision)};Re.equals=Re.eq=function(e){return!this.cmp(e)};Re.exponent=function(){return br(this)};Re.greaterThan=Re.gt=function(e){return this.cmp(e)>0};Re.greaterThanOrEqualTo=Re.gte=function(e){return this.cmp(e)>=0};Re.isInteger=Re.isint=function(){return this.e>this.d.length-2};Re.isNegative=Re.isneg=function(){return this.s<0};Re.isPositive=Re.ispos=function(){return this.s>0};Re.isZero=function(){return this.s===0};Re.lessThan=Re.lt=function(e){return this.cmp(e)<0};Re.lessThanOrEqualTo=Re.lte=function(e){return this.cmp(e)<1};Re.logarithm=Re.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Ra))throw Error(bn+"NaN");if(r.s<1)throw Error(bn+(r.s?"NaN":"-Infinity"));return r.eq(Ra)?new a(0):(Ht=!1,t=Es(Od(r,i),Od(e,i),i),Ht=!0,Dt(t,s))};Re.minus=Re.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?yA(t,e):pA(t,(e.s=-e.s,e))};Re.modulo=Re.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(bn+"NaN");return r.s?(Ht=!1,t=Es(r,e,0,1).times(e),Ht=!0,r.minus(t)):Dt(new a(r),s)};Re.naturalExponential=Re.exp=function(){return gA(this)};Re.naturalLogarithm=Re.ln=function(){return Od(this)};Re.negated=Re.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Re.plus=Re.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pA(t,e):yA(t,(e.s=-e.s,e))};Re.precision=Re.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(pl+e);if(t=br(s)+1,a=s.d.length-1,r=a*Ut+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Re.squareRoot=Re.sqrt=function(){var e,t,r,a,s,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(bn+"NaN")}for(e=br(o),Ht=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=Qn(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Wc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=l=r+3;;)if(i=a,a=i.plus(Es(o,i,l+2)).times(.5),Qn(i.d).slice(0,l)===(t=Qn(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Dt(i,r+1,0),i.times(i).eq(o)){a=i;break}}else if(t!="9999")break;l+=4}return Ht=!0,Dt(a,r)};Re.times=Re.mul=function(e){var t,r,a,s,i,l,o,c,u,d=this,f=d.constructor,m=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,l=c,c=u,u=l),i=[],l=c+u,a=l;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=c+a;s>a;)o=i[s]+p[a]*m[s-a-1]+t,i[s--]=o%Er|0,t=o/Er|0;i[s]=(i[s]+t)%Er|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ht?Dt(e,f.precision):e};Re.toDecimalPlaces=Re.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(ss(e,0,Uc),t===void 0?t=a.rounding:ss(t,0,8),Dt(r,e+br(r)+1,t))};Re.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=Pl(a,!0):(ss(e,0,Uc),t===void 0?t=s.rounding:ss(t,0,8),a=Dt(new s(a),e+1,t),r=Pl(a,!0,e+1)),r};Re.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?Pl(s):(ss(e,0,Uc),t===void 0?t=i.rounding:ss(t,0,8),a=Dt(new i(s),e+br(s)+1,t),r=Pl(a.abs(),!1,e+br(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Re.toInteger=Re.toint=function(){var e=this,t=e.constructor;return Dt(new t(e),br(e)+1,t.rounding)};Re.toNumber=function(){return+this};Re.toPower=Re.pow=function(e){var t,r,a,s,i,l,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Ra);if(o=new c(o),!o.s){if(e.s<1)throw Error(bn+"Infinity");return o}if(o.eq(Ra))return o;if(a=c.precision,e.eq(Ra))return Dt(o,a);if(t=e.e,r=e.d.length-1,l=t>=r,i=o.s,l){if((r=d<0?-d:d)<=xA){for(s=new c(Ra),t=Math.ceil(a/Ut+4),Ht=!1;r%2&&(s=s.times(o),wk(s.d,t)),r=Wc(r/2),r!==0;)o=o.times(o),wk(o.d,t);return Ht=!0,e.s<0?new c(Ra).div(s):Dt(s,a)}}else if(i<0)throw Error(bn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Ht=!1,s=e.times(Od(o,a+u)),Ht=!0,s=gA(s),s.s=i,s};Re.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=br(s),a=Pl(s,r<=i.toExpNeg||r>=i.toExpPos)):(ss(e,1,Uc),t===void 0?t=i.rounding:ss(t,0,8),s=Dt(new i(s),e,t),r=br(s),a=Pl(s,e<=r||r<=i.toExpNeg,e)),a};Re.toSignificantDigits=Re.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(ss(e,1,Uc),t===void 0?t=a.rounding:ss(t,0,8)),Dt(new a(r),e,t)};Re.toString=Re.valueOf=Re.val=Re.toJSON=Re[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=br(e),r=e.constructor;return Pl(e,t<=r.toExpNeg||t>=r.toExpPos)};function pA(e,t){var r,a,s,i,l,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ht?Dt(t,f):t;if(c=e.d,u=t.d,l=e.e,s=t.e,c=c.slice(),i=l-s,i){for(i<0?(a=c,i=-i,o=u.length):(a=u,s=l,o=c.length),l=Math.ceil(f/Ut),o=l>o?l+1:o+1,i>o&&(i=o,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(o=c.length,i=u.length,o-i<0&&(i=o,a=u,u=c,c=a),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Er|0,c[i]%=Er;for(r&&(c.unshift(r),++s),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=s,Ht?Dt(t,f):t}function ss(e,t,r){if(e!==~~e||e<t||e>r)throw Error(pl+e)}function Qn(e){var t,r,a,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)a=e[t]+"",r=Ut-a.length,r&&(i+=ti(r)),i+=a;l=e[t],a=l+"",r=Ut-a.length,r&&(i+=ti(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Es=function(){function e(a,s){var i,l=0,o=a.length;for(a=a.slice();o--;)i=a[o]*s+l,a[o]=i%Er|0,l=i/Er|0;return l&&a.unshift(l),a}function t(a,s,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(a[o]!=s[o]){c=a[o]>s[o]?1:-1;break}return c}function r(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*Er+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var o,c,u,d,f,m,p,y,h,v,w,S,b,x,g,N,j,C,_=a.constructor,T=a.s==s.s?1:-1,E=a.d,k=s.d;if(!a.s)return new _(a);if(!s.s)throw Error(bn+"Division by zero");for(c=a.e-s.e,j=k.length,g=E.length,p=new _(T),y=p.d=[],u=0;k[u]==(E[u]||0);)++u;if(k[u]>(E[u]||0)&&--c,i==null?S=i=_.precision:l?S=i+(br(a)-br(s))+1:S=i,S<0)return new _(0);if(S=S/Ut+2|0,u=0,j==1)for(d=0,k=k[0],S++;(u<g||d)&&S--;u++)b=d*Er+(E[u]||0),y[u]=b/k|0,d=b%k|0;else{for(d=Er/(k[0]+1)|0,d>1&&(k=e(k,d),E=e(E,d),j=k.length,g=E.length),x=j,h=E.slice(0,j),v=h.length;v<j;)h[v++]=0;C=k.slice(),C.unshift(0),N=k[0],k[1]>=Er/2&&++N;do d=0,o=t(k,h,j,v),o<0?(w=h[0],j!=v&&(w=w*Er+(h[1]||0)),d=w/N|0,d>1?(d>=Er&&(d=Er-1),f=e(k,d),m=f.length,v=h.length,o=t(f,h,m,v),o==1&&(d--,r(f,j<m?C:k,m))):(d==0&&(o=d=1),f=k.slice()),m=f.length,m<v&&f.unshift(0),r(h,f,v),o==-1&&(v=h.length,o=t(k,h,j,v),o<1&&(d++,r(h,j<v?C:k,v))),v=h.length):o===0&&(d++,h=[0]),y[u++]=d,o&&h[0]?h[v++]=E[x]||0:(h=[E[x]],v=1);while((x++<g||h[0]!==void 0)&&S--)}return y[0]||y.shift(),p.e=c,Dt(p,l?i+br(p)+1:i)}}();function gA(e,t){var r,a,s,i,l,o,c=0,u=0,d=e.constructor,f=d.precision;if(br(e)>16)throw Error(kw+br(e));if(!e.s)return new d(Ra);for(t==null?(Ht=!1,o=f):o=t,l=new d(.03125);e.abs().gte(.1);)e=e.times(l),u+=5;for(a=Math.log(nl(2,u))/Math.LN10*2+5|0,o+=a,r=s=i=new d(Ra),d.precision=o;;){if(s=Dt(s.times(e),o),r=r.times(++c),l=i.plus(Es(s,r,o)),Qn(l.d).slice(0,o)===Qn(i.d).slice(0,o)){for(;u--;)i=Dt(i.times(i),o);return d.precision=f,t==null?(Ht=!0,Dt(i,f)):i}i=l}}function br(e){for(var t=e.e*Ut,r=e.d[0];r>=10;r/=10)t++;return t}function ug(e,t,r){if(t>e.LN10.sd())throw Ht=!0,r&&(e.precision=r),Error(bn+"LN10 precision limit exceeded");return Dt(new e(e.LN10),t)}function ti(e){for(var t="";e--;)t+="0";return t}function Od(e,t){var r,a,s,i,l,o,c,u,d,f=1,m=10,p=e,y=p.d,h=p.constructor,v=h.precision;if(p.s<1)throw Error(bn+(p.s?"NaN":"-Infinity"));if(p.eq(Ra))return new h(0);if(t==null?(Ht=!1,u=v):u=t,p.eq(10))return t==null&&(Ht=!0),ug(h,u);if(u+=m,h.precision=u,r=Qn(y),a=r.charAt(0),i=br(p),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)p=p.times(e),r=Qn(p.d),a=r.charAt(0),f++;i=br(p),a>1?(p=new h("0."+r),i++):p=new h(a+"."+r.slice(1))}else return c=ug(h,u+2,v).times(i+""),p=Od(new h(a+"."+r.slice(1)),u-m).plus(c),h.precision=v,t==null?(Ht=!0,Dt(p,v)):p;for(o=l=p=Es(p.minus(Ra),p.plus(Ra),u),d=Dt(p.times(p),u),s=3;;){if(l=Dt(l.times(d),u),c=o.plus(Es(l,new h(s),u)),Qn(c.d).slice(0,u)===Qn(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(ug(h,u+2,v).times(i+""))),o=Es(o,new h(f),u),h.precision=v,t==null?(Ht=!0,Dt(o,v)):o;o=c,s+=2}}function bk(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=Wc(r/Ut),e.d=[],a=(r+1)%Ut,r<0&&(a+=Ut),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=Ut;a<s;)e.d.push(+t.slice(a,a+=Ut));t=t.slice(a),a=Ut-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),Ht&&(e.e>rh||e.e<-rh))throw Error(kw+r)}else e.s=0,e.e=0,e.d=[0];return e}function Dt(e,t,r){var a,s,i,l,o,c,u,d,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if(a=t-l,a<0)a+=Ut,s=t,u=f[d=0];else{if(d=Math.ceil((a+1)/Ut),i=f.length,d>=i)return e;for(u=i=f[d],l=1;i>=10;i/=10)l++;a%=Ut,s=a-Ut+l}if(r!==void 0&&(i=nl(10,l-s-1),o=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(a>0?s>0?u/nl(10,l-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=br(e),f.length=1,t=t-i-1,f[0]=nl(10,(Ut-t%Ut)%Ut),e.e=Wc(-t/Ut)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=d,i=1,d--):(f.length=d+1,i=nl(10,Ut-a),f[d]=s>0?(u/nl(10,l-s)%nl(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Er&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Er)break;f[d--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(Ht&&(e.e>rh||e.e<-rh))throw Error(kw+br(e));return e}function yA(e,t){var r,a,s,i,l,o,c,u,d,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Ht?Dt(t,p):t;if(c=e.d,f=t.d,a=t.e,u=e.e,c=c.slice(),l=u-a,l){for(d=l<0,d?(r=c,l=-l,o=f.length):(r=f,a=u,o=c.length),s=Math.max(Math.ceil(p/Ut),o)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=c.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}l=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,s=f.length-o;s>0;--s)c[o++]=0;for(s=f.length;s>l;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=Er-1;--c[i],c[s]+=Er}c[s]-=f[s]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,Ht?Dt(t,p):t):new m(0)}function Pl(e,t,r){var a,s=br(e),i=Qn(e.d),l=i.length;return t?(r&&(a=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+ti(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+ti(-s-1)+i,r&&(a=r-l)>0&&(i+=ti(a))):s>=l?(i+=ti(s+1-l),r&&(a=r-s-1)>0&&(i=i+"."+ti(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-l)>0&&(s+1===l&&(i+="."),i+=ti(a))),e.s<0?"-"+i:i}function wk(e,t){if(e.length>t)return e.length=t,!0}function vA(e){var t,r,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(pl+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return bk(l,i.toString())}else if(typeof i!="string")throw Error(pl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,JJ.test(i))bk(l,i);else throw Error(pl+i)}if(s.prototype=Re,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=vA,s.config=s.set=ZJ,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function ZJ(e){if(!e||typeof e!="object")throw Error(bn+"Object expected");var t,r,a,s=["precision",1,Uc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(Wc(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(pl+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(pl+r+": "+a);return this}var Cw=vA(QJ);Ra=new Cw(1);const Tt=Cw;function eZ(e){return nZ(e)||aZ(e)||rZ(e)||tZ()}function tZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rZ(e,t){if(e){if(typeof e=="string")return wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wv(e,t)}}function aZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function nZ(e){if(Array.isArray(e))return wv(e)}function wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var sZ=function(t){return t},bA={"@@functional/placeholder":!0},wA=function(t){return t===bA},Nk=function(t){return function r(){return arguments.length===0||arguments.length===1&&wA(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},iZ=function e(t,r){return t===1?r:Nk(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var l=s.filter(function(o){return o!==bA}).length;return l>=t?r.apply(void 0,s):e(t-l,Nk(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=s.map(function(f){return wA(f)?c.shift():f});return r.apply(void 0,eZ(d).concat(c))}))})},$x=function(t){return iZ(t.length,t)},Nv=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},lZ=$x(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),oZ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return sZ;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},jv=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},NA=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return r&&i.every(function(o,c){return o===r[c]})||(r=i,a=t.apply(void 0,i)),a}};function cZ(e){var t;return e===0?t=1:t=Math.floor(new Tt(e).abs().log(10).toNumber())+1,t}function uZ(e,t,r){for(var a=new Tt(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var dZ=$x(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),fZ=$x(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),mZ=$x(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Bx={rangeStep:uZ,getDigitCount:cZ,interpolateNumber:dZ,uninterpolateNumber:fZ,uninterpolateTruncation:mZ};function Sv(e){return pZ(e)||xZ(e)||jA(e)||hZ()}function hZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function pZ(e){if(Array.isArray(e))return kv(e)}function Ed(e,t){return vZ(e)||yZ(e,t)||jA(e,t)||gZ()}function gZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jA(e,t){if(e){if(typeof e=="string")return kv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kv(e,t)}}function kv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function yZ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(a=(o=l.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&l.return!=null&&l.return()}finally{if(s)throw i}}return r}}function vZ(e){if(Array.isArray(e))return e}function SA(e){var t=Ed(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function kA(e,t,r){if(e.lte(0))return new Tt(0);var a=Bx.getDigitCount(e.toNumber()),s=new Tt(10).pow(a),i=e.div(s),l=a!==1?.05:.1,o=new Tt(Math.ceil(i.div(l).toNumber())).add(r).mul(l),c=o.mul(s);return t?c:new Tt(Math.ceil(c))}function bZ(e,t,r){var a=1,s=new Tt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new Tt(10).pow(Bx.getDigitCount(e)-1),s=new Tt(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Tt(Math.floor(e)))}else e===0?s=new Tt(Math.floor((t-1)/2)):r||(s=new Tt(Math.floor(e)));var l=Math.floor((t-1)/2),o=oZ(lZ(function(c){return s.add(new Tt(c-l).mul(a)).toNumber()}),Nv);return o(0,t)}function CA(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Tt(0),tickMin:new Tt(0),tickMax:new Tt(0)};var i=kA(new Tt(t).sub(e).div(r-1),a,s),l;e<=0&&t>=0?l=new Tt(0):(l=new Tt(e).add(t).div(2),l=l.sub(new Tt(l).mod(i)));var o=Math.ceil(l.sub(e).div(i).toNumber()),c=Math.ceil(new Tt(t).sub(l).div(i).toNumber()),u=o+c+1;return u>r?CA(e,t,r,a,s+1):(u<r&&(c=t>0?c+(r-u):c,o=t>0?o:o+(r-u)),{step:i,tickMin:l.sub(new Tt(o).mul(i)),tickMax:l.add(new Tt(c).mul(i))})}function wZ(e){var t=Ed(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),o=SA([r,a]),c=Ed(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Sv(Nv(0,s-1).map(function(){return 1/0}))):[].concat(Sv(Nv(0,s-1).map(function(){return-1/0})),[d]);return r>a?jv(f):f}if(u===d)return bZ(u,s,i);var m=CA(u,d,l,i),p=m.step,y=m.tickMin,h=m.tickMax,v=Bx.rangeStep(y,h.add(new Tt(.1).mul(p)),p);return r>a?jv(v):v}function NZ(e,t){var r=Ed(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=SA([a,s]),o=Ed(l,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[a,s];if(c===u)return[c];var d=Math.max(t,2),f=kA(new Tt(u).sub(c).div(d-1),i,0),m=[].concat(Sv(Bx.rangeStep(new Tt(c),new Tt(u).sub(new Tt(.99).mul(f)),f)),[u]);return a>s?jv(m):m}var jZ=NA(wZ),SZ=NA(NZ),kZ=!0,dg="Invariant failed";function Dl(e,t){if(!e){if(kZ)throw new Error(dg);var r=typeof t=="function"?t():t,a=r?"".concat(dg,": ").concat(r):dg;throw new Error(a)}}var CZ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function uc(e){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(e)}function ah(){return ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ah.apply(this,arguments)}function _Z(e,t){return AZ(e)||TZ(e,t)||EZ(e,t)||OZ()}function OZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EZ(e,t){if(e){if(typeof e=="string")return jk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jk(e,t)}}function jk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function TZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function AZ(e){if(Array.isArray(e))return e}function PZ(e,t){if(e==null)return{};var r=DZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function DZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function IZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EA(a.key),a)}}function FZ(e,t,r){return t&&Sk(e.prototype,t),r&&Sk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MZ(e,t,r){return t=nh(t),RZ(e,_A()?Reflect.construct(t,r||[],nh(e).constructor):t.apply(e,r))}function RZ(e,t){if(t&&(uc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LZ(e)}function LZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_A=function(){return!!e})()}function nh(e){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(e)}function $Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cv(e,t)}function Cv(e,t){return Cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Cv(e,t)}function OA(e,t,r){return t=EA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EA(e){var t=BZ(e,"string");return uc(t)=="symbol"?t:t+""}function BZ(e,t){if(uc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(uc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tf=function(e){function t(){return IZ(this,t),MZ(this,t,arguments)}return $Z(t,e),FZ(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,l=a.width,o=a.dataKey,c=a.data,u=a.dataPointFormatter,d=a.xAxis,f=a.yAxis,m=PZ(a,CZ),p=ht(m,!1);this.props.direction==="x"&&d.type!=="number"&&Dl(!1);var y=c.map(function(h){var v=u(h,o),w=v.x,S=v.y,b=v.value,x=v.errorVal;if(!x)return null;var g=[],N,j;if(Array.isArray(x)){var C=_Z(x,2);N=C[0],j=C[1]}else N=j=x;if(i==="vertical"){var _=d.scale,T=S+s,E=T+l,k=T-l,A=_(b-N),P=_(b+j);g.push({x1:P,y1:E,x2:P,y2:k}),g.push({x1:A,y1:T,x2:P,y2:T}),g.push({x1:A,y1:E,x2:A,y2:k})}else if(i==="horizontal"){var F=f.scale,U=w+s,W=U-l,K=U+l,B=F(b-N),ee=F(b+j);g.push({x1:W,y1:ee,x2:K,y2:ee}),g.push({x1:U,y1:B,x2:U,y2:ee}),g.push({x1:W,y1:B,x2:K,y2:B})}return ie.createElement(dr,ah({className:"recharts-errorBar",key:"bar-".concat(g.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},p),g.map(function(oe){return ie.createElement("line",ah({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return ie.createElement(dr,{className:"recharts-errorBars"},y)}}])}(ie.Component);OA(Tf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});OA(Tf,"displayName","ErrorBar");function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Qi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(a){UZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function UZ(e,t,r){return t=WZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WZ(e){var t=qZ(e,"string");return Td(t)=="symbol"?t:t+""}function qZ(e,t){if(Td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Td(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TA=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,l=Fa(r,$o);if(!l)return null;var o=$o.defaultProps,c=o!==void 0?Qi(Qi({},o),l.props):{},u;return l.props&&l.props.payload?u=l.props&&l.props.payload:i==="children"?u=(a||[]).reduce(function(d,f){var m=f.item,p=f.props,y=p.sectors||p.data||[];return d.concat(y.map(function(h){return{type:l.props.iconType||m.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):u=(a||[]).map(function(d){var f=d.item,m=f.type.defaultProps,p=m!==void 0?Qi(Qi({},m),f.props):{},y=p.dataKey,h=p.name,v=p.legendType,w=p.hide;return{inactive:w,dataKey:y,type:c.iconType||v||"square",color:_w(f),value:h||y,payload:p}}),Qi(Qi(Qi({},c),$o.getWithHeight(l,s)),{},{payload:u,item:l})};function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function Ck(e){return HZ(e)||VZ(e)||zZ(e)||KZ()}function KZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zZ(e,t){if(e){if(typeof e=="string")return _v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _v(e,t)}}function VZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HZ(e){if(Array.isArray(e))return _v(e)}function _v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(r),!0).forEach(function(a){Uo(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Uo(e,t,r){return t=GZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GZ(e){var t=XZ(e,"string");return Ad(t)=="symbol"?t:t+""}function XZ(e,t){if(Ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ad(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(e,t,r){return ct(e)||ct(t)?r:Cr(t)?xn(e,t,r):st(t)?t(e):r}function Ru(e,t,r,a){var s=HJ(e,function(o){return za(o,t)});if(r==="number"){var i=s.filter(function(o){return Ae(o)||parseFloat(o)});return i.length?[Rx(i),Mx(i)]:[1/0,-1/0]}var l=a?s.filter(function(o){return!ct(o)}):s;return l.map(function(o){return Cr(o)||o instanceof Date?o:""})}var YZ=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(r=a==null?void 0:a.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<o;u++){var d=u>0?s[u-1].coordinate:s[o-1].coordinate,f=s[u].coordinate,m=u>=o-1?s[0].coordinate:s[u+1].coordinate,p=void 0;if(Rn(f-d)!==Rn(m-f)){var y=[];if(Rn(m-f)===Rn(c[1]-c[0])){p=m;var h=f+c[1]-c[0];y[0]=Math.min(h,(h+d)/2),y[1]=Math.max(h,(h+d)/2)}else{p=d;var v=m+c[1]-c[0];y[0]=Math.min(f,(v+f)/2),y[1]=Math.max(f,(v+f)/2)}var w=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>w[0]&&t<=w[1]||t>=y[0]&&t<=y[1]){l=s[u].index;break}}else{var S=Math.min(d,m),b=Math.max(d,m);if(t>(S+f)/2&&t<=(b+f)/2){l=s[u].index;break}}}else for(var x=0;x<o;x++)if(x===0&&t<=(a[x].coordinate+a[x+1].coordinate)/2||x>0&&x<o-1&&t>(a[x].coordinate+a[x-1].coordinate)/2&&t<=(a[x].coordinate+a[x+1].coordinate)/2||x===o-1&&t>(a[x].coordinate+a[x-1].coordinate)/2){l=a[x].index;break}return l},_w=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?rr(rr({},t.type.defaultProps),t.props):t.props,l=i.stroke,o=i.fill,c;switch(s){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},QZ=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var l={},o=Object.keys(i),c=0,u=o.length;c<u;c++)for(var d=i[o[c]].stackGroups,f=Object.keys(d),m=0,p=f.length;m<p;m++){var y=d[f[m]],h=y.items,v=y.cateAxisId,w=h.filter(function(j){return Cs(j.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,b=S!==void 0?rr(rr({},S),w[0].props):w[0].props,x=b.barSize,g=b[v];l[g]||(l[g]=[]);var N=ct(x)?r:x;l[g].push({item:w[0],stackList:w.slice(1),barSize:ct(N)?void 0:Al(N,a,0)})}}return l},JZ=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,l=i===void 0?[]:i,o=t.maxBarSize,c=l.length;if(c<1)return null;var u=Al(r,s,0,!0),d,f=[];if(l[0].barSize===+l[0].barSize){var m=!1,p=s/c,y=l.reduce(function(x,g){return x+g.barSize||0},0);y+=(c-1)*u,y>=s&&(y-=(c-1)*u,u=0),y>=s&&p>0&&(m=!0,p*=.9,y=c*p);var h=(s-y)/2>>0,v={offset:h-u,size:0};d=l.reduce(function(x,g){var N={item:g.item,position:{offset:v.offset+v.size+u,size:m?p:g.barSize}},j=[].concat(Ck(x),[N]);return v=j[j.length-1].position,g.stackList&&g.stackList.length&&g.stackList.forEach(function(C){j.push({item:C,position:v})}),j},f)}else{var w=Al(a,s,0,!0);s-2*w-(c-1)*u<=0&&(u=0);var S=(s-2*w-(c-1)*u)/c;S>1&&(S>>=0);var b=o===+o?Math.min(S,o):S;d=l.reduce(function(x,g,N){var j=[].concat(Ck(x),[{item:g.item,position:{offset:w+(S+u)*N+(S-b)/2,size:b}}]);return g.stackList&&g.stackList.length&&g.stackList.forEach(function(C){j.push({item:C,position:j[j.length-1].position})}),j},f)}return d},ZZ=function(t,r,a,s){var i=a.children,l=a.width,o=a.margin,c=l-(o.left||0)-(o.right||0),u=TA({children:i,legendWidth:c});if(u){var d=s||{},f=d.width,m=d.height,p=u.align,y=u.verticalAlign,h=u.layout;if((h==="vertical"||h==="horizontal"&&y==="middle")&&p!=="center"&&Ae(t[p]))return rr(rr({},t),{},Uo({},p,t[p]+(f||0)));if((h==="horizontal"||h==="vertical"&&p==="center")&&y!=="middle"&&Ae(t[y]))return rr(rr({},t),{},Uo({},y,t[y]+(m||0)))}return t},eee=function(t,r,a){return ct(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},AA=function(t,r,a,s,i){var l=r.props.children,o=pn(l,Tf).filter(function(u){return eee(s,i,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=za(d,a);if(ct(f))return u;var m=Array.isArray(f)?[Rx(f),Mx(f)]:[f,f],p=c.reduce(function(y,h){var v=za(d,h,0),w=m[0]-Math.abs(Array.isArray(v)?v[0]:v),S=m[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(w,y[0]),Math.max(S,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},tee=function(t,r,a,s,i){var l=r.map(function(o){return AA(t,o,a,i,s)}).filter(function(o){return!ct(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},PA=function(t,r,a,s,i){var l=r.map(function(c){var u=c.props.dataKey;return a==="number"&&u&&AA(t,c,u,s)||Ru(t,u,a,i)});if(a==="number")return l.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},DA=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},IA=function(t,r,a,s){if(s)return t.map(function(c){return c.coordinate});var i,l,o=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===a&&(l=!0),c.coordinate});return i||o.push(r),l||o.push(a),o},Ns=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,l=t.type,o=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||a)&&l==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Rn(o[0]-o[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var m=i?i.indexOf(f):f;return{coordinate:s(m)+u,value:f,offset:u}});return d.filter(function(f){return!jf(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:s(f)+u,value:f,index:m,offset:u}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+u,value:f,offset:u}}):s.domain().map(function(f,m){return{coordinate:s(f)+u,value:i?i[f]:f,index:m,offset:u}})},fg=new WeakMap,b0=function(t,r){if(typeof r!="function")return t;fg.has(t)||fg.set(t,new WeakMap);var a=fg.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},ree=function(t,r,a){var s=t.scale,i=t.type,l=t.layout,o=t.axisType;if(s==="auto")return l==="radial"&&o==="radiusAxis"?{scale:jd(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:Jm(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:Mu(),realScaleType:"point"}:i==="category"?{scale:jd(),realScaleType:"band"}:{scale:Jm(),realScaleType:"linear"};if(Tl(s)){var c="scale".concat(jx(s));return{scale:(vk[c]||Mu)(),realScaleType:vk[c]?c:"point"}}return st(s)?{scale:s}:{scale:Mu(),realScaleType:"point"}},Ok=1e-4,aee=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-Ok,l=Math.max(s[0],s[1])+Ok,o=t(r[0]),c=t(r[a-1]);(o<i||o>l||c<i||c>l)&&t.domain([r[0],r[a-1]])}},nee=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},see=function(t,r){if(!r||r.length!==2||!Ae(r[0])||!Ae(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Ae(t[0])||t[0]<a)&&(i[0]=a),(!Ae(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},iee=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,l=0,o=0;o<r;++o){var c=jf(t[o][a][1])?t[o][a][0]:t[o][a][1];c>=0?(t[o][a][0]=i,t[o][a][1]=i+c,i=t[o][a][1]):(t[o][a][0]=l,t[o][a][1]=l+c,l=t[o][a][1])}},lee=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,l=0;l<r;++l){var o=jf(t[l][a][1])?t[l][a][0]:t[l][a][1];o>=0?(t[l][a][0]=i,t[l][a][1]=i+o,i=t[l][a][1]):(t[l][a][0]=0,t[l][a][1]=0)}},oee={sign:iee,expand:CB,none:rc,silhouette:_B,wiggle:OB,positive:lee},cee=function(t,r,a){var s=r.map(function(o){return o.props.dataKey}),i=oee[a],l=kB().keys(s).value(function(o,c){return+za(o,c,0)}).order(Jy).offset(i);return l(t)},uee=function(t,r,a,s,i,l){if(!t)return null;var o=l?r.reverse():r,c={},u=o.reduce(function(f,m){var p,y=(p=m.type)!==null&&p!==void 0&&p.defaultProps?rr(rr({},m.type.defaultProps),m.props):m.props,h=y.stackId,v=y.hide;if(v)return f;var w=y[a],S=f[w]||{hasStack:!1,stackGroups:{}};if(Cr(h)){var b=S.stackGroups[h]||{numericAxisId:a,cateAxisId:s,items:[]};b.items.push(m),S.hasStack=!0,S.stackGroups[h]=b}else S.stackGroups[Sf("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[m]};return rr(rr({},f),{},Uo({},w,S))},c),d={};return Object.keys(u).reduce(function(f,m){var p=u[m];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(h,v){var w=p.stackGroups[v];return rr(rr({},h),{},Uo({},v,{numericAxisId:a,cateAxisId:s,items:w.items,stackedData:cee(t,w.items,i)}))},y)}return rr(rr({},f),{},Uo({},m,p))},d)},dee=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,l=r.originalDomain,o=r.allowDecimals,c=a||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=jZ(u,i,o);return t.domain([Rx(d),Mx(d)]),{niceTicks:d}}if(i&&s==="number"){var f=t.domain(),m=SZ(f,i,o);return{niceTicks:m}}return null};function Ek(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ct(s[t.dataKey])){var o=Em(r,"value",s[t.dataKey]);if(o)return o.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=za(s,ct(l)?t.dataKey:l);return ct(c)?null:t.scale(c)}var Tk=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,l=t.entry,o=t.index;if(r.type==="category")return a[o]?a[o].coordinate+s:null;var c=za(l,r.dataKey,r.domain[o]);return ct(c)?null:r.scale(c)-i/2+s},fee=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},mee=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?rr(rr({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Cr(i)){var l=r[i];if(l){var o=l.items.indexOf(t);return o>=0?l.stackedData[o]:null}}return null},hee=function(t){return t.reduce(function(r,a){return[Rx(a.concat([r[0]]).filter(Ae)),Mx(a.concat([r[1]]).filter(Ae))]},[1/0,-1/0])},FA=function(t,r,a){return Object.keys(t).reduce(function(s,i){var l=t[i],o=l.stackedData,c=o.reduce(function(u,d){var f=hee(d.slice(r,a+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},Ak=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ov=function(t,r,a){if(st(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(Ae(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(Ak.test(t[0])){var i=+Ak.exec(t[0])[1];s[0]=r[0]-i}else st(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Ae(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(Pk.test(t[1])){var l=+Pk.exec(t[1])[1];s[1]=r[1]+l}else st(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},sh=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=tw(r,function(f){return f.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var u=i[o],d=i[o-1];l=Math.min((u.coordinate||0)-(d.coordinate||0),l)}return l===1/0?0:l}return a?void 0:0},Dk=function(t,r,a){return!t||!t.length||Lx(t,xn(a,"type.defaultProps.domain"))?r:t},MA=function(t,r){var a=t.type.defaultProps?rr(rr({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,l=a.unit,o=a.formatter,c=a.tooltipType,u=a.chartType,d=a.hide;return rr(rr({},ht(t,!1)),{},{dataKey:s,unit:l,formatter:o,name:i||s,color:_w(t),value:za(r,s),type:c,payload:r,chartType:u,hide:d})};function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}function Ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ik(Object(r),!0).forEach(function(a){xee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ik(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xee(e,t,r){return t=pee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pee(e){var t=gee(e,"string");return Pd(t)=="symbol"?t:t+""}function gee(e,t){if(Pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Pd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ih=Math.PI/180,yee=function(t){return t*180/Math.PI},Vr=function(t,r,a,s){return{x:t+Math.cos(-ih*s)*a,y:r+Math.sin(-ih*s)*a}},vee=function(t,r){var a=t.x,s=t.y,i=r.x,l=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-l,2))},bee=function(t,r){var a=t.x,s=t.y,i=r.cx,l=r.cy,o=vee({x:a,y:s},{x:i,y:l});if(o<=0)return{radius:o};var c=(a-i)/o,u=Math.acos(c);return s>l&&(u=2*Math.PI-u),{radius:o,angle:yee(u),angleInRadian:u}},wee=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),l=Math.min(s,i);return{startAngle:r-l*360,endAngle:a-l*360}},Nee=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),l=Math.floor(s/360),o=Math.min(i,l);return t+o*360},Mk=function(t,r){var a=t.x,s=t.y,i=bee({x:a,y:s},r),l=i.radius,o=i.angle,c=r.innerRadius,u=r.outerRadius;if(l<c||l>u)return!1;if(l===0)return!0;var d=wee(r),f=d.startAngle,m=d.endAngle,p=o,y;if(f<=m){for(;p>m;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=m}else{for(;p>f;)p-=360;for(;p<m;)p+=360;y=p>=m&&p<=f}return y?Fk(Fk({},r),{},{radius:l,angle:Nee(p,r)}):null};function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}var jee=["offset"];function See(e){return Oee(e)||_ee(e)||Cee(e)||kee()}function kee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cee(e,t){if(e){if(typeof e=="string")return Ev(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ev(e,t)}}function _ee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Oee(e){if(Array.isArray(e))return Ev(e)}function Ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Eee(e,t){if(e==null)return{};var r=Tee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Tee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(a){Aee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Aee(e,t,r){return t=Pee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pee(e){var t=Dee(e,"string");return Dd(t)=="symbol"?t:t+""}function Dee(e,t){if(Dd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Dd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Id(){return Id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Id.apply(this,arguments)}var Iee=function(t){var r=t.value,a=t.formatter,s=ct(t.children)?r:t.children;return st(a)?a(s):s},Fee=function(t,r){var a=Rn(r-t),s=Math.min(Math.abs(r-t),360);return a*s},Mee=function(t,r,a){var s=t.position,i=t.viewBox,l=t.offset,o=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,m=c.outerRadius,p=c.startAngle,y=c.endAngle,h=c.clockWise,v=(f+m)/2,w=Fee(p,y),S=w>=0?1:-1,b,x;s==="insideStart"?(b=p+S*l,x=h):s==="insideEnd"?(b=y-S*l,x=!h):s==="end"&&(b=y+S*l,x=h),x=w<=0?x:!x;var g=Vr(u,d,v,b),N=Vr(u,d,v,b+(x?1:-1)*359),j="M".concat(g.x,",").concat(g.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(x?0:1,`,
    `).concat(N.x,",").concat(N.y),C=ct(t.id)?Sf("recharts-radial-line-"):t.id;return ie.createElement("text",Id({},a,{dominantBaseline:"central",className:vt("recharts-radial-bar-label",o)}),ie.createElement("defs",null,ie.createElement("path",{id:C,d:j})),ie.createElement("textPath",{xlinkHref:"#".concat(C)},r))},Ree=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,l=i.cx,o=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,m=(d+f)/2;if(s==="outside"){var p=Vr(l,o,u+a,m),y=p.x,h=p.y;return{x:y,y:h,textAnchor:y>=l?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,w=Vr(l,o,v,m),S=w.x,b=w.y;return{x:S,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Lee=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,l=r,o=l.x,c=l.y,u=l.width,d=l.height,f=d>=0?1:-1,m=f*s,p=f>0?"end":"start",y=f>0?"start":"end",h=u>=0?1:-1,v=h*s,w=h>0?"end":"start",S=h>0?"start":"end";if(i==="top"){var b={x:o+u/2,y:c-f*s,textAnchor:"middle",verticalAnchor:p};return Nr(Nr({},b),a?{height:Math.max(c-a.y,0),width:u}:{})}if(i==="bottom"){var x={x:o+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:y};return Nr(Nr({},x),a?{height:Math.max(a.y+a.height-(c+d),0),width:u}:{})}if(i==="left"){var g={x:o-v,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Nr(Nr({},g),a?{width:Math.max(g.x-a.x,0),height:d}:{})}if(i==="right"){var N={x:o+u+v,y:c+d/2,textAnchor:S,verticalAnchor:"middle"};return Nr(Nr({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:d}:{})}var j=a?{width:u,height:d}:{};return i==="insideLeft"?Nr({x:o+v,y:c+d/2,textAnchor:S,verticalAnchor:"middle"},j):i==="insideRight"?Nr({x:o+u-v,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},j):i==="insideTop"?Nr({x:o+u/2,y:c+m,textAnchor:"middle",verticalAnchor:y},j):i==="insideBottom"?Nr({x:o+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:p},j):i==="insideTopLeft"?Nr({x:o+v,y:c+m,textAnchor:S,verticalAnchor:y},j):i==="insideTopRight"?Nr({x:o+u-v,y:c+m,textAnchor:w,verticalAnchor:y},j):i==="insideBottomLeft"?Nr({x:o+v,y:c+d-m,textAnchor:S,verticalAnchor:p},j):i==="insideBottomRight"?Nr({x:o+u-v,y:c+d-m,textAnchor:w,verticalAnchor:p},j):Dc(i)&&(Ae(i.x)||cl(i.x))&&(Ae(i.y)||cl(i.y))?Nr({x:o+Al(i.x,u),y:c+Al(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):Nr({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},$ee=function(t){return"cx"in t&&Ae(t.cx)};function aa(e){var t=e.offset,r=t===void 0?5:t,a=Eee(e,jee),s=Nr({offset:r},a),i=s.viewBox,l=s.position,o=s.value,c=s.children,u=s.content,d=s.className,f=d===void 0?"":d,m=s.textBreakAll;if(!i||ct(o)&&ct(c)&&!O.isValidElement(u)&&!st(u))return null;if(O.isValidElement(u))return O.cloneElement(u,s);var p;if(st(u)){if(p=O.createElement(u,s),O.isValidElement(p))return p}else p=Iee(s);var y=$ee(i),h=ht(s,!0);if(y&&(l==="insideStart"||l==="insideEnd"||l==="end"))return Mee(s,p,h);var v=y?Ree(s):Lee(s);return ie.createElement(zm,Id({className:vt("recharts-label",f)},h,v,{breakAll:m}),p)}aa.displayName="Label";var RA=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,l=t.endAngle,o=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,m=t.y,p=t.top,y=t.left,h=t.width,v=t.height,w=t.clockWise,S=t.labelViewBox;if(S)return S;if(Ae(h)&&Ae(v)){if(Ae(f)&&Ae(m))return{x:f,y:m,width:h,height:v};if(Ae(p)&&Ae(y))return{x:p,y,width:h,height:v}}return Ae(f)&&Ae(m)?{x:f,y:m,width:0,height:0}:Ae(r)&&Ae(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:l||s||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:w}:t.viewBox?t.viewBox:{}},Bee=function(t,r){return t?t===!0?ie.createElement(aa,{key:"label-implicit",viewBox:r}):Cr(t)?ie.createElement(aa,{key:"label-implicit",viewBox:r,value:t}):O.isValidElement(t)?t.type===aa?O.cloneElement(t,{key:"label-implicit",viewBox:r}):ie.createElement(aa,{key:"label-implicit",content:t,viewBox:r}):st(t)?ie.createElement(aa,{key:"label-implicit",content:t,viewBox:r}):Dc(t)?ie.createElement(aa,Id({viewBox:r},t,{key:"label-implicit"})):null:null},Uee=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=RA(t),l=pn(s,aa).map(function(c,u){return O.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!a)return l;var o=Bee(t.label,r||i);return[o].concat(See(l))};aa.parseViewBox=RA;aa.renderCallByParent=Uee;function Wee(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var qee=Wee;const Kee=Ft(qee);function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}var zee=["valueAccessor"],Vee=["data","dataKey","clockWise","id","textBreakAll"];function Hee(e){return Qee(e)||Yee(e)||Xee(e)||Gee()}function Gee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xee(e,t){if(e){if(typeof e=="string")return Tv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tv(e,t)}}function Yee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qee(e){if(Array.isArray(e))return Tv(e)}function Tv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lh.apply(this,arguments)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(a){Jee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jee(e,t,r){return t=Zee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zee(e){var t=ete(e,"string");return Fd(t)=="symbol"?t:t+""}function ete(e,t){if(Fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Fd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bk(e,t){if(e==null)return{};var r=tte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var rte=function(t){return Array.isArray(t.value)?Kee(t.value):t.value};function ji(e){var t=e.valueAccessor,r=t===void 0?rte:t,a=Bk(e,zee),s=a.data,i=a.dataKey,l=a.clockWise,o=a.id,c=a.textBreakAll,u=Bk(a,Vee);return!s||!s.length?null:ie.createElement(dr,{className:"recharts-label-list"},s.map(function(d,f){var m=ct(i)?r(d,f):za(d&&d.payload,i),p=ct(o)?{}:{id:"".concat(o,"-").concat(f)};return ie.createElement(aa,lh({},ht(d,!0),u,p,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:aa.parseViewBox(ct(l)?d:$k($k({},d),{},{clockWise:l})),key:"label-".concat(f),index:f}))}))}ji.displayName="LabelList";function ate(e,t){return e?e===!0?ie.createElement(ji,{key:"labelList-implicit",data:t}):ie.isValidElement(e)||st(e)?ie.createElement(ji,{key:"labelList-implicit",data:t,content:e}):Dc(e)?ie.createElement(ji,lh({data:t},e,{key:"labelList-implicit"})):null:null}function nte(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=pn(a,ji).map(function(l,o){return O.cloneElement(l,{data:t,key:"labelList-".concat(o)})});if(!r)return s;var i=ate(e.label,t);return[i].concat(Hee(s))}ji.renderCallByParent=nte;function Md(e){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Md(e)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Av.apply(this,arguments)}function Uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Wk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(r),!0).forEach(function(a){ste(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ste(e,t,r){return t=ite(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ite(e){var t=lte(e,"string");return Md(t)=="symbol"?t:t+""}function lte(e,t){if(Md(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Md(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ote=function(t,r){var a=Rn(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},w0=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,l=t.sign,o=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(o?1:-1)+s,f=Math.asin(c/d)/ih,m=u?i:i+l*f,p=Vr(r,a,d,m),y=Vr(r,a,s,m),h=u?i-l*f:i,v=Vr(r,a,d*Math.cos(f*ih),h);return{center:p,circleTangency:y,lineTangency:v,theta:f}},LA=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,l=t.startAngle,o=t.endAngle,c=ote(l,o),u=l+c,d=Vr(r,a,i,l),f=Vr(r,a,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var p=Vr(r,a,s,l),y=Vr(r,a,s,u);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(a," Z");return m},cte=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,l=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Rn(d-u),m=w0({cx:r,cy:a,radius:i,angle:u,sign:f,cornerRadius:l,cornerIsExternal:c}),p=m.circleTangency,y=m.lineTangency,h=m.theta,v=w0({cx:r,cy:a,radius:i,angle:d,sign:-f,cornerRadius:l,cornerIsExternal:c}),w=v.circleTangency,S=v.lineTangency,b=v.theta,x=c?Math.abs(u-d):Math.abs(u-d)-h-b;if(x<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):LA({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d});var g="M ".concat(y.x,",").concat(y.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,`
  `);if(s>0){var N=w0({cx:r,cy:a,radius:s,angle:u,sign:f,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),j=N.circleTangency,C=N.lineTangency,_=N.theta,T=w0({cx:r,cy:a,radius:s,angle:d,sign:-f,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),E=T.circleTangency,k=T.lineTangency,A=T.theta,P=c?Math.abs(u-d):Math.abs(u-d)-_-A;if(P<0&&l===0)return"".concat(g,"L").concat(r,",").concat(a,"Z");g+="L".concat(k.x,",").concat(k.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else g+="L".concat(r,",").concat(a,"Z");return g},ute={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$A=function(t){var r=Wk(Wk({},ute),t),a=r.cx,s=r.cy,i=r.innerRadius,l=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,m=r.className;if(l<i||d===f)return null;var p=vt("recharts-sector",m),y=l-i,h=Al(o,y,0,!0),v;return h>0&&Math.abs(d-f)<360?v=cte({cx:a,cy:s,innerRadius:i,outerRadius:l,cornerRadius:Math.min(h,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=LA({cx:a,cy:s,innerRadius:i,outerRadius:l,startAngle:d,endAngle:f}),ie.createElement("path",Av({},ht(r,!0),{className:p,d:v,role:"img"}))};function Rd(e){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Pv.apply(this,arguments)}function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(a){dte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dte(e,t,r){return t=fte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fte(e){var t=mte(e,"string");return Rd(t)=="symbol"?t:t+""}function mte(e,t){if(Rd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Rd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zk={curveBasisClosed:hB,curveBasisOpen:xB,curveBasis:mB,curveBumpX:Z9,curveBumpY:eB,curveLinearClosed:pB,curveLinear:kx,curveMonotoneX:gB,curveMonotoneY:yB,curveNatural:vB,curveStep:bB,curveStepAfter:NB,curveStepBefore:wB},N0=function(t){return t.x===+t.x&&t.y===+t.y},du=function(t){return t.x},fu=function(t){return t.y},hte=function(t,r){if(st(t))return t;var a="curve".concat(jx(t));return(a==="curveMonotone"||a==="curveBump")&&r?zk["".concat(a).concat(r==="vertical"?"Y":"X")]:zk[a]||kx},xte=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,l=t.baseLine,o=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=hte(a,o),f=u?i.filter(function(h){return N0(h)}):i,m;if(Array.isArray(l)){var p=u?l.filter(function(h){return N0(h)}):l,y=f.map(function(h,v){return Kk(Kk({},h),{},{base:p[v]})});return o==="vertical"?m=f0().y(fu).x1(du).x0(function(h){return h.base.x}):m=f0().x(du).y1(fu).y0(function(h){return h.base.y}),m.defined(N0).curve(d),m(y)}return o==="vertical"&&Ae(l)?m=f0().y(fu).x1(du).x0(l):Ae(l)?m=f0().x(du).y1(fu).y0(l):m=$T().x(du).y(fu),m.defined(N0).curve(d),m(f)},Dv=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var l=a&&a.length?xte(t):s;return O.createElement("path",Pv({},ht(t,!1),Tm(t),{className:vt("recharts-curve",r),d:l,ref:i}))},BA={exports:{}},pte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gte=pte,yte=gte;function UA(){}function WA(){}WA.resetWarningCache=UA;var vte=function(){function e(a,s,i,l,o,c){if(c!==yte){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WA,resetWarningCache:UA};return r.PropTypes=r,r};BA.exports=vte();var bte=BA.exports;const jt=Ft(bte);var wte=Object.getOwnPropertyNames,Nte=Object.getOwnPropertySymbols,jte=Object.prototype.hasOwnProperty;function Vk(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function j0(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);var i=s.cache,l=i.get(r),o=i.get(a);if(l&&o)return l===a&&o===r;i.set(r,a),i.set(a,r);var c=e(r,a,s);return i.delete(r),i.delete(a),c}}function Hk(e){return wte(e).concat(Nte(e))}var Ste=Object.hasOwn||function(e,t){return jte.call(e,t)};function Gl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var kte="__v",Cte="__o",_te="_owner",Gk=Object.getOwnPropertyDescriptor,Xk=Object.keys;function Ote(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Ete(e,t){return Gl(e.getTime(),t.getTime())}function Tte(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Ate(e,t){return e===t}function Yk(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var u=t.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(s[f]){f++;continue}var m=l.value,p=o.value;if(r.equals(m[0],p[0],c,f,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1;c++}return!0}var Pte=Gl;function Dte(e,t,r){var a=Xk(e),s=a.length;if(Xk(t).length!==s)return!1;for(;s-- >0;)if(!qA(e,t,r,a[s]))return!1;return!0}function mu(e,t,r){var a=Hk(e),s=a.length;if(Hk(t).length!==s)return!1;for(var i,l,o;s-- >0;)if(i=a[s],!qA(e,t,r,i)||(l=Gk(e,i),o=Gk(t,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function Ite(e,t){return Gl(e.valueOf(),t.valueOf())}function Fte(e,t){return e.source===t.source&&e.flags===t.flags}function Qk(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),l,o;(l=i.next())&&!l.done;){for(var c=t.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!s[d]&&r.equals(l.value,o.value,l.value,o.value,e,t,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function Mte(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Rte(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function qA(e,t,r,a){return(a===_te||a===Cte||a===kte)&&(e.$$typeof||t.$$typeof)?!0:Ste(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}var Lte="[object Arguments]",$te="[object Boolean]",Bte="[object Date]",Ute="[object Error]",Wte="[object Map]",qte="[object Number]",Kte="[object Object]",zte="[object RegExp]",Vte="[object Set]",Hte="[object String]",Gte="[object URL]",Xte=Array.isArray,Jk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Zk=Object.assign,Yte=Object.prototype.toString.call.bind(Object.prototype.toString);function Qte(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,o=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(y,h,v){if(y===h)return!0;if(y==null||h==null)return!1;var w=typeof y;if(w!==typeof h)return!1;if(w!=="object")return w==="number"?l(y,h,v):w==="function"?s(y,h,v):!1;var S=y.constructor;if(S!==h.constructor)return!1;if(S===Object)return o(y,h,v);if(Xte(y))return t(y,h,v);if(Jk!=null&&Jk(y))return f(y,h,v);if(S===Date)return r(y,h,v);if(S===RegExp)return u(y,h,v);if(S===Map)return i(y,h,v);if(S===Set)return d(y,h,v);var b=Yte(y);return b===Bte?r(y,h,v):b===zte?u(y,h,v):b===Wte?i(y,h,v):b===Vte?d(y,h,v):b===Kte?typeof y.then!="function"&&typeof h.then!="function"&&o(y,h,v):b===Gte?m(y,h,v):b===Ute?a(y,h,v):b===Lte?o(y,h,v):b===$te||b===qte||b===Hte?c(y,h,v):!1}}function Jte(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?mu:Ote,areDatesEqual:Ete,areErrorsEqual:Tte,areFunctionsEqual:Ate,areMapsEqual:a?Vk(Yk,mu):Yk,areNumbersEqual:Pte,areObjectsEqual:a?mu:Dte,arePrimitiveWrappersEqual:Ite,areRegExpsEqual:Fte,areSetsEqual:a?Vk(Qk,mu):Qk,areTypedArraysEqual:a?mu:Mte,areUrlsEqual:Rte};if(r&&(s=Zk({},s,r(s))),t){var i=j0(s.areArraysEqual),l=j0(s.areMapsEqual),o=j0(s.areObjectsEqual),c=j0(s.areSetsEqual);s=Zk({},s,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return s}function Zte(e){return function(t,r,a,s,i,l,o){return e(t,r,o)}}function ere(e){var t=e.circular,r=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(c,u){var d=a(),f=d.cache,m=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return r(c,u,{cache:m,equals:s,meta:p,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var l={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,u){return r(c,u,l)}}var tre=Wi();Wi({strict:!0});Wi({circular:!0});Wi({circular:!0,strict:!0});Wi({createInternalComparator:function(){return Gl}});Wi({strict:!0,createInternalComparator:function(){return Gl}});Wi({circular:!0,createInternalComparator:function(){return Gl}});Wi({circular:!0,createInternalComparator:function(){return Gl},strict:!0});function Wi(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,s=e.createState,i=e.strict,l=i===void 0?!1:i,o=Jte(e),c=Qte(o),u=a?a(c):Zte(c);return ere({circular:r,comparator:c,createState:s,equals:u,strict:l})}function rre(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function eC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):rre(s)};requestAnimationFrame(a)}function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}function are(e){return lre(e)||ire(e)||sre(e)||nre()}function nre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sre(e,t){if(e){if(typeof e=="string")return tC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tC(e,t)}}function tC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ire(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lre(e){if(Array.isArray(e))return e}function ore(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var l=i,o=are(l),c=o[0],u=o.slice(1);if(typeof c=="number"){eC(s.bind(null,u),c);return}s(c),eC(s.bind(null,u));return}Iv(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function rC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function aC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(r),!0).forEach(function(a){KA(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KA(e,t,r){return t=cre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cre(e){var t=ure(e,"string");return Ld(t)==="symbol"?t:String(t)}function ure(e,t){if(Ld(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ld(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dre=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},fre=function(t){return t},mre=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Lu=function(t,r){return Object.keys(r).reduce(function(a,s){return aC(aC({},a),{},KA({},s,t(s,r[s])))},{})},nC=function(t,r,a){return t.map(function(s){return"".concat(mre(s)," ").concat(r,"ms ").concat(a)}).join(",")};function hre(e,t){return gre(e)||pre(e,t)||zA(e,t)||xre()}function xre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function gre(e){if(Array.isArray(e))return e}function yre(e){return wre(e)||bre(e)||zA(e)||vre()}function vre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zA(e,t){if(e){if(typeof e=="string")return Fv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fv(e,t)}}function bre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wre(e){if(Array.isArray(e))return Fv(e)}function Fv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var oh=1e-4,VA=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},HA=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},sC=function(t,r){return function(a){var s=VA(t,r);return HA(s,a)}},Nre=function(t,r){return function(a){var s=VA(t,r),i=[].concat(yre(s.map(function(l,o){return l*o}).slice(1)),[0]);return HA(i,a)}},iC=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],l=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,l=1,o=1;break;case"ease":s=.25,i=.1,l=.25,o=1;break;case"ease-in":s=.42,i=0,l=1,o=1;break;case"ease-out":s=.42,i=0,l=.58,o=1;break;case"ease-in-out":s=0,i=0,l=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=hre(u,4);s=d[0],i=d[1],l=d[2],o=d[3]}}}var f=sC(s,l),m=sC(i,o),p=Nre(s,l),y=function(w){return w>1?1:w<0?0:w},h=function(w){for(var S=w>1?1:w,b=S,x=0;x<8;++x){var g=f(b)-S,N=p(b);if(Math.abs(g-S)<oh||N<oh)return m(b);b=y(b-g/N)}return m(b)};return h.isStepper=!1,h},jre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,l=t.dt,o=l===void 0?17:l,c=function(d,f,m){var p=-(d-f)*a,y=m*i,h=m+(p-y)*o/1e3,v=m*o/1e3+d;return Math.abs(v-f)<oh&&Math.abs(h)<oh?[f,0]:[v,h]};return c.isStepper=!0,c.dt=o,c},Sre=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return iC(s);case"spring":return jre();default:if(s.split("(")[0]==="cubic-bezier")return iC(s)}return typeof s=="function"?s:null};function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}function lC(e){return _re(e)||Cre(e)||GA(e)||kre()}function kre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _re(e){if(Array.isArray(e))return Rv(e)}function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(a){Mv(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Mv(e,t,r){return t=Ore(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ore(e){var t=Ere(e,"string");return $d(t)==="symbol"?t:String(t)}function Ere(e,t){if($d(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if($d(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tre(e,t){return Dre(e)||Pre(e,t)||GA(e,t)||Are()}function Are(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GA(e,t){if(e){if(typeof e=="string")return Rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rv(e,t)}}function Rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Pre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function Dre(e){if(Array.isArray(e))return e}var ch=function(t,r,a){return t+(r-t)*a},Lv=function(t){var r=t.from,a=t.to;return r!==a},Ire=function e(t,r,a){var s=Lu(function(i,l){if(Lv(l)){var o=t(l.from,l.to,l.velocity),c=Tre(o,2),u=c[0],d=c[1];return Wr(Wr({},l),{},{from:u,velocity:d})}return l},r);return a<1?Lu(function(i,l){return Lv(l)?Wr(Wr({},l),{},{velocity:ch(l.velocity,s[i].velocity,a),from:ch(l.from,s[i].from,a)}):l},r):e(t,s,a-1)};const Fre=function(e,t,r,a,s){var i=dre(e,t),l=i.reduce(function(v,w){return Wr(Wr({},v),{},Mv({},w,[e[w],t[w]]))},{}),o=i.reduce(function(v,w){return Wr(Wr({},v),{},Mv({},w,{from:e[w],velocity:0,to:t[w]}))},{}),c=-1,u,d,f=function(){return null},m=function(){return Lu(function(w,S){return S.from},o)},p=function(){return!Object.values(o).filter(Lv).length},y=function(w){u||(u=w);var S=w-u,b=S/r.dt;o=Ire(r,o,b),s(Wr(Wr(Wr({},e),t),m())),u=w,p()||(c=requestAnimationFrame(f))},h=function(w){d||(d=w);var S=(w-d)/a,b=Lu(function(g,N){return ch.apply(void 0,lC(N).concat([r(S)]))},l);if(s(Wr(Wr(Wr({},e),t),b)),S<1)c=requestAnimationFrame(f);else{var x=Lu(function(g,N){return ch.apply(void 0,lC(N).concat([r(1)]))},l);s(Wr(Wr(Wr({},e),t),x))}};return f=r.isStepper?y:h,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}var Mre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Rre(e,t){if(e==null)return{};var r=Lre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Lre(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function mg(e){return Wre(e)||Ure(e)||Bre(e)||$re()}function $re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(e,t){if(e){if(typeof e=="string")return $v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $v(e,t)}}function Ure(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wre(e){if(Array.isArray(e))return $v(e)}function $v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(a){Nu(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nu(e,t,r){return t=XA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,XA(a.key),a)}}function Kre(e,t,r){return t&&uC(e.prototype,t),r&&uC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XA(e){var t=zre(e,"string");return dc(t)==="symbol"?t:String(t)}function zre(e,t){if(dc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(dc(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bv(e,t)}function Bv(e,t){return Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Bv(e,t)}function Hre(e){var t=Gre();return function(){var a=uh(e),s;if(t){var i=uh(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return Uv(this,s)}}function Uv(e,t){if(t&&(dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wv(e)}function Wv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uh(e){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uh(e)}var Ux=function(e){Vre(r,e);var t=Hre(r);function r(a,s){var i;qre(this,r),i=t.call(this,a,s);var l=i.props,o=l.isActive,c=l.attributeName,u=l.from,d=l.to,f=l.steps,m=l.children,p=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Wv(i)),i.changeStyle=i.changeStyle.bind(Wv(i)),!o||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),Uv(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof m=="function")return i.state={style:u},Uv(i);i.state={style:c?Nu({},c,u):u}}else i.state={style:{}};return i}return Kre(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,l=s.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,m=this.state.style;if(o){if(!l){var p={style:c?Nu({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(p);return}if(!(tre(s.to,d)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=y||u?f:s.to;if(this.state&&m){var v={style:c?Nu({},c,h):h};(c&&m[c]!==h||!c&&m!==h)&&this.setState(v)}this.runAnimation(_n(_n({},this.props),{},{from:h,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,l=s.from,o=s.to,c=s.duration,u=s.easing,d=s.begin,f=s.onAnimationEnd,m=s.onAnimationStart,p=Fre(l,o,Sre(u),c,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([m,d,y,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,l=s.steps,o=s.begin,c=s.onAnimationStart,u=l[0],d=u.style,f=u.duration,m=f===void 0?0:f,p=function(h,v,w){if(w===0)return h;var S=v.duration,b=v.easing,x=b===void 0?"ease":b,g=v.style,N=v.properties,j=v.onAnimationEnd,C=w>0?l[w-1]:v,_=N||Object.keys(g);if(typeof x=="function"||x==="spring")return[].concat(mg(h),[i.runJSAnimation.bind(i,{from:C.style,to:g,duration:S,easing:x}),S]);var T=nC(_,S,x),E=_n(_n(_n({},C.style),g),{},{transition:T});return[].concat(mg(h),[E,S,j]).filter(fre)};return this.manager.start([c].concat(mg(l.reduce(p,[d,Math.max(m,o)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=ore());var i=s.begin,l=s.duration,o=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,f=s.onAnimationEnd,m=s.steps,p=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var h=o?Nu({},o,c):c,v=nC(Object.keys(h),l,u);y.start([d,i,_n(_n({},h),{},{transition:v}),l,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var l=s.duration;s.attributeName,s.easing;var o=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Rre(s,Mre),u=O.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!o||u===0||l<=0)return i;var f=function(p){var y=p.props,h=y.style,v=h===void 0?{}:h,w=y.className,S=O.cloneElement(p,_n(_n({},c),{},{style:_n(_n({},v),d),className:w}));return S};return u===1?f(O.Children.only(i)):ie.createElement("div",null,O.Children.map(i,function(m){return f(m)}))}}]),r}(O.PureComponent);Ux.displayName="Animate";Ux.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ux.propTypes={from:jt.oneOfType([jt.object,jt.string]),to:jt.oneOfType([jt.object,jt.string]),attributeName:jt.string,duration:jt.number,begin:jt.number,easing:jt.oneOfType([jt.string,jt.func]),steps:jt.arrayOf(jt.shape({duration:jt.number.isRequired,style:jt.object.isRequired,easing:jt.oneOfType([jt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),jt.func]),properties:jt.arrayOf("string"),onAnimationEnd:jt.func})),children:jt.oneOfType([jt.node,jt.func]),isActive:jt.bool,canBegin:jt.bool,onAnimationEnd:jt.func,shouldReAnimate:jt.bool,onAnimationStart:jt.func,onAnimationReStart:jt.func};const fc=Ux;function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function dh(){return dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dh.apply(this,arguments)}function Xre(e,t){return Zre(e)||Jre(e,t)||Qre(e,t)||Yre()}function Yre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qre(e,t){if(e){if(typeof e=="string")return dC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dC(e,t)}}function dC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Jre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function Zre(e){if(Array.isArray(e))return e}function fC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(r),!0).forEach(function(a){eae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eae(e,t,r){return t=tae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tae(e){var t=rae(e,"string");return Bd(t)=="symbol"?t:t+""}function rae(e,t){if(Bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Bd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hC=function(t,r,a,s,i){var l=Math.min(Math.abs(a)/2,Math.abs(s)/2),o=s>=0?1:-1,c=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,d;if(l>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,p=4;m<p;m++)f[m]=i[m]>l?l:i[m];d="M".concat(t,",").concat(r+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+a-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+a,",").concat(r+o*f[1])),d+="L ".concat(t+a,",").concat(r+s-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+a-c*f[2],",").concat(r+s)),d+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-o*f[3])),d+="Z"}else if(l>0&&i===+i&&i>0){var y=Math.min(l,i);d="M ".concat(t,",").concat(r+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+a-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+a,",").concat(r+o*y,`
            L `).concat(t+a,",").concat(r+s-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+a-c*y,",").concat(r+s,`
            L `).concat(t+c*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+s-o*y," Z")}else d="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return d},aae=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,l=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(i,i+o),d=Math.max(i,i+o),f=Math.min(l,l+c),m=Math.max(l,l+c);return a>=u&&a<=d&&s>=f&&s<=m}return!1},nae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ow=function(t){var r=mC(mC({},nae),t),a=O.useRef(),s=O.useState(-1),i=Xre(s,2),l=i[0],o=i[1];O.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var x=a.current.getTotalLength();x&&o(x)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,m=r.radius,p=r.className,y=r.animationEasing,h=r.animationDuration,v=r.animationBegin,w=r.isAnimationActive,S=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=vt("recharts-rectangle",p);return S?ie.createElement(fc,{canBegin:l>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:h,animationEasing:y,isActive:S},function(x){var g=x.width,N=x.height,j=x.x,C=x.y;return ie.createElement(fc,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:h,isActive:w,easing:y},ie.createElement("path",dh({},ht(r,!0),{className:b,d:hC(j,C,g,N,m),ref:a})))}):ie.createElement("path",dh({},ht(r,!0),{className:b,d:hC(c,u,d,f,m)}))};function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qv.apply(this,arguments)}var Ew=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,l=vt("recharts-dot",i);return r===+r&&a===+a&&s===+s?O.createElement("circle",qv({},ht(t,!1),Tm(t),{className:l,cx:r,cy:a,r:s})):null};function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}var sae=["x","y","top","left","width","height","className"];function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Kv.apply(this,arguments)}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function iae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(a){lae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lae(e,t,r){return t=oae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oae(e){var t=cae(e,"string");return Ud(t)=="symbol"?t:t+""}function cae(e,t){if(Ud(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Ud(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uae(e,t){if(e==null)return{};var r=dae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function dae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var fae=function(t,r,a,s,i,l){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(l,",").concat(r,"h").concat(a)},mae=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,l=t.top,o=l===void 0?0:l,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,m=t.height,p=m===void 0?0:m,y=t.className,h=uae(t,sae),v=iae({x:a,y:i,top:o,left:u,width:f,height:p},h);return!Ae(a)||!Ae(i)||!Ae(f)||!Ae(p)||!Ae(o)||!Ae(u)?null:ie.createElement("path",Kv({},ht(v,!0),{className:vt("recharts-cross",y),d:fae(a,i,f,p,o,u)}))},hae=c3,xae=hae(Object.getPrototypeOf,Object),pae=xae,gae=Ws,yae=pae,vae=qs,bae="[object Object]",wae=Function.prototype,Nae=Object.prototype,YA=wae.toString,jae=Nae.hasOwnProperty,Sae=YA.call(Object);function kae(e){if(!vae(e)||gae(e)!=bae)return!1;var t=yae(e);if(t===null)return!0;var r=jae.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&YA.call(r)==Sae}var Cae=kae;const _ae=Ft(Cae);var Oae=Ws,Eae=qs,Tae="[object Boolean]";function Aae(e){return e===!0||e===!1||Eae(e)&&Oae(e)==Tae}var Pae=Aae;const Dae=Ft(Pae);function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fh.apply(this,arguments)}function Iae(e,t){return Lae(e)||Rae(e,t)||Mae(e,t)||Fae()}function Fae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mae(e,t){if(e){if(typeof e=="string")return pC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pC(e,t)}}function pC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Rae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function Lae(e){if(Array.isArray(e))return e}function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(a){$ae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $ae(e,t,r){return t=Bae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bae(e){var t=Uae(e,"string");return Wd(t)=="symbol"?t:t+""}function Uae(e,t){if(Wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Wd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vC=function(t,r,a,s,i){var l=a-s,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+a,",").concat(r),o+="L ".concat(t+a-l/2,",").concat(r+i),o+="L ".concat(t+a-l/2-s,",").concat(r+i),o+="L ".concat(t,",").concat(r," Z"),o},Wae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qae=function(t){var r=yC(yC({},Wae),t),a=O.useRef(),s=O.useState(-1),i=Iae(s,2),l=i[0],o=i[1];O.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var b=a.current.getTotalLength();b&&o(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,m=r.height,p=r.className,y=r.animationEasing,h=r.animationDuration,v=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var S=vt("recharts-trapezoid",p);return w?ie.createElement(fc,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:m,x:c,y:u},duration:h,animationEasing:y,isActive:w},function(b){var x=b.upperWidth,g=b.lowerWidth,N=b.height,j=b.x,C=b.y;return ie.createElement(fc,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:h,easing:y},ie.createElement("path",fh({},ht(r,!0),{className:S,d:vC(j,C,x,g,N),ref:a})))}):ie.createElement("g",null,ie.createElement("path",fh({},ht(r,!0),{className:S,d:vC(c,u,d,f,m)})))},Kae=["option","shapeType","propTransformer","activeClassName","isActive"];function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function zae(e,t){if(e==null)return{};var r=Vae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Vae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(a){Hae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hae(e,t,r){return t=Gae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gae(e){var t=Xae(e,"string");return qd(t)=="symbol"?t:t+""}function Xae(e,t){if(qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(qd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yae(e,t){return mh(mh({},t),e)}function Qae(e,t){return e==="symbols"}function wC(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ie.createElement(Ow,r);case"trapezoid":return ie.createElement(qae,r);case"sector":return ie.createElement($A,r);case"symbols":if(Qae(t))return ie.createElement(Hb,r);break;default:return null}}function Jae(e){return O.isValidElement(e)?e.props:e}function Zae(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?Yae:a,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,o=e.isActive,c=zae(e,Kae),u;if(O.isValidElement(t))u=O.cloneElement(t,mh(mh({},c),Jae(t)));else if(st(t))u=t(c);else if(_ae(t)&&!Dae(t)){var d=s(t,c);u=ie.createElement(wC,{shapeType:r,elementProps:d})}else{var f=c;u=ie.createElement(wC,{shapeType:r,elementProps:f})}return o?ie.createElement(dr,{className:l},u):u}function Wx(e,t){return t!=null&&"trapezoids"in e.props}function qx(e,t){return t!=null&&"sectors"in e.props}function Kd(e,t){return t!=null&&"points"in e.props}function ene(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function tne(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function rne(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function ane(e,t){var r;return Wx(e,t)?r=ene:qx(e,t)?r=tne:Kd(e,t)&&(r=rne),r}function nne(e,t){var r;return Wx(e,t)?r="trapezoids":qx(e,t)?r="sectors":Kd(e,t)&&(r="points"),r}function sne(e,t){if(Wx(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(qx(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Kd(e,t)?t.payload:{}}function ine(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=nne(r,t),i=sne(r,t),l=a.filter(function(c,u){var d=Lx(i,c),f=r.props[s].filter(function(y){var h=ane(r,t);return h(y,t)}),m=r.props[s].indexOf(f[f.length-1]),p=u===m;return d&&p}),o=a.indexOf(l[l.length-1]);return o}var lne=Math.ceil,one=Math.max;function cne(e,t,r,a){for(var s=-1,i=one(lne((t-e)/(r||1)),0),l=Array(i);i--;)l[a?i:++s]=e,e+=r;return l}var une=cne,dne=O3,NC=1/0,fne=17976931348623157e292;function mne(e){if(!e)return e===0?e:0;if(e=dne(e),e===NC||e===-NC){var t=e<0?-1:1;return t*fne}return e===e?e:0}var QA=mne,hne=une,xne=Ex,hg=QA;function pne(e){return function(t,r,a){return a&&typeof a!="number"&&xne(t,r,a)&&(r=a=void 0),t=hg(t),r===void 0?(r=t,t=0):r=hg(r),a=a===void 0?t<r?1:-1:hg(a),hne(t,r,a,e)}}var gne=pne,yne=gne,vne=yne(),bne=vne;const hh=Ft(bne);function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function SC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(a){JA(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JA(e,t,r){return t=wne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wne(e){var t=Nne(e,"string");return zd(t)=="symbol"?t:t+""}function Nne(e,t){if(zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(zd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jne=["Webkit","Moz","O","ms"],Sne=function(t,r){if(!t)return null;var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=jne.reduce(function(i,l){return SC(SC({},i),{},JA({},l+a,r))},{});return s[t]=r,s};function mc(e){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(e)}function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xh.apply(this,arguments)}function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(a){Da(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,eP(a.key),a)}}function Cne(e,t,r){return t&&CC(e.prototype,t),r&&CC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ne(e,t,r){return t=ph(t),One(e,ZA()?Reflect.construct(t,r||[],ph(e).constructor):t.apply(e,r))}function One(e,t){if(t&&(mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ene(e)}function Ene(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZA=function(){return!!e})()}function ph(e){return ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ph(e)}function Tne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zv(e,t)}function zv(e,t){return zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},zv(e,t)}function Da(e,t,r){return t=eP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eP(e){var t=Ane(e,"string");return mc(t)=="symbol"?t:t+""}function Ane(e,t){if(mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(mc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pne=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,l=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Mu().domain(hh(0,c)).range([i,i+l-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(s),scale:u,scaleValues:d}},_C=function(t){return t.changedTouches&&!!t.changedTouches.length},hc=function(e){function t(r){var a;return kne(this,t),a=_ne(this,t,[r]),Da(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),Da(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),Da(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,l=s.onDragEnd,o=s.startIndex;l==null||l({endIndex:i,startIndex:o})}),a.detachDragEndListener()}),Da(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Da(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Da(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Da(a,"handleSlideDragStart",function(s){var i=_C(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return Tne(t,e),Cne(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,l=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,f=Math.min(s,i),m=Math.max(s,i),p=t.getIndexInRange(l,f),y=t.getIndexInRange(l,m);return{startIndex:p-p%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,l=s.tickFormatter,o=s.dataKey,c=za(i[a],o,a);return st(l)?l(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,l=s.startX,o=s.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,m=c.startIndex,p=c.endIndex,y=c.onChange,h=a.pageX-i;h>0?h=Math.min(h,u+d-f-o,u+d-f-l):h<0&&(h=Math.max(h,u-l,u-o));var v=this.getIndex({startX:l+h,endX:o+h});(v.startIndex!==m||v.endIndex!==p)&&y&&y(v),this.setState({startX:l+h,endX:o+h,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=_C(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,l=s.movingTravellerId,o=s.endX,c=s.startX,u=this.state[l],d=this.props,f=d.x,m=d.width,p=d.travellerWidth,y=d.onChange,h=d.gap,v=d.data,w={startX:this.state.startX,endX:this.state.endX},S=a.pageX-i;S>0?S=Math.min(S,f+m-p-u):S<0&&(S=Math.max(S,f-u)),w[l]=u+S;var b=this.getIndex(w),x=b.startIndex,g=b.endIndex,N=function(){var C=v.length-1;return l==="startX"&&(o>c?x%h===0:g%h===0)||o<c&&g===C||l==="endX"&&(o>c?g%h===0:x%h===0)||o>c&&g===C};this.setState(Da(Da({},l,u+S),"brushMoveStartX",a.pageX),function(){y&&N()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,l=this.state,o=l.scaleValues,c=l.startX,u=l.endX,d=this.state[s],f=o.indexOf(d);if(f!==-1){var m=f+a;if(!(m===-1||m>=o.length)){var p=o[m];s==="startX"&&p>=u||s==="endX"&&p<=c||this.setState(Da({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,o=a.height,c=a.fill,u=a.stroke;return ie.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,o=a.height,c=a.data,u=a.children,d=a.padding,f=O.Children.only(u);return f?ie.cloneElement(f,{x:s,y:i,width:l,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,l,o=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,m=c.traveller,p=c.ariaLabel,y=c.data,h=c.startIndex,v=c.endIndex,w=Math.max(a,this.props.x),S=xg(xg({},ht(this.props,!1)),{},{x:w,y:u,width:d,height:f}),b=p||"Min value: ".concat((i=y[h])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=y[v])===null||l===void 0?void 0:l.name);return ie.createElement(dr,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(g){["ArrowLeft","ArrowRight"].includes(g.key)&&(g.preventDefault(),g.stopPropagation(),o.handleTravellerMoveKeyboard(g.key==="ArrowRight"?1:-1,s))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,S))}},{key:"renderSlide",value:function(a,s){var i=this.props,l=i.y,o=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(a,s)+u,f=Math.max(Math.abs(s-a)-u,0);return ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:l,width:f,height:o})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,l=a.y,o=a.height,c=a.travellerWidth,u=a.stroke,d=this.state,f=d.startX,m=d.endX,p=5,y={pointerEvents:"none",fill:u};return ie.createElement(dr,{className:"recharts-brush-texts"},ie.createElement(zm,xh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-p,y:l+o/2},y),this.getTextOfTick(s)),ie.createElement(zm,xh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+p,y:l+o/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,l=a.children,o=a.x,c=a.y,u=a.width,d=a.height,f=a.alwaysShowText,m=this.state,p=m.startX,y=m.endX,h=m.isTextActive,v=m.isSlideMoving,w=m.isTravellerMoving,S=m.isTravellerFocused;if(!s||!s.length||!Ae(o)||!Ae(c)||!Ae(u)||!Ae(d)||u<=0||d<=0)return null;var b=vt("recharts-brush",i),x=ie.Children.count(l)===1,g=Sne("userSelect","none");return ie.createElement(dr,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:g},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(h||v||w||S||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,l=a.width,o=a.height,c=a.stroke,u=Math.floor(i+o/2)-1;return ie.createElement(ie.Fragment,null,ie.createElement("rect",{x:s,y:i,width:l,height:o,fill:c,stroke:"none"}),ie.createElement("line",{x1:s+1,y1:u,x2:s+l-1,y2:u,fill:"none",stroke:"#fff"}),ie.createElement("line",{x1:s+1,y1:u+2,x2:s+l-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return ie.isValidElement(a)?i=ie.cloneElement(a,s):st(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,l=a.width,o=a.x,c=a.travellerWidth,u=a.updateId,d=a.startIndex,f=a.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return xg({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:l},i&&i.length?Pne({data:i,width:l,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(l!==s.prevWidth||o!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([o,o+l-c]);var m=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:l,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);a[c]>s?o=c:l=c}return s>=a[o]?o:l}}])}(O.PureComponent);Da(hc,"displayName","Brush");Da(hc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Dne=ew;function Ine(e,t){var r;return Dne(e,function(a,s,i){return r=t(a,s,i),!r}),!!r}var Fne=Ine,Mne=t3,Rne=$i,Lne=Fne,$ne=Aa,Bne=Ex;function Une(e,t,r){var a=$ne(e)?Mne:Lne;return r&&Bne(e,t,r)&&(t=void 0),a(e,Rne(t))}var Wne=Une;const qne=Ft(Wne);var rs=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},OC=j3;function Kne(e,t,r){t=="__proto__"&&OC?OC(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var zne=Kne,Vne=zne,Hne=w3,Gne=$i;function Xne(e,t){var r={};return t=Gne(t),Hne(e,function(a,s,i){Vne(r,s,t(a,s,i))}),r}var Yne=Xne;const Qne=Ft(Yne);function Jne(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(!t(e[r],r,e))return!1;return!0}var Zne=Jne,ese=ew;function tse(e,t){var r=!0;return ese(e,function(a,s,i){return r=!!t(a,s,i),r}),r}var rse=tse,ase=Zne,nse=rse,sse=$i,ise=Aa,lse=Ex;function ose(e,t,r){var a=ise(e)?ase:nse;return r&&lse(e,t,r)&&(t=void 0),a(e,sse(t))}var cse=ose;const tP=Ft(cse);var use=["x","y"];function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vv.apply(this,arguments)}function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(a){dse(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dse(e,t,r){return t=fse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fse(e){var t=mse(e,"string");return Vd(t)=="symbol"?t:t+""}function mse(e,t){if(Vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Vd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hse(e,t){if(e==null)return{};var r=xse(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xse(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function pse(e,t){var r=e.x,a=e.y,s=hse(e,use),i="".concat(r),l=parseInt(i,10),o="".concat(a),c=parseInt(o,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),m=parseInt(f,10);return hu(hu(hu(hu(hu({},t),s),l?{x:l}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function TC(e){return ie.createElement(Zae,Vv({shapeType:"rectangle",propTransformer:pse,activeClassName:"recharts-active-bar"},e))}var gse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=Ae(a)||L7(a);return i?t(a,s):(i||Dl(!1),r)}},yse=["value","background"],rP;function xc(e){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(e)}function vse(e,t){if(e==null)return{};var r=bse(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bse(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function gh(){return gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gh.apply(this,arguments)}function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(a){oi(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,nP(a.key),a)}}function Nse(e,t,r){return t&&PC(e.prototype,t),r&&PC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jse(e,t,r){return t=yh(t),Sse(e,aP()?Reflect.construct(t,r||[],yh(e).constructor):t.apply(e,r))}function Sse(e,t){if(t&&(xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kse(e)}function kse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aP=function(){return!!e})()}function yh(e){return yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yh(e)}function Cse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hv(e,t)}function Hv(e,t){return Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Hv(e,t)}function oi(e,t,r){return t=nP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nP(e){var t=_se(e,"string");return xc(t)=="symbol"?t:t+""}function _se(e,t){if(xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(xc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Af=function(e){function t(){var r;wse(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=jse(this,t,[].concat(s)),oi(r,"state",{isAnimationFinished:!1}),oi(r,"id",Sf("recharts-bar-")),oi(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),oi(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return Cse(t,e),Nse(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,u=i.activeBar,d=ht(this.props,!1);return a&&a.map(function(f,m){var p=m===c,y=p?u:l,h=xr(xr(xr({},d),f),{},{isActive:p,option:y,index:m,dataKey:o,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ie.createElement(dr,gh({className:"recharts-bar-rectangle"},Am(s.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),ie.createElement(TC,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,l=s.layout,o=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,m=this.state.prevData;return ie.createElement(fc,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,h=i.map(function(v,w){var S=m&&m[w];if(S){var b=In(S.x,v.x),x=In(S.y,v.y),g=In(S.width,v.width),N=In(S.height,v.height);return xr(xr({},v),{},{x:b(y),y:x(y),width:g(y),height:N(y)})}if(l==="horizontal"){var j=In(0,v.height),C=j(y);return xr(xr({},v),{},{y:v.y+v.height-C,height:C})}var _=In(0,v.width),T=_(y);return xr(xr({},v),{},{width:T})});return ie.createElement(dr,null,a.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,l=this.state.prevData;return i&&s&&s.length&&(!l||!Lx(l,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,l=s.dataKey,o=s.activeIndex,c=ht(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,m=vse(u,yse);if(!f)return null;var p=xr(xr(xr(xr(xr({},m),{},{fill:"#eee"},f),c),Am(a.props,u,d)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:l,index:d,className:"recharts-bar-background-rectangle"});return ie.createElement(TC,gh({key:"background-bar-".concat(d),option:a.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=pn(d,Tf);if(!f)return null;var m=u==="vertical"?l[0].height/2:l[0].width/2,p=function(v,w){var S=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:S,errorVal:za(v,w)}},y={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ie.createElement(dr,y,f.map(function(h){return ie.cloneElement(h,{key:"error-bar-".concat(s,"-").concat(h.props.dataKey),data:l,xAxis:o,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,l=a.className,o=a.xAxis,c=a.yAxis,u=a.left,d=a.top,f=a.width,m=a.height,p=a.isAnimationActive,y=a.background,h=a.id;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,w=vt("recharts-bar",l),S=o&&o.allowDataOverflow,b=c&&c.allowDataOverflow,x=S||b,g=ct(h)?this.id:h;return ie.createElement(dr,{className:w},S||b?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(g)},ie.createElement("rect",{x:S?u:u-f/2,y:b?d:d-m/2,width:S?f:f*2,height:b?m:m*2}))):null,ie.createElement(dr,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(g,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,g),(!p||v)&&ji.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])}(O.PureComponent);rP=Af;oi(Af,"displayName","Bar");oi(Af,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Os.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});oi(Af,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,l=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,p=nee(a,r);if(!p)return null;var y=t.layout,h=r.type.defaultProps,v=h!==void 0?xr(xr({},h),r.props):r.props,w=v.dataKey,S=v.children,b=v.minPointSize,x=y==="horizontal"?l:i,g=u?x.scale.domain():null,N=fee({numericAxis:x}),j=pn(S,T3),C=f.map(function(_,T){var E,k,A,P,F,U;u?E=see(u[d+T],g):(E=za(_,w),Array.isArray(E)||(E=[N,E]));var W=gse(b,rP.defaultProps.minPointSize)(E[1],T);if(y==="horizontal"){var K,B=[l.scale(E[0]),l.scale(E[1])],ee=B[0],oe=B[1];k=Tk({axis:i,ticks:o,bandSize:s,offset:p.offset,entry:_,index:T}),A=(K=oe??ee)!==null&&K!==void 0?K:void 0,P=p.size;var R=ee-oe;if(F=Number.isNaN(R)?0:R,U={x:k,y:l.y,width:P,height:l.height},Math.abs(W)>0&&Math.abs(F)<Math.abs(W)){var V=Rn(F||W)*(Math.abs(W)-Math.abs(F));A-=V,F+=V}}else{var X=[i.scale(E[0]),i.scale(E[1])],J=X[0],Z=X[1];if(k=J,A=Tk({axis:l,ticks:c,bandSize:s,offset:p.offset,entry:_,index:T}),P=Z-J,F=p.size,U={x:i.x,y:A,width:i.width,height:F},Math.abs(W)>0&&Math.abs(P)<Math.abs(W)){var le=Rn(P||W)*(Math.abs(W)-Math.abs(P));P+=le}}return xr(xr(xr({},_),{},{x:k,y:A,width:P,height:F,value:u?E:E[1],payload:_,background:U},j&&j[T]&&j[T].props),{},{tooltipPayload:[MA(r,_)],tooltipPosition:{x:k+P/2,y:A+F/2}})});return xr({data:C,layout:y},m)});function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function Ose(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sP(a.key),a)}}function Ese(e,t,r){return t&&DC(e.prototype,t),r&&DC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(a){Kx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kx(e,t,r){return t=sP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sP(e){var t=Tse(e,"string");return Hd(t)=="symbol"?t:t+""}function Tse(e,t){if(Hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Hd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ase=function(t,r,a,s,i){var l=t.width,o=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:a.left,leftMirror:a.left,right:l-a.right,rightMirror:l-a.right,top:a.top,topMirror:a.top,bottom:o-a.bottom,bottomMirror:o-a.bottom},m=!!Fa(u,Af);return d.reduce(function(p,y){var h=r[y],v=h.orientation,w=h.domain,S=h.padding,b=S===void 0?{}:S,x=h.mirror,g=h.reversed,N="".concat(v).concat(x?"Mirror":""),j,C,_,T,E;if(h.type==="number"&&(h.padding==="gap"||h.padding==="no-gap")){var k=w[1]-w[0],A=1/0,P=h.categoricalDomain.sort(U7);if(P.forEach(function(X,J){J>0&&(A=Math.min((X||0)-(P[J-1]||0),A))}),Number.isFinite(A)){var F=A/k,U=h.layout==="vertical"?a.height:a.width;if(h.padding==="gap"&&(j=F*U/2),h.padding==="no-gap"){var W=Al(t.barCategoryGap,F*U),K=F*U/2;j=K-W-(K-W)/U*W}}}s==="xAxis"?C=[a.left+(b.left||0)+(j||0),a.left+a.width-(b.right||0)-(j||0)]:s==="yAxis"?C=c==="horizontal"?[a.top+a.height-(b.bottom||0),a.top+(b.top||0)]:[a.top+(b.top||0)+(j||0),a.top+a.height-(b.bottom||0)-(j||0)]:C=h.range,g&&(C=[C[1],C[0]]);var B=ree(h,i,m),ee=B.scale,oe=B.realScaleType;ee.domain(w).range(C),aee(ee);var R=dee(ee,An(An({},h),{},{realScaleType:oe}));s==="xAxis"?(E=v==="top"&&!x||v==="bottom"&&x,_=a.left,T=f[N]-E*h.height):s==="yAxis"&&(E=v==="left"&&!x||v==="right"&&x,_=f[N]-E*h.width,T=a.top);var V=An(An(An({},h),R),{},{realScaleType:oe,x:_,y:T,scale:ee,width:s==="xAxis"?a.width:h.width,height:s==="yAxis"?a.height:h.height});return V.bandSize=sh(V,R),!h.hide&&s==="xAxis"?f[N]+=(E?-1:1)*V.height:h.hide||(f[N]+=(E?-1:1)*V.width),An(An({},p),{},Kx({},y,V))},{})},iP=function(t,r){var a=t.x,s=t.y,i=r.x,l=r.y;return{x:Math.min(a,i),y:Math.min(s,l),width:Math.abs(i-a),height:Math.abs(l-s)}},Pse=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return iP({x:r,y:a},{x:s,y:i})},lP=function(){function e(t){Ose(this,e),this.scale=t}return Ese(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();Kx(lP,"EPS",1e-4);var Tw=function(t){var r=Object.keys(t).reduce(function(a,s){return An(An({},a),{},Kx({},s,lP.create(t[s])))},{});return An(An({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return Qne(s,function(c,u){return r[u].apply(c,{bandAware:l,position:o})})},isInRange:function(s){return tP(s,function(i,l){return r[l].isInRange(i)})}})};function Dse(e){return(e%180+180)%180}var Ise=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Dse(s),l=i*Math.PI/180,o=Math.atan(a/r),c=l>o&&l<Math.PI-o?a/Math.sin(l):r/Math.cos(l);return Math.abs(c)},Fse=$i,Mse=kf,Rse=_x;function Lse(e){return function(t,r,a){var s=Object(t);if(!Mse(t)){var i=Fse(r);t=Rse(t),r=function(o){return i(s[o],o,s)}}var l=e(t,r,a);return l>-1?s[i?t[l]:l]:void 0}}var $se=Lse,Bse=QA;function Use(e){var t=Bse(e),r=t%1;return t===t?r?t-r:t:0}var Wse=Use,qse=x3,Kse=$i,zse=Wse,Vse=Math.max;function Hse(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var s=r==null?0:zse(r);return s<0&&(s=Vse(a+s,0)),qse(e,Kse(t),s)}var Gse=Hse,Xse=$se,Yse=Gse,Qse=Xse(Yse),Jse=Qse;const Zse=Ft(Jse);var eie=W$(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Aw=O.createContext(void 0),Pw=O.createContext(void 0),oP=O.createContext(void 0),cP=O.createContext({}),uP=O.createContext(void 0),dP=O.createContext(0),fP=O.createContext(0),FC=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,l=t.clipPathId,o=t.children,c=t.width,u=t.height,d=eie(i);return ie.createElement(Aw.Provider,{value:a},ie.createElement(Pw.Provider,{value:s},ie.createElement(cP.Provider,{value:i},ie.createElement(oP.Provider,{value:d},ie.createElement(uP.Provider,{value:l},ie.createElement(dP.Provider,{value:u},ie.createElement(fP.Provider,{value:c},o)))))))},tie=function(){return O.useContext(uP)},mP=function(t){var r=O.useContext(Aw);r==null&&Dl(!1);var a=r[t];return a==null&&Dl(!1),a},rie=function(){var t=O.useContext(Aw);return ni(t)},aie=function(){var t=O.useContext(Pw),r=Zse(t,function(a){return tP(a.domain,Number.isFinite)});return r||ni(t)},hP=function(t){var r=O.useContext(Pw);r==null&&Dl(!1);var a=r[t];return a==null&&Dl(!1),a},nie=function(){var t=O.useContext(oP);return t},sie=function(){return O.useContext(cP)},Dw=function(){return O.useContext(fP)},Iw=function(){return O.useContext(dP)};function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}function iie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pP(a.key),a)}}function lie(e,t,r){return t&&MC(e.prototype,t),r&&MC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oie(e,t,r){return t=vh(t),cie(e,xP()?Reflect.construct(t,r||[],vh(e).constructor):t.apply(e,r))}function cie(e,t){if(t&&(pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uie(e)}function uie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xP=function(){return!!e})()}function vh(e){return vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vh(e)}function die(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gv(e,t)}function Gv(e,t){return Gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Gv(e,t)}function RC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function LC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RC(Object(r),!0).forEach(function(a){Fw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fw(e,t,r){return t=pP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pP(e){var t=fie(e,"string");return pc(t)=="symbol"?t:t+""}function fie(e,t){if(pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(pc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mie(e,t){return gie(e)||pie(e,t)||xie(e,t)||hie()}function hie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xie(e,t){if(e){if(typeof e=="string")return $C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $C(e,t)}}function $C(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function gie(e){if(Array.isArray(e))return e}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xv.apply(this,arguments)}var yie=function(t,r){var a;return ie.isValidElement(t)?a=ie.cloneElement(t,r):st(t)?a=t(r):a=ie.createElement("line",Xv({},r,{className:"recharts-reference-line-line"})),a},vie=function(t,r,a,s,i,l,o,c,u){var d=i.x,f=i.y,m=i.width,p=i.height;if(a){var y=u.y,h=t.y.apply(y,{position:l});if(rs(u,"discard")&&!t.y.isInRange(h))return null;var v=[{x:d+m,y:h},{x:d,y:h}];return c==="left"?v.reverse():v}if(r){var w=u.x,S=t.x.apply(w,{position:l});if(rs(u,"discard")&&!t.x.isInRange(S))return null;var b=[{x:S,y:f+p},{x:S,y:f}];return o==="top"?b.reverse():b}if(s){var x=u.segment,g=x.map(function(N){return t.apply(N,{position:l})});return rs(u,"discard")&&qne(g,function(N){return!t.isInRange(N)})?null:g}return null};function bie(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,l=e.shape,o=e.className,c=e.alwaysShow,u=tie(),d=mP(s),f=hP(i),m=nie();if(!u||!m)return null;_s(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Tw({x:d.scale,y:f.scale}),y=Cr(t),h=Cr(r),v=a&&a.length===2,w=vie(p,y,h,v,m,e.position,d.orientation,f.orientation,e);if(!w)return null;var S=mie(w,2),b=S[0],x=b.x,g=b.y,N=S[1],j=N.x,C=N.y,_=rs(e,"hidden")?"url(#".concat(u,")"):void 0,T=LC(LC({clipPath:_},ht(e,!0)),{},{x1:x,y1:g,x2:j,y2:C});return ie.createElement(dr,{className:vt("recharts-reference-line",o)},yie(l,T),aa.renderCallByParent(e,Pse({x1:x,y1:g,x2:j,y2:C})))}var Mw=function(e){function t(){return iie(this,t),oie(this,t,arguments)}return die(t,e),lie(t,[{key:"render",value:function(){return ie.createElement(bie,this.props)}}])}(ie.Component);Fw(Mw,"displayName","ReferenceLine");Fw(Mw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yv.apply(this,arguments)}function gc(e){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(e)}function BC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(r),!0).forEach(function(a){zx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yP(a.key),a)}}function Nie(e,t,r){return t&&WC(e.prototype,t),r&&WC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jie(e,t,r){return t=bh(t),Sie(e,gP()?Reflect.construct(t,r||[],bh(e).constructor):t.apply(e,r))}function Sie(e,t){if(t&&(gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kie(e)}function kie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gP=function(){return!!e})()}function bh(e){return bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bh(e)}function Cie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qv(e,t)}function Qv(e,t){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Qv(e,t)}function zx(e,t,r){return t=yP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yP(e){var t=_ie(e,"string");return gc(t)=="symbol"?t:t+""}function _ie(e,t){if(gc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(gc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oie=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,l=Tw({x:s.scale,y:i.scale}),o=l.apply({x:r,y:a},{bandAware:!0});return rs(t,"discard")&&!l.isInRange(o)?null:o},Vx=function(e){function t(){return wie(this,t),jie(this,t,arguments)}return Cie(t,e),Nie(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,l=a.r,o=a.alwaysShow,c=a.clipPathId,u=Cr(s),d=Cr(i);if(_s(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=Oie(this.props);if(!f)return null;var m=f.x,p=f.y,y=this.props,h=y.shape,v=y.className,w=rs(this.props,"hidden")?"url(#".concat(c,")"):void 0,S=UC(UC({clipPath:w},ht(this.props,!0)),{},{cx:m,cy:p});return ie.createElement(dr,{className:vt("recharts-reference-dot",v)},t.renderDot(h,S),aa.renderCallByParent(this.props,{x:m-l,y:p-l,width:2*l,height:2*l}))}}])}(ie.Component);zx(Vx,"displayName","ReferenceDot");zx(Vx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});zx(Vx,"renderDot",function(e,t){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,t):st(e)?r=e(t):r=ie.createElement(Ew,Yv({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jv.apply(this,arguments)}function yc(e){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yc(e)}function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function KC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(a){Hx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Eie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bP(a.key),a)}}function Tie(e,t,r){return t&&zC(e.prototype,t),r&&zC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aie(e,t,r){return t=wh(t),Pie(e,vP()?Reflect.construct(t,r||[],wh(e).constructor):t.apply(e,r))}function Pie(e,t){if(t&&(yc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Die(e)}function Die(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vP=function(){return!!e})()}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wh(e)}function Iie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Zv(e,t)}function Hx(e,t,r){return t=bP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bP(e){var t=Fie(e,"string");return yc(t)=="symbol"?t:t+""}function Fie(e,t){if(yc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(yc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mie=function(t,r,a,s,i){var l=i.x1,o=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var m=Tw({x:d.scale,y:f.scale}),p={x:t?m.x.apply(l,{position:"start"}):m.x.rangeMin,y:a?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(o,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return rs(i,"discard")&&(!m.isInRange(p)||!m.isInRange(y))?null:iP(p,y)},Gx=function(e){function t(){return Eie(this,t),Aie(this,t,arguments)}return Iie(t,e),Tie(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,l=a.y1,o=a.y2,c=a.className,u=a.alwaysShow,d=a.clipPathId;_s(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Cr(s),m=Cr(i),p=Cr(l),y=Cr(o),h=this.props.shape;if(!f&&!m&&!p&&!y&&!h)return null;var v=Mie(f,m,p,y,this.props);if(!v&&!h)return null;var w=rs(this.props,"hidden")?"url(#".concat(d,")"):void 0;return ie.createElement(dr,{className:vt("recharts-reference-area",c)},t.renderRect(h,KC(KC({clipPath:w},ht(this.props,!0)),v)),aa.renderCallByParent(this.props,v))}}])}(ie.Component);Hx(Gx,"displayName","ReferenceArea");Hx(Gx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Hx(Gx,"renderRect",function(e,t){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,t):st(e)?r=e(t):r=ie.createElement(Ow,Jv({},t,{className:"recharts-reference-area-rect"})),r});function wP(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)if(r===void 0||r(e[s])===!0)a.push(e[s]);else return;return a}function Rie(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return Ise(a,r)}function Lie(e,t,r){var a=r==="width",s=e.x,i=e.y,l=e.width,o=e.height;return t===1?{start:a?s:i,end:a?s+l:i+o}:{start:a?s+l:i+o,end:a?s:i}}function Nh(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function $ie(e,t){return wP(e,t+1)}function Bie(e,t,r,a,s){for(var i=(a||[]).slice(),l=t.start,o=t.end,c=0,u=1,d=l,f=function(){var y=a==null?void 0:a[c];if(y===void 0)return{v:wP(a,u)};var h=c,v,w=function(){return v===void 0&&(v=r(y,h)),v},S=y.coordinate,b=c===0||Nh(e,S,w,d,o);b||(c=0,d=l,u+=1),b&&(d=S+e*(w()/2+s),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function VC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(r),!0).forEach(function(a){Uie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Uie(e,t,r){return t=Wie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wie(e){var t=qie(e,"string");return Gd(t)=="symbol"?t:t+""}function qie(e,t){if(Gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Gd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kie(e,t,r,a,s){for(var i=(a||[]).slice(),l=i.length,o=t.start,c=t.end,u=function(m){var p=i[m],y,h=function(){return y===void 0&&(y=r(p,m)),y};if(m===l-1){var v=e*(p.coordinate+e*h()/2-c);i[m]=p=Zr(Zr({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else i[m]=p=Zr(Zr({},p),{},{tickCoord:p.coordinate});var w=Nh(e,p.tickCoord,h,o,c);w&&(c=p.tickCoord-e*(h()/2+s),i[m]=Zr(Zr({},p),{},{isShow:!0}))},d=l-1;d>=0;d--)u(d);return i}function zie(e,t,r,a,s,i){var l=(a||[]).slice(),o=l.length,c=t.start,u=t.end;if(i){var d=a[o-1],f=r(d,o-1),m=e*(d.coordinate+e*f/2-u);l[o-1]=d=Zr(Zr({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=Nh(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+s),l[o-1]=Zr(Zr({},d),{},{isShow:!0}))}for(var y=i?o-1:o,h=function(S){var b=l[S],x,g=function(){return x===void 0&&(x=r(b,S)),x};if(S===0){var N=e*(b.coordinate-e*g()/2-c);l[S]=b=Zr(Zr({},b),{},{tickCoord:N<0?b.coordinate-N*e:b.coordinate})}else l[S]=b=Zr(Zr({},b),{},{tickCoord:b.coordinate});var j=Nh(e,b.tickCoord,g,c,u);j&&(c=b.tickCoord+e*(g()/2+s),l[S]=Zr(Zr({},b),{},{isShow:!0}))},v=0;v<y;v++)h(v);return l}function Rw(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,l=e.minTickGap,o=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(Ae(c)||Os.isSsr)return $ie(s,typeof c=="number"&&Ae(c)?c:0);var m=[],p=o==="top"||o==="bottom"?"width":"height",y=d&&p==="width"?Fu(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},h=function(b,x){var g=st(u)?u(b.value,x):b.value;return p==="width"?Rie(Fu(g,{fontSize:t,letterSpacing:r}),y,f):Fu(g,{fontSize:t,letterSpacing:r})[p]},v=s.length>=2?Rn(s[1].coordinate-s[0].coordinate):1,w=Lie(i,v,p);return c==="equidistantPreserveStart"?Bie(v,w,h,s,l):(c==="preserveStart"||c==="preserveStartEnd"?m=zie(v,w,h,s,l,c==="preserveStartEnd"):m=Kie(v,w,h,s,l),m.filter(function(S){return S.isShow}))}var Vie=["viewBox"],Hie=["viewBox"],Gie=["ticks"];function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Oo.apply(this,arguments)}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(a){Lw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pg(e,t){if(e==null)return{};var r=Xie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Xie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Yie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,jP(a.key),a)}}function Qie(e,t,r){return t&&GC(e.prototype,t),r&&GC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jie(e,t,r){return t=jh(t),Zie(e,NP()?Reflect.construct(t,r||[],jh(e).constructor):t.apply(e,r))}function Zie(e,t){if(t&&(vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ele(e)}function ele(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NP=function(){return!!e})()}function jh(e){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jh(e)}function tle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e1(e,t)}function e1(e,t){return e1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e1(e,t)}function Lw(e,t,r){return t=jP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jP(e){var t=rle(e,"string");return vc(t)=="symbol"?t:t+""}function rle(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(vc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qc=function(e){function t(r){var a;return Yie(this,t),a=Jie(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return tle(t,e),Qie(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,l=pg(a,Vie),o=this.props,c=o.viewBox,u=pg(o,Hie);return!Lo(i,c)||!Lo(l,u)||!Lo(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,l=s.y,o=s.width,c=s.height,u=s.orientation,d=s.tickSize,f=s.mirror,m=s.tickMargin,p,y,h,v,w,S,b=f?-1:1,x=a.tickSize||d,g=Ae(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":p=y=a.coordinate,v=l+ +!f*c,h=v-b*x,S=h-b*m,w=g;break;case"left":h=v=a.coordinate,y=i+ +!f*o,p=y-b*x,w=p-b*m,S=g;break;case"right":h=v=a.coordinate,y=i+ +f*o,p=y+b*x,w=p+b*m,S=g;break;default:p=y=a.coordinate,v=l+ +f*c,h=v+b*x,S=h+b*m,w=g;break}return{line:{x1:p,y1:h,x2:y,y2:v},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l;switch(s){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l="end";switch(s){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,o=a.height,c=a.orientation,u=a.mirror,d=a.axisLine,f=wr(wr(wr({},ht(this.props,!1)),ht(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);f=wr(wr({},f),{},{x1:s,y1:i+m*o,x2:s+l,y2:i+m*o})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=wr(wr({},f),{},{x1:s+p*l,y1:i,x2:s+p*l,y2:i+o})}return ie.createElement("line",Oo({},f,{className:vt("recharts-cartesian-axis-line",xn(d,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var l=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,m=o.unit,p=Rw(wr(wr({},this.props),{},{ticks:a}),s,i),y=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),v=ht(this.props,!1),w=ht(d,!1),S=wr(wr({},v),{},{fill:"none"},ht(c,!1)),b=p.map(function(x,g){var N=l.getTickLineCoord(x),j=N.line,C=N.tick,_=wr(wr(wr(wr({textAnchor:y,verticalAnchor:h},v),{},{stroke:"none",fill:u},w),C),{},{index:g,payload:x,visibleTicksCount:p.length,tickFormatter:f});return ie.createElement(dr,Oo({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},Am(l.props,x,g)),c&&ie.createElement("line",Oo({},S,j,{className:vt("recharts-cartesian-axis-tick-line",xn(c,"className"))})),d&&t.renderTickItem(d,_,"".concat(st(f)?f(x.value,g):x.value).concat(m||"")))});return ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,l=s.width,o=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var f=this.props,m=f.ticks,p=pg(f,Gie),y=m;return st(c)&&(y=m&&m.length>0?c(this.props):c(p)),l<=0||o<=0||!y||!y.length?null:ie.createElement(dr,{className:vt("recharts-cartesian-axis",u),ref:function(v){a.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),aa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var l,o=vt(s.className,"recharts-cartesian-axis-tick-value");return ie.isValidElement(a)?l=ie.cloneElement(a,wr(wr({},s),{},{className:o})):st(a)?l=a(wr(wr({},s),{},{className:o})):l=ie.createElement(zm,Oo({},s,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(O.Component);Lw(qc,"displayName","CartesianAxis");Lw(qc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ale=["x1","y1","x2","y2","key"],nle=["offset"];function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(r),!0).forEach(function(a){sle(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function sle(e,t,r){return t=ile(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ile(e){var t=lle(e,"string");return Il(t)=="symbol"?t:t+""}function lle(e,t){if(Il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Il(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fl.apply(this,arguments)}function YC(e,t){if(e==null)return{};var r=ole(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ole(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var cle=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,l=t.width,o=t.height,c=t.ry;return ie.createElement("rect",{x:s,y:i,ry:c,width:l,height:o,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function SP(e,t){var r;if(ie.isValidElement(e))r=ie.cloneElement(e,t);else if(st(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,l=t.y2,o=t.key,c=YC(t,ale),u=ht(c,!1);u.offset;var d=YC(u,nle);r=ie.createElement("line",fl({},d,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:o}))}return r}function ule(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(o,c){var u=na(na({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(c),index:c});return SP(s,u)});return ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function dle(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(o,c){var u=na(na({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(c),index:c});return SP(s,u)});return ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function fle(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,l=e.height,o=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=o.map(function(m){return Math.round(m+s-s)}).sort(function(m,p){return m-p});s!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var y=!d[p+1],h=y?s+l-m:d[p+1]-m;if(h<=0)return null;var v=p%t.length;return ie.createElement("rect",{key:"react-".concat(p),y:m,x:a,height:h,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function mle(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,l=e.y,o=e.width,c=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var y=!d[p+1],h=y?i+o-m:d[p+1]-m;if(h<=0)return null;var v=p%a.length;return ie.createElement("rect",{key:"react-".concat(p),x:m,y:l,width:h,height:c,stroke:"none",fill:a[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var hle=function(t,r){var a=t.xAxis,s=t.width,i=t.height,l=t.offset;return IA(Rw(na(na(na({},qc.defaultProps),a),{},{ticks:Ns(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.left,l.left+l.width,r)},xle=function(t,r){var a=t.yAxis,s=t.width,i=t.height,l=t.offset;return IA(Rw(na(na(na({},qc.defaultProps),a),{},{ticks:Ns(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.top,l.top+l.height,r)},so={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function G0(e){var t,r,a,s,i,l,o=Dw(),c=Iw(),u=sie(),d=na(na({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:so.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:so.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:so.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:so.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:so.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:so.verticalFill,x:Ae(e.x)?e.x:u.left,y:Ae(e.y)?e.y:u.top,width:Ae(e.width)?e.width:u.width,height:Ae(e.height)?e.height:u.height}),f=d.x,m=d.y,p=d.width,y=d.height,h=d.syncWithTicks,v=d.horizontalValues,w=d.verticalValues,S=rie(),b=aie();if(!Ae(p)||p<=0||!Ae(y)||y<=0||!Ae(f)||f!==+f||!Ae(m)||m!==+m)return null;var x=d.verticalCoordinatesGenerator||hle,g=d.horizontalCoordinatesGenerator||xle,N=d.horizontalPoints,j=d.verticalPoints;if((!N||!N.length)&&st(g)){var C=v&&v.length,_=g({yAxis:b?na(na({},b),{},{ticks:C?v:b.ticks}):void 0,width:o,height:c,offset:u},C?!0:h);_s(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Il(_),"]")),Array.isArray(_)&&(N=_)}if((!j||!j.length)&&st(x)){var T=w&&w.length,E=x({xAxis:S?na(na({},S),{},{ticks:T?w:S.ticks}):void 0,width:o,height:c,offset:u},T?!0:h);_s(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Il(E),"]")),Array.isArray(E)&&(j=E)}return ie.createElement("g",{className:"recharts-cartesian-grid"},ie.createElement(cle,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),ie.createElement(ule,fl({},d,{offset:u,horizontalPoints:N,xAxis:S,yAxis:b})),ie.createElement(dle,fl({},d,{offset:u,verticalPoints:j,xAxis:S,yAxis:b})),ie.createElement(fle,fl({},d,{horizontalPoints:N})),ie.createElement(mle,fl({},d,{verticalPoints:j})))}G0.displayName="CartesianGrid";var ple=["type","layout","connectNulls","ref"],gle=["key"];function bc(e){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}function QC(e,t){if(e==null)return{};var r=yle(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yle(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function $u(){return $u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$u.apply(this,arguments)}function JC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(r),!0).forEach(function(a){Pn(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function io(e){return Nle(e)||wle(e)||ble(e)||vle()}function vle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ble(e,t){if(e){if(typeof e=="string")return t1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t1(e,t)}}function wle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nle(e){if(Array.isArray(e))return t1(e)}function t1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function jle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZC(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,CP(a.key),a)}}function Sle(e,t,r){return t&&ZC(e.prototype,t),r&&ZC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kle(e,t,r){return t=Sh(t),Cle(e,kP()?Reflect.construct(t,r||[],Sh(e).constructor):t.apply(e,r))}function Cle(e,t){if(t&&(bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _le(e)}function _le(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kP=function(){return!!e})()}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sh(e)}function Ole(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r1(e,t)}function r1(e,t){return r1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},r1(e,t)}function Pn(e,t,r){return t=CP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CP(e){var t=Ele(e,"string");return bc(t)=="symbol"?t:t+""}function Ele(e,t){if(bc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(bc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gl=function(e){function t(){var r;jle(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=kle(this,t,[].concat(s)),Pn(r,"state",{isAnimationFinished:!0,totalLength:0}),Pn(r,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),Pn(r,"getStrokeDasharray",function(l,o,c){var u=c.reduce(function(w,S){return w+S});if(!u)return r.generateSimpleStrokeDasharray(o,l);for(var d=Math.floor(l/u),f=l%u,m=o-l,p=[],y=0,h=0;y<c.length;h+=c[y],++y)if(h+c[y]>f){p=[].concat(io(c.slice(0,y)),[f-h]);break}var v=p.length%2===0?[0,m]:[m];return[].concat(io(t.repeat(c,d)),io(p),v).map(function(w){return"".concat(w,"px")}).join(", ")}),Pn(r,"id",Sf("recharts-line-")),Pn(r,"pathRef",function(l){r.mainCurve=l}),Pn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Pn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Ole(t,e),Sle(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=pn(d,Tf);if(!f)return null;var m=function(h,v){return{x:h.x,y:h.y,value:h.value,errorVal:za(h.payload,v)}},p={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ie.createElement(dr,p,f.map(function(y){return ie.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:l,xAxis:o,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(a,s,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,f=ht(this.props,!1),m=ht(c,!0),p=u.map(function(h,v){var w=Pa(Pa(Pa({key:"dot-".concat(v),r:3},f),m),{},{index:v,cx:h.x,cy:h.y,value:h.value,dataKey:d,payload:h.payload,points:u});return t.renderDotItem(c,w)}),y={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ie.createElement(dr,$u({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(a,s,i,l){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=QC(o,ple),m=Pa(Pa(Pa({},ht(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},l),{},{type:c,layout:u,connectNulls:d});return ie.createElement(Dv,$u({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,u=l.isAnimationActive,d=l.animationBegin,f=l.animationDuration,m=l.animationEasing,p=l.animationId,y=l.animateNewValues,h=l.width,v=l.height,w=this.state,S=w.prevPoints,b=w.totalLength;return ie.createElement(fc,{begin:d,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t;if(S){var N=S.length/o.length,j=o.map(function(k,A){var P=Math.floor(A*N);if(S[P]){var F=S[P],U=In(F.x,k.x),W=In(F.y,k.y);return Pa(Pa({},k),{},{x:U(g),y:W(g)})}if(y){var K=In(h*2,k.x),B=In(v/2,k.y);return Pa(Pa({},k),{},{x:K(g),y:B(g)})}return Pa(Pa({},k),{},{x:k.x,y:k.y})});return i.renderCurveStatically(j,a,s)}var C=In(0,b),_=C(g),T;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});T=i.getStrokeDasharray(_,b,E)}else T=i.generateSimpleStrokeDasharray(b,_);return i.renderCurveStatically(o,a,s,{strokeDasharray:T})})}},{key:"renderCurve",value:function(a,s){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&l&&l.length&&(!u&&d>0||!Lx(u,l))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,l=s.dot,o=s.points,c=s.className,u=s.xAxis,d=s.yAxis,f=s.top,m=s.left,p=s.width,y=s.height,h=s.isAnimationActive,v=s.id;if(i||!o||!o.length)return null;var w=this.state.isAnimationFinished,S=o.length===1,b=vt("recharts-line",c),x=u&&u.allowDataOverflow,g=d&&d.allowDataOverflow,N=x||g,j=ct(v)?this.id:v,C=(a=ht(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},_=C.r,T=_===void 0?3:_,E=C.strokeWidth,k=E===void 0?2:E,A=Y7(l)?l:{},P=A.clipDot,F=P===void 0?!0:P,U=T*2+k;return ie.createElement(dr,{className:b},x||g?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(j)},ie.createElement("rect",{x:x?m:m-p/2,y:g?f:f-y/2,width:x?p:p*2,height:g?y:y*2})),!F&&ie.createElement("clipPath",{id:"clipPath-dots-".concat(j)},ie.createElement("rect",{x:m-U/2,y:f-U/2,width:p+U,height:y+U}))):null,!S&&this.renderCurve(N,j),this.renderErrorBar(N,j),(S||l)&&this.renderDots(N,F,j),(!h||w)&&ji.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(io(a),[0]):a,l=[],o=0;o<s;++o)l=[].concat(io(l),io(i));return l}},{key:"renderDotItem",value:function(a,s){var i;if(ie.isValidElement(a))i=ie.cloneElement(a,s);else if(st(a))i=a(s);else{var l=s.key,o=QC(s,gle),c=vt("recharts-line-dot",typeof a!="boolean"?a.className:"");i=ie.createElement(Ew,$u({key:l},o,{className:c}))}return i}}])}(O.PureComponent);Pn(gl,"displayName","Line");Pn(gl,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Os.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Pn(gl,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,o=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(m,p){var y=za(m,l);return d==="horizontal"?{x:Ek({axis:r,ticks:s,bandSize:o,entry:m,index:p}),y:ct(y)?null:a.scale(y),value:y,payload:m}:{x:ct(y)?null:r.scale(y),y:Ek({axis:a,ticks:i,bandSize:o,entry:m,index:p}),value:y,payload:m}});return Pa({points:f,layout:d},u)});function wc(e){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(e)}function Tle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e_(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EP(a.key),a)}}function Ale(e,t,r){return t&&e_(e.prototype,t),r&&e_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ple(e,t,r){return t=kh(t),Dle(e,_P()?Reflect.construct(t,r||[],kh(e).constructor):t.apply(e,r))}function Dle(e,t){if(t&&(wc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ile(e)}function Ile(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_P=function(){return!!e})()}function kh(e){return kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kh(e)}function Fle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a1(e,t)}function a1(e,t){return a1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},a1(e,t)}function OP(e,t,r){return t=EP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EP(e){var t=Mle(e,"string");return wc(t)=="symbol"?t:t+""}function Mle(e,t){if(wc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(wc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n1.apply(this,arguments)}function Rle(e){var t=e.xAxisId,r=Dw(),a=Iw(),s=mP(t);return s==null?null:O.createElement(qc,n1({},s,{className:vt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return Ns(l,!0)}}))}var Wo=function(e){function t(){return Tle(this,t),Ple(this,t,arguments)}return Fle(t,e),Ale(t,[{key:"render",value:function(){return O.createElement(Rle,this.props)}}])}(O.Component);OP(Wo,"displayName","XAxis");OP(Wo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function Lle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t_(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,PP(a.key),a)}}function $le(e,t,r){return t&&t_(e.prototype,t),r&&t_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ble(e,t,r){return t=Ch(t),Ule(e,TP()?Reflect.construct(t,r||[],Ch(e).constructor):t.apply(e,r))}function Ule(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wle(e)}function Wle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TP=function(){return!!e})()}function Ch(e){return Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ch(e)}function qle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s1(e,t)}function s1(e,t){return s1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},s1(e,t)}function AP(e,t,r){return t=PP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PP(e){var t=Kle(e,"string");return Nc(t)=="symbol"?t:t+""}function Kle(e,t){if(Nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Nc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i1.apply(this,arguments)}var zle=function(t){var r=t.yAxisId,a=Dw(),s=Iw(),i=hP(r);return i==null?null:O.createElement(qc,i1({},i,{className:vt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(o){return Ns(o,!0)}}))},qo=function(e){function t(){return Lle(this,t),Ble(this,t,arguments)}return qle(t,e),$le(t,[{key:"render",value:function(){return O.createElement(zle,this.props)}}])}(O.Component);AP(qo,"displayName","YAxis");AP(qo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function r_(e){return Xle(e)||Gle(e)||Hle(e)||Vle()}function Vle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hle(e,t){if(e){if(typeof e=="string")return l1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l1(e,t)}}function Gle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xle(e){if(Array.isArray(e))return l1(e)}function l1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var o1=function(t,r,a,s,i){var l=pn(t,Mw),o=pn(t,Vx),c=[].concat(r_(l),r_(o)),u=pn(t,Gx),d="".concat(s,"Id"),f=s[0],m=r;if(c.length&&(m=c.reduce(function(h,v){if(v.props[d]===a&&rs(v.props,"extendDomain")&&Ae(v.props[f])){var w=v.props[f];return[Math.min(h[0],w),Math.max(h[1],w)]}return h},m)),u.length){var p="".concat(f,"1"),y="".concat(f,"2");m=u.reduce(function(h,v){if(v.props[d]===a&&rs(v.props,"extendDomain")&&Ae(v.props[p])&&Ae(v.props[y])){var w=v.props[p],S=v.props[y];return[Math.min(h[0],w,S),Math.max(h[1],w,S)]}return h},m)}return i&&i.length&&(m=i.reduce(function(h,v){return Ae(v)?[Math.min(h[0],v),Math.max(h[1],v)]:h},m)),m},DP={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,f||c,m),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function l(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function o(){this._events=new a,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,y=new Array(p);m<p;m++)y[m]=f[m].fn;return y},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,m,p,y){var h=r?r+u:u;if(!this._events[h])return!1;var v=this._events[h],w=arguments.length,S,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),w){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,m),!0;case 5:return v.fn.call(v.context,d,f,m,p),!0;case 6:return v.fn.call(v.context,d,f,m,p,y),!0}for(b=1,S=new Array(w-1);b<w;b++)S[b-1]=arguments[b];v.fn.apply(v.context,S)}else{var x=v.length,g;for(b=0;b<x;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),w){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,m);break;default:if(!S)for(g=1,S=new Array(w-1);g<w;g++)S[g-1]=arguments[g];v[b].fn.apply(v[b].context,S)}}return!0},o.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,m){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return l(this,p),this;var y=this._events[p];if(y.fn)y.fn===d&&(!m||y.once)&&(!f||y.context===f)&&l(this,p);else{for(var h=0,v=[],w=y.length;h<w;h++)(y[h].fn!==d||m&&!y[h].once||f&&y[h].context!==f)&&v.push(y[h]);v.length?this._events[p]=v.length===1?v[0]:v:l(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&l(this,d)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(DP);var Yle=DP.exports;const Qle=Ft(Yle);var gg=new Qle,yg="recharts.syncMouseEvents";function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Jle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a_(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IP(a.key),a)}}function Zle(e,t,r){return t&&a_(e.prototype,t),r&&a_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vg(e,t,r){return t=IP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IP(e){var t=eoe(e,"string");return Xd(t)=="symbol"?t:t+""}function eoe(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Xd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var toe=function(){function e(){Jle(this,e),vg(this,"activeIndex",0),vg(this,"coordinateList",[]),vg(this,"layout","horizontal")}return Zle(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,l=r.container,o=l===void 0?null:l,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,l=s.y,o=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((a=window)===null||a===void 0?void 0:a.scrollY)||0,f=i+c+u,m=l+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function roe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&Ae(a)&&Ae(s))return!0}return!1}function aoe(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function FP(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,l=Vr(t,r,a,s),o=Vr(t,r,a,i);return{points:[l,o],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function noe(e,t,r){var a,s,i,l;if(e==="horizontal")a=t.x,i=a,s=r.top,l=r.top+r.height;else if(e==="vertical")s=t.y,l=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,m=Vr(o,c,u,f),p=Vr(o,c,d,f);a=m.x,s=m.y,i=p.x,l=p.y}else return FP(t);return[{x:a,y:s},{x:i,y:l}]}function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function n_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function S0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n_(Object(r),!0).forEach(function(a){soe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n_(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function soe(e,t,r){return t=ioe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ioe(e){var t=loe(e,"string");return Yd(t)=="symbol"?t:t+""}function loe(e,t){if(Yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Yd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ooe(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!p||!i||!l||m!=="ScatterChart"&&s!=="axis")return null;var y,h=Dv;if(m==="ScatterChart")y=l,h=mae;else if(m==="BarChart")y=aoe(f,l,c,d),h=Ow;else if(f==="radial"){var v=FP(l),w=v.cx,S=v.cy,b=v.radius,x=v.startAngle,g=v.endAngle;y={cx:w,cy:S,startAngle:x,endAngle:g,innerRadius:b,outerRadius:b},h=$A}else y={points:noe(f,l,c)},h=Dv;var N=S0(S0(S0(S0({stroke:"#ccc",pointerEvents:"none"},c),y),ht(p,!1)),{},{payload:o,payloadIndex:u,className:vt("recharts-tooltip-cursor",p.className)});return O.isValidElement(p)?O.cloneElement(p,N):O.createElement(h,N)}var coe=["item"],uoe=["children","className","width","height","style","compact","title","desc"];function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Eo.apply(this,arguments)}function s_(e,t){return moe(e)||foe(e,t)||RP(e,t)||doe()}function doe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function foe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,l,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw s}}return o}}function moe(e){if(Array.isArray(e))return e}function i_(e,t){if(e==null)return{};var r=hoe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hoe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function xoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l_(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,LP(a.key),a)}}function poe(e,t,r){return t&&l_(e.prototype,t),r&&l_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function goe(e,t,r){return t=_h(t),yoe(e,MP()?Reflect.construct(t,r||[],_h(e).constructor):t.apply(e,r))}function yoe(e,t){if(t&&(jc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return voe(e)}function voe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MP=function(){return!!e})()}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_h(e)}function boe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c1(e,t)}function c1(e,t){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},c1(e,t)}function Sc(e){return joe(e)||Noe(e)||RP(e)||woe()}function woe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RP(e,t){if(e){if(typeof e=="string")return u1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u1(e,t)}}function Noe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function joe(e){if(Array.isArray(e))return u1(e)}function u1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function o_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o_(Object(r),!0).forEach(function(a){He(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o_(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function He(e,t,r){return t=LP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LP(e){var t=Soe(e,"string");return jc(t)=="symbol"?t:t+""}function Soe(e,t){if(jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(jc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var koe={xAxis:["bottom","top"],yAxis:["left","right"]},Coe={width:"100%",height:"100%"},$P={x:0,y:0};function k0(e){return e}var _oe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Ooe=function(t,r,a,s){var i=r.find(function(d){return d&&d.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,o=s.radius;return we(we(we({},s),Vr(s.cx,s.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,u=s.angle;return we(we(we({},s),Vr(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return $P},Xx=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,l=(a??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(Sc(o),Sc(u)):o},[]);return l.length>0?l:t&&t.length&&Ae(s)&&Ae(i)?t.slice(s,i+1):[]};function BP(e){return e==="number"?[0,"auto"]:void 0}var d1=function(t,r,a,s){var i=t.graphicalItems,l=t.tooltipAxis,o=Xx(r,t);return a<0||!i||!i.length||a>=o.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(l.dataKey&&!l.allowDuplicatedCategory){var p=f===void 0?o:f;m=Em(p,l.dataKey,s)}else m=f&&f[a]||o[a];return m?[].concat(Sc(c),[MA(u,m)]):c},[])},c_=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},l=_oe(i,a),o=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=YZ(l,o,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,m=d1(t,r,d,f),p=Ooe(a,o,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:m,activeCoordinate:p}}return null},Eoe=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=t.stackOffset,p=DA(d,i);return a.reduce(function(y,h){var v,w=h.type.defaultProps!==void 0?we(we({},h.type.defaultProps),h.props):h.props,S=w.type,b=w.dataKey,x=w.allowDataOverflow,g=w.allowDuplicatedCategory,N=w.scale,j=w.ticks,C=w.includeHidden,_=w[l];if(y[_])return y;var T=Xx(t.data,{graphicalItems:s.filter(function(R){var V,X=l in R.props?R.props[l]:(V=R.type.defaultProps)===null||V===void 0?void 0:V[l];return X===_}),dataStartIndex:c,dataEndIndex:u}),E=T.length,k,A,P;roe(w.domain,x,S)&&(k=Ov(w.domain,null,x),p&&(S==="number"||N!=="auto")&&(P=Ru(T,b,"category")));var F=BP(S);if(!k||k.length===0){var U,W=(U=w.domain)!==null&&U!==void 0?U:F;if(b){if(k=Ru(T,b,S),S==="category"&&p){var K=B7(k);g&&K?(A=k,k=hh(0,E)):g||(k=Dk(W,k,h).reduce(function(R,V){return R.indexOf(V)>=0?R:[].concat(Sc(R),[V])},[]))}else if(S==="category")g?k=k.filter(function(R){return R!==""&&!ct(R)}):k=Dk(W,k,h).reduce(function(R,V){return R.indexOf(V)>=0||V===""||ct(V)?R:[].concat(Sc(R),[V])},[]);else if(S==="number"){var B=tee(T,s.filter(function(R){var V,X,J=l in R.props?R.props[l]:(V=R.type.defaultProps)===null||V===void 0?void 0:V[l],Z="hide"in R.props?R.props.hide:(X=R.type.defaultProps)===null||X===void 0?void 0:X.hide;return J===_&&(C||!Z)}),b,i,d);B&&(k=B)}p&&(S==="number"||N!=="auto")&&(P=Ru(T,b,"category"))}else p?k=hh(0,E):o&&o[_]&&o[_].hasStack&&S==="number"?k=m==="expand"?[0,1]:FA(o[_].stackGroups,c,u):k=PA(T,s.filter(function(R){var V=l in R.props?R.props[l]:R.type.defaultProps[l],X="hide"in R.props?R.props.hide:R.type.defaultProps.hide;return V===_&&(C||!X)}),S,d,!0);if(S==="number")k=o1(f,k,_,i,j),W&&(k=Ov(W,k,x));else if(S==="category"&&W){var ee=W,oe=k.every(function(R){return ee.indexOf(R)>=0});oe&&(k=ee)}}return we(we({},y),{},He({},_,we(we({},w),{},{axisType:i,domain:k,categoricalDomain:P,duplicateDomain:A,originalDomain:(v=w.domain)!==null&&v!==void 0?v:F,isCategorical:p,layout:d})))},{})},Toe=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=Xx(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:u}),p=m.length,y=DA(d,i),h=-1;return a.reduce(function(v,w){var S=w.type.defaultProps!==void 0?we(we({},w.type.defaultProps),w.props):w.props,b=S[l],x=BP("number");if(!v[b]){h++;var g;return y?g=hh(0,p):o&&o[b]&&o[b].hasStack?(g=FA(o[b].stackGroups,c,u),g=o1(f,g,b,i)):(g=Ov(x,PA(m,a.filter(function(N){var j,C,_=l in N.props?N.props[l]:(j=N.type.defaultProps)===null||j===void 0?void 0:j[l],T="hide"in N.props?N.props.hide:(C=N.type.defaultProps)===null||C===void 0?void 0:C.hide;return _===b&&!T}),"number",d),s.defaultProps.allowDataOverflow),g=o1(f,g,b,i)),we(we({},v),{},He({},b,we(we({axisType:i},s.defaultProps),{},{hide:!0,orientation:xn(koe,"".concat(i,".").concat(h%2),null),domain:g,originalDomain:x,isCategorical:y,layout:d})))}return v},{})},Aoe=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,l=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(s,"Id"),m=pn(d,i),p={};return m&&m.length?p=Eoe(t,{axes:m,graphicalItems:l,axisType:s,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):l&&l.length&&(p=Toe(t,{Axis:i,graphicalItems:l,axisType:s,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),p},Poe=function(t){var r=ni(t),a=Ns(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:tw(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:sh(r,a)}},u_=function(t){var r=t.children,a=t.defaultShowTooltip,s=Fa(r,hc),i=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(l=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!a}},Doe=function(t){return!t||!t.length?!1:t.some(function(r){var a=Cs(r&&r.type);return a&&a.indexOf("Bar")>=0})},d_=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ioe=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,l=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,u=a.width,d=a.height,f=a.children,m=a.margin||{},p=Fa(f,hc),y=Fa(f,$o),h=Object.keys(c).reduce(function(g,N){var j=c[N],C=j.orientation;return!j.mirror&&!j.hide?we(we({},g),{},He({},C,g[C]+j.width)):g},{left:m.left||0,right:m.right||0}),v=Object.keys(l).reduce(function(g,N){var j=l[N],C=j.orientation;return!j.mirror&&!j.hide?we(we({},g),{},He({},C,xn(g,"".concat(C))+j.height)):g},{top:m.top||0,bottom:m.bottom||0}),w=we(we({},v),h),S=w.bottom;p&&(w.bottom+=p.props.height||hc.defaultProps.height),y&&r&&(w=ZZ(w,s,a,r));var b=u-w.left-w.right,x=d-w.top-w.bottom;return we(we({brushBottom:S},w),{},{width:Math.max(b,0),height:Math.max(x,0)})},Foe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Moe=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,l=t.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,m=function(w,S){var b=S.graphicalItems,x=S.stackGroups,g=S.offset,N=S.updateId,j=S.dataStartIndex,C=S.dataEndIndex,_=w.barSize,T=w.layout,E=w.barGap,k=w.barCategoryGap,A=w.maxBarSize,P=d_(T),F=P.numericAxisName,U=P.cateAxisName,W=Doe(b),K=[];return b.forEach(function(B,ee){var oe=Xx(w.data,{graphicalItems:[B],dataStartIndex:j,dataEndIndex:C}),R=B.type.defaultProps!==void 0?we(we({},B.type.defaultProps),B.props):B.props,V=R.dataKey,X=R.maxBarSize,J=R["".concat(F,"Id")],Z=R["".concat(U,"Id")],le={},xe=c.reduce(function(Ge,Ke){var Le=S["".concat(Ke.axisType,"Map")],pe=R["".concat(Ke.axisType,"Id")];Le&&Le[pe]||Ke.axisType==="zAxis"||Dl(!1);var ne=Le[pe];return we(we({},Ge),{},He(He({},Ke.axisType,ne),"".concat(Ke.axisType,"Ticks"),Ns(ne)))},le),ae=xe[U],M=xe["".concat(U,"Ticks")],G=x&&x[J]&&x[J].hasStack&&mee(B,x[J].stackGroups),D=Cs(B.type).indexOf("Bar")>=0,se=sh(ae,M),I=[],ce=W&&QZ({barSize:_,stackGroups:x,totalSize:Foe(xe,U)});if(D){var ue,te,Ue=ct(X)?A:X,et=(ue=(te=sh(ae,M,!0))!==null&&te!==void 0?te:Ue)!==null&&ue!==void 0?ue:0;I=JZ({barGap:E,barCategoryGap:k,bandSize:et!==se?et:se,sizeList:ce[Z],maxBarSize:Ue}),et!==se&&(I=I.map(function(Ge){return we(we({},Ge),{},{position:we(we({},Ge.position),{},{offset:Ge.position.offset-et/2})})}))}var Je=B&&B.type&&B.type.getComposedData;Je&&K.push({props:we(we({},Je(we(we({},xe),{},{displayedData:oe,props:w,dataKey:V,item:B,bandSize:se,barPosition:I,offset:g,stackedData:G,layout:T,dataStartIndex:j,dataEndIndex:C}))),{},He(He(He({key:B.key||"item-".concat(ee)},F,xe[F]),U,xe[U]),"animationId",N)),childIndex:Z7(B,w.children),item:B})}),K},p=function(w,S){var b=w.props,x=w.dataStartIndex,g=w.dataEndIndex,N=w.updateId;if(!N2({props:b}))return null;var j=b.children,C=b.layout,_=b.stackOffset,T=b.data,E=b.reverseStackOrder,k=d_(C),A=k.numericAxisName,P=k.cateAxisName,F=pn(j,a),U=uee(T,F,"".concat(A,"Id"),"".concat(P,"Id"),_,E),W=c.reduce(function(R,V){var X="".concat(V.axisType,"Map");return we(we({},R),{},He({},X,Aoe(b,we(we({},V),{},{graphicalItems:F,stackGroups:V.axisType===A&&U,dataStartIndex:x,dataEndIndex:g}))))},{}),K=Ioe(we(we({},W),{},{props:b,graphicalItems:F}),S==null?void 0:S.legendBBox);Object.keys(W).forEach(function(R){W[R]=d(b,W[R],K,R.replace("Map",""),r)});var B=W["".concat(P,"Map")],ee=Poe(B),oe=m(b,we(we({},W),{},{dataStartIndex:x,dataEndIndex:g,updateId:N,graphicalItems:F,stackGroups:U,offset:K}));return we(we({formattedGraphicalItems:oe,graphicalItems:F,offset:K,stackGroups:U},ee),W)},y=function(v){function w(S){var b,x,g;return xoe(this,w),g=goe(this,w,[S]),He(g,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),He(g,"accessibilityManager",new toe),He(g,"handleLegendBBoxUpdate",function(N){if(N){var j=g.state,C=j.dataStartIndex,_=j.dataEndIndex,T=j.updateId;g.setState(we({legendBBox:N},p({props:g.props,dataStartIndex:C,dataEndIndex:_,updateId:T},we(we({},g.state),{},{legendBBox:N}))))}}),He(g,"handleReceiveSyncEvent",function(N,j,C){if(g.props.syncId===N){if(C===g.eventEmitterSymbol&&typeof g.props.syncMethod!="function")return;g.applySyncEvent(j)}}),He(g,"handleBrushChange",function(N){var j=N.startIndex,C=N.endIndex;if(j!==g.state.dataStartIndex||C!==g.state.dataEndIndex){var _=g.state.updateId;g.setState(function(){return we({dataStartIndex:j,dataEndIndex:C},p({props:g.props,dataStartIndex:j,dataEndIndex:C,updateId:_},g.state))}),g.triggerSyncEvent({dataStartIndex:j,dataEndIndex:C})}}),He(g,"handleMouseEnter",function(N){var j=g.getMouseInfo(N);if(j){var C=we(we({},j),{},{isTooltipActive:!0});g.setState(C),g.triggerSyncEvent(C);var _=g.props.onMouseEnter;st(_)&&_(C,N)}}),He(g,"triggeredAfterMouseMove",function(N){var j=g.getMouseInfo(N),C=j?we(we({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};g.setState(C),g.triggerSyncEvent(C);var _=g.props.onMouseMove;st(_)&&_(C,N)}),He(g,"handleItemMouseEnter",function(N){g.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),He(g,"handleItemMouseLeave",function(){g.setState(function(){return{isTooltipActive:!1}})}),He(g,"handleMouseMove",function(N){N.persist(),g.throttleTriggeredAfterMouseMove(N)}),He(g,"handleMouseLeave",function(N){g.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};g.setState(j),g.triggerSyncEvent(j);var C=g.props.onMouseLeave;st(C)&&C(j,N)}),He(g,"handleOuterEvent",function(N){var j=J7(N),C=xn(g.props,"".concat(j));if(j&&st(C)){var _,T;/.*touch.*/i.test(j)?T=g.getMouseInfo(N.changedTouches[0]):T=g.getMouseInfo(N),C((_=T)!==null&&_!==void 0?_:{},N)}}),He(g,"handleClick",function(N){var j=g.getMouseInfo(N);if(j){var C=we(we({},j),{},{isTooltipActive:!0});g.setState(C),g.triggerSyncEvent(C);var _=g.props.onClick;st(_)&&_(C,N)}}),He(g,"handleMouseDown",function(N){var j=g.props.onMouseDown;if(st(j)){var C=g.getMouseInfo(N);j(C,N)}}),He(g,"handleMouseUp",function(N){var j=g.props.onMouseUp;if(st(j)){var C=g.getMouseInfo(N);j(C,N)}}),He(g,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&g.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),He(g,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&g.handleMouseDown(N.changedTouches[0])}),He(g,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&g.handleMouseUp(N.changedTouches[0])}),He(g,"handleDoubleClick",function(N){var j=g.props.onDoubleClick;if(st(j)){var C=g.getMouseInfo(N);j(C,N)}}),He(g,"handleContextMenu",function(N){var j=g.props.onContextMenu;if(st(j)){var C=g.getMouseInfo(N);j(C,N)}}),He(g,"triggerSyncEvent",function(N){g.props.syncId!==void 0&&gg.emit(yg,g.props.syncId,N,g.eventEmitterSymbol)}),He(g,"applySyncEvent",function(N){var j=g.props,C=j.layout,_=j.syncMethod,T=g.state.updateId,E=N.dataStartIndex,k=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)g.setState(we({dataStartIndex:E,dataEndIndex:k},p({props:g.props,dataStartIndex:E,dataEndIndex:k,updateId:T},g.state)));else if(N.activeTooltipIndex!==void 0){var A=N.chartX,P=N.chartY,F=N.activeTooltipIndex,U=g.state,W=U.offset,K=U.tooltipTicks;if(!W)return;if(typeof _=="function")F=_(K,N);else if(_==="value"){F=-1;for(var B=0;B<K.length;B++)if(K[B].value===N.activeLabel){F=B;break}}var ee=we(we({},W),{},{x:W.left,y:W.top}),oe=Math.min(A,ee.x+ee.width),R=Math.min(P,ee.y+ee.height),V=K[F]&&K[F].value,X=d1(g.state,g.props.data,F),J=K[F]?{x:C==="horizontal"?K[F].coordinate:oe,y:C==="horizontal"?R:K[F].coordinate}:$P;g.setState(we(we({},N),{},{activeLabel:V,activeCoordinate:J,activePayload:X,activeTooltipIndex:F}))}else g.setState(N)}),He(g,"renderCursor",function(N){var j,C=g.state,_=C.isTooltipActive,T=C.activeCoordinate,E=C.activePayload,k=C.offset,A=C.activeTooltipIndex,P=C.tooltipAxisBandSize,F=g.getTooltipEventType(),U=(j=N.props.active)!==null&&j!==void 0?j:_,W=g.props.layout,K=N.key||"_recharts-cursor";return ie.createElement(ooe,{key:K,activeCoordinate:T,activePayload:E,activeTooltipIndex:A,chartName:r,element:N,isActive:U,layout:W,offset:k,tooltipAxisBandSize:P,tooltipEventType:F})}),He(g,"renderPolarAxis",function(N,j,C){var _=xn(N,"type.axisType"),T=xn(g.state,"".concat(_,"Map")),E=N.type.defaultProps,k=E!==void 0?we(we({},E),N.props):N.props,A=T&&T[k["".concat(_,"Id")]];return O.cloneElement(N,we(we({},A),{},{className:vt(_,A.className),key:N.key||"".concat(j,"-").concat(C),ticks:Ns(A,!0)}))}),He(g,"renderPolarGrid",function(N){var j=N.props,C=j.radialLines,_=j.polarAngles,T=j.polarRadius,E=g.state,k=E.radiusAxisMap,A=E.angleAxisMap,P=ni(k),F=ni(A),U=F.cx,W=F.cy,K=F.innerRadius,B=F.outerRadius;return O.cloneElement(N,{polarAngles:Array.isArray(_)?_:Ns(F,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(T)?T:Ns(P,!0).map(function(ee){return ee.coordinate}),cx:U,cy:W,innerRadius:K,outerRadius:B,key:N.key||"polar-grid",radialLines:C})}),He(g,"renderLegend",function(){var N=g.state.formattedGraphicalItems,j=g.props,C=j.children,_=j.width,T=j.height,E=g.props.margin||{},k=_-(E.left||0)-(E.right||0),A=TA({children:C,formattedGraphicalItems:N,legendWidth:k,legendContent:u});if(!A)return null;var P=A.item,F=i_(A,coe);return O.cloneElement(P,we(we({},F),{},{chartWidth:_,chartHeight:T,margin:E,onBBoxUpdate:g.handleLegendBBoxUpdate}))}),He(g,"renderTooltip",function(){var N,j=g.props,C=j.children,_=j.accessibilityLayer,T=Fa(C,ln);if(!T)return null;var E=g.state,k=E.isTooltipActive,A=E.activeCoordinate,P=E.activePayload,F=E.activeLabel,U=E.offset,W=(N=T.props.active)!==null&&N!==void 0?N:k;return O.cloneElement(T,{viewBox:we(we({},U),{},{x:U.left,y:U.top}),active:W,label:F,payload:W?P:[],coordinate:A,accessibilityLayer:_})}),He(g,"renderBrush",function(N){var j=g.props,C=j.margin,_=j.data,T=g.state,E=T.offset,k=T.dataStartIndex,A=T.dataEndIndex,P=T.updateId;return O.cloneElement(N,{key:N.key||"_recharts-brush",onChange:b0(g.handleBrushChange,N.props.onChange),data:_,x:Ae(N.props.x)?N.props.x:E.left,y:Ae(N.props.y)?N.props.y:E.top+E.height+E.brushBottom-(C.bottom||0),width:Ae(N.props.width)?N.props.width:E.width,startIndex:k,endIndex:A,updateId:"brush-".concat(P)})}),He(g,"renderReferenceElement",function(N,j,C){if(!N)return null;var _=g,T=_.clipPathId,E=g.state,k=E.xAxisMap,A=E.yAxisMap,P=E.offset,F=N.type.defaultProps||{},U=N.props,W=U.xAxisId,K=W===void 0?F.xAxisId:W,B=U.yAxisId,ee=B===void 0?F.yAxisId:B;return O.cloneElement(N,{key:N.key||"".concat(j,"-").concat(C),xAxis:k[K],yAxis:A[ee],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:T})}),He(g,"renderActivePoints",function(N){var j=N.item,C=N.activePoint,_=N.basePoint,T=N.childIndex,E=N.isRange,k=[],A=j.props.key,P=j.item.type.defaultProps!==void 0?we(we({},j.item.type.defaultProps),j.item.props):j.item.props,F=P.activeDot,U=P.dataKey,W=we(we({index:T,dataKey:U,cx:C.x,cy:C.y,r:4,fill:_w(j.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},ht(F,!1)),Tm(F));return k.push(w.renderActiveDot(F,W,"".concat(A,"-activePoint-").concat(T))),_?k.push(w.renderActiveDot(F,we(we({},W),{},{cx:_.x,cy:_.y}),"".concat(A,"-basePoint-").concat(T))):E&&k.push(null),k}),He(g,"renderGraphicChild",function(N,j,C){var _=g.filterFormatItem(N,j,C);if(!_)return null;var T=g.getTooltipEventType(),E=g.state,k=E.isTooltipActive,A=E.tooltipAxis,P=E.activeTooltipIndex,F=E.activeLabel,U=g.props.children,W=Fa(U,ln),K=_.props,B=K.points,ee=K.isRange,oe=K.baseLine,R=_.item.type.defaultProps!==void 0?we(we({},_.item.type.defaultProps),_.item.props):_.item.props,V=R.activeDot,X=R.hide,J=R.activeBar,Z=R.activeShape,le=!!(!X&&k&&W&&(V||J||Z)),xe={};T!=="axis"&&W&&W.props.trigger==="click"?xe={onClick:b0(g.handleItemMouseEnter,N.props.onClick)}:T!=="axis"&&(xe={onMouseLeave:b0(g.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:b0(g.handleItemMouseEnter,N.props.onMouseEnter)});var ae=O.cloneElement(N,we(we({},_.props),xe));function M(Ke){return typeof A.dataKey=="function"?A.dataKey(Ke.payload):null}if(le)if(P>=0){var G,D;if(A.dataKey&&!A.allowDuplicatedCategory){var se=typeof A.dataKey=="function"?M:"payload.".concat(A.dataKey.toString());G=Em(B,se,F),D=ee&&oe&&Em(oe,se,F)}else G=B==null?void 0:B[P],D=ee&&oe&&oe[P];if(Z||J){var I=N.props.activeIndex!==void 0?N.props.activeIndex:P;return[O.cloneElement(N,we(we(we({},_.props),xe),{},{activeIndex:I})),null,null]}if(!ct(G))return[ae].concat(Sc(g.renderActivePoints({item:_,activePoint:G,basePoint:D,childIndex:P,isRange:ee})))}else{var ce,ue=(ce=g.getItemByXY(g.state.activeCoordinate))!==null&&ce!==void 0?ce:{graphicalItem:ae},te=ue.graphicalItem,Ue=te.item,et=Ue===void 0?N:Ue,Je=te.childIndex,Ge=we(we(we({},_.props),xe),{},{activeIndex:Je});return[O.cloneElement(et,Ge),null,null]}return ee?[ae,null,null]:[ae,null]}),He(g,"renderCustomized",function(N,j,C){return O.cloneElement(N,we(we({key:"recharts-customized-".concat(C)},g.props),g.state))}),He(g,"renderMap",{CartesianGrid:{handler:k0,once:!0},ReferenceArea:{handler:g.renderReferenceElement},ReferenceLine:{handler:k0},ReferenceDot:{handler:g.renderReferenceElement},XAxis:{handler:k0},YAxis:{handler:k0},Brush:{handler:g.renderBrush,once:!0},Bar:{handler:g.renderGraphicChild},Line:{handler:g.renderGraphicChild},Area:{handler:g.renderGraphicChild},Radar:{handler:g.renderGraphicChild},RadialBar:{handler:g.renderGraphicChild},Scatter:{handler:g.renderGraphicChild},Pie:{handler:g.renderGraphicChild},Funnel:{handler:g.renderGraphicChild},Tooltip:{handler:g.renderCursor,once:!0},PolarGrid:{handler:g.renderPolarGrid,once:!0},PolarAngleAxis:{handler:g.renderPolarAxis},PolarRadiusAxis:{handler:g.renderPolarAxis},Customized:{handler:g.renderCustomized}}),g.clipPathId="".concat((b=S.id)!==null&&b!==void 0?b:Sf("recharts"),"-clip"),g.throttleTriggeredAfterMouseMove=E3(g.triggeredAfterMouseMove,(x=S.throttleDelay)!==null&&x!==void 0?x:1e3/60),g.state={},g}return boe(w,v),poe(w,[{key:"componentDidMount",value:function(){var b,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,x=b.children,g=b.data,N=b.height,j=b.layout,C=Fa(x,ln);if(C){var _=C.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,E=d1(this.state,g,_,T),k=this.state.tooltipTicks[_].coordinate,A=(this.state.offset.top+N)/2,P=j==="horizontal",F=P?{x:k,y:A}:{y:k,x:A},U=this.state.formattedGraphicalItems.find(function(K){var B=K.item;return B.type.name==="Scatter"});U&&(F=we(we({},F),U.props.points[_].tooltipPosition),E=U.props.points[_].tooltipPayload);var W={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:T,activePayload:E,activeCoordinate:F};this.setState(W),this.renderCursor(C),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var g,N;this.accessibilityManager.setDetails({offset:{left:(g=this.props.margin.left)!==null&&g!==void 0?g:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(b){qy([Fa(b.children,ln)],[Fa(this.props.children,ln)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Fa(this.props.children,ln);if(b&&typeof b.props.shared=="boolean"){var x=b.props.shared?"axis":"item";return o.indexOf(x)>=0?x:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var x=this.container,g=x.getBoundingClientRect(),N=NX(g),j={chartX:Math.round(b.pageX-N.left),chartY:Math.round(b.pageY-N.top)},C=g.width/x.offsetWidth||1,_=this.inRange(j.chartX,j.chartY,C);if(!_)return null;var T=this.state,E=T.xAxisMap,k=T.yAxisMap,A=this.getTooltipEventType(),P=c_(this.state,this.props.data,this.props.layout,_);if(A!=="axis"&&E&&k){var F=ni(E).scale,U=ni(k).scale,W=F&&F.invert?F.invert(j.chartX):null,K=U&&U.invert?U.invert(j.chartY):null;return we(we({},j),{},{xValue:W,yValue:K},P)}return P?we(we({},j),P):null}},{key:"inRange",value:function(b,x){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,j=b/g,C=x/g;if(N==="horizontal"||N==="vertical"){var _=this.state.offset,T=j>=_.left&&j<=_.left+_.width&&C>=_.top&&C<=_.top+_.height;return T?{x:j,y:C}:null}var E=this.state,k=E.angleAxisMap,A=E.radiusAxisMap;if(k&&A){var P=ni(k);return Mk({x:j,y:C},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,x=this.getTooltipEventType(),g=Fa(b,ln),N={};g&&x==="axis"&&(g.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=Tm(this.props,this.handleOuterEvent);return we(we({},j),N)}},{key:"addListener",value:function(){gg.on(yg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){gg.removeListener(yg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,x,g){for(var N=this.state.formattedGraphicalItems,j=0,C=N.length;j<C;j++){var _=N[j];if(_.item===b||_.props.key===b.key||x===Cs(_.item.type)&&g===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,x=this.state.offset,g=x.left,N=x.top,j=x.height,C=x.width;return ie.createElement("defs",null,ie.createElement("clipPath",{id:b},ie.createElement("rect",{x:g,y:N,height:j,width:C})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(x,g){var N=s_(g,2),j=N[0],C=N[1];return we(we({},x),{},He({},j,C.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(x,g){var N=s_(g,2),j=N[0],C=N[1];return we(we({},x),{},He({},j,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(b){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(b){var x=this.state,g=x.formattedGraphicalItems,N=x.activeItem;if(g&&g.length)for(var j=0,C=g.length;j<C;j++){var _=g[j],T=_.props,E=_.item,k=E.type.defaultProps!==void 0?we(we({},E.type.defaultProps),E.props):E.props,A=Cs(E.type);if(A==="Bar"){var P=(T.data||[]).find(function(K){return aae(b,K)});if(P)return{graphicalItem:_,payload:P}}else if(A==="RadialBar"){var F=(T.data||[]).find(function(K){return Mk(b,K)});if(F)return{graphicalItem:_,payload:F}}else if(Wx(_,N)||qx(_,N)||Kd(_,N)){var U=ine({graphicalItem:_,activeTooltipItem:N,itemData:k.data}),W=k.activeIndex===void 0?U:k.activeIndex;return{graphicalItem:we(we({},_),{},{childIndex:W}),payload:Kd(_,N)?k.data[U]:_.props.data[U]}}}return null}},{key:"render",value:function(){var b=this;if(!N2(this))return null;var x=this.props,g=x.children,N=x.className,j=x.width,C=x.height,_=x.style,T=x.compact,E=x.title,k=x.desc,A=i_(x,uoe),P=ht(A,!1);if(T)return ie.createElement(FC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement(zy,Eo({},P,{width:j,height:C,title:E,desc:k}),this.renderClipPath(),S2(g,this.renderMap)));if(this.props.accessibilityLayer){var F,U;P.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,P.role=(U=this.props.role)!==null&&U!==void 0?U:"application",P.onKeyDown=function(K){b.accessibilityManager.keyboardEvent(K)},P.onFocus=function(){b.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return ie.createElement(FC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement("div",Eo({className:vt("recharts-wrapper",N),style:we({position:"relative",cursor:"default",width:j,height:C},_)},W,{ref:function(B){b.container=B}}),ie.createElement(zy,Eo({},P,{width:j,height:C,title:E,desc:k,style:Coe}),this.renderClipPath(),S2(g,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(O.Component);He(y,"displayName",r),He(y,"defaultProps",we({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),He(y,"getDerivedStateFromProps",function(v,w){var S=v.dataKey,b=v.data,x=v.children,g=v.width,N=v.height,j=v.layout,C=v.stackOffset,_=v.margin,T=w.dataStartIndex,E=w.dataEndIndex;if(w.updateId===void 0){var k=u_(v);return we(we(we({},k),{},{updateId:0},p(we(we({props:v},k),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:b,prevWidth:g,prevHeight:N,prevLayout:j,prevStackOffset:C,prevMargin:_,prevChildren:x})}if(S!==w.prevDataKey||b!==w.prevData||g!==w.prevWidth||N!==w.prevHeight||j!==w.prevLayout||C!==w.prevStackOffset||!Lo(_,w.prevMargin)){var A=u_(v),P={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},F=we(we({},c_(w,b,j)),{},{updateId:w.updateId+1}),U=we(we(we({},A),P),F);return we(we(we({},U),p(we({props:v},U),w)),{},{prevDataKey:S,prevData:b,prevWidth:g,prevHeight:N,prevLayout:j,prevStackOffset:C,prevMargin:_,prevChildren:x})}if(!qy(x,w.prevChildren)){var W,K,B,ee,oe=Fa(x,hc),R=oe&&(W=(K=oe.props)===null||K===void 0?void 0:K.startIndex)!==null&&W!==void 0?W:T,V=oe&&(B=(ee=oe.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&B!==void 0?B:E,X=R!==T||V!==E,J=!ct(b),Z=J&&!X?w.updateId:w.updateId+1;return we(we({updateId:Z},p(we(we({props:v},w),{},{updateId:Z,dataStartIndex:R,dataEndIndex:V}),w)),{},{prevChildren:x,dataStartIndex:R,dataEndIndex:V})}return null}),He(y,"renderActiveDot",function(v,w,S){var b;return O.isValidElement(v)?b=O.cloneElement(v,w):st(v)?b=v(w):b=ie.createElement(Ew,w),ie.createElement(dr,{className:"recharts-active-dot",key:S},b)});var h=O.forwardRef(function(w,S){return ie.createElement(y,Eo({},w,{ref:S}))});return h.displayName=y.displayName,h},bg=Moe({chartName:"LineChart",GraphicalChild:gl,axisComponents:[{axisType:"xAxis",AxisComp:Wo},{axisType:"yAxis",AxisComp:qo}],formatAxisMap:Ase});const qi=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onClearAll:a,onViewTransferOrder:s,onRefresh:i})=>{const[l,o]=O.useState(!1),c=O.useRef(null);O.useEffect(()=>{console.log(" NotificationDropdown: Received notifications:",e),console.log(" NotificationDropdown: Number of notifications:",e.length)},[e]),O.useEffect(()=>{const m=p=>{c.current&&!c.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const u=e.filter(m=>!m.read).length,d=m=>{switch(m){case"warning":return n.jsx(El,{className:"h-4 w-4 text-yellow-500"});case"success":return n.jsx(_b,{className:"h-4 w-4 text-green-500"});case"error":return n.jsx(El,{className:"h-4 w-4 text-red-500"});default:return n.jsx(iT,{className:"h-4 w-4 text-blue-500"})}},f=m=>{const y=new Date().getTime()-m.getTime(),h=Math.floor(y/6e4),v=Math.floor(y/36e5),w=Math.floor(y/864e5);return h<1?"Just now":h<60?`${h}m ago`:v<24?`${v}h ago`:`${w}d ago`};return n.jsxs("div",{className:"relative",ref:c,children:[n.jsxs("button",{onClick:()=>o(!l),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Notifications",children:[n.jsx(l2,{className:"h-6 w-6"}),u>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:u>9?"9+":u})]}),l&&n.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[i&&n.jsx("button",{onClick:i,className:"text-sm text-gray-600 hover:text-gray-800 p-1 rounded",title:"Refresh notifications",children:n.jsx(Mr,{className:"h-4 w-4"})}),u>0&&n.jsx("button",{onClick:r,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all read"}),n.jsx("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-800",children:"Clear all"}),n.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.length===0?n.jsxs("div",{className:"p-4 text-center text-gray-500",children:[n.jsx(l2,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),n.jsx("p",{children:"No notifications"})]}):e.map(m=>n.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 ${m.read?"":"bg-blue-50"} ${m.isTransferOrder&&m.transferOrderId&&s?"cursor-pointer hover:bg-blue-100 transition-colors":""}`,onClick:p=>{p.preventDefault(),p.stopPropagation(),console.log(" NotificationDropdown: Notification clicked!"),console.log(" NotificationDropdown: notification =",m),console.log(" NotificationDropdown: isTransferOrder =",m.isTransferOrder),console.log(" NotificationDropdown: transferOrderId =",m.transferOrderId),console.log(" NotificationDropdown: onViewTransferOrder =",!!s),m.isTransferOrder&&m.transferOrderId&&s?(console.log(" NotificationDropdown: All conditions met, calling onViewTransferOrder"),s(m.transferOrderId)):(console.log(" NotificationDropdown: Conditions not met for transfer order"),console.log(" NotificationDropdown: isTransferOrder =",m.isTransferOrder),console.log(" NotificationDropdown: transferOrderId =",m.transferOrderId),console.log(" NotificationDropdown: onViewTransferOrder exists =",!!s))},children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:d(m.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:`text-sm font-medium ${m.read?"text-gray-700":"text-gray-900"}`,children:m.title}),n.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[n.jsx(lx,{className:"h-3 w-3"}),n.jsx("span",{children:f(m.timestamp)})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.message}),m.outlet&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.outlet}),m.isTransferOrder&&m.transferOrderId&&s&&n.jsx("p",{className:"text-xs text-blue-600 mt-1 font-medium",children:"Click to view transfer details "})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[m.isTransferOrder&&m.transferOrderId&&s&&n.jsx("button",{onClick:p=>{p.stopPropagation(),console.log("NotificationDropdown: Clicking View button"),console.log("NotificationDropdown: notification.transferOrderId =",m.transferOrderId),s(m.transferOrderId)},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded transition-colors",title:"View Transfer Order",children:n.jsx(Mi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>t(m.id),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Mark as read",children:n.jsx("div",{className:`w-2 h-2 rounded-full ${m.read?"bg-gray-300":"bg-blue-500"}`})})]})]})},m.id))}),e.length>0&&n.jsx("div",{className:"p-4 border-t border-gray-200",children:n.jsx("button",{onClick:a,className:"w-full text-sm text-gray-600 hover:text-gray-800 text-center",children:"Clear all notifications"})})]})]})};class Roe{constructor(){PN(this,"baseURL");this.baseURL={}.VITE_API_URL||"http://localhost:5000/api"}async request(t,r={}){const a=`${this.baseURL}${t}`,s=r.body instanceof FormData,i=localStorage.getItem("auth_token"),l={};s||(l["Content-Type"]="application/json"),i&&(l.Authorization=`Bearer ${i}`),r.headers&&Object.assign(l,r.headers);const o={headers:l,...r};try{const c=await fetch(a,o),u=await c.json();if(!c.ok)throw new Error(u.message||`HTTP error! status: ${c.status}`);return u}catch(c){throw console.error("API request failed:",c),c}}async login(t){return this.request("/auth/login",{method:"POST",body:JSON.stringify(t)})}async me(){return this.request("/auth/me")}async getUsers(){return this.request("/users")}async createUser(t){return this.request("/users",{method:"POST",body:JSON.stringify(t)})}async healthCheck(){return this.request("/health")}async getRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/raw-materials${a?`?${a}`:""}`;return this.request(s)}async createRawMaterial(t){return this.request("/raw-materials",{method:"POST",body:JSON.stringify(t)})}async updateRawMaterial(t,r){return this.request(`/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRawMaterial(t){return this.request(`/raw-materials/${t}`,{method:"DELETE"})}async syncWithZohoRawMaterials(){return this.request("/sync-zoho/raw-materials",{method:"POST"})}async getCentralKitchens(){return this.request("/central-kitchen")}async getCentralKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/central-kitchen/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getCentralKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/central-kitchen/finished-products${a?`?${a}`:""}`;return this.request(s)}async getItemsList(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search);const a=r.toString();return this.request(`/items-list${a?`?${a}`:""}`)}async syncItemsListFromZoho(){return this.request("/items-list/sync",{method:"POST"})}async getLocationsList(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search);const a=r.toString();return this.request(`/locations-list${a?`?${a}`:""}`)}async syncLocationsFromZoho(){return this.request("/locations-list/sync",{method:"POST"})}async createCentralKitchenRawMaterial(t){return this.request("/central-kitchen/raw-materials",{method:"POST",body:JSON.stringify(t)})}async exportCentralKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/central-kitchen/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Central_Kitchen_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportCentralKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/central-kitchen/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Central_Kitchen_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async getKuwaitCityRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/kuwait-city/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getKuwaitCityFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/kuwait-city/finished-products${a?`?${a}`:""}`;return this.request(s)}async importKuwaitCityRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/kuwait-city/raw-materials/import-excel",{method:"POST",body:r})}async importKuwaitCityFinishedProducts(t){return this.request("/kuwait-city/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importMall360RawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/360-mall/raw-materials/import-excel",{method:"POST",body:r})}async importMall360FinishedProducts(t){return this.request("/360-mall/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importVibeComplexRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/vibe-complex/raw-materials/import-excel",{method:"POST",body:r})}async importVibeComplexFinishedProducts(t){return this.request("/vibe-complex/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async exportKuwaitCityRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/kuwait-city/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Kuwait_City_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportKuwaitCityFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/kuwait-city/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Kuwait_City_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportMall360RawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/360-mall/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Mall360_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportMall360FinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/360-mall/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Mall360_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportVibesComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/vibe-complex/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Vibes_Complex_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportVibesComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.dietaryRestriction&&r.append("dietaryRestriction",t.dietaryRestriction);const a=r.toString(),s=`/vibe-complex/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Vibes_Complex_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportTaibaHospitalRawMaterials(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/taiba-kitchen/raw-materials/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Taiba_Hospital_Raw_Materials_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async exportTaibaHospitalFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status);const a=r.toString(),s=`/taiba-kitchen/finished-products/export${a?`?${a}`:""}`,i=await fetch(`${this.baseURL}${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Export failed: ${i.statusText}`);const l=await i.blob(),o=window.URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=`Taiba_Hospital_Finished_Products_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}async get360MallRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/360-mall/raw-materials${a?`?${a}`:""}`;return this.request(s)}async get360MallFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/360-mall/finished-products${a?`?${a}`:""}`;return this.request(s)}async getVibesComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getVibeComplexRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/raw-materials${a?`?${a}`:""}`;return this.request(s)}async getVibesComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/finished-products${a?`?${a}`:""}`;return this.request(s)}async getVibeComplexFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/vibe-complex/finished-products${a?`?${a}`:""}`;return this.request(s)}async getTaibaKitchenRawMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/taiba-kitchen/raw-materials${a?`?${a}`:""}`;return this.request(s)}async importTaibaKitchenRawMaterialsExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/taiba-kitchen/raw-materials/import-excel",{method:"POST",body:r})}async importTaibaKitchenFinishedProducts(t){return this.request("/taiba-kitchen/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async getTaibaKitchenFinishedProducts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.subCategory&&r.append("subCategory",t.subCategory),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/taiba-kitchen/finished-products${a?`?${a}`:""}`;return this.request(s)}async getNotifications(t,r,a){const s=new URLSearchParams;r&&s.append("type",r),a&&s.append("limit",a.toString());const i=s.toString(),l=`/notifications/${encodeURIComponent(t)}${i?`?${i}`:""}`;return this.request(l)}async markNotificationAsRead(t){return this.request(`/notifications/${t}/read`,{method:"PUT"})}async markAllNotificationsAsRead(t){return this.request("/notifications/mark-all-read",{method:"PUT",body:JSON.stringify({outlet:t})})}async clearAllNotifications(t){return this.request("/notifications/clear-all",{method:"DELETE",body:JSON.stringify({outlet:t})})}async createNotification(t){return this.request("/notifications",{method:"POST",body:JSON.stringify(t)})}async getTransferOrderById(t){return this.request(`/transfer-orders/${t}`)}async updateTransferOrderInventory(t,r){return this.request(`/transfer-order-inventory/${t}/${r}`,{method:"PUT",body:JSON.stringify({action:r})})}async getOutlets(t){return this.request("/outlets")}async getFinishedGoods(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.category&&r.append("category",t.category),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/finished-goods${a?`?${a}`:""}`;return this.request(s)}async createFinishedGood(t){return this.request("/finished-goods",{method:"POST",body:JSON.stringify(t)})}async updateFinishedGood(t,r){return this.request(`/finished-goods/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteFinishedGood(t){return this.request(`/finished-goods/${t}`,{method:"DELETE"})}async getTransferOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.fromOutlet&&r.append("fromOutlet",t.fromOutlet),t!=null&&t.toOutlet&&r.append("toOutlet",t.toOutlet),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/transfer-orders${a?`?${a}`:""}`;return this.request(s)}async deleteTransferOrder(t,r){const a=r?JSON.stringify(r):void 0;return this.request(`/transfer-orders/${t}`,{method:"DELETE",body:a})}async updateTransferOrderStatus(t,r){return this.request(`/transfer-orders/${t}/status`,{method:"PUT",body:JSON.stringify(r)})}async approveTransferOrder(t,r){return this.request(`/transfer-order-inventory/${t}/approve`,{method:"PUT",body:JSON.stringify(r)})}async rejectTransferOrder(t,r){return this.request(`/transfer-order-inventory/${t}/reject`,{method:"PUT",body:JSON.stringify(r)})}async getBillOfMaterials(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/bill-of-materials${a?`?${a}`:""}`;return this.request(s)}async getBillOfMaterialById(t){return this.request(`/bill-of-materials/${t}`)}async createBillOfMaterial(t){return this.request("/bill-of-materials",{method:"POST",body:JSON.stringify(t)})}async updateBillOfMaterial(t,r){return this.request(`/bill-of-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteBillOfMaterial(t){return this.request(`/bill-of-materials/${t}`,{method:"DELETE"})}async createTransfer(t){return this.request("/transfers/create",{method:"POST",body:JSON.stringify(t)})}async createTransferOrder(t){return this.request("/transfer-orders",{method:"POST",body:JSON.stringify(t)})}async getSalesOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.outletId&&r.append("outletId",t.outletId),t!=null&&t.outletCode&&r.append("outletCode",t.outletCode),t!=null&&t.outletName&&r.append("outletName",t.outletName),t!=null&&t.orderStatus&&r.append("orderStatus",t.orderStatus),t!=null&&t.orderType&&r.append("orderType",t.orderType),t!=null&&t.paymentStatus&&r.append("paymentStatus",t.paymentStatus),t!=null&&t.startDate&&r.append("startDate",t.startDate),t!=null&&t.endDate&&r.append("endDate",t.endDate),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/sales-orders${a?`?${a}`:""}`;return this.request(s)}async getSalesOrderById(t){return this.request(`/sales-orders/${t}`)}async createSalesOrder(t){return this.request("/sales-orders",{method:"POST",body:JSON.stringify(t)})}async updateSalesOrder(t,r){return this.request(`/sales-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteSalesOrder(t){return this.request(`/sales-orders/${t}`,{method:"DELETE"})}async updateSalesOrderStatus(t,r){return this.request(`/sales-orders/${t}/status`,{method:"PUT",body:JSON.stringify(r)})}async createIngredientMasterTransfer(t){return this.request("/ingredient-master/create-transfer",{method:"POST",body:JSON.stringify(t)})}async getPurchaseOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",t.page.toString()),t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString(),s=`/purchase-orders${a?`?${a}`:""}`;return this.request(s)}async getPurchaseOrderById(t){return this.request(`/purchase-orders/${t}`)}async createPurchaseOrder(t){return this.request("/purchase-orders",{method:"POST",body:JSON.stringify(t)})}async updatePurchaseOrder(t,r){return this.request(`/purchase-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deletePurchaseOrder(t){return this.request(`/purchase-orders/${t}`,{method:"DELETE"})}async syncZohoBillsToPurchaseOrders(){return this.request("/sync-zoho-bills/purchase-orders",{method:"POST"})}async pushSalesOrderToZoho(t){return this.request(`/sales-orders/${t}/push-to-zoho`,{method:"POST"})}async pushBulkSalesOrdersToZoho(t){return this.request("/sales-orders/push-bulk-to-zoho",{method:"POST",body:JSON.stringify({orderIds:t})})}async updateCentralKitchenFinishedProduct(t,r){return this.request(`/central-kitchen/finished-products/${t}`,{method:"PUT",body:JSON.stringify(r)})}async importCentralKitchenFinishedProducts(t){return this.request("/central-kitchen/finished-products/import",{method:"POST",body:JSON.stringify({products:t})})}async importCentralKitchenExcel(t){const r=new FormData;return r.append("excelFile",t),this.request("/central-kitchen/import-excel",{method:"POST",body:r})}async getCentralKitchenImportStatus(){return this.request("/central-kitchen/import-status",{method:"GET"})}async makeFinishedGood(t){return this.request("/central-kitchen/finished-products/make-finished-good",{method:"POST",body:JSON.stringify(t)})}async getJobOrders(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString();return this.request(`/job-orders${a?`?${a}`:""}`)}async getJobOrder(t){return this.request(`/job-orders/${t}`)}async createJobOrder(t){return this.request("/job-orders",{method:"POST",body:JSON.stringify(t)})}async updateJobOrder(t,r){return this.request(`/job-orders/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteJobOrder(t){return this.request(`/job-orders/${t}`,{method:"DELETE"})}async createOutlet(t){return this.request("/outlets",{method:"POST",body:JSON.stringify(t)})}async getOutlet(t){return this.request(`/outlets/${t}`)}async updateOutlet(t,r){return this.request(`/outlets/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteOutlet(t){return this.request(`/outlets/${t}`,{method:"DELETE"})}async getRawMaterial(t){return this.request(`/raw-materials/${t}`)}async getRawMaterialForecasts(t){const r=new URLSearchParams;t!=null&&t.page&&r.append("page",String(t.page)),t!=null&&t.limit&&r.append("limit",String(t.limit)),t!=null&&t.search&&r.append("search",t.search),t!=null&&t.status&&r.append("status",t.status),t!=null&&t.sortBy&&r.append("sortBy",t.sortBy),t!=null&&t.sortOrder&&r.append("sortOrder",t.sortOrder);const a=r.toString();return this.request(`/raw-material-forecasts${a?`?${a}`:""}`)}async createRawMaterialForecast(t){return this.request("/raw-material-forecasts",{method:"POST",body:JSON.stringify(t)})}async deleteRawMaterialForecast(t){return this.request(`/raw-material-forecasts/${t}`,{method:"DELETE"})}async createCentralKitchenInventoryItem(t){return this.request("/central-kitchen/raw-materials",{method:"POST",body:JSON.stringify(t)})}async updateCentralKitchenRawMaterial(t,r){return this.request(`/central-kitchen/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async getOutletFinishedGoods(t){return this.getFinishedGoods(t)}async updateTaibaKitchenRawMaterial(t,r){return this.request(`/taiba-kitchen/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)})}async updateTaibaKitchenFinishedProduct(t,r){return this.request(`/taiba-kitchen/finished-products/${t}`,{method:"PUT",body:JSON.stringify(r)})}}const de=new Roe,Ki=e=>{const[t,r]=O.useState([]),[a,s]=O.useState(!0),i=O.useCallback(async()=>{if(!e){s(!1);return}try{s(!0),console.log(` useNotifications: Loading notifications for outlet: "${e}"`);const d=await de.getNotifications(e,void 0,20);if(console.log(" useNotifications: API response:",d),d.success){const m=(d.data||[]).map(p=>({id:p.id,title:p.title,message:p.message,type:p.type==="transfer_rejection"?"error":p.type==="transfer_acceptance"||p.type==="transfer_completed"?"success":p.priority==="high"?"warning":"info",timestamp:new Date(p.timestamp),read:p.read,outlet:e,transferOrderId:p.transferOrderId,isTransferOrder:p.type==="transfer_completed"||p.type==="transfer_request"||p.type==="transfer_acceptance"||p.type==="transfer_rejection"||p.isTransferOrder||!1,itemType:p.itemType,priority:p.priority}));r(m)}}catch(d){console.error("Error loading notifications:",d),r([])}finally{s(!1)}},[e]);O.useEffect(()=>{i();const d=setInterval(()=>{i()},3e4);return()=>clearInterval(d)},[i]);const l=O.useCallback(async d=>{try{await de.markNotificationAsRead(d),r(f=>f.map(m=>m.id===d?{...m,read:!0}:m))}catch(f){console.error("Error marking notification as read:",f)}},[]),o=O.useCallback(async()=>{if(e)try{await de.markAllNotificationsAsRead(e),r(d=>d.map(f=>({...f,read:!0})))}catch(d){console.error("Error marking all notifications as read:",d)}},[e]),c=O.useCallback(async()=>{if(e)try{await de.clearAllNotifications(e),r([])}catch(d){console.error("Error clearing notifications:",d)}},[e]),u=O.useCallback(d=>{const f={...d,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,read:!1};r(m=>[f,...m])},[]);return{notifications:t,markAsRead:l,markAllAsRead:o,clearAll:c,addNotification:u,loading:a,refreshNotifications:i}},f_=()=>{const e=O.useMemo(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}},[]),t=!!(e!=null&&e.isAdmin),r=String((e==null?void 0:e.assignedOutletCode)||""),[a,s]=O.useState(()=>{if(!t){if(r==="KUWAIT_CITY")return"kuwait-city";if(r==="MALL_360")return"360-mall";if(r==="VIBE_COMPLEX")return"vibes-complex";if(r==="TAIBA_HOSPITAL")return"taiba-hospital"}return"overall"}),[i,l]=O.useState("all"),[o,c]=O.useState({}),[u,d]=O.useState(null),[f,m]=O.useState(!1),{notifications:p,markAsRead:y,markAllAsRead:h,clearAll:v}=Ki("System"),w=O.useMemo(()=>{const j=[{id:"overall",name:"Overall Sales",icon:u0,color:"text-indigo-600"},{id:"kuwait-city",name:"Kuwait City",icon:hn,color:"text-blue-600"},{id:"360-mall",name:"360 Mall",icon:_m,color:"text-green-600"},{id:"vibes-complex",name:"Vibes Complex",icon:Om,color:"text-orange-600"},{id:"taiba-hospital",name:"Taiba Hospital",icon:Cm,color:"text-purple-600"}];if(t)return j;const C=r==="KUWAIT_CITY"?"kuwait-city":r==="MALL_360"?"360-mall":r==="VIBE_COMPLEX"?"vibes-complex":r==="TAIBA_HOSPITAL"?"taiba-hospital":"kuwait-city";return j.filter(_=>_.id===C)},[t,r]),S={"kuwait-city":{name:"Kuwait City",totalSales:125e3,totalOrders:156,avgOrderValue:801,topProducts:[{name:"Caesar Salad",sales:12500,orders:45,category:"Recipe"},{name:"Grilled Chicken",sales:9800,orders:38,category:"Recipe"},{name:"Pasta Carbonara",sales:8700,orders:32,category:"Recipe"},{name:"Heartbeet",sales:11250,orders:40,category:"Finished Good"}],dailySales:[{day:"Mon",sales:8500},{day:"Tue",sales:9200},{day:"Wed",sales:7800},{day:"Thu",sales:10500},{day:"Fri",sales:12800},{day:"Sat",sales:15200},{day:"Sun",sales:11800}],dailySalesFinished:[{day:"Mon",sales:4200},{day:"Tue",sales:5100},{day:"Wed",sales:3600},{day:"Thu",sales:5600},{day:"Fri",sales:6900},{day:"Sat",sales:7800},{day:"Sun",sales:6e3}],dailySalesRecipe:[{day:"Mon",sales:4300},{day:"Tue",sales:4100},{day:"Wed",sales:4200},{day:"Thu",sales:4900},{day:"Fri",sales:5900},{day:"Sat",sales:7400},{day:"Sun",sales:5800}]},"360-mall":{name:"360 Mall",totalSales:89e3,totalOrders:134,avgOrderValue:664,topProducts:[{name:"Cappuccino",sales:9800,orders:65,category:"Recipe"},{name:"Latte",sales:7200,orders:48,category:"Recipe"},{name:"Croissant",sales:5400,orders:36,category:"Finished Good"}],dailySales:[{day:"Mon",sales:6200},{day:"Tue",sales:6800},{day:"Wed",sales:5900},{day:"Thu",sales:7500},{day:"Fri",sales:9200},{day:"Sat",sales:10800},{day:"Sun",sales:8200}],dailySalesFinished:[{day:"Mon",sales:2e3},{day:"Tue",sales:2100},{day:"Wed",sales:1800},{day:"Thu",sales:2400},{day:"Fri",sales:3e3},{day:"Sat",sales:3500},{day:"Sun",sales:2900}],dailySalesRecipe:[{day:"Mon",sales:4200},{day:"Tue",sales:4700},{day:"Wed",sales:4100},{day:"Thu",sales:5100},{day:"Fri",sales:6200},{day:"Sat",sales:7300},{day:"Sun",sales:5300}]},"vibes-complex":{name:"Vibes Complex",totalSales:67e3,totalOrders:98,avgOrderValue:684,topProducts:[{name:"Burger Deluxe",sales:8200,orders:28,category:"Finished Good"},{name:"Chicken Wrap",sales:6500,orders:25,category:"Finished Good"},{name:"French Fries",sales:4800,orders:32,category:"Finished Good"}],dailySales:[{day:"Mon",sales:4800},{day:"Tue",sales:5200},{day:"Wed",sales:4500},{day:"Thu",sales:5800},{day:"Fri",sales:7200},{day:"Sat",sales:8500},{day:"Sun",sales:6200}],dailySalesFinished:[{day:"Mon",sales:4800},{day:"Tue",sales:5200},{day:"Wed",sales:4500},{day:"Thu",sales:5800},{day:"Fri",sales:7200},{day:"Sat",sales:8500},{day:"Sun",sales:6200}],dailySalesRecipe:[{day:"Mon",sales:0},{day:"Tue",sales:0},{day:"Wed",sales:0},{day:"Thu",sales:0},{day:"Fri",sales:0},{day:"Sat",sales:0},{day:"Sun",sales:0}]},"taiba-hospital":{name:"Taiba Hospital",totalSales:45e3,totalOrders:67,avgOrderValue:672,topProducts:[{name:"Quick Sandwich",sales:6800,orders:22,category:"Finished Good"},{name:"Coffee",sales:4200,orders:35,category:"Recipe"},{name:"Energy Bar",sales:3200,orders:18,category:"Finished Good"}],dailySales:[{day:"Mon",sales:3200},{day:"Tue",sales:3500},{day:"Wed",sales:2800},{day:"Thu",sales:4200},{day:"Fri",sales:4800},{day:"Sat",sales:5200},{day:"Sun",sales:3800}],dailySalesFinished:[{day:"Mon",sales:1800},{day:"Tue",sales:1900},{day:"Wed",sales:1500},{day:"Thu",sales:2200},{day:"Fri",sales:2600},{day:"Sat",sales:2800},{day:"Sun",sales:2e3}],dailySalesRecipe:[{day:"Mon",sales:1400},{day:"Tue",sales:1600},{day:"Wed",sales:1300},{day:"Thu",sales:2e3},{day:"Fri",sales:2200},{day:"Sat",sales:2400},{day:"Sun",sales:1800}]}};O.useEffect(()=>{(async()=>{var C;if(a!=="overall")try{m(!0);const T={"kuwait-city":"Kuwait City","360-mall":"360 Mall","vibes-complex":"Vibes Complex","taiba-hospital":"Taiba Hospital"}[a]||"Kuwait City",E=new Date,k=new Date;k.setDate(E.getDate()-30);const A=await de.getSalesOrders({outletName:T,limit:1e3,sortBy:"orderTiming.orderDate",sortOrder:"desc",startDate:k.toISOString(),endDate:E.toISOString()});if(!A.success||!Array.isArray(A.data)){c(Z=>({...Z,[a]:null})),m(!1);return}const P=A.data,F=P.reduce((Z,le)=>{var xe;return Z+Number(((xe=le==null?void 0:le.orderSummary)==null?void 0:xe.totalAmount)||0)},0),U=P.length,W=U>0?Math.round(F/U):0,K={};for(const Z of P)for(const le of Z.orderItems||[]){const xe=le.productName||le.productCode,ae=`${xe}__${le.category||"Finished Good"}`,M=le.category==="Recipe"?"Recipe":"Finished Good",G=Number(le.totalPrice||Number(le.unitPrice||0)*Number(le.quantity||0)),D=Number(le.quantity||1);K[ae]||(K[ae]={name:xe,sales:0,orders:0,category:M}),K[ae].sales+=G,K[ae].orders+=D}const B=Object.values(K).sort((Z,le)=>le.sales-Z.sales).slice(0,10),ee=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],oe={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6},R=Z=>{const le=new Date(Z);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][le.getDay()]},V=Array.from({length:7},(Z,le)=>({day:ee[le],sales:0})),X=Array.from({length:7},(Z,le)=>({day:ee[le],sales:0})),J=Array.from({length:7},(Z,le)=>({day:ee[le],sales:0}));for(const Z of P){const le=R(((C=Z==null?void 0:Z.orderTiming)==null?void 0:C.orderDate)||(Z==null?void 0:Z.createdAt)||new Date().toISOString()),xe=oe[le==="Sun"?"Sun":le],ae=Array.isArray(Z.orderItems)?Z.orderItems:[];let M=0,G=0;for(const D of ae){const se=Number(D.totalPrice||Number(D.unitPrice||0)*Number(D.quantity||0));D.category==="Recipe"?G+=se:M+=se}V[xe].sales+=M+G,X[xe].sales+=M,J[xe].sales+=G}c(Z=>({...Z,[a]:{name:T,totalSales:F,totalOrders:U,avgOrderValue:W,topProducts:B,dailySales:V,dailySalesFinished:X,dailySalesRecipe:J}}))}catch{c(T=>({...T,[a]:null}))}finally{m(!1)}})()},[a]),O.useEffect(()=>{(async()=>{var C,_,T;try{const E=new Date,k=new Date;k.setDate(E.getDate()-30);const A=await de.getSalesOrders({limit:3e3,sortBy:"orderTiming.orderDate",sortOrder:"desc",startDate:k.toISOString(),endDate:E.toISOString()});if(!A.success||!Array.isArray(A.data)){d(null);return}const P=A.data,F=P.reduce((Z,le)=>{var xe;return Z+Number(((xe=le==null?void 0:le.orderSummary)==null?void 0:xe.totalAmount)||0)},0),U=P.length,W=U>0?Math.round(F/U):0,K={"Kuwait City":{name:"Kuwait City",sales:0,orders:0},"360 Mall":{name:"360 Mall",sales:0,orders:0},"Vibes Complex":{name:"Vibes Complex",sales:0,orders:0},"Taiba Hospital":{name:"Taiba Hospital",sales:0,orders:0}};for(const Z of P){const le=(Z==null?void 0:Z.outletName)||"Unknown";K[le]||(K[le]={name:le,sales:0,orders:0}),K[le].sales+=Number(((C=Z==null?void 0:Z.orderSummary)==null?void 0:C.totalAmount)||0),K[le].orders+=1}const B=Object.values(K);B.forEach(Z=>{Z.percentage=F>0?Math.round(Z.sales/F*100):0});const ee={};for(const Z of P)for(const le of Z.orderItems||[]){const xe=le.productName||le.productCode,ae=`${xe}__${Z.outletName||"Unknown"}`,M=Z.outletName||"Unknown",G=Number(le.totalPrice||Number(le.unitPrice||0)*Number(le.quantity||0)),D=Number(le.quantity||1);ee[ae]||(ee[ae]={name:xe,sales:0,orders:0,outlet:M}),ee[ae].sales+=G,ee[ae].orders+=D}const oe=Object.values(ee).sort((Z,le)=>le.sales-Z.sales).slice(0,10),R=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],V=Z=>{const le=new Date(Z);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][le.getDay()]},X={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6},J=Array.from({length:7},(Z,le)=>({day:R[le],sales:0}));for(const Z of P){const le=V(((_=Z==null?void 0:Z.orderTiming)==null?void 0:_.orderDate)||(Z==null?void 0:Z.createdAt)||new Date().toISOString()),xe=X[le==="Sun"?"Sun":le];J[xe].sales+=Number(((T=Z==null?void 0:Z.orderSummary)==null?void 0:T.totalAmount)||0)}d({totalSales:F,totalOrders:U,avgOrderValue:W,outletBreakdown:B,overallTrend:J,topProductsOverall:oe})}catch{d(null)}})()},[]);const b={totalSales:Object.values(S).reduce((j,C)=>j+C.totalSales,0),totalOrders:Object.values(S).reduce((j,C)=>j+C.totalOrders,0),avgOrderValue:0,outletBreakdown:Object.entries(S).map(([,j])=>({name:j.name,sales:j.totalSales,orders:j.totalOrders,percentage:0}))};b.avgOrderValue=Math.round(b.totalSales/b.totalOrders),b.outletBreakdown.forEach(j=>{j.percentage=Math.round(j.sales/b.totalSales*100)});const x=j=>{if(i==="all")return j;const C=i==="finished"?"Finished Good":"Recipe";return j.filter(_=>(_.category||"").toLowerCase()===C.toLowerCase())},g=j=>i==="finished"?j.dailySalesFinished||j.dailySales:i==="recipe"&&j.dailySalesRecipe||j.dailySales,N=j=>{if(j==="overall")return u?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-indigo-500",children:n.jsx(u0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",u.totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(vr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:u.totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(wu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",u.avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Sales by Outlet"}),n.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:u.outletBreakdown.map((_,T)=>n.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-50 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[n.jsx("div",{className:`p-4 rounded-full mb-4 ${T%2===0?"bg-blue-100":"bg-green-100"}`,children:n.jsx(hn,{className:`${T%2===0?"text-blue-600":"text-green-600"} h-8 w-8`})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:_.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.orders," orders"]}),n.jsxs("p",{className:"font-bold text-gray-900",children:["KWD ",_.sales.toLocaleString()]}),n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[_.percentage,"% of total"]})]})]},_.name))})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Overall Sales Trend"}),n.jsx(tg,{width:"100%",height:300,children:n.jsxs(bg,{data:u.overallTrend,children:[n.jsx(G0,{strokeDasharray:"3 3"}),n.jsx(Wo,{dataKey:"day"}),n.jsx(qo,{}),n.jsx(ln,{formatter:_=>[`KWD ${_}`,"Sales"]}),n.jsx(gl,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:3})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products Overall"}),n.jsx("div",{className:"space-y-4",children:u.topProductsOverall.map((_,T)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-semibold text-blue-600",children:T+1})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:_.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.outlet,"  ",_.orders," orders"]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",_.sales.toLocaleString()]})})]},`${_.name}-${_.outlet}`))})]})]})]}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading overall sales data..."})]})});const C=S[j];return C?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(u0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",C.totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(vr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:C.totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(wu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",C.avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsx("div",{className:"col-span-1 lg:col-span-2",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 text-sm rounded border ${i==="all"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"ALL"}),n.jsx("button",{onClick:()=>l("finished"),className:`px-3 py-1 text-sm rounded border ${i==="finished"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>l("recipe"),className:`px-3 py-1 text-sm rounded border ${i==="recipe"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipe Master"})]})}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Daily Sales Trend"}),n.jsx(tg,{width:"100%",height:300,children:n.jsxs(bg,{data:g(C),children:[n.jsx(G0,{strokeDasharray:"3 3"}),n.jsx(Wo,{dataKey:"day"}),n.jsx(qo,{}),n.jsx(ln,{formatter:_=>[`KWD ${_}`,"Sales"]}),n.jsx(gl,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:2})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products"}),n.jsx("div",{className:"space-y-4",children:x(C.topProducts).map(_=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:_.name}),n.jsx("p",{className:"text-xs text-gray-500",children:_.category||"Unknown"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[_.orders," orders"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",_.sales.toLocaleString()]})})]},_.name))})]})]})]}):null};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Monitor sales performance across all outlets"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[n.jsx(wu,{className:"h-4 w-4"}),n.jsxs("span",{children:["Last updated: ",new Date().toLocaleString()]})]}),n.jsx(qi,{notifications:p,onMarkAsRead:y,onMarkAllAsRead:h,onClearAll:v})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:w.map(j=>{const C=j.icon;return n.jsxs("button",{onClick:()=>s(j.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${a===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(C,{className:`h-4 w-4 ${a===j.id?j.color:""}`}),n.jsx("span",{children:j.name})]},j.id)})})}),a!=="overall"&&o[a]?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-indigo-500",children:n.jsx(u0,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",o[a].totalSales.toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(vr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o[a].totalOrders})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(wu,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["KWD ",o[a].avgOrderValue]})]})]})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 text-sm rounded border ${i==="all"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"ALL"}),n.jsx("button",{onClick:()=>l("finished"),className:`px-3 py-1 text-sm rounded border ${i==="finished"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>l("recipe"),className:`px-3 py-1 text-sm rounded border ${i==="recipe"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipe Master"})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Daily Sales Trend"}),n.jsx(tg,{width:"100%",height:300,children:n.jsxs(bg,{data:g(o[a]),children:[n.jsx(G0,{strokeDasharray:"3 3"}),n.jsx(Wo,{dataKey:"day"}),n.jsx(qo,{}),n.jsx(ln,{formatter:j=>[`KWD ${j}`,"Sales"]}),n.jsx(gl,{type:"monotone",dataKey:"sales",stroke:"#3B82F6",strokeWidth:2})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Products"}),n.jsx("div",{className:"space-y-4",children:x(o[a].topProducts).map(j=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:j.name}),n.jsx("p",{className:"text-xs text-gray-500",children:j.category}),n.jsxs("p",{className:"text-sm text-gray-600",children:[j.orders," orders"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"font-semibold text-gray-900",children:["KWD ",j.sales.toLocaleString()]})})]},`${j.name}-${j.category}`))})]})]})]}):N(a)]})},m_=()=>{const e=Qe(),t=wa(),[r,a]=O.useState(""),[s,i]=O.useState(""),[l,o]=O.useState(!1),[c,u]=O.useState(!1),[d,f]=O.useState(null),m=async p=>{var y,h;p.preventDefault(),f(null),u(!0);try{const v=await de.login({email:r,password:s});if(v!=null&&v.success&&((y=v.data)!=null&&y.token)){const{token:w,user:S}=v.data;localStorage.setItem("auth_token",w),localStorage.setItem("auth_user",JSON.stringify(S));const b=((h=t.state)==null?void 0:h.from)||"/dashboard";e(b)}else f((v==null?void 0:v.message)||"Invalid credentials")}catch{f("Login failed. Please check your credentials and try again.")}finally{u(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg p-8",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100 text-indigo-600 mb-3",children:n.jsx("span",{className:"font-bold",children:"LB"})}),n.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Sign in to your account"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Use your work email to continue"})]}),n.jsxs("form",{onSubmit:m,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:"@"}),n.jsx("input",{type:"email",autoComplete:"email",required:!0,className:"input-field pl-9",placeholder:"you@company.com",value:r,onChange:p=>a(p.target.value)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:"*"}),n.jsx("input",{type:l?"text":"password",autoComplete:"current-password",required:!0,className:"input-field pl-9 pr-24",placeholder:"",value:s,onChange:p=>i(p.target.value)}),n.jsx("button",{type:"button",onClick:()=>o(p=>!p),className:"absolute inset-y-0 right-0 px-3 text-sm text-gray-500 hover:text-gray-700",children:l?"Hide":"Show"})]})]}),d&&n.jsx("div",{className:"text-sm text-red-600",children:d}),n.jsx("button",{type:"submit",disabled:c,className:"btn-primary w-full inline-flex items-center justify-center",children:c?"Signing in...":"Sign In"})]})]}),n.jsx("p",{className:"mt-6 text-center text-xs text-gray-500",children:"By continuing, you agree to our Terms and acknowledge our Privacy Policy."})]})})},$w=()=>{const[e,t]=O.useState({isOpen:!1,title:"",message:"",type:"info",confirmText:"OK",cancelText:"Cancel",showCancel:!1}),r=O.useCallback(async(u,d,f="info")=>new Promise(m=>{t({isOpen:!0,title:u,message:d,type:f,confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(p=>({...p,isOpen:!1})),m(void 0)}})}),[]),a=O.useCallback(async(u,d,f="warning")=>new Promise(m=>{t({isOpen:!0,title:u,message:d,type:f,confirmText:"Confirm",cancelText:"Cancel",showCancel:!0,onConfirm:()=>{t(p=>({...p,isOpen:!1})),m(!0)},onCancel:()=>{t(p=>({...p,isOpen:!1})),m(!1)}})}),[]),s=O.useCallback(async u=>new Promise(d=>{t({isOpen:!0,title:"Confirm Delete",message:`Are you sure you want to delete "${u}"? This action cannot be undone.`,type:"error",confirmText:"Delete",cancelText:"Cancel",showCancel:!0,onConfirm:()=>{t(f=>({...f,isOpen:!1})),d(!0)},onCancel:()=>{t(f=>({...f,isOpen:!1})),d(!1)}})}),[]),i=O.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"success",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),l=O.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"error",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),o=O.useCallback(async(u,d)=>new Promise(f=>{t({isOpen:!0,title:u,message:d,type:"warning",confirmText:"OK",cancelText:"Cancel",showCancel:!1,onConfirm:()=>{t(m=>({...m,isOpen:!1})),f(void 0)}})}),[]),c=O.useCallback(()=>{t(u=>({...u,isOpen:!1}))},[]);return{confirmation:e,showAlert:r,showConfirm:a,showDeleteConfirm:s,showSuccess:i,showError:l,showWarning:o,closeConfirmation:c}},Loe=()=>{const e=Qe();O.useRef(null);const{showAlert:t}=$w(),[r,a]=O.useState([]),[s,i]=O.useState(!0),[l,o]=O.useState(!1);O.useState(!1);const[c,u]=O.useState(!1),[d,f]=O.useState(""),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState("");O.useEffect(()=>{S()},[]),O.useEffect(()=>{},[d,m,y]);const S=async()=>{try{i(!0),console.log(" Loading Ingredient Master from main database");const E=await de.getRawMaterials({limit:1e3});if(E.success&&E.data){const k=Array.isArray(E.data)?E.data:E.data.data||[];console.log(" Loaded Ingredient Master:",k.length,"items"),a(k)}else console.log("  No materials found"),a([])}catch(E){console.error(" Error loading materials:",E),t("Error",`Failed to load materials: ${E instanceof Error?E.message:"Unknown error"}`,"error")}finally{i(!1)}},b=async()=>{console.log(" Create Transfer button clicked!"),console.log(" Current materials count:",r.length);try{u(!0),console.log(" Transfer process started...");const E=[];if(console.log(" Processing materials for distribution..."),r.forEach((W,K)=>{console.log(`  ${K+1}. ${W.materialName} (${W.materialCode})`),W.locationStocks?(console.log("     Location stocks:",W.locationStocks),Object.entries(W.locationStocks).forEach(([B,ee])=>{const oe=ee;if(console.log(`     ${B}: ${oe}`),oe>0){const R=x(B);console.log(`      Mapping ${B} to ${R}`),R&&(E.push({itemCode:W.materialCode,itemName:W.materialName,itemType:"Raw Material",category:W.parentCategory,subCategory:W.subCategory,unitOfMeasure:W.unitOfMeasure,quantity:oe,unitPrice:W.unitPrice,totalValue:oe*W.unitPrice,notes:`Auto-distributed from Ingredient Master to ${R}`}),console.log(`      Added to distribution: ${oe} ${W.unitOfMeasure}  ${R}`))}})):console.log("     No location stocks found")}),console.log(` Total items to distribute: ${E.length}`),E.length===0){console.log("  No items found with stock in any location"),t("No Items to Transfer","No items found with stock in any location.","warning");return}console.log(" Starting direct auto-distribution transfer from Ingredient Master"),console.log(` Processing ${E.length} items`);const k={};E.forEach(W=>{var ee;const K=(ee=W.notes)==null?void 0:ee.match(/to (\w+(?:\s+\w+)*)$/),B=K?K[1]:"Central Kitchen";k[B]||(k[B]=[]),k[B].push(W)}),console.log(` Distributing to ${Object.keys(k).length} outlets:`,Object.keys(k));const A=Object.entries(k).map(async([W,K])=>{const B={fromOutlet:"Ingredient Master",toOutlet:W,transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:`Auto-distribution from Ingredient Master to ${W}`,items:K};console.log(` Creating transfer to ${W}:`,K.length,"items");try{const ee=await de.createIngredientMasterTransfer(B);return ee.success?(console.log(` Transfer to ${W} created successfully:`,ee.data),{outlet:W,success:!0,transferId:ee.data._id||ee.data.id||ee.data.transferOrderId}):(console.error(` Transfer to ${W} failed:`,ee.message),{outlet:W,success:!1,error:ee.message})}catch(ee){return console.error(` Error creating transfer to ${W}:`,ee),{outlet:W,success:!1,error:ee instanceof Error?ee.message:"Unknown error"}}}),P=await Promise.all(A),F=P.filter(W=>W.success),U=P.filter(W=>!W.success);if(console.log(` Transfer Results: ${F.length} successful, ${U.length} failed`),F.length>0){let W=` Auto-distribution completed!

`;W+=` Successfully transferred to ${F.length} outlets:
`,F.forEach(K=>{W+=` ${K.outlet}
`}),U.length>0&&(W+=`
 Failed transfers:
`,U.forEach(K=>{W+=` ${K.outlet}: ${K.error}
`})),t("Transfer Completed",W,"success"),await S()}else t("Transfer Failed","All transfers failed. Please check the console for details.","error")}catch(E){console.error("Error in direct transfer:",E),t("Transfer Error",`Error during transfer: ${E instanceof Error?E.message:"Unknown error"}`,"error")}finally{u(!1)}},x=E=>({centralKitchen:"Central Kitchen",kuwaitCity:"Kuwait City",mall360:"360 Mall",vibesComplex:"Vibe Complex",taibaKitchen:"Taiba Hospital"})[E]||null,g=async()=>{o(!0);try{console.log(" Starting Zoho Inventory Sync...");const E=await de.syncWithZohoRawMaterials();console.log(" ZOHO SYNC API RESPONSE:"),console.log("=".repeat(60)),console.log("Full Response:",E),console.log("=".repeat(60)),console.log("Success:",E.success),console.log("Message:",E.message),console.log("Data:",E.data),console.log("=".repeat(60)),E.success?(console.log(" Sync Details:"),console.log("    Total items processed:",E.data.totalItems),console.log("    Items with SKU:",E.data.itemsWithSKU),console.log("    Items without SKU (skipped):",E.data.itemsWithoutSKU),console.log("    New items added:",E.data.addedItems),console.log("    Items updated:",E.data.updatedItems),console.log("    Errors:",E.data.errorItems),console.log("    Sync timestamp:",E.data.syncTimestamp),console.log("=".repeat(60)),t("Sync Completed Successfully!",` Sync Results:
 Total items processed: ${E.data.totalItems}
 Items with SKU: ${E.data.itemsWithSKU}
 Items without SKU (skipped): ${E.data.itemsWithoutSKU}
 New items added: ${E.data.addedItems}
 Items updated: ${E.data.updatedItems}
 Errors: ${E.data.errorItems}

 Sync completed at: ${new Date(E.data.syncTimestamp).toLocaleString()}`,"success"),await S()):(console.error(" Sync failed:",E.message),t("Sync Failed",E.message||"Unknown error occurred during sync","error"))}catch(E){console.error(" Sync Error:",E),t("Sync Failed",`Failed to sync with Zoho: ${E instanceof Error?E.message:"Unknown error"}`,"error")}finally{o(!1),console.log(" Sync process completed")}},N=(E,k)=>E<=k?{status:"Low",color:"text-red-600 bg-red-100"}:E<=k*1.5?{status:"Medium",color:"text-yellow-600 bg-yellow-100"}:{status:"Good",color:"text-green-600 bg-green-100"},j=r.filter(E=>{const k=E.materialName.toLowerCase().includes(d.toLowerCase())||E.materialCode.toLowerCase().includes(d.toLowerCase())||E.description&&E.description.toLowerCase().includes(d.toLowerCase()),A=m===""||E.subCategory===m,P=y===""||y==="active"&&E.isActive||y==="inactive"&&!E.isActive,F=N(E.currentStock,E.minimumStock),U=v===""||F.status.toLowerCase()===v.toLowerCase();return k&&A&&P&&U}),C=[...new Set(r.map(E=>E.subCategory))],_=async E=>{if(window.confirm("Are you sure you want to delete this material?"))try{(await de.deleteRawMaterial(E)).success?(t("Success","Material deleted successfully","success"),await S()):t("Error","Failed to delete material","error")}catch(k){t("Error",`Error deleting material: ${k instanceof Error?k.message:"Unknown error"}`,"error"),console.error("Error deleting material:",k)}},T=()=>{try{const E=j.map(U=>{var W;return{SKU:U.materialCode,"Item Name":U.materialName,"Parent Category":U.parentCategory||"Raw Materials","SubCategory Name":U.subCategory,Unit:U.unitOfMeasure,"Unit Price (KWD)":((W=U.unitPrice)==null?void 0:W.toFixed(3))||"0.000","Current Stock":U.currentStock,"Minimum Stock":U.minimumStock,Status:U.status,Supplier:U.supplierName||"","Last Synced":U.lastSyncedAt?new Date(U.lastSyncedAt).toLocaleString():"Never"}}),k=Object.keys(E[0]||{}),A=[k.join(","),...E.map(U=>k.map(W=>{const K=U[W];return typeof K=="string"&&(K.includes(",")||K.includes('"'))?`"${K.replace(/"/g,'""')}"`:K}).join(","))].join(`
`),P=new Blob([A],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(P),F.download=`ingredient-master-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F),t("Success",`Exported ${j.length} materials to CSV`,"success")}catch(E){t("Error",`Failed to export: ${E instanceof Error?E.message:"Unknown error"}`,"error"),console.error("Export failed:",E)}};return s?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading ingredients..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ingredient Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant ingredients and raw material inventory"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:g,disabled:l,className:`flex items-center ${l?"btn-disabled":"btn-primary"}`,title:"Sync inventory with Zoho",children:[n.jsx(o2,{className:`h-4 w-4 mr-2 ${l?"animate-spin":""}`}),l?"Syncing...":"Sync Inventory"]}),n.jsxs("button",{onClick:b,disabled:c,className:`flex items-center ${c?"btn-disabled":"btn-secondary"}`,title:"Auto-distribute all items to outlets",children:[n.jsx(Rr,{className:`h-4 w-4 mr-2 ${c?"animate-pulse":""}`}),c?"Transferring...":"Create Transfer"]}),n.jsxs("button",{onClick:()=>e("/raw-materials/add"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Ingredient"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search materials by name, code, or description...",className:"input-field pl-10",value:d,onChange:E=>f(E.target.value)})]})}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("button",{onClick:T,disabled:j.length===0,className:j.length===0?"btn-disabled flex items-center":"btn-secondary flex items-center",title:"Export to CSV",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:m,onChange:E=>p(E.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),C.map(E=>n.jsx("option",{value:E,children:E},E))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:y,onChange:E=>h(E.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Status"}),n.jsxs("select",{className:"input-field",value:v,onChange:E=>w(E.target.value),children:[n.jsx("option",{value:"",children:"All Stock Levels"}),n.jsx("option",{value:"low",children:"Low Stock"}),n.jsx("option",{value:"medium",children:"Medium Stock"}),n.jsx("option",{value:"good",children:"Good Stock"})]})]})]}),n.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600",children:n.jsxs("span",{children:["Showing ",j.length," of ",r.length," materials",(d||m||y||v)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]})})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-purple-50",children:"Central Kitchen"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:"Kuwait City"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-green-50",children:"360 Mall"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-orange-50",children:"Vibes Complex"}),n.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-pink-50",children:"Taiba Kitchen"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Stock"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:14,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[n.jsx("div",{className:"text-gray-400",children:n.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No ingredients found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:r.length===0?"Get started by syncing with Zoho Inventory or adding ingredients manually.":"Try adjusting your filters or search criteria."}),r.length===0&&n.jsxs("button",{onClick:g,disabled:l,className:`${l?"btn-disabled":"btn-primary"} inline-flex items-center`,children:[n.jsx(o2,{className:`h-4 w-4 mr-2 ${l?"animate-spin":""}`}),l?"Syncing...":"Sync Inventory"]})]})]})})}):j.map(E=>{var A,P,F,U,W;const k=N(E.currentStock,E.minimumStock);return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.materialCode}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:E.materialName}),E.description&&n.jsx("div",{className:"text-xs text-gray-500",children:E.description})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:E.subCategory})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:E.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",E.unitPrice?Number(E.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-purple-900 bg-purple-50",children:((A=E.locationStocks)==null?void 0:A.centralKitchen)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-blue-900 bg-blue-50",children:((P=E.locationStocks)==null?void 0:P.kuwaitCity)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-green-900 bg-green-50",children:((F=E.locationStocks)==null?void 0:F.mall360)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-orange-900 bg-orange-50",children:((U=E.locationStocks)==null?void 0:U.vibesComplex)||0}),n.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center text-sm font-semibold text-pink-900 bg-pink-50",children:((W=E.locationStocks)==null?void 0:W.taibaKitchen)||0}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-bold",children:E.currentStock}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.color}`,children:k.status})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.status})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>e(`/raw-materials/edit/${E._id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_(E._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},E._id)})})]})})})]})},$oe=()=>{const e=Qe(),[t,r]=O.useState({materialCode:"",materialName:"",description:"",category:"",unitOfMeasure:"",unitPrice:"",minimumStock:"",maximumStock:"",currentStock:"",supplierId:"",isActive:!0}),[a,s]=O.useState({}),i=["Fresh Produce","Pantry","Dairy Alternatives","Sweeteners","Beverages","Supplements","Superfoods","Dairy","Bakery","Spices","Other"],l=["PC","TBSP","CUP","TSP","PINCH","SCOOP","HANDFUL","SLICE","OZ","LB","KG","LTR","Other"],o=()=>{const d={};return t.materialCode.trim()||(d.materialCode="Material code is required"),t.materialName.trim()||(d.materialName="Material name is required"),t.category||(d.category="Category is required"),t.unitOfMeasure||(d.unitOfMeasure="Unit of measure is required"),(!t.unitPrice||parseFloat(t.unitPrice)<0)&&(d.unitPrice="Valid unit price is required"),(!t.minimumStock||parseInt(t.minimumStock)<0)&&(d.minimumStock="Valid minimum stock is required"),(!t.maximumStock||parseInt(t.maximumStock)<0)&&(d.maximumStock="Valid maximum stock is required"),(!t.currentStock||parseInt(t.currentStock)<0)&&(d.currentStock="Valid current stock is required"),s(d),Object.keys(d).length===0},c=async d=>{if(d.preventDefault(),!!o())try{const f=await de.createRawMaterial(t);f.success?e("/raw-materials"):alert("Failed to create material: "+f.message)}catch(f){alert("Error creating material: "+(f instanceof Error?f.message:"Unknown error")),console.error("Error creating material:",f)}},u=(d,f)=>{r(m=>({...m,[d]:f})),a[d]&&s(m=>({...m,[d]:""}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Material"}),n.jsx("p",{className:"text-gray-600",children:"Create a new raw material entry"})]}),n.jsxs("button",{onClick:()=>e("/raw-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Raw Materials"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:c,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.materialCode?"border-red-500":""}`,value:t.materialCode,onChange:d=>u("materialCode",d.target.value),placeholder:"RM-001"}),a.materialCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.materialCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.materialName?"border-red-500":""}`,value:t.materialName,onChange:d=>u("materialName",d.target.value),placeholder:"Steel Rod 12mm"}),a.materialName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.materialName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.description,onChange:d=>u("description",d.target.value),placeholder:"Material description"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),n.jsxs("select",{className:`input-field ${a.category?"border-red-500":""}`,value:t.category,onChange:d=>u("category",d.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),i.map(d=>n.jsx("option",{value:d,children:d},d))]}),a.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit of Measure *"}),n.jsxs("select",{className:`input-field ${a.unitOfMeasure?"border-red-500":""}`,value:t.unitOfMeasure,onChange:d=>u("unitOfMeasure",d.target.value),children:[n.jsx("option",{value:"",children:"Select Unit"}),l.map(d=>n.jsx("option",{value:d,children:d},d))]}),a.unitOfMeasure&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unitOfMeasure})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing & Stock Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),n.jsx("input",{type:"number",step:"0.01",className:`input-field pl-8 ${a.unitPrice?"border-red-500":""}`,value:t.unitPrice,onChange:d=>u("unitPrice",d.target.value),placeholder:"0.00"})]}),a.unitPrice&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.unitPrice})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.currentStock?"border-red-500":""}`,value:t.currentStock,onChange:d=>u("currentStock",d.target.value),placeholder:"0"}),a.currentStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.currentStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.minimumStock?"border-red-500":""}`,value:t.minimumStock,onChange:d=>u("minimumStock",d.target.value),placeholder:"0"}),a.minimumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.minimumStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${a.maximumStock?"border-red-500":""}`,value:t.maximumStock,onChange:d=>u("maximumStock",d.target.value),placeholder:"0"}),a.maximumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.maximumStock})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier ID"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierId,onChange:d=>u("supplierId",d.target.value),placeholder:"SUP-001"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:t.isActive,onChange:d=>u("isActive",d.target.checked)}),n.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active Material"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Save Material"]})]})]})})]})},Boe=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({materialCode:"",materialName:"",description:"",category:"",unitOfMeasure:"",unitPrice:"",minimumStock:"",maximumStock:"",currentStock:"",supplierId:"",isActive:!0}),[s,i]=O.useState({}),[l,o]=O.useState(!0),c=["Fresh Produce","Pantry","Dairy Alternatives","Sweeteners","Beverages","Supplements","Superfoods","Dairy","Bakery","Spices","Other"],u=["PC","TBSP","CUP","TSP","PINCH","SCOOP","HANDFUL","SLICE","OZ","LB","KG","LTR","Other"];O.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{o(!0);const y=await de.getRawMaterial(t);if(y.success){const h=y.data;a({materialCode:h.materialCode,materialName:h.materialName,description:h.description,category:h.category,unitOfMeasure:h.unitOfMeasure,unitPrice:h.unitPrice.toString(),minimumStock:h.minimumStock.toString(),maximumStock:h.maximumStock.toString(),currentStock:h.currentStock.toString(),supplierId:h.supplierId||"",isActive:h.isActive})}else alert("Failed to load material"),e("/raw-materials")}catch(y){alert("Error loading material: "+(y instanceof Error?y.message:"Unknown error")),e("/raw-materials")}finally{o(!1)}},f=()=>{const y={};return r.materialCode.trim()||(y.materialCode="Material code is required"),r.materialName.trim()||(y.materialName="Material name is required"),r.category||(y.category="Category is required"),r.unitOfMeasure||(y.unitOfMeasure="Unit of measure is required"),(!r.unitPrice||parseFloat(r.unitPrice)<0)&&(y.unitPrice="Valid unit price is required"),(!r.minimumStock||parseInt(r.minimumStock)<0)&&(y.minimumStock="Valid minimum stock is required"),(!r.maximumStock||parseInt(r.maximumStock)<0)&&(y.maximumStock="Valid maximum stock is required"),(!r.currentStock||parseInt(r.currentStock)<0)&&(y.currentStock="Valid current stock is required"),i(y),Object.keys(y).length===0},m=async y=>{if(y.preventDefault(),!!f())try{const h=await de.updateRawMaterial(t,r);h.success?e("/raw-materials"):alert("Failed to update material: "+h.message)}catch(h){alert("Error updating material: "+(h instanceof Error?h.message:"Unknown error")),console.error("Error updating material:",h)}},p=(y,h)=>{a(v=>({...v,[y]:h})),s[y]&&i(v=>({...v,[y]:""}))};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading material data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Material"}),n.jsx("p",{className:"text-gray-600",children:"Update material information"})]}),n.jsxs("button",{onClick:()=>e("/raw-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Raw Materials"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:m,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.materialCode?"border-red-500":""}`,value:r.materialCode,onChange:y=>p("materialCode",y.target.value),placeholder:"RM-001"}),s.materialCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.materialCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.materialName?"border-red-500":""}`,value:r.materialName,onChange:y=>p("materialName",y.target.value),placeholder:"Steel Rod 12mm"}),s.materialName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.materialName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.description,onChange:y=>p("description",y.target.value),placeholder:"Material description"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),n.jsxs("select",{className:`input-field ${s.category?"border-red-500":""}`,value:r.category,onChange:y=>p("category",y.target.value),children:[n.jsx("option",{value:"",children:"Select Category"}),c.map(y=>n.jsx("option",{value:y,children:y},y))]}),s.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit of Measure *"}),n.jsxs("select",{className:`input-field ${s.unitOfMeasure?"border-red-500":""}`,value:r.unitOfMeasure,onChange:y=>p("unitOfMeasure",y.target.value),children:[n.jsx("option",{value:"",children:"Select Unit"}),u.map(y=>n.jsx("option",{value:y,children:y},y))]}),s.unitOfMeasure&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.unitOfMeasure})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing & Stock Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),n.jsx("input",{type:"number",step:"0.01",className:`input-field pl-8 ${s.unitPrice?"border-red-500":""}`,value:r.unitPrice,onChange:y=>p("unitPrice",y.target.value),placeholder:"0.00"})]}),s.unitPrice&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.unitPrice})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.currentStock?"border-red-500":""}`,value:r.currentStock,onChange:y=>p("currentStock",y.target.value),placeholder:"0"}),s.currentStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.currentStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.minimumStock?"border-red-500":""}`,value:r.minimumStock,onChange:y=>p("minimumStock",y.target.value),placeholder:"0"}),s.minimumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.minimumStock})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Stock *"}),n.jsx("input",{type:"number",className:`input-field ${s.maximumStock?"border-red-500":""}`,value:r.maximumStock,onChange:y=>p("maximumStock",y.target.value),placeholder:"0"}),s.maximumStock&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.maximumStock})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier ID"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierId,onChange:y=>p("supplierId",y.target.value),placeholder:"SUP-001"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:r.isActive,onChange:y=>p("isActive",y.target.checked)}),n.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active Material"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update Material"]})]})]})})]})},Uoe=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState(!0),[i,l]=O.useState(null),[o,c]=O.useState(null),[u,d]=O.useState(!1),[f,m]=O.useState(""),[p,y]=O.useState(""),[h,v]=O.useState("createdAt"),[w,S]=O.useState("desc"),[b,x]=O.useState(!1),g=O.useRef(null);O.useEffect(()=>{N()},[]);const N=async()=>{try{s(!0),l(null);const F=await de.getBillOfMaterials({limit:1e3,search:f,status:p,sortBy:h,sortOrder:w});F.success?(console.log("Loaded BOMs:",F.data),r(F.data)):l("Failed to load BOMs")}catch(F){l(F instanceof Error?F.message:"Failed to load BOMs"),console.error("Error loading BOMs:",F)}finally{s(!1)}};O.useEffect(()=>{a||N()},[f,p,h,w]);const j=t.filter(F=>{const U=F.productName.toLowerCase().includes(f.toLowerCase())||F.bomCode.toLowerCase().includes(f.toLowerCase())||F.productDescription.toLowerCase().includes(f.toLowerCase()),W=p===""||F.status===p;return U&&W}),C=()=>{m(""),y(""),v("createdAt"),S("desc")},_=F=>{c(F),d(!0)},T=async F=>{if(console.log("Deleting BOM with ID:",F),!F){alert("Error: BOM ID is missing");return}if(window.confirm("Are you sure you want to delete this BOM?"))try{(await de.deleteBillOfMaterial(F)).success?await N():alert("Failed to delete BOM")}catch(U){alert("Error deleting BOM: "+(U instanceof Error?U.message:"Unknown error")),console.error("Error deleting BOM:",U)}},E=()=>{if(j.length===0){alert("No BOMs to export");return}const F=[["BOM Code","Product Name","Product Description","Status","Version","Created At","Updated At","Notes"].join(","),...j.map(B=>[B.bomCode,B.productName,B.productDescription,B.status,B.version,new Date(B.createdAt).toLocaleDateString(),new Date(B.updatedAt).toLocaleDateString(),""].map(ee=>`"${ee}"`).join(","))].join(`
`),U=new Blob([F],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a"),K=URL.createObjectURL(U);W.setAttribute("href",K),W.setAttribute("download",`bom-recipes-${new Date().toISOString().split("T")[0]}.csv`),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W)},k=()=>{var F;(F=g.current)==null||F.click()},A=async F=>{var W;const U=(W=F.target.files)==null?void 0:W[0];if(U){if(!U.name.toLowerCase().endsWith(".csv")){alert("Please select a CSV file");return}try{x(!0);const B=(await U.text()).split(`
`).filter(V=>V.trim());if(B.length<2){alert("CSV file must contain at least a header row and one data row");return}const ee=B.slice(1);let oe=0,R=0;for(const V of ee)try{const X=V.split(",").map(le=>le.replace(/"/g,"").trim()),J={bomCode:X[0]||"",productName:X[1]||"",productDescription:X[2]||"",status:X[3]||"Draft",version:X[4]||"1.0",notes:X[7]||""};(await de.createBillOfMaterial(J)).success?oe++:R++}catch{R++}alert(`Import completed!

Successfully imported: ${oe} BOMs
Errors: ${R}`),await N()}catch(K){alert("Error importing file: "+(K instanceof Error?K.message:"Unknown error"))}finally{x(!1),g.current&&(g.current.value="")}}},P=()=>{const U=[["BOM Code","Product Name","Product Description","Status","Version","Created At","Updated At","Notes"],["BOM-001","Fresh Green Smoothie","Healthy smoothie with spinach and fruits","Active","1.0","2024-01-15","2024-01-15","Popular breakfast item"],["BOM-002","Protein Power Bowl","High protein meal bowl","Active","1.0","2024-01-15","2024-01-15","Post-workout meal"]].map(ee=>ee.map(oe=>`"${oe}"`).join(",")).join(`
`),W=new Blob([U],{type:"text/csv;charset=utf-8;"}),K=document.createElement("a"),B=URL.createObjectURL(W);K.setAttribute("href",B),K.setAttribute("download","bom-sample-template.csv"),K.style.visibility="hidden",document.body.appendChild(K),K.click(),document.body.removeChild(K)};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading BOMs..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:N,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recipes (BOM)"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant recipes and product formulations"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials/add"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Create Recipe"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search recipes by name, code, or description...",className:"input-field pl-10",value:f,onChange:F=>m(F.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:C,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{onClick:E,className:"btn-secondary flex items-center",title:"Export BOMs to CSV",disabled:j.length===0,children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs("button",{onClick:k,className:"btn-secondary flex items-center",title:"Import BOMs from CSV",disabled:b,children:[n.jsx(Ta,{className:"h-4 w-4 mr-2"}),b?"Importing...":"Import"]}),n.jsxs("button",{onClick:P,className:"btn-secondary flex items-center",title:"Download sample CSV template",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Sample CSV"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:F=>y(F.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Obsolete",children:"Obsolete"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:h,onChange:F=>v(F.target.value),children:[n.jsx("option",{value:"bomCode",children:"BOM Code"}),n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"totalCost",children:"Total Cost"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"createdAt",children:"Date Created"})]}),n.jsx("button",{onClick:()=>S(w==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${w==="asc"?"Descending":"Ascending"}`,children:w==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",j.length," of ",t.length," recipes",(f||p)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),j.length!==t.length&&n.jsx("button",{onClick:C,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"BOM Code"}),n.jsx("th",{className:"table-header",children:"Product Name"}),n.jsx("th",{className:"table-header",children:"Description"}),n.jsx("th",{className:"table-header",children:"Version"}),n.jsx("th",{className:"table-header",children:"Total Cost"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Items"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(F=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:F.bomCode}),n.jsx("td",{className:"table-cell",children:n.jsx("div",{className:"text-gray-900",children:F.productName})}),n.jsx("td",{className:"table-cell",children:n.jsx("div",{className:"text-gray-600 text-sm max-w-xs truncate",children:F.productDescription})}),n.jsx("td",{className:"table-cell",children:F.version}),n.jsxs("td",{className:"table-cell",children:[F.totalCost.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${F.status==="Active"?"bg-green-100 text-green-800":F.status==="Draft"?"bg-yellow-100 text-yellow-800":F.status==="Obsolete"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:F.status})}),n.jsx("td",{className:"table-cell",children:n.jsxs("span",{className:"text-sm text-gray-600",children:[F.items.length," ingredients"]})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>_(F),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Mi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/bill-of-materials/edit/${F.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>T(F.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},F.id))})]})})}),n.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Total Recipes: ",n.jsx("span",{className:"font-semibold text-blue-600",children:t.length})]}),u&&o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"BOM Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BOM Code"}),n.jsx("p",{className:"text-gray-900 font-mono",children:o.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("p",{className:"text-gray-900",children:o.productName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version"}),n.jsx("p",{className:"text-gray-900",children:o.version})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="Active"?"bg-green-100 text-green-800":o.status==="Draft"?"bg-yellow-100 text-yellow-800":o.status==="Obsolete"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:o.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Cost"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[o.totalCost.toFixed(2)," KWD"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effective Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.effectiveDate).toLocaleDateString()})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:o.productDescription})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Ingredients (",o.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.items.map((F,U)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:F.materialCode}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:F.materialName}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:F.quantity}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:F.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[F.unitCost.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[F.totalCost.toFixed(2)," KWD"]})]},U))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:o.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:o.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/bill-of-materials/edit/${o.id}`)},className:"btn-primary",children:"Edit BOM"})]})]})}),n.jsx("input",{type:"file",ref:g,onChange:A,accept:".csv",style:{display:"none"}})]})},Ji=["km (Kilometers)","lb (Pounds)","mg (Milli Grams)","ml (Milli Litre)","m (Meter)","pcs (Pieces)","pcs 6 (Pieces 6)","pcs 12 (Pieces 12)","No.s (Number)","ltr (Liter)","kg 2 (Kilograms2)","kg 5 (Kilograms 5)","kg 10 (Kilograms 10)","Pr (Portion)","kg (Kilograms)"],Woe=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},qoe=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({bomCode:"",productName:"",productDescription:"",version:"1.0",effectiveDate:new Date().toISOString().split("T")[0],status:"Draft",items:[]}),[i,l]=O.useState({}),[o,c]=O.useState(!1),u=["Draft","Active","Obsolete"];O.useEffect(()=>{(async()=>{var b,x,g;try{const N=[];let j=1;for(;;){const _=await de.getCentralKitchenRawMaterials({page:j,limit:1e3});if(_!=null&&_.success&&Array.isArray(_.data)&&N.push(..._.data),!(((b=_==null?void 0:_.pagination)==null?void 0:b.hasNext)||(((x=_==null?void 0:_.pagination)==null?void 0:x.currentPage)||j)<(((g=_==null?void 0:_.pagination)==null?void 0:g.totalPages)||j))||(j+=1,j>20))break}r(N);const C=Array.from(new Set(N.map(_=>(_.unitOfMeasure||"").toString().trim()).filter(_=>_&&_.length>0)))}catch(N){console.error("Failed to load central kitchen raw materials",N)}})()},[]),O.useEffect(()=>{(async()=>{var b;if(!(a.bomCode&&a.bomCode.trim().length>0))try{const x=await de.getBillOfMaterials({limit:1,page:1,sortBy:"createdAt",sortOrder:"desc"});let g="";const N=(b=x==null?void 0:x.data)==null?void 0:b[0],j=N==null?void 0:N.bomCode;if(j){const C=j.match(/^(.*?)(\d+)$/);if(C){const _=C[1],T=parseInt(C[2],10),E=C[2].length;g=`${_}${String(T+1).padStart(E,"0")}`}}if(!g){const C=new Date,_=C.getFullYear(),T=String(C.getMonth()+1).padStart(2,"0"),E=String(C.getDate()).padStart(2,"0"),k=String(C.getHours()).padStart(2,"0"),A=String(C.getMinutes()).padStart(2,"0");g=`BOM-${_}${T}${E}-${k}${A}`}s(C=>({...C,bomCode:g}))}catch{const g=new Date,N=g.getFullYear(),j=String(g.getMonth()+1).padStart(2,"0"),C=String(g.getDate()).padStart(2,"0"),_=String(g.getHours()).padStart(2,"0"),T=String(g.getMinutes()).padStart(2,"0"),E=`BOM-${N}${j}${C}-${_}${T}`;s(k=>({...k,bomCode:E}))}})()},[]);const d=b=>t.find(x=>x.materialCode===b||x.id&&x.id===b),f=b=>{if(!b)return Ji[0]||"";const x=b.toLowerCase().trim(),g=Ji.find(_=>_.toLowerCase().trim()===x);if(g)return g;const N=x,j=Ji.filter(_=>_.split(" ")[0].toLowerCase().trim()===N);if(j.length>0){const _=j.find(T=>{const E=T.split(" "),k=E[0].toLowerCase().trim();if(k===N&&E.length>1){const A=E[1].toLowerCase().trim();if(/^\d/.test(A))return!1}return k===N});return _||j[0]}const C=Ji.find(_=>_.toLowerCase().includes(x)||x.includes(_.split(" ")[0].toLowerCase()));return C||Ji[0]||b},m=(b,x)=>{if(!b)return 0;const g=Number(b.unitPrice||0);if(g<=0)return 0;const N=(b.unitOfMeasure||"").toString().trim().toLowerCase(),j=(x||"").toString().trim().toLowerCase(),C=j.split(" ")[0].split("(")[0].trim();if(N===C||N===j)return g;const _={kg:["kilogram","kilograms","kg"],pcs:["piece","pieces","pcs"],g:["gram","grams","g"],ltr:["liter","litre","liters","litres","ltr","l"],ml:["milliliter","millilitre","milliliters","millilitres","ml"],m:["meter","metre","meters","metres","m"],cm:["centimeter","centimetre","centimeters","centimetres","cm"],in:["inch","inches","in"],ft:["foot","feet","ft"],box:["box","boxes"],dz:["dozen","dz"],pr:["portion","portions","pr"]};for(const[T,E]of Object.entries(_)){const k=E.some(P=>P.toLowerCase()===N),A=E.some(P=>P.toLowerCase()===C);if(k&&A)return g}return N==="kg"&&C==="g"?g/1e3:N==="g"&&C==="kg"?g*1e3:N==="kg"&&C==="grams"?g/1e3:N==="grams"&&C==="kg"?g*1e3:N==="ltr"&&C==="ml"?g/1e3:N==="ml"&&C==="ltr"?g*1e3:N==="liter"&&C==="ml"?g/1e3:N==="ml"&&C==="liter"?g*1e3:g},p=()=>{const b={};if(a.bomCode.trim()?a.bomCode.trim().length<3&&(b.bomCode="BOM code must be at least 3 characters"):b.bomCode="BOM code is required",a.productName.trim()||(b.productName="Product name is required"),a.version.trim()?/^\d+\.\d+$/.test(a.version.trim())||(b.version="Version must be in format X.X (e.g., 1.0)"):b.version="Version is required",!a.effectiveDate)b.effectiveDate="Effective date is required";else{const x=new Date(a.effectiveDate);(isNaN(x.getTime())||x<new Date("2020-01-01"))&&(b.effectiveDate="Please select a valid date after 2020")}return a.items.length===0?b.items="At least one BOM item is required":a.items.forEach((x,g)=>{!x.materialCode.trim()&&!x.materialId&&(b[`item_${g}_code`]="Material is required"),(!x.quantity||x.quantity<=0)&&(b[`item_${g}_quantity`]="Quantity must be greater than 0"),x.unitOfMeasure.trim()||(b[`item_${g}_unit`]="Unit of measure is required")}),l(b),Object.keys(b).length===0},y=async b=>{if(b.preventDefault(),!!p())try{c(!0);const x=a.items.map(C=>{const _=d(C.materialCode||C.materialId),T=C.unitOfMeasure||"grams",E=m(_,T),k=Math.round(E*(C.quantity||0)*100)/100,A=(C.materialCode||(_==null?void 0:_.materialCode)||"").toString().trim().toUpperCase(),P=(C.materialName||(_==null?void 0:_.materialName)||"").toString().trim();return{...C,materialCode:A,materialName:P,unitOfMeasure:T,unitCost:E,totalCost:k}}),g=x.reduce((C,_)=>C+(_.totalCost||0),0),N={bomCode:a.bomCode.trim().toUpperCase().replace(/\s+/g,"-"),productName:a.productName.trim(),productDescription:a.productDescription.trim(),version:a.version.trim(),effectiveDate:a.effectiveDate,status:a.status,totalCost:Math.round(g*100)/100,items:x.map(C=>({materialId:C.materialId||`MAT-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,materialCode:(C.materialCode||"").toString().trim().toUpperCase(),materialName:(C.materialName||"").toString().trim(),quantity:parseFloat(C.quantity.toString()),unitOfMeasure:(C.unitOfMeasure||"").toString().trim(),unitCost:Number(C.unitCost||0),totalCost:Number(C.totalCost||0)})),createdBy:"admin",updatedBy:"admin"};console.log("Creating BOM:",N);const j=await de.createBillOfMaterial(N);j.success?(console.log("BOM created successfully:",j.data),e("/bill-of-materials")):alert("Failed to create BOM: "+j.message)}catch(x){console.error("Error creating BOM:",x),alert("Error creating BOM: "+(x instanceof Error?x.message:"Unknown error"))}finally{c(!1)}},h=(b,x)=>{s(g=>({...g,[b]:x})),i[b]&&l(g=>({...g,[b]:""}))},v=()=>{const b={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:Ji[0]||"",unitCost:0,totalCost:0};s(x=>({...x,items:[...x.items,b]}))},w=(b,x,g)=>{s(N=>({...N,items:N.items.map((j,C)=>{if(C===b){const _={...j,[x]:g},T=_.materialCode||_.materialId||"",E=d(T),k=_.unitOfMeasure||"";let A=0;return E&&k&&(A=m(E,k),A===0&&E.unitPrice&&E.unitPrice>0&&console.log("Unit cost calculation debug:",{materialCode:E.materialCode,materialUnit:E.unitOfMeasure,selectedUnit:k,materialPrice:E.unitPrice})),_.unitCost=A,_.totalCost=Math.round((_.quantity||0)*A*100)/100,_}return j})}))},S=b=>{s(x=>({...x,items:x.items.filter((g,N)=>N!==b)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Recipe"}),n.jsx("p",{className:"text-gray-600",children:"Create a new bill of materials"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Recipes"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BOM Code *"}),n.jsx("input",{type:"text",className:`input-field ${i.bomCode?"border-red-500":""}`,value:a.bomCode,onChange:b=>h("bomCode",b.target.value),placeholder:"SANDWICH-001"}),i.bomCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version *"}),n.jsx("input",{type:"text",className:`input-field ${i.version?"border-red-500":""}`,value:a.version,onChange:b=>h("version",b.target.value),placeholder:"1.0"}),i.version&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.version})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),n.jsx("input",{type:"text",className:`input-field ${i.productName?"border-red-500":""}`,value:a.productName,onChange:b=>h("productName",b.target.value),placeholder:"Chicken Club Sandwich"}),i.productName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.productName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.productDescription,onChange:b=>h("productDescription",b.target.value),placeholder:"Delicious sandwich with grilled chicken, bacon, lettuce, tomato, and mayo on toasted bread"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.effectiveDate?"border-red-500":""}`,value:a.effectiveDate,onChange:b=>h("effectiveDate",b.target.value)}),i.effectiveDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.effectiveDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:b=>h("status",b.target.value),children:u.map(b=>n.jsx("option",{value:b,children:b},b))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recipe Items"}),n.jsxs("button",{type:"button",onClick:v,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),i.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:i.items}),n.jsx("div",{className:"space-y-4",children:a.items.map((b,x)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material code"}),n.jsx(Woe,{value:b.materialCode,onChange:g=>{const N=d(g);if(N){const j=(N.unitOfMeasure||"").toString(),C=f(j);w(x,"materialCode",g),w(x,"materialName",N.materialName||""),w(x,"materialId",N.id||""),w(x,"unitOfMeasure",C)}else w(x,"materialCode",g),w(x,"materialName",""),w(x,"materialId","")},placeholder:"Select material",options:t.map(g=>({value:g.materialCode,label:`${g.materialCode} - ${g.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:b.materialName,readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.quantity,onChange:g=>w(x,"quantity",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("select",{className:"input-field text-sm",value:b.unitOfMeasure,onChange:g=>w(x,"unitOfMeasure",g.target.value),children:Ji.map(g=>n.jsx("option",{value:g,children:g},g))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost"}),n.jsx("input",{type:"number",step:"0.0001",className:"input-field text-sm bg-gray-100",value:Number(b.unitCost||0).toFixed(4),readOnly:!0})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Cost: ",b.totalCost.toFixed(2)," KWD"]})})]},x))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total BOM Cost: ",a.items.reduce((b,x)=>b+x.totalCost,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/bill-of-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:`btn-primary flex items-center ${o?"opacity-60 cursor-not-allowed":""}`,disabled:o,children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),o?"Creating...":"Create BOM"]})]})]})})]})},Koe=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({bomCode:"",productName:"",productDescription:"",version:"",effectiveDate:"",status:"Draft",items:[]}),[s,i]=O.useState({}),[l,o]=O.useState(!0),c=["Draft","Active","Obsolete"],u={id:"1",bomCode:"BOM-001",productName:"Steel Frame Assembly",productDescription:"Complete steel frame for construction",version:"1.0",effectiveDate:new Date("2024-01-01").toISOString(),status:"Active",totalCost:1250.75,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:10,unitOfMeasure:"KG",unitCost:45.5,totalCost:455},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:5,unitOfMeasure:"SQM",unitCost:125,totalCost:625}],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-15").toISOString(),createdBy:"admin",updatedBy:"admin"};O.useEffect(()=>{setTimeout(()=>{a({bomCode:u.bomCode,productName:u.productName,productDescription:u.productDescription,version:u.version,effectiveDate:u.effectiveDate.split("T")[0],status:u.status,items:u.items}),o(!1)},500)},[t]);const d=()=>{const v={};return r.bomCode.trim()||(v.bomCode="BOM code is required"),r.productName.trim()||(v.productName="Product name is required"),r.version.trim()||(v.version="Version is required"),r.effectiveDate||(v.effectiveDate="Effective date is required"),r.items.length===0&&(v.items="At least one BOM item is required"),i(v),Object.keys(v).length===0},f=v=>{if(v.preventDefault(),!d())return;const w=r.items.reduce((b,x)=>b+x.totalCost,0),S={...u,bomCode:r.bomCode,productName:r.productName,productDescription:r.productDescription,version:r.version,effectiveDate:new Date(r.effectiveDate).toISOString(),status:r.status,totalCost:w,items:r.items,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating BOM:",S),e("/bill-of-materials")},m=(v,w)=>{a(S=>({...S,[v]:w})),s[v]&&i(S=>({...S,[v]:""}))},p=()=>{const v={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:"",unitCost:0,totalCost:0};a(w=>({...w,items:[...w.items,v]}))},y=(v,w,S)=>{a(b=>({...b,items:b.items.map((x,g)=>{if(g===v){const N={...x,[w]:S};return(w==="quantity"||w==="unitCost")&&(N.totalCost=N.quantity*N.unitCost),N}return x})}))},h=v=>{a(w=>({...w,items:w.items.filter((S,b)=>b!==v)}))};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading BOM data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Recipe"}),n.jsx("p",{className:"text-gray-600",children:"Update bill of materials information"})]}),n.jsxs("button",{onClick:()=>e("/bill-of-materials"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Recipes"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:f,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BOM Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.bomCode?"border-red-500":""}`,value:r.bomCode,onChange:v=>m("bomCode",v.target.value),placeholder:"SANDWICH-001"}),s.bomCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.bomCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version *"}),n.jsx("input",{type:"text",className:`input-field ${s.version?"border-red-500":""}`,value:r.version,onChange:v=>m("version",v.target.value),placeholder:"1.0"}),s.version&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.version})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.productName?"border-red-500":""}`,value:r.productName,onChange:v=>m("productName",v.target.value),placeholder:"Chicken Club Sandwich"}),s.productName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.productName})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.productDescription,onChange:v=>m("productDescription",v.target.value),placeholder:"Delicious sandwich with grilled chicken, bacon, lettuce, tomato, and mayo on toasted bread"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.effectiveDate?"border-red-500":""}`,value:r.effectiveDate,onChange:v=>m("effectiveDate",v.target.value)}),s.effectiveDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.effectiveDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:v=>m("status",v.target.value),children:c.map(v=>n.jsx("option",{value:v,children:v},v))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recipe Items"}),n.jsxs("button",{type:"button",onClick:p,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((v,w)=>n.jsxs("div",{className:"grid grid-cols-6 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialCode,onChange:S=>y(w,"materialCode",S.target.value),placeholder:"CHICKEN-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialName,onChange:S=>y(w,"materialName",S.target.value),placeholder:"Chicken Breast"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.quantity,onChange:S=>y(w,"quantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.unitOfMeasure,onChange:S=>y(w,"unitOfMeasure",S.target.value),placeholder:"grams"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:v.unitCost,onChange:S=>y(w,"unitCost",parseFloat(S.target.value)||0),placeholder:"0.00"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>h(w),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-6",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Cost: ",v.totalCost.toFixed(2)," KWD"]})})]},w))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total BOM Cost: ",r.items.reduce((v,w)=>v+w.totalCost,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/bill-of-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update BOM"]})]})]})})]})},zoe=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState(!0),[i,l]=O.useState(null),[o,c]=O.useState(null),[u,d]=O.useState(!1),[f,m]=O.useState(""),[p,y]=O.useState(""),[h,v]=O.useState(""),[w,S]=O.useState("createdAt"),[b,x]=O.useState("desc");O.useEffect(()=>{g()},[]);const g=async()=>{try{s(!0),l(null);const T=await de.getJobOrders({limit:1e3,search:f,status:p,priority:h,sortBy:w,sortOrder:b});T.success?(console.log("Loaded Job Orders:",T.data),r(T.data)):l("Failed to load job orders")}catch(T){l(T instanceof Error?T.message:"Failed to load job orders"),console.error("Error loading job orders:",T)}finally{s(!1)}},N=()=>{m(""),y(""),v(""),S("createdAt"),x("desc")},j=T=>{c(T),d(!0)},C=async T=>{if(console.log("Deleting Job Order with ID:",T),!T){alert("Error: Job Order ID is missing");return}if(window.confirm("Are you sure you want to delete this job order?"))try{(await de.deleteJobOrder(T)).success?await g():alert("Failed to delete job order")}catch(E){alert("Error deleting job order: "+(E instanceof Error?E.message:"Unknown error")),console.error("Error deleting job order:",E)}},_=t.filter(T=>{const E=T.jobOrderNumber.toLowerCase().includes(f.toLowerCase())||T.customerName.toLowerCase().includes(f.toLowerCase())||T.customerId.toLowerCase().includes(f.toLowerCase()),k=p===""||T.status.toLowerCase()===p.toLowerCase(),A=h===""||T.priority.toLowerCase()===h.toLowerCase();return E&&k&&A}).sort((T,E)=>{let k,A;switch(w){case"jobOrderNumber":k=T.jobOrderNumber,A=E.jobOrderNumber;break;case"customerName":k=T.customerName,A=E.customerName;break;case"totalAmount":k=T.totalAmount,A=E.totalAmount;break;case"orderDate":k=new Date(T.orderDate).getTime(),A=new Date(E.orderDate).getTime();break;case"createdAt":k=new Date(T.createdAt).getTime(),A=new Date(E.createdAt).getTime();break;default:k=new Date(T.createdAt).getTime(),A=new Date(E.createdAt).getTime()}return b==="asc"?k>A?1:-1:k<A?1:-1});return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading recipe orders..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:g,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recipe Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage your restaurant's recipe orders and customer requests"})]}),n.jsxs("button",{onClick:()=>e("/job-orders/add"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Create Recipe Order"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search orders by number, customer name, or email...",className:"input-field pl-10",value:f,onChange:T=>m(T.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:N,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:T=>y(T.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsxs("select",{className:"input-field",value:h,onChange:T=>v(T.target.value),children:[n.jsx("option",{value:"",children:"All Priority"}),n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"}),n.jsx("option",{value:"Urgent",children:"Urgent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:T=>S(T.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"jobOrderNumber",children:"Order Number"}),n.jsx("option",{value:"customerName",children:"Customer Name"}),n.jsx("option",{value:"totalAmount",children:"Total Amount"}),n.jsx("option",{value:"orderDate",children:"Order Date"})]}),n.jsx("button",{onClick:()=>x(b==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${b==="asc"?"Descending":"Ascending"}`,children:b==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",_.length," of ",t.length," recipe orders",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),_.length!==t.length&&n.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Recipe Order #"}),n.jsx("th",{className:"table-header",children:"Customer"}),n.jsx("th",{className:"table-header",children:"Order Date"}),n.jsx("th",{className:"table-header",children:"Delivery Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Priority"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(T=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:T.jobOrderNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:T.customerName}),n.jsx("div",{className:"text-gray-500 text-sm",children:T.customerId})]})}),n.jsx("td",{className:"table-cell",children:new Date(T.orderDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:new Date(T.deliveryDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T.status==="Completed"?"bg-green-100 text-green-800":T.status==="In Progress"?"bg-blue-100 text-blue-800":T.status==="Pending"?"bg-purple-100 text-purple-800":T.status==="Cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:T.status})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T.priority==="Urgent"?"bg-red-100 text-red-800":T.priority==="High"?"bg-orange-100 text-orange-800":T.priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:T.priority})}),n.jsxs("td",{className:"table-cell",children:[T.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>j(T),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Mi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/job-orders/edit/${T.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>C(T.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},T.id))})]})})}),n.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Total Recipe Orders: ",n.jsx("span",{className:"font-semibold text-blue-600",children:t.length})]}),u&&o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recipe Order Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Number"}),n.jsx("p",{className:"text-gray-900 font-mono",children:o.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),n.jsx("p",{className:"text-gray-900",children:o.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),n.jsx("p",{className:"text-gray-900",children:o.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Contact"}),n.jsx("p",{className:"text-gray-900",children:o.customerId||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.orderDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.deliveryDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.status==="Completed"?"bg-green-100 text-green-800":o.status==="In Progress"?"bg-blue-100 text-blue-800":o.status==="Pending"?"bg-purple-100 text-purple-800":o.status==="Cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:o.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${o.priority==="Urgent"?"bg-red-100 text-red-800":o.priority==="High"?"bg-orange-100 text-orange-800":o.priority==="Medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:o.priority})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[o.totalAmount.toFixed(2)," KWD"]})]})]}),o.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("p",{className:"text-gray-900",children:o.notes})]}),o.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Instructions"}),n.jsx("p",{className:"text-gray-900",children:o.notes})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Recipe Items (",o.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet A"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet B"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet C"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.items.map((T,E)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:T.product}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:T.outletA}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:T.outletB}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:T.outletC}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:T.totalQuantity}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[T.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[T.totalPrice.toFixed(2)," KWD"]})]},E))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:o.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:o.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/job-orders/edit/${o.id}`)},className:"btn-primary",children:"Edit Order"})]})]})})]})},Voe=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Hoe=()=>{const e=Qe(),[t,r]=O.useState({jobOrderNumber:"",customerName:"",customerContact:"",customerEmail:"",orderDate:"",deliveryDate:"",priority:"Medium",status:"Draft",totalAmount:0,items:[],notes:"",specialInstructions:""}),[a,s]=O.useState({}),[i,l]=O.useState([]),[o,c]=O.useState(!1),u=["Low","Medium","High","Urgent"],d=["Draft","Approved","In Progress","Completed","Cancelled"];O.useEffect(()=>{f()},[]);const f=async()=>{try{c(!0);const b=await de.getBillOfMaterials({limit:1e3,status:"Active"});b.success&&l(b.data)}catch(b){console.error("Error loading BOMs:",b)}finally{c(!1)}},m=()=>{const b={};return t.jobOrderNumber.trim()||(b.jobOrderNumber="Job order number is required"),t.customerName.trim()||(b.customerName="Customer name is required"),t.customerEmail.trim()||(b.customerEmail="Customer email is required"),t.orderDate||(b.orderDate="Order date is required"),t.deliveryDate||(b.deliveryDate="Delivery date is required"),t.items.length===0&&(b.items="At least one job order item is required"),s(b),Object.keys(b).length===0},p=async b=>{if(b.preventDefault(),!!m())try{const x=t.items.reduce((j,C)=>j+C.totalPrice,0),g={jobOrderNumber:t.jobOrderNumber.trim().toUpperCase(),customerId:`CUST-${Date.now()}`,customerName:t.customerName.trim(),customerContact:t.customerContact.trim(),customerEmail:t.customerEmail.trim(),orderDate:t.orderDate,deliveryDate:t.deliveryDate,priority:t.priority,status:t.status,totalAmount:x,items:t.items.map(j=>({bomId:j.bomId,bomCode:j.bomCode,product:j.product.trim(),outletA:parseFloat(j.outletA.toString())||0,outletB:parseFloat(j.outletB.toString())||0,outletC:parseFloat(j.outletC.toString())||0,totalQuantity:j.totalQuantity,unitPrice:parseFloat(j.unitPrice.toString()),totalPrice:j.totalPrice})),notes:t.notes.trim(),specialInstructions:t.specialInstructions.trim(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Job Order:",g);const N=await de.createJobOrder(g);N.success?(console.log("Job Order created successfully:",N.data),e("/job-orders")):alert("Failed to create Job Order: "+N.message)}catch(x){console.error("Error creating Job Order:",x),alert("Error creating Job Order: "+(x instanceof Error?x.message:"Unknown error"))}},y=(b,x)=>{r(g=>({...g,[b]:x})),a[b]&&s(g=>({...g,[b]:""}))},h=()=>{const b={bomId:"",bomCode:"",product:"",outletA:0,outletB:0,outletC:0,totalQuantity:0,unitPrice:0,totalPrice:0};r(x=>({...x,items:[...x.items,b]}))},v=(b,x)=>{const g=i.find(N=>N.id===x);g&&r(N=>({...N,items:N.items.map((j,C)=>{if(C===b){const _={...j,bomId:g.id,bomCode:g.bomCode,product:g.productName,unitPrice:parseFloat((g.totalCost/g.items.length).toFixed(2))};return _.totalQuantity=_.outletA+_.outletB+_.outletC,_.totalPrice=parseFloat((_.totalQuantity*_.unitPrice).toFixed(2)),_}return j})}))},w=(b,x,g)=>{r(N=>({...N,items:N.items.map((j,C)=>{if(C===b){const _={...j,[x]:g};return(x==="outletA"||x==="outletB"||x==="outletC")&&(_.totalQuantity=_.outletA+_.outletB+_.outletC),(x==="totalQuantity"||x==="unitPrice"||x==="outletA"||x==="outletB"||x==="outletC")&&(_.totalPrice=parseFloat((_.totalQuantity*_.unitPrice).toFixed(2))),_}return j})}))},S=b=>{r(x=>({...x,items:x.items.filter((g,N)=>N!==b)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Job Order"}),n.jsx("p",{className:"text-gray-600",children:"Create a new job order for production"})]}),n.jsxs("button",{onClick:()=>e("/job-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Job Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:p,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.jobOrderNumber?"border-red-500":""}`,value:t.jobOrderNumber,onChange:b=>y("jobOrderNumber",b.target.value),placeholder:"JO-2024-001"}),a.jobOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.customerName?"border-red-500":""}`,value:t.customerName,onChange:b=>y("customerName",b.target.value),placeholder:"ABC Manufacturing Ltd."}),a.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.customerContact,onChange:b=>y("customerContact",b.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.customerEmail?"border-red-500":""}`,value:t.customerEmail,onChange:b=>y("customerEmail",b.target.value),placeholder:"john@abcmfg.com"}),a.customerEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.orderDate?"border-red-500":""}`,value:t.orderDate,onChange:b=>y("orderDate",b.target.value)}),a.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.deliveryDate?"border-red-500":""}`,value:t.deliveryDate,onChange:b=>y("deliveryDate",b.target.value)}),a.deliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.deliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:t.priority,onChange:b=>y("priority",b.target.value),children:u.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:b=>y("status",b.target.value),children:d.map(b=>n.jsx("option",{value:b,children:b},b))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Job Order Items"}),n.jsxs("button",{type:"button",onClick:h,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((b,x)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Recipe (BOM)"}),n.jsx(Voe,{value:b.bomId||"",onChange:g=>v(x,g),placeholder:"Select Recipe",disabled:o,options:o?[]:i.map(g=>({value:g.id,label:`${g.bomCode} - ${g.productName}`}))}),o&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading recipes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:b.product,readOnly:!0,placeholder:"Auto-filled from BOM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:b.unitPrice,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet A"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.outletA,onChange:g=>w(x,"outletA",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet B"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.outletB,onChange:g=>w(x,"outletB",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet C"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.outletC,onChange:g=>w(x,"outletC",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm bg-gray-100",value:b.totalQuantity,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",b.totalPrice.toFixed(2)," KWD"]})})]},x))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",t.items.reduce((b,x)=>b+x.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:b=>y("notes",b.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialInstructions,onChange:b=>y("specialInstructions",b.target.value),placeholder:"Special manufacturing instructions or requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/job-orders"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Job Order"]})]})]})})]})},Goe=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Xoe=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({jobOrderNumber:"",customerName:"",customerContact:"",customerEmail:"",orderDate:"",deliveryDate:"",priority:"Medium",status:"Draft",totalAmount:0,items:[],notes:"",specialInstructions:""}),[s,i]=O.useState({}),[l,o]=O.useState(!0),[c,u]=O.useState([]),[d,f]=O.useState(!1),m=["Low","Medium","High","Urgent"],p=["Draft","Approved","In Progress","Completed","Cancelled"];O.useEffect(()=>{(async()=>{try{f(!0);const N=await de.getBillOfMaterials({limit:1e3,status:"Active"});N.success&&u(N.data)}catch(N){console.error("Error loading BOMs:",N)}finally{f(!1)}if(!t){o(!1);return}try{o(!0);const N=await de.getJobOrder(t);if(N.success){const j=N.data;a({jobOrderNumber:j.jobOrderNumber,customerName:j.customerName,customerContact:j.customerContact||"",customerEmail:j.customerEmail,orderDate:new Date(j.orderDate).toISOString().split("T")[0],deliveryDate:new Date(j.deliveryDate).toISOString().split("T")[0],priority:j.priority,status:j.status,totalAmount:j.totalAmount,items:j.items.map(C=>({bomId:C.bomId,bomCode:C.bomCode,product:C.product,outletA:C.outletA,outletB:C.outletB,outletC:C.outletC,totalQuantity:C.totalQuantity,unitPrice:C.unitPrice,totalPrice:C.totalPrice})),notes:j.notes||"",specialInstructions:j.specialInstructions||""})}else console.error("Failed to load job order:","API Error"),alert("Failed to load job order: API Error")}catch(N){console.error("Error loading job order:",N),alert("Error loading job order: "+(N instanceof Error?N.message:"Unknown error"))}finally{o(!1)}})()},[t]);const y=()=>{const g={};return r.jobOrderNumber.trim()||(g.jobOrderNumber="Job order number is required"),r.customerName.trim()||(g.customerName="Customer name is required"),r.customerEmail.trim()||(g.customerEmail="Customer email is required"),r.orderDate||(g.orderDate="Order date is required"),r.deliveryDate||(g.deliveryDate="Delivery date is required"),r.items.length===0&&(g.items="At least one job order item is required"),i(g),Object.keys(g).length===0},h=async g=>{if(g.preventDefault(),!!y()){if(!t){alert("Job Order ID is missing");return}try{const N=r.items.reduce((_,T)=>_+T.totalPrice,0),j={jobOrderNumber:r.jobOrderNumber.trim().toUpperCase(),customerId:`CUST-${Date.now()}`,customerName:r.customerName.trim(),customerContact:r.customerContact.trim(),customerEmail:r.customerEmail.trim(),orderDate:r.orderDate,deliveryDate:r.deliveryDate,priority:r.priority,status:r.status,totalAmount:N,items:r.items.map(_=>({bomId:_.bomId,bomCode:_.bomCode,product:_.product.trim(),outletA:parseFloat(_.outletA.toString())||0,outletB:parseFloat(_.outletB.toString())||0,outletC:parseFloat(_.outletC.toString())||0,totalQuantity:_.totalQuantity,unitPrice:parseFloat(_.unitPrice.toString()),totalPrice:_.totalPrice})),notes:r.notes.trim(),specialInstructions:r.specialInstructions.trim(),updatedBy:"admin"};console.log("Updating Job Order:",j);const C=await de.updateJobOrder(t,j);C.success?(console.log("Job Order updated successfully:",C.data),e("/job-orders")):alert("Failed to update Job Order: "+C.message)}catch(N){console.error("Error updating Job Order:",N),alert("Error updating Job Order: "+(N instanceof Error?N.message:"Unknown error"))}}},v=(g,N)=>{a(j=>({...j,[g]:N})),s[g]&&i(j=>({...j,[g]:""}))},w=()=>{const g={bomId:"",bomCode:"",product:"",outletA:0,outletB:0,outletC:0,totalQuantity:0,unitPrice:0,totalPrice:0};a(N=>({...N,items:[...N.items,g]}))},S=(g,N)=>{const j=c.find(C=>C.id===N);j&&a(C=>({...C,items:C.items.map((_,T)=>{if(T===g){const E={..._,bomId:j.id,bomCode:j.bomCode,product:j.productName,unitPrice:parseFloat((j.totalCost/j.items.length).toFixed(2))};return E.totalQuantity=E.outletA+E.outletB+E.outletC,E.totalPrice=parseFloat((E.totalQuantity*E.unitPrice).toFixed(2)),E}return _})}))},b=(g,N,j)=>{a(C=>({...C,items:C.items.map((_,T)=>{if(T===g){const E={..._,[N]:j};return(N==="outletA"||N==="outletB"||N==="outletC")&&(E.totalQuantity=E.outletA+E.outletB+E.outletC),(N==="totalQuantity"||N==="unitPrice"||N==="outletA"||N==="outletB"||N==="outletC")&&(E.totalPrice=parseFloat((E.totalQuantity*E.unitPrice).toFixed(2))),E}return _})}))},x=g=>{a(N=>({...N,items:N.items.filter((j,C)=>C!==g)}))};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading job order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Job Order"}),n.jsx("p",{className:"text-gray-600",children:"Update job order information"})]}),n.jsxs("button",{onClick:()=>e("/job-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Job Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:h,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.jobOrderNumber?"border-red-500":""}`,value:r.jobOrderNumber,onChange:g=>v("jobOrderNumber",g.target.value),placeholder:"JO-2024-001"}),s.jobOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.jobOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.customerName?"border-red-500":""}`,value:r.customerName,onChange:g=>v("customerName",g.target.value),placeholder:"ABC Manufacturing Ltd."}),s.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.customerContact,onChange:g=>v("customerContact",g.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.customerEmail?"border-red-500":""}`,value:r.customerEmail,onChange:g=>v("customerEmail",g.target.value),placeholder:"john@abcmfg.com"}),s.customerEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.customerEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.orderDate?"border-red-500":""}`,value:r.orderDate,onChange:g=>v("orderDate",g.target.value)}),s.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.deliveryDate?"border-red-500":""}`,value:r.deliveryDate,onChange:g=>v("deliveryDate",g.target.value)}),s.deliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:g=>v("priority",g.target.value),children:m.map(g=>n.jsx("option",{value:g,children:g},g))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:g=>v("status",g.target.value),children:p.map(g=>n.jsx("option",{value:g,children:g},g))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Job Order Items"}),n.jsxs("button",{type:"button",onClick:w,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((g,N)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Recipe (BOM)"}),n.jsx(Goe,{value:g.bomId||"",onChange:j=>S(N,j),placeholder:"Select Recipe",disabled:d,options:d?[]:c.map(j=>({value:j.id,label:`${j.bomCode} - ${j.productName}`}))}),d&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading recipes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:g.product,readOnly:!0,placeholder:"Auto-filled from BOM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:g.unitPrice,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet A"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:g.outletA,onChange:j=>b(N,"outletA",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet B"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:g.outletB,onChange:j=>b(N,"outletB",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Outlet C"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:g.outletC,onChange:j=>b(N,"outletC",parseFloat(j.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm bg-gray-100",value:g.totalQuantity,readOnly:!0,placeholder:"Auto-calculated"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>x(N),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",g.totalPrice.toFixed(2)," KWD"]})})]},N))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",r.items.reduce((g,N)=>g+N.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:g=>v("notes",g.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialInstructions,onChange:g=>v("specialInstructions",g.target.value),placeholder:"Special manufacturing instructions or requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/job-orders"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update Job Order"]})]})]})})]})},Yoe=()=>{var A;const[e,t]=O.useState([]),[r,a]=O.useState(!0),[s,i]=O.useState(!1),[l,o]=O.useState(null),[c,u]=O.useState(""),[d,f]=O.useState(""),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState("createdAt"),[S,b]=O.useState("desc");O.useEffect(()=>{x()},[]),O.useEffect(()=>{r||x()},[c,d,m,y,v,S]);const x=async()=>{var P;try{a(!0),o(null);const F=await de.getPurchaseOrders({limit:1e3,search:c,status:d,sortBy:v,sortOrder:S});if(F.success){console.log("Loaded Purchase Orders:",F.data);const U=((P=F.data)==null?void 0:P.data)||[];t(U)}else o("Failed to load purchase orders")}catch(F){o(F instanceof Error?F.message:"Failed to load purchase orders"),console.error("Error loading purchase orders:",F)}finally{a(!1)}},g=async()=>{if(window.confirm("This will fetch all bills from Zoho Inventory and sync them to Purchase Orders. Continue?"))try{i(!0),console.log(" Starting Zoho Bills sync...");const P=await de.syncZohoBillsToPurchaseOrders();if(P.success){const F=P.data,U=(F==null?void 0:F.totalBills)??0,W=(F==null?void 0:F.addedOrders)??0,K=(F==null?void 0:F.updatedOrders)??0,B=(F==null?void 0:F.errorCount)??0,ee=F==null?void 0:F.processingResult;let oe=` Sync Completed Successfully!

 Total Bills: ${U}
 Added: ${W}
 Updated: ${K}
 Errors: ${B}

`;ee&&(oe+=` Inventory Processing:
 Processed: ${ee.processedBills}/${ee.totalProcessedBills} bills
 ${ee.processingMessage}

`),oe+="Refreshing purchase orders...",alert(oe),await x()}else alert(` Sync Failed: ${P.message}`)}catch(P){console.error("Sync error:",P),alert(`Error syncing with Zoho: ${P instanceof Error?P.message:"Unknown error"}`)}finally{i(!1)}},N=P=>{switch(P){case"syncing":return"bg-blue-100 text-blue-800 border-blue-200";case"synced":return"bg-green-100 text-green-800 border-green-200";case"not_synced":return"bg-gray-100 text-gray-800 border-gray-200";case"sync_failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=P=>{switch(P){case"syncing":return"Syncing";case"synced":return"Synced";case"not_synced":return"Not Synced";case"sync_failed":return"Sync Failed";default:return"Unknown"}},C=P=>{switch(P){case"processing":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"processed":return"bg-green-100 text-green-800 border-green-200";case"not_processed":return"bg-gray-100 text-gray-800 border-gray-200";case"failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=P=>{switch(P){case"processing":return"Processing";case"processed":return"Processed";case"not_processed":return"Not Processed";case"failed":return"Failed";default:return"Unknown"}},T=()=>{u(""),f(""),p(""),h(""),w("createdAt"),b("desc")},E=()=>{if(e.length===0){alert("No purchase orders to export");return}const P=[["Bill ID","Vendor ID","Vendor Name","Total Amount","Location","PO Number","Status","Order Date","Expected Delivery","Last Synced"].join(","),...e.map(K=>{var B;return[K.zohoBillId||"-",K.supplierId||"-",K.supplierName||"-",((B=K.totalAmount)==null?void 0:B.toFixed(2))||"0.00",K.zohoLocationName||"-",K.poNumber||"-",K.status||"-",K.orderDate?new Date(K.orderDate).toLocaleDateString():"-",K.expectedDeliveryDate?new Date(K.expectedDeliveryDate).toLocaleDateString():"-",K.lastSyncedAt?new Date(K.lastSyncedAt).toLocaleString():"-"].map(ee=>`"${ee}"`).join(",")})].join(`
`),F=new Blob([P],{type:"text/csv;charset=utf-8;"}),U=document.createElement("a"),W=URL.createObjectURL(F);U.setAttribute("href",W),U.setAttribute("download",`purchase-orders-${new Date().toISOString().split("T")[0]}.csv`),U.style.visibility="hidden",document.body.appendChild(U),U.click(),document.body.removeChild(U)},k=e.filter(P=>{const F=!c||P.poNumber.toLowerCase().includes(c.toLowerCase())||P.supplierName.toLowerCase().includes(c.toLowerCase())||P.zohoBillId&&P.zohoBillId.toLowerCase().includes(c.toLowerCase()),U=!d||P.status===d,W=!m||(P.syncStatus||"not_synced")===m,K=!y||(P.processingStatus||"not_processed")===y;return F&&U&&W&&K});return r?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading purchase orders..."})]})}):l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:l}),n.jsx("button",{onClick:x,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Orders"}),n.jsx("p",{className:"text-gray-600",children:"Bills synced from Zoho Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:x,className:"btn-secondary flex items-center",title:"Refresh purchase orders",disabled:r||s,children:[n.jsx(Mr,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]}),n.jsx("button",{onClick:g,className:"btn-primary flex items-center",disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx(Mr,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Sync from Zoho"]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search by PO number, vendor, or bill ID...",className:"input-field pl-10",value:c,onChange:P=>u(P.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{className:"input-field",value:d,onChange:P=>f(P.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Sent",children:"Sent"}),n.jsx("option",{value:"Confirmed",children:"Confirmed"}),n.jsx("option",{value:"Partial",children:"Partial"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),n.jsxs("select",{className:"input-field",value:m,onChange:P=>p(P.target.value),children:[n.jsx("option",{value:"",children:"All Sync Status"}),n.jsx("option",{value:"syncing",children:"Syncing"}),n.jsx("option",{value:"synced",children:"Synced"}),n.jsx("option",{value:"not_synced",children:"Not Synced"}),n.jsx("option",{value:"sync_failed",children:"Sync Failed"})]}),n.jsxs("select",{className:"input-field",value:y,onChange:P=>h(P.target.value),children:[n.jsx("option",{value:"",children:"All Processing Status"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"processed",children:"Processed"}),n.jsx("option",{value:"not_processed",children:"Not Processed"}),n.jsx("option",{value:"failed",children:"Failed"})]}),n.jsxs("button",{onClick:T,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Clear"]}),n.jsxs("button",{onClick:E,className:"btn-secondary flex items-center",title:"Export to CSV",disabled:e.length===0,children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-4",children:[n.jsxs("span",{children:["Showing ",k.length," purchase order",k.length!==1?"s":"",(c||d||m||y)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(c||d||m||y)&&n.jsx("button",{onClick:T,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]}),k.length===0?n.jsx("div",{className:"card p-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ve,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Purchase Orders Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:c||d?"Try adjusting your search or filters":'Click "Sync from Zoho" to fetch bills from Zoho Inventory'}),!c&&!d&&n.jsxs("button",{onClick:g,className:"btn-primary inline-flex items-center",disabled:s,children:[n.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Sync from Zoho"]})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:k.map(P=>{var F;return n.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow duration-200 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"flex justify-end gap-2 mb-3",children:[n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${N(P.syncStatus||"not_synced")}`,children:j(P.syncStatus||"not_synced")}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${C(P.processingStatus||"not_processed")}`,children:_(P.processingStatus||"not_processed")})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(t8,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Bill ID"})]}),n.jsx("p",{className:"text-sm font-semibold text-gray-900 ml-4",children:P.zohoBillId||"N/A"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Ci,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Vendor ID"})]}),n.jsx("p",{className:"text-xs text-gray-900 ml-4",children:P.supplierId||"N/A"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(Ci,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Vendor Name"})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 ml-4",children:P.supplierName||"Unknown Vendor"})]}),n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(ZR,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Total"})]}),n.jsxs("p",{className:"text-lg font-bold text-green-600 ml-4",children:[((F=P.totalAmount)==null?void 0:F.toFixed(3))||"0.000"," KWD"]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[n.jsx(xd,{className:"h-3 w-3 mr-1 text-gray-400"}),n.jsx("span",{className:"font-medium",children:"Location"})]}),n.jsx("p",{className:"text-xs text-gray-900 ml-4",children:P.zohoLocationName||"Not specified"})]}),n.jsx("div",{className:"border-t border-gray-200 my-4"}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center text-xs",children:[n.jsx(By,{className:"h-2 w-2 mr-1"}),"Order Date"]}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.orderDate?new Date(P.orderDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center text-xs",children:[n.jsx(By,{className:"h-2 w-2 mr-1"}),"Expected Delivery"]}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.expectedDeliveryDate?new Date(P.expectedDeliveryDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs",children:"PO Number"}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.poNumber})]}),P.items&&P.items.length>0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs",children:"Line Items"}),n.jsx("span",{className:"font-medium text-gray-900 text-xs",children:P.items.length})]})]})]},P.id)})}),e.length>0&&n.jsx("div",{className:"card p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Cb,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Synced from Zoho Inventory"}),n.jsxs("p",{className:"text-sm text-blue-700",children:['These purchase orders are automatically synced from Zoho Inventory bills. Click "Sync from Zoho" to fetch the latest bills.',((A=e[0])==null?void 0:A.lastSyncedAt)&&n.jsxs("span",{className:"ml-2 font-medium",children:["Last synced: ",new Date(e[0].lastSyncedAt).toLocaleString()]})]})]})]})})]})},Qoe=()=>{const e=Qe(),[t,r]=O.useState({purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",supplierAddress:"",orderDate:"",expectedDeliveryDate:"",priority:"Medium",status:"Draft",paymentTerms:"Net 30",shippingMethod:"Standard",totalAmount:0,items:[],notes:"",specialInstructions:""}),[a,s]=O.useState({}),i=["Low","Medium","High","Urgent"],l=["Draft","Approved","Sent","Received","Cancelled"],o=["Net 15","Net 30","Net 45","Net 60","COD","Prepaid"],c=["Standard","Express","Overnight","Pickup"],u=()=>{const h={};return t.purchaseOrderNumber.trim()||(h.purchaseOrderNumber="Purchase order number is required"),t.supplierName.trim()||(h.supplierName="Supplier name is required"),t.supplierEmail.trim()||(h.supplierEmail="Supplier email is required"),t.orderDate||(h.orderDate="Order date is required"),t.expectedDeliveryDate||(h.expectedDeliveryDate="Expected delivery date is required"),t.items.length===0&&(h.items="At least one purchase order item is required"),s(h),Object.keys(h).length===0},d=h=>{if(h.preventDefault(),!u())return;const v=t.items.reduce((S,b)=>S+(b.totalPrice||0),0),w={id:Date.now().toString(),poNumber:t.purchaseOrderNumber,supplierId:"SUP-001",supplierName:t.supplierName,orderDate:new Date(t.orderDate).toISOString(),expectedDeliveryDate:new Date(t.expectedDeliveryDate).toISOString(),status:t.status,totalAmount:v,items:t.items.map(S=>({materialId:S.materialId,materialCode:S.materialCode,materialName:S.materialName,quantity:S.quantity,unitPrice:S.unitPrice,totalPrice:S.totalPrice})),terms:t.paymentTerms,notes:t.notes,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Purchase Order:",w),e("/purchase-orders")},f=(h,v)=>{r(w=>({...w,[h]:v})),a[h]&&s(w=>({...w,[h]:""}))},m=()=>{const h={materialId:"",materialCode:"",materialName:"",quantity:0,unitPrice:0,totalPrice:0};r(v=>({...v,items:[...v.items,h]}))},p=(h,v,w)=>{r(S=>({...S,items:S.items.map((b,x)=>{if(x===h){const g={...b,[v]:w};return(v==="quantity"||v==="unitPrice")&&(g.totalPrice=g.quantity*g.unitPrice),g}return b})}))},y=h=>{r(v=>({...v,items:v.items.filter((w,S)=>S!==h)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Purchase Order"}),n.jsx("p",{className:"text-gray-600",children:"Create a new purchase order for materials"})]}),n.jsxs("button",{onClick:()=>e("/purchase-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Purchase Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:d,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supplier Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.purchaseOrderNumber?"border-red-500":""}`,value:t.purchaseOrderNumber,onChange:h=>f("purchaseOrderNumber",h.target.value),placeholder:"PO-2024-001"}),a.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.supplierName?"border-red-500":""}`,value:t.supplierName,onChange:h=>f("supplierName",h.target.value),placeholder:"ABC Steel Suppliers"}),a.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierContact,onChange:h=>f("supplierContact",h.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.supplierEmail?"border-red-500":""}`,value:t.supplierEmail,onChange:h=>f("supplierEmail",h.target.value),placeholder:"john@abcsteel.com"}),a.supplierEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierEmail})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Address"}),n.jsx("textarea",{className:"input-field",rows:2,value:t.supplierAddress,onChange:h=>f("supplierAddress",h.target.value),placeholder:"123 Industrial Street, Manufacturing District, City, State 12345"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.orderDate?"border-red-500":""}`,value:t.orderDate,onChange:h=>f("orderDate",h.target.value)}),a.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.expectedDeliveryDate?"border-red-500":""}`,value:t.expectedDeliveryDate,onChange:h=>f("expectedDeliveryDate",h.target.value)}),a.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.expectedDeliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:t.priority,onChange:h=>f("priority",h.target.value),children:i.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:h=>f("status",h.target.value),children:l.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),n.jsx("select",{className:"input-field",value:t.paymentTerms,onChange:h=>f("paymentTerms",h.target.value),children:o.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Method"}),n.jsx("select",{className:"input-field",value:t.shippingMethod,onChange:h=>f("shippingMethod",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Purchase Order Items"}),n.jsxs("button",{type:"button",onClick:m,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((h,v)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:h.materialCode,onChange:w=>p(v,"materialCode",w.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:h.materialName,onChange:w=>p(v,"materialName",w.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:h.quantity,onChange:w=>p(v,"quantity",parseFloat(w.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:h.unitPrice,onChange:w=>p(v,"unitPrice",parseFloat(w.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:"",onChange:w=>p(v,"deliveryDate",w.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:"",onChange:w=>p(v,"specifications",w.target.value),placeholder:"Grade A, 12mm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>y(v),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",(h.totalPrice||0).toFixed(2)," KWD"]})})]},v))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",t.items.reduce((h,v)=>h+(v.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:h=>f("notes",h.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialInstructions,onChange:h=>f("specialInstructions",h.target.value),placeholder:"Special delivery instructions or quality requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/purchase-orders"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Purchase Order"]})]})]})})]})},Joe=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",supplierAddress:"",orderDate:"",expectedDeliveryDate:"",priority:"Medium",status:"Draft",shippingMethod:"Standard",totalAmount:0,items:[],notes:"",specialInstructions:""}),[s,i]=O.useState({}),[l,o]=O.useState(!0),c=["Low","Medium","High","Urgent"],u=["Draft","Approved","Sent","Received","Cancelled"],d=["Net 15","Net 30","Net 45","Net 60","COD","Prepaid"],f=["Standard","Express","Overnight","Pickup"],m={id:"1",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"ABC Steel Suppliers",orderDate:new Date("2024-01-15").toISOString(),expectedDeliveryDate:new Date("2024-02-15").toISOString(),status:"Confirmed",totalAmount:15750,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:100,unitPrice:45.5,totalPrice:4550},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:50,unitPrice:125,totalPrice:6250},{materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",quantity:200,unitPrice:23.75,totalPrice:4750}],notes:"Supplier requires advance payment for expedited delivery.",createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"};O.useEffect(()=>{setTimeout(()=>{a({purchaseOrderNumber:m.poNumber,supplierName:m.supplierName,supplierContact:"John Smith",supplierEmail:"john@abcsteel.com",supplierAddress:"123 Industrial Street",orderDate:m.orderDate.split("T")[0],expectedDeliveryDate:m.expectedDeliveryDate.split("T")[0],priority:"High",status:"Approved",shippingMethod:"Express",totalAmount:m.totalAmount,items:m.items.map(b=>({...b,totalAmount:b.totalPrice})),notes:m.notes,specialInstructions:"Special handling required"}),o(!1)},500)},[t]);const p=()=>{const b={};return r.purchaseOrderNumber.trim()||(b.purchaseOrderNumber="Purchase order number is required"),r.supplierName.trim()||(b.supplierName="Supplier name is required"),r.supplierEmail.trim()||(b.supplierEmail="Supplier email is required"),r.orderDate||(b.orderDate="Order date is required"),r.expectedDeliveryDate||(b.expectedDeliveryDate="Expected delivery date is required"),r.items.length===0&&(b.items="At least one purchase order item is required"),i(b),Object.keys(b).length===0},y=b=>{if(b.preventDefault(),!p())return;const x=r.items.reduce((N,j)=>N+(j.totalPrice||0),0),g={...m,poNumber:r.purchaseOrderNumber,supplierName:r.supplierName,orderDate:new Date(r.orderDate).toISOString(),expectedDeliveryDate:new Date(r.expectedDeliveryDate).toISOString(),status:r.status,totalAmount:x,items:r.items,notes:r.notes,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Purchase Order:",g),e("/purchase-orders")},h=(b,x)=>{a(g=>({...g,[b]:x})),s[b]&&i(g=>({...g,[b]:""}))},v=()=>{const b={materialId:"",materialCode:"",materialName:"",quantity:0,unitPrice:0,totalPrice:0,totalAmount:0};a(x=>({...x,items:[...x.items,b]}))},w=(b,x,g)=>{a(N=>({...N,items:N.items.map((j,C)=>{if(C===b){const _={...j,[x]:g};return(x==="quantity"||x==="unitPrice")&&(_.totalPrice=_.quantity*_.unitPrice),_}return j})}))},S=b=>{a(x=>({...x,items:x.items.filter((g,N)=>N!==b)}))};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading purchase order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Purchase Order"}),n.jsx("p",{className:"text-gray-600",children:"Update purchase order information"})]}),n.jsxs("button",{onClick:()=>e("/purchase-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Purchase Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supplier Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.purchaseOrderNumber?"border-red-500":""}`,value:r.purchaseOrderNumber,onChange:b=>h("purchaseOrderNumber",b.target.value),placeholder:"PO-2024-001"}),s.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.supplierName?"border-red-500":""}`,value:r.supplierName,onChange:b=>h("supplierName",b.target.value),placeholder:"ABC Steel Suppliers"}),s.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierContact,onChange:b=>h("supplierContact",b.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.supplierEmail?"border-red-500":""}`,value:r.supplierEmail,onChange:b=>h("supplierEmail",b.target.value),placeholder:"john@abcsteel.com"}),s.supplierEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierEmail})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Address"}),n.jsx("textarea",{className:"input-field",rows:2,value:r.supplierAddress,onChange:b=>h("supplierAddress",b.target.value),placeholder:"123 Industrial Street, Manufacturing District, City, State 12345"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.orderDate?"border-red-500":""}`,value:r.orderDate,onChange:b=>h("orderDate",b.target.value)}),s.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.orderDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.expectedDeliveryDate?"border-red-500":""}`,value:r.expectedDeliveryDate,onChange:b=>h("expectedDeliveryDate",b.target.value)}),s.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.expectedDeliveryDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:b=>h("priority",b.target.value),children:c.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:b=>h("status",b.target.value),children:u.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),n.jsx("select",{className:"input-field",value:"",onChange:b=>h("paymentTerms",b.target.value),children:d.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Method"}),n.jsx("select",{className:"input-field",value:r.shippingMethod,onChange:b=>h("shippingMethod",b.target.value),children:f.map(b=>n.jsx("option",{value:b,children:b},b))})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Purchase Order Items"}),n.jsxs("button",{type:"button",onClick:v,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((b,x)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.materialCode,onChange:g=>w(x,"materialCode",g.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:b.materialName,onChange:g=>w(x,"materialName",g.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:b.quantity,onChange:g=>w(x,"quantity",parseFloat(g.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:b.unitPrice,onChange:g=>w(x,"unitPrice",parseFloat(g.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Delivery Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:"",onChange:g=>w(x,"deliveryDate",g.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:"",onChange:g=>w(x,"specifications",g.target.value),placeholder:"Grade A, 12mm"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>S(x),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Amount: ",(b.totalPrice||0).toFixed(2)," KWD"]})})]},x))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Order Amount: ",r.items.reduce((b,x)=>b+(x.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:b=>h("notes",b.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialInstructions,onChange:b=>h("specialInstructions",b.target.value),placeholder:"Special delivery instructions or quality requirements"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/purchase-orders"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update Purchase Order"]})]})]})})]})},Zoe=()=>{const e=Qe(),[t,r]=O.useState([{id:"1",grnNumber:"GRN-2024-001",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"Steel Suppliers Ltd.",receiptDate:new Date("2024-01-20"),status:"Approved",totalAmount:4550,items:[{poItemId:"PO-ITEM-001",materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",orderedQuantity:100,receivedQuantity:100,unitPrice:45.5,totalPrice:4550,qualityStatus:"Accepted",remarks:"Good quality"}],warehouseId:"WH-001",warehouseName:"Main Warehouse",receivedBy:"John Doe",notes:"All items received in good condition",createdAt:new Date("2024-01-20").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"}]),[a,s]=O.useState(""),[i,l]=O.useState(null),[o,c]=O.useState(!1),[u,d]=O.useState(!1),f=O.useRef(null),m=t.filter(b=>b.grnNumber.toLowerCase().includes(a.toLowerCase())||b.supplierName.toLowerCase().includes(a.toLowerCase())),p=b=>{switch(b){case"Approved":return"bg-green-100 text-green-800";case"Draft":return"bg-gray-100 text-gray-800";case"Rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=b=>{window.confirm("Are you sure you want to delete this GRN?")&&r(t.filter(x=>x.id!==b))},h=()=>{if(m.length===0){alert("No GRNs to export");return}const b=[["GRN Number","PO Number","Supplier Name","Receipt Date","Status","Total Amount","Created By","Updated By"].join(","),...m.map(j=>[j.grnNumber,j.poNumber,j.supplierName,j.receiptDate.toLocaleDateString(),j.status,j.totalAmount.toFixed(2),j.createdBy,j.updatedBy].map(C=>`"${C}"`).join(","))].join(`
`),x=new Blob([b],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),N=URL.createObjectURL(x);g.setAttribute("href",N),g.setAttribute("download",`grn-receipts-${new Date().toISOString().split("T")[0]}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)},v=()=>{var b;(b=f.current)==null||b.click()},w=async b=>{var g;const x=(g=b.target.files)==null?void 0:g[0];if(x){if(!x.name.toLowerCase().endsWith(".csv")){alert("Please select a CSV file");return}try{d(!0);const j=(await x.text()).split(`
`).filter(E=>E.trim());if(j.length<2){alert("CSV file must contain at least a header row and one data row");return}const C=j.slice(1);let _=0,T=0;for(const E of C)try{const k=E.split(",").map(P=>P.replace(/"/g,"").trim()),A={id:`grn-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,grnNumber:k[0]||"",poNumber:k[1]||"",supplierId:"SUP-001",supplierName:k[2]||"",warehouseId:"WH-001",warehouseName:"Main Warehouse",receiptDate:new Date(k[3]||new Date().toISOString().split("T")[0]),status:k[4]||"Draft",totalAmount:parseFloat(k[5])||0,items:[],receivedBy:k[6]||"admin",createdBy:k[6]||"admin",updatedBy:k[7]||"admin",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r(P=>[...P,A]),_++}catch{T++}alert(`Import completed!

Successfully imported: ${_} GRNs
Errors: ${T}`)}catch(N){alert("Error importing file: "+(N instanceof Error?N.message:"Unknown error"))}finally{d(!1),f.current&&(f.current.value="")}}},S=()=>{const x=[["GRN Number","PO Number","Supplier Name","Receipt Date","Status","Total Amount","Created By","Updated By"],["GRN-2024-003","PO-2024-003","Fresh Foods Ltd","2024-01-22","Approved","1200.00","admin","admin"],["GRN-2024-004","PO-2024-004","Kitchen Supplies Co","2024-01-23","Draft","850.00","admin","admin"]].map(C=>C.map(_=>`"${_}"`).join(",")).join(`
`),g=new Blob([x],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a"),j=URL.createObjectURL(g);N.setAttribute("href",j),N.setAttribute("download","grn-sample-template.csv"),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Good Receipt Notes"}),n.jsx("p",{className:"text-gray-600",children:"Manage incoming material receipts"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes/add"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Create GRN"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search GRNs...",className:"input-field pl-10",value:a,onChange:b=>s(b.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{onClick:h,className:"btn-secondary flex items-center",title:"Export GRNs to CSV",disabled:m.length===0,children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs("button",{onClick:v,className:"btn-secondary flex items-center",title:"Import GRNs from CSV",disabled:u,children:[n.jsx(Ta,{className:"h-4 w-4 mr-2"}),u?"Importing...":"Import"]}),n.jsxs("button",{onClick:S,className:"btn-secondary flex items-center",title:"Download sample CSV template",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Sample CSV"]})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"GRN Number"}),n.jsx("th",{className:"table-header",children:"PO Number"}),n.jsx("th",{className:"table-header",children:"Supplier"}),n.jsx("th",{className:"table-header",children:"Receipt Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Warehouse"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(b=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:b.grnNumber}),n.jsx("td",{className:"table-cell",children:b.poNumber}),n.jsx("td",{className:"table-cell",children:b.supplierName}),n.jsx("td",{className:"table-cell",children:b.receiptDate.toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(b.status)}`,children:b.status})}),n.jsx("td",{className:"table-cell",children:b.warehouseName}),n.jsxs("td",{className:"table-cell font-medium",children:[b.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{l(b),c(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:n.jsx(Mi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/good-receipt-notes/edit/${b.id}`),className:"text-green-600 hover:text-green-900",title:"Edit",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>y(b.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},b.id))})]})})}),n.jsx("input",{type:"file",ref:f,onChange:w,accept:".csv",style:{display:"none"}})]})},ece=()=>{const e=Qe(),[t,r]=O.useState({grnNumber:"",purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",receiptDate:"",receivedBy:"",inspectedBy:"",status:"Draft",warehouseLocation:"",totalAmount:0,items:[],notes:"",qualityRemarks:"",deliveryChallanNumber:"",transporterName:"",vehicleNumber:""}),[a,s]=O.useState({}),i=["Draft","Approved","Rejected"],l=()=>{const m={};return t.grnNumber.trim()||(m.grnNumber="GRN number is required"),t.purchaseOrderNumber.trim()||(m.purchaseOrderNumber="Purchase order number is required"),t.supplierName.trim()||(m.supplierName="Supplier name is required"),t.receiptDate||(m.receiptDate="Receipt date is required"),t.receivedBy.trim()||(m.receivedBy="Received by is required"),t.items.length===0&&(m.items="At least one GRN item is required"),s(m),Object.keys(m).length===0},o=m=>{if(m.preventDefault(),!l())return;const p=t.items.reduce((h,v)=>h+(v.totalPrice||0),0),y={id:Date.now().toString(),grnNumber:t.grnNumber,poNumber:t.purchaseOrderNumber,supplierId:"SUP-001",supplierName:t.supplierName,receiptDate:new Date(t.receiptDate),status:t.status,totalAmount:p,items:t.items.map(h=>({poItemId:h.poItemId,materialId:h.materialId,materialCode:h.materialCode,materialName:h.materialName,orderedQuantity:h.orderedQuantity,receivedQuantity:h.receivedQuantity,unitPrice:h.unitPrice,totalPrice:h.totalPrice,qualityStatus:h.qualityStatus,remarks:h.remarks})),warehouseId:"WH-001",warehouseName:t.warehouseLocation,receivedBy:t.receivedBy,notes:t.notes,createdAt:new Date,updatedAt:new Date,createdBy:"admin",updatedBy:"admin"};console.log("Creating GRN:",y),e("/good-receipt-notes")},c=(m,p)=>{r(y=>({...y,[m]:p})),a[m]&&s(y=>({...y,[m]:""}))},u=()=>{const m={poItemId:"",materialId:"",materialCode:"",materialName:"",orderedQuantity:0,receivedQuantity:0,unitPrice:0,totalPrice:0,qualityStatus:"Accepted",remarks:"",acceptedQuantity:0,rejectedQuantity:0,totalAmount:0,specifications:"",batchNumber:"",expiryDate:""};r(p=>({...p,items:[...p.items,m]}))},d=(m,p,y)=>{r(h=>({...h,items:h.items.map((v,w)=>{if(w===m){const S={...v,[p]:y};return(p==="receivedQuantity"||p==="unitPrice")&&(S.totalPrice=S.receivedQuantity*S.unitPrice),S}return v})}))},f=m=>{r(p=>({...p,items:p.items.filter((y,h)=>h!==m)}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New GRN"}),n.jsx("p",{className:"text-gray-600",children:"Create a new good receipt note"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to GRNs"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:o,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GRN Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.grnNumber?"border-red-500":""}`,value:t.grnNumber,onChange:m=>c("grnNumber",m.target.value),placeholder:"GRN-2024-001"}),a.grnNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.grnNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${a.purchaseOrderNumber?"border-red-500":""}`,value:t.purchaseOrderNumber,onChange:m=>c("purchaseOrderNumber",m.target.value),placeholder:"PO-2024-001"}),a.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.supplierName?"border-red-500":""}`,value:t.supplierName,onChange:m=>c("supplierName",m.target.value),placeholder:"ABC Steel Suppliers"}),a.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:t.supplierContact,onChange:m=>c("supplierContact",m.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email"}),n.jsx("input",{type:"email",className:"input-field",value:t.supplierEmail,onChange:m=>c("supplierEmail",m.target.value),placeholder:"john@abcsteel.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Date *"}),n.jsx("input",{type:"date",className:`input-field ${a.receiptDate?"border-red-500":""}`,value:t.receiptDate,onChange:m=>c("receiptDate",m.target.value)}),a.receiptDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.receiptDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receipt Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By *"}),n.jsx("input",{type:"text",className:`input-field ${a.receivedBy?"border-red-500":""}`,value:t.receivedBy,onChange:m=>c("receivedBy",m.target.value),placeholder:"Warehouse Manager"}),a.receivedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.receivedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inspected By"}),n.jsx("input",{type:"text",className:"input-field",value:t.inspectedBy,onChange:m=>c("inspectedBy",m.target.value),placeholder:"Quality Inspector"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:m=>c("status",m.target.value),children:i.map(m=>n.jsx("option",{value:m,children:m},m))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Location"}),n.jsx("input",{type:"text",className:"input-field",value:t.warehouseLocation,onChange:m=>c("warehouseLocation",m.target.value),placeholder:"Main Warehouse - Zone A"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Challan Number"}),n.jsx("input",{type:"text",className:"input-field",value:t.deliveryChallanNumber,onChange:m=>c("deliveryChallanNumber",m.target.value),placeholder:"DC-2024-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transporter Name"}),n.jsx("input",{type:"text",className:"input-field",value:t.transporterName,onChange:m=>c("transporterName",m.target.value),placeholder:"ABC Logistics"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Number"}),n.jsx("input",{type:"text",className:"input-field",value:t.vehicleNumber,onChange:m=>c("vehicleNumber",m.target.value),placeholder:"MH-12-AB-1234"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"GRN Items"}),n.jsxs("button",{type:"button",onClick:u,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),a.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:a.items}),n.jsx("div",{className:"space-y-4",children:t.items.map((m,p)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.materialCode,onChange:y=>d(p,"materialCode",y.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.materialName,onChange:y=>d(p,"materialName",y.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ordered Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.orderedQuantity,onChange:y=>d(p,"orderedQuantity",parseFloat(y.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Received Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.receivedQuantity,onChange:y=>d(p,"receivedQuantity",parseFloat(y.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Accepted Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:m.receivedQuantity,onChange:y=>d(p,"receivedQuantity",parseFloat(y.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:m.unitPrice,onChange:y=>d(p,"unitPrice",parseFloat(y.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Batch Number"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.batchNumber||"",onChange:y=>d(p,"batchNumber",y.target.value),placeholder:"B001"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>f(p),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"col-span-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:m.specifications||"",onChange:y=>d(p,"specifications",y.target.value),placeholder:"Grade A, 12mm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:m.expiryDate||"",onChange:y=>d(p,"expiryDate",y.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{className:"input-field text-sm",value:m.qualityStatus,onChange:y=>d(p,"qualityStatus",y.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Total Amount: ",(m.totalPrice||0).toFixed(2)," KWD"]})]})]},p))}),t.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total GRN Amount: ",t.items.reduce((m,p)=>m+(p.totalPrice||0),0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:m=>c("notes",m.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Remarks"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.qualityRemarks,onChange:m=>c("qualityRemarks",m.target.value),placeholder:"Quality inspection remarks and observations"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/good-receipt-notes"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create GRN"]})]})]})})]})},tce=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({grnNumber:"",purchaseOrderNumber:"",supplierName:"",supplierContact:"",supplierEmail:"",receiptDate:"",receivedBy:"",inspectedBy:"",status:"Draft",warehouseLocation:"",totalAmount:0,items:[],notes:"",qualityRemarks:"",deliveryChallanNumber:"",transporterName:"",vehicleNumber:""}),[s,i]=O.useState({}),[l,o]=O.useState(!0),c=["Draft","Approved","Rejected"],u={id:"1",grnNumber:"GRN-2024-001",poNumber:"PO-2024-001",supplierId:"SUP-001",supplierName:"ABC Steel Suppliers",receiptDate:new Date("2024-01-20"),status:"Approved",totalAmount:15750,items:[{poItemId:"POI-001",materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",orderedQuantity:100,receivedQuantity:100,unitPrice:45.5,totalPrice:4550,qualityStatus:"Accepted",remarks:"Good quality"},{poItemId:"POI-002",materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",orderedQuantity:50,receivedQuantity:50,unitPrice:125,totalPrice:6250,qualityStatus:"Accepted",remarks:"Excellent quality"},{poItemId:"POI-003",materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",orderedQuantity:200,receivedQuantity:200,unitPrice:23.75,totalPrice:4750,qualityStatus:"Accepted",remarks:"Good quality"}],warehouseId:"WH-001",warehouseName:"Main Warehouse",receivedBy:"Warehouse Manager",notes:"All materials received in good condition.",createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-21"),createdBy:"admin",updatedBy:"admin"};O.useEffect(()=>{setTimeout(()=>{a({grnNumber:u.grnNumber,purchaseOrderNumber:u.poNumber,supplierName:u.supplierName,supplierContact:"John Smith",supplierEmail:"john@abcsteel.com",receiptDate:u.receiptDate.toISOString().split("T")[0],receivedBy:u.receivedBy,inspectedBy:"Quality Inspector",status:u.status,warehouseLocation:u.warehouseName,totalAmount:u.totalAmount,items:u.items.map(v=>({...v,acceptedQuantity:v.receivedQuantity,rejectedQuantity:0,totalAmount:v.totalPrice,specifications:"Standard specifications",batchNumber:"BATCH-001",expiryDate:"2025-12-31"})),notes:u.notes,qualityRemarks:"Quality inspection completed",deliveryChallanNumber:"DC-2024-001",transporterName:"ABC Logistics",vehicleNumber:"MH-12-AB-1234"}),o(!1)},500)},[t]);const d=()=>{const v={};return r.grnNumber.trim()||(v.grnNumber="GRN number is required"),r.purchaseOrderNumber.trim()||(v.purchaseOrderNumber="Purchase order number is required"),r.supplierName.trim()||(v.supplierName="Supplier name is required"),r.receiptDate||(v.receiptDate="Receipt date is required"),r.receivedBy.trim()||(v.receivedBy="Received by is required"),r.items.length===0&&(v.items="At least one GRN item is required"),i(v),Object.keys(v).length===0},f=v=>{if(v.preventDefault(),!d())return;const w=r.items.reduce((b,x)=>b+x.totalAmount,0),S={...u,grnNumber:r.grnNumber,poNumber:r.purchaseOrderNumber,supplierName:r.supplierName,receiptDate:new Date(r.receiptDate),receivedBy:r.receivedBy,status:r.status,warehouseName:r.warehouseLocation,totalAmount:w,items:r.items.map(b=>({poItemId:b.poItemId,materialId:b.materialId,materialCode:b.materialCode,materialName:b.materialName,orderedQuantity:b.orderedQuantity,receivedQuantity:b.receivedQuantity,unitPrice:b.unitPrice,totalPrice:b.totalAmount,qualityStatus:b.qualityStatus,remarks:b.remarks})),notes:r.notes,updatedAt:new Date,updatedBy:"admin"};console.log("Updating GRN:",S),e("/good-receipt-notes")},m=(v,w)=>{a(S=>({...S,[v]:w})),s[v]&&i(S=>({...S,[v]:""}))},p=()=>{const v={poItemId:"",materialId:"",materialCode:"",materialName:"",orderedQuantity:0,receivedQuantity:0,unitPrice:0,totalPrice:0,qualityStatus:"Accepted",remarks:"",acceptedQuantity:0,rejectedQuantity:0,totalAmount:0,specifications:"",batchNumber:"",expiryDate:""};a(w=>({...w,items:[...w.items,v]}))},y=(v,w,S)=>{a(b=>({...b,items:b.items.map((x,g)=>{if(g===v){const N={...x,[w]:S};return(w==="acceptedQuantity"||w==="unitPrice")&&(N.totalAmount=N.acceptedQuantity*N.unitPrice),N}return x})}))},h=v=>{a(w=>({...w,items:w.items.filter((S,b)=>b!==v)}))};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading GRN data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit GRN"}),n.jsx("p",{className:"text-gray-600",children:"Update good receipt note information"})]}),n.jsxs("button",{onClick:()=>e("/good-receipt-notes"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to GRNs"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:f,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GRN Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.grnNumber?"border-red-500":""}`,value:r.grnNumber,onChange:v=>m("grnNumber",v.target.value),placeholder:"GRN-2024-001"}),s.grnNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.grnNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.purchaseOrderNumber?"border-red-500":""}`,value:r.purchaseOrderNumber,onChange:v=>m("purchaseOrderNumber",v.target.value),placeholder:"PO-2024-001"}),s.purchaseOrderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.purchaseOrderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.supplierName?"border-red-500":""}`,value:r.supplierName,onChange:v=>m("supplierName",v.target.value),placeholder:"ABC Steel Suppliers"}),s.supplierName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.supplierName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Contact"}),n.jsx("input",{type:"text",className:"input-field",value:r.supplierContact,onChange:v=>m("supplierContact",v.target.value),placeholder:"John Smith"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Email"}),n.jsx("input",{type:"email",className:"input-field",value:r.supplierEmail,onChange:v=>m("supplierEmail",v.target.value),placeholder:"john@abcsteel.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.receiptDate?"border-red-500":""}`,value:r.receiptDate,onChange:v=>m("receiptDate",v.target.value)}),s.receiptDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.receiptDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receipt Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By *"}),n.jsx("input",{type:"text",className:`input-field ${s.receivedBy?"border-red-500":""}`,value:r.receivedBy,onChange:v=>m("receivedBy",v.target.value),placeholder:"Warehouse Manager"}),s.receivedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.receivedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inspected By"}),n.jsx("input",{type:"text",className:"input-field",value:r.inspectedBy,onChange:v=>m("inspectedBy",v.target.value),placeholder:"Quality Inspector"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:v=>m("status",v.target.value),children:c.map(v=>n.jsx("option",{value:v,children:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Location"}),n.jsx("input",{type:"text",className:"input-field",value:r.warehouseLocation,onChange:v=>m("warehouseLocation",v.target.value),placeholder:"Main Warehouse - Zone A"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Challan Number"}),n.jsx("input",{type:"text",className:"input-field",value:r.deliveryChallanNumber,onChange:v=>m("deliveryChallanNumber",v.target.value),placeholder:"DC-2024-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transporter Name"}),n.jsx("input",{type:"text",className:"input-field",value:r.transporterName,onChange:v=>m("transporterName",v.target.value),placeholder:"ABC Logistics"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Number"}),n.jsx("input",{type:"text",className:"input-field",value:r.vehicleNumber,onChange:v=>m("vehicleNumber",v.target.value),placeholder:"MH-12-AB-1234"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"GRN Items"}),n.jsxs("button",{type:"button",onClick:p,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((v,w)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialCode,onChange:S=>y(w,"materialCode",S.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.materialName,onChange:S=>y(w,"materialName",S.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ordered Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.orderedQuantity,onChange:S=>y(w,"orderedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Received Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.receivedQuantity,onChange:S=>y(w,"receivedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Accepted Qty"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:v.acceptedQuantity,onChange:S=>y(w,"acceptedQuantity",parseFloat(S.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:v.unitPrice,onChange:S=>y(w,"unitPrice",parseFloat(S.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Batch Number"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.batchNumber,onChange:S=>y(w,"batchNumber",S.target.value),placeholder:"B001"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>h(w),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsxs("div",{className:"col-span-8",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specifications"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:v.specifications,onChange:S=>y(w,"specifications",S.target.value),placeholder:"Grade A, 12mm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{type:"date",className:"input-field text-sm",value:v.expiryDate,onChange:S=>y(w,"expiryDate",S.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{className:"input-field text-sm",value:v.qualityStatus,onChange:S=>y(w,"qualityStatus",S.target.value),children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Total Amount: ",v.totalAmount.toFixed(2)," KWD"]})]})]},w))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total GRN Amount: ",r.items.reduce((v,w)=>v+w.totalAmount,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:v=>m("notes",v.target.value),placeholder:"Additional notes or comments"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Remarks"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.qualityRemarks,onChange:v=>m("qualityRemarks",v.target.value),placeholder:"Quality inspection remarks and observations"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/good-receipt-notes"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update GRN"]})]})]})})]})},rce=()=>{const e=Qe(),[t,r]=O.useState([{id:"1",warehouseCode:"WH-001",warehouseName:"Main Warehouse",description:"Primary storage facility",address:{street:"123 Industrial Ave",city:"Industrial City",state:"State",zipCode:"12345",country:"Country"},capacity:1e4,currentCapacity:7500,managerId:"MGR-001",managerName:"John Smith",isActive:!0,storageTypes:["Dry Storage","Cold Storage"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-15").toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"2",warehouseCode:"WH-002",warehouseName:"Secondary Warehouse",description:"Secondary storage facility",address:{street:"456 Storage St",city:"Storage City",state:"State",zipCode:"67890",country:"Country"},capacity:5e3,currentCapacity:2e3,managerId:"MGR-002",managerName:"Jane Doe",isActive:!0,storageTypes:["Dry Storage"],createdAt:new Date("2024-01-16").toISOString(),updatedAt:new Date("2024-01-16").toISOString(),createdBy:"admin",updatedBy:"admin"}]),[a,s]=O.useState(""),i=t.filter(u=>u.warehouseName.toLowerCase().includes(a.toLowerCase())||u.warehouseCode.toLowerCase().includes(a.toLowerCase())),l=(u,d)=>u/d*100,o=u=>u>=90?"bg-red-500":u>=75?"bg-yellow-500":"bg-green-500",c=u=>{window.confirm("Are you sure you want to delete this warehouse?")&&r(t.filter(d=>d.id!==u))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Warehouse Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage warehouse locations and capacity"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master/add"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Warehouse"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search warehouses...",className:"input-field pl-10",value:a,onChange:u=>s(u.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(u=>{const d=l(u.currentCapacity,u.capacity);return n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u.warehouseName}),n.jsx("p",{className:"text-sm text-gray-600",children:u.warehouseCode})]}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.isActive?"Active":"Inactive"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(xd,{className:"h-4 w-4 mr-2"}),n.jsxs("span",{children:[u.address.city,", ",u.address.state]})]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(Ci,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:u.managerName})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[n.jsx("span",{children:"Capacity Usage"}),n.jsxs("span",{children:[d.toFixed(1),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${o(d)}`,style:{width:`${d}%`}})}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[u.currentCapacity.toLocaleString()," / ",u.capacity.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Storage Types:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:u.storageTypes.map((f,m)=>n.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:f},m))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t",children:[n.jsx("button",{onClick:()=>e(`/warehouse-master/edit/${u.id}`),className:"text-green-600 hover:text-green-900",title:"Edit",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>c(u.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})]},u.id)})})]})},ace=()=>{const e=Qe(),[t,r]=O.useState({warehouseCode:"",warehouseName:"",warehouseType:"Main",location:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactPhone:"",contactEmail:"",capacity:"",capacityUnit:"SQM",status:"Active",operatingHours:"",timezone:"",notes:"",specialRequirements:""}),[a,s]=O.useState({}),i=["Main","Sub","Transit","Cold Storage","Hazardous"],l=["Active","Inactive","Maintenance","Closed"],o=["SQM","CBM","KG","TON"],c=()=>{const f={};return t.warehouseCode.trim()||(f.warehouseCode="Warehouse code is required"),t.warehouseName.trim()||(f.warehouseName="Warehouse name is required"),t.location.trim()||(f.location="Location is required"),t.address.trim()||(f.address="Address is required"),t.city.trim()||(f.city="City is required"),t.state.trim()||(f.state="State is required"),t.country.trim()||(f.country="Country is required"),t.contactPerson.trim()||(f.contactPerson="Contact person is required"),t.contactPhone.trim()||(f.contactPhone="Contact phone is required"),t.contactEmail.trim()||(f.contactEmail="Contact email is required"),s(f),Object.keys(f).length===0},u=f=>{if(f.preventDefault(),!c())return;const m={id:Date.now().toString(),warehouseCode:t.warehouseCode,warehouseName:t.warehouseName,description:t.notes,address:{street:t.address,city:t.city,state:t.state,country:t.country,zipCode:t.postalCode},capacity:parseFloat(t.capacity)||0,currentCapacity:0,managerId:"MGR-001",managerName:t.contactPerson,isActive:t.status==="Active",storageTypes:["Dry Storage"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"};console.log("Creating Warehouse:",m),e("/warehouse-master")},d=(f,m)=>{r(p=>({...p,[f]:m})),a[f]&&s(p=>({...p,[f]:""}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Warehouse"}),n.jsx("p",{className:"text-gray-600",children:"Create a new warehouse location"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Warehouses"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:u,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.warehouseCode?"border-red-500":""}`,value:t.warehouseCode,onChange:f=>d("warehouseCode",f.target.value),placeholder:"WH-001"}),a.warehouseCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.warehouseCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.warehouseName?"border-red-500":""}`,value:t.warehouseName,onChange:f=>d("warehouseName",f.target.value),placeholder:"Main Warehouse"}),a.warehouseName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.warehouseName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Type"}),n.jsx("select",{className:"input-field",value:t.warehouseType,onChange:f=>d("warehouseType",f.target.value),children:i.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),n.jsx("input",{type:"text",className:`input-field ${a.location?"border-red-500":""}`,value:t.location,onChange:f=>d("location",f.target.value),placeholder:"Industrial Zone A"}),a.location&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:f=>d("status",f.target.value),children:l.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"input-field flex-1",value:t.capacity,onChange:f=>d("capacity",f.target.value),placeholder:"1000"}),n.jsx("select",{className:"input-field w-24",value:t.capacityUnit,onChange:f=>d("capacityUnit",f.target.value),children:o.map(f=>n.jsx("option",{value:f,children:f},f))})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),n.jsx("textarea",{className:`input-field ${a.address?"border-red-500":""}`,rows:3,value:t.address,onChange:f=>d("address",f.target.value),placeholder:"123 Industrial Street, Manufacturing District"}),a.address&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.address})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${a.city?"border-red-500":""}`,value:t.city,onChange:f=>d("city",f.target.value),placeholder:"Mumbai"}),a.city&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),n.jsx("input",{type:"text",className:`input-field ${a.state?"border-red-500":""}`,value:t.state,onChange:f=>d("state",f.target.value),placeholder:"Maharashtra"}),a.state&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),n.jsx("input",{type:"text",className:`input-field ${a.country?"border-red-500":""}`,value:t.country,onChange:f=>d("country",f.target.value),placeholder:"India"}),a.country&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),n.jsx("input",{type:"text",className:"input-field",value:t.postalCode,onChange:f=>d("postalCode",f.target.value),placeholder:"400001"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),n.jsx("input",{type:"text",className:`input-field ${a.contactPerson?"border-red-500":""}`,value:t.contactPerson,onChange:f=>d("contactPerson",f.target.value),placeholder:"John Smith"}),a.contactPerson&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactPerson})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${a.contactPhone?"border-red-500":""}`,value:t.contactPhone,onChange:f=>d("contactPhone",f.target.value),placeholder:"+91 98765 43210"}),a.contactPhone&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactPhone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.contactEmail?"border-red-500":""}`,value:t.contactEmail,onChange:f=>d("contactEmail",f.target.value),placeholder:"john@company.com"}),a.contactEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.contactEmail})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),n.jsx("input",{type:"text",className:"input-field",value:t.operatingHours,onChange:f=>d("operatingHours",f.target.value),placeholder:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:t.timezone,onChange:f=>d("timezone",f.target.value),placeholder:"IST (UTC+5:30)"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:f=>d("notes",f.target.value),placeholder:"Additional notes or comments about the warehouse"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requirements"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.specialRequirements,onChange:f=>d("specialRequirements",f.target.value),placeholder:"Special storage requirements, security measures, or operational notes"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/warehouse-master"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Warehouse"]})]})]})})]})},nce=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({warehouseCode:"",warehouseName:"",warehouseType:"Main",location:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactPhone:"",contactEmail:"",capacity:"",capacityUnit:"SQM",status:"Active",operatingHours:"",timezone:"",notes:"",specialRequirements:""}),[s,i]=O.useState({}),[l,o]=O.useState(!0),c=["Main","Sub","Transit","Cold Storage","Hazardous"],u=["Active","Inactive","Maintenance","Closed"],d=["SQM","CBM","KG","TON"],f={id:"1",warehouseCode:"WH-001",warehouseName:"Main Warehouse",description:"Primary warehouse for finished goods storage",address:{street:"123 Industrial Street",city:"Mumbai",state:"Maharashtra",zipCode:"400001",country:"India"},capacity:5e3,currentCapacity:3e3,managerId:"MGR-001",managerName:"John Smith",isActive:!0,storageTypes:["Dry Storage","Cold Storage"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString(),createdBy:"admin",updatedBy:"admin"};O.useEffect(()=>{setTimeout(()=>{a({warehouseCode:f.warehouseCode,warehouseName:f.warehouseName,warehouseType:"Main",location:"Industrial Zone A",address:f.address.street,city:f.address.city,state:f.address.state,country:f.address.country,postalCode:f.address.zipCode,contactPerson:f.managerName,contactPhone:"+91 98765 43210",contactEmail:"john@company.com",capacity:f.capacity.toString(),capacityUnit:"SQM",status:"Active",operatingHours:"8:00 AM - 6:00 PM",timezone:"IST (UTC+5:30)",notes:f.description,specialRequirements:"Temperature controlled environment required"}),o(!1)},500)},[t]);const m=()=>{const h={};return r.warehouseCode.trim()||(h.warehouseCode="Warehouse code is required"),r.warehouseName.trim()||(h.warehouseName="Warehouse name is required"),r.location.trim()||(h.location="Location is required"),r.address.trim()||(h.address="Address is required"),r.city.trim()||(h.city="City is required"),r.state.trim()||(h.state="State is required"),r.country.trim()||(h.country="Country is required"),r.contactPerson.trim()||(h.contactPerson="Contact person is required"),r.contactPhone.trim()||(h.contactPhone="Contact phone is required"),r.contactEmail.trim()||(h.contactEmail="Contact email is required"),i(h),Object.keys(h).length===0},p=h=>{if(h.preventDefault(),!m())return;const v={...f,warehouseCode:r.warehouseCode,warehouseName:r.warehouseName,description:r.notes,address:{street:r.address,city:r.city,state:r.state,zipCode:r.postalCode,country:r.country},capacity:parseFloat(r.capacity)||0,currentCapacity:parseFloat(r.capacity)||0,managerId:"MGR-001",managerName:r.contactPerson,isActive:r.status==="Active",storageTypes:["Dry Storage","Cold Storage"],updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Warehouse:",v),e("/warehouse-master")},y=(h,v)=>{a(w=>({...w,[h]:v})),s[h]&&i(w=>({...w,[h]:""}))};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading warehouse data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Warehouse"}),n.jsx("p",{className:"text-gray-600",children:"Update warehouse information"})]}),n.jsxs("button",{onClick:()=>e("/warehouse-master"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Warehouses"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:p,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.warehouseCode?"border-red-500":""}`,value:r.warehouseCode,onChange:h=>y("warehouseCode",h.target.value),placeholder:"WH-001"}),s.warehouseCode&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.warehouseCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.warehouseName?"border-red-500":""}`,value:r.warehouseName,onChange:h=>y("warehouseName",h.target.value),placeholder:"Main Warehouse"}),s.warehouseName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.warehouseName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warehouse Type"}),n.jsx("select",{className:"input-field",value:r.warehouseType,onChange:h=>y("warehouseType",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),n.jsx("input",{type:"text",className:`input-field ${s.location?"border-red-500":""}`,value:r.location,onChange:h=>y("location",h.target.value),placeholder:"Industrial Zone A"}),s.location&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:h=>y("status",h.target.value),children:u.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",className:"input-field flex-1",value:r.capacity,onChange:h=>y("capacity",h.target.value),placeholder:"1000"}),n.jsx("select",{className:"input-field w-24",value:r.capacityUnit,onChange:h=>y("capacityUnit",h.target.value),children:d.map(h=>n.jsx("option",{value:h,children:h},h))})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),n.jsx("textarea",{className:`input-field ${s.address?"border-red-500":""}`,rows:3,value:r.address,onChange:h=>y("address",h.target.value),placeholder:"123 Industrial Street, Manufacturing District"}),s.address&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.address})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${s.city?"border-red-500":""}`,value:r.city,onChange:h=>y("city",h.target.value),placeholder:"Mumbai"}),s.city&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),n.jsx("input",{type:"text",className:`input-field ${s.state?"border-red-500":""}`,value:r.state,onChange:h=>y("state",h.target.value),placeholder:"Maharashtra"}),s.state&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.state})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),n.jsx("input",{type:"text",className:`input-field ${s.country?"border-red-500":""}`,value:r.country,onChange:h=>y("country",h.target.value),placeholder:"India"}),s.country&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.country})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postal Code"}),n.jsx("input",{type:"text",className:"input-field",value:r.postalCode,onChange:h=>y("postalCode",h.target.value),placeholder:"400001"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),n.jsx("input",{type:"text",className:`input-field ${s.contactPerson?"border-red-500":""}`,value:r.contactPerson,onChange:h=>y("contactPerson",h.target.value),placeholder:"John Smith"}),s.contactPerson&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactPerson})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${s.contactPhone?"border-red-500":""}`,value:r.contactPhone,onChange:h=>y("contactPhone",h.target.value),placeholder:"+91 98765 43210"}),s.contactPhone&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactPhone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.contactEmail?"border-red-500":""}`,value:r.contactEmail,onChange:h=>y("contactEmail",h.target.value),placeholder:"john@company.com"}),s.contactEmail&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.contactEmail})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),n.jsx("input",{type:"text",className:"input-field",value:r.operatingHours,onChange:h=>y("operatingHours",h.target.value),placeholder:"8:00 AM - 6:00 PM"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:r.timezone,onChange:h=>y("timezone",h.target.value),placeholder:"IST (UTC+5:30)"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:h=>y("notes",h.target.value),placeholder:"Additional notes or comments about the warehouse"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requirements"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.specialRequirements,onChange:h=>y("specialRequirements",h.target.value),placeholder:"Special storage requirements, security measures, or operational notes"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/warehouse-master"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update Warehouse"]})]})]})})]})},sce=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState(!0),[i,l]=O.useState({page:1,limit:10,total:0,pages:0}),[o,c]=O.useState(""),[u,d]=O.useState(null),[f,m]=O.useState(!1),[p,y]=O.useState(""),h=async()=>{try{s(!0);const g=await de.getTransferOrders({page:i.page,limit:i.limit,search:o||void 0,status:p||void 0,sortBy:"transferDate",sortOrder:"desc"});g.success&&(r(g.data),l(g.pagination))}catch(g){console.error("Error loading transfer orders:",g)}finally{s(!1)}};O.useEffect(()=>{h()},[i.page,o,p]),O.useEffect(()=>{const g=setInterval(()=>{h()},3e4);return()=>clearInterval(g)},[]);const v=t,w=g=>{switch(g){case"Completed":return"bg-green-100 text-green-800";case"In Transit":return"bg-blue-100 text-blue-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Failed":return"bg-red-100 text-red-800";case"Cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=g=>{switch(g){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";case"Normal":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},b=async g=>{const N=t.find(C=>C._id===g),j=(N==null?void 0:N.transferNumber)||"this transfer order";if(window.confirm(`Are you sure you want to delete ${j}?

This action cannot be undone.`))try{s(!0);const C=await de.deleteTransferOrder(g,{updatedBy:"Admin User"});C.success?(alert(`Transfer order ${j} has been deleted successfully.`),await h()):alert(`Failed to delete transfer order: ${C.message||"Unknown error"}`)}catch(C){console.error("Error deleting transfer order:",C),alert(`Error deleting transfer order: ${C instanceof Error?C.message:"Unknown error"}`)}finally{s(!1)}},x=()=>{var g,N,j,C;return n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transfer Order Details"}),n.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),u&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transfer Number"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(u.priority)}`,children:u.priority})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"From Outlet"}),n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:typeof u.fromOutlet=="object"?(g=u.fromOutlet)==null?void 0:g.name:u.fromOutlet||"N/A"}),((N=u.fromOutlet)==null?void 0:N.code)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[u.fromOutlet.code,"  ",u.fromOutlet.type||"Outlet"]}),n.jsx("div",{className:"text-xs text-gray-400",children:u.fromOutlet.location||"Location not specified"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"To Outlet"}),n.jsxs("div",{className:"text-sm text-gray-900",children:[n.jsx("div",{className:"font-medium",children:typeof u.toOutlet=="object"?(j=u.toOutlet)==null?void 0:j.name:u.toOutlet||"N/A"}),((C=u.toOutlet)==null?void 0:C.code)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-xs text-gray-500",children:[u.toOutlet.code,"  ",u.toOutlet.type||"Outlet"]}),n.jsx("div",{className:"text-xs text-gray-400",children:u.toOutlet.location||"Location not specified"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transfer Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.transferDate?new Date(u.transferDate).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(u.status||"Unknown")}`,children:u.status||"Unknown"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requested By"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.requestedBy||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Amount"}),n.jsxs("p",{className:"text-sm text-gray-900 font-medium",children:[u.totalAmount?u.totalAmount.toFixed(2):"0.00"," KWD"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Transfer Items"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Item Code"}),n.jsx("th",{className:"table-header",children:"Item Name"}),n.jsx("th",{className:"table-header",children:"Item Type"}),n.jsx("th",{className:"table-header",children:"Quantity"}),n.jsx("th",{className:"table-header",children:"Unit"}),n.jsx("th",{className:"table-header",children:"Unit Price"}),n.jsx("th",{className:"table-header",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.items&&u.items.length>0?u.items.map((_,T)=>n.jsxs("tr",{children:[n.jsx("td",{className:"table-cell",children:_.itemCode}),n.jsx("td",{className:"table-cell",children:_.itemName}),n.jsx("td",{className:"table-cell",children:_.itemType}),n.jsx("td",{className:"table-cell",children:_.quantity}),n.jsx("td",{className:"table-cell",children:_.unitOfMeasure}),n.jsxs("td",{className:"table-cell",children:[_.unitPrice?_.unitPrice.toFixed(2):"0.00"," KWD"]}),n.jsxs("td",{className:"table-cell font-medium",children:[_.totalValue?_.totalValue.toFixed(2):"0.00"," KWD"]})]},T)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center text-gray-500",children:"No items found"})})})]})}),n.jsx("div",{className:"mt-4 text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Amount: ",u.totalAmount?u.totalAmount.toFixed(2):"0.00"," KWD"]})})]}),u.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-900",children:u.notes})]})]})]})})})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transfer Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage material transfers between warehouses"})]}),n.jsxs("button",{onClick:()=>e("/central-kitchen/create-transfer"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search transfer orders...",className:"input-field pl-10",value:o,onChange:g=>c(g.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{className:"input-field",value:p,onChange:g=>y(g.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"In Transit",children:"In Transit"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Failed",children:"Failed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs("button",{onClick:h,className:"btn-secondary flex items-center",disabled:a,children:[n.jsx(Gt,{className:"h-4 w-4 mr-2"}),a?"Refreshing...":"Refresh"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Transfer Number"}),n.jsx("th",{className:"table-header",children:"From  To"}),n.jsx("th",{className:"table-header",children:"Transfer Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Requested By"}),n.jsx("th",{className:"table-header",children:"Total Amount"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center py-8",children:n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-2 text-gray-600",children:"Loading transfer orders..."})]})})}):v.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"table-cell text-center py-8 text-gray-500",children:"No transfer orders found"})}):v.map(g=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:g.transferNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.fromOutlet.name}),n.jsx(QR,{className:"h-4 w-4 mx-3 text-gray-400 flex-shrink-0"}),n.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.toOutlet.name})]})}),n.jsx("td",{className:"table-cell",children:new Date(g.transferDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(g.status)}`,children:g.status})}),n.jsx("td",{className:"table-cell",children:g.requestedBy}),n.jsxs("td",{className:"table-cell font-medium",children:[g.totalAmount.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{d(g),m(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:n.jsx(Mi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>b(g._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},g._id))})]})})}),f&&n.jsx(x,{})]})},ice=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({transferNumber:"",fromWarehouseId:"",fromWarehouseName:"",toWarehouseId:"",toWarehouseName:"",transferDate:"",expectedDeliveryDate:"",status:"Draft",priority:"Medium",totalAmount:0,items:[],requestedBy:"",approvedBy:"",receivedBy:"",transferType:"Internal",reason:"",notes:""}),[s,i]=O.useState({}),[l,o]=O.useState(!0),c=["Draft","Pending","Approved","In Transit","Delivered","Cancelled"],u=["Low","Medium","High","Urgent"],d=["Internal","External","Emergency"],f=[{id:"WH-001",name:"Main Warehouse"},{id:"WH-002",name:"Secondary Warehouse"},{id:"WH-003",name:"Cold Storage"},{id:"WH-004",name:"Hazardous Storage"}],m={id:"1",transferNumber:"TO-2024-001",fromWarehouseId:"WH-001",fromWarehouseName:"Main Warehouse",toWarehouseId:"WH-002",toWarehouseName:"Secondary Warehouse",transferDate:new Date("2024-01-20").toISOString(),expectedDeliveryDate:new Date("2024-01-22").toISOString(),status:"In Transit",priority:"High",totalAmount:15750,items:[{materialId:"RM-001",materialCode:"RM-001",materialName:"Steel Rod 12mm",quantity:100,unitOfMeasure:"KG",unitPrice:45.5,totalPrice:4550,remarks:"High priority transfer"},{materialId:"RM-002",materialCode:"RM-002",materialName:"Aluminum Sheet 2mm",quantity:50,unitOfMeasure:"SQM",unitPrice:125,totalPrice:6250,remarks:"Handle with care"},{materialId:"RM-003",materialCode:"RM-003",materialName:"Copper Wire 10 AWG",quantity:200,unitOfMeasure:"M",unitPrice:23.75,totalPrice:4750,remarks:"Standard transfer"}],requestedBy:"John Smith",approvedBy:"Manager Name",receivedBy:"Warehouse Staff",transferType:"Internal",reason:"Inventory rebalancing between warehouses for better distribution",notes:"Transfer approved for inventory optimization. Ensure proper handling of aluminum sheets.",createdAt:new Date("2024-01-20").toISOString(),updatedAt:new Date("2024-01-21").toISOString(),createdBy:"admin",updatedBy:"admin"};O.useEffect(()=>{setTimeout(()=>{var x;a({transferNumber:m.transferNumber,fromWarehouseId:m.fromWarehouseId,fromWarehouseName:m.fromWarehouseName,toWarehouseId:m.toWarehouseId,toWarehouseName:m.toWarehouseName,transferDate:m.transferDate.split("T")[0],expectedDeliveryDate:((x=m.expectedDeliveryDate)==null?void 0:x.split("T")[0])||"",status:m.status,priority:m.priority,totalAmount:m.totalAmount,items:m.items,requestedBy:m.requestedBy,approvedBy:m.approvedBy,receivedBy:m.receivedBy,transferType:m.transferType,reason:m.reason,notes:m.notes}),o(!1)},500)},[t]);const p=()=>{const x={};return r.transferNumber.trim()||(x.transferNumber="Transfer number is required"),r.fromWarehouseId||(x.fromWarehouseId="From warehouse is required"),r.toWarehouseId||(x.toWarehouseId="To warehouse is required"),r.transferDate||(x.transferDate="Transfer date is required"),r.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),r.requestedBy.trim()||(x.requestedBy="Requested by is required"),r.reason.trim()||(x.reason="Reason is required"),r.items.length===0&&(x.items="At least one transfer item is required"),i(x),Object.keys(x).length===0},y=x=>{if(x.preventDefault(),!p())return;const g=r.items.reduce((j,C)=>j+C.totalPrice,0),N={...m,transferNumber:r.transferNumber,fromWarehouseId:r.fromWarehouseId,fromWarehouseName:r.fromWarehouseName,toWarehouseId:r.toWarehouseId,toWarehouseName:r.toWarehouseName,transferDate:new Date(r.transferDate).toISOString(),expectedDeliveryDate:new Date(r.expectedDeliveryDate).toISOString(),status:r.status,priority:r.priority,totalAmount:g,items:r.items,requestedBy:r.requestedBy,approvedBy:r.approvedBy,receivedBy:r.receivedBy,transferType:r.transferType,reason:r.reason,notes:r.notes,updatedAt:new Date().toISOString(),updatedBy:"admin"};console.log("Updating Transfer Order:",N),e("/transfer-orders")},h=(x,g)=>{a(N=>({...N,[x]:g})),s[x]&&i(N=>({...N,[x]:""}))},v=(x,g)=>{const N=f.find(C=>C.id===g),j=N?N.name:"";a(x==="fromWarehouseId"?C=>({...C,fromWarehouseId:g,fromWarehouseName:j}):C=>({...C,toWarehouseId:g,toWarehouseName:j}))},w=()=>{const x={materialId:"",materialCode:"",materialName:"",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};a(g=>({...g,items:[...g.items,x]}))},S=(x,g,N)=>{a(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},b=x=>{a(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Transfer Order"}),n.jsx("p",{className:"text-gray-600",children:"Update transfer order information"})]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Transfer Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${s.transferNumber?"border-red-500":""}`,value:r.transferNumber,onChange:x=>h("transferNumber",x.target.value),placeholder:"TO-2024-001"}),s.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:r.transferType,onChange:x=>h("transferType",x.target.value),children:d.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:r.priority,onChange:x=>h("priority",x.target.value),children:u.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:x=>h("status",x.target.value),children:c.map(x=>n.jsx("option",{value:x,children:x},x))})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Warehouse Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Warehouse *"}),n.jsxs("select",{className:`input-field ${s.fromWarehouseId?"border-red-500":""}`,value:r.fromWarehouseId,onChange:x=>v("fromWarehouseId",x.target.value),children:[n.jsx("option",{value:"",children:"Select From Warehouse"}),f.map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))]}),s.fromWarehouseId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.fromWarehouseId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Warehouse *"}),n.jsxs("select",{className:`input-field ${s.toWarehouseId?"border-red-500":""}`,value:r.toWarehouseId,onChange:x=>v("toWarehouseId",x.target.value),children:[n.jsx("option",{value:"",children:"Select To Warehouse"}),f.filter(x=>x.id!==r.fromWarehouseId).map(x=>n.jsx("option",{value:x.id,children:x.name},x.id))]}),s.toWarehouseId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.toWarehouseId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.transferDate?"border-red-500":""}`,value:r.transferDate,onChange:x=>h("transferDate",x.target.value)}),s.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${s.expectedDeliveryDate?"border-red-500":""}`,value:r.expectedDeliveryDate,onChange:x=>h("expectedDeliveryDate",x.target.value)}),s.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personnel Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Requested By *"}),n.jsx("input",{type:"text",className:`input-field ${s.requestedBy?"border-red-500":""}`,value:r.requestedBy,onChange:x=>h("requestedBy",x.target.value),placeholder:"John Smith"}),s.requestedBy&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.requestedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved By"}),n.jsx("input",{type:"text",className:"input-field",value:r.approvedBy,onChange:x=>h("approvedBy",x.target.value),placeholder:"Manager Name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Received By"}),n.jsx("input",{type:"text",className:"input-field",value:r.receivedBy,onChange:x=>h("receivedBy",x.target.value),placeholder:"Warehouse Staff"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transfer Items"}),n.jsxs("button",{type:"button",onClick:w,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.items&&n.jsx("p",{className:"mb-4 text-sm text-red-600",children:s.items}),n.jsx("div",{className:"space-y-4",children:r.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-7 gap-3 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.materialCode,onChange:N=>S(g,"materialCode",N.target.value),placeholder:"RM-001"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.materialName,onChange:N=>S(g,"materialName",N.target.value),placeholder:"Steel Rod"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>S(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.unitOfMeasure,onChange:N=>S(g,"unitOfMeasure",N.target.value),placeholder:"KG"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm",value:x.unitPrice,onChange:N=>S(g,"unitPrice",parseFloat(N.target.value)||0),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks,onChange:N=>S(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{type:"button",onClick:()=>b(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-7",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),r.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",r.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Transfer *"}),n.jsx("textarea",{className:`input-field ${s.reason?"border-red-500":""}`,rows:3,value:r.reason,onChange:x=>h("reason",x.target.value),placeholder:"Reason for material transfer"}),s.reason&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.reason})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:x=>h("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update Transfer Order"]})]})]})})]})},lce=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState(!0),[i,l]=O.useState(null),[o,c]=O.useState(""),[u,d]=O.useState(""),[f,m]=O.useState(""),[p,y]=O.useState(""),[h,v]=O.useState("createdAt"),[w,S]=O.useState("desc"),[b,x]=O.useState(null),[g,N]=O.useState(!1);O.useEffect(()=>{j()},[]),O.useEffect(()=>{a||j()},[o,u,f,p,h,w]);const j=async()=>{try{s(!0),l(null);const k=[{id:"outlet-001",outletCode:"KC001",outletName:"Kuwait City",outletType:"Restaurant",description:"Main restaurant outlet in Kuwait City",address:{street:"123 Main Street",city:"Kuwait City",state:"Kuwait",zipCode:"12345",country:"Kuwait"},contactInfo:{phone:"+965-1234-5678",email:"kuwait@localbeat.com",managerName:"Ahmed Al-Sabah",managerPhone:"+965-1234-5679",managerEmail:"ahmed@localbeat.com"},operatingHours:{monday:{open:"08:00",close:"22:00",isOpen:!0},tuesday:{open:"08:00",close:"22:00",isOpen:!0},wednesday:{open:"08:00",close:"22:00",isOpen:!0},thursday:{open:"08:00",close:"22:00",isOpen:!0},friday:{open:"08:00",close:"22:00",isOpen:!0},saturday:{open:"08:00",close:"22:00",isOpen:!0},sunday:{open:"08:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:100,kitchenCapacity:50,storageCapacity:200,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway","Delivery"],timezone:"Asia/Kuwait",notes:"Main restaurant outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-002",outletCode:"M360001",outletName:"360 Mall",outletType:"Cafe",description:"Cafe outlet in 360 Mall",address:{street:"360 Mall, Level 2",city:"Kuwait City",state:"Kuwait",zipCode:"12346",country:"Kuwait"},contactInfo:{phone:"+965-2345-6789",email:"mall360@localbeat.com",managerName:"Sarah Johnson",managerPhone:"+965-2345-6790",managerEmail:"sarah@localbeat.com"},operatingHours:{monday:{open:"10:00",close:"23:00",isOpen:!0},tuesday:{open:"10:00",close:"23:00",isOpen:!0},wednesday:{open:"10:00",close:"23:00",isOpen:!0},thursday:{open:"10:00",close:"23:00",isOpen:!0},friday:{open:"10:00",close:"23:00",isOpen:!0},saturday:{open:"10:00",close:"23:00",isOpen:!0},sunday:{open:"10:00",close:"23:00",isOpen:!0}},capacity:{seatingCapacity:80,kitchenCapacity:30,storageCapacity:150,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway"],timezone:"Asia/Kuwait",notes:"Mall cafe outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-003",outletCode:"VC001",outletName:"Vibes Complex",outletType:"Food Court",description:"Food court outlet in Vibes Complex",address:{street:"Vibes Complex, Food Court",city:"Kuwait City",state:"Kuwait",zipCode:"12347",country:"Kuwait"},contactInfo:{phone:"+965-3456-7890",email:"vibes@localbeat.com",managerName:"Mohammed Al-Rashid",managerPhone:"+965-3456-7891",managerEmail:"mohammed@localbeat.com"},operatingHours:{monday:{open:"09:00",close:"24:00",isOpen:!0},tuesday:{open:"09:00",close:"24:00",isOpen:!0},wednesday:{open:"09:00",close:"24:00",isOpen:!0},thursday:{open:"09:00",close:"24:00",isOpen:!0},friday:{open:"09:00",close:"24:00",isOpen:!0},saturday:{open:"09:00",close:"24:00",isOpen:!0},sunday:{open:"09:00",close:"24:00",isOpen:!0}},capacity:{seatingCapacity:120,kitchenCapacity:40,storageCapacity:180,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Dine-in","Takeaway","Food Court"],timezone:"Asia/Kuwait",notes:"Food court outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-004",outletCode:"TH001",outletName:"Taiba Hospital",outletType:"Drive-Thru",description:"Drive-thru outlet at Taiba Hospital",address:{street:"Taiba Hospital, Ground Floor",city:"Kuwait City",state:"Kuwait",zipCode:"12348",country:"Kuwait"},contactInfo:{phone:"+965-4567-8901",email:"taiba@localbeat.com",managerName:"Fatima Al-Zahra",managerPhone:"+965-4567-8902",managerEmail:"fatima@localbeat.com"},operatingHours:{monday:{open:"06:00",close:"02:00",isOpen:!0},tuesday:{open:"06:00",close:"02:00",isOpen:!0},wednesday:{open:"06:00",close:"02:00",isOpen:!0},thursday:{open:"06:00",close:"02:00",isOpen:!0},friday:{open:"06:00",close:"02:00",isOpen:!0},saturday:{open:"06:00",close:"02:00",isOpen:!0},sunday:{open:"06:00",close:"02:00",isOpen:!0}},capacity:{seatingCapacity:20,kitchenCapacity:25,storageCapacity:100,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!1,features:["Drive-Thru","Takeaway"],timezone:"Asia/Kuwait",notes:"Hospital drive-thru outlet",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"},{id:"outlet-005",outletCode:"CK001",outletName:"Central Kitchen",outletType:"Central Kitchen",description:"Central kitchen for all outlets",address:{street:"Industrial Area, Block 5",city:"Kuwait City",state:"Kuwait",zipCode:"12349",country:"Kuwait"},contactInfo:{phone:"+965-5678-9012",email:"central@localbeat.com",managerName:"Chef Abdullah",managerPhone:"+965-5678-9013",managerEmail:"chef@localbeat.com"},operatingHours:{monday:{open:"05:00",close:"23:00",isOpen:!0},tuesday:{open:"05:00",close:"23:00",isOpen:!0},wednesday:{open:"05:00",close:"23:00",isOpen:!0},thursday:{open:"05:00",close:"23:00",isOpen:!0},friday:{open:"05:00",close:"23:00",isOpen:!0},saturday:{open:"05:00",close:"23:00",isOpen:!0},sunday:{open:"05:00",close:"23:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:200,storageCapacity:500,capacityUnit:"sqft"},status:"Active",isCentralKitchen:!0,features:["Production","Storage","Distribution"],timezone:"Asia/Kuwait",notes:"Central kitchen for all outlets",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"}];console.log("Loaded Outlets:",k),r(k)}catch(k){l(k instanceof Error?k.message:"Failed to load outlets"),console.error("Error loading outlets:",k)}finally{s(!1)}},C=async k=>{if(window.confirm("Are you sure you want to delete this outlet?"))try{(await de.deleteOutlet(k)).success?await j():alert("Failed to delete outlet")}catch(A){alert("Error deleting outlet: "+(A instanceof Error?A.message:"Unknown error")),console.error("Error deleting outlet:",A)}},_=()=>{c(""),d(""),m(""),y(""),v("createdAt"),S("desc"),j()},T=k=>{switch(k){case"Active":return"bg-green-100 text-green-800";case"Inactive":return"bg-gray-100 text-gray-800";case"Maintenance":return"bg-yellow-100 text-yellow-800";case"Closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=k=>{switch(k){case"Restaurant":return"bg-blue-100 text-blue-800";case"Cafe":return"bg-purple-100 text-purple-800";case"Food Court":return"bg-orange-100 text-orange-800";case"Drive-Thru":return"bg-green-100 text-green-800";case"Takeaway":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading outlets..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:j,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Outlet Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage restaurant outlets and central kitchen operations"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:j,className:"btn-secondary flex items-center",title:"Refresh outlets",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/outlets/add"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Outlet"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search outlets by name, code, city, or manager...",className:"input-field pl-10",value:o,onChange:k=>c(k.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:_,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsxs("select",{className:"input-field",value:u,onChange:k=>d(k.target.value),children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"Restaurant",children:"Restaurant"}),n.jsx("option",{value:"Cafe",children:"Cafe"}),n.jsx("option",{value:"Food Court",children:"Food Court"}),n.jsx("option",{value:"Drive-Thru",children:"Drive-Thru"}),n.jsx("option",{value:"Takeaway",children:"Takeaway"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:f,onChange:k=>m(k.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"}),n.jsx("option",{value:"Maintenance",children:"Maintenance"}),n.jsx("option",{value:"Closed",children:"Closed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Type"}),n.jsxs("select",{className:"input-field",value:p,onChange:k=>y(k.target.value),children:[n.jsx("option",{value:"",children:"All Kitchens"}),n.jsx("option",{value:"true",children:"Central Kitchen"}),n.jsx("option",{value:"false",children:"Regular Outlet"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:h,onChange:k=>v(k.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"outletName",children:"Outlet Name"}),n.jsx("option",{value:"outletCode",children:"Outlet Code"}),n.jsx("option",{value:"outletType",children:"Outlet Type"}),n.jsx("option",{value:"status",children:"Status"})]}),n.jsx("button",{onClick:()=>S(w==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${w==="asc"?"Descending":"Ascending"}`,children:w==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",t.length," outlets",(o||u||f||p)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(o||u||f||p)&&n.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Outlet Code"}),n.jsx("th",{className:"table-header",children:"Outlet Name"}),n.jsx("th",{className:"table-header",children:"Type"}),n.jsx("th",{className:"table-header",children:"Location"}),n.jsx("th",{className:"table-header",children:"Manager"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Kitchen Type"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:k.outletCode}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:k.outletName}),n.jsx("div",{className:"text-gray-500 text-sm max-w-xs truncate",children:k.description})]})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(k.outletType)}`,children:k.outletType})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[n.jsx(xd,{className:"h-4 w-4 mr-1"}),n.jsxs("span",{children:[k.address.city,", ",k.address.state]})]})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:k.contactInfo.managerName}),n.jsx("div",{className:"text-gray-500 text-sm",children:k.contactInfo.phone})]})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(k.status)}`,children:k.status})}),n.jsx("td",{className:"table-cell",children:k.isCentralKitchen?n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:" Central Kitchen"}):n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Regular Outlet"})}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>{x(k),N(!0)},className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Mi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/outlets/edit/${k.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>C(k.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},k.id))})]})})}),g&&b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Outlet Details"}),n.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code"}),n.jsx("p",{className:"text-gray-900 font-mono",children:b.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name"}),n.jsx("p",{className:"text-gray-900",children:b.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(b.outletType)}`,children:b.outletType})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(b.status)}`,children:b.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Type"}),b.isCentralKitchen?n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:" Central Kitchen"}):n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Regular Outlet"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("p",{className:"text-gray-900",children:b.timezone})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),n.jsxs("p",{className:"text-gray-900",children:[b.address.street,n.jsx("br",{}),b.address.city,", ",b.address.state," ",b.address.zipCode,n.jsx("br",{}),b.address.country]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone"}),n.jsx("p",{className:"text-gray-900",children:b.contactInfo.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email"}),n.jsx("p",{className:"text-gray-900",children:b.contactInfo.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name"}),n.jsx("p",{className:"text-gray-900",children:b.contactInfo.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("p",{className:"text-gray-900",children:b.contactInfo.managerPhone||"N/A"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(Tb,{className:"h-6 w-6 mx-auto text-blue-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Seating"}),n.jsx("p",{className:"text-lg font-semibold text-blue-600",children:b.capacity.seatingCapacity})]}),n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(hn,{className:"h-6 w-6 mx-auto text-green-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Kitchen"}),n.jsx("p",{className:"text-lg font-semibold text-green-600",children:b.capacity.kitchenCapacity})]}),n.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[n.jsx(xd,{className:"h-6 w-6 mx-auto text-purple-600 mb-2"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Storage"}),n.jsx("p",{className:"text-lg font-semibold text-purple-600",children:b.capacity.storageCapacity})]})]})]}),b.features.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:b.features.map((k,A)=>n.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:k},A))})]}),b.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("p",{className:"text-gray-900",children:b.notes})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>N(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{N(!1),e(`/outlets/edit/${b.id}`)},className:"btn-primary",children:"Edit Outlet"})]})]})})]})},oce=()=>{const e=Qe(),[t,r]=O.useState({outletCode:"",outletName:"",outletType:"Restaurant",description:"",address:{street:"",city:"",state:"",zipCode:"",country:"Kuwait"},contactInfo:{phone:"",email:"",managerName:"",managerPhone:"",managerEmail:""},operatingHours:{monday:{open:"09:00",close:"22:00",isOpen:!0},tuesday:{open:"09:00",close:"22:00",isOpen:!0},wednesday:{open:"09:00",close:"22:00",isOpen:!0},thursday:{open:"09:00",close:"22:00",isOpen:!0},friday:{open:"09:00",close:"22:00",isOpen:!0},saturday:{open:"09:00",close:"22:00",isOpen:!0},sunday:{open:"09:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:0,storageCapacity:0,capacityUnit:"SQM"},status:"Active",isCentralKitchen:!1,features:[],timezone:"Asia/Kuwait",notes:""}),[a,s]=O.useState({}),[i,l]=O.useState(!1),o=["Restaurant","Cafe","Food Court","Drive-Thru","Takeaway"],c=["Active","Inactive","Maintenance","Closed"],u=["SQM","CBM","KG","TON"],d=["Delivery","Takeaway","Dine-in","Drive-thru","Online Ordering","Catering"],f=()=>{const h={};return t.outletCode.trim()||(h.outletCode="Outlet code is required"),t.outletName.trim()||(h.outletName="Outlet name is required"),t.address.street.trim()||(h.street="Street address is required"),t.address.city.trim()||(h.city="City is required"),t.contactInfo.phone.trim()||(h.phone="Phone number is required"),t.contactInfo.email.trim()||(h.email="Email is required"),t.contactInfo.managerName.trim()||(h.managerName="Manager name is required"),s(h),Object.keys(h).length===0},m=async h=>{if(h.preventDefault(),!!f()){l(!0);try{(await de.createOutlet(t)).success?(alert("Outlet created successfully!"),e("/outlets")):alert("Failed to create outlet")}catch(v){alert("Error creating outlet: "+(v instanceof Error?v.message:"Unknown error")),console.error("Error creating outlet:",v)}finally{l(!1)}}},p=(h,v)=>{if(h.includes(".")){const[w,S]=h.split(".");r(b=>({...b,[w]:{...b[w]||{},[S]:v}}))}else r(w=>({...w,[h]:v}));a[h]&&s(w=>({...w,[h]:""}))},y=h=>{r(v=>({...v,features:v.features.includes(h)?v.features.filter(w=>w!==h):[...v.features,h]}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/outlets"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Outlets"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Outlet"}),n.jsx("p",{className:"text-gray-600",children:"Create a new restaurant outlet or central kitchen"})]})]})}),n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code *"}),n.jsx("input",{type:"text",className:`input-field ${a.outletCode?"border-red-500":""}`,value:t.outletCode,onChange:h=>p("outletCode",h.target.value.toUpperCase()),placeholder:"OUTLET-001"}),a.outletCode&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.outletName?"border-red-500":""}`,value:t.outletName,onChange:h=>p("outletName",h.target.value),placeholder:"Downtown Restaurant"}),a.outletName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("select",{className:"input-field",value:t.outletType,onChange:h=>p("outletType",h.target.value),children:o.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{className:"input-field",value:t.status,onChange:h=>p("status",h.target.value),children:c.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.description,onChange:h=>p("description",h.target.value),placeholder:"Brief description of the outlet..."})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isCentralKitchen",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:t.isCentralKitchen,onChange:h=>p("isCentralKitchen",h.target.checked)}),n.jsx("label",{htmlFor:"isCentralKitchen",className:"ml-2 block text-sm text-gray-900",children:"This is a Central Kitchen"})]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),n.jsx("input",{type:"text",className:`input-field ${a.street?"border-red-500":""}`,value:t.address.street,onChange:h=>p("address.street",h.target.value),placeholder:"123 Main Street"}),a.street&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${a.city?"border-red-500":""}`,value:t.address.city,onChange:h=>p("address.city",h.target.value),placeholder:"Kuwait City"}),a.city&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.state,onChange:h=>p("address.state",h.target.value),placeholder:"Kuwait"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.zipCode,onChange:h=>p("address.zipCode",h.target.value),placeholder:"12345"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),n.jsx("input",{type:"text",className:"input-field",value:t.address.country,onChange:h=>p("address.country",h.target.value),placeholder:"Kuwait"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${a.phone?"border-red-500":""}`,value:t.contactInfo.phone,onChange:h=>p("contactInfo.phone",h.target.value),placeholder:"+965 1234 5678"}),a.phone&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email *"}),n.jsx("input",{type:"email",className:`input-field ${a.email?"border-red-500":""}`,value:t.contactInfo.email,onChange:h=>p("contactInfo.email",h.target.value),placeholder:"outlet@restaurant.com"}),a.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name *"}),n.jsx("input",{type:"text",className:`input-field ${a.managerName?"border-red-500":""}`,value:t.contactInfo.managerName,onChange:h=>p("contactInfo.managerName",h.target.value),placeholder:"John Smith"}),a.managerName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("input",{type:"tel",className:"input-field",value:t.contactInfo.managerPhone,onChange:h=>p("contactInfo.managerPhone",h.target.value),placeholder:"+965 9876 5432"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Email"}),n.jsx("input",{type:"email",className:"input-field",value:t.contactInfo.managerEmail,onChange:h=>p("contactInfo.managerEmail",h.target.value),placeholder:"manager@restaurant.com"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Capacity & Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seating Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.seatingCapacity,onChange:h=>p("capacity.seatingCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.kitchenCapacity,onChange:h=>p("capacity.kitchenCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:t.capacity.storageCapacity,onChange:h=>p("capacity.storageCapacity",parseInt(h.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity Unit"}),n.jsx("select",{className:"input-field",value:t.capacity.capacityUnit,onChange:h=>p("capacity.capacityUnit",h.target.value),children:u.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(h=>n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:t.features.includes(h),onChange:()=>y(h)}),n.jsx("span",{className:"ml-2 text-sm text-gray-900",children:h})]},h))})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:t.timezone,onChange:h=>p("timezone",h.target.value),placeholder:"Asia/Kuwait"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:t.notes,onChange:h=>p("notes",h.target.value),placeholder:"Additional notes about the outlet..."})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/outlets"),className:"btn-secondary",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Outlet"]})})]})]})]})},cce=()=>{const e=Qe(),{id:t}=Fi(),[r,a]=O.useState({outletCode:"",outletName:"",outletType:"Restaurant",description:"",address:{street:"",city:"",state:"",zipCode:"",country:"Kuwait"},contactInfo:{phone:"",email:"",managerName:"",managerPhone:"",managerEmail:""},operatingHours:{monday:{open:"09:00",close:"22:00",isOpen:!0},tuesday:{open:"09:00",close:"22:00",isOpen:!0},wednesday:{open:"09:00",close:"22:00",isOpen:!0},thursday:{open:"09:00",close:"22:00",isOpen:!0},friday:{open:"09:00",close:"22:00",isOpen:!0},saturday:{open:"09:00",close:"22:00",isOpen:!0},sunday:{open:"09:00",close:"22:00",isOpen:!0}},capacity:{seatingCapacity:0,kitchenCapacity:0,storageCapacity:0,capacityUnit:"SQM"},status:"Active",isCentralKitchen:!1,features:[],timezone:"Asia/Kuwait",notes:""}),[s,i]=O.useState({}),[l,o]=O.useState(!1),[c,u]=O.useState(!0),d=["Restaurant","Cafe","Food Court","Drive-Thru","Takeaway"],f=["Active","Inactive","Maintenance","Closed"],m=["SQM","CBM","KG","TON"],p=["Delivery","Takeaway","Dine-in","Drive-thru","Online Ordering","Catering"];O.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{u(!0);const b=await de.getOutlet(t);b.success?a(b.data):(alert("Failed to load outlet"),e("/outlets"))}catch(b){alert("Error loading outlet: "+(b instanceof Error?b.message:"Unknown error")),e("/outlets")}finally{u(!1)}},h=()=>{const b={};return r.outletCode.trim()||(b.outletCode="Outlet code is required"),r.outletName.trim()||(b.outletName="Outlet name is required"),r.address.street.trim()||(b.street="Street address is required"),r.address.city.trim()||(b.city="City is required"),r.contactInfo.phone.trim()||(b.phone="Phone number is required"),r.contactInfo.email.trim()||(b.email="Email is required"),r.contactInfo.managerName.trim()||(b.managerName="Manager name is required"),i(b),Object.keys(b).length===0},v=async b=>{if(b.preventDefault(),!!h()){o(!0);try{(await de.updateOutlet(t,r)).success?(alert("Outlet updated successfully!"),e("/outlets")):alert("Failed to update outlet")}catch(x){alert("Error updating outlet: "+(x instanceof Error?x.message:"Unknown error")),console.error("Error updating outlet:",x)}finally{o(!1)}}},w=(b,x)=>{if(b.includes(".")){const[g,N]=b.split(".");a(j=>({...j,[g]:{...j[g]||{},[N]:x}}))}else a(g=>({...g,[b]:x}));s[b]&&i(g=>({...g,[b]:""}))},S=b=>{a(x=>({...x,features:x.features.includes(b)?x.features.filter(g=>g!==b):[...x.features,b]}))};return c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading outlet..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{onClick:()=>e("/outlets"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Outlets"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Outlet"}),n.jsx("p",{className:"text-gray-600",children:"Update outlet information"})]})]})}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Code *"}),n.jsx("input",{type:"text",className:`input-field ${s.outletCode?"border-red-500":""}`,value:r.outletCode,onChange:b=>w("outletCode",b.target.value.toUpperCase()),placeholder:"OUTLET-001"}),s.outletCode&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.outletCode})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.outletName?"border-red-500":""}`,value:r.outletName,onChange:b=>w("outletName",b.target.value),placeholder:"Downtown Restaurant"}),s.outletName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.outletName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Type"}),n.jsx("select",{className:"input-field",value:r.outletType,onChange:b=>w("outletType",b.target.value),children:d.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("select",{className:"input-field",value:r.status,onChange:b=>w("status",b.target.value),children:f.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.description,onChange:b=>w("description",b.target.value),placeholder:"Brief description of the outlet..."})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"isCentralKitchen",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:r.isCentralKitchen,onChange:b=>w("isCentralKitchen",b.target.checked)}),n.jsx("label",{htmlFor:"isCentralKitchen",className:"ml-2 block text-sm text-gray-900",children:"This is a Central Kitchen"})]})})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),n.jsx("input",{type:"text",className:`input-field ${s.street?"border-red-500":""}`,value:r.address.street,onChange:b=>w("address.street",b.target.value),placeholder:"123 Main Street"}),s.street&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.street})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),n.jsx("input",{type:"text",className:`input-field ${s.city?"border-red-500":""}`,value:r.address.city,onChange:b=>w("address.city",b.target.value),placeholder:"Kuwait City"}),s.city&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.city})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.state,onChange:b=>w("address.state",b.target.value),placeholder:"Kuwait"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.zipCode,onChange:b=>w("address.zipCode",b.target.value),placeholder:"12345"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),n.jsx("input",{type:"text",className:"input-field",value:r.address.country,onChange:b=>w("address.country",b.target.value),placeholder:"Kuwait"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Phone *"}),n.jsx("input",{type:"tel",className:`input-field ${s.phone?"border-red-500":""}`,value:r.contactInfo.phone,onChange:b=>w("contactInfo.phone",b.target.value),placeholder:"+965 1234 5678"}),s.phone&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outlet Email *"}),n.jsx("input",{type:"email",className:`input-field ${s.email?"border-red-500":""}`,value:r.contactInfo.email,onChange:b=>w("contactInfo.email",b.target.value),placeholder:"outlet@restaurant.com"}),s.email&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Name *"}),n.jsx("input",{type:"text",className:`input-field ${s.managerName?"border-red-500":""}`,value:r.contactInfo.managerName,onChange:b=>w("contactInfo.managerName",b.target.value),placeholder:"John Smith"}),s.managerName&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.managerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Phone"}),n.jsx("input",{type:"tel",className:"input-field",value:r.contactInfo.managerPhone,onChange:b=>w("contactInfo.managerPhone",b.target.value),placeholder:"+965 9876 5432"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager Email"}),n.jsx("input",{type:"email",className:"input-field",value:r.contactInfo.managerEmail,onChange:b=>w("contactInfo.managerEmail",b.target.value),placeholder:"manager@restaurant.com"})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Capacity & Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seating Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.seatingCapacity,onChange:b=>w("capacity.seatingCapacity",parseInt(b.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kitchen Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.kitchenCapacity,onChange:b=>w("capacity.kitchenCapacity",parseInt(b.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Capacity"}),n.jsx("input",{type:"number",className:"input-field",value:r.capacity.storageCapacity,onChange:b=>w("capacity.storageCapacity",parseInt(b.target.value)||0),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity Unit"}),n.jsx("select",{className:"input-field",value:r.capacity.capacityUnit,onChange:b=>w("capacity.capacityUnit",b.target.value),children:m.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(b=>n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:r.features.includes(b),onChange:()=>S(b)}),n.jsx("span",{className:"ml-2 text-sm text-gray-900",children:b})]},b))})]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),n.jsx("input",{type:"text",className:"input-field",value:r.timezone,onChange:b=>w("timezone",b.target.value),placeholder:"Asia/Kuwait"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:r.notes,onChange:b=>w("notes",b.target.value),placeholder:"Additional notes about the outlet..."})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/outlets"),className:"btn-secondary",disabled:l,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn-primary flex items-center",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Update Outlet"]})})]})]})]})},uce=()=>{const e=Qe(),[t,r]=O.useState(null),[a,s]=O.useState(!0),[i,l]=O.useState(null),{notifications:o,markAsRead:c,markAllAsRead:u,clearAll:d}=Ki("Central Kitchen");O.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0),l(null);const m=await de.getCentralKitchens();if(m.success&&m.data.length>0){const p=m.data[0];r(p)}else l("Central Kitchen not found")}catch(m){l(m instanceof Error?m.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",m)}finally{s(!1)}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Central Kitchen..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:f,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(hn,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Central Kitchen"}),n.jsxs("p",{className:"text-gray-600",children:["Main production facility - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:f,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(qi,{notifications:o,onMarkAsRead:c,onMarkAllAsRead:u,onClearAll:d})]})]}),n.jsx("div",{className:"card p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(hn,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t==null?void 0:t.outletName}),n.jsx("p",{className:"text-gray-600",children:"Central Kitchen Operations"}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Tb,{className:"h-4 w-4 mr-1"}),"Production Facility"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(lx,{className:"h-4 w-4 mr-1"}),"24/7 Operations"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-1"}),"Distribution Hub"]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t==null?void 0:t.outletCode}),n.jsx("div",{className:"text-sm text-gray-500",children:"Central Kitchen"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Material Inventory"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(mo,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Good Inventory"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/make-finished-good"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Ab,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Make Finished Good"}),n.jsx("p",{className:"text-gray-600",children:"Create finished goods from raw materials"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/central-kitchen/create-transfer"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Rr,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Transfer"}),n.jsx("p",{className:"text-gray-600",children:"Transfer inventory to outlets"})]})]})})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>e("/central-kitchen/add-item"),className:"btn-primary flex items-center justify-center",children:[n.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Add Inventory Item"]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center justify-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"View All Transfers"]}),n.jsxs("button",{onClick:()=>e("/sales-orders"),className:"btn-secondary flex items-center justify-center",children:[n.jsx(hn,{className:"h-4 w-4 mr-2"}),"View Sales Orders"]})]})]})]})},UP=({isOpen:e,onClose:t,onConfirm:r,onCancel:a,title:s,message:i,type:l="info",confirmText:o="OK",cancelText:c="Cancel",showCancel:u=!1})=>{if(!e)return null;const d=()=>{switch(l){case"success":return n.jsx(_b,{className:"h-6 w-6 text-green-600"});case"warning":return n.jsx(El,{className:"h-6 w-6 text-yellow-600"});case"error":return n.jsx(Cb,{className:"h-6 w-6 text-red-600"});default:return n.jsx(iT,{className:"h-6 w-6 text-blue-600"})}},f=()=>{switch(l){case"success":return"bg-green-600 hover:bg-green-700 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-700 text-white";case"error":return"bg-red-600 hover:bg-red-700 text-white";default:return"bg-blue-600 hover:bg-blue-700 text-white"}},m=()=>{r&&r(),t()},p=()=>{a&&a(),t()};return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),n.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[n.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:n.jsxs("div",{className:"sm:flex sm:items-start",children:[n.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 sm:mx-0 sm:h-10 sm:w-10",children:d()}),n.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s}),n.jsx("div",{className:"mt-2",children:n.jsx("p",{className:"text-sm text-gray-500 whitespace-pre-line",children:i})})]})]})}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[u&&n.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:p,children:c}),n.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm ${f()}`,onClick:m,children:o})]})]})]})})},WP=({isOpen:e,onClose:t,transferOrder:r,onAccept:a,onReject:s,loading:i=!1})=>{if(!e||!r)return null;const l=u=>{switch(u){case"Urgent":return"bg-red-100 text-red-800 border-red-200";case"High":return"bg-orange-100 text-orange-800 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},o=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),c=u=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD"}).format(u);return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Rr,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Order Details"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Order #",r.transferNumber]})]})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(hn,{className:"h-5 w-5 text-blue-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"From Outlet"})]}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Outlet:"}),n.jsx("span",{className:"ml-2 text-gray-900",children:r.fromOutlet.name})]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(By,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Transfer Date"})]}),n.jsx("p",{className:"text-gray-900",children:o(r.transferDate)})]}),n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Cb,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Priority"})]}),n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${l(r.priority)}`,children:r.priority})]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Ci,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Requested By"})]}),n.jsx("p",{className:"text-gray-900",children:r.requestedBy}),n.jsx("p",{className:"text-xs text-gray-500",children:o(r.requestedAt||r.transferDate)})]})}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transfer Items"}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Price"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.items.map((u,d)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.itemCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:u.itemName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u.itemType==="Raw Material"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:u.itemType==="Raw Material"?"Raw Material":"Finished Goods"})}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:[u.category||"-",u.subCategory&&n.jsx("div",{className:"text-xs text-gray-400",children:u.subCategory})]}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[u.quantity," ",u.unitOfMeasure]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:c(u.unitPrice)}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c(u.totalPrice||u.totalValue||0)})]},d))})]}),n.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Amount:"}),n.jsx("span",{className:"text-xl font-bold text-gray-900",children:c(r.totalAmount||r.totalValue||0)})]})})]})]})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Review the transfer order details before making a decision"}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",disabled:i,children:"Close"}),n.jsx("button",{onClick:()=>{const u=r._id||r.id||"";console.log("TransferOrderModal: Reject button clicked"),console.log("TransferOrderModal: transferOrder._id =",r._id),console.log("TransferOrderModal: transferOrder.id =",r.id),console.log("TransferOrderModal: Using transferOrderId =",u),s(u)},className:"px-4 py-2 text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors disabled:opacity-50",disabled:i,children:i?"Processing...":"Reject Order"}),n.jsx("button",{onClick:()=>{const u=r._id||r.id||"";console.log("TransferOrderModal: Accept button clicked"),console.log("TransferOrderModal: transferOrder._id =",r._id),console.log("TransferOrderModal: transferOrder.id =",r.id),console.log("TransferOrderModal: Using transferOrderId =",u),a(u)},className:"px-4 py-2 text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors disabled:opacity-50",disabled:i,children:i?"Processing...":"Accept Order"})]})]})]})})},dce=()=>{const e=O.useRef(null),{confirmation:t,closeConfirmation:r}=$w(),[a,s]=O.useState(null),[i,l]=O.useState([]),[o,c]=O.useState(!0),[u,d]=O.useState(null),[f,m]=O.useState(""),[p,y]=O.useState(""),[h,v]=O.useState(""),[w,S]=O.useState("materialName"),[b,x]=O.useState("asc"),[g,N]=O.useState(null),[j,C]=O.useState(!1),[_,T]=O.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[E,k]=O.useState(!1),[A,P]=O.useState(null),[F,U]=O.useState(!1),[W,K]=O.useState(!1),[B,ee]=O.useState(!1),{notifications:oe,markAsRead:R,markAllAsRead:V,clearAll:X,refreshNotifications:J}=Ki("Central Kitchen"),Z=oe.filter(pe=>{var ne,je,re,ve,Ie;return pe.isTransferOrder&&(pe.itemType==="Raw Material"||pe.itemType==="Mixed")&&(((ne=pe.title)==null?void 0:ne.includes("Transfer Request from Kuwait City"))||((je=pe.title)==null?void 0:je.includes("Transfer Request from 360 Mall"))||((re=pe.title)==null?void 0:re.includes("Transfer Request from Vibes Complex"))||((ve=pe.title)==null?void 0:ve.includes("Transfer Request from Taiba Hospital")))||((Ie=pe.title)==null?void 0:Ie.includes("Items Received from Ingredient Master"))&&pe.type==="success"});O.useEffect(()=>{console.log(" Central Kitchen: All notifications:",oe),console.log(" Central Kitchen: Filtered notifications:",Z),console.log(" Central Kitchen: Number of all notifications:",oe.length),console.log(" Central Kitchen: Number of filtered notifications:",Z.length)},[oe,Z]),O.useEffect(()=>{const pe=setInterval(()=>{console.log(" Central Kitchen Raw Materials: Auto-refreshing notifications..."),J()},5e3);return()=>clearInterval(pe)},[J]),O.useEffect(()=>{le()},[]),O.useEffect(()=>{o||xe()},[f,p,h,w,b]);const le=async()=>{try{c(!0),d(null);const pe=await de.getCentralKitchens();if(pe.success&&pe.data.length>0){const ne=pe.data[0];s({id:ne._id,outletCode:ne.kitchenCode,outletName:ne.kitchenName,outletType:"Central Kitchen",isCentralKitchen:!0}),await xe()}else d("Central Kitchen not found")}catch(pe){d(pe instanceof Error?pe.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",pe)}finally{c(!1)}},xe=async()=>{try{console.log("Loading raw materials from Central Kitchen dedicated database");const pe=await de.getCentralKitchenRawMaterials({limit:1e3,search:f,subCategory:p,status:h,sortBy:w==="materialName"?"materialName":w,sortOrder:b});if(pe.success)if(console.log("Loaded Central Kitchen Raw Materials:",pe.data),pe.data&&pe.data.length>0){const ne=pe.data.map(je=>({id:je._id||je.id,outletId:"central-kitchen",outletCode:"CK001",outletName:"Central Kitchen",materialId:je._id,materialCode:je.materialCode,materialName:je.materialName,category:je.subCategory,unitOfMeasure:je.unitOfMeasure,unitPrice:je.unitPrice,currentStock:je.currentStock,reservedStock:0,availableStock:je.currentStock,minimumStock:je.minimumStock,maximumStock:je.maximumStock,reorderPoint:je.reorderPoint,totalValue:je.currentStock*je.unitPrice,location:"Main Storage",batchNumber:"",supplier:"",lastUpdated:je.lastStockUpdate||je.updatedAt,status:je.status,notes:je.notes||"",isActive:!0}));l(ne)}else console.log("No raw materials inventory found for this central kitchen"),l([]);else console.error("Failed to load raw materials inventory:",pe.error||"API Error"),d(`Failed to load inventory from server: ${pe.error||"Unknown error"}`)}catch(pe){d(pe instanceof Error?pe.message:"Failed to load inventory"),console.error("Error loading inventory:",pe)}},ae=()=>{m(""),y(""),v(""),S("materialName"),x("asc")},M=pe=>{N(pe),T({currentStock:pe.currentStock.toString(),minimumStock:pe.minimumStock.toString(),maximumStock:pe.maximumStock.toString(),reorderPoint:pe.reorderPoint.toString(),unitPrice:pe.unitPrice.toString(),notes:pe.notes||""}),C(!0)},G=async()=>{if(g)try{c(!0);const pe={currentStock:parseFloat(_.currentStock)||0,minimumStock:parseFloat(_.minimumStock)||0,maximumStock:parseFloat(_.maximumStock)||0,reorderPoint:parseFloat(_.reorderPoint)||0,unitPrice:parseFloat(_.unitPrice)||0,notes:_.notes,updatedBy:"user"},ne=await de.updateCentralKitchenRawMaterial(g.id,pe);if(ne.success)alert("Raw material updated successfully!"),C(!1),N(null),await xe();else throw new Error(ne.message||"Failed to update raw material")}catch(pe){console.error("Error updating raw material:",pe),alert(`Failed to update raw material: ${pe instanceof Error?pe.message:"Unknown error"}`)}finally{c(!1)}},D=()=>{C(!1),N(null),T({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},se=()=>{var pe;(pe=e.current)==null||pe.click()},I=async pe=>{var ve;const ne=(ve=pe.target.files)==null?void 0:ve[0];if(!ne)return;const je=ne.name.toLowerCase().endsWith(".xlsx")||ne.name.toLowerCase().endsWith(".xls"),re=ne.name.toLowerCase().endsWith(".csv");if(!je&&!re){alert("Please select an Excel (.xlsx, .xls) or CSV file");return}try{if(ee(!0),je){const Ie=await de.importCentralKitchenExcel(ne);if(Ie.success){const{results:ye}=Ie;let $e=`Excel Import completed!

Total Rows: ${ye.totalRows}
Processed: ${ye.totalProcessed}
Created: ${ye.created}
Updated: ${ye.updated}
Skipped: ${ye.skipped}
Errors: ${ye.errors}`;ye.skippedReasons&&ye.skippedReasons.length>0&&($e+=`

Skipped Reasons:
${ye.skippedReasons.join(`
`)}`),alert($e),await xe()}else alert("Import failed: "+Ie.message)}else{const ye=(await ne.text()).split(`
`).filter(Pt=>Pt.trim());if(ye.length<2){alert("CSV file must contain at least a header row and one data row");return}const $e=ye.slice(1);let ot=0,Be=0;for(const Pt of $e)try{const or=Pt.split(",").map(tt=>tt.replace(/"/g,"").trim()),nt={materialCode:or[0],materialName:or[1],category:or[3],unitOfMeasure:or[4],unitPrice:0,currentStock:0,minimumStock:0,maximumStock:0,supplier:"",notes:""},Ya={id:`rm-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,outletId:(a==null?void 0:a.id)||"central-kitchen-001",outletCode:(a==null?void 0:a.outletCode)||"",outletName:(a==null?void 0:a.outletName)||"",materialId:nt.materialCode,materialCode:nt.materialCode,materialName:nt.materialName,category:nt.category,unitOfMeasure:nt.unitOfMeasure,unitPrice:nt.unitPrice,currentStock:nt.currentStock,reservedStock:0,availableStock:nt.currentStock,minimumStock:nt.minimumStock,maximumStock:nt.maximumStock,reorderPoint:Math.ceil(nt.minimumStock*1.5),totalValue:nt.currentStock*nt.unitPrice,location:"Main Storage",batchNumber:`BATCH-${Date.now()}`,supplier:nt.supplier,lastUpdated:new Date().toISOString(),status:"In Stock",notes:nt.notes,isActive:!0};l(tt=>[...tt,Ya]),ot++}catch{Be++}alert(`CSV Import completed!

Successfully imported: ${ot} items
Errors: ${Be}`)}}catch(Ie){alert("Error importing file: "+(Ie instanceof Error?Ie.message:"Unknown error"))}finally{ee(!1),e.current&&(e.current.value="")}},ce=async pe=>{try{console.log(" Central Kitchen Raw Materials: handleViewTransferOrder called with transferOrderId:",pe),U(!0);const ne=await de.getTransferOrderById(pe);if(ne.success)P(ne.data),k(!0),console.log(" Central Kitchen Raw Materials: Transfer order modal opened successfully");else throw new Error(ne.message||"Failed to load transfer order")}catch(ne){console.error("Error loading transfer order:",ne),alert("Failed to load transfer order details")}finally{U(!1)}},ue=async pe=>{try{U(!0),console.log("Starting acceptance process for transfer order:",pe),console.log("Fetching transfer order details...");const ne=await de.getTransferOrderById(pe);if(!ne.success)throw new Error(ne.message||"Failed to fetch transfer order");const je=ne.data;console.log("Transfer order details:",je),console.log("Approving transfer order...");let re;try{re=await de.approveTransferOrder(pe,{approvedBy:"Central Kitchen Manager",notes:"Transfer order approved by Central Kitchen"}),console.log("Approval response:",re)}catch(ve){throw console.error("Approval failed:",ve),new Error(`Approval failed: ${ve instanceof Error?ve.message:"Unknown error"}`)}if(re.success)alert("Transfer order accepted successfully!"),k(!1),P(null),R(pe);else throw new Error(`Failed to approve transfer order: ${re.message}`)}catch(ne){console.error("Error accepting transfer order:",ne),console.error("Error details:",ne instanceof Error?ne.message:"Unknown error"),alert(`Failed to accept transfer order: ${ne instanceof Error?ne.message:"Unknown error"}`)}finally{U(!1)}},te=async pe=>{var ne,je,re;try{U(!0),console.log("Starting rejection process for transfer order:",pe),console.log("Fetching transfer order details...");const ve=await de.getTransferOrderById(pe);if(!ve.success)throw new Error(ve.message||"Failed to fetch transfer order");const Ie=ve.data;console.log("Transfer order details:",Ie),console.log("Updating transfer order inventory...");let ye,$e;try{$e=await de.updateTransferOrderInventory(pe,"reject"),console.log("Inventory update response:",$e)}catch(ot){throw console.error("Inventory update failed:",ot),new Error(`Inventory update failed: ${ot instanceof Error?ot.message:"Unknown error"}`)}try{ye=await de.updateTransferOrderStatus(pe,{status:"Rejected",approvedBy:"Central Kitchen Manager",notes:"Transfer order rejected by Central Kitchen"}),console.log("Status update response:",ye)}catch(ot){throw console.error("Status update failed:",ot),new Error(`Status update failed: ${ot instanceof Error?ot.message:"Unknown error"}`)}if(ye.success&&$e.success){const ot=((ne=Ie.items[0])==null?void 0:ne.itemType)||"Mixed",Be=Ie.items.map(nt=>`${nt.itemName} (${nt.quantity} ${nt.unitOfMeasure||"pcs"})`).join(", "),Pt=typeof Ie.fromOutlet=="string"?Ie.fromOutlet:((je=Ie.fromOutlet)==null?void 0:je.outletName)||((re=Ie.fromOutlet)==null?void 0:re.name)||"Unknown Outlet";console.log("Creating notification for",Pt,"...");const or=await de.createNotification({title:"Transfer Order Rejected",message:`Transfer order #${Ie.transferNumber} has been rejected. Requested items: ${Be}`,type:"transfer_rejection",targetOutlet:Pt,sourceOutlet:"Central Kitchen",transferOrderId:pe,itemType:ot,priority:"normal"});console.log("Notification response:",or),alert(`Transfer order rejected and notification sent to ${Pt}`),k(!1),P(null),R(pe)}else throw new Error(`Failed to update transfer order status. Status: ${ye.success}, Inventory: ${$e.success}`)}catch(ve){console.error("Error rejecting transfer order:",ve),console.error("Error details:",ve instanceof Error?ve.message:"Unknown error"),alert(`Failed to reject transfer order: ${ve instanceof Error?ve.message:"Unknown error"}`)}finally{U(!1)}},Ue=async()=>{try{K(!0),console.log("Starting export of raw materials..."),await de.exportCentralKitchenRawMaterials({search:f,subCategory:p,status:h}),console.log("Export completed successfully")}catch(pe){console.error("Error exporting raw materials:",pe),alert(`Failed to export raw materials: ${pe instanceof Error?pe.message:"Unknown error"}`)}finally{K(!1)}},et=i.length,Je=i.reduce((pe,ne)=>pe+ne.totalValue,0),Ge=i.filter(pe=>pe.status==="Low Stock").length,Ke=i.filter(pe=>pe.status==="Out of Stock").length,Le=[...new Set(i.map(pe=>pe.category))];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Raw Materials..."})]})}):u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:u}),n.jsx("button",{onClick:le,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Raw Material Inventory"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",a==null?void 0:a.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Ue,disabled:W,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),W?"Exporting...":"Export"]}),n.jsxs("button",{onClick:le,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(qi,{notifications:Z,onMarkAsRead:R,onMarkAllAsRead:V,onClearAll:X,onViewTransferOrder:ce,onRefresh:J})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:et})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Ve,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[Je.toFixed(2)," KWD"]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx(El,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ge})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(mT,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ke})]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",className:"input-field pl-10",value:f,onChange:pe=>m(pe.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:ae,className:"btn-secondary flex items-center",title:"Clear all filters",children:"Clear Filters"}),n.jsx("button",{onClick:se,disabled:B,className:`btn-secondary flex items-center ${B?"opacity-50 cursor-not-allowed":""}`,title:"Import inventory from Excel or CSV",children:B?n.jsxs(n.Fragment,{children:[n.jsx(Mr,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ta,{className:"h-4 w-4 mr-2"}),"Import"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:p,onChange:pe=>y(pe.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),Le.map(pe=>n.jsx("option",{value:pe,children:pe},pe))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:h,onChange:pe=>v(pe.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),n.jsx("option",{value:"Overstock",children:"Overstock"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:pe=>S(pe.target.value),children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastUpdated",children:"Last Updated"})]}),n.jsx("button",{onClick:()=>x(b==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${b==="asc"?"Descending":"Ascending"}`,children:b==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",i.length," raw material items",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(f||p||h)&&n.jsx("button",{onClick:ae,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]}),n.jsxs("div",{className:"card overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Complete inventory list with all fields"})]})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-green-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(Ve,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No raw materials found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Raw materials inventory is empty"})]})})}):i.map(pe=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:pe.materialCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:pe.materialName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.category}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",pe.unitPrice?Number(pe.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.currentStock}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>M(pe),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:"Edit"})})]},pe.id))})]})})]}),B&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx(Mr,{className:"h-8 w-8 animate-spin text-blue-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-center mb-2",children:"Importing Excel File"}),n.jsx("p",{className:"text-gray-600 text-center mb-4",children:"Please wait while we process your Excel file..."}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})}),n.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"This may take a few moments depending on file size"})]})}),n.jsx("input",{ref:e,type:"file",accept:".xlsx,.xls,.csv",onChange:I,style:{display:"none"}}),j&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Raw Material: ",g.materialName]}),n.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.currentStock,onChange:pe=>T(ne=>({...ne,currentStock:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.minimumStock,onChange:pe=>T(ne=>({...ne,minimumStock:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.maximumStock,onChange:pe=>T(ne=>({...ne,maximumStock:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reorder Point (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.reorderPoint,onChange:pe=>T(ne=>({...ne,reorderPoint:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",value:_.unitPrice,onChange:pe=>T(ne=>({...ne,unitPrice:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:_.notes,onChange:pe=>T(ne=>({...ne,notes:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Optional notes..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:D,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),n.jsx("button",{onClick:G,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Saving...":"Save Changes"})]})]})}),n.jsx(UP,{isOpen:t.isOpen,onClose:r,onConfirm:t.onConfirm,onCancel:t.onCancel,title:t.title,message:t.message,type:t.type,confirmText:t.confirmText,cancelText:t.cancelText,showCancel:t.showCancel}),n.jsx(WP,{isOpen:E,onClose:()=>{k(!1),P(null)},transferOrder:A,onAccept:ue,onReject:te,loading:F})]})},fce="modulepreload",mce=function(e){return"/"+e},h_={},Qd=function(t,r,a){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=mce(i),i in h_)return;h_[i]=!0;const l=i.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(!!a)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===i&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":fce,l||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),l)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i})},hce=()=>{const e=O.useRef(null),{confirmation:t,closeConfirmation:r}=$w(),[a,s]=O.useState(null),[i,l]=O.useState([]),[o,c]=O.useState(!0),[u,d]=O.useState(null),[f,m]=O.useState(""),[p,y]=O.useState(""),[h,v]=O.useState(""),[w,S]=O.useState("materialName"),[b,x]=O.useState("asc"),[g,N]=O.useState(null),[j,C]=O.useState(!1),[_,T]=O.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[E,k]=O.useState(!1),[A,P]=O.useState(null),[F,U]=O.useState(!1),[W,K]=O.useState(!1),[B,ee]=O.useState(!1),{notifications:oe,markAsRead:R,markAllAsRead:V,clearAll:X,refreshNotifications:J}=Ki("Central Kitchen"),Z=oe.filter(ne=>{var je,re,ve,Ie,ye;return ne.isTransferOrder&&(ne.itemType==="Finished Goods"||ne.itemType==="Mixed")&&(((je=ne.title)==null?void 0:je.includes("Transfer Request from Kuwait City"))||((re=ne.title)==null?void 0:re.includes("Transfer Request from 360 Mall"))||((ve=ne.title)==null?void 0:ve.includes("Transfer Request from Vibes Complex"))||((Ie=ne.title)==null?void 0:Ie.includes("Transfer Request from Taiba Hospital")))||((ye=ne.title)==null?void 0:ye.includes("Items Received from Ingredient Master"))&&ne.type==="success"});O.useEffect(()=>{console.log(" Central Kitchen Finished Goods: All notifications:",oe),console.log(" Central Kitchen Finished Goods: Filtered notifications:",Z),console.log(" Central Kitchen Finished Goods: Number of all notifications:",oe.length),console.log(" Central Kitchen Finished Goods: Number of filtered notifications:",Z.length)},[oe,Z]),O.useEffect(()=>{const ne=setInterval(()=>{console.log(" Central Kitchen Finished Goods: Auto-refreshing notifications..."),J()},5e3);return()=>clearInterval(ne)},[J]),O.useEffect(()=>{le()},[]),O.useEffect(()=>{o||xe()},[f,p,h,w,b]);const le=async()=>{try{c(!0),d(null);const ne=await de.getCentralKitchens();if(ne.success&&ne.data&&Array.isArray(ne.data)&&ne.data.length>0){const je=ne.data[0];s({id:je._id,outletCode:je.kitchenCode,outletName:je.kitchenName,outletType:"Central Kitchen",isCentralKitchen:!0}),await xe()}else d("Central Kitchen not found")}catch(ne){d(ne instanceof Error?ne.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",ne)}finally{c(!1)}},xe=async()=>{try{console.log("Loading finished goods from Central Kitchen dedicated database");const ne=await de.getCentralKitchenFinishedProducts({limit:1e3,search:f,subCategory:p,status:h,sortBy:w==="materialName"?"materialName":w,sortOrder:b});if(ne.success)if(console.log("Loaded Central Kitchen Finished Goods:",ne.data),ne.data&&Array.isArray(ne.data)&&ne.data.length>0){const je=ne.data.map(re=>({id:re._id||re.id,outletId:"central-kitchen",outletCode:"CK001",outletName:"Central Kitchen",materialId:re._id,materialCode:re.productCode,materialName:re.productName,category:re.subCategory,unitOfMeasure:re.unitOfMeasure,unitPrice:re.unitPrice,currentStock:re.currentStock,reservedStock:0,availableStock:re.currentStock,minimumStock:re.minimumStock,maximumStock:re.maximumStock,reorderPoint:re.reorderPoint,totalValue:re.currentStock*re.unitPrice,location:"Main Storage",batchNumber:"",supplier:"",lastUpdated:re.lastStockUpdate||re.updatedAt,status:re.status,notes:re.notes||"",isActive:!0}));l(je)}else console.log("No finished goods inventory found for this central kitchen"),l([]);else console.error("Failed to load finished goods inventory:",ne.error||"API Error"),d(`Failed to load inventory from server: ${ne.error||"Unknown error"}`)}catch(ne){d(ne instanceof Error?ne.message:"Failed to load inventory"),console.error("Error loading inventory:",ne)}},ae=()=>{m(""),y(""),v(""),S("materialName"),x("asc")},M=ne=>{N(ne),T({currentStock:ne.currentStock.toString(),minimumStock:ne.minimumStock.toString(),maximumStock:ne.maximumStock.toString(),reorderPoint:ne.reorderPoint.toString(),unitPrice:ne.unitPrice.toString(),notes:ne.notes||""}),C(!0)},G=async()=>{if(g)try{c(!0);const ne={currentStock:Number.parseFloat(_.currentStock)||0,minimumStock:Number.parseFloat(_.minimumStock)||0,maximumStock:Number.parseFloat(_.maximumStock)||0,reorderPoint:Number.parseFloat(_.reorderPoint)||0,unitPrice:Number.parseFloat(_.unitPrice)||0,notes:_.notes,updatedBy:"user"},je=await de.updateCentralKitchenFinishedProduct(g.id,ne);if(je.success)alert("Finished product updated successfully!"),C(!1),N(null),await xe();else throw new Error(je.message||"Failed to update finished product")}catch(ne){console.error("Error updating finished product:",ne),alert(`Failed to update finished product: ${ne instanceof Error?ne.message:"Unknown error"}`)}finally{c(!1)}},D=()=>{C(!1),N(null),T({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},se=()=>{var ne;(ne=e.current)==null||ne.click()},I=async()=>{try{const ne=[{SKU:"psk-001","Product Name":"Sample Finished Good","Sales Description":"Sample finished good description","Parent Category":"Finish Product","SubCategory Name":"MAIN COURSES",Unit:"piece","Unit Price":10.5,"Cost Price":7.25,"Current Quantity":100,"Minimum Stock":10,"Maximum Stock":500,"Reorder Point":25,Status:"Active",Description:"Sample product description",Notes:"Sample notes"}],je=await Qd(()=>Promise.resolve().then(()=>hf),void 0),re=je.utils.book_new(),ve=je.utils.json_to_sheet(ne),Ie=[{wch:15},{wch:25},{wch:30},{wch:20},{wch:20},{wch:15},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:12},{wch:10},{wch:30},{wch:30}];ve["!cols"]=Ie,je.utils.book_append_sheet(re,ve,"Finished Goods Template");const ye=je.write(re,{type:"array",bookType:"xlsx"}),$e=new Blob([ye],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ot=window.URL.createObjectURL($e),Be=document.createElement("a");Be.href=ot,Be.download="Central_Kitchen_Finished_Goods_Template.xlsx",document.body.appendChild(Be),Be.click(),window.URL.revokeObjectURL(ot),document.body.removeChild(Be)}catch(ne){console.error("Error downloading template:",ne),alert("Error downloading template: "+(ne instanceof Error?ne.message:"Unknown error"))}},ce=async ne=>{var Ie;const je=(Ie=ne.target.files)==null?void 0:Ie[0];if(!je)return;const re=[".xlsx",".xls",".csv"],ve=je.name.toLowerCase().substring(je.name.lastIndexOf("."));if(!re.includes(ve)){alert("Please select an Excel file (.xlsx, .xls) or CSV file");return}try{ee(!0);let ye=[],$e=[];if(ve===".csv"){const Pt=(await je.text()).split(`
`).filter(nt=>nt.trim());if(Pt.length<2){alert("CSV file must contain at least a header row and one data row");return}ye=Pt.slice(1).map((nt,Ya)=>{try{if(!nt||nt.trim()==="")return null;const tt=nt.split(",").map($r=>$r.replace(/"/g,"").trim());return!tt[0]||!tt[1]||tt[0]===""||tt[1]===""?($e.push(`Row ${Ya+2}: Missing product code or name`),null):{productCode:String(tt[0]||"").trim(),productName:String(tt[1]||"").trim(),salesDescription:String(tt[2]||tt[1]||"").trim(),subCategory:String(tt[3]||"MAIN COURSES").trim(),unitOfMeasure:String(tt[4]||"piece").trim(),unitPrice:Number.parseFloat(tt[5]||"0")||0,costPrice:Number.parseFloat(tt[6]||"0")||0,currentStock:Number.parseFloat(tt[7]||"0")||0,minimumStock:Number.parseFloat(tt[8]||"5")||5,maximumStock:Number.parseFloat(tt[9]||"100")||100,reorderPoint:Number.parseFloat(tt[10]||"10")||10,status:String(tt[11]||"Active").trim(),description:String(tt[12]||"").trim(),notes:String(tt[13]||"").trim()}}catch(tt){return $e.push(`Row ${Ya+2}: ${tt instanceof Error?tt.message:"Parse error"}`),null}}).filter(Boolean)}else{const Be=await Qd(()=>Promise.resolve().then(()=>hf),void 0),Pt=await je.arrayBuffer(),or=Be.read(Pt,{type:"array"}),nt=or.SheetNames[0],Ya=or.Sheets[nt],tt=Be.utils.sheet_to_json(Ya,{header:1});if(tt.length<2){alert("Excel file must contain at least a header row and one data row");return}const $r=tt[0];ye=tt.slice(1).map((Gi,kn)=>{try{if(!Gi||Gi.every(Gs=>!Gs||Gs===""))return null;const dt=Gs=>{const Uf=$r.findIndex(Wf=>Wf&&Wf.toLowerCase().includes(Gs.toLowerCase()));return Uf>=0?String(Gi[Uf]||""):""},us=dt("sku")||dt("product code")||"",ds=dt("product name")||dt("item name")||dt("sales description")||"";return!us||!ds||us===""||ds===""?($e.push(`Row ${kn+2}: Missing product code or name`),null):{productCode:String(us||"").trim(),productName:String(ds||"").trim(),salesDescription:String(dt("sales description")||ds||dt("description")||"").trim(),subCategory:String(dt("subcategory name")||dt("subcategory")||dt("category")||"MAIN COURSES").trim(),unitOfMeasure:String(dt("unit")||dt("unit of measure")||"piece").trim(),unitPrice:Number.parseFloat(dt("unit price")||dt("price")||"0")||0,costPrice:Number.parseFloat(dt("cost price")||dt("cost")||"0")||0,currentStock:Number.parseFloat(dt("current quantity")||dt("current stock")||dt("quantity")||"0")||0,minimumStock:Number.parseFloat(dt("minimum stock")||"5")||5,maximumStock:Number.parseFloat(dt("maximum stock")||"100")||100,reorderPoint:Number.parseFloat(dt("reorder point")||"10")||10,status:String(dt("status")||"Active").trim(),description:String(dt("description")||"").trim(),notes:String(dt("notes")||"").trim()}}catch(dt){return $e.push(`Row ${kn+2}: ${dt instanceof Error?dt.message:"Parse error"}`),null}}).filter(Boolean)}if($e.length>0){console.warn("Parse errors:",$e);const Be=`Found ${$e.length} parsing errors:

${$e.slice(0,10).join(`
`)}${$e.length>10?`
... and ${$e.length-10} more errors`:""}`;alert(Be)}if(ye.length===0){alert("No valid products found in the file. Please check that your file has the required columns: Product Code, Product Name");return}console.log(`Parsed ${ye.length} products for import`);const ot=await de.importCentralKitchenFinishedProducts(ye);if(ot.success){const Be=ot.data,Pt=(Be==null?void 0:Be.successCount)||0,or=(Be==null?void 0:Be.errorCount)||0;let nt=`Import completed!

Successfully imported: ${Pt} items
Errors: ${or}`;Be!=null&&Be.errors&&Be.errors.length>0&&(console.warn("Import errors:",Be.errors),nt+=`

First few errors:
${Be.errors.slice(0,5).join(`
`)}`),alert(nt),await xe()}else throw new Error(ot.message||"Import failed")}catch(ye){console.error("Error importing file:",ye),alert("Error importing file: "+(ye instanceof Error?ye.message:"Unknown error"))}finally{ee(!1),e.current&&(e.current.value="")}},ue=async ne=>{try{console.log(" Central Kitchen Raw Materials: handleViewTransferOrder called with transferOrderId:",ne),U(!0);const je=await de.getTransferOrderById(ne);if(je.success)P(je.data),k(!0),console.log(" Central Kitchen Raw Materials: Transfer order modal opened successfully");else throw new Error(je.message||"Failed to load transfer order")}catch(je){console.error("Error loading transfer order:",je),alert("Failed to load transfer order details")}finally{U(!1)}},te=async ne=>{try{U(!0),console.log("Starting acceptance process for transfer order:",ne),console.log("Fetching transfer order details...");const je=await de.getTransferOrderById(ne);if(!je.success)throw new Error(je.message||"Failed to fetch transfer order");const re=je.data;console.log("Transfer order details:",re),console.log("Approving transfer order...");let ve;try{ve=await de.approveTransferOrder(ne,{approvedBy:"Central Kitchen Manager",notes:"Transfer order approved by Central Kitchen"}),console.log("Approval response:",ve)}catch(Ie){throw console.error("Approval failed:",Ie),new Error(`Approval failed: ${Ie instanceof Error?Ie.message:"Unknown error"}`)}if(ve.success)alert("Transfer order accepted successfully!"),k(!1),P(null),R(ne);else throw new Error(`Failed to approve transfer order: ${ve.message}`)}catch(je){console.error("Error accepting transfer order:",je),console.error("Error details:",je instanceof Error?je.message:"Unknown error"),alert(`Failed to accept transfer order: ${je instanceof Error?je.message:"Unknown error"}`)}finally{U(!1)}},Ue=async ne=>{try{U(!0),console.log("Starting rejection process for transfer order:",ne),console.log("Fetching transfer order details...");const je=await de.getTransferOrderById(ne);if(!je.success)throw new Error(je.message||"Failed to fetch transfer order");const re=je.data;console.log("Transfer order details:",re),console.log("Rejecting transfer order...");let ve;try{ve=await de.rejectTransferOrder(ne,{approvedBy:"Central Kitchen Manager",notes:"Transfer order rejected by Central Kitchen"}),console.log("Rejection response:",ve)}catch(Ie){throw console.error("Rejection failed:",Ie),new Error(`Rejection failed: ${Ie instanceof Error?Ie.message:"Unknown error"}`)}if(ve.success)alert("Transfer order rejected successfully!"),k(!1),P(null),R(ne);else throw new Error(`Failed to reject transfer order: ${ve.message}`)}catch(je){console.error("Error rejecting transfer order:",je),console.error("Error details:",je instanceof Error?je.message:"Unknown error"),alert(`Failed to reject transfer order: ${je instanceof Error?je.message:"Unknown error"}`)}finally{U(!1)}},et=async()=>{try{K(!0),console.log("Starting export of finished goods..."),await de.exportCentralKitchenFinishedProducts({search:f,subCategory:p,status:h}),console.log("Export completed successfully")}catch(ne){console.error("Error exporting finished goods:",ne),alert(`Failed to export finished goods: ${ne instanceof Error?ne.message:"Unknown error"}`)}finally{K(!1)}},Je=i.length,Ge=i.reduce((ne,je)=>ne+je.totalValue,0),Ke=i.filter(ne=>ne.status==="Low Stock").length,Le=i.filter(ne=>ne.status==="Out of Stock").length,pe=[...new Set(i.map(ne=>ne.category))];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Finished Goods..."})]})}):u?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:u}),n.jsx("button",{onClick:le,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6 relative",children:[B&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Importing Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Please wait while we process your file..."}),n.jsx("div",{className:"mt-4 text-sm text-gray-500",children:"This may take a few moments for large files"})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Finished Goods Inventory"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",a==null?void 0:a.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:et,disabled:W,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),W?"Exporting...":"Export"]}),n.jsxs("button",{onClick:le,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsx(qi,{notifications:Z,onMarkAsRead:R,onMarkAllAsRead:V,onClearAll:X,onViewTransferOrder:ue,onRefresh:J})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Je})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Ve,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[Ge.toFixed(2)," KWD"]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx(El,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Ke})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(mT,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Le})]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search finished goods by name, code, or supplier...",className:"input-field pl-10",value:f,onChange:ne=>m(ne.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:ae,className:"btn-secondary flex items-center",title:"Clear all filters",children:"Clear Filters"}),n.jsxs("button",{onClick:I,className:"btn-secondary flex items-center",title:"Download Excel template",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Template"]}),n.jsxs("button",{onClick:se,disabled:B,className:"btn-secondary flex items-center disabled:opacity-50",title:"Import finished goods from Excel/CSV",children:[n.jsx(Ta,{className:"h-4 w-4 mr-2"}),B?"Importing...":"Import"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{className:"input-field",value:p,onChange:ne=>y(ne.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),pe.map(ne=>n.jsx("option",{value:ne,children:ne},ne))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:h,onChange:ne=>v(ne.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),n.jsx("option",{value:"Overstock",children:"Overstock"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:ne=>S(ne.target.value),children:[n.jsx("option",{value:"materialName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastUpdated",children:"Last Updated"})]}),n.jsx("button",{onClick:()=>x(b==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${b==="asc"?"Descending":"Ascending"}`,children:b==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",i.length," finished goods items",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(f||p||h)&&n.jsx("button",{onClick:ae,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]}),n.jsxs("div",{className:"card overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods Inventory"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Complete inventory list with all fields"})]})})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-green-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-12 text-center",children:n.jsxs("div",{className:"text-gray-500",children:[n.jsx(Ve,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No finished goods found"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Finished goods inventory is empty"})]})})}):i.map(ne=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ne.materialCode}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.materialName}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ne.category}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ne.unitOfMeasure}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",ne.unitPrice?Number(ne.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:ne.currentStock}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>M(ne),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:"Edit"})})]},ne.id))})]})})]}),n.jsx("input",{ref:e,type:"file",accept:".xlsx,.xls,.csv",onChange:ce,style:{display:"none"}}),j&&g&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Raw Material: ",g.materialName]}),n.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.currentStock,onChange:ne=>T(je=>({...je,currentStock:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Minimum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.minimumStock,onChange:ne=>T(je=>({...je,minimumStock:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Maximum Stock (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.maximumStock,onChange:ne=>T(je=>({...je,maximumStock:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reorder Point (",g.unitOfMeasure,")"]}),n.jsx("input",{type:"number",value:_.reorderPoint,onChange:ne=>T(je=>({...je,reorderPoint:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",value:_.unitPrice,onChange:ne=>T(je=>({...je,unitPrice:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:_.notes,onChange:ne=>T(je=>({...je,notes:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Optional notes..."})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:D,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),n.jsx("button",{onClick:G,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Saving...":"Save Changes"})]})]})}),n.jsx(UP,{isOpen:t.isOpen,onClose:r,onConfirm:t.onConfirm,onCancel:t.onCancel,title:t.title,message:t.message,type:t.type,confirmText:t.confirmText,cancelText:t.cancelText,showCancel:t.showCancel}),n.jsx(WP,{isOpen:E,onClose:()=>{k(!1),P(null)},transferOrder:A,onAccept:te,onReject:Ue,loading:F})]})},xce=()=>{const e=Qe(),[t,r]=O.useState(null),[a,s]=O.useState(!0),[i,l]=O.useState(null),[o,c]=O.useState([]),[u,d]=O.useState(!1),[f,m]=O.useState([]),[p,y]=O.useState(null),[h,v]=O.useState(!1),[w,S]=O.useState({productCode:"",productName:"",category:"",unitOfMeasure:"pcs",quantity:1,costPrice:0,unitPrice:0,expiryDays:1,notes:""});O.useEffect(()=>{b()},[]);const b=async()=>{try{s(!0),l(null);const T=await de.getCentralKitchens();if(T.success&&T.data.length>0){const k=T.data[0];r(k)}else l("Central Kitchen not found");const E=await de.getCentralKitchenFinishedProducts({limit:1e3});E.success&&E.data&&m(E.data)}catch(T){l(T instanceof Error?T.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",T)}finally{s(!1)}},x=()=>{if(!w.productCode||!w.productName||!w.quantity){alert("Please select a finished good and enter quantity");return}const T={id:`item-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,productCode:w.productCode,productName:w.productName,category:w.category||"",unitOfMeasure:w.unitOfMeasure||"pcs",quantity:w.quantity||1,costPrice:w.costPrice||0,unitPrice:w.unitPrice||0,expiryDays:w.expiryDays||1,notes:w.notes||""};c(E=>[...E,T]),S({productCode:"",productName:"",category:"",unitOfMeasure:"pcs",quantity:1,costPrice:0,unitPrice:0,expiryDays:1,notes:""}),y(null),d(!1)},g=T=>{c(E=>E.filter(k=>k.id!==T))},N=(T,E,k)=>{c(A=>A.map(P=>P.id===T?{...P,[E]:k}:P))},j=async T=>{const E=f.find(k=>k.productCode===T);if(E){S(k=>({...k,productCode:E.productCode,productName:E.productName,category:E.subCategory,unitOfMeasure:E.unitOfMeasure,unitPrice:E.unitPrice,costPrice:E.costPrice}));try{v(!0);let k=null;if(k=await de.getBillOfMaterials({search:E.productName,limit:10}),(!k.success||!k.data||k.data.length===0)&&(k=await de.getBillOfMaterials({search:E.productCode,limit:10})),(!k.success||!k.data||k.data.length===0)&&E.bomCode&&(k=await de.getBillOfMaterials({search:E.bomCode,limit:10})),k.success&&k.data&&k.data.length>0){const A=k.data.find(P=>P.productName.toLowerCase()===E.productName.toLowerCase());y(A||k.data[0])}else y(null)}catch(k){console.error("Error fetching BOM:",k),y(null)}finally{v(!1)}}},C=async()=>{if(o.length===0){alert("Please add at least one item to produce");return}try{s(!0);for(const E of o){const k=await de.getBillOfMaterials({search:E.productName,limit:10});if(!k.success||!k.data||k.data.length===0){alert(`No recipe found for ${E.productName}. Cannot produce without recipe.`);return}const A=k.data.find(F=>F.productName.toLowerCase()===E.productName.toLowerCase())||k.data[0],P=await de.makeFinishedGood({productCode:E.productCode,productName:E.productName,quantity:E.quantity,bomCode:A.bomCode,notes:E.notes});if(!P.success){alert(`Failed to produce ${E.productName}: ${P.message}`);return}console.log(`Successfully produced ${E.productName}:`,P.data)}let T=`Production completed successfully!

Produced ${o.length} items:
`;o.forEach(E=>{T+=`- ${E.productName} (${E.quantity} ${E.unitOfMeasure})
`}),T+=`
Raw materials have been deducted from Central Kitchen inventory.
Finished goods have been added to Central Kitchen inventory.`,alert(T),c([]),await b()}catch(T){console.error("Error saving production:",T),alert("Failed to save production. Please try again.")}finally{s(!1)}},_=["pcs","kg","L","g","ml","box","pack","serving"];return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Make Finished Good..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:b,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Ab,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Make Finished Good"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:b,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/central-kitchen/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(Ve,{className:"h-4 w-4 mr-2"}),"View Finished Goods"]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Production Form"}),n.jsxs("button",{onClick:()=>d(!u),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),u&&n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Production Item"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finished Good *"}),n.jsxs("select",{className:"input-field",value:w.productCode||"",onChange:T=>j(T.target.value),children:[n.jsx("option",{value:"",children:"Select Finished Good"}),f.map(T=>n.jsxs("option",{value:T.productCode,children:[T.productName," (",T.productCode,")"]},T._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:w.productCode||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:w.productName||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsx("input",{type:"text",className:"input-field bg-gray-100",value:w.category||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure"}),n.jsx("select",{className:"input-field",value:w.unitOfMeasure||"pcs",onChange:T=>S(E=>({...E,unitOfMeasure:T.target.value})),children:_.map(T=>n.jsx("option",{value:T,children:T},T))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field",value:w.quantity||1,onChange:T=>S(E=>({...E,quantity:Number.parseInt(T.target.value)||1})),min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:w.costPrice||0,onChange:T=>S(E=>({...E,costPrice:Number.parseFloat(T.target.value)||0})),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:w.unitPrice||0,onChange:T=>S(E=>({...E,unitPrice:Number.parseFloat(T.target.value)||0})),min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Days"}),n.jsx("input",{type:"number",className:"input-field",value:w.expiryDays||1,onChange:T=>S(E=>({...E,expiryDays:Number.parseInt(T.target.value)||1})),min:"1"})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:w.notes||"",onChange:T=>S(E=>({...E,notes:T.target.value})),placeholder:"Additional notes about this production..."})]})]}),h&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),n.jsx("span",{className:"text-blue-600",children:"Loading recipe ingredients..."})]})}),p&&!h&&n.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Required Raw Materials (Recipe Master)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity per Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.items.map((T,E)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:T.materialCode||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:T.materialName||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:T.quantity||0}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:T.unitOfMeasure||"-"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:(T.unitCost||0)>0?(T.unitCost||0).toFixed(2)+" KWD":"0.00 KWD"}),n.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:(T.totalCost||0)>0?(T.totalCost||0).toFixed(2)+" KWD":"0.00 KWD"})]},E))}),n.jsx("tfoot",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("td",{colSpan:5,className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:"Total Recipe Cost:"}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:[p.totalCost.toFixed(2)," KWD"]})]})})]})}),n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"BOM Code:"})," ",p.bomCode]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Description:"})," ",p.productDescription]})]})]}),!p&&!h&&w.productCode&&n.jsx("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.jsx("span",{className:"text-yellow-800",children:"No recipe found for this finished good. Raw materials information not available."})]})}),n.jsxs("div",{className:"flex gap-3 mt-4",children:[n.jsxs("button",{onClick:x,className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add to Production"]}),n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Cancel"})]})]}),o.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Production Items (",o.length,")"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Days"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(T=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.productName}),n.jsxs("div",{className:"text-sm text-gray-500",children:[T.productCode,"  ",T.category]})]})}),n.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[n.jsx("input",{type:"number",className:"input-field w-20",value:T.quantity,onChange:E=>N(T.id,"quantity",Number.parseInt(E.target.value)||1),min:"1"}),n.jsx("span",{className:"ml-2 text-sm text-gray-500",children:T.unitOfMeasure})]}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",step:"0.01",className:"input-field w-24",value:T.costPrice,onChange:E=>N(T.id,"costPrice",Number.parseFloat(E.target.value)||0),min:"0"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",step:"0.01",className:"input-field w-24",value:T.unitPrice,onChange:E=>N(T.id,"unitPrice",Number.parseFloat(E.target.value)||0),min:"0"})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",className:"input-field w-20",value:T.expiryDays,onChange:E=>N(T.id,"expiryDays",Number.parseInt(E.target.value)||1),min:"1"})}),n.jsx("td",{className:"px-4 py-4",children:n.jsx("input",{type:"text",className:"input-field w-full",value:T.notes,onChange:E=>N(T.id,"notes",E.target.value),placeholder:"Production notes..."})}),n.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:n.jsx("button",{onClick:()=>g(T.id),className:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})})]},T.id))})]})}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Production Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:o.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Quantity"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:o.reduce((T,E)=>T+E.quantity,0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[o.reduce((T,E)=>T+E.quantity*E.unitPrice,0).toFixed(2)," KWD"]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Notes"}),n.jsx("textarea",{className:"input-field",rows:3,placeholder:"Additional notes about this production batch..."})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:C,disabled:a,className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Production"]})})]})]})]})},pce=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},gce=()=>{const e=Qe(),[t,r]=O.useState(null),[a,s]=O.useState(!0),[i,l]=O.useState(null),[o,c]=O.useState([]),[u,d]=O.useState([]),[f,m]=O.useState([]),[p,y]=O.useState(!1),[h,v]=O.useState({toOutlet:"",transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:""});O.useEffect(()=>{w(),S()},[]);const w=async()=>{try{s(!0),l(null);const k=await de.getCentralKitchens();if(k.success&&k.data.length>0){const A=k.data[0];r(A)}else l("Central Kitchen not found")}catch(k){l(k instanceof Error?k.message:"Failed to load central kitchen data"),console.error("Error loading central kitchen data:",k)}finally{s(!1)}},S=async()=>{try{y(!0),console.log("Loading raw materials and finished goods data...");const k=await de.getCentralKitchenRawMaterials({limit:1e3});k.success?(d(k.data),console.log("Loaded raw materials:",k.data.length)):console.error("Failed to load raw materials:",k.error||"API Error");const A=await de.getCentralKitchenFinishedProducts({limit:1e3});A.success?(m(A.data),console.log("Loaded finished goods:",A.data.length)):console.error("Failed to load finished goods:",A.error||"API Error")}catch(k){console.error("Error loading materials data:",k)}finally{y(!1)}},b=()=>{console.log("Add Item button clicked!");const k=`form-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log("Creating new form with ID:",k),c(A=>{const P=[...A,{id:k,data:{itemType:"Raw Material",itemCode:"",itemName:"",category:"",unitOfMeasure:"pcs",quantity:1,unitPrice:0,notes:""}}];return console.log("Updated forms array:",P),P})},x=(k,A,P)=>{c(F=>F.map(U=>{if(U.id===k){const W={...U,data:{...U.data,[A]:P}};if(A==="itemType"&&(W.data.itemCode="",W.data.itemName="",W.data.category=""),A==="itemCode"&&P){const K=g(W.data.itemType||"Raw Material",P);K&&(W.data.itemName=K.materialName||K.productName||"",W.data.category=K.category||K.subCategory||"",W.data.unitOfMeasure=_(K.unitOfMeasure||"pcs"),W.data.unitPrice=K.unitPrice||0)}return W}return U}))},g=(k,A)=>k==="Raw Material"?u.find(P=>P.materialCode===A):k==="Finished Goods"?f.find(P=>P.productCode===A):null,N=k=>{c(A=>A.filter(P=>P.id!==k))},j=async()=>{if(o.length===0){alert("Please add at least one item to transfer");return}if(!h.toOutlet){alert("Please select a destination outlet");return}if(o.filter(P=>!P.data.itemType||!P.data.itemCode||!P.data.itemName).length>0){alert("Please fill in all required fields (Item Type, Item Code) for all items");return}if(o.filter(P=>!P.data.quantity||P.data.quantity<=0).length>0){alert("Please enter valid quantities (greater than 0) for all items");return}try{s(!0);const P=o.map(W=>({itemType:W.data.itemType,itemCode:W.data.itemCode,itemName:W.data.itemName||W.data.itemCode,category:W.data.category||"",subCategory:W.data.subCategory||"",unitOfMeasure:W.data.unitOfMeasure||"pcs",quantity:W.data.quantity||1,unitPrice:W.data.unitPrice||0,notes:W.data.notes||""})),F={fromOutlet:(t==null?void 0:t.outletName)||"Central Kitchen",toOutlet:h.toOutlet,transferDate:h.transferDate,priority:h.priority,items:P,totalValue:P.reduce((W,K)=>W+K.quantity*K.unitPrice,0),notes:h.notes};console.log("Creating transfer with data:",F),console.log(" Calling apiService.createTransfer...");const U=await de.createTransfer(F);console.log(" Transfer API response:",U),U.success?(alert(`Transfer created successfully!

Transfer Details:
From: ${t==null?void 0:t.outletName}
To: ${F.toOutlet}
Items: ${P.length}
Total Value: ${F.totalValue.toFixed(2)} KWD

Transfer ID: ${U.data.transferId}

Stock has been updated in both Central Kitchen and destination outlet.${F.toOutlet==="Kuwait City"||F.toOutlet==="360 Mall"||F.toOutlet==="Vibe Complex"||F.toOutlet==="Taiba Hospital"?`

Notification sent to ${F.toOutlet}.`:""}`),c([]),v({toOutlet:"",transferDate:new Date().toISOString().split("T")[0],priority:"Normal",notes:""}),await S()):alert(`Transfer failed: ${U.message}`)}catch(P){console.error(" Error creating transfer:",P),console.error(" Error details:",{message:P instanceof Error?P.message:"Unknown error",stack:P instanceof Error?P.stack:void 0,response:P==null?void 0:P.response}),alert(`Failed to create transfer order: ${P instanceof Error?P.message:"Unknown error"}`)}finally{s(!1)}},C=["km (Kilometers)","lb (Pounds)","mg (Milli Grams)","ml (Milli Litre)","m (Meter)","pcs (Pieces)","pcs 6 (Pieces 6)","pcs 12 (Pieces 12)","No.s (Number)","ltr (Liter)","kg 2 (Kilograms2)","kg 5 (Kilograms 5)","kg 10 (Kilograms 10)","Pr (Portion)","kg (Kilograms)"],_=k=>{if(!k)return"pcs (Pieces)";const A={km:"km (Kilometers)",lb:"lb (Pounds)",mg:"mg (Milli Grams)",ml:"ml (Milli Litre)",m:"m (Meter)",pcs:"pcs (Pieces)","pcs 6":"pcs 6 (Pieces 6)","pcs 12":"pcs 12 (Pieces 12)","No.s":"No.s (Number)",ltr:"ltr (Liter)","kg 2":"kg 2 (Kilograms2)","kg 5":"kg 5 (Kilograms 5)","kg 10":"kg 10 (Kilograms 10)",Pr:"Pr (Portion)",kg:"kg (Kilograms)"};return C.includes(k)?k:A[k.trim()]||"pcs (Pieces)"},T=["Kuwait City","360 Mall","Vibes Complex","Taiba Hospital"],E=["Low","Normal","High","Urgent"];return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Create Transfer..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:w,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Rr,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Transfer"}),n.jsxs("p",{className:"text-gray-600",children:["Central Kitchen - ",t==null?void 0:t.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:w,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/transfer-orders"),className:"btn-secondary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"View All Transfers"]})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Transfer Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Outlet"}),n.jsx("input",{type:"text",className:"input-field",value:(t==null?void 0:t.outletName)||"Central Kitchen",disabled:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Outlet *"}),n.jsxs("select",{className:"input-field",value:h.toOutlet,onChange:k=>v(A=>({...A,toOutlet:k.target.value})),children:[n.jsx("option",{value:"",children:"Select Destination"}),T.map(k=>n.jsx("option",{value:k,children:k},k))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Date"}),n.jsx("input",{type:"date",className:"input-field",value:h.transferDate,onChange:k=>v(A=>({...A,transferDate:k.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("select",{className:"input-field",value:h.priority,onChange:k=>v(A=>({...A,priority:k.target.value})),children:E.map(k=>n.jsx("option",{value:k,children:k},k))})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transfer Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:h.notes,onChange:k=>v(A=>({...A,notes:k.target.value})),placeholder:"Additional notes about this transfer..."})]})]}),n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transfer Items"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:S,disabled:p,className:"btn-secondary flex items-center text-sm",title:"Refresh materials data",children:[n.jsx(Mr,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),p?"Loading...":"Refresh Items"]}),n.jsxs("button",{onClick:b,className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),o.map((k,A)=>n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Item #",A+1]}),n.jsx("button",{onClick:()=>N(k.id),className:"text-red-600 hover:text-red-900 text-sm",children:"Remove Item"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Type *"}),n.jsxs("select",{className:"input-field",value:k.data.itemType||"",onChange:P=>x(k.id,"itemType",P.target.value),children:[n.jsx("option",{value:"",children:"Select Item Type"}),n.jsx("option",{value:"Raw Material",children:"Raw Material"}),n.jsx("option",{value:"Finished Goods",children:"Finished Goods"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Code *"}),n.jsx(pce,{value:k.data.itemCode||"",onChange:P=>x(k.id,"itemCode",P),disabled:!k.data.itemType||p,placeholder:"Select Item",options:k.data.itemType==="Raw Material"?u.map(P=>({value:P.materialCode,label:`${P.materialCode} - ${P.materialName}`})):k.data.itemType==="Finished Goods"?f.map(P=>({value:P.productCode,label:`${P.productCode} - ${P.productName}`})):[]}),p&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading items..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),n.jsx("input",{type:"text",className:"input-field",value:k.data.itemName||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsx("input",{type:"text",className:"input-field",value:k.data.category||"",readOnly:!0,placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure"}),n.jsx("select",{className:"input-field",value:k.data.unitOfMeasure||"pcs (Pieces)",onChange:P=>x(k.id,"unitOfMeasure",P.target.value),children:C.map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field",value:k.data.quantity||1,onChange:P=>x(k.id,"quantity",parseInt(P.target.value)||1),min:"1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:k.data.unitPrice||0,onChange:P=>x(k.id,"unitPrice",parseFloat(P.target.value)||0),min:"0",placeholder:"Auto-filled from selection"})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Notes"}),n.jsx("textarea",{className:"input-field",rows:2,value:k.data.notes||"",onChange:P=>x(k.id,"notes",P.target.value),placeholder:"Additional notes about this item..."})]})]})]},k.id)),o.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Transfer Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:o.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Quantity"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:o.reduce((k,A)=>k+(A.data.quantity||1),0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[o.reduce((k,A)=>k+(A.data.quantity||1)*(A.data.unitPrice||0),0).toFixed(2)," KWD"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Priority"}),n.jsx("p",{className:"text-xl font-semibold text-gray-900",children:h.priority})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:j,disabled:a,className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),a?"Creating Transfer Order...":"Create Transfer Order"]})})]}),o.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Rr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Items Added"}),n.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Add Item" to start adding items to your transfer order'})]})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Jd={};Jd.version="0.18.5";var Wa=1200,Fl=1252,yce=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Bw={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Yx=function(e){yce.indexOf(e)!=-1&&(Fl=Bw[0]=e)};function vce(){Yx(1252)}var fn=function(e){Wa=e,Yx(e)};function Qx(){fn(1200),vce()}function Oh(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function bce(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function qP(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var To=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?bce(e.slice(2)):t==254&&r==255?qP(e.slice(2)):t==65279?e.slice(1):e},ju=function(t){return String.fromCharCode(t)},f1=function(t){return String.fromCharCode(t)},xt;function wce(e){xt=e,fn=function(t){Wa=t,Yx(t)},To=function(t){return t.charCodeAt(0)===255&&t.charCodeAt(1)===254?xt.utils.decode(1200,Oh(t.slice(2))):t},ju=function(r){return Wa===1200?String.fromCharCode(r):xt.utils.decode(Wa,[r&255,r>>8])[0]},f1=function(r){return xt.utils.decode(Fl,[r])[0]},v6()}var ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Zd(e){for(var t="",r=0,a=0,s=0,i=0,l=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,a=e.charCodeAt(u++),l=(r&3)<<4|a>>4,s=e.charCodeAt(u++),o=(a&15)<<2|s>>6,c=s&63,isNaN(a)?o=c=64:isNaN(s)&&(c=64),t+=ci.charAt(i)+ci.charAt(l)+ci.charAt(o)+ci.charAt(c);return t}function Va(e){var t="",r=0,a=0,s=0,i=0,l=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=ci.indexOf(e.charAt(u++)),l=ci.indexOf(e.charAt(u++)),r=i<<2|l>>4,t+=String.fromCharCode(r),o=ci.indexOf(e.charAt(u++)),a=(l&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(a)),c=ci.indexOf(e.charAt(u++)),s=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var it=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),zs=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function _i(e){return it?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function x_(e){return it?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var La=function(t){return it?zs(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Pf(e){if(typeof ArrayBuffer>"u")return La(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function zi(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Nce(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function Uw(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Uw(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Dr=it?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:zs(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function jce(e){for(var t=[],r=0,a=e.length+250,s=_i(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)s[r++]=l;else if(l<2048)s[r++]=192|l>>6&31,s[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;s[r++]=240|l>>8&7,s[r++]=128|l>>2&63,s[r++]=128|o>>6&15|(l&3)<<4,s[r++]=128|o&63}else s[r++]=224|l>>12&15,s[r++]=128|l>>6&63,s[r++]=128|l&63;r>a&&(t.push(s.slice(0,r)),r=0,s=_i(65535),a=65530)}return t.push(s.slice(0,r)),Dr(t)}var oa=/\u0000/g,Su=/[\u0001-\u0006]/g;function Ko(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ln(e,t){var r=""+e;return r.length>=t?r:ar("0",t-r.length)+r}function Ww(e,t){var r=""+e;return r.length>=t?r:ar(" ",t-r.length)+r}function Eh(e,t){var r=""+e;return r.length>=t?r:r+ar(" ",t-r.length)}function Sce(e,t){var r=""+Math.round(e);return r.length>=t?r:ar("0",t-r.length)+r}function kce(e,t){var r=""+e;return r.length>=t?r:ar("0",t-r.length)+r}var p_=Math.pow(2,32);function lo(e,t){if(e>p_||e<-p_)return Sce(e,t);var r=Math.round(e);return kce(r,t)}function Th(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var g_=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Cce(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var ze={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},y_={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},_ce={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Ah(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,l=1,o=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*l+i,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),i=l,l=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=i):(d=u,o=l)),!r)return[0,a*o,d];var m=Math.floor(a*o/d);return[m,a*o-m*d,d]}function ui(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,l=[],o={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(a+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++a,++o.D)),a===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Dce(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var KP=new Date(1899,11,31,0,0,0),Oce=KP.getTime(),Ece=new Date(1900,2,1,0,0,0);function zP(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Ece&&(r+=24*60*60*1e3),(r-(Oce+(e.getTimezoneOffset()-KP.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function qw(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Tce(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ace(e){var t=e<0?12:11,r=qw(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Pce(e){var t=qw(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ef(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Ace(e):t===10?r=e.toFixed(10).substr(0,12):r=Pce(e),qw(Tce(r.toUpperCase()))}function Ml(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ef(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ha(14,zP(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Dce(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Ice(e,t,r,a){var s="",i=0,l=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return wg[r.m-1][1];case 5:return wg[r.m-1][0];default:return wg[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return g_[r.q][0];default:return g_[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ln(r.S,t.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),t==="s"?i===0?"0":""+i/l:(s=Ln(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Ln(c,u):"";return d}function di(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var VP=/%/g;function Fce(e,t,r){var a=t.replace(VP,""),s=t.length-a.length;return Ts(e,a,r*Math.pow(10,2*s))+ar("%",s)}function Mce(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ts(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function HP(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+HP(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var GP=/# (\?+)( ?)\/( ?)(\d+)/;function Rce(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),l=s-i*a,o=a;return r+(i===0?"":""+i)+" "+(l===0?ar(" ",e[1].length+1+e[4].length):Ww(l,e[1].length)+e[2]+"/"+e[3]+Ln(o,e[4].length))}function Lce(e,t,r){return r+(t===0?"":""+t)+ar(" ",e[1].length+2+e[4].length)}var XP=/^#*0*\.([0#]+)/,YP=/\).*[0#]/,QP=/\(###\) ###\\?-####/;function ha(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function v_(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function b_(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function $ce(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Bce(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function tn(e,t,r){if(e.charCodeAt(0)===40&&!t.match(YP)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?tn("n",a,r):"("+tn("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Mce(e,t,r);if(t.indexOf("%")!==-1)return Fce(e,t,r);if(t.indexOf("E")!==-1)return HP(t,r);if(t.charCodeAt(0)===36)return"$"+tn(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,l,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+lo(c,t.length);if(t.match(/^[#?]+$/))return s=lo(r,0),s==="0"&&(s=""),s.length>t.length?s:ha(t.substr(0,t.length-s.length))+s;if(i=t.match(GP))return Rce(i,c,u);if(t.match(/^#+0+$/))return u+lo(c,t.length-t.indexOf("0"));if(i=t.match(XP))return s=v_(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ha(i[1])).replace(/\.$/,"."+ha(i[1])).replace(/\.(\d*)$/,function(y,h){return"."+h+ar("0",ha(i[1]).length-h.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+v_(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+di(lo(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+tn(e,t,-r):di(""+(Math.floor(r)+$ce(r,i[1].length)))+"."+Ln(b_(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return tn(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Ko(tn(e,t.replace(/[\\-]/g,""),r)),l=0,Ko(Ko(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return l<s.length?s.charAt(l++):y==="0"?"0":""}));if(t.match(QP))return s=tn(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Ah(c,Math.pow(10,l)-1,!1),s=""+u,d=Ts("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=Eh(o[2],l),d.length<i[4].length&&(d=ha(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Ah(c,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Ww(o[1],l)+i[2]+"/"+i[3]+Eh(o[2],l):ar(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=lo(r,0),t.length<=s.length?s:ha(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=s.indexOf(".");var f=t.indexOf(".")-l,m=t.length-s.length-f;return ha(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return l=b_(r,i[1].length),r<0?"-"+tn(e,t,-r):di(Bce(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Ln(0,3-y.length):"")+y})+"."+Ln(l,i[1].length);switch(t){case"###,##0.00":return tn(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=di(lo(c,0));return p!=="0"?u+p:"";case"###,###.00":return tn(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return tn(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Uce(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ts(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Wce(e,t,r){var a=t.replace(VP,""),s=t.length-a.length;return Ts(e,a,r*Math.pow(10,2*s))+ar("%",s)}function JP(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+JP(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+i)%s)+"."+d.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Hn(e,t,r){if(e.charCodeAt(0)===40&&!t.match(YP)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Hn("n",a,r):"("+Hn("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Uce(e,t,r);if(t.indexOf("%")!==-1)return Wce(e,t,r);if(t.indexOf("E")!==-1)return JP(t,r);if(t.charCodeAt(0)===36)return"$"+Hn(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,l,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ln(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:ha(t.substr(0,t.length-s.length))+s;if(i=t.match(GP))return Lce(i,c,u);if(t.match(/^#+0+$/))return u+Ln(c,t.length-t.indexOf("0"));if(i=t.match(XP))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ha(i[1])).replace(/\.$/,"."+ha(i[1])),s=s.replace(/\.(\d*)$/,function(y,h){return"."+h+ar("0",ha(i[1]).length-h.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+di(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Hn(e,t,-r):di(""+r)+"."+ar("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Hn(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Ko(Hn(e,t.replace(/[\\-]/g,""),r)),l=0,Ko(Ko(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return l<s.length?s.charAt(l++):y==="0"?"0":""}));if(t.match(QP))return s=Hn(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Ah(c,Math.pow(10,l)-1,!1),s=""+u,d=Ts("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+i[2]+"/"+i[3],d=Eh(o[2],l),d.length<i[4].length&&(d=ha(i[4].substr(i[4].length-d.length))+d),s+=d,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Ah(c,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Ww(o[1],l)+i[2]+"/"+i[3]+Eh(o[2],l):ar(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:ha(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=s.indexOf(".");var f=t.indexOf(".")-l,m=t.length-s.length-f;return ha(t.substr(0,f)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Hn(e,t,-r):di(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Ln(0,3-y.length):"")+y})+"."+Ln(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=di(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return Hn(e,t.slice(0,t.lastIndexOf(".")),r)+ha(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ts(e,t,r){return(r|0)===r?Hn(e,t,r):tn(e,t,r)}function qce(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var ZP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Xl(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":Th(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(ZP))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Kce(e,t,r,a){for(var s=[],i="",l=0,o="",c="t",u,d,f,m="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!Th(e,l))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(f=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++l;break;case"\\":var p=e.charAt(++l),y=p==="("||p===")"?p:"t";s[s.length]={t:y,v:p},++l;break;case"_":s[s.length]={t:"t",v:" "},l+=2;break;case"@":s[s.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(u==null&&(u=ui(t,r,e.charAt(l+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=ui(t,r),u==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),s[s.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var h={t:o,v:o};if(u==null&&(u=ui(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(u!=null&&(h.v=u.H>=12?"P":"A"),h.t="T",m="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(u!=null&&(h.v=u.H>=12?"PM":"AM"),h.t="T",l+=5,m="h"):e.substr(l,5).toUpperCase()==="/"?(u!=null&&(h.v=u.H>=12?"":""),h.t="T",l+=5,m="h"):(h.t="t",++l),u==null&&h.t==="T")return"";s[s.length]=h,c=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(ZP)){if(u==null&&(u=ui(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Xl(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;s[s.length]={t:o,v:i},c=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":s[s.length]={t:a===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++l;break;case"$":s[s.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++l;break}var v=0,w=0,S;for(l=s.length-1,c="t";l>=0;--l)switch(s[l].t){case"h":case"H":s[l].t=m,c="h",v<1&&(v=1);break;case"s":(S=s[l].v.match(/\.0+$/))&&(w=Math.max(w,S[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=s[l].t;break;case"m":c==="s"&&(s[l].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[l].v.match(/[Hh]/)&&(v=1),v<2&&s[l].v.match(/[Mm]/)&&(v=2),v<3&&s[l].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",x;for(l=0;l<s.length;++l)switch(s[l].t){case"t":case"T":case" ":case"D":break;case"X":s[l].v="",s[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[l].v=Ice(s[l].t.charCodeAt(0),s[l].v,u,w),s[l].t="t";break;case"n":case"?":for(x=l+1;s[x]!=null&&((o=s[x].t)==="?"||o==="D"||(o===" "||o==="t")&&s[x+1]!=null&&(s[x+1].t==="?"||s[x+1].t==="t"&&s[x+1].v==="/")||s[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[x].v==="/"||s[x].v===" "&&s[x+1]!=null&&s[x+1].t=="?"));)s[l].v+=s[x].v,s[x]={v:"",t:";"},++x;b+=s[l].v,l=x-1;break;case"G":s[l].t="t",s[l].v=Ml(t,r);break}var g="",N,j;if(b.length>0){b.charCodeAt(0)==40?(N=t<0&&b.charCodeAt(0)===45?-t:t,j=Ts("n",b,N)):(N=t<0&&a>1?-t:t,j=Ts("n",b,N),N<0&&s[0]&&s[0].t=="t"&&(j=j.substr(1),s[0].v="-"+s[0].v)),x=j.length-1;var C=s.length;for(l=0;l<s.length;++l)if(s[l]!=null&&s[l].t!="t"&&s[l].v.indexOf(".")>-1){C=l;break}var _=s.length;if(C===s.length&&j.indexOf("E")===-1){for(l=s.length-1;l>=0;--l)s[l]==null||"n?".indexOf(s[l].t)===-1||(x>=s[l].v.length-1?(x-=s[l].v.length,s[l].v=j.substr(x+1,s[l].v.length)):x<0?s[l].v="":(s[l].v=j.substr(0,x+1),x=-1),s[l].t="t",_=l);x>=0&&_<s.length&&(s[_].v=j.substr(0,x+1)+s[_].v)}else if(C!==s.length&&j.indexOf("E")===-1){for(x=j.indexOf(".")-1,l=C;l>=0;--l)if(!(s[l]==null||"n?".indexOf(s[l].t)===-1)){for(d=s[l].v.indexOf(".")>-1&&l===C?s[l].v.indexOf(".")-1:s[l].v.length-1,g=s[l].v.substr(d+1);d>=0;--d)x>=0&&(s[l].v.charAt(d)==="0"||s[l].v.charAt(d)==="#")&&(g=j.charAt(x--)+g);s[l].v=g,s[l].t="t",_=l}for(x>=0&&_<s.length&&(s[_].v=j.substr(0,x+1)+s[_].v),x=j.indexOf(".")+1,l=C;l<s.length;++l)if(!(s[l]==null||"n?(".indexOf(s[l].t)===-1&&l!==C)){for(d=s[l].v.indexOf(".")>-1&&l===C?s[l].v.indexOf(".")+1:0,g=s[l].v.substr(0,d);d<s[l].v.length;++d)x<j.length&&(g+=j.charAt(x++));s[l].v=g,s[l].t="t",_=l}}}for(l=0;l<s.length;++l)s[l]!=null&&"n?".indexOf(s[l].t)>-1&&(N=a>1&&t<0&&l>0&&s[l-1].v==="-"?-t:t,s[l].v=Ts(s[l].t,s[l].v,N),s[l].t="t");var T="";for(l=0;l!==s.length;++l)s[l]!=null&&(T+=s[l].v);return T}var w_=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function N_(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function zce(e,t){var r=qce(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(w_),o=r[1].match(w_);return N_(t,l)?[a,r[0]]:N_(t,o)?[a,r[1]]:[a,r[l!=null&&o!=null?2:1]]}return[a,i]}function Ha(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:ze)[e],a==null&&(a=r.table&&r.table[y_[e]]||ze[y_[e]]),a==null&&(a=_ce[e]||"General");break}if(Th(a,0))return Ml(t,r);t instanceof Date&&(t=zP(t,r.date1904));var s=zce(a,t);if(Th(s[1]))return Ml(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Kce(s[1],t,r,s[0])}function as(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(ze[r]==null){t<0&&(t=r);continue}if(ze[r]==e){t=r;break}}t<0&&(t=391)}return ze[t]=e,t}function Df(e){for(var t=0;t!=392;++t)e[t]!==void 0&&as(e[t],t)}function Kc(){ze=Cce()}var e6={format:Ha,load:as,_table:ze,load_table:Df,parse_date_code:ui,is_date:Xl,get_table:function(){return e6._table=ze}},Vce={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},t6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Hce(e){var t=typeof e=="number"?ze[e]:e;return t=t.replace(t6,"(\\d+)"),new RegExp("^"+t+"$")}function Gce(e,t,r){var a=-1,s=-1,i=-1,l=-1,o=-1,c=-1;(t.match(t6)||[]).forEach(function(f,m){var p=parseInt(r[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=p;break;case"d":i=p;break;case"h":l=p;break;case"s":c=p;break;case"m":l>=0?o=p:s=p;break}}),c>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?u:a==-1&&s==-1&&i==-1?d:u+"T"+d}var Xce=function(){var e={};e.version="1.2.0";function t(){for(var j=0,C=new Array(256),_=0;_!=256;++_)j=_,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,C[_]=j;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function a(j){var C=0,_=0,T=0,E=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)E[T]=j[T];for(T=0;T!=256;++T)for(_=j[T],C=256+T;C<4096;C+=256)_=E[C]=_>>>8^j[_&255];var k=[];for(T=1;T!=16;++T)k[T-1]=typeof Int32Array<"u"?E.subarray(T*256,T*256+256):E.slice(T*256,T*256+256);return k}var s=a(r),i=s[0],l=s[1],o=s[2],c=s[3],u=s[4],d=s[5],f=s[6],m=s[7],p=s[8],y=s[9],h=s[10],v=s[11],w=s[12],S=s[13],b=s[14];function x(j,C){for(var _=C^-1,T=0,E=j.length;T<E;)_=_>>>8^r[(_^j.charCodeAt(T++))&255];return~_}function g(j,C){for(var _=C^-1,T=j.length-15,E=0;E<T;)_=b[j[E++]^_&255]^S[j[E++]^_>>8&255]^w[j[E++]^_>>16&255]^v[j[E++]^_>>>24]^h[j[E++]]^y[j[E++]]^p[j[E++]]^m[j[E++]]^f[j[E++]]^d[j[E++]]^u[j[E++]]^c[j[E++]]^o[j[E++]]^l[j[E++]]^i[j[E++]]^r[j[E++]];for(T+=15;E<T;)_=_>>>8^r[(_^j[E++])&255];return~_}function N(j,C){for(var _=C^-1,T=0,E=j.length,k=0,A=0;T<E;)k=j.charCodeAt(T++),k<128?_=_>>>8^r[(_^k)&255]:k<2048?(_=_>>>8^r[(_^(192|k>>6&31))&255],_=_>>>8^r[(_^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,A=j.charCodeAt(T++)&1023,_=_>>>8^r[(_^(240|k>>8&7))&255],_=_>>>8^r[(_^(128|k>>2&63))&255],_=_>>>8^r[(_^(128|A>>6&15|(k&3)<<4))&255],_=_>>>8^r[(_^(128|A&63))&255]):(_=_>>>8^r[(_^(224|k>>12&15))&255],_=_>>>8^r[(_^(128|k>>6&63))&255],_=_>>>8^r[(_^(128|k&63))&255]);return~_}return e.table=r,e.bstr=x,e.buf=g,e.str=N,e}(),We=function(){var t={};t.version="1.2.1";function r(L,H){for(var q=L.split("/"),z=H.split("/"),Y=0,Q=0,me=Math.min(q.length,z.length);Y<me;++Y){if(Q=q[Y].length-z[Y].length)return Q;if(q[Y]!=z[Y])return q[Y]<z[Y]?-1:1}return q.length-z.length}function a(L){if(L.charAt(L.length-1)=="/")return L.slice(0,-1).indexOf("/")===-1?L:a(L.slice(0,-1));var H=L.lastIndexOf("/");return H===-1?L:L.slice(0,H+1)}function s(L){if(L.charAt(L.length-1)=="/")return s(L.slice(0,-1));var H=L.lastIndexOf("/");return H===-1?L:L.slice(H+1)}function i(L,H){typeof H=="string"&&(H=new Date(H));var q=H.getHours();q=q<<6|H.getMinutes(),q=q<<5|H.getSeconds()>>>1,L.write_shift(2,q);var z=H.getFullYear()-1980;z=z<<4|H.getMonth()+1,z=z<<5|H.getDate(),L.write_shift(2,z)}function l(L){var H=L.read_shift(2)&65535,q=L.read_shift(2)&65535,z=new Date,Y=q&31;q>>>=5;var Q=q&15;q>>>=4,z.setMilliseconds(0),z.setFullYear(q+1980),z.setMonth(Q-1),z.setDate(Y);var me=H&31;H>>>=5;var Ne=H&63;return H>>>=6,z.setHours(H),z.setMinutes(Ne),z.setSeconds(me<<1),z}function o(L){Kr(L,0);for(var H={},q=0;L.l<=L.length-4;){var z=L.read_shift(2),Y=L.read_shift(2),Q=L.l+Y,me={};switch(z){case 21589:q=L.read_shift(1),q&1&&(me.mtime=L.read_shift(4)),Y>5&&(q&2&&(me.atime=L.read_shift(4)),q&4&&(me.ctime=L.read_shift(4))),me.mtime&&(me.mt=new Date(me.mtime*1e3));break}L.l=Q,H[z]=me}return H}var c;function u(){return c||(c={})}function d(L,H){if(L[0]==80&&L[1]==75)return Sn(L,H);if((L[0]|32)==109&&(L[1]|32)==105)return nI(L,H);if(L.length<512)throw new Error("CFB file size "+L.length+" < 512");var q=3,z=512,Y=0,Q=0,me=0,Ne=0,fe=0,he=[],ge=L.slice(0,512);Kr(ge,0);var Ce=f(ge);switch(q=Ce[0],q){case 3:z=512;break;case 4:z=4096;break;case 0:if(Ce[1]==0)return Sn(L,H);default:throw new Error("Major Version: Expected 3 or 4 saw "+q)}z!==512&&(ge=L.slice(0,z),Kr(ge,28));var Pe=L.slice(0,z);m(ge,q);var Fe=ge.read_shift(4,"i");if(q===3&&Fe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Fe);ge.l+=4,me=ge.read_shift(4,"i"),ge.l+=4,ge.chk("00100000","Mini Stream Cutoff Size: "),Ne=ge.read_shift(4,"i"),Y=ge.read_shift(4,"i"),fe=ge.read_shift(4,"i"),Q=ge.read_shift(4,"i");for(var Oe=-1,De=0;De<109&&(Oe=ge.read_shift(4,"i"),!(Oe<0));++De)he[De]=Oe;var Ze=p(L,z);v(fe,Q,Ze,z,he);var Xt=S(Ze,me,he,z);Xt[me].name="!Directory",Y>0&&Ne!==A&&(Xt[Ne].name="!MiniFAT"),Xt[he[0]].name="!FAT",Xt.fat_addrs=he,Xt.ssz=z;var Yt={},Xr=[],Gc=[],Xc=[];b(me,Xt,Ze,Xr,Y,Yt,Gc,Ne),y(Gc,Xc,Xr),Xr.shift();var Yc={FileIndex:Gc,FullPaths:Xc};return H&&H.raw&&(Yc.raw={header:Pe,sectors:Ze}),Yc}function f(L){if(L[L.l]==80&&L[L.l+1]==75)return[0,0];L.chk(P,"Header Signature: "),L.l+=16;var H=L.read_shift(2,"u");return[L.read_shift(2,"u"),H]}function m(L,H){var q=9;switch(L.l+=2,q=L.read_shift(2)){case 9:if(H!=3)throw new Error("Sector Shift: Expected 9 saw "+q);break;case 12:if(H!=4)throw new Error("Sector Shift: Expected 12 saw "+q);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+q)}L.chk("0600","Mini Sector Shift: "),L.chk("000000000000","Reserved: ")}function p(L,H){for(var q=Math.ceil(L.length/H)-1,z=[],Y=1;Y<q;++Y)z[Y-1]=L.slice(Y*H,(Y+1)*H);return z[q-1]=L.slice(q*H),z}function y(L,H,q){for(var z=0,Y=0,Q=0,me=0,Ne=0,fe=q.length,he=[],ge=[];z<fe;++z)he[z]=ge[z]=z,H[z]=q[z];for(;Ne<ge.length;++Ne)z=ge[Ne],Y=L[z].L,Q=L[z].R,me=L[z].C,he[z]===z&&(Y!==-1&&he[Y]!==Y&&(he[z]=he[Y]),Q!==-1&&he[Q]!==Q&&(he[z]=he[Q])),me!==-1&&(he[me]=z),Y!==-1&&z!=he[z]&&(he[Y]=he[z],ge.lastIndexOf(Y)<Ne&&ge.push(Y)),Q!==-1&&z!=he[z]&&(he[Q]=he[z],ge.lastIndexOf(Q)<Ne&&ge.push(Q));for(z=1;z<fe;++z)he[z]===z&&(Q!==-1&&he[Q]!==Q?he[z]=he[Q]:Y!==-1&&he[Y]!==Y&&(he[z]=he[Y]));for(z=1;z<fe;++z)if(L[z].type!==0){if(Ne=z,Ne!=he[Ne])do Ne=he[Ne],H[z]=H[Ne]+"/"+H[z];while(Ne!==0&&he[Ne]!==-1&&Ne!=he[Ne]);he[z]=-1}for(H[0]+="/",z=1;z<fe;++z)L[z].type!==2&&(H[z]+="/")}function h(L,H,q){for(var z=L.start,Y=L.size,Q=[],me=z;q&&Y>0&&me>=0;)Q.push(H.slice(me*k,me*k+k)),Y-=k,me=sl(q,me*4);return Q.length===0?be(0):Dr(Q).slice(0,L.size)}function v(L,H,q,z,Y){var Q=A;if(L===A){if(H!==0)throw new Error("DIFAT chain shorter than expected")}else if(L!==-1){var me=q[L],Ne=(z>>>2)-1;if(!me)return;for(var fe=0;fe<Ne&&(Q=sl(me,fe*4))!==A;++fe)Y.push(Q);v(sl(me,z-4),H-1,q,z,Y)}}function w(L,H,q,z,Y){var Q=[],me=[];Y||(Y=[]);var Ne=z-1,fe=0,he=0;for(fe=H;fe>=0;){Y[fe]=!0,Q[Q.length]=fe,me.push(L[fe]);var ge=q[Math.floor(fe*4/z)];if(he=fe*4&Ne,z<4+he)throw new Error("FAT boundary crossed: "+fe+" 4 "+z);if(!L[ge])break;fe=sl(L[ge],he)}return{nodes:Q,data:I_([me])}}function S(L,H,q,z){var Y=L.length,Q=[],me=[],Ne=[],fe=[],he=z-1,ge=0,Ce=0,Pe=0,Fe=0;for(ge=0;ge<Y;++ge)if(Ne=[],Pe=ge+H,Pe>=Y&&(Pe-=Y),!me[Pe]){fe=[];var Oe=[];for(Ce=Pe;Ce>=0;){Oe[Ce]=!0,me[Ce]=!0,Ne[Ne.length]=Ce,fe.push(L[Ce]);var De=q[Math.floor(Ce*4/z)];if(Fe=Ce*4&he,z<4+Fe)throw new Error("FAT boundary crossed: "+Ce+" 4 "+z);if(!L[De]||(Ce=sl(L[De],Fe),Oe[Ce]))break}Q[Pe]={nodes:Ne,data:I_([fe])}}return Q}function b(L,H,q,z,Y,Q,me,Ne){for(var fe=0,he=z.length?2:0,ge=H[L].data,Ce=0,Pe=0,Fe;Ce<ge.length;Ce+=128){var Oe=ge.slice(Ce,Ce+128);Kr(Oe,64),Pe=Oe.read_shift(2),Fe=tp(Oe,0,Pe-he),z.push(Fe);var De={name:Fe,type:Oe.read_shift(1),color:Oe.read_shift(1),L:Oe.read_shift(4,"i"),R:Oe.read_shift(4,"i"),C:Oe.read_shift(4,"i"),clsid:Oe.read_shift(16),state:Oe.read_shift(4,"i"),start:0,size:0},Ze=Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2);Ze!==0&&(De.ct=x(Oe,Oe.l-8));var Xt=Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2)+Oe.read_shift(2);Xt!==0&&(De.mt=x(Oe,Oe.l-8)),De.start=Oe.read_shift(4,"i"),De.size=Oe.read_shift(4,"i"),De.size<0&&De.start<0&&(De.size=De.type=0,De.start=A,De.name=""),De.type===5?(fe=De.start,Y>0&&fe!==A&&(H[fe].name="!StreamData")):De.size>=4096?(De.storage="fat",H[De.start]===void 0&&(H[De.start]=w(q,De.start,H.fat_addrs,H.ssz)),H[De.start].name=De.name,De.content=H[De.start].data.slice(0,De.size)):(De.storage="minifat",De.size<0?De.size=0:fe!==A&&De.start!==A&&H[fe]&&(De.content=h(De,H[fe].data,(H[Ne]||{}).data))),De.content&&Kr(De.content,0),Q[Fe]=De,me.push(De)}}function x(L,H){return new Date((Pr(L,H+4)/1e7*Math.pow(2,32)+Pr(L,H)/1e7-11644473600)*1e3)}function g(L,H){return u(),d(c.readFileSync(L),H)}function N(L,H){var q=H&&H.type;switch(q||it&&Buffer.isBuffer(L)&&(q="buffer"),q||"base64"){case"file":return g(L,H);case"base64":return d(La(Va(L)),H);case"binary":return d(La(L),H)}return d(L,H)}function j(L,H){var q=H||{},z=q.root||"Root Entry";if(L.FullPaths||(L.FullPaths=[]),L.FileIndex||(L.FileIndex=[]),L.FullPaths.length!==L.FileIndex.length)throw new Error("inconsistent CFB structure");L.FullPaths.length===0&&(L.FullPaths[0]=z+"/",L.FileIndex[0]={name:z,type:5}),q.CLSID&&(L.FileIndex[0].clsid=q.CLSID),C(L)}function C(L){var H="Sh33tJ5";if(!We.find(L,"/"+H)){var q=be(4);q[0]=55,q[1]=q[3]=50,q[2]=54,L.FileIndex.push({name:H,type:2,content:q,size:4,L:69,R:69,C:69}),L.FullPaths.push(L.FullPaths[0]+H),_(L)}}function _(L,H){j(L);for(var q=!1,z=!1,Y=L.FullPaths.length-1;Y>=0;--Y){var Q=L.FileIndex[Y];switch(Q.type){case 0:z?q=!0:(L.FileIndex.pop(),L.FullPaths.pop());break;case 1:case 2:case 5:z=!0,isNaN(Q.R*Q.L*Q.C)&&(q=!0),Q.R>-1&&Q.L>-1&&Q.R==Q.L&&(q=!0);break;default:q=!0;break}}if(!(!q&&!H)){var me=new Date(1987,1,19),Ne=0,fe=Object.create?Object.create(null):{},he=[];for(Y=0;Y<L.FullPaths.length;++Y)fe[L.FullPaths[Y]]=!0,L.FileIndex[Y].type!==0&&he.push([L.FullPaths[Y],L.FileIndex[Y]]);for(Y=0;Y<he.length;++Y){var ge=a(he[Y][0]);z=fe[ge],z||(he.push([ge,{name:s(ge).replace("/",""),type:1,clsid:U,ct:me,mt:me,content:null}]),fe[ge]=!0)}for(he.sort(function(Fe,Oe){return r(Fe[0],Oe[0])}),L.FullPaths=[],L.FileIndex=[],Y=0;Y<he.length;++Y)L.FullPaths[Y]=he[Y][0],L.FileIndex[Y]=he[Y][1];for(Y=0;Y<he.length;++Y){var Ce=L.FileIndex[Y],Pe=L.FullPaths[Y];if(Ce.name=s(Pe).replace("/",""),Ce.L=Ce.R=Ce.C=-(Ce.color=1),Ce.size=Ce.content?Ce.content.length:0,Ce.start=0,Ce.clsid=Ce.clsid||U,Y===0)Ce.C=he.length>1?1:-1,Ce.size=0,Ce.type=5;else if(Pe.slice(-1)=="/"){for(Ne=Y+1;Ne<he.length&&a(L.FullPaths[Ne])!=Pe;++Ne);for(Ce.C=Ne>=he.length?-1:Ne,Ne=Y+1;Ne<he.length&&a(L.FullPaths[Ne])!=a(Pe);++Ne);Ce.R=Ne>=he.length?-1:Ne,Ce.type=1}else a(L.FullPaths[Y+1]||"")==a(Pe)&&(Ce.R=Y+1),Ce.type=2}}}function T(L,H){var q=H||{};if(q.fileType=="mad")return sI(L,q);switch(_(L),q.fileType){case"zip":return kn(L,q)}var z=function(Fe){for(var Oe=0,De=0,Ze=0;Ze<Fe.FileIndex.length;++Ze){var Xt=Fe.FileIndex[Ze];if(Xt.content){var Yt=Xt.content.length;Yt>0&&(Yt<4096?Oe+=Yt+63>>6:De+=Yt+511>>9)}}for(var Xr=Fe.FullPaths.length+3>>2,Gc=Oe+7>>3,Xc=Oe+127>>7,Yc=Gc+De+Xr+Xc,Xi=Yc+127>>7,cp=Xi<=109?0:Math.ceil((Xi-109)/127);Yc+Xi+cp+127>>7>Xi;)cp=++Xi<=109?0:Math.ceil((Xi-109)/127);var fs=[1,cp,Xi,Xc,Xr,De,Oe,0];return Fe.FileIndex[0].size=Oe<<6,fs[7]=(Fe.FileIndex[0].start=fs[0]+fs[1]+fs[2]+fs[3]+fs[4]+fs[5])+(fs[6]+7>>3),fs}(L),Y=be(z[7]<<9),Q=0,me=0;{for(Q=0;Q<8;++Q)Y.write_shift(1,F[Q]);for(Q=0;Q<8;++Q)Y.write_shift(2,0);for(Y.write_shift(2,62),Y.write_shift(2,3),Y.write_shift(2,65534),Y.write_shift(2,9),Y.write_shift(2,6),Q=0;Q<3;++Q)Y.write_shift(2,0);for(Y.write_shift(4,0),Y.write_shift(4,z[2]),Y.write_shift(4,z[0]+z[1]+z[2]+z[3]-1),Y.write_shift(4,0),Y.write_shift(4,4096),Y.write_shift(4,z[3]?z[0]+z[1]+z[2]-1:A),Y.write_shift(4,z[3]),Y.write_shift(-4,z[1]?z[0]-1:A),Y.write_shift(4,z[1]),Q=0;Q<109;++Q)Y.write_shift(-4,Q<z[2]?z[1]+Q:-1)}if(z[1])for(me=0;me<z[1];++me){for(;Q<236+me*127;++Q)Y.write_shift(-4,Q<z[2]?z[1]+Q:-1);Y.write_shift(-4,me===z[1]-1?A:me+1)}var Ne=function(Fe){for(me+=Fe;Q<me-1;++Q)Y.write_shift(-4,Q+1);Fe&&(++Q,Y.write_shift(-4,A))};for(me=Q=0,me+=z[1];Q<me;++Q)Y.write_shift(-4,W.DIFSECT);for(me+=z[2];Q<me;++Q)Y.write_shift(-4,W.FATSECT);Ne(z[3]),Ne(z[4]);for(var fe=0,he=0,ge=L.FileIndex[0];fe<L.FileIndex.length;++fe)ge=L.FileIndex[fe],ge.content&&(he=ge.content.length,!(he<4096)&&(ge.start=me,Ne(he+511>>9)));for(Ne(z[6]+7>>3);Y.l&511;)Y.write_shift(-4,W.ENDOFCHAIN);for(me=Q=0,fe=0;fe<L.FileIndex.length;++fe)ge=L.FileIndex[fe],ge.content&&(he=ge.content.length,!(!he||he>=4096)&&(ge.start=me,Ne(he+63>>6)));for(;Y.l&511;)Y.write_shift(-4,W.ENDOFCHAIN);for(Q=0;Q<z[4]<<2;++Q){var Ce=L.FullPaths[Q];if(!Ce||Ce.length===0){for(fe=0;fe<17;++fe)Y.write_shift(4,0);for(fe=0;fe<3;++fe)Y.write_shift(4,-1);for(fe=0;fe<12;++fe)Y.write_shift(4,0);continue}ge=L.FileIndex[Q],Q===0&&(ge.start=ge.size?ge.start-1:A);var Pe=Q===0&&q.root||ge.name;if(he=2*(Pe.length+1),Y.write_shift(64,Pe,"utf16le"),Y.write_shift(2,he),Y.write_shift(1,ge.type),Y.write_shift(1,ge.color),Y.write_shift(-4,ge.L),Y.write_shift(-4,ge.R),Y.write_shift(-4,ge.C),ge.clsid)Y.write_shift(16,ge.clsid,"hex");else for(fe=0;fe<4;++fe)Y.write_shift(4,0);Y.write_shift(4,ge.state||0),Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(4,ge.start),Y.write_shift(4,ge.size),Y.write_shift(4,0)}for(Q=1;Q<L.FileIndex.length;++Q)if(ge=L.FileIndex[Q],ge.size>=4096)if(Y.l=ge.start+1<<9,it&&Buffer.isBuffer(ge.content))ge.content.copy(Y,Y.l,0,ge.size),Y.l+=ge.size+511&-512;else{for(fe=0;fe<ge.size;++fe)Y.write_shift(1,ge.content[fe]);for(;fe&511;++fe)Y.write_shift(1,0)}for(Q=1;Q<L.FileIndex.length;++Q)if(ge=L.FileIndex[Q],ge.size>0&&ge.size<4096)if(it&&Buffer.isBuffer(ge.content))ge.content.copy(Y,Y.l,0,ge.size),Y.l+=ge.size+63&-64;else{for(fe=0;fe<ge.size;++fe)Y.write_shift(1,ge.content[fe]);for(;fe&63;++fe)Y.write_shift(1,0)}if(it)Y.l=Y.length;else for(;Y.l<Y.length;)Y.write_shift(1,0);return Y}function E(L,H){var q=L.FullPaths.map(function(fe){return fe.toUpperCase()}),z=q.map(function(fe){var he=fe.split("/");return he[he.length-(fe.slice(-1)=="/"?2:1)]}),Y=!1;H.charCodeAt(0)===47?(Y=!0,H=q[0].slice(0,-1)+H):Y=H.indexOf("/")!==-1;var Q=H.toUpperCase(),me=Y===!0?q.indexOf(Q):z.indexOf(Q);if(me!==-1)return L.FileIndex[me];var Ne=!Q.match(Su);for(Q=Q.replace(oa,""),Ne&&(Q=Q.replace(Su,"!")),me=0;me<q.length;++me)if((Ne?q[me].replace(Su,"!"):q[me]).replace(oa,"")==Q||(Ne?z[me].replace(Su,"!"):z[me]).replace(oa,"")==Q)return L.FileIndex[me];return null}var k=64,A=-2,P="d0cf11e0a1b11ae1",F=[208,207,17,224,161,177,26,225],U="00000000000000000000000000000000",W={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:A,FREESECT:-1,HEADER_SIGNATURE:P,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:U,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(L,H,q){u();var z=T(L,q);c.writeFileSync(H,z)}function B(L){for(var H=new Array(L.length),q=0;q<L.length;++q)H[q]=String.fromCharCode(L[q]);return H.join("")}function ee(L,H){var q=T(L,H);switch(H&&H.type||"buffer"){case"file":return u(),c.writeFileSync(H.filename,q),q;case"binary":return typeof q=="string"?q:B(q);case"base64":return Zd(typeof q=="string"?q:B(q));case"buffer":if(it)return Buffer.isBuffer(q)?q:zs(q);case"array":return typeof q=="string"?La(q):q}return q}var oe;function R(L){try{var H=L.InflateRaw,q=new H;if(q._processChunk(new Uint8Array([3,0]),q._finishFlushFlag),q.bytesRead)oe=L;else throw new Error("zlib does not expose bytesRead")}catch(z){console.error("cannot use native zlib: "+(z.message||z))}}function V(L,H){if(!oe)return tt(L,H);var q=oe.InflateRaw,z=new q,Y=z._processChunk(L.slice(L.l),z._finishFlushFlag);return L.l+=z.bytesRead,Y}function X(L){return oe?oe.deflateRawSync(L):ye(L)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function xe(L){var H=(L<<1|L<<11)&139536|(L<<5|L<<15)&558144;return(H>>16|H>>8|H)&255}for(var ae=typeof Uint8Array<"u",M=ae?new Uint8Array(256):[],G=0;G<256;++G)M[G]=xe(G);function D(L,H){var q=M[L&255];return H<=8?q>>>8-H:(q=q<<8|M[L>>8&255],H<=16?q>>>16-H:(q=q<<8|M[L>>16&255],q>>>24-H))}function se(L,H){var q=H&7,z=H>>>3;return(L[z]|(q<=6?0:L[z+1]<<8))>>>q&3}function I(L,H){var q=H&7,z=H>>>3;return(L[z]|(q<=5?0:L[z+1]<<8))>>>q&7}function ce(L,H){var q=H&7,z=H>>>3;return(L[z]|(q<=4?0:L[z+1]<<8))>>>q&15}function ue(L,H){var q=H&7,z=H>>>3;return(L[z]|(q<=3?0:L[z+1]<<8))>>>q&31}function te(L,H){var q=H&7,z=H>>>3;return(L[z]|(q<=1?0:L[z+1]<<8))>>>q&127}function Ue(L,H,q){var z=H&7,Y=H>>>3,Q=(1<<q)-1,me=L[Y]>>>z;return q<8-z||(me|=L[Y+1]<<8-z,q<16-z)||(me|=L[Y+2]<<16-z,q<24-z)||(me|=L[Y+3]<<24-z),me&Q}function et(L,H,q){var z=H&7,Y=H>>>3;return z<=5?L[Y]|=(q&7)<<z:(L[Y]|=q<<z&255,L[Y+1]=(q&7)>>8-z),H+3}function Je(L,H,q){var z=H&7,Y=H>>>3;return q=(q&1)<<z,L[Y]|=q,H+1}function Ge(L,H,q){var z=H&7,Y=H>>>3;return q<<=z,L[Y]|=q&255,q>>>=8,L[Y+1]=q,H+8}function Ke(L,H,q){var z=H&7,Y=H>>>3;return q<<=z,L[Y]|=q&255,q>>>=8,L[Y+1]=q&255,L[Y+2]=q>>>8,H+16}function Le(L,H){var q=L.length,z=2*q>H?2*q:H+5,Y=0;if(q>=H)return L;if(it){var Q=x_(z);if(L.copy)L.copy(Q);else for(;Y<L.length;++Y)Q[Y]=L[Y];return Q}else if(ae){var me=new Uint8Array(z);if(me.set)me.set(L);else for(;Y<q;++Y)me[Y]=L[Y];return me}return L.length=z,L}function pe(L){for(var H=new Array(L),q=0;q<L;++q)H[q]=0;return H}function ne(L,H,q){var z=1,Y=0,Q=0,me=0,Ne=0,fe=L.length,he=ae?new Uint16Array(32):pe(32);for(Q=0;Q<32;++Q)he[Q]=0;for(Q=fe;Q<q;++Q)L[Q]=0;fe=L.length;var ge=ae?new Uint16Array(fe):pe(fe);for(Q=0;Q<fe;++Q)he[Y=L[Q]]++,z<Y&&(z=Y),ge[Q]=0;for(he[0]=0,Q=1;Q<=z;++Q)he[Q+16]=Ne=Ne+he[Q-1]<<1;for(Q=0;Q<fe;++Q)Ne=L[Q],Ne!=0&&(ge[Q]=he[Ne+16]++);var Ce=0;for(Q=0;Q<fe;++Q)if(Ce=L[Q],Ce!=0)for(Ne=D(ge[Q],z)>>z-Ce,me=(1<<z+4-Ce)-1;me>=0;--me)H[Ne|me<<Ce]=Ce&15|Q<<4;return z}var je=ae?new Uint16Array(512):pe(512),re=ae?new Uint16Array(32):pe(32);if(!ae){for(var ve=0;ve<512;++ve)je[ve]=0;for(ve=0;ve<32;++ve)re[ve]=0}(function(){for(var L=[],H=0;H<32;H++)L.push(5);ne(L,re,32);var q=[];for(H=0;H<=143;H++)q.push(8);for(;H<=255;H++)q.push(9);for(;H<=279;H++)q.push(7);for(;H<=287;H++)q.push(8);ne(q,je,288)})();var Ie=function(){for(var H=ae?new Uint8Array(32768):[],q=0,z=0;q<le.length-1;++q)for(;z<le[q+1];++z)H[z]=q;for(;z<32768;++z)H[z]=29;var Y=ae?new Uint8Array(259):[];for(q=0,z=0;q<Z.length-1;++q)for(;z<Z[q+1];++z)Y[z]=q;function Q(Ne,fe){for(var he=0;he<Ne.length;){var ge=Math.min(65535,Ne.length-he),Ce=he+ge==Ne.length;for(fe.write_shift(1,+Ce),fe.write_shift(2,ge),fe.write_shift(2,~ge&65535);ge-- >0;)fe[fe.l++]=Ne[he++]}return fe.l}function me(Ne,fe){for(var he=0,ge=0,Ce=ae?new Uint16Array(32768):[];ge<Ne.length;){var Pe=Math.min(65535,Ne.length-ge);if(Pe<10){for(he=et(fe,he,+(ge+Pe==Ne.length)),he&7&&(he+=8-(he&7)),fe.l=he/8|0,fe.write_shift(2,Pe),fe.write_shift(2,~Pe&65535);Pe-- >0;)fe[fe.l++]=Ne[ge++];he=fe.l*8;continue}he=et(fe,he,+(ge+Pe==Ne.length)+2);for(var Fe=0;Pe-- >0;){var Oe=Ne[ge];Fe=(Fe<<5^Oe)&32767;var De=-1,Ze=0;if((De=Ce[Fe])&&(De|=ge&-32768,De>ge&&(De-=32768),De<ge))for(;Ne[De+Ze]==Ne[ge+Ze]&&Ze<250;)++Ze;if(Ze>2){Oe=Y[Ze],Oe<=22?he=Ge(fe,he,M[Oe+1]>>1)-1:(Ge(fe,he,3),he+=5,Ge(fe,he,M[Oe-23]>>5),he+=3);var Xt=Oe<8?0:Oe-4>>2;Xt>0&&(Ke(fe,he,Ze-Z[Oe]),he+=Xt),Oe=H[ge-De],he=Ge(fe,he,M[Oe]>>3),he-=3;var Yt=Oe<4?0:Oe-2>>1;Yt>0&&(Ke(fe,he,ge-De-le[Oe]),he+=Yt);for(var Xr=0;Xr<Ze;++Xr)Ce[Fe]=ge&32767,Fe=(Fe<<5^Ne[ge])&32767,++ge;Pe-=Ze-1}else Oe<=143?Oe=Oe+48:he=Je(fe,he,1),he=Ge(fe,he,M[Oe]),Ce[Fe]=ge&32767,++ge}he=Ge(fe,he,0)-1}return fe.l=(he+7)/8|0,fe.l}return function(fe,he){return fe.length<8?Q(fe,he):me(fe,he)}}();function ye(L){var H=be(50+Math.floor(L.length*1.1)),q=Ie(L,H);return H.slice(0,q)}var $e=ae?new Uint16Array(32768):pe(32768),ot=ae?new Uint16Array(32768):pe(32768),Be=ae?new Uint16Array(128):pe(128),Pt=1,or=1;function nt(L,H){var q=ue(L,H)+257;H+=5;var z=ue(L,H)+1;H+=5;var Y=ce(L,H)+4;H+=4;for(var Q=0,me=ae?new Uint8Array(19):pe(19),Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fe=1,he=ae?new Uint8Array(8):pe(8),ge=ae?new Uint8Array(8):pe(8),Ce=me.length,Pe=0;Pe<Y;++Pe)me[J[Pe]]=Q=I(L,H),fe<Q&&(fe=Q),he[Q]++,H+=3;var Fe=0;for(he[0]=0,Pe=1;Pe<=fe;++Pe)ge[Pe]=Fe=Fe+he[Pe-1]<<1;for(Pe=0;Pe<Ce;++Pe)(Fe=me[Pe])!=0&&(Ne[Pe]=ge[Fe]++);var Oe=0;for(Pe=0;Pe<Ce;++Pe)if(Oe=me[Pe],Oe!=0){Fe=M[Ne[Pe]]>>8-Oe;for(var De=(1<<7-Oe)-1;De>=0;--De)Be[Fe|De<<Oe]=Oe&7|Pe<<3}var Ze=[];for(fe=1;Ze.length<q+z;)switch(Fe=Be[te(L,H)],H+=Fe&7,Fe>>>=3){case 16:for(Q=3+se(L,H),H+=2,Fe=Ze[Ze.length-1];Q-- >0;)Ze.push(Fe);break;case 17:for(Q=3+I(L,H),H+=3;Q-- >0;)Ze.push(0);break;case 18:for(Q=11+te(L,H),H+=7;Q-- >0;)Ze.push(0);break;default:Ze.push(Fe),fe<Fe&&(fe=Fe);break}var Xt=Ze.slice(0,q),Yt=Ze.slice(q);for(Pe=q;Pe<286;++Pe)Xt[Pe]=0;for(Pe=z;Pe<30;++Pe)Yt[Pe]=0;return Pt=ne(Xt,$e,286),or=ne(Yt,ot,30),H}function Ya(L,H){if(L[0]==3&&!(L[1]&3))return[_i(H),2];for(var q=0,z=0,Y=x_(H||1<<18),Q=0,me=Y.length>>>0,Ne=0,fe=0;!(z&1);){if(z=I(L,q),q+=3,z>>>1)z>>1==1?(Ne=9,fe=5):(q=nt(L,q),Ne=Pt,fe=or);else{q&7&&(q+=8-(q&7));var he=L[q>>>3]|L[(q>>>3)+1]<<8;if(q+=32,he>0)for(!H&&me<Q+he&&(Y=Le(Y,Q+he),me=Y.length);he-- >0;)Y[Q++]=L[q>>>3],q+=8;continue}for(;;){!H&&me<Q+32767&&(Y=Le(Y,Q+32767),me=Y.length);var ge=Ue(L,q,Ne),Ce=z>>>1==1?je[ge]:$e[ge];if(q+=Ce&15,Ce>>>=4,!(Ce>>>8&255))Y[Q++]=Ce;else{if(Ce==256)break;Ce-=257;var Pe=Ce<8?0:Ce-4>>2;Pe>5&&(Pe=0);var Fe=Q+Z[Ce];Pe>0&&(Fe+=Ue(L,q,Pe),q+=Pe),ge=Ue(L,q,fe),Ce=z>>>1==1?re[ge]:ot[ge],q+=Ce&15,Ce>>>=4;var Oe=Ce<4?0:Ce-2>>1,De=le[Ce];for(Oe>0&&(De+=Ue(L,q,Oe),q+=Oe),!H&&me<Fe&&(Y=Le(Y,Fe+100),me=Y.length);Q<Fe;)Y[Q]=Y[Q-De],++Q}}}return H?[Y,q+7>>>3]:[Y.slice(0,Q),q+7>>>3]}function tt(L,H){var q=L.slice(L.l||0),z=Ya(q,H);return L.l+=z[1],z[0]}function $r(L,H){if(L)typeof console<"u"&&console.error(H);else throw new Error(H)}function Sn(L,H){var q=L;Kr(q,0);var z=[],Y=[],Q={FileIndex:z,FullPaths:Y};j(Q,{root:H.root});for(var me=q.length-4;(q[me]!=80||q[me+1]!=75||q[me+2]!=5||q[me+3]!=6)&&me>=0;)--me;q.l=me+4,q.l+=4;var Ne=q.read_shift(2);q.l+=6;var fe=q.read_shift(4);for(q.l=fe,me=0;me<Ne;++me){q.l+=20;var he=q.read_shift(4),ge=q.read_shift(4),Ce=q.read_shift(2),Pe=q.read_shift(2),Fe=q.read_shift(2);q.l+=8;var Oe=q.read_shift(4),De=o(q.slice(q.l+Ce,q.l+Ce+Pe));q.l+=Ce+Pe+Fe;var Ze=q.l;q.l=Oe+4,Gi(q,he,ge,Q,De),q.l=Ze}return Q}function Gi(L,H,q,z,Y){L.l+=2;var Q=L.read_shift(2),me=L.read_shift(2),Ne=l(L);if(Q&8257)throw new Error("Unsupported ZIP encryption");for(var fe=L.read_shift(4),he=L.read_shift(4),ge=L.read_shift(4),Ce=L.read_shift(2),Pe=L.read_shift(2),Fe="",Oe=0;Oe<Ce;++Oe)Fe+=String.fromCharCode(L[L.l++]);if(Pe){var De=o(L.slice(L.l,L.l+Pe));(De[21589]||{}).mt&&(Ne=De[21589].mt),((Y||{})[21589]||{}).mt&&(Ne=Y[21589].mt)}L.l+=Pe;var Ze=L.slice(L.l,L.l+he);switch(me){case 8:Ze=V(L,ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+me)}var Xt=!1;Q&8&&(fe=L.read_shift(4),fe==134695760&&(fe=L.read_shift(4),Xt=!0),he=L.read_shift(4),ge=L.read_shift(4)),he!=H&&$r(Xt,"Bad compressed size: "+H+" != "+he),ge!=q&&$r(Xt,"Bad uncompressed size: "+q+" != "+ge),op(z,Fe,Ze,{unsafe:!0,mt:Ne})}function kn(L,H){var q=H||{},z=[],Y=[],Q=be(1),me=q.compression?8:0,Ne=0,fe=0,he=0,ge=0,Ce=0,Pe=L.FullPaths[0],Fe=Pe,Oe=L.FileIndex[0],De=[],Ze=0;for(fe=1;fe<L.FullPaths.length;++fe)if(Fe=L.FullPaths[fe].slice(Pe.length),Oe=L.FileIndex[fe],!(!Oe.size||!Oe.content||Fe=="Sh33tJ5")){var Xt=ge,Yt=be(Fe.length);for(he=0;he<Fe.length;++he)Yt.write_shift(1,Fe.charCodeAt(he)&127);Yt=Yt.slice(0,Yt.l),De[Ce]=Xce.buf(Oe.content,0);var Xr=Oe.content;me==8&&(Xr=X(Xr)),Q=be(30),Q.write_shift(4,67324752),Q.write_shift(2,20),Q.write_shift(2,Ne),Q.write_shift(2,me),Oe.mt?i(Q,Oe.mt):Q.write_shift(4,0),Q.write_shift(-4,De[Ce]),Q.write_shift(4,Xr.length),Q.write_shift(4,Oe.content.length),Q.write_shift(2,Yt.length),Q.write_shift(2,0),ge+=Q.length,z.push(Q),ge+=Yt.length,z.push(Yt),ge+=Xr.length,z.push(Xr),Q=be(46),Q.write_shift(4,33639248),Q.write_shift(2,0),Q.write_shift(2,20),Q.write_shift(2,Ne),Q.write_shift(2,me),Q.write_shift(4,0),Q.write_shift(-4,De[Ce]),Q.write_shift(4,Xr.length),Q.write_shift(4,Oe.content.length),Q.write_shift(2,Yt.length),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(4,0),Q.write_shift(4,Xt),Ze+=Q.l,Y.push(Q),Ze+=Yt.length,Y.push(Yt),++Ce}return Q=be(22),Q.write_shift(4,101010256),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,Ce),Q.write_shift(2,Ce),Q.write_shift(4,Ze),Q.write_shift(4,ge),Q.write_shift(2,0),Dr([Dr(z),Dr(Y),Q])}var dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function us(L,H){if(L.ctype)return L.ctype;var q=L.name||"",z=q.match(/\.([^\.]+)$/);return z&&dt[z[1]]||H&&(z=(q=H).match(/[\.\\]([^\.\\])+$/),z&&dt[z[1]])?dt[z[1]]:"application/octet-stream"}function ds(L){for(var H=Zd(L),q=[],z=0;z<H.length;z+=76)q.push(H.slice(z,z+76));return q.join(`\r
`)+`\r
`}function Gs(L){var H=L.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(he){var ge=he.charCodeAt(0).toString(16).toUpperCase();return"="+(ge.length==1?"0"+ge:ge)});H=H.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),H.charAt(0)==`
`&&(H="=0D"+H.slice(1)),H=H.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var q=[],z=H.split(`\r
`),Y=0;Y<z.length;++Y){var Q=z[Y];if(Q.length==0){q.push("");continue}for(var me=0;me<Q.length;){var Ne=76,fe=Q.slice(me,me+Ne);fe.charAt(Ne-1)=="="?Ne--:fe.charAt(Ne-2)=="="?Ne-=2:fe.charAt(Ne-3)=="="&&(Ne-=3),fe=Q.slice(me,me+Ne),me+=Ne,me<Q.length&&(fe+="="),q.push(fe)}}return q.join(`\r
`)}function Uf(L){for(var H=[],q=0;q<L.length;++q){for(var z=L[q];q<=L.length&&z.charAt(z.length-1)=="=";)z=z.slice(0,z.length-1)+L[++q];H.push(z)}for(var Y=0;Y<H.length;++Y)H[Y]=H[Y].replace(/[=][0-9A-Fa-f]{2}/g,function(Q){return String.fromCharCode(parseInt(Q.slice(1),16))});return La(H.join(`\r
`))}function Wf(L,H,q){for(var z="",Y="",Q="",me,Ne=0;Ne<10;++Ne){var fe=H[Ne];if(!fe||fe.match(/^\s*$/))break;var he=fe.match(/^(.*?):\s*([^\s].*)$/);if(he)switch(he[1].toLowerCase()){case"content-location":z=he[2].trim();break;case"content-type":Q=he[2].trim();break;case"content-transfer-encoding":Y=he[2].trim();break}}switch(++Ne,Y.toLowerCase()){case"base64":me=La(Va(H.slice(Ne).join("")));break;case"quoted-printable":me=Uf(H.slice(Ne));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Y)}var ge=op(L,z.slice(q.length),me,{unsafe:!0});Q&&(ge.ctype=Q)}function nI(L,H){if(B(L.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var q=H&&H.root||"",z=(it&&Buffer.isBuffer(L)?L.toString("binary"):B(L)).split(`\r
`),Y=0,Q="";for(Y=0;Y<z.length;++Y)if(Q=z[Y],!!/^Content-Location:/i.test(Q)&&(Q=Q.slice(Q.indexOf("file")),q||(q=Q.slice(0,Q.lastIndexOf("/")+1)),Q.slice(0,q.length)!=q))for(;q.length>0&&(q=q.slice(0,q.length-1),q=q.slice(0,q.lastIndexOf("/")+1),Q.slice(0,q.length)!=q););var me=(z[1]||"").match(/boundary="(.*?)"/);if(!me)throw new Error("MAD cannot find boundary");var Ne="--"+(me[1]||""),fe=[],he=[],ge={FileIndex:fe,FullPaths:he};j(ge);var Ce,Pe=0;for(Y=0;Y<z.length;++Y){var Fe=z[Y];Fe!==Ne&&Fe!==Ne+"--"||(Pe++&&Wf(ge,z.slice(Ce,Y),q),Ce=Y)}return ge}function sI(L,H){var q=H||{},z=q.boundary||"SheetJS";z="------="+z;for(var Y=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+z.slice(2)+'"',"","",""],Q=L.FullPaths[0],me=Q,Ne=L.FileIndex[0],fe=1;fe<L.FullPaths.length;++fe)if(me=L.FullPaths[fe].slice(Q.length),Ne=L.FileIndex[fe],!(!Ne.size||!Ne.content||me=="Sh33tJ5")){me=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ze){return"_x"+Ze.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ze){return"_u"+Ze.charCodeAt(0).toString(16)+"_"});for(var he=Ne.content,ge=it&&Buffer.isBuffer(he)?he.toString("binary"):B(he),Ce=0,Pe=Math.min(1024,ge.length),Fe=0,Oe=0;Oe<=Pe;++Oe)(Fe=ge.charCodeAt(Oe))>=32&&Fe<128&&++Ce;var De=Ce>=Pe*4/5;Y.push(z),Y.push("Content-Location: "+(q.root||"file:///C:/SheetJS/")+me),Y.push("Content-Transfer-Encoding: "+(De?"quoted-printable":"base64")),Y.push("Content-Type: "+us(Ne,me)),Y.push(""),Y.push(De?Gs(ge):ds(ge))}return Y.push(z+`--\r
`),Y.join(`\r
`)}function iI(L){var H={};return j(H,L),H}function op(L,H,q,z){var Y=z&&z.unsafe;Y||j(L);var Q=!Y&&We.find(L,H);if(!Q){var me=L.FullPaths[0];H.slice(0,me.length)==me?me=H:(me.slice(-1)!="/"&&(me+="/"),me=(me+H).replace("//","/")),Q={name:s(H),type:2},L.FileIndex.push(Q),L.FullPaths.push(me),Y||We.utils.cfb_gc(L)}return Q.content=q,Q.size=q?q.length:0,z&&(z.CLSID&&(Q.clsid=z.CLSID),z.mt&&(Q.mt=z.mt),z.ct&&(Q.ct=z.ct)),Q}function lI(L,H){j(L);var q=We.find(L,H);if(q){for(var z=0;z<L.FileIndex.length;++z)if(L.FileIndex[z]==q)return L.FileIndex.splice(z,1),L.FullPaths.splice(z,1),!0}return!1}function oI(L,H,q){j(L);var z=We.find(L,H);if(z){for(var Y=0;Y<L.FileIndex.length;++Y)if(L.FileIndex[Y]==z)return L.FileIndex[Y].name=s(q),L.FullPaths[Y]=q,!0}return!1}function cI(L){_(L,!0)}return t.find=E,t.read=N,t.parse=d,t.write=ee,t.writeFile=K,t.utils={cfb_new:iI,cfb_add:op,cfb_del:lI,cfb_mov:oI,cfb_gc:cI,ReadShift:Bu,CheckField:b6,prep_blob:Kr,bconcat:Dr,use_zlib:R,_deflateRaw:ye,_inflateRaw:tt,consts:W},t}();let fi;function Yce(e){fi=e}function Qce(e){return typeof e=="string"?Pf(e):Array.isArray(e)?Nce(e):e}function If(e,t,r){if(typeof fi<"u"&&fi.writeFileSync)return r?fi.writeFileSync(e,t,r):fi.writeFileSync(e,t);if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Pf(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Jn(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([Qce(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=zi(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Jce(e){if(typeof fi<"u")return fi.readFileSync(e);if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function lr(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function j_(e,t){for(var r=[],a=lr(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function Jx(e){for(var t=[],r=lr(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function Zx(e){for(var t=[],r=lr(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function Zce(e){for(var t=[],r=lr(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var Ph=new Date(1899,11,30,0,0,0);function _r(e,t){var r=e.getTime();t&&(r-=1462*24*60*60*1e3);var a=Ph.getTime()+(e.getTimezoneOffset()-Ph.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var r6=new Date,eue=Ph.getTime()+(r6.getTimezoneOffset()-Ph.getTimezoneOffset())*6e4,S_=r6.getTimezoneOffset();function ep(e){var t=new Date;return t.setTime(e*24*60*60*1e3+eue),t.getTimezoneOffset()!==S_&&t.setTime(t.getTime()+(t.getTimezoneOffset()-S_)*6e4),t}function tue(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var k_=new Date("2017-02-19T19:06:09.000Z"),a6=isNaN(k_.getFullYear())?new Date("2/19/17"):k_,rue=a6.getFullYear()==2017;function zt(e,t){var r=new Date(e);if(rue)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(a6.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Rl(e,t){if(it&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Jn(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Jn(qP(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Jn(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Jn(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function It(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=It(e[r]));return t}function ar(e,t){for(var r="";r.length<t;)r+=e;return r}function Un(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var aue=["january","february","march","april","may","june","july","august","september","october","november","december"];function kc(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&aue.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var nue=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),l=[i[0]],o=1;o<i.length;++o)l.push(s),l.push(i[o]);return l}}();function n6(e){return e?e.content&&e.type?Rl(e.content,!0):e.data?To(e.data):e.asNodeBuffer&&it?To(e.asNodeBuffer().toString("binary")):e.asBinary?To(e.asBinary()):e._data&&e._data.getContent?To(Rl(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function s6(e){if(!e)return null;if(e.data)return Oh(e.data);if(e.asNodeBuffer&&it)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?Oh(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function sue(e){return e&&e.name.slice(-4)===".bin"?s6(e):n6(e)}function nn(e,t){for(var r=e.FullPaths||lr(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==l||s==l)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function Kw(e,t){var r=nn(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function pr(e,t,r){if(!r)return sue(Kw(e,t));if(!t)return null;try{return pr(e,t)}catch{return null}}function $a(e,t,r){if(!r)return n6(Kw(e,t));if(!t)return null;try{return $a(e,t)}catch{return null}}function i6(e,t,r){if(!r)return s6(Kw(e,t));if(!t)return null;try{return i6(e,t)}catch{return null}}function C_(e){for(var t=e.FullPaths||lr(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function at(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return it?a=zs(r):a=jce(r),We.utils.cfb_add(e,t,a)}We.utils.cfb_add(e,t,r)}else e.file(t,r)}function zw(){return We.utils.cfb_new()}function l6(e,t){switch(t.type){case"base64":return We.read(e,{type:"base64"});case"binary":return We.read(e,{type:"binary"});case"buffer":case"array":return We.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function ku(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var mr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,iue=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,__=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,lue=/<[^>]*>/g,fa=mr.match(__)?__:lue,oue=/<\w*:/,cue=/<(\/?)\w+:/;function Ye(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var l=e.match(iue),o=0,c="",u=0,d="",f="",m=1;if(l)for(u=0;u!=l.length;++u){for(f=l[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(d=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(m=(s=f.charCodeAt(i+1))==34||s==39?1:0,c=f.slice(i+1+m,f.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,r||(a[d.toLowerCase()]=c);else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(a[p]&&d.slice(o-3,o)=="ext")continue;a[p]=c,r||(a[p.toLowerCase()]=c)}}return a}function os(e){return e.replace(cue,"<$1")}var o6={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Vw=Jx(o6),yt=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(o,c){return o6[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,l)+r(s.slice(l+3))}}(),Hw=/[&<>'"]/g,uue=/[\u0000-\u0008\u000b-\u001f]/g;function _t(e){var t=e+"";return t.replace(Hw,function(r){return Vw[r]}).replace(uue,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function O_(e){return _t(e).replace(/ /g,"_x0020_")}var c6=/[\u0000-\u001f]/g;function Gw(e){var t=e+"";return t.replace(Hw,function(r){return Vw[r]}).replace(/\n/g,"<br/>").replace(c6,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function due(e){var t=e+"";return t.replace(Hw,function(r){return Vw[r]}).replace(c6,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var E_=function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}}();function fue(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Wt(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ng(e){for(var t="",r=0,a=0,s=0,i=0,l=0,o=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){l=(a&31)<<6,l|=s&63,t+=String.fromCharCode(l);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}l=e.charCodeAt(r++),o=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function T_(e){var t=_i(2*e.length),r,a,s=1,i=0,l=0,o;for(a=0;a<e.length;a+=s)s=1,(o=e.charCodeAt(a))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(a+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[i++]=l&255,t[i++]=l>>>8,l=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function A_(e){return zs(e,"binary").toString("utf8")}var C0="foo bar baz",At=it&&(A_(C0)==Ng(C0)&&A_||T_(C0)==Ng(C0)&&T_)||Ng,Jn=it?function(e){return zs(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},tf=function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}}(),u6=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}}(),mue=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),hue=/<\/?(?:vt:)?variant>/g,xue=/<(?:vt:)([^>]*)>([\s\S]*)</;function P_(e,t){var r=Ye(e),a=e.match(mue(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var l=i.replace(hue,"").match(xue);l&&s.push({v:At(l[2]),t:l[1]})}),s}var d6=/(^\s|\s$|\n)/;function zr(e,t){return"<"+e+(t.match(d6)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function rf(e){return lr(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ee(e,t,r){return"<"+e+(r!=null?rf(r):"")+(t!=null?(t.match(d6)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function m1(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function pue(e,t){switch(typeof e){case"string":var r=Ee("vt:lpwstr",_t(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return Ee((e|0)==e?"vt:i4":"vt:r8",_t(String(e)));case"boolean":return Ee("vt:bool",e?"true":"false")}if(e instanceof Date)return Ee("vt:filetime",m1(e));throw new Error("Unable to serialize "+e)}function Xw(e){if(it&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return At(zi(Uw(e)));throw new Error("Bad input format: expected Buffer or string")}var af=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Sr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Yl=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ma={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function gue(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function yue(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,l=a?-t:t;isFinite(l)?l==0?s=i=0:(s=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var D_=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},I_=it?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:zs(t)})):D_(e)}:D_,F_=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(js(e,s)));return a.join("").replace(oa,"")},tp=it?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(oa,""):F_(e,t,r)}:F_,M_=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},f6=it?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):M_(e,t,r)}:M_,R_=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(ho(e,s)));return a.join("")},zc=it?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):R_(t,r,a)}:R_,m6=function(e,t){var r=Pr(e,t);return r>0?zc(e,t+4,t+4+r-1):""},Yw=m6,h6=function(e,t){var r=Pr(e,t);return r>0?zc(e,t+4,t+4+r-1):""},Qw=h6,x6=function(e,t){var r=2*Pr(e,t);return r>0?zc(e,t+4,t+4+r-1):""},Jw=x6,p6=function(t,r){var a=Pr(t,r);return a>0?tp(t,r+4,r+4+a):""},Zw=p6,g6=function(e,t){var r=Pr(e,t);return r>0?zc(e,t+4,t+4+r):""},eN=g6,y6=function(e,t){return gue(e,t)},Dh=y6,tN=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};it&&(Yw=function(t,r){if(!Buffer.isBuffer(t))return m6(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Qw=function(t,r){if(!Buffer.isBuffer(t))return h6(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Jw=function(t,r){if(!Buffer.isBuffer(t))return x6(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},Zw=function(t,r){if(!Buffer.isBuffer(t))return p6(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},eN=function(t,r){if(!Buffer.isBuffer(t))return g6(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},Dh=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):y6(t,r)},tN=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});function v6(){tp=function(e,t,r){return xt.utils.decode(1200,e.slice(t,r)).replace(oa,"")},zc=function(e,t,r){return xt.utils.decode(65001,e.slice(t,r))},Yw=function(e,t){var r=Pr(e,t);return r>0?xt.utils.decode(Fl,e.slice(t+4,t+4+r-1)):""},Qw=function(e,t){var r=Pr(e,t);return r>0?xt.utils.decode(Wa,e.slice(t+4,t+4+r-1)):""},Jw=function(e,t){var r=2*Pr(e,t);return r>0?xt.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},Zw=function(e,t){var r=Pr(e,t);return r>0?xt.utils.decode(1200,e.slice(t+4,t+4+r)):""},eN=function(e,t){var r=Pr(e,t);return r>0?xt.utils.decode(65001,e.slice(t+4,t+4+r)):""}}typeof xt<"u"&&v6();var ho=function(e,t){return e[t]},js=function(e,t){return e[t+1]*256+e[t]},vue=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Pr=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},sl=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},bue=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Bu(e,t){var r="",a,s,i=[],l,o,c,u;switch(t){case"dbcs":if(u=this.l,it&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(js(this,u)),u+=2;e*=2;break;case"utf8":r=zc(this,this.l,this.l+e);break;case"utf16le":e*=2,r=tp(this,this.l,this.l+e);break;case"wstr":if(typeof xt<"u")r=xt.utils.decode(Wa,this.slice(this.l,this.l+2*e));else return Bu.call(this,e,"dbcs");e=2*e;break;case"lpstr-ansi":r=Yw(this,this.l),e=4+Pr(this,this.l);break;case"lpstr-cp":r=Qw(this,this.l),e=4+Pr(this,this.l);break;case"lpwstr":r=Jw(this,this.l),e=4+2*Pr(this,this.l);break;case"lpp4":e=4+Pr(this,this.l),r=Zw(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Pr(this,this.l),r=eN(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=ho(this,this.l+e++))!==0;)i.push(ju(l));r=i.join("");break;case"_wstr":for(e=0,r="";(l=js(this,this.l+e))!==0;)i.push(ju(l)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return l=ho(this,u),this.l=u+1,o=Bu.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(ju(js(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":if(typeof xt<"u"){r=xt.utils.decode(Wa,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return l=ho(this,u),this.l=u+1,o=Bu.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(ju(ho(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return a=ho(this,this.l),this.l++,a;case 2:return a=(t==="i"?vue:js)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(a=(e>0?sl:bue)(this,this.l),this.l+=4,a):(s=Pr(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Dh(this,this.l):s=Dh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=f6(this,this.l,e);break}}return this.l+=e,r}var wue=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Nue=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},jue=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Sue(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)jue(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){if(typeof xt<"u"&&Fl==874)for(s=0;s!=t.length;++s){var i=xt.utils.encode(Fl,t.charAt(s));this[this.l+s]=i[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var l=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,wue(this,t,this.l);break;case 8:if(a=8,r==="f"){yue(this,t,this.l);break}case 16:break;case-4:a=4,Nue(this,t,this.l);break}return this.l+=a,this}function b6(e,t){var r=f6(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Kr(e,t){e.l=t,e.read_shift=Bu,e.chk=b6,e.write_shift=Sue}function da(e,t){e.l+=t}function be(e){var t=_i(e);return Kr(t,0),t}function Vs(e,t,r){if(e){var a,s,i;Kr(e,e.l||0);for(var l=e.length,o=0,c=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=uf[o]||uf[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var d=u.f&&u.f(e,i,r);if(e.l=c,t(d,u,o))return}}}function Ea(){var e=[],t=it?256:2048,r=function(u){var d=be(u);return Kr(d,0),d},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(s(),a=r(Math.max(u+1,t)))},l=function(){return s(),Dr(e)},o=function(u){s(),a=u,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:o,end:l,_bufs:e}}function Se(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=uf[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var l=e.next(i);s<=127?l.write_shift(1,s):(l.write_shift(1,(s&127)+128),l.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(a>=128)l.write_shift(1,(a&127)+128),a>>=7;else{l.write_shift(1,a);break}a>0&&tN(r)&&e.push(r)}}function Uu(e,t,r){var a=It(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function L_(e,t,r){var a=It(e);return a.s=Uu(a.s,t.s,r),a.e=Uu(a.e,t.s,r),a}function Wu(e,t){if(e.cRel&&e.c<0)for(e=It(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=It(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Xe(e);return!e.cRel&&e.cRel!=null&&(r=_ue(r)),!e.rRel&&e.rRel!=null&&(r=kue(r)),r}function jg(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Kt(e.s.c)+":"+(e.e.cRel?"":"$")+Kt(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+nr(e.s.r)+":"+(e.e.rRel?"":"$")+nr(e.e.r):Wu(e.s,t.biff)+":"+Wu(e.e,t.biff)}function rN(e){return parseInt(Cue(e),10)-1}function nr(e){return""+(e+1)}function kue(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Cue(e){return e.replace(/\$(\d+)$/,"$1")}function aN(e){for(var t=Oue(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function Kt(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function _ue(e){return e.replace(/^([A-Z])/,"$$$1")}function Oue(e){return e.replace(/^\$([A-Z])/,"$1")}function Eue(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Jt(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Xe(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ya(e){var t=e.indexOf(":");return t==-1?{s:Jt(e),e:Jt(e)}:{s:Jt(e.slice(0,t)),e:Jt(e.slice(t+1))}}function rt(e,t){return typeof t>"u"||typeof t=="number"?rt(e.s,e.e):(typeof e!="string"&&(e=Xe(e)),typeof t!="string"&&(t=Xe(t)),e==t?e:e+":"+t)}function mt(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function $_(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ha(e.z,r?_r(t):t)}catch{}try{return e.w=Ha((e.XF||{}).numFmtId||(r?14:0),r?_r(t):t)}catch{return""+t}}function is(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Hs[e.v]||e.v:t==null?$_(e,e.v):$_(e,t))}function Vi(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function w6(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),l=0,o=0;if(i&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Jt(a.origin):a.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=mt(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),l==-1&&(u.e.r=l=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var p={v:t[f][m]},y=l+f,h=o+m;if(u.s.r>y&&(u.s.r=y),u.s.c>h&&(u.s.c=h),u.e.r<y&&(u.e.r=y),u.e.c<h&&(u.e.c=h),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))p=t[f][m];else if(Array.isArray(p.v)&&(p.f=t[f][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(a.nullError)p.t="e",p.v=0;else if(a.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=a.dateNF||ze[14],a.cellDates?(p.t="d",p.w=Ha(p.z,_r(p.v))):(p.t="n",p.v=_r(p.v),p.w=Ha(p.z,p.v))):p.t="s";if(s)i[y]||(i[y]=[]),i[y][h]&&i[y][h].z&&(p.z=i[y][h].z),i[y][h]=p;else{var v=Xe({c:h,r:y});i[v]&&i[v].z&&(p.z=i[v].z),i[v]=p}}}return u.s.c<1e7&&(i["!ref"]=rt(u)),i}function Vc(e,t){return w6(null,e,t)}function Tue(e){return e.read_shift(4,"i")}function Wn(e,t){return t||(t=be(4)),t.write_shift(4,e),t}function ca(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ir(e,t){var r=!1;return t==null&&(r=!0,t=be(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Aue(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Pue(e,t){return t||(t=be(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0),t}function nN(e,t){var r=e.l,a=e.read_shift(1),s=ca(e),i=[],l={t:s,h:s};if(a&1){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(Aue(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}function Due(e,t){var r=!1;return t==null&&(r=!0,t=be(15+4*e.t.length)),t.write_shift(1,0),Ir(e.t,t),r?t.slice(0,t.l):t}var Iue=nN;function Fue(e,t){var r=!1;return t==null&&(r=!0,t=be(23+4*e.t.length)),t.write_shift(1,1),Ir(e.t,t),t.write_shift(4,1),Pue({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function jn(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Ql(e,t){return t==null&&(t=be(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Jl(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Zl(e,t){return t==null&&(t=be(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Mue=ca,N6=Ir;function sN(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Ih(e,t){var r=!1;return t==null&&(r=!0,t=be(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Rue=ca,h1=sN,iN=Ih;function lN(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?Dh([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):sl(t,0)>>2;return r?s/100:s}function j6(e,t){t==null&&(t=be(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-(1<<29)&&e<1<<29?a=1:s==(s|0)&&s>=-(1<<29)&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function S6(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Lue(e,t){return t||(t=be(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var eo=S6,Hc=Lue;function ia(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Ll(e,t){return(t||be(8)).write_shift(8,e,"f")}function $ue(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var u=yl[s];u&&(t.rgb=sf(u));break;case 2:t.rgb=sf([l,o,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Fh(e,t){if(t||(t=be(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Bue(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Uue(e,t){t||(t=be(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function k6(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Wue(e){return k6(e,1)}function que(e){return k6(e,2)}var oN=2,Na=3,_0=11,B_=12,Mh=19,O0=64,Kue=65,zue=71,Vue=4108,Hue=4126,Tr=80,C6=81,Gue=[Tr,C6],x1={1:{n:"CodePage",t:oN},2:{n:"Category",t:Tr},3:{n:"PresentationFormat",t:Tr},4:{n:"ByteCount",t:Na},5:{n:"LineCount",t:Na},6:{n:"ParagraphCount",t:Na},7:{n:"SlideCount",t:Na},8:{n:"NoteCount",t:Na},9:{n:"HiddenCount",t:Na},10:{n:"MultimediaClipCount",t:Na},11:{n:"ScaleCrop",t:_0},12:{n:"HeadingPairs",t:Vue},13:{n:"TitlesOfParts",t:Hue},14:{n:"Manager",t:Tr},15:{n:"Company",t:Tr},16:{n:"LinksUpToDate",t:_0},17:{n:"CharacterCount",t:Na},19:{n:"SharedDoc",t:_0},22:{n:"HyperlinksChanged",t:_0},23:{n:"AppVersion",t:Na,p:"version"},24:{n:"DigSig",t:Kue},26:{n:"ContentType",t:Tr},27:{n:"ContentStatus",t:Tr},28:{n:"Language",t:Tr},29:{n:"Version",t:Tr},255:{},2147483648:{n:"Locale",t:Mh},2147483651:{n:"Behavior",t:Mh},1919054434:{}},p1={1:{n:"CodePage",t:oN},2:{n:"Title",t:Tr},3:{n:"Subject",t:Tr},4:{n:"Author",t:Tr},5:{n:"Keywords",t:Tr},6:{n:"Comments",t:Tr},7:{n:"Template",t:Tr},8:{n:"LastAuthor",t:Tr},9:{n:"RevNumber",t:Tr},10:{n:"EditTime",t:O0},11:{n:"LastPrinted",t:O0},12:{n:"CreatedDate",t:O0},13:{n:"ModifiedDate",t:O0},14:{n:"PageCount",t:Na},15:{n:"WordCount",t:Na},16:{n:"CharCount",t:Na},17:{n:"Thumbnail",t:zue},18:{n:"Application",t:Tr},19:{n:"DocSecurity",t:Na},255:{},2147483648:{n:"Locale",t:Mh},2147483651:{n:"Behavior",t:Mh},1919054434:{}},U_={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Xue=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Yue(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Que=Yue([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),yl=It(Que),Hs={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},_6={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},g1={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},E0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function cN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Jue(e){var t=cN();if(!e||!e.match)return t;var r={};if((e.match(fa)||[]).forEach(function(a){var s=Ye(a);switch(s[0].replace(oue,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[g1[s.ContentType]]!==void 0&&t[g1[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Sr.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function O6(e,t){var r=Zce(g1),a=[],s;a[a.length]=mr,a[a.length]=Ee("Types",null,{xmlns:Sr.CT,"xmlns:xsd":Sr.xsd,"xmlns:xsi":Sr.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Ee("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=Ee("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:E0[c][t.bookType]||E0[c].xlsx}))},l=function(c){(e[c]||[]).forEach(function(u){a[a.length]=Ee("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:E0[c][t.bookType]||E0[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){a[a.length]=Ee("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var lt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function nf(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function qu(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(fa)||[]).forEach(function(s){var i=Ye(s);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:ku(i.Target,t);r[o]=l,a[i.Id]=l}}),r["!id"]=a,r}function zo(e){var t=[mr,Ee("Relationships",null,{xmlns:Sr.RELS})];return lr(e["!id"]).forEach(function(r){t[t.length]=Ee("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ct(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,i?s.TargetMode=i:[lt.HLINK,lt.XPATH,lt.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Zue="application/vnd.oasis.opendocument.spreadsheet";function ede(e,t){for(var r=Xw(e),a,s;a=af.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=Ye(a[0],!1),s.path=="/"&&s.type!==Zue)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function tde(e){var t=[mr];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function W_(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function rde(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function ade(e){var t=[mr];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(W_(e[r][0],e[r][1])),t.push(rde("",e[r][0]));return t.push(W_("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function E6(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Jd.version+"</meta:generator></office:meta></office:document-meta>"}var gn=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],nde=function(){for(var e=new Array(gn.length),t=0;t<gn.length;++t){var r=gn[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e}();function T6(e){var t={};e=At(e);for(var r=0;r<gn.length;++r){var a=gn[r],s=e.match(nde[r]);s!=null&&s.length>0&&(t[a[1]]=yt(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=zt(t[a[1]]))}return t}function Sg(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=_t(t),a[a.length]=r?Ee(e,t,r):zr(e,t))}function A6(e,t){var r=t||{},a=[mr,Ee("cp:coreProperties",null,{"xmlns:cp":Sr.CORE_PROPS,"xmlns:dc":Sr.dc,"xmlns:dcterms":Sr.dcterms,"xmlns:dcmitype":Sr.dcmitype,"xmlns:xsi":Sr.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Sg("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:m1(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&Sg("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:m1(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=gn.length;++i){var l=gn[i],o=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Sg(l[0],o,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var vl=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],P6=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function D6(e,t,r,a){var s=[];if(typeof e=="string")s=P_(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(d){return{v:d}}));var l=typeof t=="string"?P_(t,a).map(function(d){return d.v}):t,o=0,c=0;if(l.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function sde(e,t,r){var a={};return t||(t={}),e=At(e),vl.forEach(function(s){var i=(e.match(tf(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=yt(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));l&&l.length>0&&(a[s[1]]=l[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&D6(a.HeadingPairs,a.TitlesOfParts,t,r),t}function I6(e){var t=[],r=Ee;return e||(e={}),e.Application="SheetJS",t[t.length]=mr,t[t.length]=Ee("Properties",null,{xmlns:Sr.EXT_PROPS,"xmlns:vt":Sr.vt}),vl.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=_t(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+_t(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ide=/<[^>]+>[^<]*/g;function lde(e,t){var r={},a="",s=e.match(ide);if(s)for(var i=0;i!=s.length;++i){var l=s[i],o=Ye(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":a=yt(o.name);break;case"</property>":a=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=yt(d);break;case"bool":r[a]=Wt(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(d);break;case"filetime":case"date":r[a]=zt(d);break;case"cy":case"error":r[a]=yt(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",l,u,c)}}else if(l.slice(0,2)!=="</"){if(t.WTF)throw new Error(l)}}}return r}function F6(e){var t=[mr,Ee("Properties",null,{xmlns:Sr.CUST_PROPS,"xmlns:vt":Sr.vt})];if(!e)return t.join("");var r=1;return lr(e).forEach(function(s){++r,t[t.length]=Ee("property",pue(e[s],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:_t(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var y1={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},kg;function ode(e,t,r){kg||(kg=Jx(y1)),t=kg[t]||t,e[t]=r}function cde(e,t){var r=[];return lr(y1).map(function(a){for(var s=0;s<gn.length;++s)if(gn[s][1]==a)return gn[s];for(s=0;s<vl.length;++s)if(vl[s][1]==a)return vl[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(zr(y1[a[1]]||a[1],s))}}),Ee("DocumentProperties",r.join(""),{xmlns:Ma.o})}function ude(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&lr(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<gn.length;++l)if(i==gn[l][1])return;for(l=0;l<vl.length;++l)if(i==vl[l][1])return;for(l=0;l<r.length;++l)if(i==r[l])return;var o=e[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),s.push(Ee(O_(i),o,{"dt:dt":c}))}}),t&&lr(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=t[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),s.push(Ee(O_(i),l,{"dt:dt":o}))}}),"<"+a+' xmlns="'+Ma.o+'">'+s.join("")+"</"+a+">"}function uN(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function dde(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var l=be(8);return l.write_shift(4,a),l.write_shift(4,s),l}function M6(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function R6(e,t,r){var a=e.read_shift(0,"lpwstr");return r&&(e.l+=4-(a.length+1&3)&3),a}function L6(e,t,r){return t===31?R6(e):M6(e,t,r)}function v1(e,t,r){return L6(e,t,r===!1?0:4)}function fde(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return L6(e,t,0)}function mde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(oa,""),e.l-s&2&&(e.l+=2)}return r}function hde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(oa,"");return r}function xde(e){var t=e.l,r=Rh(e,C6);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=Rh(e,Na);return[r,a]}function pde(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(xde(e));return r}function q_(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),l=e.read_shift(4);a[i]=e.read_shift(l,t===1200?"utf16le":"utf8").replace(oa,"").replace(Su,"!"),t===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>2+1<<2),a}function $6(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function gde(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Rh(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==B_&&a!==t&&Gue.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===B_?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return M6(e,a,4).replace(oa,"");case 31:return R6(e);case 64:return uN(e);case 65:return $6(e);case 71:return gde(e);case 80:return v1(e,a,!i.raw).replace(oa,"");case 81:return fde(e,a).replace(oa,"");case 4108:return pde(e);case 4126:case 4127:return a==4127?mde(e):hde(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function K_(e,t){var r=be(4),a=be(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=be(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=dde(t);break;case 31:case 80:for(a=be(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Dr([r,a])}function z_(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],l=0,o=0,c=-1,u={};for(l=0;l!=s;++l){var d=e.read_shift(4),f=e.read_shift(4);i[l]=[d,f+r]}i.sort(function(S,b){return S[1]-b[1]});var m={};for(l=0;l!=s;++l){if(e.l!==i[l][1]){var p=!0;if(l>0&&t)switch(t[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],p=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],p=!1);break}if((!t||l==0)&&e.l<=i[l][1]&&(p=!1,e.l=i[l][1]),p)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(t){var y=t[i[l][0]];if(m[y.n]=Rh(e,y.t,{raw:!0}),y.p==="version"&&(m[y.n]=String(m[y.n]>>16)+"."+("0000"+String(m[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(m[y.n]){case 0:m[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:fn(o=m[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[y.n])}}else if(i[l][0]===1){if(o=m.CodePage=Rh(e,oN),fn(o),c!==-1){var h=e.l;e.l=i[c][1],u=q_(e,o),e.l=h}}else if(i[l][0]===0){if(o===0){c=l,e.l=i[l+1][1];continue}u=q_(e,o)}else{var v=u[i[l][0]],w;switch(e[e.l]){case 65:e.l+=4,w=$6(e);break;case 30:e.l+=4,w=v1(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=v1(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=cr(e,4);break;case 64:e.l+=4,w=zt(uN(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[v]=w}}return e.l=r+a,m}var B6=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function yde(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function V_(e,t,r){var a=be(8),s=[],i=[],l=8,o=0,c=be(8),u=be(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),s.push(u),l+=8+c.length,!t){u=be(8),u.write_shift(4,0),s.unshift(u);var d=[be(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=be(4+4+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Dr(d),i.unshift(c),l+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(B6.indexOf(e[o][0])>-1||P6.indexOf(e[o][0])>-1)&&e[o][1]!=null){var m=e[o][1],p=0;if(t){p=+t[e[o][0]];var y=r[p];if(y.p=="version"&&typeof m=="string"){var h=m.split(".");m=(+h[0]<<16)+(+h[1]||0)}c=K_(y.t,m)}else{var v=yde(m);v==-1&&(v=31,m=String(m)),c=K_(v,m)}i.push(c),u=be(8),u.write_shift(4,t?p:2+o),s.push(u),l+=8+c.length}var w=8*(i.length+1);for(o=0;o<i.length;++o)s[o].write_shift(4,w),w+=i[o].length;return a.write_shift(4,l),a.write_shift(4,i.length),Dr([a].concat(s).concat(i))}function H_(e,t,r){var a=e.content;if(!a)return{};Kr(a,0);var s,i,l,o,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),d=a.read_shift(16);if(d!==We.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),o=a.read_shift(4),s===1&&o!==a.l)throw new Error("Length mismatch: "+o+" !== "+a.l);s===2&&(l=a.read_shift(16),c=a.read_shift(4));var f=z_(a,t),m={SystemIdentifier:u};for(var p in f)m[p]=f[p];if(m.FMTID=i,s===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var y;try{y=z_(a,null)}catch{}for(p in y)m[p]=y[p];return m.FMTID=[i,l],m}function G_(e,t,r,a,s,i){var l=be(s?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,We.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,s?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,s?68:48);var c=V_(e,r,a);if(o.push(c),s){var u=V_(s,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+c.length),o.push(u)}return Dr(o)}function Ys(e,t){return e.read_shift(t),null}function vde(e,t){t||(t=be(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function bde(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function cr(e,t){return e.read_shift(t)===1}function xa(e,t){return t||(t=be(2)),t.write_shift(2,+!!e),t}function gr(e){return e.read_shift(2,"u")}function sn(e,t){return t||(t=be(2)),t.write_shift(2,e),t}function U6(e,t){return bde(e,t,gr)}function wde(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function W6(e,t,r){return r||(r=be(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Ff(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont",i=Wa;if(r&&r.biff>=8&&(Wa=1200),!r||r.biff==8){var l=e.read_shift(1);l&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return Wa=i,o}function Nde(e){var t=Wa;Wa=1200;var r=e.read_shift(2),a=e.read_shift(1),s=a&4,i=a&8,l=1+(a&1),o=0,c,u={};i&&(o=e.read_shift(2)),s&&(c=e.read_shift(4));var d=l==2?"dbcs-cont":"sbcs-cont",f=r===0?"":e.read_shift(r,d);return i&&(e.l+=4*o),s&&(e.l+=c),u.t=f,i||(u.raw="<t>"+u.t+"</t>",u.r=u.t),Wa=t,u}function jde(e){var t=e.t||"",r=be(3+0);r.write_shift(2,t.length),r.write_shift(1,1);var a=be(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return Dr(s)}function $l(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Mf(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):$l(e,a,r)}function to(e,t,r){if(r.biff>5)return Mf(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function q6(e,t,r){return r||(r=be(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Sde(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function kde(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(oa,"");return a&&(e.l+=24),s}function Cde(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(oa,"");return r+l}function _de(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return kde(e);case"0303000000000000c000000000000046":return Cde(e);default:throw new Error("Unsupported Moniker "+r)}}function T0(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(oa,""):"";return r}function X_(e,t){t||(t=be(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Ode(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,l,o,c,u="",d,f;s&16&&(i=T0(e,r-e.l)),s&128&&(l=T0(e,r-e.l)),(s&257)===257&&(o=T0(e,r-e.l)),(s&257)===1&&(c=_de(e,r-e.l)),s&8&&(u=T0(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=uN(e)),e.l=r;var m=l||o||c||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),f&&(p.time=f),i&&(p.Tooltip=i),p}function Ede(e){var t=be(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)t.write_shift(4,l[r]);if(i==28)a=a.slice(1),X_(a,t);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));var o=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&X_(s>-1?a.slice(s+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function K6(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function z6(e,t){var r=K6(e);return r[3]=0,r}function cs(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Bl(e,t,r,a){return a||(a=be(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function Tde(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Ade(e,t,r){return t===0?"":to(e,t,r)}function Pde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),l=e.read_shift(a,"i");return[s,i,l]}function V6(e){var t=e.read_shift(2),r=lN(e);return[t,r]}function Dde(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Ff(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function rp(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function H6(e,t){return t||(t=be(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function G6(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var Ide=G6;function X6(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function Fde(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Mde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Jr(e){e.l+=2,e.l+=e.read_shift(2)}var Rde={0:Jr,4:Jr,5:Jr,6:Jr,7:Mde,8:Jr,9:Jr,10:Jr,11:Jr,12:Jr,13:Fde,14:Jr,15:Jr,16:Jr,17:Jr,18:Jr,19:Jr,20:Jr,21:X6};function Lde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(Rde[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function A0(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function dN(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=be(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function $de(e,t){return t===0||e.read_shift(2),1200}function Bde(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=to(e,0,r);return e.read_shift(t+a-e.l),s}function Ude(e,t){var r=!t||t.biff==8,a=be(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Wde(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function qde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=Ff(e,0,r);return l.length===0&&(l="Sheet1"),{pos:a,hs:s,dt:i,name:l}}function Kde(e,t){var r=!t||t.biff>=8?2:1,a=be(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function zde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],l=0;l!=s&&e.l<r;++l)i.push(Nde(e));return i.Count=a,i.Unique=s,i}function Vde(e,t){var r=be(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=jde(e[s]);var i=Dr([r].concat(a));return i.parts=[r.length].concat(a.map(function(l){return l.length})),i}function Hde(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Gde(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Xde(e){var t=Tde(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Yde(e){return e.read_shift(2),e.read_shift(4)}function Y_(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function Qde(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:u}}function Jde(){var e=be(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Zde(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function efe(e){var t=be(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function tfe(){}function rfe(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Ff(e,0,r),a}function afe(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=be(s);return i.write_shift(2,(e.sz||12)*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function nfe(e){var t=cs(e);return t.isst=e.read_shift(4),t}function sfe(e,t,r,a){var s=be(10);return Bl(e,t,a,s),s.write_shift(4,r),s}function ife(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=cs(e);r.biff==2&&e.l++;var i=Mf(e,a-e.l,r);return s.val=i,s}function lfe(e,t,r,a,s){var i=!s||s.biff==8,l=be(6+2+ +i+(1+i)*r.length);return Bl(e,t,a,l),l.write_shift(2,r.length),i&&l.write_shift(1,1),l.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),l}function ofe(e,t,r){var a=e.read_shift(2),s=to(e,0,r);return[a,s]}function cfe(e,t,r,a){var s=r&&r.biff==5;a||(a=be(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var ufe=to;function Q_(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),l=e.read_shift(s),o=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:o},e:{r:l,c}}}function dfe(e,t){var r=t.biff==8||!t.biff?4:2,a=be(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function ffe(e){var t=e.read_shift(2),r=e.read_shift(2),a=V6(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function mfe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(V6(e));if(e.l!==r)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:l,rkrec:i}}function hfe(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:l,ixfe:i}}function xfe(e,t,r,a){var s={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return s.patternType=Xue[o>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=l&15,s.dgRight=l>>4&15,s.dgTop=l>>8&15,s.dgBottom=l>>12&15,s.icvLeft=l>>16&127,s.icvRight=l>>23&127,s.grbitDiag=l>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function pfe(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=xfe(e,t,a.fStyle,r),a}function J_(e,t,r,a){var s=r&&r.biff==5;a||(a=be(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function gfe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function yfe(e){var t=be(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}function Z_(e,t,r){var a=cs(e);(r.biff==2||t==9)&&++e.l;var s=wde(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function vfe(e,t,r,a,s,i){var l=be(8);return Bl(e,t,a,l),W6(r,i,l),l}function bfe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=cs(e),s=ia(e);return a.val=s,a}function wfe(e,t,r,a){var s=be(14);return Bl(e,t,a,s),Ll(r,s),s}var e4=Ade;function Nfe(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=$l(e,i),o=[];a>e.l;)o.push(Mf(e));return[i,s,l,o]}function t4(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Dde(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var jfe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function r4(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=$l(e,l,r);s&32&&(u=jfe[u.charCodeAt(0)]);var d=a-e.l;r&&r.biff==2&&--d;var f=a==e.l||o===0||!(d>0)?[]:Lxe(e,d,r,o);return{chKey:i,Name:u,itab:c,rgce:f}}function Y6(e,t,r){if(r.biff<8)return Sfe(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(Pde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function Sfe(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Ff(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function kfe(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=$l(e,a,r),l=$l(e,s,r);return[i,l]}function Cfe(e,t,r){var a=G6(e);e.l++;var s=e.read_shift(1);return t-=8,[$xe(e,t,r),s,a]}function a4(e,t,r){var a=Ide(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,Mxe(e,t,r)]}function _fe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function Ofe(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=to(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},o,l,i]}}function Efe(e,t,r){return Ofe(e,t,r)}function Tfe(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(rp(e));return r}function Afe(e){var t=be(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)H6(e[r],t);return t}function Pfe(e,t,r){if(r&&r.biff<8)return Ife(e,t,r);var a=X6(e),s=Lde(e,t-22,a[1]);return{cmo:a,ft:s}}var Dfe={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function Ife(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var l=[];return l.push((Dfe[a]||da)(e,t,r)),{cmo:[s,a,i],ft:l}}function Ffe(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=Sde(e,6,r);var o=e.read_shift(2);e.read_shift(2),gr(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=$l(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Mfe(e,t){var r=rp(e);e.l+=16;var a=Ode(e,t-24);return[r,a]}function Rfe(e){var t=be(24),r=Jt(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return Dr([t,Ede(e[1])])}function Lfe(e,t){e.read_shift(2);var r=rp(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(oa,""),[r,a]}function $fe(e){var t=e[1].Tooltip,r=be(10+2*(t.length+1));r.write_shift(2,2048);var a=Jt(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Bfe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=U_[r]||r,r=e.read_shift(2),t[1]=U_[r]||r,t}function Ufe(e){return e||(e=be(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Wfe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(z6(e));return r}function qfe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(z6(e));return r}function Kfe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Q6(e,t,r){if(!r.cellStyles)return da(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),l=e.read_shift(a),o=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var u={s,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function zfe(e,t){var r=be(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function Vfe(e,t){var r={};return t<32||(e.l+=16,r.header=ia(e),r.footer=ia(e),e.l+=2),r}function Hfe(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function Gfe(e){for(var t=be(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Xfe=cs,Yfe=U6,Qfe=Mf;function Jfe(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function Zfe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=cs(e);++e.l;var s=to(e,t-7,r);return a.t="str",a.val=s,a}function e0e(e){var t=cs(e);++e.l;var r=ia(e);return t.t="n",t.val=r,t}function t0e(e,t,r){var a=be(15);return Bf(a,e,t),a.write_shift(8,r,"f"),a}function r0e(e){var t=cs(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function a0e(e,t,r){var a=be(9);return Bf(a,e,t),a.write_shift(2,r),a}function n0e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function s0e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function i0e(e,t,r){var a=e.l+t,s=cs(e),i=e.read_shift(2),l=$l(e,i,r);return e.l=a,s.t="str",s.val=l,s}var l0e=[2,3,48,49,131,139,140,245],b1=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Jx({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=_i(1);switch(c.type){case"base64":d=La(Va(o));break;case"binary":d=La(o);break;case"buffer":case"array":d=o;break}Kr(d,0);var f=d.read_shift(1),m=!!(f&136),p=!1,y=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var h=0,v=521;f==2&&(h=d.read_shift(2)),d.l+=3,f!=2&&(h=d.read_shift(4)),h>1048576&&(h=1e6),f!=2&&(v=d.read_shift(2));var w=d.read_shift(2),S=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(S=e[d[d.l]]),d.l+=1,d.l+=2),y&&(d.l+=36);for(var b=[],x={},g=Math.min(d.length,f==2?521:v-10-(p?264:0)),N=y?32:11;d.l<g&&d[d.l]!=13;)switch(x={},x.name=xt.utils.decode(S,d.slice(d.l,d.l+N)).replace(/[\u0000\r\n].*$/g,""),d.l+=N,x.type=String.fromCharCode(d.read_shift(1)),f!=2&&!y&&(x.offset=d.read_shift(4)),x.len=d.read_shift(1),f==2&&(x.offset=d.read_shift(2)),x.dec=d.read_shift(1),x.name.length&&b.push(x),f!=2&&(d.l+=y?13:14),x.type){case"B":(!p||x.len!=8)&&c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+x.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var j=0,C=0;for(u[0]=[],C=0;C!=b.length;++C)u[0][C]=b[C].name;for(;h-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,u[++j]=[],C=0,C=0;C!=b.length;++C){var _=d.slice(d.l,d.l+b[C].len);d.l+=b[C].len,Kr(_,0);var T=xt.utils.decode(S,_);switch(b[C].type){case"C":T.trim().length&&(u[j][C]=T.replace(/\s+$/,""));break;case"D":T.length===8?u[j][C]=new Date(+T.slice(0,4),+T.slice(4,6)-1,+T.slice(6,8)):u[j][C]=T;break;case"F":u[j][C]=parseFloat(T.trim());break;case"+":case"I":u[j][C]=y?_.read_shift(-4,"i")^2147483648:_.read_shift(4,"i");break;case"L":switch(T.trim().toUpperCase()){case"Y":case"T":u[j][C]=!0;break;case"N":case"F":u[j][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+T+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][C]="##MEMO##"+(y?parseInt(T.trim(),10):_.read_shift(4));break;case"N":T=T.replace(/\u0000/g,"").trim(),T&&T!="."&&(u[j][C]=+T||0);break;case"@":u[j][C]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":u[j][C]=new Date((_.read_shift(4)-2440588)*864e5+_.read_shift(4));break;case"Y":u[j][C]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][C]=-_.read_shift(-8,"f");break;case"B":if(p&&b[C].len==8){u[j][C]=_.read_shift(8,"f");break}case"G":case"P":_.l+=b[C].len;break;case"0":if(b[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[C].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function a(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Vc(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,c){try{return Vi(a(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var u=c||{};if(+u.codepage>=0&&fn(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Ea(),f=Bh(o,{header:1,raw:!0,cellDates:!0}),m=f[0],p=f.slice(1),y=o["!cols"]||[],h=0,v=0,w=0,S=1;for(h=0;h<m.length;++h){if(((y[h]||{}).DBF||{}).name){m[h]=y[h].DBF.name,++w;continue}if(m[h]!=null){if(++w,typeof m[h]=="number"&&(m[h]=m[h].toString(10)),typeof m[h]!="string")throw new Error("DBF Invalid column name "+m[h]+" |"+typeof m[h]+"|");if(m.indexOf(m[h])!==h){for(v=0;v<1024;++v)if(m.indexOf(m[h]+"_"+v)==-1){m[h]+="_"+v;break}}}}var b=mt(o["!ref"]),x=[],g=[],N=[];for(h=0;h<=b.e.c-b.s.c;++h){var j="",C="",_=0,T=[];for(v=0;v<p.length;++v)p[v][h]!=null&&T.push(p[v][h]);if(T.length==0||m[h]==null){x[h]="?";continue}for(v=0;v<T.length;++v){switch(typeof T[v]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=T[v]instanceof Date?"D":"C";break;default:C="C"}_=Math.max(_,String(T[v]).length),j=j&&j!=C?"C":C}_>250&&(_=250),C=((y[h]||{}).DBF||{}).type,C=="C"&&y[h].DBF.len>_&&(_=y[h].DBF.len),j=="B"&&C=="N"&&(j="N",N[h]=y[h].DBF.dec,_=y[h].DBF.len),g[h]=j=="C"||C=="N"?_:i[j]||0,S+=g[h],x[h]=j}var E=d.next(32);for(E.write_shift(4,318902576),E.write_shift(4,p.length),E.write_shift(2,296+32*w),E.write_shift(2,S),h=0;h<4;++h)E.write_shift(4,0);for(E.write_shift(4,0|(+t[Fl]||3)<<8),h=0,v=0;h<m.length;++h)if(m[h]!=null){var k=d.next(32),A=(m[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,A,"sbcs"),k.write_shift(1,x[h]=="?"?"C":x[h],"sbcs"),k.write_shift(4,v),k.write_shift(1,g[h]||i[x[h]]||0),k.write_shift(1,N[h]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),v+=g[h]||i[x[h]]||0}var P=d.next(264);for(P.write_shift(4,13),h=0;h<65;++h)P.write_shift(4,0);for(h=0;h<p.length;++h){var F=d.next(S);for(F.write_shift(1,0),v=0;v<m.length;++v)if(m[v]!=null)switch(x[v]){case"L":F.write_shift(1,p[h][v]==null?63:p[h][v]?84:70);break;case"B":F.write_shift(8,p[h][v]||0,"f");break;case"N":var U="0";for(typeof p[h][v]=="number"&&(U=p[h][v].toFixed(N[v]||0)),w=0;w<g[v]-U.length;++w)F.write_shift(1,32);F.write_shift(1,U,"sbcs");break;case"D":p[h][v]?(F.write_shift(4,("0000"+p[h][v].getFullYear()).slice(-4),"sbcs"),F.write_shift(2,("00"+(p[h][v].getMonth()+1)).slice(-2),"sbcs"),F.write_shift(2,("00"+p[h][v].getDate()).slice(-2),"sbcs")):F.write_shift(8,"00000000","sbcs");break;case"C":var W=String(p[h][v]!=null?p[h][v]:"").slice(0,g[v]);for(F.write_shift(1,W,"sbcs"),w=0;w<g[v]-W.length;++w)F.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:a,from_sheet:l}}(),J6=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+lr(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var y=e[p];return typeof y=="number"?f1(y):y},a=function(m,p,y){var h=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return h==59?m:f1(h)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(Va(m),p);case"binary":return i(m,p);case"buffer":return i(it&&Buffer.isBuffer(m)?m.toString("binary"):zi(m),p);case"array":return i(Rl(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var y=m.split(/[\n\r]+/),h=-1,v=-1,w=0,S=0,b=[],x=[],g=null,N={},j=[],C=[],_=[],T=0,E;for(+p.codepage>=0&&fn(+p.codepage);w!==y.length;++w){T=0;var k=y[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),A=k.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),P=A[0],F;if(k.length>0)switch(P){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":A[1].charAt(0)=="P"&&x.push(k.slice(3).replace(/;;/g,";"));break;case"C":var U=!1,W=!1,K=!1,B=!1,ee=-1,oe=-1;for(S=1;S<A.length;++S)switch(A[S].charAt(0)){case"A":break;case"X":v=parseInt(A[S].slice(1))-1,W=!0;break;case"Y":for(h=parseInt(A[S].slice(1))-1,W||(v=0),E=b.length;E<=h;++E)b[E]=[];break;case"K":F=A[S].slice(1),F.charAt(0)==='"'?F=F.slice(1,F.length-1):F==="TRUE"?F=!0:F==="FALSE"?F=!1:isNaN(Un(F))?isNaN(kc(F).getDate())||(F=zt(F)):(F=Un(F),g!==null&&Xl(g)&&(F=ep(F))),typeof xt<"u"&&typeof F=="string"&&(p||{}).type!="string"&&(p||{}).codepage&&(F=xt.utils.decode(p.codepage,F)),U=!0;break;case"E":B=!0;var R=Vo(A[S].slice(1),{r:h,c:v});b[h][v]=[b[h][v],R];break;case"S":K=!0,b[h][v]=[b[h][v],"S5S"];break;case"G":break;case"R":ee=parseInt(A[S].slice(1))-1;break;case"C":oe=parseInt(A[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}if(U&&(b[h][v]&&b[h][v].length==2?b[h][v][0]=F:b[h][v]=F,g=null),K){if(B)throw new Error("SYLK shared formula cannot have own formula");var V=ee>-1&&b[ee][oe];if(!V||!V[1])throw new Error("SYLK shared formula cannot find base");b[h][v][1]=pD(V[1],{r:h-ee,c:v-oe})}break;case"F":var X=0;for(S=1;S<A.length;++S)switch(A[S].charAt(0)){case"X":v=parseInt(A[S].slice(1))-1,++X;break;case"Y":for(h=parseInt(A[S].slice(1))-1,E=b.length;E<=h;++E)b[E]=[];break;case"M":T=parseInt(A[S].slice(1))/20;break;case"F":break;case"G":break;case"P":g=x[parseInt(A[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(_=A[S].slice(1).split(" "),E=parseInt(_[0],10);E<=parseInt(_[1],10);++E)T=parseInt(_[2],10),C[E-1]=T===0?{hidden:!0}:{wch:T},Oi(C[E-1]);break;case"C":v=parseInt(A[S].slice(1))-1,C[v]||(C[v]={});break;case"R":h=parseInt(A[S].slice(1))-1,j[h]||(j[h]={}),T>0?(j[h].hpt=T,j[h].hpx=_c(T)):T===0&&(j[h].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}X<1&&(g=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+k)}}return j.length>0&&(N["!rows"]=j),C.length>0&&(N["!cols"]=C),p&&p.sheetRows&&(b=b.slice(0,p.sheetRows)),[b,N]}function l(m,p){var y=s(m,p),h=y[0],v=y[1],w=Vc(h,p);return lr(v).forEach(function(S){w[S]=v[S]}),w}function o(m,p){return Vi(l(m,p),p)}function c(m,p,y,h){var v="C;Y"+(y+1)+";X"+(h+1)+";K";switch(m.t){case"n":v+=m.v||0,m.f&&!m.F&&(v+=";E"+gN(m.f,{r:y,c:h}));break;case"b":v+=m.v?"TRUE":"FALSE";break;case"e":v+=m.w||m.v;break;case"d":v+='"'+(m.w||m.v)+'"';break;case"s":v+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(m,p){p.forEach(function(y,h){var v="F;W"+(h+1)+" "+(h+1)+" ";y.hidden?v+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=lf(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=of(y.wpx)),typeof y.wch=="number"&&(v+=Math.round(y.wch))),v.charAt(v.length-1)!=" "&&m.push(v)})}function d(m,p){p.forEach(function(y,h){var v="F;";y.hidden?v+="M0;":y.hpt?v+="M"+20*y.hpt+";":y.hpx&&(v+="M"+20*cf(y.hpx)+";"),v.length>2&&m.push(v+"R"+(h+1))})}function f(m,p){var y=["ID;PWXL;N;E"],h=[],v=mt(m["!ref"]),w,S=Array.isArray(m),b=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),m["!cols"]&&u(y,m["!cols"]),m["!rows"]&&d(y,m["!rows"]),y.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var x=v.s.r;x<=v.e.r;++x)for(var g=v.s.c;g<=v.e.c;++g){var N=Xe({r:x,c:g});w=S?(m[x]||[])[g]:m[N],!(!w||w.v==null&&(!w.f||w.F))&&h.push(c(w,m,x,g))}return y.join(b)+b+h.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:l,from_sheet:f}}(),Z6=function(){function e(i,l){switch(l.type){case"base64":return t(Va(i),l);case"binary":return t(i,l);case"buffer":return t(it&&Buffer.isBuffer(i)?i.toString("binary"):zi(i),l);case"array":return t(Rl(i),l)}throw new Error("Unrecognized type "+l.type)}function t(i,l){for(var o=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var m=o[d].trim().split(","),p=m[0],y=m[1];++d;for(var h=o[d]||"";(h.match(/["]/g)||[]).length&1&&d<o.length-1;)h+=`
`+o[++d];switch(h=h.trim(),+p){case-1:if(h==="BOT"){f[++c]=[],u=0;continue}else if(h!=="EOD")throw new Error("Unrecognized DIF special command "+h);break;case 0:h==="TRUE"?f[c][u]=!0:h==="FALSE"?f[c][u]=!1:isNaN(Un(y))?isNaN(kc(y).getDate())?f[c][u]=y:f[c][u]=zt(y):f[c][u]=Un(y),++u;break;case 1:h=h.slice(1,h.length-1),h=h.replace(/""/g,'"'),h&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),f[c][u++]=h!==""?h:null;break}if(h==="EOD")break}}return l&&l.sheetRows&&(f=f.slice(0,l.sheetRows)),f}function r(i,l){return Vc(e(i,l),l)}function a(i,l){return Vi(r(i,l),l)}var s=function(){var i=function(c,u,d,f,m){c.push(u),c.push(d+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},l=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=mt(c["!ref"]),f,m=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){l(u,-1,0,"BOT");for(var y=d.s.c;y<=d.e.c;++y){var h=Xe({r:p,c:y});if(f=m?(c[p]||[])[y]:c[h],!f){l(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?l(u,1,0,"="+f.f):l(u,1,0,""):l(u,0,v,"V");break;case"b":l(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":l(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Ha(f.z||ze[14],_r(zt(f.v)))),l(u,0,f.w,"V");break;default:l(u,1,0,"")}}}l(u,-1,0,"EOD");var w=`\r
`,S=u.join(w);return S}}();return{to_workbook:a,to_sheet:r,from_sheet:s}}(),eD=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,m){for(var p=f.split(`
`),y=-1,h=-1,v=0,w=[];v!==p.length;++v){var S=p[v].trim().split(":");if(S[0]==="cell"){var b=Jt(S[1]);if(w.length<=b.r)for(y=w.length;y<=b.r;++y)w[y]||(w[y]=[]);switch(y=b.r,h=b.c,S[2]){case"t":w[y][h]=e(S[3]);break;case"v":w[y][h]=+S[3];break;case"vtf":var x=S[S.length-1];case"vtc":switch(S[3]){case"nl":w[y][h]=!!+S[4];break;default:w[y][h]=+S[4];break}S[2]=="vtf"&&(w[y][h]=[w[y][h],x])}}}return m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),w}function a(f,m){return Vc(r(f,m),m)}function s(f,m){return Vi(a(f,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var m=[],p=[],y,h="",v=ya(f["!ref"]),w=Array.isArray(f),S=v.s.r;S<=v.e.r;++S)for(var b=v.s.c;b<=v.e.c;++b)if(h=Xe({r:S,c:b}),y=w?(f[S]||[])[b]:f[h],!(!y||y.v==null||y.t==="z")){switch(p=["cell",h,"t"],y.t){case"s":case"str":p.push(t(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=t(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=t(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var x=_r(zt(y.v));p[2]="vtc",p[3]="nd",p[4]=""+x,p[5]=y.w||Ha(y.z||ze[14],x);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[i,l,o,l,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:d}}(),Cc=function(){function e(d,f,m,p,y){y.raw?f[m][p]=d:d===""||(d==="TRUE"?f[m][p]=!0:d==="FALSE"?f[m][p]=!1:isNaN(Un(d))?isNaN(kc(d).getDate())?f[m][p]=d:f[m][p]=zt(d):f[m][p]=Un(d))}function t(d,f){var m=f||{},p=[];if(!d||d.length===0)return p;for(var y=d.split(/[\r\n]/),h=y.length-1;h>=0&&y[h].length===0;)--h;for(var v=10,w=0,S=0;S<=h;++S)w=y[S].indexOf(" "),w==-1?w=y[S].length:w++,v=Math.max(v,w);for(S=0;S<=h;++S){p[S]=[];var b=0;for(e(y[S].slice(0,v).trim(),p,S,b,m),b=1;b<=(y[S].length-v)/10+1;++b)e(y[S].slice(v+(b-1)*10,v+b*10).trim(),p,S,b,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(d){for(var f={},m=!1,p=0,y=0;p<d.length;++p)(y=d.charCodeAt(p))==34?m=!m:!m&&y in r&&(f[y]=(f[y]||0)+1);y=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&y.push([f[p],p]);if(!y.length){f=a;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&y.push([f[p],p])}return y.sort(function(h,v){return h[0]-v[0]||a[h[1]]-a[v[1]]}),r[y.pop()[1]]||44}function i(d,f){var m=f||{},p="",y=m.dense?[]:{},h={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=s(d.slice(0,1024)):m&&m.FS?p=m.FS:p=s(d.slice(0,1024));var v=0,w=0,S=0,b=0,x=0,g=p.charCodeAt(0),N=!1,j=0,C=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var _=m.dateNF!=null?Hce(m.dateNF):null;function T(){var E=d.slice(b,x),k={};if(E.charAt(0)=='"'&&E.charAt(E.length-1)=='"'&&(E=E.slice(1,-1).replace(/""/g,'"')),E.length===0)k.t="z";else if(m.raw)k.t="s",k.v=E;else if(E.trim().length===0)k.t="s",k.v=E;else if(E.charCodeAt(0)==61)E.charCodeAt(1)==34&&E.charCodeAt(E.length-1)==34?(k.t="s",k.v=E.slice(2,-1).replace(/""/g,'"')):Nhe(E)?(k.t="n",k.f=E.slice(1)):(k.t="s",k.v=E);else if(E=="TRUE")k.t="b",k.v=!0;else if(E=="FALSE")k.t="b",k.v=!1;else if(!isNaN(S=Un(E)))k.t="n",m.cellText!==!1&&(k.w=E),k.v=S;else if(!isNaN(kc(E).getDate())||_&&E.match(_)){k.z=m.dateNF||ze[14];var A=0;_&&E.match(_)&&(E=Gce(E,m.dateNF,E.match(_)||[]),A=1),m.cellDates?(k.t="d",k.v=zt(E,A)):(k.t="n",k.v=_r(zt(E,A))),m.cellText!==!1&&(k.w=Ha(k.z,k.v instanceof Date?_r(k.v):k.v)),m.cellNF||delete k.z}else k.t="s",k.v=E;if(k.t=="z"||(m.dense?(y[v]||(y[v]=[]),y[v][w]=k):y[Xe({c:w,r:v})]=k),b=x+1,C=d.charCodeAt(b),h.e.c<w&&(h.e.c=w),h.e.r<v&&(h.e.r=v),j==g)++w;else if(w=0,++v,m.sheetRows&&m.sheetRows<=v)return!0}e:for(;x<d.length;++x)switch(j=d.charCodeAt(x)){case 34:C===34&&(N=!N);break;case g:case 10:case 13:if(!N&&T())break e;break}return x-b>0&&T(),y["!ref"]=rt(h),y}function l(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):Vc(t(d,f),f)}function o(d,f){var m="",p=f.type=="string"?[0,0,0,0]:CN(d,f);switch(f.type){case"base64":m=Va(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof xt<"u"?m=xt.utils.decode(f.codepage,d):m=it&&Buffer.isBuffer(d)?d.toString("binary"):zi(d);break;case"array":m=Rl(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=At(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=At(m):f.type=="binary"&&typeof xt<"u"&&f.codepage&&(m=xt.utils.decode(f.codepage,xt.utils.encode(28591,m))),m.slice(0,19)=="socialcalc:version:"?eD.to_sheet(f.type=="string"?m:At(m),f):l(m,f)}function c(d,f){return Vi(o(d,f),f)}function u(d){for(var f=[],m=mt(d["!ref"]),p,y=Array.isArray(d),h=m.s.r;h<=m.e.r;++h){for(var v=[],w=m.s.c;w<=m.e.c;++w){var S=Xe({r:h,c:w});if(p=y?(d[h]||[])[w]:d[S],!p||p.v==null){v.push("          ");continue}for(var b=(p.w||(is(p),p.w)||"").slice(0,10);b.length<10;)b+=" ";v.push(b+(w===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function o0e(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=J6.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return Cc.to_workbook(e,t)}}var bl=function(){function e(R,V,X){if(R){Kr(R,R.l||0);for(var J=X.Enum||ee;R.l<R.length;){var Z=R.read_shift(2),le=J[Z]||J[65535],xe=R.read_shift(2),ae=R.l+xe,M=le.f&&le.f(R,xe,X);if(R.l=ae,V(M,le,Z))return}}}function t(R,V){switch(V.type){case"base64":return r(La(Va(R)),V);case"binary":return r(La(R),V);case"buffer":case"array":return r(R,V)}throw"Unsupported type "+V.type}function r(R,V){if(!R)return R;var X=V||{},J=X.dense?[]:{},Z="Sheet1",le="",xe=0,ae={},M=[],G=[],D={s:{r:0,c:0},e:{r:0,c:0}},se=X.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)X.Enum=ee,e(R,function(te,Ue,et){switch(et){case 0:X.vers=te,te>=4096&&(X.qpro=!0);break;case 6:D=te;break;case 204:te&&(le=te);break;case 222:le=te;break;case 15:case 51:X.qpro||(te[1].v=te[1].v.slice(1));case 13:case 14:case 16:et==14&&(te[2]&112)==112&&(te[2]&15)>1&&(te[2]&15)<15&&(te[1].z=X.dateNF||ze[14],X.cellDates&&(te[1].t="d",te[1].v=ep(te[1].v))),X.qpro&&te[3]>xe&&(J["!ref"]=rt(D),ae[Z]=J,M.push(Z),J=X.dense?[]:{},D={s:{r:0,c:0},e:{r:0,c:0}},xe=te[3],Z=le||"Sheet"+(xe+1),le="");var Je=X.dense?(J[te[0].r]||[])[te[0].c]:J[Xe(te[0])];if(Je){Je.t=te[1].t,Je.v=te[1].v,te[1].z!=null&&(Je.z=te[1].z),te[1].f!=null&&(Je.f=te[1].f);break}X.dense?(J[te[0].r]||(J[te[0].r]=[]),J[te[0].r][te[0].c]=te[1]):J[Xe(te[0])]=te[1];break}},X);else if(R[2]==26||R[2]==14)X.Enum=oe,R[2]==14&&(X.qpro=!0,R.l=0),e(R,function(te,Ue,et){switch(et){case 204:Z=te;break;case 22:te[1].v=te[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(te[3]>xe&&(J["!ref"]=rt(D),ae[Z]=J,M.push(Z),J=X.dense?[]:{},D={s:{r:0,c:0},e:{r:0,c:0}},xe=te[3],Z="Sheet"+(xe+1)),se>0&&te[0].r>=se)break;X.dense?(J[te[0].r]||(J[te[0].r]=[]),J[te[0].r][te[0].c]=te[1]):J[Xe(te[0])]=te[1],D.e.c<te[0].c&&(D.e.c=te[0].c),D.e.r<te[0].r&&(D.e.r=te[0].r);break;case 27:te[14e3]&&(G[te[14e3][0]]=te[14e3][1]);break;case 1537:G[te[0]]=te[1],te[0]==xe&&(Z=te[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(J["!ref"]=rt(D),ae[le||Z]=J,M.push(le||Z),!G.length)return{SheetNames:M,Sheets:ae};for(var I={},ce=[],ue=0;ue<G.length;++ue)ae[M[ue]]?(ce.push(G[ue]||M[ue]),I[G[ue]]=ae[G[ue]]||ae[M[ue]]):(ce.push(G[ue]),I[G[ue]]={"!ref":"A1"});return{SheetNames:ce,Sheets:I}}function a(R,V){var X=V||{};if(+X.codepage>=0&&fn(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var J=Ea(),Z=mt(R["!ref"]),le=Array.isArray(R),xe=[];Te(J,0,i(1030)),Te(J,6,c(Z));for(var ae=Math.min(Z.e.r,8191),M=Z.s.r;M<=ae;++M)for(var G=nr(M),D=Z.s.c;D<=Z.e.c;++D){M===Z.s.r&&(xe[D]=Kt(D));var se=xe[D]+G,I=le?(R[M]||[])[D]:R[se];if(!(!I||I.t=="z"))if(I.t=="n")(I.v|0)==I.v&&I.v>=-32768&&I.v<=32767?Te(J,13,p(M,D,I.v)):Te(J,14,h(M,D,I.v));else{var ce=is(I);Te(J,15,f(M,D,ce.slice(0,239)))}}return Te(J,1),J.end()}function s(R,V){var X=V||{};if(+X.codepage>=0&&fn(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var J=Ea();Te(J,0,l(R));for(var Z=0,le=0;Z<R.SheetNames.length;++Z)(R.Sheets[R.SheetNames[Z]]||{})["!ref"]&&Te(J,27,B(R.SheetNames[Z],le++));var xe=0;for(Z=0;Z<R.SheetNames.length;++Z){var ae=R.Sheets[R.SheetNames[Z]];if(!(!ae||!ae["!ref"])){for(var M=mt(ae["!ref"]),G=Array.isArray(ae),D=[],se=Math.min(M.e.r,8191),I=M.s.r;I<=se;++I)for(var ce=nr(I),ue=M.s.c;ue<=M.e.c;++ue){I===M.s.r&&(D[ue]=Kt(ue));var te=D[ue]+ce,Ue=G?(ae[I]||[])[ue]:ae[te];if(!(!Ue||Ue.t=="z"))if(Ue.t=="n")Te(J,23,T(I,ue,xe,Ue.v));else{var et=is(Ue);Te(J,22,j(I,ue,xe,et.slice(0,239)))}}++xe}}return Te(J,1),J.end()}function i(R){var V=be(2);return V.write_shift(2,R),V}function l(R){var V=be(26);V.write_shift(2,4096),V.write_shift(2,4),V.write_shift(4,0);for(var X=0,J=0,Z=0,le=0;le<R.SheetNames.length;++le){var xe=R.SheetNames[le],ae=R.Sheets[xe];if(!(!ae||!ae["!ref"])){++Z;var M=ya(ae["!ref"]);X<M.e.r&&(X=M.e.r),J<M.e.c&&(J=M.e.c)}}return X>8191&&(X=8191),V.write_shift(2,X),V.write_shift(1,Z),V.write_shift(1,J),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(1,1),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(4,0),V}function o(R,V,X){var J={s:{c:0,r:0},e:{c:0,r:0}};return V==8&&X.qpro?(J.s.c=R.read_shift(1),R.l++,J.s.r=R.read_shift(2),J.e.c=R.read_shift(1),R.l++,J.e.r=R.read_shift(2),J):(J.s.c=R.read_shift(2),J.s.r=R.read_shift(2),V==12&&X.qpro&&(R.l+=2),J.e.c=R.read_shift(2),J.e.r=R.read_shift(2),V==12&&X.qpro&&(R.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(R){var V=be(8);return V.write_shift(2,R.s.c),V.write_shift(2,R.s.r),V.write_shift(2,R.e.c),V.write_shift(2,R.e.r),V}function u(R,V,X){var J=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(J[0].c=R.read_shift(1),J[3]=R.read_shift(1),J[0].r=R.read_shift(2),R.l+=2):(J[2]=R.read_shift(1),J[0].c=R.read_shift(2),J[0].r=R.read_shift(2)),J}function d(R,V,X){var J=R.l+V,Z=u(R,V,X);if(Z[1].t="s",X.vers==20768){R.l++;var le=R.read_shift(1);return Z[1].v=R.read_shift(le,"utf8"),Z}return X.qpro&&R.l++,Z[1].v=R.read_shift(J-R.l,"cstr"),Z}function f(R,V,X){var J=be(7+X.length);J.write_shift(1,255),J.write_shift(2,V),J.write_shift(2,R),J.write_shift(1,39);for(var Z=0;Z<J.length;++Z){var le=X.charCodeAt(Z);J.write_shift(1,le>=128?95:le)}return J.write_shift(1,0),J}function m(R,V,X){var J=u(R,V,X);return J[1].v=R.read_shift(2,"i"),J}function p(R,V,X){var J=be(7);return J.write_shift(1,255),J.write_shift(2,V),J.write_shift(2,R),J.write_shift(2,X,"i"),J}function y(R,V,X){var J=u(R,V,X);return J[1].v=R.read_shift(8,"f"),J}function h(R,V,X){var J=be(13);return J.write_shift(1,255),J.write_shift(2,V),J.write_shift(2,R),J.write_shift(8,X,"f"),J}function v(R,V,X){var J=R.l+V,Z=u(R,V,X);if(Z[1].v=R.read_shift(8,"f"),X.qpro)R.l=J;else{var le=R.read_shift(2);x(R.slice(R.l,R.l+le),Z),R.l+=le}return Z}function w(R,V,X){var J=V&32768;return V&=-32769,V=(J?R:0)+(V>=8192?V-16384:V),(J?"":"$")+(X?Kt(V):nr(V))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function x(R,V){Kr(R,0);for(var X=[],J=0,Z="",le="",xe="",ae="";R.l<R.length;){var M=R[R.l++];switch(M){case 0:X.push(R.read_shift(8,"f"));break;case 1:le=w(V[0].c,R.read_shift(2),!0),Z=w(V[0].r,R.read_shift(2),!1),X.push(le+Z);break;case 2:{var G=w(V[0].c,R.read_shift(2),!0),D=w(V[0].r,R.read_shift(2),!1);le=w(V[0].c,R.read_shift(2),!0),Z=w(V[0].r,R.read_shift(2),!1),X.push(G+D+":"+le+Z)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(R.read_shift(2));break;case 6:{for(var se="";M=R[R.l++];)se+=String.fromCharCode(M);X.push('"'+se.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:ae=X.pop(),xe=X.pop(),X.push(["AND","OR"][M-20]+"("+xe+","+ae+")");break;default:if(M<32&&b[M])ae=X.pop(),xe=X.pop(),X.push(xe+b[M]+ae);else if(S[M]){if(J=S[M][1],J==69&&(J=R[R.l++]),J>X.length){console.error("WK1 bad formula parse 0x"+M.toString(16)+":|"+X.join("|")+"|");return}var I=X.slice(-J);X.length-=J,X.push(S[M][0]+"("+I.join(",")+")")}else return M<=7?console.error("WK1 invalid opcode "+M.toString(16)):M<=24?console.error("WK1 unsupported op "+M.toString(16)):M<=30?console.error("WK1 invalid opcode "+M.toString(16)):M<=115?console.error("WK1 unsupported function opcode "+M.toString(16)):console.error("WK1 unrecognized opcode "+M.toString(16))}}X.length==1?V[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function g(R){var V=[{c:0,r:0},{t:"n",v:0},0];return V[0].r=R.read_shift(2),V[3]=R[R.l++],V[0].c=R[R.l++],V}function N(R,V){var X=g(R);return X[1].t="s",X[1].v=R.read_shift(V-4,"cstr"),X}function j(R,V,X,J){var Z=be(6+J.length);Z.write_shift(2,R),Z.write_shift(1,X),Z.write_shift(1,V),Z.write_shift(1,39);for(var le=0;le<J.length;++le){var xe=J.charCodeAt(le);Z.write_shift(1,xe>=128?95:xe)}return Z.write_shift(1,0),Z}function C(R,V){var X=g(R);X[1].v=R.read_shift(2);var J=X[1].v>>1;if(X[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return X[1].v=J,X}function _(R,V){var X=g(R),J=R.read_shift(4),Z=R.read_shift(4),le=R.read_shift(2);if(le==65535)return J===0&&Z===3221225472?(X[1].t="e",X[1].v=15):J===0&&Z===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var xe=le&32768;return le=(le&32767)-16446,X[1].v=(1-xe*2)*(Z*Math.pow(2,le+32)+J*Math.pow(2,le)),X}function T(R,V,X,J){var Z=be(14);if(Z.write_shift(2,R),Z.write_shift(1,X),Z.write_shift(1,V),J==0)return Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(2,65535),Z;var le=0,xe=0,ae=0,M=0;return J<0&&(le=1,J=-J),xe=Math.log2(J)|0,J/=Math.pow(2,xe-31),M=J>>>0,M&2147483648||(J/=2,++xe,M=J>>>0),J-=M,M|=2147483648,M>>>=0,J*=Math.pow(2,32),ae=J>>>0,Z.write_shift(4,ae),Z.write_shift(4,M),xe+=16383+(le?32768:0),Z.write_shift(2,xe),Z}function E(R,V){var X=_(R);return R.l+=V-14,X}function k(R,V){var X=g(R),J=R.read_shift(4);return X[1].v=J>>6,X}function A(R,V){var X=g(R),J=R.read_shift(8,"f");return X[1].v=J,X}function P(R,V){var X=A(R);return R.l+=V-10,X}function F(R,V){return R[R.l+V-1]==0?R.read_shift(V,"cstr"):""}function U(R,V){var X=R[R.l++];X>V-1&&(X=V-1);for(var J="";J.length<X;)J+=String.fromCharCode(R[R.l++]);return J}function W(R,V,X){if(!(!X.qpro||V<21)){var J=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var Z=R.read_shift(V-21,"cstr");return[J,Z]}}function K(R,V){for(var X={},J=R.l+V;R.l<J;){var Z=R.read_shift(2);if(Z==14e3){for(X[Z]=[0,""],X[Z][0]=R.read_shift(2);R[R.l];)X[Z][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return X}function B(R,V){var X=be(5+R.length);X.write_shift(2,14e3),X.write_shift(2,V);for(var J=0;J<R.length;++J){var Z=R.charCodeAt(J);X[X.l++]=Z>127?95:Z}return X[X.l++]=0,X}var ee={0:{n:"BOF",f:gr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:F},222:{n:"SHEETNAMELP",f:U},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:_},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:E},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:A},40:{n:"FORMULA28",f:P},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:F},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:W},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}}();function c0e(e){var t={},r=e.match(fa),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=Ye(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=Bw[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var u0e=function(){var e=tf("t"),t=tf("rPr");function r(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:yt(l[1])},c=i.match(t);return c&&(o.s=c0e(c[1])),o}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(l){return l.replace(a,"").split(s).map(r).filter(function(o){return o.v})}}(),d0e=function(){var t=/(\r\n|\n)/g;function r(s,i,l){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),s.b&&(i.push("<b>"),l.push("</b>")),s.i&&(i.push("<i>"),l.push("</i>")),s.strike&&(i.push("<s>"),l.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}}(),f0e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,m0e=/<(?:\w+:)?r>/,h0e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function fN(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=yt(At(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=At(e),r&&(a.h=Gw(a.t))):e.match(m0e)&&(a.r=At(e),a.t=yt(At((e.replace(h0e,"").match(f0e)||[]).join("").replace(fa,""))),r&&(a.h=d0e(u0e(a.r)))),a):{t:""}}var x0e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,p0e=/<(?:\w+:)?(?:si|sstItem)>/g,g0e=/<\/(?:\w+:)?(?:si|sstItem)>/;function y0e(e,t){var r=[],a="";if(!e)return r;var s=e.match(x0e);if(s){a=s[2].replace(p0e,"").split(g0e);for(var i=0;i!=a.length;++i){var l=fN(a[i].trim(),t);l!=null&&(r[r.length]=l)}s=Ye(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var v0e=/^\s|\s$|[\t\n\r]/;function tD(e,t){if(!t.bookSST)return"";var r=[mr];r[r.length]=Ee("sst",null,{xmlns:Yl[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(v0e)&&(i+=' xml:space="preserve"'),i+=">"+_t(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function b0e(e){return[e.read_shift(4),e.read_shift(4)]}function w0e(e,t){var r=[],a=!1;return Vs(e,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(l.T,!a||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function N0e(e,t){return t||(t=be(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var j0e=Due;function S0e(e){var t=Ea();Se(t,159,N0e(e));for(var r=0;r<e.length;++r)Se(t,19,j0e(e[r]));return Se(t,160),t.end()}function rD(e){if(typeof xt<"u")return xt.utils.encode(Fl,e);for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function As(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function k0e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=As(e,4),t.U=As(e,4),t.W=As(e,4),t}function C0e(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function _0e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(C0e(e));return t}function O0e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function E0e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=As(e,4),t.U=As(e,4),t.W=As(e,4),t}function T0e(e){var t=E0e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function aD(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function nD(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function A0e(e){var t=As(e);switch(t.Minor){case 2:return[t.Minor,P0e(e)];case 3:return[t.Minor,D0e()];case 4:return[t.Minor,I0e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function P0e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=aD(e,r),s=nD(e,e.length-e.l);return{t:"Std",h:a,v:s}}function D0e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function I0e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(fa,function(i){var l=Ye(i);switch(os(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){a[o]=l[o]});break;case"<dataIntegrity":a.encryptedHmacKey=l.encryptedHmacKey,a.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(l);break;default:throw l[0]}}),a}function F0e(e,t){var r={},a=r.EncryptionVersionInfo=As(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=aD(e,s),t-=s,r.EncryptionVerifier=nD(e,t),r}function M0e(e){var t={},r=t.EncryptionVersionInfo=As(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function mN(e){var t=0,r,a=rD(e),s=a.length+1,i,l,o,c,u;for(r=_i(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)l=r[i],o=t&16384?1:0,c=t<<1&32767,u=o|c,t=u^l;return t^52811}var sD=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(l){return(l/2|l*128)&255},s=function(l,o){return a(l^o)},i=function(l){for(var o=t[l.length-1],c=104,u=l.length-1;u>=0;--u)for(var d=l[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(l){for(var o=rD(l),c=i(o),u=o.length,d=_i(16),f=0;f!=16;++f)d[f]=0;var m,p,y;for((u&1)===1&&(m=c>>8,d[u]=s(e[0],m),--u,m=c&255,p=o[o.length-1],d[u]=s(p,m));u>0;)--u,m=c>>8,d[u]=s(o[u],m),--u,m=c&255,d[u]=s(o[u],m);for(u=15,y=15-o.length;y>0;)m=c>>8,d[u]=s(e[y],m),--u,--y,m=c&255,d[u]=s(o[u],m),--u,--y;return d}}(),R0e=function(e,t,r,a,s){s||(s=t),a||(a=sD(e));var i,l;for(i=0;i!=t.length;++i)l=t[i],l^=a[r],l=(l>>5|l<<3)&255,s[i]=l,++r;return[s,r,a]},L0e=function(e){var t=0,r=sD(e);return function(a){var s=R0e("",a,t,r);return t=s[1],s[0]}};function $0e(e,t,r,a){var s={key:gr(e),verificationBytes:gr(e)};return r.password&&(s.verifier=mN(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=L0e(r.password)),s}function B0e(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=M0e(e):a.Data=F0e(e,t),a}function U0e(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?B0e(e,t-2,a):$0e(e,r.biff>=8?t:t-2,r,a),a}var iD=function(){function e(s,i){switch(i.type){case"base64":return t(Va(s),i);case"binary":return t(s,i);case"buffer":return t(it&&Buffer.isBuffer(s)?s.toString("binary"):zi(s),i);case"array":return t(Rl(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var l=i||{},o=l.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var m=/\\\w+\b/g,p=0,y,h=-1;y=m.exec(d);){switch(y[0]){case"\\cell":var v=d.slice(p,m.lastIndex-y[0].length);if(v[0]==" "&&(v=v.slice(1)),++h,v.length){var w={v,t:"s"};Array.isArray(o)?o[f][h]=w:o[Xe({r:f,c:h})]=w}break}p=m.lastIndex}h>u.e.c&&(u.e.c=h)}),o["!ref"]=rt(u),o}function r(s,i){return Vi(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],l=mt(s["!ref"]),o,c=Array.isArray(s),u=l.s.r;u<=l.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=l.s.c;d<=l.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=l.s.c;d<=l.e.c;++d){var f=Xe({r:u,c:d});o=c?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(is(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function W0e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function sf(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function q0e(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),l=s-i;if(l===0)return[0,0,t];var o=0,c=0,u=s+i;switch(c=l/(u>1?2-u:u),s){case t:o=((r-a)/l+6)%6;break;case r:o=(a-t)/l+2;break;case a:o=(t-r)/l+4;break}return[o/6,c,u/2]}function K0e(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,l=[i,i,i],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=s*o,l[0]+=s,l[1]+=c;break;case 1:c=s*(2-o),l[0]+=c,l[1]+=s;break;case 2:c=s*(o-2),l[1]+=s,l[2]+=c;break;case 3:c=s*(4-o),l[1]+=c,l[2]+=s;break;case 4:c=s*(o-4),l[2]+=s,l[0]+=c;break;case 5:c=s*(6-o),l[2]+=c,l[0]+=s;break}for(var u=0;u!=3;++u)l[u]=Math.round(l[u]*255);return l}function Lh(e,t){if(t===0)return e;var r=q0e(W0e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),sf(K0e(r))}var lD=6,z0e=15,V0e=1,sa=lD;function lf(e){return Math.floor((e+Math.round(128/sa)/256)*sa)}function of(e){return Math.floor((e-5)/sa*100+.5)/100}function $h(e){return Math.round((e*sa+5)/sa*256)/256}function Cg(e){return $h(of(lf(e)))}function hN(e){var t=Math.abs(e-Cg(e)),r=sa;if(t>.005)for(sa=V0e;sa<z0e;++sa)Math.abs(e-Cg(e))<=t&&(t=Math.abs(e-Cg(e)),r=sa);sa=r}function Oi(e){e.width?(e.wpx=lf(e.width),e.wch=of(e.wpx),e.MDW=sa):e.wpx?(e.wch=of(e.wpx),e.width=$h(e.wch),e.MDW=sa):typeof e.wch=="number"&&(e.width=$h(e.wch),e.wpx=lf(e.width),e.MDW=sa),e.customWidth&&delete e.customWidth}var H0e=96,oD=H0e;function cf(e){return e*96/oD}function _c(e){return e*oD/96}var G0e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function X0e(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(fa)||[]).forEach(function(l){var o=Ye(l);switch(os(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Wt(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Wt(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function Y0e(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(fa)||[]).forEach(function(l){var o=Ye(l);switch(os(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function Q0e(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(fa)||[]).forEach(function(l){var o=Ye(l);switch(os(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=At(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Wt(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Wt(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Wt(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Wt(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Wt(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Wt(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Wt(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Bw[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Wt(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var c=yl[s.color.index];s.color.index==81&&(c=yl[1]),c||(c=yl[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Lh(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function J0e(e,t,r){t.NumberFmt=[];for(var a=lr(ze),s=0;s<a.length;++s)t.NumberFmt[a[s]]=ze[a[s]];var i=e[0].match(fa);if(i)for(s=0;s<i.length;++s){var l=Ye(i[s]);switch(os(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=yt(At(l.formatCode)),c=parseInt(l.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}as(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function Z0e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=Ee("numFmt",null,{numFmtId:a,formatCode:_t(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ee("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var P0=["numFmtId","fillId","fontId","borderId","xfId"],D0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function eme(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(fa)||[]).forEach(function(i){var l=Ye(i),o=0;switch(os(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=l,delete a[0],o=0;o<P0.length;++o)a[P0[o]]&&(a[P0[o]]=parseInt(a[P0[o]],10));for(o=0;o<D0.length;++o)a[D0[o]]&&(a[D0[o]]=Wt(a[D0[o]]));if(t.NumberFmt&&a.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[o]){a.numFmtId=o;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=Wt(l.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function tme(e){var t=[];return t[t.length]=Ee("cellXfs",null),e.forEach(function(r){t[t.length]=Ee("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ee("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var rme=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&J0e(f,d,u),(f=o.match(s))&&Q0e(f,d,c,u),(f=o.match(a))&&Y0e(f,d,c,u),(f=o.match(i))&&X0e(f,d,c,u),(f=o.match(r))&&eme(f,d,u),d}}();function cD(e,t){var r=[mr,Ee("styleSheet",null,{xmlns:Yl[0],"xmlns:vt":Sr.vt})],a;return e.SSF&&(a=Z0e(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=tme(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ame(e,t){var r=e.read_shift(2),a=ca(e);return[r,a]}function nme(e,t,r){r||(r=be(6+4*t.length)),r.write_shift(2,e),Ir(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function sme(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Bue(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(a.underline=l);var o=e.read_shift(1);o>0&&(a.family=o);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=$ue(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=ca(e),a}function ime(e,t){t||(t=be(25+4*32)),t.write_shift(2,e.sz*20),Uue(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Fh(e.color,t);var a=0;return e.scheme=="major"&&(a=1),e.scheme=="minor"&&(a=2),t.write_shift(1,a),Ir(e.name,t),t.length>t.l?t.slice(0,t.l):t}var lme=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],_g,ome=da;function n4(e,t){t||(t=be(4*3+8*7+16*1)),_g||(_g=Jx(lme));var r=_g[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(Fh({auto:1},t),Fh({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function cme(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function uD(e,t,r){r||(r=be(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function xu(e,t){return t||(t=be(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var ume=da;function dme(e,t){return t||(t=be(51)),t.write_shift(1,0),xu(null,t),xu(null,t),xu(null,t),xu(null,t),xu(null,t),t.length>t.l?t.slice(0,t.l):t}function fme(e,t){return t||(t=be(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),Ih(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function mme(e,t,r){var a=be(2052);return a.write_shift(4,e),Ih(t,a),Ih(r,a),a.length>a.l?a.slice(0,a.l):a}function hme(e,t,r){var a={};a.NumberFmt=[];for(var s in ze)a.NumberFmt[s]=ze[s];a.CellXf=[],a.Fonts=[];var i=[],l=!1;return Vs(e,function(c,u,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],as(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Lh(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(d),l=!0;break;case 38:i.pop(),l=!1;break;default:if(u.T>0)i.push(d);else if(u.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}function xme(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(Se(e,615,Wn(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Se(e,44,nme(s,t[s]))}),Se(e,616))}}function pme(e){var t=1;Se(e,611,Wn(t)),Se(e,43,ime({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Se(e,612)}function gme(e){var t=2;Se(e,603,Wn(t)),Se(e,45,n4({patternType:"none"})),Se(e,45,n4({patternType:"gray125"})),Se(e,604)}function yme(e){var t=1;Se(e,613,Wn(t)),Se(e,46,dme()),Se(e,614)}function vme(e){var t=1;Se(e,626,Wn(t)),Se(e,47,uD({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Se(e,627)}function bme(e,t){Se(e,617,Wn(t.length)),t.forEach(function(r){Se(e,47,uD(r,0))}),Se(e,618)}function wme(e){var t=1;Se(e,619,Wn(t)),Se(e,48,fme({xfId:0,builtinId:0,name:"Normal"})),Se(e,620)}function Nme(e){var t=0;Se(e,505,Wn(t)),Se(e,506)}function jme(e){var t=0;Se(e,508,mme(t,"TableStyleMedium9","PivotStyleMedium4")),Se(e,509)}function Sme(e,t){var r=Ea();return Se(r,278),xme(r,e.SSF),pme(r),gme(r),yme(r),vme(r),bme(r,t.cellXfs),wme(r),Nme(r),jme(r),Se(r,279),r.end()}var kme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Cme(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(fa)||[]).forEach(function(s){var i=Ye(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[kme.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function _me(){}function Ome(){}var Eme=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Tme=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Ame=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Pme(e,t,r){t.themeElements={};var a;[["clrScheme",Eme,Cme],["fontScheme",Tme,_me],["fmtScheme",Ame,Ome]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var Dme=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function dD(e,t){(!e||e.length===0)&&(e=xN());var r,a={};if(!(r=e.match(Dme)))throw new Error("themeElements not found in theme");return Pme(r[0],a,t),a.raw=e,a}function xN(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[mr];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Ime(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var l;try{l=l6(i,{type:"array"})}catch{return}var o=$a(l,"theme/theme/theme1.xml",!0);if(o)return dD(o,r)}}function Fme(e){return e.read_shift(4)}function Mme(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Rme(e,4);break;case 2:t.xclrValue=K6(e);break;case 3:t.xclrValue=Fme(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Rme(e,t){return da(e,t)}function Lme(e,t){return da(e,t)}function $me(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=Mme(e);break;case 6:a[1]=Lme(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function Bme(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push($me(e,r-e.l));return{ixfe:a,ext:i}}function Ume(e,t){t.forEach(function(r){switch(r[0]){}})}function Wme(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ca(e)}}function qme(e){var t=be(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ir(e.name,t),t.slice(0,t.l)}function Kme(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function zme(e){var t=be(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Vme(e,t){var r=be(8+2*t.length);return r.write_shift(4,e),Ir(t,r),r.slice(0,r.l)}function Hme(e){return e.l+=4,e.read_shift(4)!=0}function Gme(e,t){var r=be(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}function Xme(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],l=!1,o=2;return Vs(e,function(c,u,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):o==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(d),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!u.T){if(!l||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function Yme(){var e=Ea();return Se(e,332),Se(e,334,Wn(1)),Se(e,335,qme({name:"XLDAPR",version:12e4,flags:3496657072})),Se(e,336),Se(e,339,Vme(1,"XLDAPR")),Se(e,52),Se(e,35,Wn(514)),Se(e,4096,Wn(0)),Se(e,4097,sn(1)),Se(e,36),Se(e,53),Se(e,340),Se(e,337,Gme(1,!0)),Se(e,51,zme([[1,0]])),Se(e,338),Se(e,333),e.end()}function Qme(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,l;return e.replace(fa,function(o){var c=Ye(o);switch(os(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==c.name&&(l=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),a}function fD(){var e=[mr];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Jme(e){var t=[];if(!e)return t;var r=1;return(e.match(fa)||[]).forEach(function(a){var s=Ye(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function Zme(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Xe(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function ehe(e,t,r){var a=[];return Vs(e,function(i,l,o){switch(o){case 63:a.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function the(e,t,r,a){if(!e)return e;var s=a||{},i=!1;Vs(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function rhe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Ao=1024;function mD(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Ee("xml",null,{"xmlns:v":Ma.v,"xmlns:o":Ma.o,"xmlns:x":Ma.x,"xmlns:mv":Ma.mv}).replace(/\/>/,">"),Ee("o:shapelayout",Ee("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ee("v:shapetype",[Ee("v:stroke",null,{joinstyle:"miter"}),Ee("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];Ao<e*1e3;)Ao+=1e3;return t.forEach(function(i){var l=Jt(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Ee("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ee("v:fill",c,o),d={on:"t",obscured:"t"};++Ao,s=s.concat(["<v:shape"+rf({id:"_x0000_s"+Ao,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ee("v:shadow",null,d),Ee("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",zr("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),zr("x:AutoFill","False"),zr("x:Row",String(l.r)),zr("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function s4(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(l){var o=Jt(l.ref);if(s?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},s?e[o.r][o.c]=i:e[l.ref]=i;var c=mt(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=rt(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var d={a:l.author,t:l.t,r:l.r,T:r};l.h&&(d.h=l.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}i.c.push(d)})}function ahe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Ye(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Jt(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&fN(f[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=m.h),a.push(u)}}}}),a}function hD(e){var t=[mr,Ee("comments",null,{xmlns:Yl[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=_t(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(_t(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(zr("t",_t(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;t.push(zr("t",_t(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function nhe(e,t){var r=[],a=!1,s={},i=0;return e.replace(fa,function(o,c){var u=Ye(o);switch(os(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function she(e,t,r){var a=[mr,Ee("ThreadedComments",null,{xmlns:Sr.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,l.ID=c.id,l.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),a.push(Ee("threadedComment",zr("text",l.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function ihe(e,t){var r=[],a=!1;return e.replace(fa,function(i){var l=Ye(i);switch(os(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function lhe(e){var t=[mr,Ee("personList",null,{xmlns:Sr.TCMNT,"xmlns:x":Yl[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(Ee("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function ohe(e){var t={};t.iauthor=e.read_shift(4);var r=eo(e);return t.rfx=r.s,t.ref=Xe(r.s),e.l+=16,t}function che(e,t){return t==null&&(t=be(36)),t.write_shift(4,e[1].iauthor),Hc(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var uhe=ca;function dhe(e){return Ir(e.slice(0,54))}function fhe(e,t){var r=[],a=[],s={},i=!1;return Vs(e,function(o,c,u){switch(u){case 632:a.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function mhe(e){var t=Ea(),r=[];return Se(t,628),Se(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Se(t,632,dhe(s.a)))})}),Se(t,631),Se(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Jt(a[0]),e:Jt(a[0])};Se(t,635,che([i,s])),s.t&&s.t.length>0&&Se(t,637,Fue(s)),Se(t,636),delete s.iauthor})}),Se(t,634),Se(t,629),t.end()}var hhe="application/vnd.ms-office.vbaProject";function xhe(e){var t=We.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");We.utils.cfb_add(t,s,e.FileIndex[a].content)}}),We.write(t)}function phe(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&We.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var xD=["xlsb","xlsm","xlam","biff8","xla"];function ghe(){return{"!type":"dialog"}}function yhe(){return{"!type":"dialog"}}function vhe(){return{"!type":"macro"}}function bhe(){return{"!type":"macro"}}var Vo=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=l.length>0?parseInt(l,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,s+(o?"":"$")+Kt(d)+(c?"":"$")+nr(u)}return function(s,i){return t=i,s.replace(e,r)}}(),pN=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,gN=function(){return function(t,r){return t.replace(pN,function(a,s,i,l,o,c){var u=aN(l)-(i?0:r.c),d=rN(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",m=u==0?"":i?u+1:"["+u+"]";return s+"R"+f+"C"+m})}}();function pD(e,t){return e.replace(pN,function(r,a,s,i,l,o){return a+(s=="$"?s+i:Kt(aN(i)+t.c))+(l=="$"?l+o:nr(rN(o)+t.r))})}function whe(e,t,r){var a=ya(t),s=a.s,i=Jt(r),l={r:i.r-s.r,c:i.c-s.c};return pD(e,l)}function Nhe(e){return e.length!=1}function i4(e){return e.replace(/_xlfn\./g,"")}function hr(e){e.l+=1}function Ei(e,t){var r=e.read_shift(t==1?1:2);return[r&16383,r>>14&1,r>>15&1]}function gD(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return yD(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),l=Ei(e,2),o=Ei(e,2);return{s:{r:s,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function yD(e){var t=Ei(e,2),r=Ei(e,2),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function jhe(e,t,r){if(r.biff<8)return yD(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Ei(e,2),l=Ei(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function vD(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return She(e);var a=e.read_shift(r&&r.biff==12?4:2),s=Ei(e,2);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function She(e){var t=Ei(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function khe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Che(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return _he(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:l,rRel:o}}function _he(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function Ohe(e,t,r){var a=(e[e.l++]&96)>>5,s=gD(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function Ehe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=gD(e,i,r);return[a,s,l]}function The(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function Ahe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function Phe(e,t,r){var a=(e[e.l++]&96)>>5,s=jhe(e,t-1,r);return[a,s]}function Dhe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function l4(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Ihe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Fhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Mhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Rhe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Lhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function bD(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function $he(e){return e.read_shift(2),bD(e)}function Bhe(e){return e.read_shift(2),bD(e)}function Uhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=vD(e,0,r);return[a,s]}function Whe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=Che(e,0,r);return[a,s]}function qhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=vD(e,0,r);return[a,s,i]}function Khe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Hxe[s],jD[s],a]}function zhe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Vhe(e);return[s,(i[0]===0?jD:Vxe)[i[1]]]}function Vhe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Hhe(e,t,r){e.l+=r&&r.biff==2?3:4}function Ghe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Xhe(e){return e.l++,Hs[e.read_shift(1)]}function Yhe(e){return e.l++,e.read_shift(2)}function Qhe(e){return e.l++,e.read_shift(1)!==0}function Jhe(e){return e.l++,ia(e)}function Zhe(e,t,r){return e.l++,Ff(e,t-1,r)}function exe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=cr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Hs[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ia(e);break;case 2:r[1]=to(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function txe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?eo:rp)(e));return s}function rxe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,l=[];i!=a&&(l[i]=[]);++i)for(var o=0;o!=s;++o)l[i][o]=exe(e,r.biff);return l}function axe(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function nxe(e,t,r){if(r.biff==5)return sxe(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function sxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function ixe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function lxe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function oxe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function cxe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var uxe=da,dxe=da,fxe=da;function Rf(e,t,r){return e.l+=2,[khe(e)]}function yN(e){return e.l+=6,[]}var mxe=Rf,hxe=yN,xxe=yN,pxe=Rf;function wD(e){return e.l+=2,[gr(e),e.read_shift(2)&1]}var gxe=Rf,yxe=wD,vxe=yN,bxe=Rf,wxe=Rf,Nxe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function jxe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),l=Nxe[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:a,c:s,C:i}}function Sxe(e){return e.l+=2,[e.read_shift(4)]}function kxe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Cxe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function _xe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Oxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Exe(e){return e.l+=4,[0,0]}var o4={1:{n:"PtgExp",f:Ghe},2:{n:"PtgTbl",f:fxe},3:{n:"PtgAdd",f:hr},4:{n:"PtgSub",f:hr},5:{n:"PtgMul",f:hr},6:{n:"PtgDiv",f:hr},7:{n:"PtgPower",f:hr},8:{n:"PtgConcat",f:hr},9:{n:"PtgLt",f:hr},10:{n:"PtgLe",f:hr},11:{n:"PtgEq",f:hr},12:{n:"PtgGe",f:hr},13:{n:"PtgGt",f:hr},14:{n:"PtgNe",f:hr},15:{n:"PtgIsect",f:hr},16:{n:"PtgUnion",f:hr},17:{n:"PtgRange",f:hr},18:{n:"PtgUplus",f:hr},19:{n:"PtgUminus",f:hr},20:{n:"PtgPercent",f:hr},21:{n:"PtgParen",f:hr},22:{n:"PtgMissArg",f:hr},23:{n:"PtgStr",f:Zhe},26:{n:"PtgSheet",f:kxe},27:{n:"PtgEndSheet",f:Cxe},28:{n:"PtgErr",f:Xhe},29:{n:"PtgBool",f:Qhe},30:{n:"PtgInt",f:Yhe},31:{n:"PtgNum",f:Jhe},32:{n:"PtgArray",f:Dhe},33:{n:"PtgFunc",f:Khe},34:{n:"PtgFuncVar",f:zhe},35:{n:"PtgName",f:axe},36:{n:"PtgRef",f:Uhe},37:{n:"PtgArea",f:Ohe},38:{n:"PtgMemArea",f:ixe},39:{n:"PtgMemErr",f:uxe},40:{n:"PtgMemNoMem",f:dxe},41:{n:"PtgMemFunc",f:lxe},42:{n:"PtgRefErr",f:oxe},43:{n:"PtgAreaErr",f:The},44:{n:"PtgRefN",f:Whe},45:{n:"PtgAreaN",f:Phe},46:{n:"PtgMemAreaN",f:_xe},47:{n:"PtgMemNoMemN",f:Oxe},57:{n:"PtgNameX",f:nxe},58:{n:"PtgRef3d",f:qhe},59:{n:"PtgArea3d",f:Ehe},60:{n:"PtgRefErr3d",f:cxe},61:{n:"PtgAreaErr3d",f:Ahe},255:{}},Txe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Axe={1:{n:"PtgElfLel",f:wD},2:{n:"PtgElfRw",f:bxe},3:{n:"PtgElfCol",f:mxe},6:{n:"PtgElfRwV",f:wxe},7:{n:"PtgElfColV",f:pxe},10:{n:"PtgElfRadical",f:gxe},11:{n:"PtgElfRadicalS",f:vxe},13:{n:"PtgElfColS",f:hxe},15:{n:"PtgElfColSV",f:xxe},16:{n:"PtgElfRadicalLel",f:yxe},25:{n:"PtgList",f:jxe},29:{n:"PtgSxName",f:Sxe},255:{}},Pxe={0:{n:"PtgAttrNoop",f:Exe},1:{n:"PtgAttrSemi",f:Lhe},2:{n:"PtgAttrIf",f:Mhe},4:{n:"PtgAttrChoose",f:Ihe},8:{n:"PtgAttrGoto",f:Fhe},16:{n:"PtgAttrSum",f:Hhe},32:{n:"PtgAttrBaxcel",f:l4},33:{n:"PtgAttrBaxcel",f:l4},64:{n:"PtgAttrSpace",f:$he},65:{n:"PtgAttrSpaceSemi",f:Bhe},128:{n:"PtgAttrIfError",f:Rhe},255:{}};function Lf(e,t,r,a){if(a.biff<8)return da(e,t);for(var s=e.l+t,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=rxe(e,0,a),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=txe(e,r[l][1],a),i.push(r[l][2]);break;case"PtgExp":a&&a.biff==12&&(r[l][1][1]=e.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=s-e.l,t!==0&&i.push(da(e,t)),i}function $f(e,t,r){for(var a=e.l+t,s,i,l=[];a!=e.l;)t=a-e.l,i=e[e.l],s=o4[i]||o4[Txe[i]],(i===24||i===25)&&(s=(i===24?Axe:Pxe)[e[e.l+1]]),!s||!s.f?da(e,t):l.push([s.n,s.f(e,t,r)]);return l}function Dxe(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var l=a[i];if(l)switch(l[0]){case 2:s.push('"'+l[1].replace(/"/g,'""')+'"');break;default:s.push(l[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Ixe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Fxe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function ND(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function c4(e,t,r){var a=ND(e,t,r);return a=="#REF"?a:Fxe(a,r)}function ta(e,t,r,a,s){var i=s&&s.biff||8,l={s:{c:0,r:0},e:{c:0,r:0}},o=[],c,u,d,f=0,m=0,p,y="";if(!e[0]||!e[0][0])return"";for(var h=-1,v="",w=0,S=e[0].length;w<S;++w){var b=e[0][w];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),h>=0){switch(e[0][h][1][0]){case 0:v=ar(" ",e[0][h][1][1]);break;case 1:v=ar("\r",e[0][h][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}u=u+v,h=-1}o.push(u+Ixe[b[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Uu(b[1][1],l,s),o.push(Wu(d,i));break;case"PtgRefN":d=r?Uu(b[1][1],r,s):b[1][1],o.push(Wu(d,i));break;case"PtgRef3d":f=b[1][1],d=Uu(b[1][2],l,s),y=c4(a,f,s),o.push(y+"!"+Wu(d,i));break;case"PtgFunc":case"PtgFuncVar":var x=b[1][0],g=b[1][1];x||(x=0),x&=127;var N=x==0?[]:o.slice(-x);o.length-=x,g==="User"&&(g=N.shift()),o.push(g+"("+N.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":p=L_(b[1][1],r?{s:r}:l,s),o.push(jg(p,s));break;case"PtgArea":p=L_(b[1][1],l,s),o.push(jg(p,s));break;case"PtgArea3d":f=b[1][1],p=b[1][2],y=c4(a,f,s),o.push(y+"!"+jg(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=b[1][2];var j=(a.names||[])[m-1]||(a[0]||[])[m],C=j?j.Name:"SH33TJSNAME"+String(m);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var _=b[1][1];m=b[1][2];var T;if(s.biff<=5)_<0&&(_=-_),a[_]&&(T=a[_][m]);else{var E="";if(((a[_]||[])[0]||[])[0]==14849||(((a[_]||[])[0]||[])[0]==1025?a[_][m]&&a[_][m].itab>0&&(E=a.SheetNames[a[_][m].itab-1]+"!"):E=a.SheetNames[m-1]+"!"),a[_]&&a[_][m])E+=a[_][m].Name;else if(a[0]&&a[0][m])E+=a[0][m].Name;else{var k=(ND(a,_,s)||"").split(";;");k[m-1]?E=k[m-1]:E+="SH33TJSERRX"}o.push(E);break}T||(T={Name:"SH33TJSERRY"}),o.push(T.Name);break;case"PtgParen":var A="(",P=")";if(h>=0){switch(v="",e[0][h][1][0]){case 2:A=ar(" ",e[0][h][1][1])+A;break;case 3:A=ar("\r",e[0][h][1][1])+A;break;case 4:P=ar(" ",e[0][h][1][1])+P;break;case 5:P=ar("\r",e[0][h][1][1])+P;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}h=-1}o.push(A+o.pop()+P);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var F={c:r.c,r:r.r};if(a.sharedf[Xe(d)]){var U=a.sharedf[Xe(d)];o.push(ta(U,l,F,a,s))}else{var W=!1;for(c=0;c!=a.arrayf.length;++c)if(u=a.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(ta(u[1],l,F,a,s)),W=!0;break}W||o.push(b[1])}break;case"PtgArray":o.push("{"+Dxe(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":h=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&h>=0&&K.indexOf(e[0][w][0])==-1){b=e[0][h];var B=!0;switch(b[1][0]){case 4:B=!1;case 0:v=ar(" ",b[1][1]);break;case 5:B=!1;case 1:v=ar("\r",b[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((B?v:"")+o.pop()+(B?"":v)),h=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Mxe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,l=e.read_shift(s);if(l==65535)return[[],da(e,t-2)];var o=$f(e,l,r);return t!==l+s&&(i=Lf(e,t-l-s,o,r)),e.l=a,[o,i]}function Rxe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,l=e.read_shift(s);if(l==65535)return[[],da(e,t-2)];var o=$f(e,l,r);return t!==l+s&&(i=Lf(e,t-l-s,o,r)),e.l=a,[o,i]}function Lxe(e,t,r,a){var s=e.l+t,i=$f(e,a,r),l;return s!==e.l&&(l=Lf(e,s-e.l,i,r)),[i,l]}function $xe(e,t,r){var a=e.l+t,s,i=e.read_shift(2),l=$f(e,i,r);return i==65535?[[],da(e,t-2)]:(t!==i+2&&(s=Lf(e,a-i-2,l,r)),[l,s])}function Bxe(e){var t;if(js(e,e.l+6)!==65535)return[ia(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Uxe(e){if(e==null){var t=be(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Ll(e);return Ll(0)}function Og(e,t,r){var a=e.l+t,s=cs(e);r.biff==2&&++e.l;var i=Bxe(e),l=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=Rxe(e,a-e.l,r);return{cell:s,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function Wxe(e,t,r,a,s){var i=Bl(t,r,s),l=Uxe(e.v),o=be(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=be(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Dr([i,l,o,u]);return f}function ap(e,t,r){var a=e.read_shift(4),s=$f(e,a,r),i=e.read_shift(4),l=i>0?Lf(e,i,s,r):null;return[s,l]}var qxe=ap,np=ap,Kxe=ap,zxe=ap,Vxe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},jD={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Hxe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function u4(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Gxe(e){var t="of:="+e.replace(pN,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Eg(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Xxe(e){return e.replace(/\./,"!")}var Ku={},Ho={},zu=typeof Map<"u";function vN(e,t,r){var a=0,s=e.length;if(r){if(zu?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=zu?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(zu?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function sp(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(sa=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=of(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=$h(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function wl(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Hi(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){as(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function SD(e,t,r,a,s,i){try{a.cellNF&&(e.z=ze[t])}catch(o){if(a.WTF)throw o}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=zt(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(ze[t]==null&&as(Vce[t]||"General",t),e.t==="e")e.w=e.w||Hs[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ef(e.v);else if(e.t==="d"){var l=_r(e.v);(l|0)===l?e.w=l.toString(10):e.w=ef(l)}else{if(e.v===void 0)return"";e.w=Ml(e.v,Ho)}else e.t==="d"?e.w=Ha(t,_r(e.v),Ho):e.w=Ha(t,e.v,Ho)}catch(o){if(a.WTF)throw o}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Lh(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Lh(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(a.WTF&&i.Fills)throw o}}}function Yxe(e,t,r){if(e&&e["!ref"]){var a=mt(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Qxe(e,t){var r=mt(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=rt(r))}var Jxe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Zxe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,epe=/<(?:\w:)?hyperlink [^>]*>/mg,tpe=/"(\w*:\w*)"/,rpe=/<(?:\w:)?col\b[^>]*[\/]?>/g,ape=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,npe=/<(?:\w:)?pageMargins[^>]*\/>/g,kD=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,spe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ipe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function lpe(e,t,r,a,s,i,l){if(!e)return e;a||(a={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Zxe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var m=u.match(kD);m?bN(m[0],o,s,r):(m=u.match(spe))&&cpe(m[0],m[1]||"",o,s,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var y=u.slice(p,p+50).match(tpe);y&&Qxe(o,y[1])}var h=u.match(ipe);h&&h[1]&&Npe(h[1],s);var v=[];if(t.cellStyles){var w=u.match(rpe);w&&gpe(v,w)}f&&kpe(f[1],o,t,c,i,l);var S=d.match(ape);S&&(o["!autofilter"]=vpe(S[0]));var b=[],x=d.match(Jxe);if(x)for(p=0;p!=x.length;++p)b[p]=mt(x[p].slice(x[p].indexOf('"')+1));var g=d.match(epe);g&&hpe(o,g,a);var N=d.match(npe);if(N&&(o["!margins"]=xpe(Ye(N[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=rt(c)),t.sheetRows>0&&o["!ref"]){var j=mt(o["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),o["!fullref"]=o["!ref"],o["!ref"]=rt(j))}return v.length>0&&(o["!cols"]=v),b.length>0&&(o["!merges"]=b),o}function ope(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+rt(e[r])+'"/>';return t+"</mergeCells>"}function bN(e,t,r,a){var s=Ye(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=yt(At(s.codeName)))}function cpe(e,t,r,a,s){bN(e.slice(0,e.indexOf(">")),r,a,s)}function upe(e,t,r,a,s){var i=!1,l={},o=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,l.codeName=Jn(_t(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Ee("outlinePr",null,u)}!i&&!o||(s[s.length]=Ee("sheetPr",o,l))}var dpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],fpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function mpe(e){var t={sheet:1};return dpe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),fpe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=mN(e.password).toString(16).toUpperCase()),Ee("sheetProtection",null,t)}function hpe(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=Ye(At(t[s]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+yt(i.location))):(i.Target="#"+yt(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=mt(i.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Xe({c:u,r:c});a?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=i)}}}function xpe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function ppe(e){return wl(e),Ee("pageMargins",null,e)}function gpe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=Ye(t[a],!0);s.hidden&&(s.hidden=Wt(s.hidden));var i=parseInt(s.min,10)-1,l=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,hN(s.width)),Oi(s);i<=l;)e[i++]=It(s)}}function ype(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=Ee("col",null,sp(s,a)));return r[r.length]="</cols>",r.join("")}function vpe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function bpe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:rt(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=ya(s);l.s.r==l.e.r&&(l.e.r=ya(t["!ref"]).e.r,s=rt(l));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),Ee("autoFilter",null,{ref:s})}var wpe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Npe(e,t){t.Views||(t.Views=[{}]),(e.match(wpe)||[]).forEach(function(r,a){var s=Ye(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),Wt(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function jpe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),Ee("sheetViews",Ee("sheetView",null,s),{})}function Spe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Hs[e.v];break;case"d":a&&a.cellDates?s=zt(e.v,-1).toISOString():(e=It(e),e.t="n",s=""+(e.v=_r(zt(e.v)))),typeof e.z>"u"&&(e.z=ze[14]);break;default:s=e.v;break}var o=zr("v",_t(s)),c={r:t},u=Hi(a.cellXfs,e,a);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){o=zr("v",""+vN(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ee("f",_t(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Ee("c",o,c)}var kpe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=tf("v"),l=tf("f");return function(c,u,d,f,m,p){for(var y=0,h="",v=[],w=[],S=0,b=0,x=0,g="",N,j,C=0,_=0,T,E,k=0,A=0,P=Array.isArray(p.CellXf),F,U=[],W=[],K=Array.isArray(u),B=[],ee={},oe=!1,R=!!d.sheetStubs,V=c.split(t),X=0,J=V.length;X!=J;++X){h=V[X].trim();var Z=h.length;if(Z!==0){var le=0;e:for(y=0;y<Z;++y)switch(h[y]){case">":if(h[y-1]!="/"){++y;break e}if(d&&d.cellStyles){if(j=Ye(h.slice(le,y),!0),C=j.r!=null?parseInt(j.r,10):C+1,_=-1,d.sheetRows&&d.sheetRows<C)continue;ee={},oe=!1,j.ht&&(oe=!0,ee.hpt=parseFloat(j.ht),ee.hpx=_c(ee.hpt)),j.hidden=="1"&&(oe=!0,ee.hidden=!0),j.outlineLevel!=null&&(oe=!0,ee.level=+j.outlineLevel),oe&&(B[C-1]=ee)}break;case"<":le=y;break}if(le>=y)break;if(j=Ye(h.slice(le,y),!0),C=j.r!=null?parseInt(j.r,10):C+1,_=-1,!(d.sheetRows&&d.sheetRows<C)){f.s.r>C-1&&(f.s.r=C-1),f.e.r<C-1&&(f.e.r=C-1),d&&d.cellStyles&&(ee={},oe=!1,j.ht&&(oe=!0,ee.hpt=parseFloat(j.ht),ee.hpx=_c(ee.hpt)),j.hidden=="1"&&(oe=!0,ee.hidden=!0),j.outlineLevel!=null&&(oe=!0,ee.level=+j.outlineLevel),oe&&(B[C-1]=ee)),v=h.slice(y).split(e);for(var xe=0;xe!=v.length&&v[xe].trim().charAt(0)=="<";++xe);for(v=v.slice(xe),y=0;y!=v.length;++y)if(h=v[y].trim(),h.length!==0){if(w=h.match(r),S=y,b=0,x=0,h="<c "+(h.slice(0,1)=="<"?">":"")+h,w!=null&&w.length===2){for(S=0,g=w[1],b=0;b!=g.length&&!((x=g.charCodeAt(b)-64)<1||x>26);++b)S=26*S+x;--S,_=S}else++_;for(b=0;b!=h.length&&h.charCodeAt(b)!==62;++b);if(++b,j=Ye(h.slice(0,b),!0),j.r||(j.r=Xe({r:C-1,c:_})),g=h.slice(b),N={t:""},(w=g.match(i))!=null&&w[1]!==""&&(N.v=yt(w[1])),d.cellFormula){if((w=g.match(l))!=null&&w[1]!==""){if(N.f=yt(At(w[1])).replace(/\r\n/g,`
`),d.xlfn||(N.f=i4(N.f)),w[0].indexOf('t="array"')>-1)N.F=(g.match(s)||[])[1],N.F.indexOf(":")>-1&&U.push([mt(N.F),N.F]);else if(w[0].indexOf('t="shared"')>-1){E=Ye(w[0]);var ae=yt(At(w[1]));d.xlfn||(ae=i4(ae)),W[parseInt(E.si,10)]=[E,ae,j.r]}}else(w=g.match(/<f[^>]*\/>/))&&(E=Ye(w[0]),W[E.si]&&(N.f=whe(W[E.si][1],W[E.si][2],j.r)));var M=Jt(j.r);for(b=0;b<U.length;++b)M.r>=U[b][0].s.r&&M.r<=U[b][0].e.r&&M.c>=U[b][0].s.c&&M.c<=U[b][0].e.c&&(N.F=U[b][1])}if(j.t==null&&N.v===void 0)if(N.f||N.F)N.v=0,N.t="n";else if(R)N.t="z";else continue;else N.t=j.t||"n";switch(f.s.c>_&&(f.s.c=_),f.e.c<_&&(f.e.c=_),N.t){case"n":if(N.v==""||N.v==null){if(!R)continue;N.t="z"}else N.v=parseFloat(N.v);break;case"s":if(typeof N.v>"u"){if(!R)continue;N.t="z"}else T=Ku[parseInt(N.v,10)],N.v=T.t,N.r=T.r,d.cellHTML&&(N.h=T.h);break;case"str":N.t="s",N.v=N.v!=null?At(N.v):"",d.cellHTML&&(N.h=Gw(N.v));break;case"inlineStr":w=g.match(a),N.t="s",w!=null&&(T=fN(w[1]))?(N.v=T.t,d.cellHTML&&(N.h=T.h)):N.v="";break;case"b":N.v=Wt(N.v);break;case"d":d.cellDates?N.v=zt(N.v,1):(N.v=_r(zt(N.v,1)),N.t="n");break;case"e":(!d||d.cellText!==!1)&&(N.w=N.v),N.v=_6[N.v];break}if(k=A=0,F=null,P&&j.s!==void 0&&(F=p.CellXf[j.s],F!=null&&(F.numFmtId!=null&&(k=F.numFmtId),d.cellStyles&&F.fillId!=null&&(A=F.fillId))),SD(N,k,A,d,m,p),d.cellDates&&P&&N.t=="n"&&Xl(ze[k])&&(N.t="d",N.v=ep(N.v)),j.cm&&d.xlmeta){var G=(d.xlmeta.Cell||[])[+j.cm-1];G&&G.type=="XLDAPR"&&(N.D=!0)}if(K){var D=Jt(j.r);u[D.r]||(u[D.r]=[]),u[D.r][D.c]=N}else u[j.r]=N}}}}B.length>0&&(u["!rows"]=B)}}();function Cpe(e,t,r,a){var s=[],i=[],l=mt(e["!ref"]),o="",c,u="",d=[],f=0,m=0,p=e["!rows"],y=Array.isArray(e),h={r:u},v,w=-1;for(m=l.s.c;m<=l.e.c;++m)d[m]=Kt(m);for(f=l.s.r;f<=l.e.r;++f){for(i=[],u=nr(f),m=l.s.c;m<=l.e.c;++m){c=d[m]+u;var S=y?(e[f]||[])[m]:e[c];S!==void 0&&(o=Spe(S,c,e,t))!=null&&i.push(o)}(i.length>0||p&&p[f])&&(h={r:u},p&&p[f]&&(v=p[f],v.hidden&&(h.hidden=1),w=-1,v.hpx?w=cf(v.hpx):v.hpt&&(w=v.hpt),w>-1&&(h.ht=w,h.customHeight=1),v.level&&(h.outlineLevel=v.level)),s[s.length]=Ee("row",i.join(""),h))}if(p)for(;f<p.length;++f)p&&p[f]&&(h={r:f+1},v=p[f],v.hidden&&(h.hidden=1),w=-1,v.hpx?w=cf(v.hpx):v.hpt&&(w=v.hpt),w>-1&&(h.ht=w,h.customHeight=1),v.level&&(h.outlineLevel=v.level),s[s.length]=Ee("row","",h));return s.join("")}function CD(e,t,r,a){var s=[mr,Ee("worksheet",null,{xmlns:Yl[0],"xmlns:r":Sr.r})],i=r.SheetNames[e],l=0,o="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=mt(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=rt(d)}a||(a={}),c["!comments"]=[];var f=[];upe(c,r,e,t,s),s[s.length]=Ee("dimension",null,{ref:u}),s[s.length]=jpe(c,t,e,r),t.sheetFormat&&(s[s.length]=Ee("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=ype(c,c["!cols"])),s[l=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=Cpe(c,t),o.length>0&&(s[s.length]=o)),s.length>l+1&&(s[s.length]="</sheetData>",s[l]=s[l].replace("/>",">")),c["!protect"]&&(s[s.length]=mpe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=bpe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=ope(c["!merges"]));var m=-1,p,y=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(h){h[1].Target&&(p={ref:h[0]},h[1].Target.charAt(0)!="#"&&(y=Ct(a,-1,_t(h[1].Target).replace(/#.*$/,""),lt.HLINK),p["r:id"]="rId"+y),(m=h[1].Target.indexOf("#"))>-1&&(p.location=_t(h[1].Target.slice(m+1))),h[1].Tooltip&&(p.tooltip=_t(h[1].Tooltip)),s[s.length]=Ee("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=ppe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=zr("ignoredErrors",Ee("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(y=Ct(a,-1,"../drawings/drawing"+(e+1)+".xml",lt.DRAW),s[s.length]=Ee("drawing",null,{"r:id":"rId"+y}),c["!drawing"]=f),c["!comments"].length>0&&(y=Ct(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",lt.VML),s[s.length]=Ee("legacyDrawing",null,{"r:id":"rId"+y}),c["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function _pe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function Ope(e,t,r){var a=be(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=cf(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var l=0;s.level&&(l|=s.level),s.hidden&&(l|=16),(s.hpx||s.hpt)&&(l|=32),a.write_shift(1,l),a.write_shift(1,0);var o=0,c=a.l;a.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,m=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var y=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Xe(u)];y&&(f<0&&(f=p),m=p)}f<0||(++o,a.write_shift(4,f),a.write_shift(4,m))}var h=a.l;return a.l=c,a.write_shift(4,o),a.l=h,a.length>a.l?a.slice(0,a.l):a}function Epe(e,t,r,a){var s=Ope(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&Se(e,0,s)}var Tpe=eo,Ape=Hc;function Ppe(){}function Dpe(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Mue(e),r}function Ipe(e,t,r){r==null&&(r=be(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return Fh({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),N6(e,r),r.slice(0,r.l)}function Fpe(e){var t=jn(e);return[t]}function Mpe(e,t,r){return r==null&&(r=be(8)),Ql(t,r)}function Rpe(e){var t=Jl(e);return[t]}function Lpe(e,t,r){return r==null&&(r=be(4)),Zl(t,r)}function $pe(e){var t=jn(e),r=e.read_shift(1);return[t,r,"b"]}function Bpe(e,t,r){return r==null&&(r=be(9)),Ql(t,r),r.write_shift(1,e.v?1:0),r}function Upe(e){var t=Jl(e),r=e.read_shift(1);return[t,r,"b"]}function Wpe(e,t,r){return r==null&&(r=be(5)),Zl(t,r),r.write_shift(1,e.v?1:0),r}function qpe(e){var t=jn(e),r=e.read_shift(1);return[t,r,"e"]}function Kpe(e,t,r){return r==null&&(r=be(9)),Ql(t,r),r.write_shift(1,e.v),r}function zpe(e){var t=Jl(e),r=e.read_shift(1);return[t,r,"e"]}function Vpe(e,t,r){return r==null&&(r=be(8)),Zl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Hpe(e){var t=jn(e),r=e.read_shift(4);return[t,r,"s"]}function Gpe(e,t,r){return r==null&&(r=be(12)),Ql(t,r),r.write_shift(4,t.v),r}function Xpe(e){var t=Jl(e),r=e.read_shift(4);return[t,r,"s"]}function Ype(e,t,r){return r==null&&(r=be(8)),Zl(t,r),r.write_shift(4,t.v),r}function Qpe(e){var t=jn(e),r=ia(e);return[t,r,"n"]}function Jpe(e,t,r){return r==null&&(r=be(16)),Ql(t,r),Ll(e.v,r),r}function _D(e){var t=Jl(e),r=ia(e);return[t,r,"n"]}function Zpe(e,t,r){return r==null&&(r=be(12)),Zl(t,r),Ll(e.v,r),r}function ege(e){var t=jn(e),r=lN(e);return[t,r,"n"]}function tge(e,t,r){return r==null&&(r=be(12)),Ql(t,r),j6(e.v,r),r}function rge(e){var t=Jl(e),r=lN(e);return[t,r,"n"]}function age(e,t,r){return r==null&&(r=be(8)),Zl(t,r),j6(e.v,r),r}function nge(e){var t=jn(e),r=nN(e);return[t,r,"is"]}function sge(e){var t=jn(e),r=ca(e);return[t,r,"str"]}function ige(e,t,r){return r==null&&(r=be(12+4*e.v.length)),Ql(t,r),Ir(e.v,r),r.length>r.l?r.slice(0,r.l):r}function lge(e){var t=Jl(e),r=ca(e);return[t,r,"str"]}function oge(e,t,r){return r==null&&(r=be(8+4*e.v.length)),Zl(t,r),Ir(e.v,r),r.length>r.l?r.slice(0,r.l):r}function cge(e,t,r){var a=e.l+t,s=jn(e);s.r=r["!row"];var i=e.read_shift(1),l=[s,i,"b"];if(r.cellFormula){e.l+=2;var o=np(e,a-e.l,r);l[3]=ta(o,null,s,r.supbooks,r)}else e.l=a;return l}function uge(e,t,r){var a=e.l+t,s=jn(e);s.r=r["!row"];var i=e.read_shift(1),l=[s,i,"e"];if(r.cellFormula){e.l+=2;var o=np(e,a-e.l,r);l[3]=ta(o,null,s,r.supbooks,r)}else e.l=a;return l}function dge(e,t,r){var a=e.l+t,s=jn(e);s.r=r["!row"];var i=ia(e),l=[s,i,"n"];if(r.cellFormula){e.l+=2;var o=np(e,a-e.l,r);l[3]=ta(o,null,s,r.supbooks,r)}else e.l=a;return l}function fge(e,t,r){var a=e.l+t,s=jn(e);s.r=r["!row"];var i=ca(e),l=[s,i,"str"];if(r.cellFormula){e.l+=2;var o=np(e,a-e.l,r);l[3]=ta(o,null,s,r.supbooks,r)}else e.l=a;return l}var mge=eo,hge=Hc;function xge(e,t){return t==null&&(t=be(4)),t.write_shift(4,e),t}function pge(e,t){var r=e.l+t,a=eo(e),s=sN(e),i=ca(e),l=ca(e),o=ca(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:o};return l&&(c.Tooltip=l),c}function gge(e,t){var r=be(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Hc({s:Jt(e[0]),e:Jt(e[0])},r),iN("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return Ir(s||"",r),Ir(e[1].Tooltip||"",r),Ir("",r),r.slice(0,r.l)}function yge(){}function vge(e,t,r){var a=e.l+t,s=S6(e),i=e.read_shift(1),l=[s];if(l[2]=i,r.cellFormula){var o=qxe(e,a-e.l,r);l[1]=o}else e.l=a;return l}function bge(e,t,r){var a=e.l+t,s=eo(e),i=[s];if(r.cellFormula){var l=zxe(e,a-e.l,r);i[1]=l,e.l=a}else e.l=a;return i}function wge(e,t,r){r==null&&(r=be(18));var a=sp(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var OD=["left","right","top","bottom","header","footer"];function Nge(e){var t={};return OD.forEach(function(r){t[r]=ia(e)}),t}function jge(e,t){return t==null&&(t=be(6*8)),wl(e),OD.forEach(function(r){Ll(e[r],t)}),t}function Sge(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function kge(e,t,r){r==null&&(r=be(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Cge(e){var t=be(24);return t.write_shift(4,4),t.write_shift(4,1),Hc(e,t),t}function _ge(e,t){return t==null&&(t=be(16*4+2)),t.write_shift(2,e.password?mN(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Oge(){}function Ege(){}function Tge(e,t,r,a,s,i,l){if(!e)return e;var o=t||{};a||(a={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,p,y,h,v,w,S,b,x,g,N=[];o.biff=12,o["!row"]=0;var j=0,C=!1,_=[],T={},E=o.supbooks||s.supbooks||[[]];if(E.sharedf=T,E.arrayf=_,E.SheetNames=s.SheetNames||s.Sheets.map(function(K){return K.name}),!o.supbooks&&(o.supbooks=E,s.Names))for(var k=0;k<s.Names.length;++k)E[0][k+1]=s.Names[k];var A=[],P=[],F=!1;uf[16]={n:"BrtShortReal",f:_D};var U;if(Vs(e,function(B,ee,oe){if(!m)switch(oe){case 148:u=B;break;case 0:p=B,o.sheetRows&&o.sheetRows<=p.r&&(m=!0),x=nr(v=p.r),o["!row"]=p.r,(B.hidden||B.hpt||B.level!=null)&&(B.hpt&&(B.hpx=_c(B.hpt)),P[B.r]=B);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:B[2]},B[2]){case"n":y.v=B[1];break;case"s":b=Ku[B[1]],y.v=b.t,y.r=b.r;break;case"b":y.v=!!B[1];break;case"e":y.v=B[1],o.cellText!==!1&&(y.w=Hs[y.v]);break;case"str":y.t="s",y.v=B[1];break;case"is":y.t="s",y.v=B[1].t;break}if((h=l.CellXf[B[0].iStyleRef])&&SD(y,h.numFmtId,null,o,i,l),w=B[0].c==-1?w+1:B[0].c,o.dense?(c[v]||(c[v]=[]),c[v][w]=y):c[Kt(w)+x]=y,o.cellFormula){for(C=!1,j=0;j<_.length;++j){var R=_[j];p.r>=R[0].s.r&&p.r<=R[0].e.r&&w>=R[0].s.c&&w<=R[0].e.c&&(y.F=rt(R[0]),C=!0)}!C&&B.length>3&&(y.f=B[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>w&&(d.s.c=w),d.e.r<p.r&&(d.e.r=p.r),d.e.c<w&&(d.e.c=w),o.cellDates&&h&&y.t=="n"&&Xl(ze[h.numFmtId])){var V=ui(y.v);V&&(y.t="d",y.v=new Date(V.y,V.m-1,V.d,V.H,V.M,V.S,V.u))}U&&(U.type=="XLDAPR"&&(y.D=!0),U=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;y={t:"z",v:void 0},w=B[0].c==-1?w+1:B[0].c,o.dense?(c[v]||(c[v]=[]),c[v][w]=y):c[Kt(w)+x]=y,d.s.r>p.r&&(d.s.r=p.r),d.s.c>w&&(d.s.c=w),d.e.r<p.r&&(d.e.r=p.r),d.e.c<w&&(d.e.c=w),U&&(U.type=="XLDAPR"&&(y.D=!0),U=void 0);break;case 176:N.push(B);break;case 49:U=((o.xlmeta||{}).Cell||[])[B-1];break;case 494:var X=a["!id"][B.relId];for(X?(B.Target=X.Target,B.loc&&(B.Target+="#"+B.loc),B.Rel=X):B.relId==""&&(B.Target="#"+B.loc),v=B.rfx.s.r;v<=B.rfx.e.r;++v)for(w=B.rfx.s.c;w<=B.rfx.e.c;++w)o.dense?(c[v]||(c[v]=[]),c[v][w]||(c[v][w]={t:"z",v:void 0}),c[v][w].l=B):(S=Xe({c:w,r:v}),c[S]||(c[S]={t:"z",v:void 0}),c[S].l=B);break;case 426:if(!o.cellFormula)break;_.push(B),g=o.dense?c[v][w]:c[Kt(w)+x],g.f=ta(B[1],d,{r:p.r,c:w},E,o),g.F=rt(B[0]);break;case 427:if(!o.cellFormula)break;T[Xe(B[0].s)]=B[1],g=o.dense?c[v][w]:c[Kt(w)+x],g.f=ta(B[1],d,{r:p.r,c:w},E,o);break;case 60:if(!o.cellStyles)break;for(;B.e>=B.s;)A[B.e--]={width:B.w/256,hidden:!!(B.flags&1),level:B.level},F||(F=!0,hN(B.w/256)),Oi(A[B.e+1]);break;case 161:c["!autofilter"]={ref:rt(B)};break;case 476:c["!margins"]=B;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),B.name&&(s.Sheets[r].CodeName=B.name),(B.above||B.left)&&(c["!outline"]={above:B.above,left:B.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),B.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+oe.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=rt(u||d)),o.sheetRows&&c["!ref"]){var W=mt(c["!ref"]);o.sheetRows<=+W.e.r&&(W.e.r=o.sheetRows-1,W.e.r>d.e.r&&(W.e.r=d.e.r),W.e.r<W.s.r&&(W.s.r=W.e.r),W.e.c>d.e.c&&(W.e.c=d.e.c),W.e.c<W.s.c&&(W.s.c=W.e.c),c["!fullref"]=c["!ref"],c["!ref"]=rt(W))}return N.length>0&&(c["!merges"]=N),A.length>0&&(c["!cols"]=A),P.length>0&&(c["!rows"]=P),c}function Age(e,t,r,a,s,i,l){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=It(t),t.z=t.z||ze[14],t.v=_r(zt(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:a};switch(c.s=Hi(s.cellXfs,t,s),t.l&&i["!links"].push([Xe(c),t.l]),t.c&&i["!comments"].push([Xe(c),t.c]),t.t){case"s":case"str":return s.bookSST?(o=vN(s.Strings,t.v,s.revStrings),c.t="s",c.v=o,l?Se(e,18,Ype(t,c)):Se(e,7,Gpe(t,c))):(c.t="str",l?Se(e,17,oge(t,c)):Se(e,6,ige(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?Se(e,13,age(t,c)):Se(e,2,tge(t,c)):l?Se(e,16,Zpe(t,c)):Se(e,5,Jpe(t,c)),!0;case"b":return c.t="b",l?Se(e,15,Wpe(t,c)):Se(e,4,Bpe(t,c)),!0;case"e":return c.t="e",l?Se(e,14,Vpe(t,c)):Se(e,3,Kpe(t,c)),!0}return l?Se(e,12,Lpe(t,c)):Se(e,1,Mpe(t,c)),!0}function Pge(e,t,r,a){var s=mt(t["!ref"]||"A1"),i,l="",o=[];Se(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){l=nr(d),Epe(e,t,s,d);var f=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(o[m]=Kt(m)),i=o[m]+l;var p=c?(t[d]||[])[m]:t[i];if(!p){f=!1;continue}f=Age(e,p,d,m,a,t,f)}}Se(e,146)}function Dge(e,t){!t||!t["!merges"]||(Se(e,177,xge(t["!merges"].length)),t["!merges"].forEach(function(r){Se(e,176,hge(r))}),Se(e,178))}function Ige(e,t){!t||!t["!cols"]||(Se(e,390),t["!cols"].forEach(function(r,a){r&&Se(e,60,wge(a,r))}),Se(e,391))}function Fge(e,t){!t||!t["!ref"]||(Se(e,648),Se(e,649,Cge(mt(t["!ref"]))),Se(e,650))}function Mge(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Ct(r,-1,a[1].Target.replace(/#.*$/,""),lt.HLINK);Se(e,494,gge(a,s))}}),delete t["!links"]}function Rge(e,t,r,a){if(t["!comments"].length>0){var s=Ct(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",lt.VML);Se(e,551,iN("rId"+s)),t["!legacy"]=s}}function Lge(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:rt(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,o=ya(i);o.s.r==o.e.r&&(o.e.r=ya(t["!ref"]).e.r,i=rt(o));for(var c=0;c<l.length;++c){var u=l[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Se(e,161,Hc(mt(i))),Se(e,162)}}function $ge(e,t,r){Se(e,133),Se(e,137,kge(t,r)),Se(e,138),Se(e,134)}function Bge(e,t){t["!protect"]&&Se(e,535,_ge(t["!protect"]))}function Uge(e,t,r,a){var s=Ea(),i=r.SheetNames[e],l=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=mt(l["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],Se(s,129),(r.vbaraw||l["!outline"])&&Se(s,147,Ipe(o,l["!outline"])),Se(s,148,Ape(c)),$ge(s,l,r.Workbook),Ige(s,l),Pge(s,l,e,t),Bge(s,l),Lge(s,l,r,e),Dge(s,l),Mge(s,l,a),l["!margins"]&&Se(s,476,jge(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Fge(s,l),Rge(s,l,e,a),Se(s,130),s.end()}function Wge(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(t[+l[1]]=r?+l[2]:l[2])});var s=yt((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function qge(e,t,r,a,s,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=Wge(f);d.s.r=d.s.c=0,d.e.c=o,u=Kt(o),m[0].forEach(function(p,y){l[u+nr(y)]={t:"n",v:p,z:m[1]},c=y}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(l["!ref"]=rt(d)),l}function Kge(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(kD);return o&&bN(o[0],i,s,r),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function zge(e,t){e.l+=10;var r=ca(e);return{name:r}}function Vge(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Vs(e,function(c,u,d){switch(d){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!l||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var wN=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Hge=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Gge=[],Xge=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function d4(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=Wt(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function f4(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Wt(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function ED(e){f4(e.WBProps,wN),f4(e.CalcPr,Xge),d4(e.WBView,Hge),d4(e.Sheets,Gge),Ho.date1904=Wt(e.WBProps.date1904)}function Yge(e){return!e.Workbook||!e.Workbook.WBProps?"false":Wt(e.Workbook.WBProps.date1904)?"true":"false"}var Qge="][*?/\\".split("");function TD(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return Qge.forEach(function(a){if(e.indexOf(a)!=-1){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function Jge(e,t,r){e.forEach(function(a,s){TD(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var l=t&&t[s]&&t[s].CodeName||a;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function AD(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Jge(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Yxe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var Zge=/<\w+:workbook/;function eye(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},l=0;if(e.replace(fa,function(c,u){var d=Ye(c);switch(os(d[0])){case"<?xml":break;case"<workbook":c.match(Zge)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":wN.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Wt(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=At(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=yt(At(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=At(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),Wt(d.hidden||"0")&&(i.Hidden=!0),l=u+c.length;break;case"</definedName>":i.Ref=yt(At(e.slice(l,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Yl.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return ED(r),r}function PD(e){var t=[mr];t[t.length]=Ee("workbook",null,{xmlns:Yl[0],"xmlns:r":Sr.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(wN.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(a[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=Ee("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:_t(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=Ee("sheet",null,l)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Ee("definedName",_t(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function tye(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=h1(e),r.name=ca(e),r}function rye(e,t){return t||(t=be(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),iN(e.strRelID,t),Ir(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function aye(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?ca(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function nye(e,t){t||(t=be(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),N6(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function sye(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function iye(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Rue(e),l=Kxe(e,0,r),o=sN(e);e.l=a;var c={Name:i,Ptg:l};return s<268435455&&(c.Sheet=s),o&&(c.Comment=o),c}function lye(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],uf[16]={n:"BrtFRTArchID$",f:sye},Vs(e,function(c,u,d){switch(d){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ta(c.Ptg,null,null,l,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([d,c]):l[0]=[d,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(d),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),ED(r),r.Names=i,r.supbooks=l,r}function oye(e,t){Se(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Se(e,156,rye(s))}Se(e,144)}function cye(e,t){t||(t=be(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ir("SheetJS",t),Ir(Jd.version,t),Ir(Jd.version,t),Ir("7262",t),t.length>t.l?t.slice(0,t.l):t}function uye(e,t){t||(t=be(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function dye(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(Se(e,135),Se(e,158,uye(s)),Se(e,136))}}function fye(e,t){var r=Ea();return Se(r,131),Se(r,128,cye()),Se(r,153,nye(e.Workbook&&e.Workbook.WBProps||null)),dye(r,e),oye(r,e),Se(r,132),r.end()}function mye(e,t,r){return t.slice(-4)===".bin"?lye(e,r):eye(e,r)}function hye(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?Tge(e,a,r,s,i,l,o):lpe(e,a,r,s,i,l,o)}function xye(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?Vge(e,a,r,s,i):Kge(e,a,r,s,i)}function pye(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?vhe():bhe()}function gye(e,t,r,a,s,i,l,o){return t.slice(-4)===".bin"?ghe():yhe()}function yye(e,t,r,a){return t.slice(-4)===".bin"?hme(e,r,a):rme(e,r,a)}function vye(e,t,r){return dD(e,r)}function bye(e,t,r){return t.slice(-4)===".bin"?w0e(e,r):y0e(e,r)}function wye(e,t,r){return t.slice(-4)===".bin"?fhe(e,r):ahe(e,r)}function Nye(e,t,r){return t.slice(-4)===".bin"?ehe(e):Jme(e)}function jye(e,t,r,a){return r.slice(-4)===".bin"?the(e,t,r,a):void 0}function Sye(e,t,r){return t.slice(-4)===".bin"?Xme(e,t,r):Qme(e,t,r)}function kye(e,t,r){return(t.slice(-4)===".bin"?fye:PD)(e)}function Cye(e,t,r,a,s){return(t.slice(-4)===".bin"?Uge:CD)(e,r,a,s)}function _ye(e,t,r){return(t.slice(-4)===".bin"?Sme:cD)(e,r)}function Oye(e,t,r){return(t.slice(-4)===".bin"?S0e:tD)(e,r)}function Eye(e,t,r){return(t.slice(-4)===".bin"?mhe:hD)(e)}function Tye(e){return(e.slice(-4)===".bin"?Yme:fD)()}var DD=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,ID=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function On(e,t){var r=e.split(/\s+/),a=[];if(t||(a[0]=r[0]),r.length===1)return a;var s=e.match(DD),i,l,o,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(ID),(l=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),a[o]=i[2].slice(1,i[2].length-1));return a}function Aye(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(DD),s,i,l,o;if(a)for(o=0;o!=a.length;++o)s=a[o].match(ID),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),r[l]=s[2].slice(1,s[2].length-1));return r}var Vu;function Pye(e,t){var r=Vu[e]||yt(e);return r==="General"?Ml(t):Ha(r,t)}function Dye(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Wt(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=zt(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[yt(t)]=s}function Iye(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Hs[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ef(e.v):e.w=Ml(e.v):e.w=Pye(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=Vu[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&Xl(a)){var s=ui(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Fye(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=G0e[a.Pattern]||a.Pattern)}e[t.ID]=t}function Mye(e,t,r,a,s,i,l,o,c,u){var d="General",f=a.StyleID,m={};u=u||{};var p=[],y=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&l&&(f=l.StyleID);i[f]!==void 0&&(i[f].nf&&(d=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Wt(e);break;case"String":a.t="s",a.r=E_(yt(e)),a.v=e.indexOf("<")>-1?yt(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(zt(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=yt(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=_6[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=E_(t||e));break}if(Iye(a,d,u),u.cellFormula!==!1)if(a.Formula){var h=yt(a.Formula);h.charCodeAt(0)==61&&(h=h.slice(1)),a.f=Vo(h,s),delete a.Formula,a.ArrayRange=="RC"?a.F=Vo("RC:RC",s):a.ArrayRange&&(a.F=Vo(a.ArrayRange,s),c.push([mt(a.F),a.F]))}else for(y=0;y<c.length;++y)s.r>=c[y][0].s.r&&s.r<=c[y][0].e.r&&s.c>=c[y][0].s.c&&s.c<=c[y][0].e.c&&(a.F=c[y][1]);u.cellStyles&&(p.forEach(function(v){!m.patternType&&v.patternType&&(m.patternType=v.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Rye(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Tg(e,t){var r=t||{};Kc();var a=To(Xw(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(typeof xt<"u"?a=xt.utils.decode(65001,Oh(a)):a=At(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var l=It(r);return l.type="string",Cc.to_workbook(a,l)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ue){s.indexOf("<"+Ue)>=0&&(i=!0)}),i)return vve(a,r);Vu={"General Number":"General","General Date":ze[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ze[15],"Short Date":ze[14],"Long Time":ze[19],"Medium Time":ze[18],"Short Time":ze[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ze[2],Standard:ze[4],Percent:ze[10],Scientific:ze[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],m=r.dense?[]:{},p="",y={},h={},v=On('<Data ss:Type="String">'),w=0,S=0,b=0,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},g={},N={},j="",C=0,_=[],T={},E={},k=0,A=[],P=[],F={},U=[],W,K=!1,B=[],ee=[],oe={},R=0,V=0,X={Sheets:[],WBProps:{date1904:!1}},J={};af.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var Z="";o=af.exec(a);)switch(o[3]=(Z=o[3]).toLowerCase()){case"data":if(Z=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Mye(a.slice(w,o.index),j,v,c[c.length-1][0]=="comment"?F:y,{c:S,r:b},g,U[S],h,B,r):(j="",v=On(o[0]),w=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(P.length>0&&(y.c=P),(!r.sheetRows||r.sheetRows>b)&&y.v!==void 0&&(r.dense?(m[b]||(m[b]=[]),m[b][S]=y):m[Kt(S)+nr(b)]=y),y.HRef&&(y.l={Target:yt(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(R=S+(parseInt(y.MergeAcross,10)|0),V=b+(parseInt(y.MergeDown,10)|0),_.push({s:{c:S,r:b},e:{c:R,r:V}})),!r.sheetStubs)y.MergeAcross?S=R+1:++S;else if(y.MergeAcross||y.MergeDown){for(var le=S;le<=R;++le)for(var xe=b;xe<=V;++xe)(le>S||xe>b)&&(r.dense?(m[xe]||(m[xe]=[]),m[xe][le]={t:"z"}):m[Kt(le)+nr(xe)]={t:"z"});S=R+1}else++S;else y=Aye(o[0]),y.Index&&(S=+y.Index-1),S<x.s.c&&(x.s.c=S),S>x.e.c&&(x.e.c=S),o[0].slice(-2)==="/>"&&++S,P=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<x.s.r&&(x.s.r=b),b>x.e.r&&(x.e.r=b),o[0].slice(-2)==="/>"&&(h=On(o[0]),h.Index&&(b=+h.Index-1)),S=0,++b):(h=On(o[0]),h.Index&&(b=+h.Index-1),oe={},(h.AutoFitHeight=="0"||h.Height)&&(oe.hpx=parseInt(h.Height,10),oe.hpt=cf(oe.hpx),ee[b]=oe),h.Hidden=="1"&&(oe.hidden=!0,ee[b]=oe));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),x.s.r<=x.e.r&&x.s.c<=x.e.c&&(m["!ref"]=rt(x),r.sheetRows&&r.sheetRows<=x.e.r&&(m["!fullref"]=m["!ref"],x.e.r=r.sheetRows-1,m["!ref"]=rt(x))),_.length&&(m["!merges"]=_),U.length>0&&(m["!cols"]=U),ee.length>0&&(m["!rows"]=ee),d[p]=m}else x={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=S=0,c.push([o[3],!1]),u=On(o[0]),p=yt(u.Name),m=r.dense?[]:{},_=[],B=[],ee=[],J={name:p,Hidden:0},X.Sheets.push(J);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),U=[],K=!1}break;case"style":o[1]==="/"?Fye(g,N,r):N=On(o[0]);break;case"numberformat":N.nf=yt(On(o[0]).Format||"General"),Vu[N.nf]&&(N.nf=Vu[N.nf]);for(var ae=0;ae!=392&&ze[ae]!=N.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(ze[ae]==null){as(N.nf,ae);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(W=On(o[0]),W.Hidden&&(W.hidden=!0,delete W.Hidden),W.Width&&(W.wpx=parseInt(W.Width,10)),!K&&W.wpx>10){K=!0,sa=lD;for(var M=0;M<U.length;++M)U[M]&&Oi(U[M])}K&&Oi(W),U[W.Index-1||U.length]=W;for(var G=0;G<+W.Span;++G)U[U.length]=It(W);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var D=Ye(o[0]),se={Name:D.Name,Ref:Vo(D.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(se.Sheet=X.Sheets.length-1),X.Names.push(se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?j+=a.slice(C,o.index):C=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;N.Interior=On(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?ode(T,Z,a.slice(k,o.index)):k=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Rye(F),P.push(F)}else c.push([o[3],!1]),u=On(o[0]),F={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var I=On(o[0]);m["!autofilter"]={ref:Vo(I.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return g4(a,r);var ce=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ce=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ce=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ce=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ce=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(a.slice(k,o.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else k=o.index+o[0].length;break;case"header":m["!margins"]||wl(m["!margins"]={},"xlml"),isNaN(+Ye(o[0]).Margin)||(m["!margins"].header=+Ye(o[0]).Margin);break;case"footer":m["!margins"]||wl(m["!margins"]={},"xlml"),isNaN(+Ye(o[0]).Margin)||(m["!margins"].footer=+Ye(o[0]).Margin);break;case"pagemargins":var ue=Ye(o[0]);m["!margins"]||wl(m["!margins"]={},"xlml"),isNaN(+ue.Top)||(m["!margins"].top=+ue.Top),isNaN(+ue.Left)||(m["!margins"].left=+ue.Left),isNaN(+ue.Right)||(m["!margins"].right=+ue.Right),isNaN(+ue.Bottom)||(m["!margins"].bottom=+ue.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ce=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ce=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ce=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ce=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ce=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ce=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ce=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ce=!1}break;case"smarttags":break;default:ce=!1;break}if(ce||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Dye(E,Z,A,a.slice(k,o.index)):(A=o,k=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var te={};return!r.bookSheets&&!r.bookProps&&(te.Sheets=d),te.SheetNames=f,te.Workbook=X,te.SSF=It(ze),te.Props=T,te.Custprops=E,te}function w1(e,t){switch(SN(t=t||{}),t.type||"base64"){case"base64":return Tg(Va(e),t);case"binary":case"buffer":case"file":return Tg(e,t);case"array":return Tg(zi(e),t)}}function Lye(e,t){var r=[];return e.Props&&r.push(cde(e.Props,t)),e.Custprops&&r.push(ude(e.Props,e.Custprops)),r.join("")}function $ye(){return""}function Bye(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(Ee("NumberFormat",null,{"ss:Format":_t(ze[a.numFmtId])}));var l={"ss:ID":"s"+(21+s)};r.push(Ee("Style",i.join(""),l))}),Ee("Styles",r.join(""))}function FD(e){return Ee("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+gN(e.Ref,{r:0,c:0})})}function Uye(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(FD(s)))}return Ee("Names",r.join(""))}function Wye(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],l=0;l<s.length;++l){var o=s[l];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(FD(o)))}return i.join("")}function qye(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Ee("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Ee("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Ee("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(Ee("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(zr("ProtectContents","True")),e["!protect"].objects&&s.push(zr("ProtectObjects","True")),e["!protect"].scenarios&&s.push(zr("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(zr("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(zr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&s.push("<"+l[1]+"/>")})),s.length==0?"":Ee("WorksheetOptions",s.join(""),{xmlns:Ma.x})}function Kye(e){return e.map(function(t){var r=fue(t.t||""),a=Ee("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ee("Comment",a,{"ss:Author":t.a})}).join("")}function zye(e,t,r,a,s,i,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+_t(gN(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var c=Jt(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==l.r?"":"["+(c.r-l.r)+"]")+"C"+(c.c==l.c?"":"["+(c.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=_t(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=_t(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=l.c||u[d].s.r!=l.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",m="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",m=String(e.v);break;case"b":f="Boolean",m=e.v?"1":"0";break;case"e":f="Error",m=Hs[e.v];break;case"d":f="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||ze[14]);break;case"s":f="String",m=due(e.v||"");break}var p=Hi(a.cellXfs,e,a);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=l.c+1;var y=e.v!=null?m:"",h=e.t=="z"?"":'<Data ss:Type="'+f+'">'+y+"</Data>";return(e.c||[]).length>0&&(h+=Kye(e.c)),Ee("Cell",h,o)}function Vye(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=_c(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Hye(e,t,r,a){if(!e["!ref"])return"";var s=mt(e["!ref"]),i=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,w){Oi(v);var S=!!v.width,b=sp(w,v),x={"ss:Index":w+1};S&&(x["ss:Width"]=lf(b.width)),v.hidden&&(x["ss:Hidden"]="1"),o.push(Ee("Column",null,x))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[Vye(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var m=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>f)&&!(i[l].s.r>u)&&!(i[l].e.c<f)&&!(i[l].e.r<u)){(i[l].s.c!=f||i[l].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:f},y=Xe(p),h=c?(e[u]||[])[f]:e[y];d.push(zye(h,y,e,t,r,a,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Gye(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],l=i?Wye(i,t,e,r):"";return l.length>0&&a.push("<Names>"+l+"</Names>"),l=i?Hye(i,t,e,r):"",l.length>0&&a.push("<Table>"+l+"</Table>"),a.push(qye(i,t,e,r)),a.join("")}function Xye(e,t){t||(t={}),e.SSF||(e.SSF=It(ze)),e.SSF&&(Kc(),Df(e.SSF),t.revssf=Zx(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Hi(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Lye(e,t)),r.push($ye()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(Ee("Worksheet",Gye(a,t,e),{"ss:Name":_t(e.SheetNames[a])}));return r[2]=Bye(e,t),r[3]=Uye(e),mr+Ee("Workbook",r.join(""),{xmlns:Ma.ss,"xmlns:o":Ma.o,"xmlns:x":Ma.x,"xmlns:ss":Ma.ss,"xmlns:dt":Ma.dt,"xmlns:html":Ma.html})}function Yye(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Wue(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=que(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Qye=[60,1084,2066,2165,2175];function Jye(e,t,r,a,s){var i=a,l=[],o=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}l.push(o),r.l+=i;for(var c=js(r,r.l),u=N1[c],d=0;u!=null&&Qye.indexOf(c)>-1;)i=js(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+i),l.push(o),r.l+=4+i,u=N1[c=js(r,r.l)];var f=Dr(l);Kr(f,0);var m=0;f.lens=[];for(var p=0;p<l.length;++p)f.lens.push(m),m+=l[p].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,s)}function Vn(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ze[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Hs[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ef(e.v):e.w=Ml(e.v):e.w=Ha(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&Xl(ze[a]||String(a))){var s=ui(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function I0(e,t,r){return{v:e,ixfe:t,t:r}}function Zye(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},l={},o=null,c=[],u="",d={},f,m="",p,y,h,v,w={},S=[],b,x,g=[],N=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},_=function(ye){return ye<8?yl[ye]:ye<64&&N[ye-8]||yl[ye]},T=function(ye,$e,ot){var Be=$e.XF.data;if(!(!Be||!Be.patternType||!ot||!ot.cellStyles)){$e.s={},$e.s.patternType=Be.patternType;var Pt;(Pt=sf(_(Be.icvFore)))&&($e.s.fgColor={rgb:Pt}),(Pt=sf(_(Be.icvBack)))&&($e.s.bgColor={rgb:Pt})}},E=function(ye,$e,ot){if(!(oe>1)&&!(ot.sheetRows&&ye.r>=ot.sheetRows)){if(ot.cellStyles&&$e.XF&&$e.XF.data&&T(ye,$e,ot),delete $e.ixfe,delete $e.XF,f=ye,m=Xe(ye),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),ye.r<l.s.r&&(l.s.r=ye.r),ye.c<l.s.c&&(l.s.c=ye.c),ye.r+1>l.e.r&&(l.e.r=ye.r+1),ye.c+1>l.e.c&&(l.e.c=ye.c+1),ot.cellFormula&&$e.f){for(var Be=0;Be<S.length;++Be)if(!(S[Be][0].s.c>ye.c||S[Be][0].s.r>ye.r)&&!(S[Be][0].e.c<ye.c||S[Be][0].e.r<ye.r)){$e.F=rt(S[Be][0]),(S[Be][0].s.c!=ye.c||S[Be][0].s.r!=ye.r)&&delete $e.f,$e.f&&($e.f=""+ta(S[Be][1],l,ye,B,k));break}}ot.dense?(s[ye.r]||(s[ye.r]=[]),s[ye.r][ye.c]=$e):s[m]=$e}},k={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var A,P=[],F=[],U=[],W=[],K=!1,B=[];B.SheetNames=k.snames,B.sharedf=k.sharedf,B.arrayf=k.arrayf,B.names=[],B.XTI=[];var ee=0,oe=0,R=0,V=[],X=[],J;k.codepage=1200,fn(1200);for(var Z=!1;e.l<e.length-1;){var le=e.l,xe=e.read_shift(2);if(xe===0&&ee===10)break;var ae=e.l===e.length?0:e.read_shift(2),M=N1[xe];if(M&&M.f){if(t.bookSheets&&ee===133&&xe!==133)break;if(ee=xe,M.r===2||M.r==12){var G=e.read_shift(2);if(ae-=2,!k.enc&&G!==xe&&((G&255)<<8|G>>8)!==xe)throw new Error("rt mismatch: "+G+"!="+xe);M.r==12&&(e.l+=10,ae-=10)}var D={};if(xe===10?D=M.f(e,ae,k):D=Jye(xe,M,e,ae,k),oe==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(xe){case 34:r.opts.Date1904=j.WBProps.date1904=D;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=D,!t.password)throw new Error("File is password-protected");if(D.valid==null)throw new Error("Encryption scheme unsupported");if(!D.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=D;break;case 66:var se=Number(D);switch(se){case 21010:se=1200;break;case 32768:se=1e4;break;case 32769:se=1252;break}fn(k.codepage=se),Z=!0;break;case 317:k.rrtabid=D;break;case 25:k.winlocked=D;break;case 439:r.opts.RefreshAll=D;break;case 12:r.opts.CalcCount=D;break;case 16:r.opts.CalcDelta=D;break;case 17:r.opts.CalcIter=D;break;case 13:r.opts.CalcMode=D;break;case 14:r.opts.CalcPrecision=D;break;case 95:r.opts.CalcSaveRecalc=D;break;case 15:k.CalcRefMode=D;break;case 2211:r.opts.FullCalc=D;break;case 129:D.fDialog&&(s["!type"]="dialog"),D.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),D.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:g.push(D);break;case 430:B.push([D]),B[B.length-1].XTI=[];break;case 35:case 547:B[B.length-1].push(D);break;case 24:case 536:J={Name:D.Name,Ref:ta(D.rgce,l,null,B,k)},D.itab>0&&(J.Sheet=D.itab-1),B.names.push(J),B[0]||(B[0]=[],B[0].XTI=[]),B[B.length-1].push(D),D.Name=="_xlnm._FilterDatabase"&&D.itab>0&&D.rgce&&D.rgce[0]&&D.rgce[0][0]&&D.rgce[0][0][0]=="PtgArea3d"&&(X[D.itab-1]={ref:rt(D.rgce[0][0][1][2])});break;case 22:k.ExternCount=D;break;case 23:B.length==0&&(B[0]=[],B[0].XTI=[]),B[B.length-1].XTI=B[B.length-1].XTI.concat(D),B.XTI=B.XTI.concat(D);break;case 2196:if(k.biff<8)break;J!=null&&(J.Comment=D[1]);break;case 18:s["!protect"]=D;break;case 19:D!==0&&k.WTF&&console.error("Password verifier: "+D);break;case 133:i[D.pos]=D,k.snames.push(D.name);break;case 10:{if(--oe)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,s["!ref"]=rt(l),t.sheetRows&&t.sheetRows<=l.e.r){var I=l.e.r;l.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=rt(l),l.e.r=I}l.e.r++,l.e.c++}P.length>0&&(s["!merges"]=P),F.length>0&&(s["!objects"]=F),U.length>0&&(s["!cols"]=U),W.length>0&&(s["!rows"]=W),j.Sheets.push(C)}u===""?d=s:a[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[xe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[D.BIFFVer]||8),k.biffguess=D.BIFFVer==0,D.BIFFVer==0&&D.dt==4096&&(k.biff=5,Z=!0,fn(k.codepage=28591)),k.biff==8&&D.BIFFVer==0&&D.dt==16&&(k.biff=2),oe++)break;if(s=t.dense?[]:{},k.biff<8&&!Z&&(Z=!0,fn(k.codepage=t.codepage||1252)),k.biff<5||D.BIFFVer==0&&D.dt==4096){u===""&&(u="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var ce={pos:e.l-ae,name:u};i[ce.pos]=ce,k.snames.push(u)}else u=(i[le]||{name:""}).name;D.dt==32&&(s["!type"]="chart"),D.dt==64&&(s["!type"]="macro"),P=[],F=[],k.arrayf=S=[],U=[],W=[],K=!1,C={Hidden:(i[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[D.r]||[])[D.c]:s[Xe({c:D.c,r:D.r})])&&++D.c,b={ixfe:D.ixfe,XF:g[D.ixfe]||{},v:D.val,t:"n"},R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:D.c,r:D.r},b,t);break;case 5:case 517:b={ixfe:D.ixfe,XF:g[D.ixfe],v:D.val,t:D.t},R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:D.c,r:D.r},b,t);break;case 638:b={ixfe:D.ixfe,XF:g[D.ixfe],v:D.rknum,t:"n"},R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:D.c,r:D.r},b,t);break;case 189:for(var ue=D.c;ue<=D.C;++ue){var te=D.rkrec[ue-D.c][0];b={ixfe:te,XF:g[te],v:D.rkrec[ue-D.c][1],t:"n"},R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:ue,r:D.r},b,t)}break;case 6:case 518:case 1030:{if(D.val=="String"){o=D;break}if(b=I0(D.val,D.cell.ixfe,D.tt),b.XF=g[b.ixfe],t.cellFormula){var Ue=D.formula;if(Ue&&Ue[0]&&Ue[0][0]&&Ue[0][0][0]=="PtgExp"){var et=Ue[0][0][1][0],Je=Ue[0][0][1][1],Ge=Xe({r:et,c:Je});w[Ge]?b.f=""+ta(D.formula,l,D.cell,B,k):b.F=((t.dense?(s[et]||[])[Je]:s[Ge])||{}).F}else b.f=""+ta(D.formula,l,D.cell,B,k)}R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E(D.cell,b,t),o=D}break;case 7:case 519:if(o)o.val=D,b=I0(D,o.cell.ixfe,"s"),b.XF=g[b.ixfe],t.cellFormula&&(b.f=""+ta(o.formula,l,o.cell,B,k)),R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(D);var Ke=Xe(D[0].s);if(p=t.dense?(s[D[0].s.r]||[])[D[0].s.c]:s[Ke],t.cellFormula&&p){if(!o||!Ke||!p)break;p.f=""+ta(D[1],l,D[0],B,k),p.F=rt(D[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!o)break;w[Xe(o.cell)]=D[0],p=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[Xe(o.cell)],(p||{}).f=""+ta(D[0],l,f,B,k)}}break;case 253:b=I0(c[D.isst].t,D.ixfe,"s"),c[D.isst].h&&(b.h=c[D.isst].h),b.XF=g[b.ixfe],R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:D.c,r:D.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:D.ixfe,XF:g[D.ixfe],t:"z"},R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:D.c,r:D.r},b,t));break;case 190:if(t.sheetStubs)for(var Le=D.c;Le<=D.C;++Le){var pe=D.ixfe[Le-D.c];b={ixfe:pe,XF:g[pe],t:"z"},R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:Le,r:D.r},b,t)}break;case 214:case 516:case 4:b=I0(D.val,D.ixfe,"s"),b.XF=g[b.ixfe],R>0&&(b.z=V[b.ixfe>>8&63]),Vn(b,t,r.opts.Date1904),E({c:D.c,r:D.r},b,t);break;case 0:case 512:oe===1&&(l=D);break;case 252:c=D;break;case 1054:if(k.biff==4){V[R++]=D[1];for(var ne=0;ne<R+163&&ze[ne]!=D[1];++ne);ne>=163&&as(D[1],R+163)}else as(D[1],D[0]);break;case 30:{V[R++]=D;for(var je=0;je<R+163&&ze[je]!=D;++je);je>=163&&as(D,R+163)}break;case 229:P=P.concat(D);break;case 93:F[D.cmo[0]]=k.lastobj=D;break;case 438:k.lastobj.TxO=D;break;case 127:k.lastobj.ImData=D;break;case 440:for(v=D[0].s.r;v<=D[0].e.r;++v)for(h=D[0].s.c;h<=D[0].e.c;++h)p=t.dense?(s[v]||[])[h]:s[Xe({c:h,r:v})],p&&(p.l=D[1]);break;case 2048:for(v=D[0].s.r;v<=D[0].e.r;++v)for(h=D[0].s.c;h<=D[0].e.c;++h)p=t.dense?(s[v]||[])[h]:s[Xe({c:h,r:v})],p&&p.l&&(p.l.Tooltip=D[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;p=t.dense?(s[D[0].r]||[])[D[0].c]:s[Xe(D[0])];var re=F[D[2]];p||(t.dense?(s[D[0].r]||(s[D[0].r]=[]),p=s[D[0].r][D[0].c]={t:"z"}):p=s[Xe(D[0])]={t:"z"},l.e.r=Math.max(l.e.r,D[0].r),l.s.r=Math.min(l.s.r,D[0].r),l.e.c=Math.max(l.e.c,D[0].c),l.s.c=Math.min(l.s.c,D[0].c)),p.c||(p.c=[]),y={a:D[1],t:re.TxO.t},p.c.push(y)}break;case 2173:Ume(g[D.ixfe],D.ext);break;case 125:{if(!k.cellStyles)break;for(;D.e>=D.s;)U[D.e--]={width:D.w/256,level:D.level||0,hidden:!!(D.flags&1)},K||(K=!0,hN(D.w/256)),Oi(U[D.e+1])}break;case 520:{var ve={};D.level!=null&&(W[D.r]=ve,ve.level=D.level),D.hidden&&(W[D.r]=ve,ve.hidden=!0),D.hpt&&(W[D.r]=ve,ve.hpt=D.hpt,ve.hpx=_c(D.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||wl(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[xe]]=D;break;case 161:s["!margins"]||wl(s["!margins"]={}),s["!margins"].header=D.header,s["!margins"].footer=D.footer;break;case 574:D.RTL&&(j.Views[0].RTL=!0);break;case 146:N=D;break;case 2198:A=D;break;case 140:x=D;break;case 442:u?C.CodeName=D||C.name:j.WBProps.CodeName=D||"ThisWorkbook";break}}else M||console.error("Missing Info for XLS Record 0x"+xe.toString(16)),e.l+=ae}return r.SheetNames=lr(i).sort(function(Ie,ye){return Number(Ie)-Number(ye)}).map(function(Ie){return i[Ie].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(Ie,ye){r.Sheets[r.SheetNames[ye]]["!autofilter"]=Ie}),r.Strings=c,r.SSF=It(ze),k.enc&&(r.Encryption=k.enc),A&&(r.Themes=A),r.Metadata={},x!==void 0&&(r.Metadata.Country=x),B.names.length>0&&(j.Names=B.names),r.Workbook=j,r}var Hu={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function eve(e,t,r){var a=We.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=H_(a,x1,Hu.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var l=We.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=H_(l,p1,Hu.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(D6(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function tve(e,t){var r=[],a=[],s=[],i=0,l,o=j_(x1,"n"),c=j_(p1,"n");if(e.Props)for(l=lr(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?a:s).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=lr(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?a:s).push([l[i],e.Custprops[l[i]]]);var u=[];for(i=0;i<s.length;++i)B6.indexOf(s[i][0])>-1||P6.indexOf(s[i][0])>-1||s[i][1]!=null&&u.push(s[i]);a.length&&We.utils.cfb_add(t,"/SummaryInformation",G_(a,Hu.SI,c,p1)),(r.length||u.length)&&We.utils.cfb_add(t,"/DocumentSummaryInformation",G_(r,Hu.DSI,o,x1,u.length?u:null,Hu.UDI))}function NN(e,t){t||(t={}),SN(t),Qx(),t.codepage&&Yx(t.codepage);var r,a;if(e.FullPaths){if(We.find(e,"/encryption"))throw new Error("File is password-protected");r=We.find(e,"!CompObj"),a=We.find(e,"/Workbook")||We.find(e,"/Book")}else{switch(t.type){case"base64":e=La(Va(e));break;case"binary":e=La(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Kr(e,0),a={content:e}}var s,i;if(r&&Yye(r),t.bookProps&&!t.bookSheets)s={};else{var l=it?"buffer":"array";if(a&&a.content)s=Zye(a.content,t);else if((i=We.find(e,"PerfectOffice_MAIN"))&&i.content)s=bl.to_workbook(i.content,(t.type=l,t));else if((i=We.find(e,"NativeContent_MAIN"))&&i.content)s=bl.to_workbook(i.content,(t.type=l,t));else throw(i=We.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&We.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=xhe(e))}var o={};return e.FullPaths&&eve(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function rve(e,t){var r=t||{},a=We.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return We.utils.cfb_add(a,s,MD(e,r)),r.biff==8&&(e.Props||e.Custprops)&&tve(e,a),r.biff==8&&e.vbaraw&&phe(a,We.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var uf={0:{f:_pe},1:{f:Fpe},2:{f:ege},3:{f:qpe},4:{f:$pe},5:{f:Qpe},6:{f:sge},7:{f:Hpe},8:{f:fge},9:{f:dge},10:{f:cge},11:{f:uge},12:{f:Rpe},13:{f:rge},14:{f:zpe},15:{f:Upe},16:{f:_D},17:{f:lge},18:{f:Xpe},19:{f:nN},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:iye},40:{},42:{},43:{f:sme},44:{f:ame},45:{f:ome},46:{f:ume},47:{f:cme},48:{},49:{f:Tue},50:{},51:{f:Kme},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Q6},62:{f:nge},63:{f:Zme},64:{f:Oge},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:da,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Sge},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Dpe},148:{f:Tpe,p:16},151:{f:yge},152:{},153:{f:aye},154:{},155:{},156:{f:tye},157:{},158:{},159:{T:1,f:b0e},160:{T:-1},161:{T:1,f:eo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:mge},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Wme},336:{T:-1},337:{f:Hme,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:h1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Y6},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:vge},427:{f:bge},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Nge},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Ppe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:pge},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:h1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:uhe},633:{T:1},634:{T:-1},635:{T:1,f:ohe},636:{T:-1},637:{f:Iue},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:zge},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Ege},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},N1={6:{f:Og},10:{f:Ys},12:{f:gr},13:{f:gr},14:{f:cr},15:{f:cr},16:{f:ia},17:{f:cr},18:{f:cr},19:{f:gr},20:{f:e4},21:{f:e4},23:{f:Y6},24:{f:r4},25:{f:cr},26:{},27:{},28:{f:Efe},29:{},34:{f:cr},35:{f:t4},38:{f:ia},39:{f:ia},40:{f:ia},41:{f:ia},42:{f:cr},43:{f:cr},47:{f:U0e},49:{f:rfe},51:{f:gr},60:{},61:{f:Qde},64:{f:cr},65:{f:tfe},66:{f:gr},77:{},80:{},81:{},82:{},85:{f:gr},89:{},90:{},91:{},92:{f:Bde},93:{f:Pfe},94:{},95:{f:cr},96:{},97:{},99:{f:cr},125:{f:Q6},128:{f:gfe},129:{f:Wde},130:{f:gr},131:{f:cr},132:{f:cr},133:{f:qde},134:{},140:{f:Bfe},141:{f:gr},144:{},146:{f:qfe},151:{},152:{},153:{},154:{},155:{},156:{f:gr},157:{},158:{},160:{f:Yfe},161:{f:Vfe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:mfe},190:{f:hfe},193:{f:Ys},197:{},198:{},199:{},200:{},201:{},202:{f:cr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:gr},220:{},221:{f:cr},222:{},224:{f:pfe},225:{f:$de},226:{f:Ys},227:{},229:{f:Tfe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:zde},253:{f:nfe},255:{f:Hde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:U6},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:cr},353:{f:Ys},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Nfe},431:{f:cr},432:{},433:{},434:{},437:{},438:{f:Ffe},439:{f:cr},440:{f:Mfe},441:{},442:{f:Mf},443:{},444:{f:gr},445:{},446:{},448:{f:Ys},449:{f:Yde,r:2},450:{f:Ys},512:{f:Q_},513:{f:Xfe},515:{f:bfe},516:{f:ife},517:{f:Z_},519:{f:Qfe},520:{f:Gde},523:{},545:{f:a4},549:{f:Y_},566:{},574:{f:Zde},638:{f:ffe},659:{},1048:{},1054:{f:ofe},1084:{},1212:{f:Cfe},2048:{f:Lfe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:A0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ys},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Kfe,r:12},2173:{f:Bme,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:cr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:kfe,r:12},2197:{},2198:{f:Ime,r:12},2199:{},2200:{},2201:{},2202:{f:_fe,r:12},2203:{f:Ys},2204:{},2205:{},2206:{},2207:{},2211:{f:Xde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:gr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Hfe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Wfe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Q_},1:{},2:{f:r0e},3:{f:e0e},4:{f:Zfe},5:{f:Z_},7:{f:n0e},8:{},9:{f:A0},11:{},22:{f:gr},30:{f:ufe},31:{},32:{},33:{f:a4},36:{},37:{f:Y_},50:{f:s0e},62:{},52:{},67:{},68:{f:gr},69:{},86:{},126:{},127:{f:Jfe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:i0e},223:{},234:{},354:{},421:{},518:{f:Og},521:{f:A0},536:{f:r4},547:{f:t4},561:{},579:{},1030:{f:Og},1033:{f:A0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Te(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,l=e.next(4);l.write_shift(2,s),l.write_shift(2,i),i>0&&tN(r)&&e.push(r)}}function ave(e,t,r,a){var s=a||(r||[]).length||0;if(s<=8224)return Te(e,t,r,s);var i=t;if(!isNaN(i)){for(var l=r.parts||[],o=0,c=0,u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Bf(e,t,r){return e||(e=be(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function nve(e,t,r,a){var s=be(9);return Bf(s,e,t),W6(r,a||"b",s),s}function sve(e,t,r){var a=be(8+2*r.length);return Bf(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function ive(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?_r(zt(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?Te(e,2,a0e(r,a,s)):Te(e,3,t0e(r,a,s));return;case"b":case"e":Te(e,5,nve(r,a,t.v,t.t));return;case"s":case"str":Te(e,4,sve(r,a,(t.v||"").slice(0,255)));return}Te(e,1,Bf(null,r,a))}function lve(e,t,r,a){var s=Array.isArray(t),i=mt(t["!ref"]||"A1"),l,o="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=rt(i)}for(var u=i.s.r;u<=i.e.r;++u){o=nr(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=Kt(d)),l=c[d]+o;var f=s?(t[u]||[])[d]:t[l];f&&ive(e,f,u,d)}}}function ove(e,t){for(var r=t||{},a=Ea(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Te(a,r.biff==4?1033:r.biff==3?521:9,dN(e,16,r)),lve(a,e.Sheets[e.SheetNames[s]],s,r),Te(a,10),a.end()}function cve(e,t,r){Te(e,49,afe({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function uve(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Te(e,1054,cfe(s,t[s],r))})}function dve(e,t){var r=be(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Te(e,2151,r),r=be(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),H6(mt(t["!ref"]||"A1"),r),r.write_shift(4,4),Te(e,2152,r)}function fve(e,t){for(var r=0;r<16;++r)Te(e,224,J_({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){Te(e,224,J_(a,0,t))})}function mve(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];Te(e,440,Rfe(a)),a[1].Tooltip&&Te(e,2048,$fe(a))}delete t["!links"]}function hve(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&Te(e,125,zfe(sp(s,a),s))})}}function xve(e,t,r,a,s){var i=16+Hi(s.cellXfs,t,s);if(t.v==null&&!t.bf){Te(e,513,Bl(r,a,i));return}if(t.bf)Te(e,6,Wxe(t,r,a,s,i));else switch(t.t){case"d":case"n":var l=t.t=="d"?_r(zt(t.v)):t.v;Te(e,515,wfe(r,a,l,i));break;case"b":case"e":Te(e,517,vfe(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var o=vN(s.Strings,t.v,s.revStrings);Te(e,253,sfe(r,a,o,i))}else Te(e,516,lfe(r,a,(t.v||"").slice(0,255),i,s));break;default:Te(e,513,Bl(r,a,i))}}function pve(e,t,r){var a=Ea(),s=r.SheetNames[e],i=r.Sheets[s]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",m=[],p=mt(i["!ref"]||"A1"),y=u?65536:16384;if(p.e.c>255||p.e.r>=y){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}Te(a,2057,dN(r,16,t)),Te(a,13,sn(1)),Te(a,12,sn(100)),Te(a,15,xa(!0)),Te(a,17,xa(!1)),Te(a,16,Ll(.001)),Te(a,95,xa(!0)),Te(a,42,xa(!1)),Te(a,43,xa(!1)),Te(a,130,sn(1)),Te(a,128,yfe([0,0])),Te(a,131,xa(!1)),Te(a,132,xa(!1)),u&&hve(a,i["!cols"]),Te(a,512,dfe(p,t)),u&&(i["!links"]=[]);for(var h=p.s.r;h<=p.e.r;++h){f=nr(h);for(var v=p.s.c;v<=p.e.c;++v){h===p.s.r&&(m[v]=Kt(v)),d=m[v]+f;var w=c?(i[h]||[])[v]:i[d];w&&(xve(a,w,h,v,t),u&&w.l&&i["!links"].push([d,w.l]))}}var S=o.CodeName||o.name||s;return u&&Te(a,574,efe((l.Views||[])[0])),u&&(i["!merges"]||[]).length&&Te(a,229,Afe(i["!merges"])),u&&mve(a,i),Te(a,442,q6(S)),u&&dve(a,i),Te(a,10),a.end()}function gve(e,t,r){var a=Ea(),s=(e||{}).Workbook||{},i=s.Sheets||[],l=s.WBProps||{},o=r.biff==8,c=r.biff==5;if(Te(a,2057,dN(e,5,r)),r.bookType=="xla"&&Te(a,135),Te(a,225,o?sn(1200):null),Te(a,193,vde(2)),c&&Te(a,191),c&&Te(a,192),Te(a,226),Te(a,92,Ude("SheetJS",r)),Te(a,66,sn(o?1200:1252)),o&&Te(a,353,sn(0)),o&&Te(a,448),Te(a,317,Gfe(e.SheetNames.length)),o&&e.vbaraw&&Te(a,211),o&&e.vbaraw){var u=l.CodeName||"ThisWorkbook";Te(a,442,q6(u))}Te(a,156,sn(17)),Te(a,25,xa(!1)),Te(a,18,xa(!1)),Te(a,19,sn(0)),o&&Te(a,431,xa(!1)),o&&Te(a,444,sn(0)),Te(a,61,Jde()),Te(a,64,xa(!1)),Te(a,141,sn(0)),Te(a,34,xa(Yge(e)=="true")),Te(a,14,xa(!0)),o&&Te(a,439,xa(!1)),Te(a,218,sn(0)),cve(a,e,r),uve(a,e.SSF,r),fve(a,r),o&&Te(a,352,xa(!1));var d=a.end(),f=Ea();o&&Te(f,140,Ufe()),o&&r.Strings&&ave(f,252,Vde(r.Strings)),Te(f,10);var m=f.end(),p=Ea(),y=0,h=0;for(h=0;h<e.SheetNames.length;++h)y+=(o?12:11)+(o?2:1)*e.SheetNames[h].length;var v=d.length+y+m.length;for(h=0;h<e.SheetNames.length;++h){var w=i[h]||{};Te(p,133,Kde({pos:v,hs:w.Hidden||0,dt:0,name:e.SheetNames[h]},r)),v+=t[h].length}var S=p.end();if(y!=S.length)throw new Error("BS8 "+y+" != "+S.length);var b=[];return d.length&&b.push(d),S.length&&b.push(S),m.length&&b.push(m),Dr(b)}function yve(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=It(ze)),e&&e.SSF&&(Kc(),Df(e.SSF),r.revssf=Zx(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,kN(r),r.cellXfs=[],Hi(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=pve(s,r,e);return a.unshift(gve(e,a,r)),Dr(a)}function MD(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=ya(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return yve(e,t);case 4:case 3:case 2:return ove(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function m4(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=s.index,o=i&&i.index||e.length,c=nue(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(l=0;l<c.length;++l){var h=c[l].trim(),v=h.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var w=h.split(/<\/t[dh]>/i);for(o=0;o<w.length;++o){var S=w[o].trim();if(S.match(/<t[dh]/i)){for(var b=S,x=0;b.charAt(0)=="<"&&(x=b.indexOf(">"))>-1;)b=b.slice(x+1);for(var g=0;g<y.length;++g){var N=y[g];N.s.c==d&&N.s.r<u&&u<=N.e.r&&(d=N.e.c+1,g=-1)}var j=Ye(S.slice(0,S.indexOf(">")));m=j.colspan?+j.colspan:1,((f=+j.rowspan)>1||m>1)&&y.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+m-1}});var C=j.t||j["data-t"]||"";if(!b.length){d+=m;continue}if(b=u6(b),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!b.length){d+=m;continue}var _={t:"s",v:b};r.raw||!b.trim().length||C=="s"||(b==="TRUE"?_={t:"b",v:!0}:b==="FALSE"?_={t:"b",v:!1}:isNaN(Un(b))?isNaN(kc(b).getDate())||(_={t:"d",v:zt(b)},r.cellDates||(_={t:"n",v:_r(_.v)}),_.z=r.dateNF||ze[14]):_={t:"n",v:Un(b)}),r.dense?(a[u]||(a[u]=[]),a[u][d]=_):a[Xe({r:u,c:d})]=_,d+=m}}}}return a["!ref"]=rt(p),y.length&&(a["!merges"]=y),a}function RD(e,t,r,a){for(var s=e["!merges"]||[],i=[],l=t.s.c;l<=t.e.c;++l){for(var o=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>l)&&!(s[u].e.r<r||s[u].e.c<l)){if(s[u].s.r<r||s[u].s.c<l){o=-1;break}o=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Xe({r,c:l}),f=a.dense?(e[r]||[])[l]:e[d],m=f&&f.v!=null&&(f.h||Gw(f.w||(is(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),p.id=(a.id||"sjs")+"-"+d,i.push(Ee("td",m,p))}}var y="<tr>";return y+i.join("")+"</tr>"}var LD='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',$D="</body></html>";function vve(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Vi(m4(r[0],t),t);var a=TN();return r.forEach(function(s,i){AN(a,m4(s,t),"Sheet"+(i+1))}),a}function BD(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function UD(e,t){var r=t||{},a=r.header!=null?r.header:LD,s=r.footer!=null?r.footer:$D,i=[a],l=ya(e["!ref"]);r.dense=Array.isArray(e),i.push(BD(e,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(RD(e,l,o,r));return i.push("</table>"+s),i.join("")}function WD(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var l=typeof a.origin=="string"?Jt(a.origin):a.origin;s=l.r,i=l.c}var o=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var d=ya(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],m=0,p=e["!rows"]||(e["!rows"]=[]),y=0,h=0,v=0,w=0,S=0,b=0;for(e["!cols"]||(e["!cols"]=[]);y<o.length&&h<c;++y){var x=o[y];if(h4(x)){if(a.display)continue;p[h]={hidden:!0}}var g=x.children;for(v=w=0;v<g.length;++v){var N=g[v];if(!(a.display&&h4(N))){var j=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):u6(N.innerHTML),C=N.getAttribute("data-z")||N.getAttribute("z");for(m=0;m<f.length;++m){var _=f[m];_.s.c==w+i&&_.s.r<h+s&&h+s<=_.e.r&&(w=_.e.c+1-i,m=-1)}b=+N.getAttribute("colspan")||1,((S=+N.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:h+s,c:w+i},e:{r:h+s+(S||1)-1,c:w+i+(b||1)-1}});var T={t:"s",v:j},E=N.getAttribute("data-t")||N.getAttribute("t")||"";j!=null&&(j.length==0?T.t=E||"z":a.raw||j.trim().length==0||E=="s"||(j==="TRUE"?T={t:"b",v:!0}:j==="FALSE"?T={t:"b",v:!1}:isNaN(Un(j))?isNaN(kc(j).getDate())||(T={t:"d",v:zt(j)},a.cellDates||(T={t:"n",v:_r(T.v)}),T.z=a.dateNF||ze[14]):T={t:"n",v:Un(j)})),T.z===void 0&&C!=null&&(T.z=C);var k="",A=N.getElementsByTagName("A");if(A&&A.length)for(var P=0;P<A.length&&!(A[P].hasAttribute("href")&&(k=A[P].getAttribute("href"),k.charAt(0)!="#"));++P);k&&k.charAt(0)!="#"&&(T.l={Target:k}),a.dense?(e[h+s]||(e[h+s]=[]),e[h+s][w+i]=T):e[Xe({c:w+i,r:h+s})]=T,u.e.c<w+i&&(u.e.c=w+i),w+=b}}++h}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,h-1+s),e["!ref"]=rt(u),h>=c&&(e["!fullref"]=rt((u.e.r=o.length-y+h-1+s,u))),e}function qD(e,t){var r=t||{},a=r.dense?[]:{};return WD(a,e,t)}function bve(e,t){return Vi(qD(e,t),t)}function h4(e){var t="",r=wve(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function wve(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Nve(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=yt(t.replace(/<[^>]*>/g,""));return[r]}var x4={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function KD(e,t){var r=t||{},a=Xw(e),s=[],i,l,o={name:""},c="",u=0,d,f,m={},p=[],y=r.dense?[]:{},h,v,w={value:""},S="",b=0,x=[],g=-1,N=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,_={},T=[],E={},k=0,A=0,P=[],F=1,U=1,W=[],K={Names:[]},B={},ee=["",""],oe=[],R={},V="",X=0,J=!1,Z=!1,le=0;for(af.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");h=af.exec(a);)switch(h[3]=h[3].replace(/_.*$/,"")){case"table":case"":h[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?y["!ref"]=rt(j):y["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(y["!fullref"]=y["!ref"],j.e.r=r.sheetRows-1,y["!ref"]=rt(j)),T.length&&(y["!merges"]=T),P.length&&(y["!rows"]=P),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=y,Z=!1):h[0].charAt(h[0].length-2)!=="/"&&(d=Ye(h[0],!1),g=N=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,y=r.dense?[]:{},T=[],P=[],Z=!0);break;case"table-row-group":h[1]==="/"?--C:++C;break;case"table-row":case"":if(h[1]==="/"){g+=F,F=1;break}if(f=Ye(h[0],!1),f.?g=f.-1:g==-1&&(g=0),F=+f["number-rows-repeated"]||1,F<10)for(le=0;le<F;++le)C>0&&(P[g+le]={level:C});N=-1;break;case"covered-table-cell":h[1]!=="/"&&++N,r.sheetStubs&&(r.dense?(y[g]||(y[g]=[]),y[g][N]={t:"z"}):y[Xe({r:g,c:N})]={t:"z"}),S="",x=[];break;case"table-cell":case"":if(h[0].charAt(h[0].length-2)==="/")++N,w=Ye(h[0],!1),U=parseInt(w["number-columns-repeated"]||"1",10),v={t:"z",v:null},w.formula&&r.cellFormula!=!1&&(v.f=u4(yt(w.formula))),(w.||w["value-type"])=="string"&&(v.t="s",v.v=yt(w["string-value"]||""),r.dense?(y[g]||(y[g]=[]),y[g][N]=v):y[Xe({r:g,c:N})]=v),N+=U-1;else if(h[1]!=="/"){++N,S="",b=0,x=[],U=1;var xe=F?g+F-1:g;if(N>j.e.c&&(j.e.c=N),N<j.s.c&&(j.s.c=N),g<j.s.r&&(j.s.r=g),xe>j.e.r&&(j.e.r=xe),w=Ye(h[0],!1),oe=[],R={},v={t:w.||w["value-type"],v:null},r.cellFormula)if(w.formula&&(w.formula=yt(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(k=parseInt(w["number-matrix-rows-spanned"],10)||0,A=parseInt(w["number-matrix-columns-spanned"],10)||0,E={s:{r:g,c:N},e:{r:g+k-1,c:N+A-1}},v.F=rt(E),W.push([E,v.F])),w.formula)v.f=u4(w.formula);else for(le=0;le<W.length;++le)g>=W[le][0].s.r&&g<=W[le][0].e.r&&N>=W[le][0].s.c&&N<=W[le][0].e.c&&(v.F=W[le][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(k=parseInt(w["number-rows-spanned"],10)||0,A=parseInt(w["number-columns-spanned"],10)||0,E={s:{r:g,c:N},e:{r:g+k-1,c:N+A-1}},T.push(E)),w["number-columns-repeated"]&&(U=parseInt(w["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Wt(w["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(w.value);break;case"percentage":v.t="n",v.v=parseFloat(w.value);break;case"currency":v.t="n",v.v=parseFloat(w.value);break;case"date":v.t="d",v.v=zt(w["date-value"]),r.cellDates||(v.t="n",v.v=_r(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=tue(w["time-value"])/86400,r.cellDates&&(v.t="d",v.v=ep(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(w.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",w["string-value"]!=null&&(S=yt(w["string-value"]),x=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=S||"",x.length&&(v.R=x),J=b==0),B.Target&&(v.l=B),oe.length>0&&(v.c=oe,oe=[]),S&&r.cellText!==!1&&(v.w=S),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=g))for(var ae=0;ae<F;++ae){if(U=parseInt(w["number-columns-repeated"]||"1",10),r.dense)for(y[g+ae]||(y[g+ae]=[]),y[g+ae][N]=ae==0?v:It(v);--U>0;)y[g+ae][N+U]=It(v);else for(y[Xe({r:g+ae,c:N})]=v;--U>0;)y[Xe({r:g+ae,c:N+U})]=It(v);j.e.c<=N&&(j.e.c=N)}U=parseInt(w["number-columns-repeated"]||"1",10),N+=U-1,U=0,v={},S="",x=[]}B={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!0]);break;case"annotation":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i;R.t=S,x.length&&(R.R=x),R.a=V,oe.push(R)}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!1]);V="",X=0,S="",b=0,x=[];break;case"creator":h[1]==="/"?V=a.slice(X,h.index):X=h.index+h[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(h[1]==="/"){if((i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&s.push([h[3],!1]);S="",b=0,x=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(h[1]==="/"){if(_[o.name]=c,(i=s.pop())[0]!==h[3])throw"Bad state: "+i}else h[0].charAt(h[0].length-2)!=="/"&&(c="",o=Ye(h[0],!1),s.push([h[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":l=Ye(h[0],!1),c+=x4[h[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":l=Ye(h[0],!1),c+=x4[h[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(h[0].slice(-2)==="/>")break;if(h[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(u,h.index);break}else u=h.index+h[0].length;break;case"named-range":l=Ye(h[0],!1),ee=Eg(l["cell-range-address"]);var M={Name:l.name,Ref:ee[0]+"!"+ee[1]};Z&&(M.Sheet=p.length),K.Names.push(M);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(h[1]==="/"&&(!w||!w["string-value"])){var G=Nve(a.slice(b,h.index));S=(S.length>0?S+`
`:"")+G[0]}else Ye(h[0],!1),b=h.index+h[0].length;break;case"s":break;case"database-range":if(h[1]==="/")break;try{ee=Eg(Ye(h[0])["target-range-address"]),m[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(h[1]!=="/"){if(B=Ye(h[0],!1),!B.href)break;B.Target=yt(B.href),delete B.href,B.Target.charAt(0)=="#"&&B.Target.indexOf(".")>-1?(ee=Eg(B.Target.slice(1)),B.Target="#"+ee[0]+"!"+ee[1]):B.Target.match(/^\.\.[\\\/]/)&&(B.Target=B.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(h[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(h)}}var D={Sheets:m,SheetNames:p,Workbook:K};return r.bookSheets&&delete D.Sheets,D}function p4(e,t){t=t||{},nn(e,"META-INF/manifest.xml")&&ede(pr(e,"META-INF/manifest.xml"),t);var r=$a(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=KD(At(r),t);return nn(e,"meta.xml")&&(a.Props=T6(pr(e,"meta.xml"))),a}function g4(e,t){return KD(e,t)}var jve=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+rf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return mr+t}}(),y4=function(){var e=function(i){return _t(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,l,o){var c=[];c.push('      <table:table table:name="'+_t(l.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=ya(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,y=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var h="",v=i["!rows"]||[];for(u=0;u<f.s.r;++u)h=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+h+`></table:table-row>
`);for(;u<=f.e.r;++u){for(h=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+h+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var w=!1,S={},b="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>u)&&!(m[p].e.c<d)&&!(m[p].e.r<u)){(m[p].s.c!=d||m[p].s.r!=u)&&(w=!0),S["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,S["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(w){c.push(r);continue}var x=Xe({r:u,c:d}),g=y?(i[u]||[])[d]:i[x];if(g&&g.f&&(S["table:formula"]=_t(Gxe(g.f)),g.F&&g.F.slice(0,x.length)==x)){var N=ya(g.F);S["table:number-matrix-columns-spanned"]=N.e.c-N.s.c+1,S["table:number-matrix-rows-spanned"]=N.e.r-N.s.r+1}if(!g){c.push(t);continue}switch(g.t){case"b":b=g.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=g.v?"true":"false";break;case"n":b=g.w||String(g.v||0),S["office:value-type"]="float",S["office:value"]=g.v||0;break;case"s":case"str":b=g.v==null?"":g.v,S["office:value-type"]="string";break;case"d":b=g.w||zt(g.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=zt(g.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(b);if(g.l&&g.l.Target){var C=g.l.Target;C=C.charAt(0)=="#"?"#"+Xxe(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),j=Ee("text:a",j,{"xlink:href":C.replace(/&/g,"&amp;")})}c.push("          "+Ee("table:table-cell",Ee("text:p",j,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Oi(f),f.ods=o;var m=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var c=[mr],u=rf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=rf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(E6().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,l),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=l.SheetNames.length;++f)c.push(a(l.Sheets[l.SheetNames[f]],l,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function zD(e,t){if(t.bookType=="fods")return y4(e,t);var r=zw(),a="",s=[],i=[];return a="mimetype",at(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",at(r,a,y4(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",at(r,a,jve(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",at(r,a,mr+E6()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",at(r,a,ade(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",at(r,a,tde(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ul(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function j1(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):At(zi(e))}function Sve(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):La(Jn(e))}function kve(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Ti(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function v4(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Cve(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function _ve(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function df(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function kt(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function sr(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function bt(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=df(e,r),i=s&7;s=Math.floor(s/8);var l=0,o;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:l=4,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=df(e,r),o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var u={data:o,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Br(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(kt(a*8+s.type)),s.type==2&&t.push(kt(s.data.length)),t.push(s.data))})}),Ti(t)}function jN(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function rn(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=df(e,a),i=bt(e.slice(a[0],a[0]+s));a[0]+=s;var l={id:sr(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=bt(o.data),u=sr(c[3][0].data);l.messages.push({meta:c,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=i[3])!=null&&t[0]&&(l.merge=sr(i[3][0].data)>>>0>0),r.push(l)}return r}function oo(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:kt(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:kt(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(l){s.push(l.data),l.meta[3]=[{type:0,data:kt(l.data.length)}],a[2].push({data:Br(l.meta),type:2})});var i=Br(a);t.push(kt(i.length)),t.push(i),s.forEach(function(l){return t.push(l)})}),Ti(t)}function Ove(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=df(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=t[r[0]],o>1&&(l|=t[r[0]+1]<<8),o>2&&(l|=t[r[0]+2]<<16),o>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}s.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Ti(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=Ti(s);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function an(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Ove(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Ti(t)}function co(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=kt(a),l=i.length;t.push(i),a<=60?(l++,t.push(new Uint8Array([a-1<<2]))):a<=256?(l+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(l+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(l+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(l+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),l+=a,s[0]=0,s[1]=l&255,s[2]=l>>8&255,s[3]=l>>16&255,r+=a}return Ti(t)}function Eve(e,t,r,a){var s=Ul(e),i=s.getUint32(4,!0),l=(a>1?12:8)+v4(i&(a>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);i&512&&(o=s.getUint32(l,!0),l+=4),l+=v4(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(l,!0),l+=4),i&32&&(u=s.getFloat64(l,!0),l+=8),i&64&&(d.setTime(d.getTime()+s.getFloat64(l,!0)*1e3),l+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Tve(e,t,r){var a=Ul(e),s=a.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(c=Cve(e,i),i+=16),s&2&&(u=a.getFloat64(i,!0),i+=8),s&4&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(o=a.getUint32(i,!0),i+=4),s&16&&(l=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function Ag(e,t){var r=new Uint8Array(32),a=Ul(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,_ve(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function Pg(e,t){var r=new Uint8Array(32),a=Ul(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function Ave(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Eve(e,t,r,e[0]);case 5:return Tve(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ea(e){var t=bt(e);return df(t[1][0].data)}function b4(e,t){var r=bt(t.data),a=sr(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(l){var o=bt(l.data),c=sr(o[1][0].data)>>>0;switch(a){case 1:i[c]=j1(o[3][0].data);break;case 8:{var u=e[ea(o[9][0].data)][0],d=bt(u.data),f=e[ea(d[1][0].data)][0],m=sr(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=bt(f.data);i[c]=p[3].map(function(y){return j1(y.data)}).join("")}break}}),i}function Pve(e,t){var r,a,s,i,l,o,c,u,d,f,m,p,y,h,v=bt(e),w=sr(v[1][0].data)>>>0,S=sr(v[2][0].data)>>>0,b=((a=(r=v[8])==null?void 0:r[0])==null?void 0:a.data)&&sr(v[8][0].data)>0||!1,x,g;if((i=(s=v[7])==null?void 0:s[0])!=null&&i.data&&t!=0)x=(o=(l=v[7])==null?void 0:l[0])==null?void 0:o.data,g=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)x=(p=(m=v[4])==null?void 0:m[0])==null?void 0:p.data,g=(h=(y=v[3])==null?void 0:y[0])==null?void 0:h.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var N=b?4:1,j=Ul(x),C=[],_=0;_<x.length/2;++_){var T=j.getUint16(_*2,!0);T<65535&&C.push([_,T])}if(C.length!=S)throw"Expected ".concat(S," cells, found ").concat(C.length);var E=[];for(_=0;_<C.length-1;++_)E[C[_][0]]=g.subarray(C[_][1]*N,C[_+1][1]*N);return C.length>=1&&(E[C[C.length-1][0]]=g.subarray(C[C.length-1][1]*N)),{R:w,cells:E}}function Dve(e,t){var r,a=bt(t.data),s=(r=a==null?void 0:a[7])!=null&&r[0]?sr(a[7][0].data)>>>0>0?1:0:-1,i=jN(a[5],function(l){return Pve(l,s)});return{nrows:sr(a[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,u){if(l[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));l[o.R][u]=c}),l},[])}}function Ive(e,t,r){var a,s=bt(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(sr(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(sr(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=rt(i);var l=bt(s[4][0].data),o=b4(e,e[ea(l[4][0].data)][0]),c=(a=l[17])!=null&&a[0]?b4(e,e[ea(l[17][0].data)][0]):[],u=bt(l[3][0].data),d=0;u[1].forEach(function(f){var m=bt(f.data),p=e[ea(m[2][0].data)][0],y=sr(p.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var h=Dve(e,p);h.data.forEach(function(v,w){v.forEach(function(S,b){var x=Xe({r:d+w,c:b}),g=Ave(S,o,c);g&&(r[x]=g)})}),d+=h.nrows})}function Fve(e,t){var r=bt(t.data),a={"!ref":"A1"},s=e[ea(r[2][0].data)],i=sr(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Ive(e,s[0],a),a}function Mve(e,t){var r,a=bt(t.data),s={name:(r=a[1])!=null&&r[0]?j1(a[1][0].data):"",sheets:[]},i=jN(a[2],ea);return i.forEach(function(l){e[l].forEach(function(o){var c=sr(o.meta[1][0].data);c==6e3&&s.sheets.push(Fve(e,o))})}),s}function Rve(e,t){var r=TN(),a=bt(t.data),s=jN(a[1],ea);if(s.forEach(function(i){e[i].forEach(function(l){var o=sr(l.meta[1][0].data);if(o==2){var c=Mve(e,l);c.sheets.forEach(function(u,d){AN(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Dg(e){var t,r,a,s,i={},l=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=an(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=rn(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){i[f.id]=f.messages,l.push(f.id)})}}),!l.length)throw new Error("File has no messages");var o=((s=(a=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&sr(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(u){var d=sr(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Rve(i,o)}function Lve(e,t,r){var a,s,i,l;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&sr(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Ul(e[7][0].data),d=0,f=[],m=Ul(e[4][0].data),p=0,y=[],h=0;h<t.length;++h){if(t[h]==null){u.setUint16(h*2,65535,!0),m.setUint16(h*2,65535);continue}u.setUint16(h*2,d,!0),m.setUint16(h*2,p,!0);var v,w;switch(typeof t[h]){case"string":v=Ag({t:"s",v:t[h]},r),w=Pg({t:"s",v:t[h]},r);break;case"number":v=Ag({t:"n",v:t[h]},r),w=Pg({t:"n",v:t[h]},r);break;case"boolean":v=Ag({t:"b",v:t[h]},r),w=Pg({t:"b",v:t[h]},r);break;default:throw new Error("Unsupported value "+t[h])}f.push(v),d+=v.length,y.push(w),p+=w.length,++c}for(e[2][0].data=kt(c);h<e[7][0].data.length/2;++h)u.setUint16(h*2,65535,!0),m.setUint16(h*2,65535,!0);return e[6][0].data=Ti(f),e[3][0].data=Ti(y),c}function $ve(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=ya(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(rt(a)));var i=Bh(r,{range:a,header:1}),l=["~Sh33tJ5~"];i.forEach(function(V){return V.forEach(function(X){typeof X=="string"&&l.push(X)})});var o={},c=[],u=We.read(t.numbers,{type:"base64"});u.FileIndex.map(function(V,X){return[V,u.FullPaths[X]]}).forEach(function(V){var X=V[0],J=V[1];if(X.type==2&&X.name.match(/\.iwa/)){var Z=X.content,le=an(Z),xe=rn(le);xe.forEach(function(ae){c.push(ae.id),o[ae.id]={deps:[],location:J,type:sr(ae.messages[0].meta[1][0].data)}})}}),c.sort(function(V,X){return V-X});var d=c.filter(function(V){return V>1}).map(function(V){return[V,kt(V)]});u.FileIndex.map(function(V,X){return[V,u.FullPaths[X]]}).forEach(function(V){var X=V[0];if(V[1],!!X.name.match(/\.iwa/)){var J=rn(an(X.content));J.forEach(function(Z){Z.messages.forEach(function(le){d.forEach(function(xe){Z.messages.some(function(ae){return sr(ae.meta[1][0].data)!=11006&&kve(ae.data,xe[1])})&&o[xe[0]].deps.push(Z.id)})})})}});for(var f=We.find(u,o[1].location),m=rn(an(f.content)),p,y=0;y<m.length;++y){var h=m[y];h.id==1&&(p=h)}var v=ea(bt(p.messages[0].data)[1][0].data);for(f=We.find(u,o[v].location),m=rn(an(f.content)),y=0;y<m.length;++y)h=m[y],h.id==v&&(p=h);for(v=ea(bt(p.messages[0].data)[2][0].data),f=We.find(u,o[v].location),m=rn(an(f.content)),y=0;y<m.length;++y)h=m[y],h.id==v&&(p=h);for(v=ea(bt(p.messages[0].data)[2][0].data),f=We.find(u,o[v].location),m=rn(an(f.content)),y=0;y<m.length;++y)h=m[y],h.id==v&&(p=h);var w=bt(p.messages[0].data);{w[6][0].data=kt(a.e.r+1),w[7][0].data=kt(a.e.c+1);var S=ea(w[46][0].data),b=We.find(u,o[S].location),x=rn(an(b.content));{for(var g=0;g<x.length&&x[g].id!=S;++g);if(x[g].id!=S)throw"Bad ColumnRowUIDMapArchive";var N=bt(x[g].messages[0].data);N[1]=[],N[2]=[],N[3]=[];for(var j=0;j<=a.e.c;++j){var C=[];C[1]=C[2]=[{type:0,data:kt(j+420690)}],N[1].push({type:2,data:Br(C)}),N[2].push({type:0,data:kt(j)}),N[3].push({type:0,data:kt(j)})}N[4]=[],N[5]=[],N[6]=[];for(var _=0;_<=a.e.r;++_)C=[],C[1]=C[2]=[{type:0,data:kt(_+726270)}],N[4].push({type:2,data:Br(C)}),N[5].push({type:0,data:kt(_)}),N[6].push({type:0,data:kt(_)});x[g].messages[0].data=Br(N)}b.content=co(oo(x)),b.size=b.content.length,delete w[46];var T=bt(w[4][0].data);{T[7][0].data=kt(a.e.r+1);var E=bt(T[1][0].data),k=ea(E[2][0].data);b=We.find(u,o[k].location),x=rn(an(b.content));{if(x[0].id!=k)throw"Bad HeaderStorageBucket";var A=bt(x[0].messages[0].data);for(_=0;_<i.length;++_){var P=bt(A[2][0].data);P[1][0].data=kt(_),P[4][0].data=kt(i[_].length),A[2][_]={type:A[2][0].type,data:Br(P)}}x[0].messages[0].data=Br(A)}b.content=co(oo(x)),b.size=b.content.length;var F=ea(T[2][0].data);b=We.find(u,o[F].location),x=rn(an(b.content));{if(x[0].id!=F)throw"Bad HeaderStorageBucket";for(A=bt(x[0].messages[0].data),j=0;j<=a.e.c;++j)P=bt(A[2][0].data),P[1][0].data=kt(j),P[4][0].data=kt(a.e.r+1),A[2][j]={type:A[2][0].type,data:Br(P)};x[0].messages[0].data=Br(A)}b.content=co(oo(x)),b.size=b.content.length;var U=ea(T[4][0].data);(function(){for(var V=We.find(u,o[U].location),X=rn(an(V.content)),J,Z=0;Z<X.length;++Z){var le=X[Z];le.id==U&&(J=le)}var xe=bt(J.messages[0].data);{xe[3]=[];var ae=[];l.forEach(function(D,se){ae[1]=[{type:0,data:kt(se)}],ae[2]=[{type:0,data:kt(1)}],ae[3]=[{type:2,data:Sve(D)}],xe[3].push({type:2,data:Br(ae)})})}J.messages[0].data=Br(xe);var M=oo(X),G=co(M);V.content=G,V.size=V.content.length})();var W=bt(T[3][0].data);{var K=W[1][0];delete W[2];var B=bt(K.data);{var ee=ea(B[2][0].data);(function(){for(var V=We.find(u,o[ee].location),X=rn(an(V.content)),J,Z=0;Z<X.length;++Z){var le=X[Z];le.id==ee&&(J=le)}var xe=bt(J.messages[0].data);{delete xe[6],delete W[7];var ae=new Uint8Array(xe[5][0].data);xe[5]=[];for(var M=0,G=0;G<=a.e.r;++G){var D=bt(ae);M+=Lve(D,i[G],l),D[1][0].data=kt(G),xe[5].push({data:Br(D),type:2})}xe[1]=[{type:0,data:kt(a.e.c+1)}],xe[2]=[{type:0,data:kt(a.e.r+1)}],xe[3]=[{type:0,data:kt(M)}],xe[4]=[{type:0,data:kt(a.e.r+1)}]}J.messages[0].data=Br(xe);var se=oo(X),I=co(se);V.content=I,V.size=V.content.length})()}K.data=Br(B)}T[3][0].data=Br(W)}w[4][0].data=Br(T)}p.messages[0].data=Br(w);var oe=oo(m),R=co(oe);return f.content=R,f.size=f.content.length,u}function VD(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function SN(e){VD([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function kN(e){VD([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Bve(e){return lt.WS.indexOf(e)>-1?"sheet":e==lt.CS?"chart":e==lt.DS?"dialog":e==lt.MS?"macro":e&&e.length?e:"sheet"}function Uve(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,Bve(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Wve(e,t,r,a,s,i,l,o,c,u,d,f){try{i[a]=qu($a(e,r,!0),t);var m=pr(e,t),p;switch(o){case"sheet":p=hye(m,t,s,c,i[a],u,d,f);break;case"chart":if(p=xye(m,t,s,c,i[a],u,d,f),!p||!p["!drawel"])break;var y=ku(p["!drawel"].Target,t),h=nf(y),v=rhe($a(e,y,!0),qu($a(e,h,!0),y)),w=ku(v,y),S=nf(w);p=qge($a(e,w,!0),w,c,qu($a(e,S,!0),w),u,p);break;case"macro":p=pye(m,t,s,c,i[a],u,d,f);break;case"dialog":p=gye(m,t,s,c,i[a],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}l[a]=p;var b=[];i&&i[a]&&lr(i[a]).forEach(function(x){var g="";if(i[a][x].Type==lt.CMNT){g=ku(i[a][x].Target,t);var N=wye(pr(e,g,!0),g,c);if(!N||!N.length)return;s4(p,N,!1)}i[a][x].Type==lt.TCMNT&&(g=ku(i[a][x].Target,t),b=b.concat(nhe(pr(e,g,!0),c)))}),b&&b.length&&s4(p,b,!0,c.people||[])}catch(x){if(c.WTF)throw x}}function en(e){return e.charAt(0)=="/"?e.slice(1):e}function HD(e,t){if(Kc(),t=t||{},SN(t),nn(e,"META-INF/manifest.xml")||nn(e,"objectdata.xml"))return p4(e,t);if(nn(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Dg<"u"){if(e.FileIndex)return Dg(e);var r=We.utils.cfb_new();return C_(e).forEach(function(P){at(r,P,i6(e,P))}),Dg(r)}throw new Error("Unsupported NUMBERS file")}if(!nn(e,"[Content_Types].xml"))throw nn(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):nn(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=C_(e),s=Jue($a(e,"[Content_Types].xml")),i=!1,l,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",pr(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!pr(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Ku=[],s.sst)try{Ku=bye(pr(e,en(s.sst)),s.sst,t)}catch(P){if(t.WTF)throw P}t.cellStyles&&s.themes.length&&(c=vye($a(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=yye(pr(e,en(s.style)),s.style,c,t))}s.links.map(function(P){try{var F=qu($a(e,nf(en(P))),P);return jye(pr(e,en(P)),F,P,t)}catch{}});var d=mye(pr(e,en(s.workbooks[0])),s.workbooks[0],t),f={},m="";s.coreprops.length&&(m=pr(e,en(s.coreprops[0]),!0),m&&(f=T6(m)),s.extprops.length!==0&&(m=pr(e,en(s.extprops[0]),!0),m&&sde(m,f,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=$a(e,en(s.custprops[0]),!0),m&&(p=lde(m,t)));var y={};if((t.bookSheets||t.bookProps)&&(d.Sheets?l=d.Sheets.map(function(F){return F.name}):f.Worksheets&&f.SheetNames.length>0&&(l=f.SheetNames),t.bookProps&&(y.Props=f,y.Custprops=p),t.bookSheets&&typeof l<"u"&&(y.SheetNames=l),t.bookSheets?y.SheetNames:t.bookProps))return y;l={};var h={};t.bookDeps&&s.calcchain&&(h=Nye(pr(e,en(s.calcchain)),s.calcchain));var v=0,w={},S,b;{var x=d.Sheets;f.Worksheets=x.length,f.SheetNames=[];for(var g=0;g!=x.length;++g)f.SheetNames[g]=x[g].name}var N=i?"bin":"xml",j=s.workbooks[0].lastIndexOf("/"),C=(s.workbooks[0].slice(0,j+1)+"_rels/"+s.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");nn(e,C)||(C="xl/_rels/workbook."+N+".rels");var _=qu($a(e,C,!0),C.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Sye(pr(e,en(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=ihe(pr(e,en(s.people[0])),t)),_&&(_=Uve(_,d.Sheets));var T=pr(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var E="sheet";if(_&&_[v]?(S="xl/"+_[v][1].replace(/[\/]?xl\//,""),nn(e,S)||(S=_[v][1]),nn(e,S)||(S=C.replace(/_rels\/.*$/,"")+_[v][1]),E=_[v][2]):(S="xl/worksheets/sheet"+(v+1-T)+"."+N,S=S.replace(/sheet0\./,"sheet.")),b=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,A=0;A!=t.sheets.length;++A)typeof t.sheets[A]=="number"&&t.sheets[A]==v&&(k=1),typeof t.sheets[A]=="string"&&t.sheets[A].toLowerCase()==f.SheetNames[v].toLowerCase()&&(k=1);if(!k)continue e}}Wve(e,S,b,f.SheetNames[v],v,w,l,E,t,d,c,u)}return y={Directory:s,Workbook:d,Props:f,Custprops:p,Deps:h,Sheets:l,SheetNames:f.SheetNames,Strings:Ku,Styles:u,Themes:c,SSF:It(ze)},t&&t.bookFiles&&(e.files?(y.keys=a,y.files=e.files):(y.keys=[],y.files={},e.FullPaths.forEach(function(P,F){P=P.replace(/^Root Entry[\/]/,""),y.keys.push(P),y.files[P]=e.FileIndex[F]}))),t&&t.bookVBA&&(s.vba.length>0?y.vbaraw=pr(e,en(s.vba[0]),!0):s.defaults&&s.defaults.bin===hhe&&(y.vbaraw=pr(e,"xl/vbaProject.bin",!0))),y}function qve(e,t){var r=t||{},a="Workbook",s=We.find(e,a);try{if(a="/!DataSpaces/Version",s=We.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(k0e(s.content),a="/!DataSpaces/DataSpaceMap",s=We.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=_0e(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=We.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=O0e(s.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=We.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);T0e(s.content)}catch{}if(a="/EncryptionInfo",s=We.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=A0e(s.content);if(a="/EncryptedPackage",s=We.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Kve(e,t){return t.bookType=="ods"?zD(e,t):t.bookType=="numbers"?$ve(e,t):t.bookType=="xlsb"?zve(e,t):GD(e,t)}function zve(e,t){Ao=1024,e&&!e.SSF&&(e.SSF=It(ze)),e&&e.SSF&&(Kc(),Df(e.SSF),t.revssf=Zx(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zu?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=xD.indexOf(t.bookType)>-1,s=cN();kN(t=t||{});var i=zw(),l="",o=0;if(t.cellXfs=[],Hi(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",at(i,l,A6(e.Props,t)),s.coreprops.push(l),Ct(t.rels,2,l,lt.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,at(i,l,I6(e.Props)),s.extprops.push(l),Ct(t.rels,3,l,lt.EXT_PROPS),e.Custprops!==e.Props&&lr(e.Custprops||{}).length>0&&(l="docProps/custom.xml",at(i,l,F6(e.Custprops)),s.custprops.push(l),Ct(t.rels,4,l,lt.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,at(i,l,Cye(o-1,l,t,e,d)),s.sheets.push(l),Ct(t.wbrels,-1,"worksheets/sheet"+o+"."+r,lt.WS[0])}if(f){var p=f["!comments"],y=!1,h="";p&&p.length>0&&(h="xl/comments"+o+"."+r,at(i,h,Eye(p,h)),s.comments.push(h),Ct(d,-1,"../comments"+o+"."+r,lt.CMNT),y=!0),f["!legacy"]&&y&&at(i,"xl/drawings/vmlDrawing"+o+".vml",mD(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&at(i,nf(l),zo(d))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,at(i,l,Oye(t.Strings,l,t)),s.strs.push(l),Ct(t.wbrels,-1,"sharedStrings."+r,lt.SST)),l="xl/workbook."+r,at(i,l,kye(e,l)),s.workbooks.push(l),Ct(t.rels,1,l,lt.WB),l="xl/theme/theme1.xml",at(i,l,xN(e.Themes,t)),s.themes.push(l),Ct(t.wbrels,-1,"theme/theme1.xml",lt.THEME),l="xl/styles."+r,at(i,l,_ye(e,l,t)),s.styles.push(l),Ct(t.wbrels,-1,"styles."+r,lt.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",at(i,l,e.vbaraw),s.vba.push(l),Ct(t.wbrels,-1,"vbaProject.bin",lt.VBA)),l="xl/metadata."+r,at(i,l,Tye(l)),s.metadata.push(l),Ct(t.wbrels,-1,"metadata."+r,lt.XLMETA),at(i,"[Content_Types].xml",O6(s,t)),at(i,"_rels/.rels",zo(t.rels)),at(i,"xl/_rels/workbook."+r+".rels",zo(t.wbrels)),delete t.revssf,delete t.ssf,i}function GD(e,t){Ao=1024,e&&!e.SSF&&(e.SSF=It(ze)),e&&e.SSF&&(Kc(),Df(e.SSF),t.revssf=Zx(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zu?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=xD.indexOf(t.bookType)>-1,s=cN();kN(t=t||{});var i=zw(),l="",o=0;if(t.cellXfs=[],Hi(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",at(i,l,A6(e.Props,t)),s.coreprops.push(l),Ct(t.rels,2,l,lt.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,at(i,l,I6(e.Props)),s.extprops.push(l),Ct(t.rels,3,l,lt.EXT_PROPS),e.Custprops!==e.Props&&lr(e.Custprops||{}).length>0&&(l="docProps/custom.xml",at(i,l,F6(e.Custprops)),s.custprops.push(l),Ct(t.rels,4,l,lt.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},m=e.Sheets[e.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,at(i,l,CD(o-1,t,e,f)),s.sheets.push(l),Ct(t.wbrels,-1,"worksheets/sheet"+o+"."+r,lt.WS[0])}if(m){var y=m["!comments"],h=!1,v="";if(y&&y.length>0){var w=!1;y.forEach(function(S){S[1].forEach(function(b){b.T==!0&&(w=!0)})}),w&&(v="xl/threadedComments/threadedComment"+o+"."+r,at(i,v,she(y,d,t)),s.threadedcomments.push(v),Ct(f,-1,"../threadedComments/threadedComment"+o+"."+r,lt.TCMNT)),v="xl/comments"+o+"."+r,at(i,v,hD(y)),s.comments.push(v),Ct(f,-1,"../comments"+o+"."+r,lt.CMNT),h=!0}m["!legacy"]&&h&&at(i,"xl/drawings/vmlDrawing"+o+".vml",mD(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&at(i,nf(l),zo(f))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,at(i,l,tD(t.Strings,t)),s.strs.push(l),Ct(t.wbrels,-1,"sharedStrings."+r,lt.SST)),l="xl/workbook."+r,at(i,l,PD(e)),s.workbooks.push(l),Ct(t.rels,1,l,lt.WB),l="xl/theme/theme1.xml",at(i,l,xN(e.Themes,t)),s.themes.push(l),Ct(t.wbrels,-1,"theme/theme1.xml",lt.THEME),l="xl/styles."+r,at(i,l,cD(e,t)),s.styles.push(l),Ct(t.wbrels,-1,"styles."+r,lt.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",at(i,l,e.vbaraw),s.vba.push(l),Ct(t.wbrels,-1,"vbaProject.bin",lt.VBA)),l="xl/metadata."+r,at(i,l,fD()),s.metadata.push(l),Ct(t.wbrels,-1,"metadata."+r,lt.XLMETA),d.length>1&&(l="xl/persons/person.xml",at(i,l,lhe(d)),s.people.push(l),Ct(t.wbrels,-1,"persons/person.xml",lt.PEOPLE)),at(i,"[Content_Types].xml",O6(s,t)),at(i,"_rels/.rels",zo(t.rels)),at(i,"xl/_rels/workbook."+r+".rels",zo(t.wbrels)),delete t.revssf,delete t.ssf,i}function CN(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Va(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Vve(e,t){return We.find(e,"EncryptedPackage")?qve(e,t):NN(e,t)}function Hve(e,t){var r,a=e,s=t||{};return s.type||(s.type=it&&Buffer.isBuffer(e)?"buffer":"base64"),r=l6(a,s),HD(r,s)}function XD(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return w1(e.slice(r),t);default:break e}return Cc.to_workbook(e,t)}function Gve(e,t){var r="",a=CN(e,t);switch(t.type){case"base64":r=Va(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Rl(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=At(r)),t.type="binary",XD(r,t)}function Xve(e,t){var r=e;return t.type=="base64"&&(r=Va(r)),r=xt.utils.decode(1200,r.slice(2),"str"),t.type="binary",XD(r,t)}function Yve(e){return e.match(/[^\x00-\x7F]/)?Jn(e):e}function Ig(e,t,r,a){return a?(r.type="string",Cc.to_workbook(e,r)):Cc.to_workbook(t,r)}function ff(e,t){Qx();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return ff(new Uint8Array(e),(r=It(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Ho={},r.dateNF&&(Ho.dateNF=r.dateNF),r.type||(r.type=it&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=it?"buffer":"binary",a=Jce(e),typeof Uint8Array<"u"&&!it&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=Yve(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=It(r),r.type="array",ff(Uw(a),r)}switch((s=CN(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Vve(We.read(a,r),r);break;case 9:if(s[1]<=8)return NN(a,r);break;case 60:return w1(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return o0e(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Z6.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Hve(a,r):Ig(e,a,r,i);case 239:return s[3]===60?w1(a,r):Ig(e,a,r,i);case 255:if(s[1]===254)return Xve(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return bl.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return bl.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return b1.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return iD.to_workbook(a,r);break;case 10:case 13:case 32:return Gve(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return l0e.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?b1.to_workbook(a,r):Ig(e,a,r,i)}function w4(e,t){var r=t||{};return r.type="file",ff(e,r)}function YD(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return If(t.file,We.write(e,{type:it?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return We.write(e,t)}function Qve(e,t){var r=It(t||{}),a=Kve(e,r);return QD(a,r)}function Jve(e,t){var r=It(t||{}),a=GD(e,r);return QD(a,r)}function QD(e,t){var r={},a=it?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?We.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(Pf(s))}return t.password&&typeof encrypt_agile<"u"?YD(encrypt_agile(s,t.password),t):t.type==="file"?If(t.file,s):t.type=="string"?At(s):s}function Zve(e,t){var r=t||{},a=rve(e,r);return YD(a,r)}function Gn(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return Zd(Jn(a));case"binary":return Jn(a);case"string":return e;case"file":return If(t.file,a,"utf8");case"buffer":return it?zs(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):Gn(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function e1e(e,t){switch(t.type){case"base64":return Zd(e);case"binary":return e;case"string":return e;case"file":return If(t.file,e,"binary");case"buffer":return it?zs(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function F0(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?Zd(r):t.type=="string"?At(r):r;case"file":return If(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function _N(e,t){Qx(),AD(e);var r=It(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=_N(e,r);return r.type="array",Pf(a)}return Jve(e,r)}function ip(e,t){Qx(),AD(e);var r=It(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=ip(e,r);return r.type="array",Pf(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Gn(Xye(e,r),r);case"slk":case"sylk":return Gn(J6.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Gn(UD(e.Sheets[e.SheetNames[s]],r),r);case"txt":return e1e(eI(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Gn(EN(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Gn(Z6.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return F0(b1.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Gn(Cc.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Gn(iD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Gn(eD.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Gn(zD(e,r),r);case"wk1":return F0(bl.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return F0(bl.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),F0(MD(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Zve(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Qve(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ON(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function N4(e,t,r){var a=r||{};return a.type="file",a.file=t,ON(a),ip(e,a)}function t1e(e,t,r){var a=r||{};return a.type="file",a.file=t,ON(a),_N(e,a)}function r1e(e,t,r,a){var s=r||{};s.type="file",s.file=e,ON(s),s.type="buffer";var i=a;return i instanceof Function||(i=r),fi.writeFile(e,ip(t,s),i)}function JD(e,t,r,a,s,i,l,o){var c=nr(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!l||e[r])for(var p=t.s.c;p<=t.e.c;++p){var y=l?e[r][p]:e[a[p]+c];if(y===void 0||y.t===void 0){if(u===void 0)continue;i[p]!=null&&(m[i[p]]=u);continue}var h=y.v;switch(y.t){case"z":if(h==null)break;continue;case"e":h=h==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(i[p]!=null){if(h==null)if(y.t=="e"&&h===null)m[i[p]]=null;else if(u!==void 0)m[i[p]]=u;else if(d&&h===null)m[i[p]]=null;else continue;else m[i[p]]=d&&(y.t!=="n"||y.t==="n"&&o.rawNumbers!==!1)?h:is(y,h,o);h!=null&&(f=!1)}}return{row:m,isempty:f}}function Bh(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof d){case"string":c=mt(d);break;case"number":c=mt(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(s=0);var f=nr(c.s.r),m=[],p=[],y=0,h=0,v=Array.isArray(e),w=c.s.r,S=0,b={};v&&!e[w]&&(e[w]=[]);var x=u.skipHidden&&e["!cols"]||[],g=u.skipHidden&&e["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(x[S]||{}).hidden)switch(m[S]=Kt(S),r=v?e[w][S]:e[m[S]+f],a){case 1:i[S]=S-c.s.c;break;case 2:i[S]=m[S];break;case 3:i[S]=u.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=is(r,null,u),h=b[l]||0,!h)b[l]=1;else{do o=l+"_"+h++;while(b[o]);b[l]=h,b[o]=1}i[S]=o}for(w=c.s.r+s;w<=c.e.r;++w)if(!(g[w]||{}).hidden){var N=JD(e,c,w,m,a,i,v,u);(N.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(p[y++]=N.row)}return p.length=y,p}var j4=/"/g;function ZD(e,t,r,a,s,i,l,o){for(var c=!0,u=[],d="",f=nr(r),m=t.s.c;m<=t.e.c;++m)if(a[m]){var p=o.dense?(e[r]||[])[m]:e[a[m]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:is(p,null,o));for(var y=0,h=0;y!==d.length;++y)if((h=d.charCodeAt(y))===s||h===i||h===34||o.forceQuotes){d='"'+d.replace(j4,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(j4,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(l)}function EN(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=mt(e["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),o=a.RS!==void 0?a.RS:`
`,c=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(f[y]=Kt(y));for(var h=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(d=ZD(e,s,v,f,l,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),(d||a.blankrows!==!1)&&r.push((h++?o:"")+d)));return delete a.dense,r.join("")}function eI(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=EN(e,t);if(typeof xt>"u"||t.type=="string")return r;var a=xt.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+a}function a1e(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=mt(e["!ref"]),i="",l=[],o,c=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)l[o]=Kt(o);for(var d=s.s.r;d<=s.e.r;++d)for(i=nr(d),o=s.s.c;o<=s.e.c;++o)if(t=l[o]+i,r=u?(e[d]||[])[o]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function tI(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},l=0,o=0;if(i&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var c=typeof a.origin=="string"?Jt(a.origin):a.origin;l=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:l+t.length-1+s}};if(i["!ref"]){var f=mt(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),l==-1&&(l=f.e.r+1,d.e.r=l+t.length-1+s)}else l==-1&&(l=0,d.e.r=t.length-1+s);var m=a.header||[],p=0;t.forEach(function(h,v){lr(h).forEach(function(w){(p=m.indexOf(w))==-1&&(m[p=m.length]=w);var S=h[w],b="z",x="",g=Xe({c:o+p,r:l+v+s});u=mf(i,g),S&&typeof S=="object"&&!(S instanceof Date)?i[g]=S:(typeof S=="number"?b="n":typeof S=="boolean"?b="b":typeof S=="string"?b="s":S instanceof Date?(b="d",a.cellDates||(b="n",S=_r(S)),x=a.dateNF||ze[14]):S===null&&a.nullError&&(b="e",S=0),u?(u.t=b,u.v=S,delete u.w,delete u.R,x&&(u.z=x)):i[g]=u={t:b,v:S},x&&(u.z=x))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var y=nr(l);if(s)for(p=0;p<m.length;++p)i[Kt(p+o)+y]={t:"s",v:m[p]};return i["!ref"]=rt(d),i}function n1e(e,t){return tI(null,e,t)}function mf(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Jt(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?mf(e,Xe(t)):mf(e,Xe({r:t,c:r||0}))}function s1e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function TN(){return{SheetNames:[],Sheets:{}}}function AN(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var l=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=l+s)!=-1;++s);}if(TD(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function i1e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=s1e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function l1e(e,t){return e.z=t,e}function rI(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function o1e(e,t,r){return rI(e,"#"+t,r)}function c1e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function u1e(e,t,r,a){for(var s=typeof t!="string"?t:mt(t),i=typeof t=="string"?t:rt(t),l=s.s.r;l<=s.e.r;++l)for(var o=s.s.c;o<=s.e.c;++o){var c=mf(e,l,o);c.t="n",c.F=i,delete c.v,l==s.s.r&&o==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var aI={encode_col:Kt,encode_row:nr,encode_cell:Xe,encode_range:rt,decode_col:aN,decode_row:rN,split_cell:Eue,decode_cell:Jt,decode_range:ya,format_cell:is,sheet_add_aoa:w6,sheet_add_json:tI,sheet_add_dom:WD,aoa_to_sheet:Vc,json_to_sheet:n1e,table_to_sheet:qD,table_to_book:bve,sheet_to_csv:EN,sheet_to_txt:eI,sheet_to_json:Bh,sheet_to_html:UD,sheet_to_formulae:a1e,sheet_to_row_object_array:Bh,sheet_get_cell:mf,book_new:TN,book_append_sheet:AN,book_set_sheet_visibility:i1e,cell_set_number_format:l1e,cell_set_hyperlink:rI,cell_set_internal_link:o1e,cell_add_comment:c1e,sheet_set_array_formula:u1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},lp;function d1e(e){lp=e}function f1e(e,t){var r=lp(),a=t??{};if(e==null||e["!ref"]==null)return r.push(null),r;var s=mt(e["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),o=a.RS!==void 0?a.RS:`
`,c=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],p=a.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(f[y]=Kt(y));var h=s.s.r,v=!1,w=0;return r._read=function(){if(!v)return v=!0,r.push("\uFEFF");for(;h<=s.e.r;)if(++h,!(p[h-1]||{}).hidden&&(d=ZD(e,s,h-1,f,l,c,i,a),d!=null&&(a.strip&&(d=d.replace(u,"")),d||a.blankrows!==!1)))return r.push((w++?o:"")+d);return r.push(null)},r}function m1e(e,t){var r=lp(),a=t||{},s=a.header!=null?a.header:LD,i=a.footer!=null?a.footer:$D;r.push(s);var l=ya(e["!ref"]);a.dense=Array.isArray(e),r.push(BD(e,l,a));var o=l.s.r,c=!1;return r._read=function(){if(o>l.e.r)return c||(c=!0,r.push("</table>"+i)),r.push(null);for(;o<=l.e.r;){r.push(RD(e,l,o,a)),++o;break}},r}function h1e(e,t){var r=lp({objectMode:!0});if(e==null||e["!ref"]==null)return r.push(null),r;var a={t:"n",v:0},s=0,i=1,l=[],o=0,c="",u={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)&&(s=3),typeof f){case"string":u=mt(f);break;case"number":u=mt(e["!ref"]),u.s.r=f;break;default:u=f}s>0&&(i=0);var m=nr(u.s.r),p=[],y=0,h=Array.isArray(e),v=u.s.r,w=0,S={};h&&!e[v]&&(e[v]=[]);var b=d.skipHidden&&e["!cols"]||[],x=d.skipHidden&&e["!rows"]||[];for(w=u.s.c;w<=u.e.c;++w)if(!(b[w]||{}).hidden)switch(p[w]=Kt(w),a=h?e[v][w]:e[p[w]+m],s){case 1:l[w]=w-u.s.c;break;case 2:l[w]=p[w];break;case 3:l[w]=d.header[w-u.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),c=o=is(a,null,d),y=S[o]||0,!y)S[o]=1;else{do c=o+"_"+y++;while(S[c]);S[o]=y,S[c]=1}l[w]=c}return v=u.s.r+i,r._read=function(){for(;v<=u.e.r;)if(!(x[v-1]||{}).hidden){var g=JD(e,u,v,p,s,l,h,d);if(++v,g.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows)){r.push(g.row);return}}return r.push(null)},r}var x1e={to_json:h1e,to_html:m1e,to_csv:f1e,set_readable:d1e};const p1e=Jd.version,hf=Object.freeze(Object.defineProperty({__proto__:null,CFB:We,SSF:e6,parse_xlscfb:NN,parse_zip:HD,read:ff,readFile:w4,readFileSync:w4,set_cptable:wce,set_fs:Yce,stream:x1e,utils:aI,version:p1e,write:ip,writeFile:N4,writeFileAsync:r1e,writeFileSync:N4,writeFileXLSX:t1e,writeXLSX:_N},Symbol.toStringTag,{value:"Module"})),Fg=()=>{const e=Qe(),t=wa(),[r,a]=O.useState(null),[s,i]=O.useState([]),[l,o]=O.useState([]),[c,u]=O.useState(!0),[d,f]=O.useState(null),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState(""),[S,b]=O.useState("materialName"),[x,g]=O.useState("asc"),[N,j]=O.useState(!1),[C,_]=O.useState(!1),T=O.useRef(null),{notifications:E,markAsRead:k,markAllAsRead:A,clearAll:P,refreshNotifications:F}=Ki("Kuwait City"),U=()=>{const M=W();return M==="raw-materials"?E.filter(G=>G.isTransferOrder&&(G.itemType==="Raw Material"||G.itemType==="Mixed")):M==="finished-goods"?E.filter(G=>G.isTransferOrder&&(G.itemType==="Finished Goods"||G.itemType==="Mixed")):E},W=()=>{const M=t.pathname;return M.includes("/raw-materials")?"raw-materials":M.includes("/finished-goods")?"finished-goods":M.includes("/sales-orders")?"sales-orders":"overview"},K=W();O.useEffect(()=>{B(),oe()},[]),O.useEffect(()=>{c||oe()},[c,m,y,v,S,x]),O.useEffect(()=>{E.length>0&&E.some(G=>{var D,se,I;return!G.read&&G.type==="success"&&(((D=G.title)==null?void 0:D.includes("Transfer Order Accepted"))||((se=G.title)==null?void 0:se.includes("Items Received from Central Kitchen"))||((I=G.title)==null?void 0:I.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected, refreshing inventory..."),oe())},[E]);const B=async()=>{try{u(!0),f(null);const M=await de.getOutlets({limit:1e3});if(M.success){const G=M.data.find(D=>D.outletName==="Kuwait City");G?a(G):f("Kuwait City not found")}else f("Failed to load outlet data")}catch(M){f(M instanceof Error?M.message:"Failed to load outlet data"),console.error("Error loading outlet data:",M)}finally{u(!1)}},ee=()=>{p(""),h(""),w(""),b(K==="finished-goods"?"productName":"materialName"),g("asc"),oe()},oe=async()=>{try{console.log("Loading Kuwait City inventory from dedicated database");const M=await de.getKuwaitCityRawMaterials({limit:1e3,search:m,subCategory:y,status:v,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(M.success)if(console.log("Loaded Kuwait City Raw Materials:",M.data),M.data&&M.data.length>0){const D=M.data.map(se=>({id:se._id||se.id,outletId:"kuwait-city",outletCode:"OUT-001",outletName:"Kuwait City",materialId:se._id,materialCode:se.materialCode,materialName:se.materialName,category:se.subCategory||se.category,unitOfMeasure:se.unitOfMeasure,unitPrice:se.unitPrice,currentStock:se.currentStock,reservedStock:0,availableStock:se.currentStock,minimumStock:se.minimumStock,maximumStock:se.maximumStock,reorderPoint:se.reorderPoint,totalValue:se.currentStock*se.unitPrice,location:"Main Storage",batchNumber:`KCBATCH-${se.materialCode}-${Date.now()}`,supplier:"Various Suppliers",lastUpdated:se.updatedAt,status:se.status,notes:se.notes||"",isActive:se.isActive}));i(D)}else console.log("No raw materials inventory found for Kuwait City"),i([]);else console.error("Failed to load raw materials inventory:","API Error"),i([]);const G=await de.getKuwaitCityFinishedProducts({limit:1e3,search:m,subCategory:y,status:v,sortBy:S==="productName"?"productName":S,sortOrder:x});if(G.success)if(console.log("Loaded Kuwait City Finished Products:",G.data),G.data&&G.data.length>0){const D=G.data.map(se=>{var I;return{id:se._id||se.id,outletId:"kuwait-city",outletCode:"OUT-001",outletName:"Kuwait City",productId:se._id,productCode:se.productCode,productName:se.productName,category:se.subCategory||se.category,unitOfMeasure:se.unitOfMeasure,unitPrice:se.unitPrice,costPrice:se.costPrice,currentStock:se.currentStock,reservedStock:0,availableStock:se.currentStock,minimumStock:se.minimumStock,maximumStock:se.maximumStock,reorderPoint:se.reorderPoint,totalValue:se.currentStock*se.unitPrice,productionDate:new Date().toISOString(),expiryDate:se.shelfLife?new Date(Date.now()+se.shelfLife*24*60*60*1e3).toISOString():new Date(Date.now()+6048e5).toISOString(),batchNumber:`KCFG-${se.productCode}-${Date.now()}`,storageLocation:"Main Storage",storageTemperature:((I=se.storageRequirements)==null?void 0:I.temperature)||"Room Temperature",qualityStatus:"Good",qualityNotes:"",status:se.status,transferSource:"Production",lastUpdated:se.updatedAt,notes:se.notes||"",isActive:se.isActive}});o(D)}else console.log("No finished goods inventory found for Kuwait City"),o([]);else console.error("Failed to load finished goods inventory:","API Error")}catch(M){f(M instanceof Error?M.message:"Failed to load inventory"),console.error("Error loading inventory:",M)}},R=async M=>{var D,se;const G=(D=M.target.files)==null?void 0:D[0];if(G)try{if(_(!0),K==="raw-materials"){const I=G.name.toLowerCase();if(!(I.endsWith(".xlsx")||I.endsWith(".xls"))){alert("Please select an Excel file (.xlsx or .xls) for Raw Materials import");return}const ce=await de.importKuwaitCityRawMaterialsExcel(G);alert(ce.message||"Raw materials import completed"),await oe()}else if(K==="finished-goods"){const I=G.name.toLowerCase();let ce=[];if(I.endsWith(".json")){const te=await G.text(),Ue=JSON.parse(te);ce=Array.isArray(Ue)?Ue:Ue.products||[]}else if(I.endsWith(".csv"))ce=(await G.text()).split(`
`).filter(Je=>Je.trim()).slice(1).map(Je=>{const Ge=Je.split(",").map(Ke=>Ke.replace(/\"/g,"").trim());return{productCode:Ge[0]||Ge[1],productName:Ge[1]||Ge[2],subCategory:Ge[2]||"MAIN COURSES",unitOfMeasure:Ge[3]||"piece",unitPrice:parseFloat(Ge[4])||0,currentStock:parseFloat(Ge[5])||0}}).filter(Je=>Je.productCode&&Je.productName);else if(I.endsWith(".xlsx")||I.endsWith(".xls")){const te=await G.arrayBuffer(),Ue=ff(te,{type:"array"}),et=Ue.SheetNames[0],Je=Ue.Sheets[et];ce=aI.sheet_to_json(Je,{defval:""}).map(Ke=>{const Le=ye=>{const $e=ye.find(Be=>Object.keys(Ke).some(Pt=>Pt.toString().trim().toLowerCase()===Be));if(!$e)return;const ot=Object.keys(Ke).find(Be=>Be.toString().trim().toLowerCase()===$e);return Ke[ot]},pe=(Le(["product code","sku","code"])||"").toString().trim(),ne=(Le(["product name","item name","name"])||"").toString().trim(),je=(Le(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim(),re=(Le(["unit of measure","unit","uom"])||"piece").toString().trim(),ve=Le(["unit price","price"]),Ie=Le(["current stock","current quantity","quantity","qty"]);return{productCode:pe,productName:ne,subCategory:je,category:je,unitOfMeasure:re,unitPrice:Number.parseFloat(String(ve))||0,currentStock:Number.parseFloat(String(Ie))||0}}).filter(Ke=>Ke.productCode&&Ke.productName)}else{alert("Please select an Excel (.xlsx/.xls), CSV or JSON file for Finished Products import");return}const ue=await de.importKuwaitCityFinishedProducts(ce);alert(ue.message||`Finished products import completed. Success: ${((se=ue.data)==null?void 0:se.successCount)||0}`),await oe()}}catch(I){alert("Error importing file: "+(I instanceof Error?I.message:"Unknown error"))}finally{_(!1),T.current&&(T.current.value="")}},V=async()=>{try{j(!0),console.log("Starting export of Kuwait City raw materials..."),await de.exportKuwaitCityRawMaterials({search:m,subCategory:y,status:v}),console.log("Export completed successfully")}catch(M){console.error("Error exporting raw materials:",M),alert(`Failed to export raw materials: ${M instanceof Error?M.message:"Unknown error"}`)}finally{j(!1)}},X=async()=>{try{j(!0),console.log("Starting export of Kuwait City finished goods..."),await de.exportKuwaitCityFinishedProducts({search:m,subCategory:y,status:v}),console.log("Export completed successfully")}catch(M){console.error("Error exporting finished goods:",M),alert(`Failed to export finished goods: ${M instanceof Error?M.message:"Unknown error"}`)}finally{j(!1)}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Kuwait City..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:B,className:"btn-primary",children:"Retry"})]})});const J=()=>{switch(K){case"raw-materials":return Z();case"finished-goods":return le();case"sales-orders":return xe();default:return ae()}},Z=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{var M;return(M=T.current)==null?void 0:M.click()},className:"btn-secondary flex items-center",title:"Import raw materials from Excel (.xlsx/.xls)",disabled:C,children:C?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ta,{className:"h-4 w-4 mr-2"}),"Import"]})}),n.jsxs("button",{onClick:V,disabled:N||C,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:M=>p(M.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsxs("select",{value:y,onChange:M=>h(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Categories"}),n.jsx("option",{value:"NON FOOD - PACKING",children:"NON FOOD - PACKING"}),n.jsx("option",{value:"Vegetables",children:"Vegetables"}),n.jsx("option",{value:"Dairy",children:"Dairy"})]}),n.jsxs("select",{value:v,onChange:M=>w(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:M=>b(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:oe,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(M=>M.materialId&&M.materialCode&&M.materialName).map(M=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",M.unitPrice?Number(M.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.currentStock})]},M.id))})]})})]})}),le=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{var M;return(M=T.current)==null?void 0:M.click()},className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON",disabled:C,children:C?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ta,{className:"h-4 w-4 mr-2"}),"Import"]})}),n.jsxs("button",{onClick:X,disabled:N||C,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:M=>p(M.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsxs("select",{value:y,onChange:M=>h(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Categories"}),n.jsx("option",{value:"GATHERING",children:"GATHERING"}),n.jsx("option",{value:"HAPPY ENDINGS",children:"HAPPY ENDINGS"})]}),n.jsxs("select",{value:v,onChange:M=>w(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:M=>b(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),l.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:oe,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit of Measure"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.filter(M=>M.productId&&M.productCode&&M.productName).map(M=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KWD ",M.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.currentStock}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M.status==="In Stock"?"bg-green-100 text-green-800":M.status==="Low Stock"?"bg-yellow-100 text-yellow-800":M.status==="Out of Stock"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:M.status})})]},M.id))})]})})]})}),xe=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"POS Sales"}),n.jsxs("button",{onClick:()=>e("/kuwait-city/pos-sales/create-order",{state:{outletName:"Kuwait City"}}),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Point of Sale system for Kuwait City outlet"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/pos-sales/create-order",{state:{outletName:"Kuwait City"}}),children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(vr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"New Order"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create a new sales order"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(uT,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Order History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View past orders"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Ob,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View payment summaries"})]})]})})]})]})}),ae=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-blue-50 to-green-50 border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(hn,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(Ve,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Raw Materials"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(M=>M.materialId&&M.materialCode&&M.materialName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Ve,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Finished Goods"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.filter(M=>M.productId&&M.productCode&&M.productName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(vr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",(s.reduce((M,G)=>M+G.totalValue,0)+l.reduce((M,G)=>M+G.totalValue,0)).toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-yellow-500",children:n.jsx(El,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(M=>M.status==="Low Stock").length+l.filter(M=>M.status==="Low Stock").length})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/kuwait-city/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(vr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(hn,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kuwait City"}),n.jsxs("p",{className:"text-gray-600",children:[K==="raw-materials"?"Raw Materials Inventory":K==="finished-goods"?"Finished Goods Inventory":K==="sales-orders"?"Sales Orders":"Premium dining restaurant"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>{B(),oe()},className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),K==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/kuwait-city/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),K==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/kuwait-city/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(qi,{notifications:U(),onMarkAsRead:k,onMarkAllAsRead:A,onClearAll:P,onRefresh:F})]})]}),J(),n.jsx("input",{ref:T,type:"file",accept:K==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:R,className:"hidden",disabled:C})]})},uo=()=>{const e=Qe(),t=wa(),[r,a]=O.useState(null),[s,i]=O.useState([]),[l,o]=O.useState([]),[c,u]=O.useState(!0),[d,f]=O.useState(null),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState(""),[S,b]=O.useState("materialName"),[x,g]=O.useState("asc"),[N,j]=O.useState(!1),C=O.useRef(null),[_,T]=O.useState(!1),{notifications:E,markAsRead:k,markAllAsRead:A,clearAll:P,refreshNotifications:F}=Ki("Vibes Complex");O.useEffect(()=>{console.log(" Vibes Complex: Notifications updated:",E),console.log(` Vibes Complex: Number of notifications: ${E.length}`),E.length>0&&console.log(" Vibes Complex: First notification:",E[0])},[E]),O.useEffect(()=>{console.log(' Vibes Complex: Component mounted, loading notifications for: "Vibes Complex"'),console.log(` Vibes Complex: Current URL path: ${t.pathname}`),console.log(" Vibes Complex: Component file: MarinaWalkCafe.tsx")},[]);const U=()=>{const M=t.pathname;return M.includes("/raw-materials")?"raw-materials":M.includes("/finished-goods")?"finished-goods":M.includes("/sales-orders")?"sales-orders":"overview"},W=U(),K=()=>{const M=U();console.log(` Vibes Complex: Current section: ${M}`),console.log(" Vibes Complex: All notifications:",E);let G=[];return M==="raw-materials"?G=E.filter(D=>D.isTransferOrder&&(D.itemType==="Raw Material"||D.itemType==="Mixed")):M==="finished-goods"?G=E.filter(D=>D.isTransferOrder&&(D.itemType==="Finished Goods"||D.itemType==="Mixed")):G=E,console.log(` Vibes Complex: Filtered notifications for ${M}:`,G),G};O.useEffect(()=>{B()},[]),O.useEffect(()=>{E.length>0&&E.some(G=>{var D,se,I;return!G.read&&(((D=G.title)==null?void 0:D.includes("Items Received from Central Kitchen"))||((se=G.title)==null?void 0:se.includes("Transfer from Central Kitchen"))||((I=G.title)==null?void 0:I.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for Vibes Complex, refreshing inventory..."),V())},[E]),O.useEffect(()=>{const M=setInterval(()=>{console.log(" Vibes Complex: Auto-refreshing notifications..."),F()},5e3);return()=>clearInterval(M)},[F]),O.useEffect(()=>{c||V()},[m,y,v,S,x]);const B=async()=>{try{u(!0),f(null);const M=await de.getOutlets({limit:1e3});if(M.success){const G=M.data.find(D=>D.outletName==="Vibes Complex");G?(a(G),await V()):f("Vibes Complex not found")}else f("Failed to load outlet data")}catch(M){f(M instanceof Error?M.message:"Failed to load outlet data"),console.error("Error loading outlet data:",M)}finally{u(!1)}},ee=()=>{p(""),h(""),w(""),b("materialName"),g("asc"),V()},oe=async()=>{try{j(!0),await de.exportVibesComplexRawMaterials({search:m,subCategory:y,status:v})}catch(M){console.error("Error exporting raw materials:",M),alert("Error exporting raw materials: "+(M instanceof Error?M.message:"Unknown error"))}finally{j(!1)}},R=async()=>{try{j(!0),await de.exportVibesComplexFinishedProducts({search:m,subCategory:y,status:v})}catch(M){console.error("Error exporting finished goods:",M),alert("Error exporting finished goods: "+(M instanceof Error?M.message:"Unknown error"))}finally{j(!1)}},V=async()=>{try{console.log("Loading Vibes Complex inventory from dedicated database");const M=await de.getVibesComplexRawMaterials({limit:1e3,search:m,subCategory:y,status:v,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(M.success)if(console.log("Loaded Vibes Complex Raw Materials:",M.data),M.data&&M.data.length>0){const D=M.data.map(se=>{var I;return{id:se._id||se.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"",outletName:(r==null?void 0:r.outletName)||"Vibes Complex",materialId:se._id,materialCode:se.materialCode,materialName:se.materialName,category:se.subCategory||se.category,unitOfMeasure:se.unitOfMeasure,unitPrice:se.unitPrice||0,currentStock:se.currentStock||0,reservedStock:0,availableStock:se.currentStock||0,minimumStock:se.minimumStock||0,maximumStock:se.maximumStock||0,reorderPoint:se.reorderPoint||0,totalValue:(se.currentStock||0)*(se.unitPrice||0),location:((I=se.storageRequirements)==null?void 0:I.location)||"Main Storage",batchNumber:se.batchNumber||"",supplier:se.supplierName||"",lastUpdated:se.lastUpdated||se.updatedAt,status:se.status,notes:se.notes||"",isActive:se.isActive}});i(D)}else console.log("No raw materials inventory found for Vibes Complex"),i([]);else console.error("Failed to load raw materials inventory:",M.error||"API Error"),i([]);const G=await de.getVibesComplexFinishedProducts({limit:1e3,search:m,subCategory:y,status:v,sortBy:S==="productName"?"productName":S,sortOrder:x});if(G.success)if(console.log("Loaded Vibes Complex Finished Products:",G.data),G.data&&G.data.length>0){const D=G.data.map(se=>({id:se._id||se.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"",outletName:(r==null?void 0:r.outletName)||"Vibes Complex",productId:se._id,productCode:se.productCode,productName:se.productName,category:se.subCategory||se.category,unitOfMeasure:se.unitOfMeasure,unitPrice:se.unitPrice||0,costPrice:se.costPrice||0,currentStock:se.currentStock||0,reservedStock:0,availableStock:se.currentStock||0,minimumStock:se.minimumStock||0,maximumStock:se.maximumStock||0,reorderPoint:se.reorderPoint||0,totalValue:(se.currentStock||0)*(se.unitPrice||0),productionDate:se.productionDate||new Date().toISOString(),expiryDate:se.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:se.batchNumber||"",storageLocation:se.storageLocation||"Cold Storage",storageTemperature:se.storageTemperature||"Cold",qualityStatus:se.qualityStatus||"Good",qualityNotes:se.qualityNotes||"",status:se.status,transferSource:"Transfer",lastUpdated:se.lastUpdated||se.updatedAt,notes:se.notes||"",isActive:se.isActive}));o(D)}else console.log("No finished goods inventory found for Vibes Complex"),o([]);else console.error("Failed to load finished goods inventory:",G.error||"API Error")}catch(M){f(M instanceof Error?M.message:"Failed to load inventory"),console.error("Error loading inventory:",M)}},X=async M=>{var D,se;const G=(D=M.target.files)==null?void 0:D[0];if(G)try{T(!0);const I=G.name.toLowerCase(),ce=U();if(ce==="raw-materials"){if(!(I.endsWith(".xlsx")||I.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const ue=await de.importVibeComplexRawMaterialsExcel(G);alert(ue.message||"Raw materials import completed"),await V()}else if(ce==="finished-goods"){let ue=[];if(I.endsWith(".json")){const Ue=await G.text(),et=JSON.parse(Ue);ue=Array.isArray(et)?et:et.products||[]}else if(I.endsWith(".csv"))ue=(await G.text()).split(`
`).filter(Ge=>Ge.trim()).slice(1).map(Ge=>{const Ke=Ge.split(",").map(Le=>Le.replace(/\"/g,"").trim());return{productCode:Ke[0]||Ke[1],productName:Ke[1]||Ke[2],subCategory:Ke[2]||"MAIN COURSES",category:Ke[2]||"MAIN COURSES",unitOfMeasure:Ke[3]||"piece",unitPrice:parseFloat(Ke[4])||0,currentStock:parseFloat(Ke[5])||0}}).filter(Ge=>Ge.productCode&&Ge.productName);else if(I.endsWith(".xlsx")||I.endsWith(".xls")){const Ue=await G.arrayBuffer(),et=await Qd(()=>Promise.resolve().then(()=>hf),void 0),Je=et.read(Ue,{type:"array"}),Ge=Je.Sheets[Je.SheetNames[0]];ue=et.utils.sheet_to_json(Ge,{defval:""}).map(Le=>{const pe=re=>re.toString().trim().toLowerCase(),ne=re=>{const ve=Object.keys(Le).find(Ie=>re.includes(pe(Ie)));return ve?Le[ve]:void 0},je=(ne(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(ne(["product code","sku","code"])||"").toString().trim(),productName:(ne(["product name","item name","name"])||"").toString().trim(),subCategory:je,category:je,unitOfMeasure:(ne(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(ne(["unit price","price"])))||0,currentStock:Number.parseFloat(String(ne(["current stock","current quantity","quantity","qty"])))||0}}).filter(Le=>Le.productCode&&Le.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const te=await de.importVibeComplexFinishedProducts(ue);alert(te.message||`Finished products import completed. Success: ${((se=te.data)==null?void 0:se.successCount)||0}`),await V()}}catch(I){alert("Error importing file: "+(I instanceof Error?I.message:"Unknown error"))}finally{T(!1),C.current&&(C.current.value="")}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading 360 Mall..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:B,className:"btn-primary",children:"Retry"})]})});const J=()=>{switch(W){case"raw-materials":return Z();case"finished-goods":return le();case"sales-orders":return xe();default:return ae()}},Z=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var M;return(M=C.current)==null?void 0:M.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ta,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:oe,disabled:N||_,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:M=>p(M.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:M=>h(M.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:v,onChange:M=>w(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:M=>b(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:V,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(M=>M.materialId&&M.materialCode&&M.materialName).map(M=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",M.unitPrice?Number(M.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.currentStock})]},M.id))})]})})]})}),le=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var M;return(M=C.current)==null?void 0:M.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ta,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:R,disabled:N||_,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:M=>p(M.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:M=>h(M.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:v,onChange:M=>w(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:M=>b(M.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),l.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:V,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit of Measure"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.filter(M=>M.productId&&M.productCode&&M.productName).map(M=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KWD ",M.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.currentStock}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M.status==="In Stock"?"bg-green-100 text-green-800":M.status==="Low Stock"?"bg-yellow-100 text-yellow-800":M.status==="Out of Stock"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:M.status})})]},M.id))})]})})]})}),xe=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"POS Sales"}),n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/pos-sales/create-order",{state:{outletName:"360 Mall"}}),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Create Order"]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Point of Sale system for 360 Mall outlet"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/pos-sales/create-order",{state:{outletName:"360 Mall"}}),children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(vr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"New Order"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create a new sales order"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(uT,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Order History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View past orders"})]})]})}),n.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Ob,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Reports"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View payment summaries"})]})]})})]})]})}),ae=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(_m,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-blue-500",children:n.jsx(Ve,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Raw Materials"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(M=>M.materialId&&M.materialCode&&M.materialName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-green-500",children:n.jsx(Ve,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Finished Goods"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.filter(M=>M.productId&&M.productCode&&M.productName).length})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-purple-500",children:n.jsx(vr,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),n.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",(s.reduce((M,G)=>M+G.totalValue,0)+l.reduce((M,G)=>M+G.totalValue,0)).toLocaleString()]})]})]})}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-lg bg-yellow-500",children:n.jsx(El,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock Items"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(M=>M.status==="Low Stock").length+l.filter(M=>M.status==="Low Stock").length})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/marina-walk-cafe/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(vr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(_m,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(r==null?void 0:r.outletName)||"Vibes Complex"}),n.jsxs("p",{className:"text-gray-600",children:[W==="raw-materials"?"Raw Materials Inventory":W==="finished-goods"?"Finished Goods Inventory":W==="sales-orders"?"Sales Orders":"Cozy waterfront cafe"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:B,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),W==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/vibes-complex/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),W==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/vibes-complex/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(qi,{notifications:K(),onMarkAsRead:k,onMarkAllAsRead:A,onClearAll:P,onRefresh:F})]})]}),J(),n.jsx("input",{ref:C,type:"file",accept:W==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:X,className:"hidden",disabled:_})]})},Qs=()=>{const e=Qe(),t=wa(),[r,a]=O.useState(null),[s,i]=O.useState([]),[l,o]=O.useState([]),[c,u]=O.useState(!0),[d,f]=O.useState(null),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState(""),[S,b]=O.useState("materialName"),[x,g]=O.useState("asc"),[N,j]=O.useState(!1),C=O.useRef(null),[_,T]=O.useState(!1),{notifications:E,markAsRead:k,markAllAsRead:A,clearAll:P,refreshNotifications:F}=Ki("360 Mall"),U=()=>{const G=W();console.log(` 360 Mall: Current section: ${G}`),console.log(" 360 Mall: All notifications:",E);let D=[];return G==="raw-materials"?D=E.filter(se=>se.isTransferOrder&&(se.itemType==="Raw Material"||se.itemType==="Mixed")):G==="finished-goods"?D=E.filter(se=>se.isTransferOrder&&(se.itemType==="Finished Goods"||se.itemType==="Mixed")):D=E,console.log(` 360 Mall: Filtered notifications for ${G}:`,D),D},W=()=>{const G=t.pathname;return G.includes("/raw-materials")?"raw-materials":G.includes("/finished-goods")?"finished-goods":G.includes("/sales-orders")?"sales-orders":"overview"},K=W();O.useEffect(()=>{B()},[]),O.useEffect(()=>{console.log(" 360 Mall: Notifications updated:",E),console.log(` 360 Mall: Number of notifications: ${E.length}`),E.length>0&&console.log(" 360 Mall: First notification:",E[0])},[E]),O.useEffect(()=>{console.log(' 360 Mall: Component mounted, loading notifications for: "360 Mall"')},[]),O.useEffect(()=>{c||V()},[m,y,v,S,x]),O.useEffect(()=>{E.length>0&&E.some(D=>{var se,I,ce;return!D.read&&(((se=D.title)==null?void 0:se.includes("Items Received from Central Kitchen"))||((I=D.title)==null?void 0:I.includes("Transfer from Central Kitchen"))||((ce=D.title)==null?void 0:ce.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for 360 Mall, refreshing inventory..."),V())},[E]),O.useEffect(()=>{const G=setInterval(()=>{console.log(" 360 Mall: Auto-refreshing notifications..."),F()},5e3);return()=>clearInterval(G)},[F]);const B=async()=>{try{u(!0),f(null);const G=await de.getOutlets({limit:1e3});if(G.success){const D=G.data.find(se=>se.outletName==="360 Mall");D?(a(D),await V()):f("360 Mall not found")}else f("Failed to load outlet data")}catch(G){f(G instanceof Error?G.message:"Failed to load outlet data"),console.error("Error loading outlet data:",G)}finally{u(!1)}},ee=()=>{p(""),h(""),w(""),b("materialName"),g("asc"),V()},oe=async()=>{try{j(!0),await de.exportMall360RawMaterials({search:m,subCategory:y,status:v})}catch(G){console.error("Error exporting raw materials:",G),alert("Error exporting raw materials: "+(G instanceof Error?G.message:"Unknown error"))}finally{j(!1)}},R=async()=>{try{j(!0),await de.exportMall360FinishedProducts({search:m,subCategory:y,status:v})}catch(G){console.error("Error exporting finished goods:",G),alert("Error exporting finished goods: "+(G instanceof Error?G.message:"Unknown error"))}finally{j(!1)}},V=async()=>{var G,D,se;try{console.log(" Loading 360 Mall inventory from dedicated database"),console.log("   Search params:",{searchTerm:m,filterCategory:y,filterStatus:v,sortBy:S,sortOrder:x});const I=await de.get360MallRawMaterials({limit:1e3,search:m,subCategory:y,status:v,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(console.log(" Raw Materials API Response:",{success:I.success,dataLength:((G=I.data)==null?void 0:G.length)||0}),I.success)if(console.log(" Loaded 360 Mall Raw Materials:",((D=I.data)==null?void 0:D.length)||0,"items"),console.log("   First few items:",(se=I.data)==null?void 0:se.slice(0,3)),I.data&&I.data.length>0){const ue=I.data.map(te=>{var Ue;return{id:te._id||te.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"OUT-003",outletName:(r==null?void 0:r.outletName)||"360 Mall",materialId:te._id,materialCode:te.materialCode,materialName:te.materialName,category:te.subCategory||te.category,unitOfMeasure:te.unitOfMeasure,unitPrice:te.unitPrice||0,currentStock:te.currentStock||0,reservedStock:0,availableStock:te.currentStock||0,minimumStock:te.minimumStock||0,maximumStock:te.maximumStock||0,reorderPoint:te.reorderPoint||0,totalValue:(te.currentStock||0)*(te.unitPrice||0),location:((Ue=te.storageRequirements)==null?void 0:Ue.location)||"Main Storage",batchNumber:te.batchNumber||"",supplier:te.supplierName||"",lastUpdated:te.lastUpdated||te.updatedAt,status:te.status,notes:te.notes||"",isActive:te.isActive}});i(ue)}else console.log("No raw materials inventory found for 360 Mall"),i([]);else console.error("Failed to load raw materials inventory:",I.error||"API Error"),i([]);const ce=await de.get360MallFinishedProducts({limit:1e3,search:m,subCategory:y,status:v,sortBy:S==="productName"?"productName":S,sortOrder:x});if(ce.success)if(console.log("Loaded 360 Mall Finished Products:",ce.data),ce.data&&ce.data.length>0){const ue=ce.data.map(te=>({id:te._id||te.id,outletId:(r==null?void 0:r._id)||(r==null?void 0:r.id)||"",outletCode:(r==null?void 0:r.outletCode)||"OUT-003",outletName:(r==null?void 0:r.outletName)||"360 Mall",productId:te._id,productCode:te.productCode,productName:te.productName,category:te.subCategory||te.category,unitOfMeasure:te.unitOfMeasure,unitPrice:te.unitPrice||0,costPrice:te.costPrice||0,currentStock:te.currentStock||0,reservedStock:0,availableStock:te.currentStock||0,minimumStock:te.minimumStock||0,maximumStock:te.maximumStock||0,reorderPoint:te.reorderPoint||0,totalValue:(te.currentStock||0)*(te.unitPrice||0),productionDate:te.productionDate||new Date().toISOString(),expiryDate:te.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:te.batchNumber||"",storageLocation:te.storageLocation||"Cold Storage",storageTemperature:te.storageTemperature||"Cold",qualityStatus:te.qualityStatus||"Good",qualityNotes:te.qualityNotes||"",status:te.status,transferSource:"Transfer",lastUpdated:te.lastUpdated||te.updatedAt,notes:te.notes||"",isActive:te.isActive}));o(ue)}else console.log("No finished goods inventory found for 360 Mall"),o([]);else console.error("Failed to load finished goods inventory:",ce.error||"API Error")}catch(I){f(I instanceof Error?I.message:"Failed to load inventory"),console.error("Error loading inventory:",I)}},X=G=>{switch(G){case"In Stock":return"bg-green-100 text-green-800";case"Low Stock":return"bg-yellow-100 text-yellow-800";case"Out of Stock":return"bg-red-100 text-red-800";case"Overstock":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading 360 Mall..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:B,className:"btn-primary",children:"Retry"})]})});const J=()=>{switch(K){case"raw-materials":return le();case"finished-goods":return xe();case"sales-orders":return ae();default:return M()}},Z=async G=>{var se,I;const D=(se=G.target.files)==null?void 0:se[0];if(D)try{T(!0);const ce=D.name.toLowerCase(),ue=W();if(ue==="raw-materials"){if(!(ce.endsWith(".xlsx")||ce.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const te=await de.importMall360RawMaterialsExcel(D);alert(te.message||"Raw materials import completed"),await V()}else if(ue==="finished-goods"){let te=[];if(ce.endsWith(".json")){const et=await D.text(),Je=JSON.parse(et);te=Array.isArray(Je)?Je:Je.products||[]}else if(ce.endsWith(".csv"))te=(await D.text()).split(`
`).filter(Ke=>Ke.trim()).slice(1).map(Ke=>{const Le=Ke.split(",").map(pe=>pe.replace(/\"/g,"").trim());return{productCode:Le[0]||Le[1],productName:Le[1]||Le[2],subCategory:Le[2]||"MAIN COURSES",category:Le[2]||"MAIN COURSES",unitOfMeasure:Le[3]||"piece",unitPrice:parseFloat(Le[4])||0,currentStock:parseFloat(Le[5])||0}}).filter(Ke=>Ke.productCode&&Ke.productName);else if(ce.endsWith(".xlsx")||ce.endsWith(".xls")){const et=await D.arrayBuffer(),Je=await Qd(()=>Promise.resolve().then(()=>hf),void 0),Ge=Je.read(et,{type:"array"}),Ke=Ge.Sheets[Ge.SheetNames[0]];te=Je.utils.sheet_to_json(Ke,{defval:""}).map(pe=>{const ne=ve=>ve.toString().trim().toLowerCase(),je=ve=>{const Ie=Object.keys(pe).find(ye=>ve.includes(ne(ye)));return Ie?pe[Ie]:void 0},re=(je(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(je(["product code","sku","code"])||"").toString().trim(),productName:(je(["product name","item name","name"])||"").toString().trim(),subCategory:re,category:re,unitOfMeasure:(je(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(je(["unit price","price"])))||0,currentStock:Number.parseFloat(String(je(["current stock","current quantity","quantity","qty"])))||0}}).filter(pe=>pe.productCode&&pe.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const Ue=await de.importMall360FinishedProducts(te);alert(Ue.message||`Finished products import completed. Success: ${((I=Ue.data)==null?void 0:I.successCount)||0}`),await V()}}catch(ce){console.error("Error importing file:",ce),alert("Error importing file. Please check the file format.")}finally{T(!1),C.current&&(C.current.value="")}},le=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var G;return(G=C.current)==null?void 0:G.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ta,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:oe,disabled:N||_,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:G=>p(G.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:G=>h(G.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:v,onChange:G=>w(G.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:G=>b(G.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:V,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(G=>G.materialId&&G.materialCode&&G.materialName).filter(G=>m===""||G.materialCode.toLowerCase().includes(m.toLowerCase())||G.materialName.toLowerCase().includes(m.toLowerCase())||G.category&&G.category.toLowerCase().includes(m.toLowerCase())).map(G=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:G.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",G.unitPrice?Number(G.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.currentStock})]},G.id))})]})})]})}),xe=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var G;return(G=C.current)==null?void 0:G.click()},disabled:_,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[_?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ta,{className:"h-4 w-4 mr-2"}),_?"Importing...":"Import"]}),n.jsxs("button",{onClick:R,disabled:N||_,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),N?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:G=>p(G.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:G=>h(G.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:v,onChange:G=>w(G.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:G=>b(G.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),l.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:ee,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:V,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.filter(G=>G.productId&&G.productCode&&G.productName).filter(G=>m===""||G.productCode.toLowerCase().includes(m.toLowerCase())||G.productName.toLowerCase().includes(m.toLowerCase())||G.category&&G.category.toLowerCase().includes(m.toLowerCase())).map(G=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:G.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.unitOfMeasure}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.currentStock}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",G.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${X(G.status)}`,children:G.status})})]},G.id))})]})})]})}),ae=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Sales orders functionality will be implemented here."})]})}),M=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-orange-50 to-red-50 border-orange-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Om,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/mall-food-court/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(vr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:n.jsx(Om,{className:"h-8 w-8 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(r==null?void 0:r.outletName)||"360 Mall"}),n.jsxs("p",{className:"text-gray-600",children:[K==="raw-materials"?"Raw Materials Inventory":K==="finished-goods"?"Finished Goods Inventory":K==="sales-orders"?"Sales Orders":"Fast-service food court outlet"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:B,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),K==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/360-mall/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),K==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/360-mall/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(qi,{notifications:U(),onMarkAsRead:k,onMarkAllAsRead:A,onClearAll:P,onRefresh:F})]})]}),J(),n.jsx("input",{ref:C,type:"file",accept:K==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:Z,className:"hidden",disabled:_})]})},fo=()=>{const e=Qe(),t=wa(),[r,a]=O.useState(null),[s,i]=O.useState([]),[l,o]=O.useState([]),[c,u]=O.useState(!0),[d,f]=O.useState(null),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState(""),[S,b]=O.useState("materialName"),[x,g]=O.useState("asc"),[N,j]=O.useState(!1),[C,_]=O.useState(!1),T=O.useRef(null),{notifications:E,markAsRead:k,markAllAsRead:A,clearAll:P,refreshNotifications:F}=Ki("Taiba Hospital"),[U,W]=O.useState(null),[K,B]=O.useState(!1),[ee,oe]=O.useState({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""}),[R,V]=O.useState(null),[X,J]=O.useState(!1),[Z,le]=O.useState({currentStock:"",unitPrice:"",costPrice:"",minimumStock:"",maximumStock:"",reorderPoint:"",storageLocation:"",storageTemperature:"",qualityStatus:"",qualityNotes:"",notes:""}),xe=()=>{const re=t.pathname;return re.includes("/raw-materials")?"raw-materials":re.includes("/finished-goods")?"finished-goods":re.includes("/sales-orders")?"sales-orders":"overview"},ae=xe(),M=()=>{const re=xe();return re==="raw-materials"?E.filter(ve=>ve.isTransferOrder&&(ve.itemType==="Raw Material"||ve.itemType==="Mixed")):re==="finished-goods"?E.filter(ve=>ve.isTransferOrder&&(ve.itemType==="Finished Goods"||ve.itemType==="Mixed")):E};O.useEffect(()=>{G()},[]),O.useEffect(()=>{E.length>0&&E.some(ve=>{var Ie,ye,$e;return!ve.read&&(((Ie=ve.title)==null?void 0:Ie.includes("Items Received from Central Kitchen"))||((ye=ve.title)==null?void 0:ye.includes("Transfer from Central Kitchen"))||(($e=ve.title)==null?void 0:$e.includes("Items Received from Ingredient Master")))})&&(console.log("New transfer notification detected for Taiba Hospital, refreshing inventory..."),ce())},[E]),O.useEffect(()=>{r&&!c&&ce()},[m,y,v,S,x]);const G=async()=>{try{u(!0),f(null);const re=await de.getOutlets({limit:1e3});if(re.success){const ve=re.data.find(Ie=>Ie.outletName==="Taiba Hospital");ve?(a(ve),await ce()):f("Taiba Hospital not found")}else f("Failed to load outlet data")}catch(re){f(re instanceof Error?re.message:"Failed to load outlet data"),console.error("Error loading outlet data:",re)}finally{u(!1)}},D=()=>{p(""),h(""),w(""),b("materialName"),g("asc"),ce()},se=async()=>{try{_(!0),await de.exportTaibaHospitalRawMaterials({search:m,category:y,status:v})}catch(re){console.error("Error exporting raw materials:",re),alert("Error exporting raw materials: "+(re instanceof Error?re.message:"Unknown error"))}finally{_(!1)}},I=async()=>{try{_(!0),await de.exportTaibaHospitalFinishedProducts({search:m,category:y,status:v})}catch(re){console.error("Error exporting finished goods:",re),alert("Error exporting finished goods: "+(re instanceof Error?re.message:"Unknown error"))}finally{_(!1)}},ce=async()=>{try{console.log("Loading Taiba Kitchen inventory...");const re=await de.getTaibaKitchenRawMaterials({limit:1e3,search:m,category:y,status:v,sortBy:S==="materialName"?"materialName":S,sortOrder:x});if(re.success)if(console.log("Loaded outlet raw materials inventory:",re.data),re.data&&re.data.length>0){const Ie=re.data.map(ye=>{var $e;return{id:ye._id||ye.id,outletId:"taiba-kitchen",outletCode:"OUT-004",outletName:"Taiba Hospital",materialId:ye._id||ye.id,materialCode:ye.materialCode,materialName:ye.materialName,category:ye.category,unitOfMeasure:ye.unitOfMeasure,unitPrice:ye.unitPrice,currentStock:ye.currentStock,reservedStock:0,availableStock:ye.currentStock,minimumStock:ye.minimumStock,maximumStock:ye.maximumStock,reorderPoint:ye.reorderPoint,totalValue:ye.currentStock*ye.unitPrice,location:(($e=ye.storageRequirements)==null?void 0:$e.location)||"Main Storage",batchNumber:ye.batchNumber||"",supplier:ye.supplierName||"",lastUpdated:ye.updatedAt||new Date().toISOString(),status:ye.status,notes:ye.notes||"",isActive:ye.isActive}});i(Ie)}else console.log("No raw materials inventory found for Taiba Kitchen"),i([]);else console.error("Failed to load raw materials inventory:",re.error||"API Error"),i([]);const ve=await de.getTaibaKitchenFinishedProducts({limit:1e3,search:m,category:y,status:v,sortBy:S==="productName"?"productName":S,sortOrder:x});if(ve.success)if(console.log("Loaded outlet finished goods inventory:",ve.data),ve.data&&ve.data.length>0){const Ie=ve.data.map(ye=>({id:ye._id||ye.id,outletId:"taiba-kitchen",outletCode:"OUT-004",outletName:"Taiba Hospital",productId:ye._id||ye.id,productCode:ye.productCode,productName:ye.productName,category:ye.category,unitOfMeasure:ye.unitOfMeasure,unitPrice:ye.unitPrice,costPrice:ye.costPrice||0,currentStock:ye.currentStock,reservedStock:0,availableStock:ye.currentStock,minimumStock:ye.minimumStock,maximumStock:ye.maximumStock,reorderPoint:ye.reorderPoint,totalValue:ye.currentStock*ye.unitPrice,productionDate:ye.productionDate||new Date().toISOString(),expiryDate:ye.expiryDate||new Date(Date.now()+864e5).toISOString(),batchNumber:ye.batchNumber||"",storageLocation:ye.storageLocation||"Cold Storage",storageTemperature:ye.storageTemperature||"Cold",qualityStatus:ye.qualityStatus||"Good",qualityNotes:ye.qualityNotes||"",status:ye.status,transferSource:"Transfer",lastUpdated:ye.lastUpdated||ye.updatedAt,notes:ye.notes||"",isActive:ye.isActive}));o(Ie)}else console.log("No finished goods inventory found for this outlet"),o([]);else console.error("Failed to load finished goods inventory:",ve.error||"API Error")}catch(re){f(re instanceof Error?re.message:"Failed to load inventory"),console.error("Error loading inventory:",re)}},ue=async()=>{if(U)try{const re={currentStock:parseFloat(ee.currentStock),minimumStock:parseFloat(ee.minimumStock),maximumStock:parseFloat(ee.maximumStock),reorderPoint:parseFloat(ee.reorderPoint),unitPrice:parseFloat(ee.unitPrice),notes:ee.notes},ve=await de.updateTaibaKitchenRawMaterial(U.id,re);ve.success?(i(Ie=>Ie.map(ye=>ye.id===U.id?{...ye,...re,totalValue:re.currentStock*re.unitPrice}:ye)),B(!1),W(null)):alert(`Failed to update inventory item: ${ve.error||"Unknown error"}`)}catch(re){console.error("Error updating inventory item:",re),alert("Failed to update inventory item")}},te=()=>{B(!1),W(null),oe({currentStock:"",minimumStock:"",maximumStock:"",reorderPoint:"",unitPrice:"",notes:""})},Ue=async()=>{if(R)try{const re={currentStock:parseFloat(Z.currentStock),unitPrice:parseFloat(Z.unitPrice),costPrice:parseFloat(Z.costPrice),minimumStock:parseFloat(Z.minimumStock),maximumStock:parseFloat(Z.maximumStock),reorderPoint:parseFloat(Z.reorderPoint),storageLocation:Z.storageLocation,storageTemperature:Z.storageTemperature,qualityStatus:Z.qualityStatus,qualityNotes:Z.qualityNotes,notes:Z.notes},ve=await de.updateTaibaKitchenFinishedProduct(R.id,re);ve.success?(o(Ie=>Ie.map(ye=>ye.id===R.id?{...ye,...re,totalValue:re.currentStock*re.unitPrice}:ye)),J(!1),V(null)):alert(`Failed to update finished good inventory item: ${ve.error||"Unknown error"}`)}catch(re){console.error("Error updating finished good inventory item:",re),alert("Failed to update finished good inventory item")}},et=()=>{J(!1),V(null),le({currentStock:"",unitPrice:"",costPrice:"",minimumStock:"",maximumStock:"",reorderPoint:"",storageLocation:"",storageTemperature:"",qualityStatus:"",qualityNotes:"",notes:""})},Je=re=>{switch(re){case"In Stock":return"bg-green-100 text-green-800";case"Low Stock":return"bg-yellow-100 text-yellow-800";case"Out of Stock":return"bg-red-100 text-red-800";case"Overstock":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};if(c)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Taiba Hospital..."})]})});if(d)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:G,className:"btn-primary",children:"Retry"})]})});const Ge=()=>{switch(ae){case"raw-materials":return Le();case"finished-goods":return pe();case"sales-orders":return ne();default:return je()}},Ke=async re=>{var Ie,ye;const ve=(Ie=re.target.files)==null?void 0:Ie[0];if(ve)try{j(!0);const $e=ve.name.toLowerCase(),ot=xe();if(ot==="raw-materials"){if(!($e.endsWith(".xlsx")||$e.endsWith(".xls"))){alert("Please select an Excel file (.xlsx/.xls) for Raw Materials import");return}const Be=await de.importTaibaKitchenRawMaterialsExcel(ve);alert(Be.message||"Raw materials import completed"),await ce()}else if(ot==="finished-goods"){let Be=[];if($e.endsWith(".json")){const or=await ve.text(),nt=JSON.parse(or);Be=Array.isArray(nt)?nt:nt.products||[]}else if($e.endsWith(".csv"))Be=(await ve.text()).split(`
`).filter(tt=>tt.trim()).slice(1).map(tt=>{const $r=tt.split(",").map(Sn=>Sn.replace(/\"/g,"").trim());return{productCode:$r[0]||$r[1],productName:$r[1]||$r[2],subCategory:$r[2]||"MAIN COURSES",category:$r[2]||"MAIN COURSES",unitOfMeasure:$r[3]||"piece",unitPrice:parseFloat($r[4])||0,currentStock:parseFloat($r[5])||0}}).filter(tt=>tt.productCode&&tt.productName);else if($e.endsWith(".xlsx")||$e.endsWith(".xls")){const or=await ve.arrayBuffer(),nt=await Qd(()=>Promise.resolve().then(()=>hf),void 0),Ya=nt.read(or,{type:"array"}),tt=Ya.Sheets[Ya.SheetNames[0]];Be=nt.utils.sheet_to_json(tt,{defval:""}).map(Sn=>{const Gi=us=>us.toString().trim().toLowerCase(),kn=us=>{const ds=Object.keys(Sn).find(Gs=>us.includes(Gi(Gs)));return ds?Sn[ds]:void 0},dt=(kn(["subcategory name","subcategory","sub category","sub category name"])||"MAIN COURSES").toString().trim();return{productCode:(kn(["product code","sku","code"])||"").toString().trim(),productName:(kn(["product name","item name","name"])||"").toString().trim(),subCategory:dt,category:dt,unitOfMeasure:(kn(["unit of measure","unit","uom"])||"piece").toString().trim(),unitPrice:Number.parseFloat(String(kn(["unit price","price"])))||0,currentStock:Number.parseFloat(String(kn(["current stock","current quantity","quantity","qty"])))||0}}).filter(Sn=>Sn.productCode&&Sn.productName)}else{alert("Please select CSV/JSON/Excel for Finished Products import");return}const Pt=await de.importTaibaKitchenFinishedProducts(Be);alert(Pt.message||`Finished products import completed. Success: ${((ye=Pt.data)==null?void 0:ye.successCount)||0}`),await ce()}}catch($e){console.error("Error importing file:",$e),alert("Error importing file. Please check the file format.")}finally{j(!1),T.current&&(T.current.value="")}},Le=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Raw Materials Inventory"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var re;return(re=T.current)==null?void 0:re.click()},disabled:N,className:"btn-secondary flex items-center",title:"Import raw materials from Excel",children:[N?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ta,{className:"h-4 w-4 mr-2"}),N?"Importing...":"Import"]}),n.jsxs("button",{onClick:se,disabled:C||N,className:"btn-primary flex items-center",title:"Export raw materials to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),C?"Exporting...":"Export"]})]})]}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search raw materials by name, code, or supplier...",value:m,onChange:re=>p(re.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:re=>h(re.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:v,onChange:re=>w(re.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:re=>b(re.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"materialName",children:"Material Name"}),n.jsx("option",{value:"currentStock",children:"Current Quantity"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:D,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),s.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No raw materials match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:D,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:ce,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Quantity"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.filter(re=>re.materialId&&re.materialCode&&re.materialName).filter(re=>m===""||re.materialCode.toLowerCase().includes(m.toLowerCase())||re.materialName.toLowerCase().includes(m.toLowerCase())||re.category&&re.category.toLowerCase().includes(m.toLowerCase())).map(re=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:re.materialCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:re.materialName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re.unitOfMeasure}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:["KWD ",re.unitPrice?Number(re.unitPrice).toFixed(3):"0.000"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re.currentStock})]},re.id))})]})})]})}),pe=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:"h-6 w-6 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Finished Goods Inventory"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{var re;return(re=T.current)==null?void 0:re.click()},disabled:N,className:"btn-secondary flex items-center",title:"Import finished products from CSV/JSON/Excel",children:[N?n.jsx("span",{className:"h-4 w-4 mr-2 inline-block border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}):n.jsx(Ta,{className:"h-4 w-4 mr-2"}),N?"Importing...":"Import"]}),n.jsxs("button",{onClick:I,disabled:C||N,className:"btn-primary flex items-center",title:"Export finished goods to Excel",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),C?"Exporting...":"Export"]})]})]})}),n.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-3 md:space-y-0",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Search finished goods by name or code...",value:m,onChange:re=>p(re.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),n.jsx("select",{value:y,onChange:re=>h(re.target.value),className:"px-3 py-2 border rounded-lg",children:n.jsx("option",{value:"",children:"All Categories"})}),n.jsxs("select",{value:v,onChange:re=>w(re.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"In Stock",children:"In Stock"}),n.jsx("option",{value:"Low Stock",children:"Low Stock"}),n.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("select",{value:S,onChange:re=>b(re.target.value),className:"px-3 py-2 border rounded-lg",children:[n.jsx("option",{value:"productName",children:"Product Name"}),n.jsx("option",{value:"currentStock",children:"Current Stock"}),n.jsx("option",{value:"unitPrice",children:"Unit Price"})]}),n.jsx("button",{onClick:()=>g(x==="asc"?"desc":"asc"),className:"px-2 py-2 border rounded-lg",title:"Toggle sort order",children:x==="asc"?"":""}),n.jsx("button",{onClick:D,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"})]})]})}),l.length===0?n.jsxs("div",{className:"p-10 text-center text-gray-500",children:[n.jsx("p",{children:"No finished goods match the selected filters."}),n.jsxs("div",{className:"mt-3 space-x-2",children:[n.jsx("button",{onClick:D,className:"px-3 py-2 border rounded-lg bg-gray-50",children:"Clear Filters"}),n.jsx("button",{onClick:ce,className:"px-3 py-2 border rounded-lg",children:"Refresh"})]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Code"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.filter(re=>re.productId&&re.productCode&&re.productName).filter(re=>m===""||re.productCode.toLowerCase().includes(m.toLowerCase())||re.productName.toLowerCase().includes(m.toLowerCase())||re.category&&re.category.toLowerCase().includes(m.toLowerCase())).map(re=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:re.productCode}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:re.productName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re.unitOfMeasure}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re.currentStock}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",re.unitPrice.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Je(re.status)}`,children:re.status})})]},re.id))})]})})]})}),ne=()=>n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"card p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Sales orders functionality will be implemented here."})]})}),je=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"card p-6 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Cm,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.outletName}),n.jsxs("p",{className:"text-gray-600",children:[r==null?void 0:r.outletType,"  ",r==null?void 0:r.outletCode]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),n.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:(r==null?void 0:r.status)||"Active"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/raw-materials"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Raw Materials"}),n.jsx("p",{className:"text-gray-600",children:"Manage raw material inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/finished-goods"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(Ve,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Finished Goods"}),n.jsx("p",{className:"text-gray-600",children:"Manage finished goods inventory"})]})]})}),n.jsx("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/drive-thru-express/sales-orders"),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(vr,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sales Orders"}),n.jsx("p",{className:"text-gray-600",children:"Manage sales orders"})]})]})})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Cm,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Taiba Hospital"}),n.jsxs("p",{className:"text-gray-600",children:[ae==="raw-materials"?"Raw Materials Inventory":ae==="finished-goods"?"Finished Goods Inventory":ae==="sales-orders"?"Sales Orders":"Express drive-thru outlet"," - ",r==null?void 0:r.outletName]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:G,className:"btn-secondary flex items-center",title:"Refresh data",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),ae==="raw-materials"&&n.jsxs("button",{onClick:()=>e("/drive-thru-express/request-raw-materials"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Raw Materials"]}),ae==="finished-goods"&&n.jsxs("button",{onClick:()=>e("/drive-thru-express/request-finished-goods"),className:"btn-primary flex items-center",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Request Finished Goods"]}),n.jsx(qi,{notifications:M(),onMarkAsRead:k,onMarkAllAsRead:A,onClearAll:P,onRefresh:F})]})]}),Ge(),n.jsx("input",{ref:T,type:"file",accept:ae==="raw-materials"?".xlsx,.xls":".csv,.json,.xlsx,.xls",onChange:Ke,className:"hidden",disabled:N}),K&&U&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Edit Inventory Item"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[U.materialCode," - ",U.materialName]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{type:"number",step:"0.01",value:ee.currentStock,onChange:re=>oe(ve=>({...ve,currentStock:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",value:ee.unitPrice,onChange:re=>oe(ve=>({...ve,unitPrice:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:ee.minimumStock,onChange:re=>oe(ve=>({...ve,minimumStock:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:ee.maximumStock,onChange:re=>oe(ve=>({...ve,maximumStock:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{type:"number",step:"0.01",value:ee.reorderPoint,onChange:re=>oe(ve=>({...ve,reorderPoint:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:ee.notes,onChange:re=>oe(ve=>({...ve,notes:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:te,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:ue,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})}),X&&R&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Edit Finished Good Inventory Item"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[R.productCode," - ",R.productName]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{type:"number",step:"0.01",value:Z.currentStock,onChange:re=>le(ve=>({...ve,currentStock:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",value:Z.unitPrice,onChange:re=>le(ve=>({...ve,unitPrice:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price"}),n.jsx("input",{type:"number",step:"0.01",value:Z.costPrice,onChange:re=>le(ve=>({...ve,costPrice:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:Z.minimumStock,onChange:re=>le(ve=>({...ve,minimumStock:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Stock"}),n.jsx("input",{type:"number",step:"0.01",value:Z.maximumStock,onChange:re=>le(ve=>({...ve,maximumStock:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{type:"number",step:"0.01",value:Z.reorderPoint,onChange:re=>le(ve=>({...ve,reorderPoint:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Location"}),n.jsx("input",{type:"text",value:Z.storageLocation,onChange:re=>le(ve=>({...ve,storageLocation:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Temperature"}),n.jsxs("select",{value:Z.storageTemperature,onChange:re=>le(ve=>({...ve,storageTemperature:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Cold",children:"Cold"}),n.jsx("option",{value:"Frozen",children:"Frozen"}),n.jsx("option",{value:"Hot",children:"Hot"}),n.jsx("option",{value:"Room Temperature",children:"Room Temperature"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Status"}),n.jsxs("select",{value:Z.qualityStatus,onChange:re=>le(ve=>({...ve,qualityStatus:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"Good",children:"Good"}),n.jsx("option",{value:"Damaged",children:"Damaged"}),n.jsx("option",{value:"Expired",children:"Expired"}),n.jsx("option",{value:"Under Review",children:"Under Review"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Notes"}),n.jsx("textarea",{value:Z.qualityNotes,onChange:re=>le(ve=>({...ve,qualityNotes:re.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{value:Z.notes,onChange:re=>le(ve=>({...ve,notes:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:et,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Ue,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})]})},g1e=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState(!0),[i,l]=O.useState(null),[o,c]=O.useState(null),[u,d]=O.useState(!1),[f,m]=O.useState(""),[p,y]=O.useState(""),[h,v]=O.useState(""),[w,S]=O.useState("createdAt"),[b,x]=O.useState("desc");O.useEffect(()=>{g()},[]),O.useEffect(()=>{a||g()},[f,p,h,w,b]);const g=async()=>{try{s(!0),l(null);const k=await de.getRawMaterialForecasts({limit:1e3,search:f,status:p,forecastPeriod:h,sortBy:w,sortOrder:b});k.success?(console.log("Loaded Raw Material Forecasts:",k.data),r(k.data)):l("Failed to load forecasts")}catch(k){l(k instanceof Error?k.message:"Failed to load forecasts"),console.error("Error loading forecasts:",k)}finally{s(!1)}},N=t,j=()=>{m(""),y(""),v(""),S("createdAt"),x("desc"),g()},C=k=>{c(k),d(!0)},_=async k=>{if(window.confirm("Are you sure you want to delete this forecast?"))try{(await de.deleteRawMaterialForecast(k)).success?await g():alert("Failed to delete forecast")}catch(A){alert("Error deleting forecast: "+(A instanceof Error?A.message:"Unknown error")),console.error("Error deleting forecast:",A)}},T=k=>{switch(k){case"Active":return"bg-green-100 text-green-800";case"Draft":return"bg-yellow-100 text-yellow-800";case"Completed":return"bg-blue-100 text-blue-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=k=>{switch(k){case"High":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading forecasts..."})]})}):i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 mb-4",children:n.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("p",{className:"text-red-600 mb-4",children:i}),n.jsx("button",{onClick:g,className:"btn-primary",children:"Retry"})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ingredient Forecast"}),n.jsx("p",{className:"text-gray-600",children:"Plan and predict your ingredient requirements based on Job Orders"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:g,className:"btn-secondary flex items-center",title:"Refresh forecasts",children:[n.jsx(wu,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{onClick:()=>e("/raw-material-forecast/add"),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Create Forecast"]})]})]}),n.jsx("div",{className:"card p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search forecasts by name, number, or description...",className:"input-field pl-10",value:f,onChange:k=>m(k.target.value)})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:j,className:"btn-secondary flex items-center",title:"Clear all filters",children:[n.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(ir,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{className:"input-field",value:p,onChange:k=>y(k.target.value),children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),n.jsxs("select",{className:"input-field",value:h,onChange:k=>v(k.target.value),children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"Weekly",children:"Weekly"}),n.jsx("option",{value:"Monthly",children:"Monthly"}),n.jsx("option",{value:"Quarterly",children:"Quarterly"}),n.jsx("option",{value:"Yearly",children:"Yearly"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs("select",{className:"input-field flex-1",value:w,onChange:k=>S(k.target.value),children:[n.jsx("option",{value:"createdAt",children:"Date Created"}),n.jsx("option",{value:"forecastNumber",children:"Forecast Number"}),n.jsx("option",{value:"forecastName",children:"Forecast Name"}),n.jsx("option",{value:"totalValue",children:"Total Value"}),n.jsx("option",{value:"forecastStartDate",children:"Start Date"})]}),n.jsx("button",{onClick:()=>x(b==="asc"?"desc":"asc"),className:"btn-secondary px-3",title:`Sort ${b==="asc"?"Descending":"Ascending"}`,children:b==="asc"?"":""})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Showing ",N.length," forecasts",(f||p||h)&&n.jsx("span",{className:"ml-2 text-blue-600",children:"(filtered)"})]}),(f||p||h)&&n.jsx("button",{onClick:j,className:"text-blue-600 hover:text-blue-800 underline",children:"Clear filters"})]})]})}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"table-header",children:"Forecast #"}),n.jsx("th",{className:"table-header",children:"Name"}),n.jsx("th",{className:"table-header",children:"Period"}),n.jsx("th",{className:"table-header",children:"Start Date"}),n.jsx("th",{className:"table-header",children:"End Date"}),n.jsx("th",{className:"table-header",children:"Status"}),n.jsx("th",{className:"table-header",children:"Confidence"}),n.jsx("th",{className:"table-header",children:"Total Value"}),n.jsx("th",{className:"table-header",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"table-cell font-medium",children:k.forecastNumber}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900 font-medium",children:k.forecastName}),n.jsx("div",{className:"text-gray-500 text-sm max-w-xs truncate",children:k.forecastDescription})]})}),n.jsx("td",{className:"table-cell",children:k.forecastPeriod}),n.jsx("td",{className:"table-cell",children:new Date(k.forecastStartDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:new Date(k.forecastEndDate).toLocaleDateString()}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(k.status)}`,children:k.status})}),n.jsx("td",{className:"table-cell",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(k.confidenceLevel)}`,children:k.confidenceLevel})}),n.jsxs("td",{className:"table-cell font-semibold",children:[k.totalValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"table-cell",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>C(k),className:"text-green-600 hover:text-green-900",title:"View Details",children:n.jsx(Mi,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>e(`/raw-material-forecast/edit/${k.id}`),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_(k.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},k.id))})]})})}),u&&o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Forecast Details"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forecast Number"}),n.jsx("p",{className:"text-gray-900 font-mono",children:o.forecastNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forecast Name"}),n.jsx("p",{className:"text-gray-900",children:o.forecastName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),n.jsx("p",{className:"text-gray-900",children:o.forecastPeriod})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T(o.status)}`,children:o.status})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.forecastStartDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.forecastEndDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confidence Level"}),n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E(o.confidenceLevel)}`,children:o.confidenceLevel})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Value"}),n.jsxs("p",{className:"text-gray-900 font-semibold",children:[o.totalValue.toFixed(2)," KWD"]})]})]}),o.forecastDescription&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-900",children:o.forecastDescription})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Forecast Items (",o.items.length," items)"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Code"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.items.map((k,A)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:k.materialCode}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:k.materialName}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[k.requiredQuantity.toFixed(2)," ",k.unitOfMeasure]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[k.availableQuantity.toFixed(2)," ",k.unitOfMeasure]}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.shortfall>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:[k.shortfall.toFixed(2)," ",k.unitOfMeasure]})}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[k.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[k.forecastValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:k.jobOrderNumber}),n.jsx("div",{className:"text-xs",children:k.bomCode})]})})]},A))})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:o.createdBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.createdAt).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated By"}),n.jsx("p",{className:"text-gray-900",children:o.updatedBy})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(o.updatedAt).toLocaleString()})]})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t bg-gray-50",children:[n.jsx("button",{onClick:()=>d(!1),className:"btn-secondary",children:"Close"}),n.jsx("button",{onClick:()=>{d(!1),e(`/raw-material-forecast/edit/${o.id}`)},className:"btn-primary",children:"Edit Forecast"})]})]})})]})},y1e=()=>{const e=Qe(),[t,r]=O.useState({selectedJobOrderId:"",items:[]}),[a,s]=O.useState({}),[i,l]=O.useState([]),[o,c]=O.useState([]),[u,d]=O.useState(!1),[f,m]=O.useState(null),[p,y]=O.useState(new Set);O.useEffect(()=>{h(),v()},[]);const h=async()=>{try{d(!0),console.log("Loading job orders from backend...");const g=await de.getJobOrders({limit:1e3});console.log("Job orders response:",g),g.success&&g.data&&g.data.length>0?(l(g.data),console.log(" Loaded job orders from backend:",g.data.length)):(console.log(" No job orders found in backend"),l([]))}catch(g){console.error(" Error loading job orders from backend:",g),l([])}finally{d(!1)}},v=async()=>{try{console.log("Loading BOMs from backend...");const g=await de.getBillOfMaterials({limit:1e3});g.success&&g.data&&g.data.length>0?(c(g.data),console.log(" Loaded BOMs from backend:",g.data.length)):(console.log(" No BOMs found in backend"),c([]))}catch(g){console.error(" Error loading BOMs from backend:",g),c([])}},w=g=>{const N=i.find(C=>C.id===g);if(!N)return;m(N),r(C=>({...C,selectedJobOrderId:g}));const j=new Map;N.items.forEach(C=>{const _=o.find(T=>T.id===C.bomId);_&&_.items.forEach(T=>{const E=T.materialCode,k=C.totalQuantity*T.quantity;if(j.has(E)){const A=j.get(E);A.requiredQuantity+=k,A.forecastQuantity=A.requiredQuantity,A.forecastValue=A.forecastQuantity*A.unitPrice,A.shortfall=Math.max(0,A.requiredQuantity-A.availableQuantity)}else{const A={materialId:T.materialId,materialCode:T.materialCode,materialName:T.materialName,currentStock:0,unitOfMeasure:T.unitOfMeasure,unitPrice:T.unitCost,forecastQuantity:k,forecastValue:k*T.unitCost,leadTime:3,requiredQuantity:k,availableQuantity:0,shortfall:k,jobOrderId:N.id,jobOrderNumber:N.jobOrderNumber,bomId:_.id,bomCode:_.bomCode,notes:`Required for ${C.product} (${C.totalQuantity} units)`};j.set(E,A)}})}),r(C=>({...C,items:Array.from(j.values())}))},S=()=>{const g={};return t.selectedJobOrderId||(g.selectedJobOrderId="Please select a Recipe Order"),t.items.length===0&&(g.items="No forecast items generated. Please select a Recipe Order with valid BOMs."),s(g),Object.keys(g).length===0},b=async g=>{if(g.preventDefault(),!!S())try{const N=t.items.reduce((T,E)=>T+E.forecastValue,0),C={forecastNumber:`FC-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`,forecastName:`Forecast for ${f==null?void 0:f.jobOrderNumber}`,forecastDescription:`Material forecast based on Job Order ${f==null?void 0:f.jobOrderNumber}`,forecastPeriod:"Monthly",forecastStartDate:new Date().toISOString().split("T")[0],forecastEndDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"Draft",totalValue:Math.round(N*100)/100,items:t.items,basedOnJobOrders:!0,basedOnHistoricalData:!1,confidenceLevel:"Medium",createdBy:"admin",updatedBy:"admin"};console.log("Creating Forecast:",C);const _=await de.createRawMaterialForecast(C);if(_.success){let T="Forecast created successfully!";if(_.data&&_.data.generatedPurchaseOrder){const E=_.data.generatedPurchaseOrder;T+=`

 Purchase Order Generated:
PO Number: ${E.poNumber}
Total Amount: ${E.totalAmount.toFixed(2)} KWD
Items: ${E.items.length} materials
Status: ${E.status}`}alert(T),e("/raw-material-forecast")}else alert("Error creating forecast: "+(_.message||"Unknown error"))}catch(N){console.error("Error creating forecast:",N),alert("Error creating forecast: "+(N instanceof Error?N.message:"Unknown error"))}},x=g=>{const N=new Set(p);N.has(g)?N.delete(g):N.add(g),y(N)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Ingredient Forecast"}),n.jsx("p",{className:"text-gray-600",children:"Create an ingredient forecast based on Job Orders"})]}),n.jsxs("button",{onClick:()=>e("/raw-material-forecast"),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Forecasts"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:b,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Step 1: Select Recipe Order"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Recipe Order *"}),n.jsxs("select",{className:`input-field ${a.selectedJobOrderId?"border-red-500":""}`,value:t.selectedJobOrderId,onChange:g=>w(g.target.value),children:[n.jsx("option",{value:"",children:"Select a Recipe Order"}),u?n.jsx("option",{disabled:!0,children:"Loading recipe orders..."}):i.map(g=>n.jsxs("option",{value:g.id,children:["Recipe Order #",g.jobOrderNumber," - ",g.customerName," (",g.items.length," items)"]},g.id))]}),a.selectedJobOrderId&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.selectedJobOrderId})]}),f&&n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Recipe Order Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Order Number:"})," ",f.jobOrderNumber]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",f.customerName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total Items:"})," ",f.items.length]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",f.totalAmount.toFixed(2)," KWD"]})]})]})]})]}),f&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 2: Recipe Order Items & Ingredients"}),n.jsx("div",{className:"space-y-4",children:f.items.map((g,N)=>{const j=o.find(T=>T.id===g.bomId),C=`item-${N}`,_=p.has(C);return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(JR,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:g.product}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",g.totalQuantity," units | Unit Price: ",g.unitPrice.toFixed(2)," KWD | Total: ",g.totalPrice.toFixed(2)," KWD"]})]})]}),n.jsx("button",{type:"button",onClick:()=>x(C),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:_?"Hide Ingredients":"Show Ingredients"})]}),_&&j&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx(Ve,{className:"h-4 w-4 text-green-600"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Recipe: ",j.productName," (",j.bomCode,")"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ingredient"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Per Unit"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.items.map((T,E)=>{const k=g.totalQuantity*T.quantity,A=0,P=Math.max(0,k-A),F=k*T.unitCost;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.materialName}),n.jsx("div",{className:"text-sm text-gray-500 font-mono",children:T.materialCode})]})}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:T.unitOfMeasure}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:T.quantity}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 font-semibold",children:k.toFixed(2)}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:A.toFixed(2)}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:P.toFixed(2)})}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900",children:[T.unitCost.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-3 py-2 text-sm text-gray-900 font-semibold",children:[F.toFixed(2)," KWD"]})]},E)})})]})})]})]},N)})})]}),t.items.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 3: Forecast Summary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-red-800 font-semibold text-lg",children:t.items.reduce((g,N)=>g+N.shortfall,0).toFixed(2)}),n.jsx("div",{className:"text-red-600 text-sm",children:"Total Shortfall"})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-blue-800 font-semibold text-lg",children:t.items.reduce((g,N)=>g+N.requiredQuantity,0).toFixed(2)}),n.jsx("div",{className:"text-blue-600 text-sm",children:"Total Required"})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-green-800 font-semibold text-lg",children:t.items.reduce((g,N)=>g+N.availableQuantity,0).toFixed(2)}),n.jsx("div",{className:"text-green-600 text-sm",children:"Total Available"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available Qty"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shortfall"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Value"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.items.map((g,N)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.materialName}),n.jsx("div",{className:"text-sm text-gray-500 font-mono",children:g.materialCode})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.unitOfMeasure}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:g.requiredQuantity.toFixed(2)}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:g.availableQuantity.toFixed(2)}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.shortfall>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:g.shortfall.toFixed(2)})}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[g.unitPrice.toFixed(2)," KWD"]}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold",children:[g.forecastValue.toFixed(2)," KWD"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-mono text-xs",children:g.jobOrderNumber}),n.jsx("div",{className:"text-xs",children:g.bomCode})]})})]},N))})]})}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("div",{children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Forecast Value: ",t.items.reduce((g,N)=>g+N.forecastValue,0).toFixed(2)," KWD"]})}),n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-red-600",children:["Total Shortfall Value: ",t.items.reduce((g,N)=>g+N.shortfall*N.unitPrice,0).toFixed(2)," KWD"]})})]}),t.items.some(g=>g.shortfall>0)&&n.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:" Purchase Order will be automatically generated for shortfall quantities"}),n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Total PO Value: ",t.items.reduce((g,N)=>g+N.shortfall*N.unitPrice,0).toFixed(2)," KWD"]})]})]})})]})]})]}),t.items.length>0&&n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/raw-material-forecast"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Generate Forecast"]})]})]})})]})},hs=()=>{const e=Qe(),t=wa(),[r,a]=O.useState([]),[s,i]=O.useState(!0),[l,o]=O.useState(null),[c,u]=O.useState(""),[d,f]=O.useState(""),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState(""),[S,b]=O.useState(null),[x,g]=O.useState(!1),[N,j]=O.useState([]),[C,_]=O.useState(null),[T,E]=O.useState([]),[k,A]=O.useState(!1),[P,F]=O.useState({}),U=()=>{const I=t.pathname;return I.includes("/kuwait-city/")?"Kuwait City":I.includes("/360-mall/")||I.includes("/marina-walk-cafe/")?"360 Mall":I.includes("/vibes-complex/")||I.includes("/mall-food-court/")?"Vibes Complex":I.includes("/taiba-hospital/")||I.includes("/drive-thru-express/")?"Taiba Hospital":null},W=U(),K=["Pending","Confirmed","Preparing","Ready","Served","Completed","Cancelled"],B=["Dine-in","Takeaway","Delivery","Drive-thru"],ee=["Pending","Paid","Partially Paid","Refunded"],oe=async()=>{i(!0),o(null);try{const ce=U()||(C==null?void 0:C.outletName)||"",ue=await de.getSalesOrders({search:c,outletName:ce,orderStatus:m,orderType:y,paymentStatus:v,limit:1e3,sortBy:"orderTiming.orderDate",sortOrder:"desc"});ue.success?a(ue.data):(console.log("API failed, loading sample data"),R())}catch(I){console.log("API error, loading sample data:",I),R()}finally{i(!1)}},R=()=>{const I=U(),ce=[{_id:"so-001",orderNumber:"SO-DT-001-001",outletId:{_id:"outlet-downtown-001",outletCode:"DT-001",outletName:I||"Kuwait City"},outletCode:"DT-001",outletName:I||"Kuwait City",customerInfo:{customerName:"John Smith",customerPhone:"+965-1234-5678",customerEmail:"john.smith@email.com",tableNumber:"T-05",orderType:"Dine-in"},orderItems:[{productId:{_id:"fg-001",productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages"},productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages",quantity:2,unitPrice:4.5,totalPrice:9,specialInstructions:"Extra ice"},{productId:{_id:"fg-002",productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals"},productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals",quantity:1,unitPrice:8.75,totalPrice:8.75,specialInstructions:"No nuts"}],orderSummary:{subtotal:17.75,taxAmount:2.66,discountAmount:0,totalAmount:20.41,paymentMethod:"Card",paymentStatus:"Paid"},orderStatus:"Ready",orderTiming:{orderDate:new Date().toISOString(),estimatedPrepTime:15,servedAt:new Date().toISOString()},notes:"Regular customer",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"so-002",orderNumber:"SO-MW-001-002",outletId:{_id:"outlet-marina-001",outletCode:"MW-001",outletName:I||"360 Mall"},outletCode:"MW-001",outletName:I||"360 Mall",customerInfo:{customerName:"Sarah Johnson",customerPhone:"+965-9876-5432",customerEmail:"sarah.j@email.com",orderType:"Takeaway"},orderItems:[{productId:{_id:"fg-003",productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages"},productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages",quantity:1,unitPrice:5.25,totalPrice:5.25}],orderSummary:{subtotal:5.25,taxAmount:.79,discountAmount:0,totalAmount:6.04,paymentMethod:"Cash",paymentStatus:"Paid"},orderStatus:"Completed",orderTiming:{orderDate:new Date(Date.now()-30*60*1e3).toISOString(),estimatedPrepTime:10,servedAt:new Date(Date.now()-20*60*1e3).toISOString(),completedAt:new Date(Date.now()-10*60*1e3).toISOString()},notes:"Quick takeaway order",createdAt:new Date(Date.now()-30*60*1e3).toISOString(),updatedAt:new Date(Date.now()-10*60*1e3).toISOString()},{_id:"so-003",orderNumber:"SO-MF-001-003",outletId:{_id:"outlet-mall-001",outletCode:"MF-001",outletName:I||"Vibes Complex"},outletCode:"MF-001",outletName:I||"Vibes Complex",customerInfo:{customerName:"Ahmed Al-Rashid",customerPhone:"+965-5555-1234",tableNumber:"T-12",orderType:"Dine-in"},orderItems:[{productId:{_id:"fg-004",productCode:"FG-004",productName:"Quinoa Salad",category:"Meals"},productCode:"FG-004",productName:"Quinoa Salad",category:"Meals",quantity:2,unitPrice:7.5,totalPrice:15,specialInstructions:"Extra dressing"},{productId:{_id:"fg-005",productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks"},productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks",quantity:1,unitPrice:3.25,totalPrice:3.25}],orderSummary:{subtotal:18.25,taxAmount:2.74,discountAmount:1,totalAmount:19.99,paymentMethod:"Digital Wallet",paymentStatus:"Paid"},orderStatus:"Preparing",orderTiming:{orderDate:new Date(Date.now()-10*60*1e3).toISOString(),estimatedPrepTime:20},notes:"Family lunch order",createdAt:new Date(Date.now()-10*60*1e3).toISOString(),updatedAt:new Date(Date.now()-5*60*1e3).toISOString()}],ue=I?ce.filter(te=>te.outletName===I):ce;a(ue),o(null)},V=async()=>{try{console.log("SalesOrders - loadOutlets called, pathname:",t.pathname);const I=await de.getOutlets({limit:1e3});if(I.success){j(I.data);const ce=U();if(console.log("SalesOrders - Detected outlet from path:",ce),ce){C||_({outletName:ce});const ue=I.data.find(te=>te.outletName===ce);console.log("SalesOrders - Found outlet in data:",ue),ue&&(_(ue),f(ue._id),console.log("SalesOrders - Set currentOutlet:",ue.outletName))}else _(null)}}catch(I){console.error("Error loading outlets:",I)}};O.useEffect(()=>{V()},[t.pathname]),O.useEffect(()=>{oe()},[c,d,m,y,v,t.pathname]),O.useEffect(()=>{const I=setTimeout(()=>{oe()},500);return()=>clearTimeout(I)},[]);const X=()=>{oe()};O.useEffect(()=>{const I=()=>{setTimeout(()=>{oe()},100)};return window.addEventListener("focus",I),()=>{window.removeEventListener("focus",I)}},[]);const J=I=>{b(I),g(!0)},Z=async I=>{if(globalThis.confirm("Are you sure you want to delete this sales order?"))try{const ce=await de.deleteSalesOrder(I);ce.success?(alert(ce.message),oe()):alert(ce.message||"Failed to delete sales order")}catch(ce){alert(ce.message||"An error occurred during deletion")}},le=async I=>{F(ce=>({...ce,[I]:"pushing"}));try{const ce=await de.pushSalesOrderToZoho(I);ce.success?(F(ue=>({...ue,[I]:"success"})),alert(`Sales order pushed to Zoho as Invoice successfully! Zoho Invoice ID: ${ce.data.zohoInvoiceId}`),oe()):(F(ue=>({...ue,[I]:"error"})),alert(ce.message||"Failed to push sales order to Zoho"))}catch(ce){F(ue=>({...ue,[I]:"error"})),alert(ce.message||"An error occurred while pushing to Zoho")}},xe=async()=>{if(T.length===0){alert("Please select at least one sales order to push to Zoho");return}A(!0);try{const I=await de.pushBulkSalesOrdersToZoho(T);I.success?(alert(`Bulk push to Zoho Invoices completed! ${I.data.successful.length} successful, ${I.data.failed.length} failed`),E([]),oe()):alert(I.message||"Failed to push sales orders to Zoho")}catch(I){alert(I.message||"An error occurred during bulk push to Zoho")}finally{A(!1)}},ae=I=>{E(ce=>ce.includes(I)?ce.filter(ue=>ue!==I):[...ce,I])},M=()=>{T.length===r.length?E([]):E(r.map(I=>I._id))},G=I=>{switch(I){case"Pending":return"bg-yellow-100 text-yellow-800";case"Confirmed":return"bg-blue-100 text-blue-800";case"Preparing":return"bg-orange-100 text-orange-800";case"Ready":return"bg-green-100 text-green-800";case"Served":return"bg-green-100 text-green-800";case"Completed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=I=>{switch(I){case"Pending":return"bg-yellow-100 text-yellow-800";case"Paid":return"bg-green-100 text-green-800";case"Partially Paid":return"bg-blue-100 text-blue-800";case"Refunded":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},se=I=>{switch(I){case"Dine-in":return"";case"Takeaway":return"";case"Delivery":return"";case"Drive-thru":return"";default:return""}};return n.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Sales Orders",C&&n.jsxs("span",{className:"text-lg font-normal text-gray-600 ml-2",children:["- ",C.outletName]})]}),C&&n.jsxs("p",{className:"text-gray-600 mt-1",children:["Managing sales orders for ",C.outletName]})]}),n.jsxs("div",{className:"flex space-x-3",children:[T.length>0&&n.jsx("button",{onClick:xe,disabled:k,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:k?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Pushing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ta,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Push to Zoho Invoices (",T.length,")"]})}),n.jsxs("button",{onClick:()=>{const I=U();if(I){const ue={"Kuwait City":"kuwait-city","360 Mall":"360-mall","Vibes Complex":"vibes-complex","Taiba Hospital":"taiba-hospital"}[I]||I.toLowerCase().replace(/\s+/g,"-");e(`/${ue}/pos-sales/create-order`)}else e("/sales-orders/add")},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(pt,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Create Order"]})]})]}),n.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Search"}),n.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(Gt,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),n.jsx("input",{type:"text",name:"search",id:"search",className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search orders...",value:c,onChange:I=>u(I.target.value)})]})]}),!W&&!C&&n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"outletFilter",className:"block text-sm font-medium text-gray-700",children:"Outlet"}),n.jsxs("select",{id:"outletFilter",name:"outletFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:d,onChange:I=>f(I.target.value),children:[n.jsx("option",{value:"",children:"All Outlets"}),N.map(I=>n.jsx("option",{value:I._id,children:I.outletName},I._id))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-gray-700",children:"Status"}),n.jsxs("select",{id:"statusFilter",name:"statusFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:m,onChange:I=>p(I.target.value),children:[n.jsx("option",{value:"",children:"All Statuses"}),K.map(I=>n.jsx("option",{value:I,children:I},I))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"orderTypeFilter",className:"block text-sm font-medium text-gray-700",children:"Order Type"}),n.jsxs("select",{id:"orderTypeFilter",name:"orderTypeFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:y,onChange:I=>h(I.target.value),children:[n.jsx("option",{value:"",children:"All Types"}),B.map(I=>n.jsx("option",{value:I,children:I},I))]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("label",{htmlFor:"paymentStatusFilter",className:"block text-sm font-medium text-gray-700",children:"Payment"}),n.jsxs("select",{id:"paymentStatusFilter",name:"paymentStatusFilter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:v,onChange:I=>w(I.target.value),children:[n.jsx("option",{value:"",children:"All Payments"}),ee.map(I=>n.jsx("option",{value:I,children:I},I))]})]})]}),n.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[n.jsxs("button",{onClick:()=>{u(""),C||f(""),p(""),h(""),w("")},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(ft,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Clear Filters"]}),n.jsxs("button",{onClick:X,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(Mr,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Refresh"]})]})]}),s?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full"}),n.jsx("p",{className:"text-gray-600 mt-3",children:"Loading sales orders..."})]}):l?n.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[n.jsx("strong",{className:"font-bold",children:"Error!"}),n.jsxs("span",{className:"block sm:inline",children:[" ",l]}),n.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:n.jsx(ft,{className:"h-6 w-6 text-red-500 cursor-pointer",onClick:()=>o(null)})})]}):r.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(vr,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-lg",children:"No sales orders found."}),n.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new order."})]}):n.jsx("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.jsx("input",{type:"checkbox",checked:T.length===r.length&&r.length>0,onChange:M,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order #"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outlet"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),n.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Status"}),n.jsx("th",{scope:"col",className:"relative px-6 py-3",children:n.jsx("span",{className:"sr-only",children:"Actions"})})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(I=>{var ce,ue,te;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:T.includes(I._id),onChange:()=>ae(I._id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I.orderNumber}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:I.customerInfo.customerName}),I.customerInfo.customerPhone&&n.jsx("div",{className:"text-gray-400",children:I.customerInfo.customerPhone})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.outletName}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("span",{className:"flex items-center",children:[n.jsx("span",{className:"mr-1",children:se(I.customerInfo.orderType)}),I.customerInfo.orderType]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[I.orderItems.length," item",I.orderItems.length!==1?"s":""]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",I.orderSummary.totalAmount.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${G(I.orderStatus)}`,children:I.orderStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${D(I.orderSummary.paymentStatus)}`,children:I.orderSummary.paymentStatus})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(I.orderTiming.orderDate).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((ce=I.zohoIntegration)==null?void 0:ce.status)==="pushed"?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(_b,{className:"h-3 w-3 mr-1"}),"Invoice Created"]}):((ue=I.zohoIntegration)==null?void 0:ue.status)==="failed"?n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Failed"}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Not Pushed"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[((te=I.zohoIntegration)==null?void 0:te.status)!=="pushed"&&n.jsx("button",{onClick:()=>le(I._id),disabled:P[I._id]==="pushing",className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:"Push to Zoho as Invoice",children:P[I._id]==="pushing"?n.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-green-600 border-t-transparent rounded-full"}):n.jsx(Ta,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>J(I),className:"text-indigo-600 hover:text-indigo-900",title:"View Details",children:n.jsx(Mi,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>e(`/sales-orders/edit/${I._id}`),className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:n.jsx(ns,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>Z(I._id),className:"text-red-600 hover:text-red-900",title:"Delete",children:n.jsx(wt,{className:"h-5 w-5"})})]})})]},I._id)})})]})}),x&&S&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-gray-800 bg-opacity-75 flex justify-center items-center",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl mx-4 my-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Order Details: ",S.orderNumber]}),n.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Customer Information"}),n.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Name:"})," ",S.customerInfo.customerName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",S.customerInfo.customerPhone||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",S.customerInfo.customerEmail||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Order Type:"})," ",se(S.customerInfo.orderType)," ",S.customerInfo.orderType]}),S.customerInfo.tableNumber&&n.jsxs("p",{children:[n.jsx("strong",{children:"Table:"})," ",S.customerInfo.tableNumber]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Order Summary"}),n.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Outlet:"})," ",S.outletName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${G(S.orderStatus)}`,children:S.orderStatus})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Payment:"})," ",n.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${D(S.orderSummary.paymentStatus)}`,children:S.orderSummary.paymentStatus})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Method:"})," ",S.orderSummary.paymentMethod]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total:"})," KWD ",S.orderSummary.totalAmount.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Order Items"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.orderItems.map((I,ce)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:I.productName}),n.jsx("div",{className:"text-gray-500",children:I.productCode}),I.specialInstructions&&n.jsx("div",{className:"text-gray-400 text-xs italic",children:I.specialInstructions})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.category}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.quantity}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",I.unitPrice.toFixed(2)]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["KWD ",I.totalPrice.toFixed(2)]})]},ce))})]})})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Close"})})]})})]})},xs=()=>{const e=Qe(),t=wa(),[r,a]=O.useState(null),[s,i]=O.useState([]),[l,o]=O.useState(!0),[c,u]=O.useState({orderNumber:"",outletId:"",outletCode:"",outletName:"",customerInfo:{customerName:"",customerPhone:"",customerEmail:"",tableNumber:"",orderType:"Dine-in"},orderItems:[],orderSummary:{subtotal:0,taxAmount:0,discountAmount:0,totalAmount:0,paymentMethod:"Cash",paymentStatus:"Pending"},orderStatus:"Pending",orderTiming:{orderDate:new Date().toISOString().split("T")[0],estimatedPrepTime:15},notes:""}),[d,f]=O.useState({}),[m]=O.useState("");O.useEffect(()=>{const A=new URLSearchParams(t.search).get("outlet");A?p(A):y()},[t.search]);const p=async k=>{try{o(!0);const P={"kuwait-city":"Kuwait City","360-mall":"360 Mall","marina-walk-cafe":"360 Mall","vibes-complex":"Vibes Complex","mall-food-court":"Vibes Complex","taiba-hospital":"Taiba Hospital","drive-thru-express":"Taiba Hospital"}[k]||k,F=await de.getOutlets({limit:1e3});if(F.success&&Array.isArray(F.data)){const U=F.data.find(W=>W.outletName===P);U&&(a(U),u(W=>({...W,outletId:U._id||U.id,outletCode:U.outletCode,outletName:U.outletName,orderNumber:`SO-${U.outletCode}-${Date.now().toString().slice(-6)}`})))}await h()}catch(A){console.error("Error loading outlet data:",A)}finally{o(!1)}},y=async()=>{try{o(!0);const k=await de.getOutlets({limit:1e3});if(k.success&&k.data.length>0){const A=k.data[0];a(A),u(P=>({...P,outletId:A._id||A.id,outletCode:A.outletCode,outletName:A.outletName,orderNumber:`SO-${A.outletCode}-${Date.now().toString().slice(-6)}`}))}await h()}catch(k){console.error("Error loading default outlet:",k)}finally{o(!1)}},h=async()=>{try{const k=(r==null?void 0:r.outletName)||c.outletName;let A;k?A=await de.getOutletFinishedGoods(k,{limit:1e3}):A=await de.getOutletFinishedGoods("Kuwait City",{limit:1e3}),A.success?i(A.data):(console.log("API failed, loading sample products"),v())}catch(k){console.error("Error loading products:",k),v()}},v=()=>{i([{_id:"fg-001",id:"fg-001",productCode:"FG-001",productName:"Fresh Green Smoothie",category:"Beverages",unitPrice:4.5,description:"Fresh green smoothie with spinach, banana, and apple"},{_id:"fg-002",id:"fg-002",productCode:"FG-002",productName:"Protein Power Bowl",category:"Meals",unitPrice:8.75,description:"High protein meal bowl with quinoa and vegetables"},{_id:"fg-003",id:"fg-003",productCode:"FG-003",productName:"Detox Juice Blend",category:"Beverages",unitPrice:5.25,description:"Fresh detox juice blend with celery and cucumber"},{_id:"fg-004",id:"fg-004",productCode:"FG-004",productName:"Quinoa Salad",category:"Meals",unitPrice:7.5,description:"Healthy quinoa salad with mixed vegetables"},{_id:"fg-005",id:"fg-005",productCode:"FG-005",productName:"Energy Protein Bar",category:"Snacks",unitPrice:3.25,description:"High protein energy bar for quick nutrition"},{_id:"fg-006",id:"fg-006",productCode:"FG-006",productName:"Fresh Fruit Bowl",category:"Meals",unitPrice:6,description:"Mixed fresh fruit bowl with seasonal fruits"},{_id:"fg-007",id:"fg-007",productCode:"FG-007",productName:"Acai Bowl",category:"Meals",unitPrice:9.5,description:"Nutritious acai bowl with granola and berries"},{_id:"fg-008",id:"fg-008",productCode:"FG-008",productName:"Cold Brew Coffee",category:"Beverages",unitPrice:3.75,description:"Smooth cold brew coffee with natural sweetness"}])},w=["Dine-in","Takeaway","Delivery","Drive-thru"],S=["Cash","Card","Digital Wallet","Credit","Mixed"],b=["Pending","Paid","Partially Paid","Refunded"],x=["Pending","Confirmed","Preparing","Ready","Served","Completed","Cancelled"],g=()=>{const k={};return c.orderNumber.trim()||(k.orderNumber="Order number is required"),c.customerInfo.customerName.trim()||(k.customerName="Customer name is required"),c.customerInfo.orderType||(k.orderType="Order type is required"),c.orderItems.length===0&&(k.orderItems="At least one item is required"),f(k),Object.keys(k).length===0},N=async k=>{if(k.preventDefault(),!!g())try{const A=c.orderItems.reduce((K,B)=>K+B.totalPrice,0),P=A*.15,F=A+P-c.orderSummary.discountAmount,U={orderNumber:c.orderNumber,outletId:c.outletId,outletCode:c.outletCode,outletName:c.outletName,customerInfo:c.customerInfo,orderItems:c.orderItems,orderSummary:{...c.orderSummary,subtotal:A,taxAmount:P,totalAmount:F},orderStatus:c.orderStatus,orderTiming:c.orderTiming,notes:c.notes};console.log("Creating Sales Order:",U);const W=await de.createSalesOrder(U);if(W.success){alert("Sales Order created successfully!");const K=new URLSearchParams(t.search).get("outlet");if(K)if(K==="Central Kitchen")e("/central-kitchen");else{const B=K.toLowerCase().replace(/\s+/g,"-");e(`/${B}/sales-orders`)}else e("/sales-orders")}else alert("Failed to create Sales Order: "+W.message)}catch(A){console.error("Error creating Sales Order:",A),alert("Error creating Sales Order: "+(A instanceof Error?A.message:"Unknown error"))}},j=(k,A)=>{if(k.includes(".")){const[P,F]=k.split(".");u(U=>({...U,[P]:{...U[P]||{},[F]:A}}))}else u(P=>({...P,[k]:A}));d[k]&&f(P=>({...P,[k]:""}))},C=()=>{const k={productId:"",productCode:"",productName:"",category:"",quantity:1,unitPrice:0,totalPrice:0,specialInstructions:""};u(A=>({...A,orderItems:[...A.orderItems,k]}))},_=(k,A,P)=>{const F=[...c.orderItems];if(F[k]={...F[k],[A]:P},A==="quantity"||A==="unitPrice"){const U=A==="quantity"?Number(P):F[k].quantity,W=A==="unitPrice"?Number(P):F[k].unitPrice;F[k].totalPrice=U*W}if(A==="productId"&&typeof P=="string"){const U=s.find(W=>W._id===P||W.id===P);U&&(F[k].productCode=U.productCode,F[k].productName=U.productName,F[k].category=U.category,F[k].unitPrice=U.unitPrice,F[k].totalPrice=F[k].quantity*U.unitPrice)}u(U=>({...U,orderItems:F}))},T=k=>{const A=c.orderItems.filter((P,F)=>F!==k);u(P=>({...P,orderItems:A}))},E=s.filter(k=>k.productName.toLowerCase().includes(m.toLowerCase())||k.productCode.toLowerCase().includes(m.toLowerCase())||k.category.toLowerCase().includes(m.toLowerCase()));return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading sales order form..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Sales Order"}),n.jsx("p",{className:"text-gray-600",children:r?`${r.outletName} (${r.outletCode})`:"Select an outlet"})]}),n.jsxs("button",{onClick:()=>e("/sales-orders"),className:"btn-secondary flex items-center",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Back to Sales Orders"]})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:N,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Ve,{className:"h-5 w-5 mr-2"}),"Order Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Number *"}),n.jsx("input",{type:"text",className:`input-field ${d.orderNumber?"border-red-500":""}`,value:c.orderNumber,onChange:k=>j("orderNumber",k.target.value),placeholder:"Enter order number"}),d.orderNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date *"}),n.jsx("input",{type:"date",className:`input-field ${d.orderDate?"border-red-500":""}`,value:c.orderTiming.orderDate,onChange:k=>j("orderTiming.orderDate",k.target.value)}),d.orderDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[n.jsx(Ci,{className:"h-5 w-5 mr-2"}),"Customer Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),n.jsx("input",{type:"text",className:`input-field ${d.customerName?"border-red-500":""}`,value:c.customerInfo.customerName,onChange:k=>j("customerInfo.customerName",k.target.value),placeholder:"Enter customer name"}),d.customerName&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type *"}),n.jsx("select",{className:`input-field ${d.orderType?"border-red-500":""}`,value:c.customerInfo.orderType,onChange:k=>j("customerInfo.orderType",k.target.value),children:w.map(k=>n.jsx("option",{value:k,children:k},k))}),d.orderType&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.orderType})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(cT,{className:"h-4 w-4 inline mr-1"}),"Phone Number"]}),n.jsx("input",{type:"tel",className:"input-field",value:c.customerInfo.customerPhone,onChange:k=>j("customerInfo.customerPhone",k.target.value),placeholder:"Enter phone number"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(oT,{className:"h-4 w-4 inline mr-1"}),"Email Address"]}),n.jsx("input",{type:"email",className:"input-field",value:c.customerInfo.customerEmail,onChange:k=>j("customerInfo.customerEmail",k.target.value),placeholder:"Enter email address"})]}),c.customerInfo.orderType==="Dine-in"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(xd,{className:"h-4 w-4 inline mr-1"}),"Table Number"]}),n.jsx("input",{type:"text",className:"input-field",value:c.customerInfo.tableNumber,onChange:k=>j("customerInfo.tableNumber",k.target.value),placeholder:"Enter table number"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[n.jsx(vr,{className:"h-5 w-5 mr-2"}),"Order Items"]}),n.jsxs("button",{type:"button",onClick:C,className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),c.orderItems.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(vr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:'No items added yet. Click "Add Item" to start building the order.'})]}):n.jsx("div",{className:"space-y-4",children:c.orderItems.map((k,A)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h4",{className:"font-medium text-gray-900",children:["Item ",A+1]}),n.jsx("button",{type:"button",onClick:()=>T(A),className:"text-red-600 hover:text-red-800",children:n.jsx(wt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),n.jsxs("select",{className:"input-field",value:k.productId,onChange:P=>_(A,"productId",P.target.value),children:[n.jsx("option",{value:"",children:"Select Product"}),E.map(P=>n.jsxs("option",{value:P._id||P.id,children:[P.productName," - ",P.unitPrice.toFixed(2)," KWD"]},P._id||P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),n.jsx("input",{type:"number",min:"1",className:"input-field",value:k.quantity,onChange:P=>_(A,"quantity",parseInt(P.target.value)||1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:k.unitPrice,onChange:P=>_(A,"unitPrice",parseFloat(P.target.value)||0)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Price (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:k.totalPrice.toFixed(2),readOnly:!0})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),n.jsx("textarea",{className:"input-field",rows:2,value:k.specialInstructions,onChange:P=>_(A,"specialInstructions",P.target.value),placeholder:"Any special instructions for this item..."})]})]},A))}),d.orderItems&&n.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.orderItems})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtotal (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:c.orderItems.reduce((k,A)=>k+A.totalPrice,0).toFixed(2),readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field",value:c.orderSummary.discountAmount,onChange:k=>j("orderSummary.discountAmount",(parseFloat(k.target.value)||0).toString())})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-gray-50",value:(c.orderItems.reduce((k,A)=>k+A.totalPrice,0)*.15).toFixed(2),readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount (KWD)"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field bg-blue-50 font-semibold",value:(c.orderItems.reduce((k,A)=>k+A.totalPrice,0)+c.orderItems.reduce((k,A)=>k+A.totalPrice,0)*.15-c.orderSummary.discountAmount).toFixed(2),readOnly:!0})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),n.jsx("select",{className:"input-field",value:c.orderSummary.paymentMethod,onChange:k=>j("orderSummary.paymentMethod",k.target.value),children:S.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),n.jsx("select",{className:"input-field",value:c.orderSummary.paymentStatus,onChange:k=>j("orderSummary.paymentStatus",k.target.value),children:b.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),n.jsx("select",{className:"input-field",value:c.orderStatus,onChange:k=>j("orderStatus",k.target.value),children:x.map(k=>n.jsx("option",{value:k,children:k},k))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(lx,{className:"h-4 w-4 inline mr-1"}),"Estimated Prep Time (minutes)"]}),n.jsx("input",{type:"number",min:"1",className:"input-field",value:c.orderTiming.estimatedPrepTime,onChange:k=>j("orderTiming.estimatedPrepTime",(parseInt(k.target.value)||15).toString())})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:c.notes,onChange:k=>j("notes",k.target.value),placeholder:"Any additional notes for this order..."})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:()=>e("/sales-orders"),className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Sales Order"]})]})]})})]})};function v1e(e){return{"kuwait-city":"Kuwait City","360-mall":"360 Mall","marina-walk-cafe":"360 Mall","vibes-complex":"Vibes Complex","mall-food-court":"Vibes Complex","taiba-hospital":"Taiba Hospital","drive-thru-express":"Taiba Hospital"}[e.toLowerCase()]||"Kuwait City"}const Js=()=>{const e=Qe(),t=wa(),r=t.pathname.split("/")[1],a=v1e(r);console.log("POSCreateOrder - URL Path:",t.pathname),console.log("POSCreateOrder - Outlet Slug:",r),console.log("POSCreateOrder - Outlet Name:",a);const[s,i]=O.useState([]),[l,o]=O.useState([]),[c,u]=O.useState("finished"),[d,f]=O.useState([]),[m,p]=O.useState(""),[y,h]=O.useState(""),[v,w]=O.useState({name:"",phone:"",email:""}),[S,b]=O.useState("Dine-in"),[x,g]=O.useState("Cash"),[N,j]=O.useState(0),[C]=O.useState(15),[_,T]=O.useState(!1),[E,k]=O.useState(null),[A,P]=O.useState([]),F=[{value:"Dine-in",label:"Dine-in",icon:""},{value:"Takeaway",label:"Takeaway",icon:""},{value:"Delivery",label:"Delivery",icon:""},{value:"Drive-thru",label:"Drive-thru",icon:""}];O.useEffect(()=>{console.log("useEffect triggered - outletName changed to:",a),console.log("useEffect - location.pathname:",t.pathname),console.log("useEffect - outletSlug:",r),P([]),i([]),k(null),U(),W(),K(),B()},[a,t.pathname]);const U=async()=>{try{console.log("loadOutletData - Looking for outlet:",a);const I=await de.getOutlets();if(I.success&&Array.isArray(I.data)){console.log("loadOutletData - Available outlets:",I.data.map(ue=>ue.outletName));const ce=I.data.find(ue=>ue.outletName===a);ce?(console.log("loadOutletData - Found outlet match:",ce),k(ce)):console.log("loadOutletData - No outlet match found for:",a)}}catch(I){console.error("Error loading outlet data:",I)}},W=async()=>{try{T(!0);let I;if(console.log("loadProducts - Loading products for outlet:",a),a==="Kuwait City"?(console.log("loadProducts - Calling getKuwaitCityFinishedProducts"),I=await de.getKuwaitCityFinishedProducts({limit:1e3})):a==="360 Mall"?(console.log("loadProducts - Calling get360MallFinishedProducts"),I=await de.get360MallFinishedProducts({limit:1e3})):a==="Vibes Complex"?(console.log("loadProducts - Calling getVibeComplexFinishedProducts"),I=await de.getVibeComplexFinishedProducts({limit:1e3})):a==="Taiba Hospital"?(console.log("loadProducts - Calling getTaibaKitchenFinishedProducts"),I=await de.getTaibaKitchenFinishedProducts({limit:1e3})):(console.log("loadProducts - Fallback to getFinishedGoods"),I=await de.getFinishedGoods({limit:1e3})),I.success&&Array.isArray(I.data)){console.log("loadProducts - Raw response data:",I.data.length,"products");const ce=I.data.filter(ue=>ue.isActive&&ue.currentStock>0&&ue.status!=="Out of Stock");console.log("loadProducts - Filtered available products:",ce.length,"products"),console.log("loadProducts - First few products:",ce.slice(0,3).map(ue=>({name:ue.productName,stock:ue.currentStock}))),i(ce)}}catch(I){console.error("Error loading products:",I),i([])}finally{T(!1)}},K=async()=>{try{const I=await de.getBillOfMaterials({limit:1e3,sortBy:"productName",sortOrder:"asc"});if(I.success&&Array.isArray(I.data)){const ce=I.data.map(ue=>({id:ue.id||ue._id,bomCode:ue.bomCode,productName:ue.productName,productDescription:ue.productDescription,totalCost:ue.totalCost}));o(ce)}else o([])}catch(I){console.error("Error loading recipes:",I),o([])}},B=async()=>{try{console.log("loadExistingOrders - Loading orders for outlet:",a);const I=await de.getSalesOrders({outletName:a,limit:10,sortBy:"orderTiming.orderDate",sortOrder:"desc"});I.success&&Array.isArray(I.data)&&(console.log("loadExistingOrders - Found orders:",I.data.length),P(I.data))}catch(I){console.error("Error loading existing orders:",I),P([])}},ee=["All",...Array.from(new Set(s.map(I=>I.category)))],oe=s.filter(I=>{const ce=I.productName.toLowerCase().includes(m.toLowerCase())||I.productCode.toLowerCase().includes(m.toLowerCase()),ue=y===""||y==="All"||I.category===y;return ce&&ue&&I.isActive&&I.currentStock>0}),R=I=>{const ce=d.find(te=>te.kind==="finished"&&te.product&&te.product._id===I._id);if((ce?ce.quantity:0)>=I.currentStock){alert(`Only ${I.currentStock} ${I.unitOfMeasure} available in stock`);return}f(ce?d.map(te=>te.kind==="finished"&&te.product&&te.product._id===I._id?{...te,quantity:te.quantity+1,subtotal:(te.quantity+1)*I.unitPrice}:te):[...d,{kind:"finished",product:I,quantity:1,subtotal:I.unitPrice}])},V=I=>{const ce=d.find(ue=>ue.kind==="recipe"&&ue.recipe&&ue.recipe.bomCode===I.bomCode);f(ce?ue=>ue.map(te=>te.kind==="recipe"&&te.recipe&&te.recipe.bomCode===I.bomCode?{...te,quantity:te.quantity+1,subtotal:(te.quantity+1)*(te.recipe.totalCost||0)}:te):ue=>[...ue,{kind:"recipe",recipe:I,quantity:1,subtotal:I.totalCost||0}])},X=(I,ce)=>{ce<0||f(d.map(ue=>ue.kind==="finished"&&ue.product&&ue.product._id===I?{...ue,quantity:ce,subtotal:ce*ue.product.unitPrice}:ue))},J=(I,ce)=>{ce<0||f(ue=>ue.map(te=>te.kind==="recipe"&&te.recipe&&te.recipe.bomCode===I.replace("recipe-","")?{...te,quantity:ce,subtotal:ce*(te.recipe.totalCost||0)}:te))},Z=I=>{f(ce=>ce.filter(ue=>!(ue.kind==="recipe"&&ue.recipe&&ue.recipe.bomCode===I)))},le=I=>{f(d.filter(ce=>!(ce.kind==="finished"&&ce.product&&ce.product._id===I)))},xe=()=>d.reduce((I,ce)=>I+ce.subtotal,0),ae=()=>xe()*C/100,M=()=>xe()*N/100,G=()=>xe()+ae()-M(),D=async()=>{var ue;if(d.length===0){alert("Please add items to cart before checkout");return}if(!v.name.trim()){alert("Please enter customer name");return}const I=[],ce=d.filter(te=>te.kind==="finished"&&te.product);for(const te of ce)te.quantity>te.product.currentStock&&I.push(`${te.product.productName}: Requested ${te.quantity}, Available ${te.product.currentStock} ${te.product.unitOfMeasure}`);if(I.length>0){const te=`Insufficient stock for the following items:

${I.join(`
`)}

Please adjust quantities and try again.`;alert(te);return}if(E||await U(),!E){alert("Unable to resolve outlet for this order. Please reload the page and try again.");return}T(!0);try{const Ue=d.filter(Le=>Le.kind==="finished"&&Le.product).map(Le=>({productId:Le.product._id,productCode:Le.product.productCode,productName:Le.product.productName,category:Le.product.category,quantity:Le.quantity,unitPrice:Le.product.unitPrice,totalPrice:Le.subtotal})),Je=d.filter(Le=>Le.kind==="recipe"&&Le.recipe).map(Le=>({bomCode:Le.recipe.bomCode,productName:Le.recipe.productName,quantity:Le.quantity,unitPrice:Le.recipe.totalCost||0})),Ge={outletId:(E==null?void 0:E._id)||(E==null?void 0:E.id),outletCode:E==null?void 0:E.outletCode,outletName:a,outletSlug:r,customerInfo:{customerName:v.name,customerPhone:v.phone,customerEmail:v.email,orderType:S},orderItems:Ue,recipeItems:Je,orderSummary:{subtotal:xe(),taxAmount:ae(),discountAmount:M(),totalAmount:G(),paymentMethod:x,paymentStatus:"Paid"},orderStatus:"Completed",orderTiming:{orderDate:new Date().toISOString(),estimatedPrepTime:15},notes:`POS Order - ${S}`,createdBy:"pos-user",updatedBy:"pos-user"};console.log("Creating Sales Order:",Ge),console.log("Outlet object:",E),console.log("Outlet slug:",r);const Ke=await de.createSalesOrder(Ge);if(Ke.success){const Le=((ue=Ke.data)==null?void 0:ue.orderNumber)||"N/A";alert(`Order ${Le} created successfully!
Total: KWD ${G().toFixed(2)}

Please refresh the sales orders page to see the new order.`),f([]),w({name:"",phone:"",email:""}),j(0),await W(),await B(),setTimeout(()=>{const ne={"Kuwait City":"kuwait-city","360 Mall":"360-mall","Vibes Complex":"vibes-complex","Taiba Hospital":"taiba-hospital"}[a]||r;e(`/${ne}/sales-orders`)},1e3)}else alert("Failed to create order: "+Ke.message)}catch(te){console.error("Error creating order:",te),alert("Error creating order: "+(te instanceof Error?te.message:"Unknown error"))}finally{T(!1)}},se=()=>{d.length>0&&window.confirm("Are you sure you want to clear the cart?")&&f([])};return n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:n.jsx(Lt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"POS - Create Order"}),n.jsx("p",{className:"text-gray-600",children:a})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(lx,{className:"h-4 w-4"}),n.jsx("span",{children:new Date().toLocaleString()})]})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"inline-flex rounded-md shadow-sm overflow-hidden",role:"group",children:[n.jsx("button",{onClick:()=>u("finished"),className:`px-4 py-2 text-sm font-medium border ${c==="finished"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:"Finished Goods"}),n.jsx("button",{onClick:()=>u("recipe"),className:`px-4 py-2 text-sm font-medium border -ml-px ${c==="recipe"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300"}`,children:"Recipes"})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx("div",{className:"card p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:m,onChange:I=>p(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),c==="finished"&&n.jsx("select",{value:y,onChange:I=>h(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ee.map(I=>n.jsx("option",{value:I,children:I},I))})]})}),n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:c==="finished"?"Available Products":"Available Recipes"}),_?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Loading products..."})]}):c==="finished"?oe.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No products available"}),n.jsx("p",{className:"text-sm",children:"Check back later or contact admin"})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:oe.map(I=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>R(I),onKeyDown:ce=>ce.key==="Enter"&&R(I),role:"button",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:I.productName}),n.jsxs("span",{className:"text-green-600 font-semibold",children:["KWD ",I.unitPrice.toFixed(2)]})]}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Code: ",I.productCode]}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:I.category}),n.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:["Stock: ",I.currentStock," ",I.unitOfMeasure]})]}),n.jsx("button",{className:"w-full text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Add to Cart"})]},I._id))}):l.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No recipes available"}),n.jsx("p",{className:"text-sm",children:"Add recipes in Recipe Master (BOM)"})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:l.filter(I=>I.productName.toLowerCase().includes(m.toLowerCase())||I.bomCode.toLowerCase().includes(m.toLowerCase())).map(I=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>V(I),onKeyDown:ce=>ce.key==="Enter"&&V(I),role:"button",tabIndex:0,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:I.productName}),n.jsx("span",{className:"text-green-600 font-semibold",children:I.totalCost?`KWD ${I.totalCost.toFixed(2)}`:"Recipe"})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",I.bomCode]}),I.productDescription&&n.jsx("div",{className:"text-xs text-gray-400 mt-1",children:I.productDescription}),n.jsx("div",{className:"mt-3",children:n.jsx("button",{className:"text-indigo-600 text-sm font-medium",children:"Add to Cart"})})]},I.bomCode))})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(vr,{className:"h-5 w-5 mr-2"}),"Cart (",d.length,")"]}),d.length>0&&n.jsx("button",{onClick:se,className:"text-red-600 hover:text-red-800 text-sm",children:"Clear Cart"})]}),d.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Cart is empty"}),n.jsx("p",{className:"text-sm",children:"Add products to get started"})]}):n.jsx("div",{className:"space-y-3",children:d.map(I=>I.kind==="finished"&&I.product?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:I.product.productName}),n.jsxs("p",{className:"text-xs text-gray-600",children:["KWD ",I.product.unitPrice.toFixed(2)," each"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",I.product.currentStock," ",I.product.unitOfMeasure]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",value:I.quantity.toString(),onChange:ce=>{const ue=parseInt(ce.target.value)||0;ue>=0&&X(I.product._id,ue)},className:"w-16 text-center text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"}),n.jsx("button",{onClick:()=>le(I.product._id),className:"p-1 text-red-600 hover:bg-red-50 rounded ml-2",children:n.jsx(wt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"text-right ml-4",children:n.jsxs("p",{className:"font-medium text-sm",children:["KWD ",I.subtotal.toFixed(2)]})})]},I.product._id):I.kind==="recipe"&&I.recipe?n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"font-medium text-sm",children:[I.recipe.productName," ",n.jsx("span",{className:"text-xs text-gray-500",children:"(Recipe)"})]}),n.jsx("p",{className:"text-xs text-gray-600",children:I.recipe.totalCost?`KWD ${I.recipe.totalCost.toFixed(2)} each`:"Cost not set"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",value:I.quantity.toString(),onChange:ce=>{const ue=parseInt(ce.target.value)||0;ue>=0&&J(`recipe-${I.recipe.bomCode}`,ue)},className:"w-16 text-center text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"}),n.jsx("button",{onClick:()=>Z(I.recipe.bomCode),className:"p-1 text-red-600 hover:bg-red-50 rounded ml-2",children:n.jsx(wt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"text-right ml-4",children:n.jsxs("p",{className:"font-medium text-sm",children:["KWD ",I.subtotal.toFixed(2)]})})]},`recipe-${I.recipe.bomCode}`):null)})]}),d.length>0&&n.jsxs("div",{className:"card p-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["KWD ",xe().toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",C,"%):"]}),n.jsxs("span",{children:["KWD ",ae().toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Discount (",N,"%):"]}),n.jsxs("span",{className:"text-red-600",children:["-KWD ",M().toFixed(2)]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["KWD ",G().toFixed(2)]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Type"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.map(I=>n.jsxs("button",{onClick:()=>b(I.value),className:`p-2 text-sm rounded-lg border transition-colors ${S===I.value?"bg-blue-100 border-blue-500 text-blue-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("span",{className:"mr-1",children:I.icon}),I.label]},I.value))})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Customer Info"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Customer name *",value:v.name,onChange:I=>w({...v,name:I.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsx(cT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"tel",placeholder:"Phone number",value:v.phone,onChange:I=>w({...v,phone:I.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(oT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"email",placeholder:"Email (optional)",value:v.email||"",onChange:I=>w({...v,email:I.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Method"}),n.jsxs("select",{value:x,onChange:I=>g(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"Cash",children:"Cash"}),n.jsx("option",{value:"Card",children:"Credit/Debit Card"}),n.jsx("option",{value:"Digital Wallet",children:"Digital Wallet"}),n.jsx("option",{value:"Credit",children:"Credit"}),n.jsx("option",{value:"Mixed",children:"Mixed"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:N,onChange:I=>j(Number(I.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsx("button",{onClick:D,disabled:_||d.length===0,className:"w-full mt-6 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:_?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ob,{className:"h-4 w-4 mr-2"}),"Complete Order - $",G().toFixed(2)]})})]})]})]})]})})},b1e=({user:e,permissions:t,onClose:r,onSave:a})=>{const[s,i]=O.useState((e==null?void 0:e.permissions)||[]),l=t.reduce((d,f)=>(d[f.module]||(d[f.module]=[]),d[f.module].push(f),d),{}),o=(d,f)=>{i(f?m=>[...m,d]:m=>m.filter(p=>p!==d))},c=(d,f)=>{const m=l[d].map(p=>p.id);i(f?p=>[...new Set([...p,...m])]:p=>p.filter(y=>!m.includes(y)))},u=()=>{e&&(a(e.id,s),r())};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Ci,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Permissions"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," (",e.email,")"]})]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.name})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),n.jsx("p",{className:"text-sm text-gray-900",children:e.role})]})]})}),Object.entries(l).map(([d,f])=>{const m=f.every(y=>s.includes(y.id)),p=f.some(y=>s.includes(y.id));return n.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:m,ref:y=>{y&&(y.indeterminate=p&&!m)},onChange:y=>c(d,y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Eb,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:d}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",f.filter(y=>s.includes(y.id)).length,"/",f.length,")"]})]})]})}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(y=>n.jsxs("label",{className:"flex items-start space-x-3",children:[n.jsx("input",{type:"checkbox",checked:s.includes(y.id),onChange:h=>o(y.id,h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:y.category})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:y.description})]})]},y.id))})})]},d)})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx(lT,{className:"h-4 w-4 inline mr-1"}),s.length," permissions selected"]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{onClick:u,className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}):null},w1e=({role:e,permissions:t,onClose:r,onSave:a,onDelete:s})=>{const[i,l]=O.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",permissions:(e==null?void 0:e.permissions)||[]}),o=t.reduce((m,p)=>(m[p.module]||(m[p.module]=[]),m[p.module].push(p),m),{}),c=(m,p)=>{l(p?y=>({...y,permissions:[...y.permissions,m]}):y=>({...y,permissions:y.permissions.filter(h=>h!==m)}))},u=(m,p)=>{const y=o[m].map(h=>h.id);l(p?h=>({...h,permissions:[...new Set([...h.permissions,...y])]}):h=>({...h,permissions:h.permissions.filter(v=>!y.includes(v))}))},d=()=>{i.name.trim()&&i.description.trim()&&(a(i),r())},f=()=>{e&&s&&(s(e.id),r())};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Eb,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Edit Role":"Create New Role"}),n.jsx("p",{className:"text-sm text-gray-600",children:e?"Modify role permissions and settings":"Define a new role with specific permissions"})]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),n.jsx("input",{type:"text",value:i.name,onChange:m=>l(p=>({...p,name:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter role name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Count"}),n.jsx("input",{type:"text",value:(e==null?void 0:e.userCount)||0,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),n.jsx("textarea",{value:i.description,onChange:m=>l(p=>({...p,description:m.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter role description"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Permissions"}),n.jsx("div",{className:"space-y-4",children:Object.entries(o).map(([m,p])=>{const y=p.every(v=>i.permissions.includes(v.id)),h=p.some(v=>i.permissions.includes(v.id));return n.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:y,ref:v=>{v&&(v.indeterminate=h&&!y)},onChange:v=>u(m,v.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("span",{className:"font-medium text-gray-900",children:m}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",p.filter(v=>i.permissions.includes(v.id)).length,"/",p.length,")"]})]})}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(v=>n.jsxs("label",{className:"flex items-start space-x-3",children:[n.jsx("input",{type:"checkbox",checked:i.permissions.includes(v.id),onChange:w=>c(v.id,w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:v.category})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:v.description})]})]},v.id))})})]},m)})})]})]})}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[i.permissions.length," permissions selected"]}),e&&s&&n.jsxs("button",{onClick:f,className:"text-red-600 hover:text-red-800 flex items-center space-x-1",children:[n.jsx(wt,{className:"h-4 w-4"}),n.jsx("span",{children:"Delete Role"})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancel"}),n.jsxs("button",{onClick:d,className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),e?"Update Role":"Create Role"]})]})]})]})})},N1e=()=>{const[e,t]=O.useState("users"),[r,a]=O.useState([]),[s,i]=O.useState(!1),[l,o]=O.useState({name:"",email:"",password:"",role:"Staff",status:"Active"}),[c,u]=O.useState([{id:"1",name:"Admin",description:"Full system access",permissions:["all"],userCount:1},{id:"2",name:"Manager",description:"Management level access",permissions:["inventory.view","inventory.edit","reports.view","users.view"],userCount:1},{id:"3",name:"Staff",description:"Basic operational access",permissions:["inventory.view","sales.view"],userCount:1}]),[d]=O.useState([{id:"dashboard.view",name:"View Dashboard",description:"Access to main dashboard",category:"Dashboard",module:"Dashboard"},{id:"inventory.view",name:"View Inventory",description:"View inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.edit",name:"Edit Inventory",description:"Modify inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.add",name:"Add Inventory",description:"Add new inventory items",category:"Inventory",module:"Inventory Management"},{id:"inventory.delete",name:"Delete Inventory",description:"Delete inventory items",category:"Inventory",module:"Inventory Management"},{id:"rawmaterials.view",name:"View Raw Materials",description:"View raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"rawmaterials.edit",name:"Edit Raw Materials",description:"Edit raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"rawmaterials.add",name:"Add Raw Materials",description:"Add new raw materials",category:"Raw Materials",module:"Raw Materials"},{id:"centralkitchen.view",name:"View Central Kitchen",description:"Access central kitchen",category:"Central Kitchen",module:"Central Kitchen"},{id:"centralkitchen.edit",name:"Edit Central Kitchen",description:"Modify central kitchen data",category:"Central Kitchen",module:"Central Kitchen"},{id:"centralkitchen.transfer",name:"Create Transfers",description:"Create transfer orders",category:"Central Kitchen",module:"Central Kitchen"},{id:"outlets.view",name:"View Outlets",description:"View outlet information",category:"Outlets",module:"Outlet Management"},{id:"outlets.edit",name:"Edit Outlets",description:"Modify outlet data",category:"Outlets",module:"Outlet Management"},{id:"outlets.kuwait",name:"Kuwait City Access",description:"Access Kuwait City outlet",category:"Outlets",module:"Outlet Management"},{id:"outlets.mall360",name:"360 Mall Access",description:"Access 360 Mall outlets",category:"Outlets",module:"Outlet Management"},{id:"outlets.taiba",name:"Taiba Hospital Access",description:"Access Taiba Hospital outlet",category:"Outlets",module:"Outlet Management"},{id:"sales.view",name:"View Sales",description:"View sales data",category:"Sales",module:"Sales Management"},{id:"sales.edit",name:"Edit Sales",description:"Modify sales data",category:"Sales",module:"Sales Management"},{id:"sales.create",name:"Create Sales",description:"Create new sales orders",category:"Sales",module:"Sales Management"},{id:"reports.view",name:"View Reports",description:"Access reports",category:"Reports",module:"Reporting"},{id:"reports.export",name:"Export Reports",description:"Export report data",category:"Reports",module:"Reporting"},{id:"users.view",name:"View Users",description:"View user information",category:"Users",module:"User Management"},{id:"users.edit",name:"Edit Users",description:"Modify user data",category:"Users",module:"User Management"},{id:"users.add",name:"Add Users",description:"Add new users",category:"Users",module:"User Management"},{id:"users.delete",name:"Delete Users",description:"Delete users",category:"Users",module:"User Management"},{id:"settings.view",name:"View Settings",description:"Access system settings",category:"Settings",module:"System Settings"},{id:"settings.edit",name:"Edit Settings",description:"Modify system settings",category:"Settings",module:"System Settings"}]),[f,m]=O.useState(null),[p,y]=O.useState(null),[h,v]=O.useState(!1),[w,S]=O.useState(!1),b=d.reduce((k,A)=>(k[A.module]||(k[A.module]=[]),k[A.module].push(A),k),{}),x=(k,A,P)=>{a(F=>F.map(U=>U.id===k?P?{...U,permissions:[...U.permissions,A]}:{...U,permissions:U.permissions.filter(W=>W!==A)}:U))},g=(k,A)=>{a(P=>P.map(F=>F.id===k?{...F,permissions:A}:F))},N=k=>{if(p)u(A=>A.map(P=>P.id===p.id?{...P,...k}:P));else{const A={id:Date.now().toString(),...k,userCount:0};u(P=>[...P,A])}},j=k=>{u(A=>A.filter(P=>P.id!==k))},C=k=>{m(k),v(!0)},_=k=>{y(k),S(!0)},T=()=>{y(null),S(!0)},E=[{id:"users",name:"Users",icon:Tb},{id:"roles",name:"Roles",icon:Eb},{id:"permissions",name:"Permissions",icon:lT}];return ie.useEffect(()=>{(async()=>{try{const k=await de.getUsers();k!=null&&k.success&&a(k.data.map(A=>({id:A._id,name:A.name,email:A.email,role:A.role,status:(A.status||"Active").toLowerCase(),lastLogin:A.updatedAt?new Date(A.updatedAt).toLocaleString():"-",permissions:[]})))}catch{}})()},[]),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(fT,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings & Permissions"}),n.jsx("p",{className:"text-gray-600",children:"Manage user access and system permissions"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{className:"btn-secondary flex items-center",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n.jsxs("button",{className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"-mb-px flex space-x-2",children:E.map(k=>n.jsxs("button",{onClick:()=>t(k.id),className:`flex items-center space-x-2 py-2 px-3 font-medium text-sm rounded-md transition-colors ${e===k.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-800 hover:bg-gray-50 border border-transparent"}`,children:[n.jsx(k.icon,{className:"h-4 w-4"}),n.jsx("span",{children:k.name})]},k.id))})}),e==="users"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),n.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n.jsx("div",{className:"card overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(k=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name}),n.jsx("div",{className:"text-sm text-gray-500",children:k.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:k.role})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.lastLogin}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>C(k),className:"text-blue-600 hover:text-blue-900",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(wt,{className:"h-4 w-4"})})]})})]},k.id))})]})})})]}),e==="roles"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Role Management"}),n.jsxs("button",{onClick:T,className:"btn-primary flex items-center",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Role"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(k=>n.jsxs("div",{className:"card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.name}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>_(k),className:"text-blue-600 hover:text-blue-900",children:n.jsx(ns,{className:"h-4 w-4"})}),n.jsx("button",{className:"text-red-600 hover:text-red-900",children:n.jsx(wt,{className:"h-4 w-4"})})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:k.description}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("span",{children:[k.permissions.length," permissions"]}),n.jsxs("span",{children:[k.userCount," users"]})]})]},k.id))})]}),e==="permissions"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Permission Management"}),Object.entries(b).map(([k,A])=>n.jsxs("div",{className:"card p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:k}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(P=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900",children:P.name}),n.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:P.category})]}),n.jsx("p",{className:"text-xs text-gray-600",children:P.description})]},P.id))})]},k))]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add User"}),n.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),n.jsx("input",{className:"input-field",placeholder:"Full name",value:l.name,onChange:k=>o({...l,name:k.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",className:"input-field",placeholder:"you@company.com",value:l.email,onChange:k=>o({...l,email:k.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),n.jsx("input",{type:"password",className:"input-field",placeholder:"",value:l.password,onChange:k=>o({...l,password:k.target.value})})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>i(!1),className:"btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:async()=>{const k=await de.createUser({name:l.name,email:l.email,password:l.password,role:"Staff",status:"Active"});if(k!=null&&k.success){i(!1),o({name:"",email:"",password:"",role:"Staff",status:"Active"});const A=await de.getUsers();A!=null&&A.success&&a(A.data.map(P=>({id:P._id,name:P.name,email:P.email,role:P.role,status:(P.status||"Active").toLowerCase(),lastLogin:P.updatedAt?new Date(P.updatedAt).toLocaleString():"-",permissions:[]})))}},className:"btn-primary",children:"Save"})]})]})}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Permissions - ",f.name]}),n.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([k,A])=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:k}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(P=>n.jsxs("label",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",checked:f.permissions.includes(P.id),onChange:F=>x(f.id,P.id,F.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),n.jsx("div",{className:"text-xs text-gray-500",children:P.description})]})]},P.id))})]},k))}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsx("button",{onClick:()=>m(null),className:"btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:()=>m(null),className:"btn-primary",children:"Save Changes"})]})]})}),h&&f&&n.jsx(b1e,{user:f,permissions:d,onClose:()=>{v(!1),m(null)},onSave:g}),w&&n.jsx(w1e,{role:p,permissions:d,onClose:()=>{S(!1),y(null)},onSave:N,onDelete:j})]})},j1e=()=>{const[e,t]=O.useState([]),[r,a]=O.useState(!1),[s,i]=O.useState(!1),[l,o]=O.useState(1),[c]=O.useState(20),[u,d]=O.useState(0),[f,m]=O.useState(""),p=async()=>{try{a(!0);const v=await de.getItemsList({page:l,limit:c,search:f});if(v.success){const w=v.data||{},S=w.data||[],b=w.pagination||{};t(S),d(Number(b.total||0))}}finally{a(!1)}};O.useEffect(()=>{p()},[l,c]);const y=async()=>{var v;try{i(!0);const w=await de.syncItemsListFromZoho();await p();const S=((v=w.data)==null?void 0:v.summary)||(w==null?void 0:w.summary)||{};alert(`Synced. Total: ${S.total??0}, Created: ${S.created??0}, Updated: ${S.updated??0}, Skipped: ${S.skipped??0}`)}catch(w){alert(`Sync failed: ${(w==null?void 0:w.message)||"Unknown error"}`)}finally{i(!1)}},h=Math.max(1,Math.ceil(u/c));return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Items List"}),n.jsxs("button",{onClick:y,disabled:s,className:`btn-primary flex items-center ${s?"opacity-60":""}`,children:[n.jsx(dT,{className:"h-4 w-4 mr-2"}),s?"Syncing":"Sync from Zoho"]})]}),n.jsxs("div",{className:"card p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("input",{value:f,onChange:v=>m(v.target.value),placeholder:"Search SKU or Name",className:"input-field"}),n.jsx("button",{onClick:()=>{o(1),p()},className:"btn-secondary",children:"Search"})]}),n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-gray-600",children:[n.jsx("th",{className:"px-3 py-2",children:"SKU"}),n.jsx("th",{className:"px-3 py-2",children:"Name"}),n.jsx("th",{className:"px-3 py-2",children:"Zoho Item ID"}),n.jsx("th",{className:"px-3 py-2",children:"Category"}),n.jsx("th",{className:"px-3 py-2",children:"Unit"}),n.jsx("th",{className:"px-3 py-2",children:"Rate"}),n.jsx("th",{className:"px-3 py-2",children:"Updated"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:6,children:"Loading..."})}):e.length?e.map(v=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-3 py-2 font-mono",children:v.sku}),n.jsx("td",{className:"px-3 py-2",children:v.name}),n.jsx("td",{className:"px-3 py-2 font-mono",children:v.zohoItemId||"-"}),n.jsx("td",{className:"px-3 py-2",children:v.category||"-"}),n.jsx("td",{className:"px-3 py-2",children:v.unit||"-"}),n.jsx("td",{className:"px-3 py-2",children:Number(v.rate||0).toFixed(3)}),n.jsx("td",{className:"px-3 py-2",children:v.updatedAt?new Date(v.updatedAt).toLocaleString():"-"})]},`${v.sku}`)):n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:6,children:"No items"})})})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",l," of ",h]}),n.jsxs("div",{className:"space-x-2",children:[n.jsx("button",{disabled:l<=1,onClick:()=>o(v=>Math.max(1,v-1)),className:"btn-secondary",children:"Prev"}),n.jsx("button",{disabled:l>=h,onClick:()=>o(v=>Math.min(h,v+1)),className:"btn-secondary",children:"Next"})]})]})]})]})},S1e=()=>{const[e,t]=O.useState([]),[r,a]=O.useState(!1),[s,i]=O.useState(!1),l=async()=>{a(!0);try{const c=await de.getLocationsList({limit:200});if(c.success){const u=c.data||{};t(u.data||[])}}finally{a(!1)}};O.useEffect(()=>{l()},[]);const o=async()=>{i(!0);try{await de.syncLocationsFromZoho(),await l()}finally{i(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Locations"}),n.jsxs("button",{onClick:o,disabled:s,className:`btn-primary flex items-center ${s?"opacity-60":""}`,children:[n.jsx(dT,{className:"h-4 w-4 mr-2"}),s?"Syncing":"Sync from Zoho"]})]}),n.jsx("div",{className:"card p-4",children:n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-gray-600",children:[n.jsx("th",{className:"px-3 py-2",children:"Zoho Location ID"}),n.jsx("th",{className:"px-3 py-2",children:"Location Name"}),n.jsx("th",{className:"px-3 py-2",children:"Updated"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:3,children:"Loading..."})}):e.length?e.map(c=>n.jsxs("tr",{className:"border-t",children:[n.jsx("td",{className:"px-3 py-2 font-mono",children:c.zohoLocationId}),n.jsx("td",{className:"px-3 py-2",children:c.locationName}),n.jsx("td",{className:"px-3 py-2",children:c.updatedAt?new Date(c.updatedAt).toLocaleString():"-"})]},c.zohoLocationId)):n.jsx("tr",{children:n.jsx("td",{className:"px-3 py-4",colSpan:3,children:"No locations"})})})]})})})]})},k1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},C1e=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"Kuwait City",fromWarehouseName:"Kuwait City",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.getKuwaitCityRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{var g,N;if(x.preventDefault(),!!h())try{const j={fromOutlet:"Kuwait City",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(_=>({itemType:"Raw Material",itemCode:_.materialCode||"",itemName:_.materialName||"",category:"",subCategory:"",unitOfMeasure:_.unitOfMeasure,quantity:_.quantity,unitPrice:_.unitPrice,notes:_.remarks})),notes:a.notes,requestedBy:"Kuwait City Manager"},C=await de.createTransferOrder(j);if(console.log(" Kuwait City: Transfer order response:",C),console.log(" Kuwait City: response.data:",C.data),console.log(" Kuwait City: response.data._id:",(g=C.data)==null?void 0:g._id),console.log(" Kuwait City: response.data.id:",(N=C.data)==null?void 0:N.id),C.success){try{const _=a.items.map(()=>"Raw Material"),T=[...new Set(_)],E=T.length===1?T[0]:"Mixed",k=a.items.map(F=>`${F.materialName} (${F.quantity} ${F.unitOfMeasure})`).join(", "),A={title:`Transfer Request from Kuwait City - ${E}`,message:`Transfer order #${j.fromOutlet}-${Date.now()} from Kuwait City. Items: ${k}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Kuwait City",transferOrderId:C.data._id||C.data.id||C.data.transferId||null,itemType:E,priority:a.priority==="Urgent"?"high":"normal"};console.log(" Kuwait City: Creating notification with data:",A),console.log(" Kuwait City: transferOrderId being set to:",A.transferOrderId),console.log(" Kuwait City: response.data keys:",Object.keys(C.data)),console.log(" Kuwait City: response.data values:",C.data);const P=await de.createNotification(A);console.log("Notification sent to Central Kitchen:",P)}catch(_){console.error("Failed to send notification to Central Kitchen:",_)}alert("Transfer order created successfully!"),e("/kuwait-city/raw-materials")}else throw new Error(C.message||"Failed to create transfer order")}catch(j){console.error("Error creating transfer order:",j),alert("Error creating transfer order: "+(j instanceof Error?j.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/kuwait-city/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(k1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/kuwait-city/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},_1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},O1e=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"Kuwait City",fromWarehouseName:"Kuwait City",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.getKuwaitCityFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Kuwait City",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Kuwait City Manager"},N=await de.createTransferOrder(g);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),C=[...new Set(j)],_=C.length===1?C[0]:"Mixed",T=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),E={title:`Transfer Request from Kuwait City - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Kuwait City. Items: ${T}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Kuwait City",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},k=await de.createNotification(E);console.log("Notification sent to Central Kitchen:",k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/kuwait-city/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/kuwait-city/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(_1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/kuwait-city/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},E1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Mg=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"360 Mall",fromWarehouseName:"360 Mall",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.get360MallRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"360 Mall",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"360 Mall Manager"},N=await de.createTransferOrder(g);if(N.success){console.log(" 360 Mall: Transfer order created successfully:",N.data);try{const j=a.items.map(()=>"Raw Material"),C=[...new Set(j)],_=C.length===1?C[0]:"Mixed",T=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),E={title:`Transfer Request from 360 Mall - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from 360 Mall. Items: ${T}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"360 Mall",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};console.log(" 360 Mall: Attempting to create notification:",E);const k=await de.createNotification(E);console.log(" 360 Mall: Notification response:",k),k.success?console.log(" 360 Mall: Notification sent to Central Kitchen successfully!"):console.error(" 360 Mall: Failed to send notification:",k)}catch(j){console.error(" 360 Mall: Error sending notification to Central Kitchen:",j),console.error(" 360 Mall: Notification error details:",j.message)}alert("Transfer order created successfully!"),e("/360-mall/raw-materials")}else throw new Error(N.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/mall-food-court/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(E1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/mall-food-court/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},T1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},Rg=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"360 Mall",fromWarehouseName:"360 Mall",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.get360MallFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"360 Mall",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"360 Mall Manager"},N=await de.createTransferOrder(g);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),C=[...new Set(j)],_=C.length===1?C[0]:"Mixed",T=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),E={title:`Transfer Request from 360 Mall - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from 360 Mall. Items: ${T}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"360 Mall",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},k=await de.createNotification(E);console.log("Notification sent to Central Kitchen:",k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/360-mall/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/mall-food-court/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(T1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/mall-food-court/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},A1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},S4=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"Vibes Complex",fromWarehouseName:"Vibes Complex",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.getVibeComplexRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Vibes Complex",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Vibes Complex Manager"},N=await de.createTransferOrder(g);if(N.success){try{const j=a.items.map(()=>"Raw Material"),C=[...new Set(j)],_=C.length===1?C[0]:"Mixed",T=a.items.map(A=>`${A.materialName} (${A.quantity} ${A.unitOfMeasure})`).join(", "),E={title:`Transfer Request from Vibes Complex - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Vibes Complex. Items: ${T}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Vibes Complex",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"},k=await de.createNotification(E);console.log("Notification sent to Central Kitchen:",k)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/marina-walk-cafe/raw-materials")}else throw new Error(N.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(A1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm w-24",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/marina-walk-cafe/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},P1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},k4=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"Vibes Complex",fromWarehouseName:"Vibes Complex",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.getVibeComplexFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Vibes Complex",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Vibes Complex Manager"},N=await de.createTransferOrder(g);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),C=[...new Set(j)],_=C.length===1?C[0]:"Mixed",T=a.items.map(k=>`${k.materialName} (${k.quantity} ${k.unitOfMeasure})`).join(", "),E={title:`Transfer Request from Vibes Complex - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Vibes Complex. Items: ${T}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Vibes Complex",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await de.createNotification(E)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/marina-walk-cafe/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/marina-walk-cafe/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(P1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/marina-walk-cafe/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},D1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},C4=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"Taiba Hospital",fromWarehouseName:"Taiba Hospital",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.getTaibaKitchenRawMaterials({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"raw-material",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.materialCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.materialName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Taiba Hospital",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Raw Material",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Taiba Hospital Manager"},N=await de.createTransferOrder(g);if(N.success){try{const j=a.items.map(()=>"Raw Material"),C=[...new Set(j)],_=C.length===1?C[0]:"Mixed",T=a.items.map(k=>`${k.materialName} (${k.quantity} ${k.unitOfMeasure})`).join(", "),E={title:`Transfer Request from Taiba Hospital - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Taiba Hospital. Items: ${T}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Taiba Hospital",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await de.createNotification(E)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/drive-thru-express/raw-materials")}else throw new Error(N.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/drive-thru-express/raw-materials"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Raw Materials"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Raw Materials"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Raw Materials (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Raw Material"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No raw materials added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Raw Material" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-blue-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Code"}),n.jsx(D1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Raw Material",options:t.map(N=>({value:N.materialCode,label:`${N.materialCode} - ${N.materialName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Material Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Material Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/drive-thru-express/raw-materials"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})},I1e=({value:e,onChange:t,options:r,placeholder:a="Select Item",disabled:s=!1})=>{const[i,l]=O.useState(!1),[o,c]=O.useState(""),[u,d]=O.useState(r),f=O.useRef(null),m=O.useRef(null);O.useEffect(()=>{d(o?r.filter(h=>h.label.toLowerCase().includes(o.toLowerCase())||h.value.toLowerCase().includes(o.toLowerCase())):r)},[o,r]),O.useEffect(()=>{const h=v=>{f.current&&!f.current.contains(v.target)&&(l(!1),c(""))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),O.useEffect(()=>{i&&m.current&&m.current.focus()},[i]);const p=h=>{t(h),l(!1),c("")},y=r.find(h=>h.value===e);return n.jsxs("div",{className:"relative",ref:f,children:[n.jsx("button",{type:"button",className:`w-full px-3 py-2 text-left border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${s?"bg-gray-100 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>!s&&l(!i),disabled:s,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:y?"text-gray-900":"text-gray-500",children:y?y.label:a}),n.jsx(la,{className:`h-4 w-4 text-gray-400 transition-transform ${i?"rotate-180":""}`})]})}),i&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{ref:m,type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Search items...",value:o,onChange:h=>c(h.target.value)})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.length>0?u.map(h=>n.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none text-sm",onClick:()=>p(h.value),children:h.label},h.value)):n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"})})]})]})},_4=()=>{const e=Qe(),[t,r]=O.useState([]),[a,s]=O.useState({transferNumber:"",fromWarehouseId:"Taiba Hospital",fromWarehouseName:"Taiba Hospital",toWarehouseId:"Central Kitchen",toWarehouseName:"Central Kitchen",transferDate:"",expectedDeliveryDate:"",status:"Pending",priority:"Normal",totalAmount:0,items:[],transferType:"Internal",notes:""}),[i,l]=O.useState({}),[o,c]=O.useState(!0);O.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const x=new Date().toISOString().split("T")[0],g=new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],N=`TR-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`;s(C=>({...C,transferNumber:N,transferDate:x,expectedDeliveryDate:g}));const j=await de.getTaibaKitchenFinishedProducts({limit:1e3});j.success&&j.data&&r(j.data)}catch(x){console.error("Error loading data:",x)}finally{c(!1)}},d=(x,g)=>{s(N=>({...N,[x]:g})),i[x]&&l(N=>({...N,[x]:""}))},f=()=>{const x={materialId:"",materialCode:"",materialName:"",itemType:"finished-good",quantity:0,unitOfMeasure:"",unitPrice:0,totalPrice:0,remarks:""};s(g=>({...g,items:[...g.items,x]}))},m=(x,g,N)=>{s(j=>({...j,items:j.items.map((C,_)=>{if(_===x){const T={...C,[g]:N};return(g==="quantity"||g==="unitPrice")&&(T.totalPrice=T.quantity*T.unitPrice),T}return C})}))},p=(x,g)=>{if(!a.items[x])return;const j=t.find(C=>C.productCode===g);j?(m(x,"materialId",j.id||j._id),m(x,"materialCode",g),m(x,"materialName",j.productName),m(x,"unitOfMeasure",j.unitOfMeasure),m(x,"unitPrice",j.unitPrice)):(m(x,"materialId",""),m(x,"materialCode",g),m(x,"materialName",""),m(x,"unitOfMeasure",""),m(x,"unitPrice",0))},y=x=>{s(g=>({...g,items:g.items.filter((N,j)=>j!==x)}))},h=()=>{const x={};return a.transferNumber.trim()||(x.transferNumber="Transfer number is required"),a.transferDate||(x.transferDate="Transfer date is required"),a.expectedDeliveryDate||(x.expectedDeliveryDate="Expected delivery date is required"),a.items.length===0&&(x.items="At least one transfer item is required"),l(x),Object.keys(x).length===0},v=async x=>{if(x.preventDefault(),!!h())try{const g={fromOutlet:"Taiba Hospital",toOutlet:"Central Kitchen",transferDate:a.transferDate,priority:a.priority,items:a.items.map(j=>({itemType:"Finished Goods",itemCode:j.materialCode||"",itemName:j.materialName||"",category:"",subCategory:"",unitOfMeasure:j.unitOfMeasure,quantity:j.quantity,unitPrice:j.unitPrice,notes:j.remarks})),notes:a.notes,requestedBy:"Taiba Hospital Manager"},N=await de.createTransferOrder(g);if(N.success){try{const j=a.items.map(()=>"Finished Goods"),C=[...new Set(j)],_=C.length===1?C[0]:"Mixed",T=a.items.map(k=>`${k.materialName} (${k.quantity} ${k.unitOfMeasure})`).join(", "),E={title:`Transfer Request from Taiba Hospital - ${_}`,message:`Transfer order #${g.fromOutlet}-${Date.now()} from Taiba Hospital. Items: ${T}`,type:"transfer_request",targetOutlet:"Central Kitchen",sourceOutlet:"Taiba Hospital",transferOrderId:N.data._id||N.data.id,itemType:_,priority:a.priority==="Urgent"?"high":"normal"};await de.createNotification(E)}catch(j){console.error("Failed to send notification to Central Kitchen:",j)}alert("Transfer order created successfully!"),e("/drive-thru-express/finished-goods")}else throw new Error(N.message||"Failed to create transfer order")}catch(g){console.error("Error creating transfer order:",g),alert("Error creating transfer order: "+(g instanceof Error?g.message:"Unknown error"))}},w=["Draft","Approved","In Transit","Delivered","Cancelled"],S=["Low","Medium","High","Urgent","Normal"],b=["Internal","External","Emergency"];return o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transfer order data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:()=>e("/drive-thru-express/finished-goods"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[n.jsx(Lt,{className:"h-5 w-5 mr-2"}),"Back to Finished Goods"]})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Request Finished Goods"})]}),n.jsx("div",{className:"card p-8",children:n.jsxs("form",{onSubmit:v,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Number *"}),n.jsx("input",{type:"text",className:`input-field ${i.transferNumber?"border-red-500":""}`,value:a.transferNumber,onChange:x=>d("transferNumber",x.target.value),placeholder:"TO-2024-001"}),i.transferNumber&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferNumber})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Type"}),n.jsx("select",{className:"input-field",value:a.transferType,onChange:x=>d("transferType",x.target.value),children:b.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),n.jsx("select",{className:"input-field",value:a.priority,onChange:x=>d("priority",x.target.value),children:S.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),n.jsx("select",{className:"input-field",value:a.status,onChange:x=>d("status",x.target.value),children:w.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.transferDate?"border-red-500":""}`,value:a.transferDate,onChange:x=>d("transferDate",x.target.value)}),i.transferDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.transferDate})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Delivery Date *"}),n.jsx("input",{type:"date",className:`input-field ${i.expectedDeliveryDate?"border-red-500":""}`,value:a.expectedDeliveryDate,onChange:x=>d("expectedDeliveryDate",x.target.value)}),i.expectedDeliveryDate&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.expectedDeliveryDate})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Finished Goods (",t.length," available)"]}),n.jsxs("button",{type:"button",onClick:f,className:"btn-secondary flex items-center text-sm",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Finished Good"]})]}),a.items.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"No finished goods added yet"}),n.jsx("p",{className:"text-sm",children:'Click "Add Finished Good" to get started'})]}):n.jsx("div",{className:"space-y-4",children:a.items.map((x,g)=>n.jsxs("div",{className:"grid grid-cols-8 gap-3 p-4 border border-gray-200 rounded-lg bg-green-50",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Code"}),n.jsx(I1e,{value:x.materialCode,onChange:N=>p(g,N),placeholder:"Select Finished Good",options:t.map(N=>({value:N.productCode,label:`${N.productCode} - ${N.productName}`}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.materialName,placeholder:"Product Name",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",className:"input-field text-sm",value:x.quantity,onChange:N=>m(g,"quantity",parseFloat(N.target.value)||0),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit"}),n.jsx("input",{type:"text",className:"input-field text-sm bg-gray-100",value:x.unitOfMeasure,placeholder:"Unit",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price"}),n.jsx("input",{type:"number",step:"0.01",className:"input-field text-sm bg-gray-100",value:x.unitPrice,placeholder:"0.00",readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks"}),n.jsx("input",{type:"text",className:"input-field text-sm",value:x.remarks||"",onChange:N=>m(g,"remarks",N.target.value),placeholder:"Notes"})]}),n.jsx("div",{className:"flex items-end justify-end",children:n.jsx("button",{type:"button",onClick:()=>y(g),className:"text-red-600 hover:text-red-900 p-1",children:n.jsx(wt,{className:"h-4 w-4"})})}),n.jsx("div",{className:"col-span-8",children:n.jsxs("div",{className:"text-sm text-gray-600",children:["Total Price: ",x.totalPrice.toFixed(2)," KWD"]})})]},g))}),a.items.length>0&&n.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Total Transfer Amount: ",a.items.reduce((x,g)=>x+g.totalPrice,0).toFixed(2)," KWD"]})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),n.jsx("textarea",{className:"input-field",rows:3,value:a.notes,onChange:x=>d("notes",x.target.value),placeholder:"Additional notes or special instructions"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[n.jsxs("button",{type:"button",onClick:()=>e("/drive-thru-express/finished-goods"),className:"btn-secondary flex items-center",children:[n.jsx(ft,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs("button",{type:"submit",className:"btn-primary flex items-center",children:[n.jsx(St,{className:"h-4 w-4 mr-2"}),"Create Transfer Order"]})]})]})})]})};function F1e(){const t=wa().pathname==="/login",r=typeof window<"u"?localStorage.getItem("auth_token"):null,a=typeof window<"u"?(()=>{try{return JSON.parse(localStorage.getItem("auth_user")||"null")}catch{return null}})():null,s=!!(a!=null&&a.isAdmin);return t?n.jsx(Rp,{children:n.jsx(ke,{path:"/login",element:n.jsx(m_,{})})}):r?n.jsx(s8,{children:n.jsxs(Rp,{children:[n.jsx(ke,{path:"/",element:n.jsx(f_,{})}),n.jsx(ke,{path:"/dashboard",element:n.jsx(f_,{})}),n.jsx(ke,{path:"/raw-materials",element:n.jsx(Loe,{})}),n.jsx(ke,{path:"/raw-materials/add",element:n.jsx($oe,{})}),n.jsx(ke,{path:"/raw-materials/edit/:id",element:n.jsx(Boe,{})}),n.jsx(ke,{path:"/bill-of-materials",element:n.jsx(Uoe,{})}),n.jsx(ke,{path:"/bill-of-materials/add",element:n.jsx(qoe,{})}),n.jsx(ke,{path:"/bill-of-materials/edit/:id",element:n.jsx(Koe,{})}),n.jsx(ke,{path:"/job-orders",element:n.jsx(zoe,{})}),n.jsx(ke,{path:"/job-orders/add",element:n.jsx(Hoe,{})}),n.jsx(ke,{path:"/job-orders/edit/:id",element:n.jsx(Xoe,{})}),n.jsx(ke,{path:"/purchase-orders",element:n.jsx(Yoe,{})}),n.jsx(ke,{path:"/purchase-orders/add",element:n.jsx(Qoe,{})}),n.jsx(ke,{path:"/purchase-orders/edit/:id",element:n.jsx(Joe,{})}),n.jsx(ke,{path:"/items-list",element:n.jsx(j1e,{})}),n.jsx(ke,{path:"/locations-list",element:n.jsx(S1e,{})}),n.jsx(ke,{path:"/good-receipt-notes",element:n.jsx(Zoe,{})}),n.jsx(ke,{path:"/good-receipt-notes/add",element:n.jsx(ece,{})}),n.jsx(ke,{path:"/good-receipt-notes/edit/:id",element:n.jsx(tce,{})}),n.jsx(ke,{path:"/warehouse-master",element:n.jsx(rce,{})}),n.jsx(ke,{path:"/warehouse-master/add",element:n.jsx(ace,{})}),n.jsx(ke,{path:"/warehouse-master/edit/:id",element:n.jsx(nce,{})}),n.jsx(ke,{path:"/transfer-orders",element:n.jsx(sce,{})}),n.jsx(ke,{path:"/transfer-orders/edit/:id",element:n.jsx(ice,{})}),n.jsx(ke,{path:"/outlets",element:n.jsx(lce,{})}),n.jsx(ke,{path:"/outlets/add",element:n.jsx(oce,{})}),n.jsx(ke,{path:"/outlets/edit/:id",element:n.jsx(cce,{})}),n.jsx(ke,{path:"/central-kitchen",element:n.jsx(uce,{})}),n.jsx(ke,{path:"/central-kitchen/raw-materials",element:n.jsx(dce,{})}),n.jsx(ke,{path:"/central-kitchen/finished-goods",element:n.jsx(hce,{})}),n.jsx(ke,{path:"/central-kitchen/make-finished-good",element:n.jsx(xce,{})}),n.jsx(ke,{path:"/central-kitchen/create-transfer",element:n.jsx(gce,{})}),n.jsx(ke,{path:"/kuwait-city",element:n.jsx(Fg,{})}),n.jsx(ke,{path:"/kuwait-city/raw-materials",element:n.jsx(Fg,{})}),n.jsx(ke,{path:"/kuwait-city/finished-goods",element:n.jsx(Fg,{})}),n.jsx(ke,{path:"/kuwait-city/request-raw-materials",element:n.jsx(C1e,{})}),n.jsx(ke,{path:"/kuwait-city/request-finished-goods",element:n.jsx(O1e,{})}),n.jsx(ke,{path:"/360-mall",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/360-mall/raw-materials",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/360-mall/finished-goods",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/360-mall/request-raw-materials",element:n.jsx(Mg,{})}),n.jsx(ke,{path:"/360-mall/request-finished-goods",element:n.jsx(Rg,{})}),n.jsx(ke,{path:"/marina-walk-cafe",element:n.jsx(uo,{})}),n.jsx(ke,{path:"/marina-walk-cafe/raw-materials",element:n.jsx(uo,{})}),n.jsx(ke,{path:"/marina-walk-cafe/finished-goods",element:n.jsx(uo,{})}),n.jsx(ke,{path:"/marina-walk-cafe/request-raw-materials",element:n.jsx(S4,{})}),n.jsx(ke,{path:"/marina-walk-cafe/request-finished-goods",element:n.jsx(k4,{})}),n.jsx(ke,{path:"/mall-food-court",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/360-mall/raw-materials",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/360-mall/finished-goods",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/360-mall/request-raw-materials",element:n.jsx(Mg,{})}),n.jsx(ke,{path:"/360-mall/request-finished-goods",element:n.jsx(Rg,{})}),n.jsx(ke,{path:"/mall-food-court/raw-materials",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/mall-food-court/finished-goods",element:n.jsx(Qs,{})}),n.jsx(ke,{path:"/mall-food-court/request-raw-materials",element:n.jsx(Mg,{})}),n.jsx(ke,{path:"/mall-food-court/request-finished-goods",element:n.jsx(Rg,{})}),n.jsx(ke,{path:"/vibes-complex",element:n.jsx(uo,{})}),n.jsx(ke,{path:"/vibes-complex/raw-materials",element:n.jsx(uo,{})}),n.jsx(ke,{path:"/vibes-complex/finished-goods",element:n.jsx(uo,{})}),n.jsx(ke,{path:"/vibes-complex/request-raw-materials",element:n.jsx(S4,{})}),n.jsx(ke,{path:"/vibes-complex/request-finished-goods",element:n.jsx(k4,{})}),n.jsx(ke,{path:"/drive-thru-express",element:n.jsx(fo,{})}),n.jsx(ke,{path:"/drive-thru-express/raw-materials",element:n.jsx(fo,{})}),n.jsx(ke,{path:"/drive-thru-express/finished-goods",element:n.jsx(fo,{})}),n.jsx(ke,{path:"/drive-thru-express/request-raw-materials",element:n.jsx(C4,{})}),n.jsx(ke,{path:"/drive-thru-express/request-finished-goods",element:n.jsx(_4,{})}),n.jsx(ke,{path:"/taiba-hospital",element:n.jsx(fo,{})}),n.jsx(ke,{path:"/taiba-hospital/raw-materials",element:n.jsx(fo,{})}),n.jsx(ke,{path:"/taiba-hospital/finished-goods",element:n.jsx(fo,{})}),n.jsx(ke,{path:"/taiba-hospital/request-raw-materials",element:n.jsx(C4,{})}),n.jsx(ke,{path:"/taiba-hospital/request-finished-goods",element:n.jsx(_4,{})}),n.jsx(ke,{path:"/raw-material-forecast",element:n.jsx(g1e,{})}),n.jsx(ke,{path:"/raw-material-forecast/add",element:n.jsx(y1e,{})}),n.jsx(ke,{path:"/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/kuwait-city/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/kuwait-city/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/kuwait-city/pos-sales/create-order",element:n.jsx(Js,{})}),n.jsx(ke,{path:"/marina-walk-cafe/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/marina-walk-cafe/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/marina-walk-cafe/pos-sales/create-order",element:n.jsx(Js,{})}),n.jsx(ke,{path:"/360-mall/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/360-mall/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/360-mall/pos-sales/create-order",element:n.jsx(Js,{})}),n.jsx(ke,{path:"/mall-food-court/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/mall-food-court/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/mall-food-court/pos-sales/create-order",element:n.jsx(Js,{})}),n.jsx(ke,{path:"/vibes-complex/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/vibes-complex/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/vibes-complex/pos-sales/create-order",element:n.jsx(Js,{})}),n.jsx(ke,{path:"/drive-thru-express/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/drive-thru-express/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/drive-thru-express/pos-sales/create-order",element:n.jsx(Js,{})}),n.jsx(ke,{path:"/taiba-hospital/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/taiba-hospital/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/taiba-hospital/pos-sales/create-order",element:n.jsx(Js,{})}),n.jsx(ke,{path:"/taiba-hospital/sales-orders",element:n.jsx(hs,{})}),n.jsx(ke,{path:"/taiba-hospital/sales-orders/add",element:n.jsx(xs,{})}),n.jsx(ke,{path:"/taiba-hospital/pos-sales/create-order",element:n.jsx(Js,{})}),s?n.jsx(ke,{path:"/settings",element:n.jsx(N1e,{})}):n.jsx(ke,{path:"/settings",element:n.jsx(O5,{to:"/dashboard",replace:!0})})]})}):n.jsx(Rp,{children:n.jsx(ke,{path:"*",element:n.jsx(m_,{})})})}Lg.createRoot(document.getElementById("root")).render(n.jsx(ie.StrictMode,{children:n.jsx(iR,{store:GR,children:n.jsx(M5,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsx(F1e,{})})})}));
